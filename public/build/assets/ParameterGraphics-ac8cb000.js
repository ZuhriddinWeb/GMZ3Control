import{r as ref,G as inject,u as useToast,c as useI18n,d as reactive,f as resolveComponent,g as openBlock,h as createElementBlock,k as createVNode,j as unref,D as VaButton,l as withCtx,i as createBaseVNode,t as toDisplayString,V as VaForm,n as VaInput,m as axios,I as watch,J as Fragment,K as renderList,L as createBlock,B as createTextVNode,M as createCommentVNode,H as provide,x as computed,o as onMounted}from"./app-9792dbb1.js";/* empty css                   */import{m as millisecondsInHour,a as millisecondsInMinute,f as format}from"./format-45c98358.js";function parseISO(e,a){const r=(a==null?void 0:a.additionalDigits)??2,s=splitDateString(e);let n;if(s.date){const o=parseYear(s.date,r);n=parseDate(o.restDateString,o.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const i=n.getTime();let l=0,u;if(s.time&&(l=parseTime(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(u=parseTimezone(s.timezone),isNaN(u))return new Date(NaN)}else{const o=new Date(i+l),g=new Date(0);return g.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),g.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),g}return new Date(i+l+u)}const patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(e){const a={},r=e.split(patterns.dateTimeDelimiter);let s;if(r.length>2)return a;if(/:/.test(r[0])?s=r[0]:(a.date=r[0],s=r[1],patterns.timeZoneDelimiter.test(a.date)&&(a.date=e.split(patterns.timeZoneDelimiter)[0],s=e.substr(a.date.length,e.length))),s){const n=patterns.timezone.exec(s);n?(a.time=s.replace(n[1],""),a.timezone=n[1]):a.time=s}return a}function parseYear(e,a){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?n:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function parseDate(e,a){if(a===null)return new Date(NaN);const r=e.match(dateRegex);if(!r)return new Date(NaN);const s=!!r[4],n=parseDateUnit(r[1]),i=parseDateUnit(r[2])-1,l=parseDateUnit(r[3]),u=parseDateUnit(r[4]),o=parseDateUnit(r[5])-1;if(s)return validateWeekDate(a,u,o)?dayOfISOWeekYear(a,u,o):new Date(NaN);{const g=new Date(0);return!validateDate(a,i,l)||!validateDayOfYearDate(a,n)?new Date(NaN):(g.setUTCFullYear(a,i,Math.max(n,l)),g)}}function parseDateUnit(e){return e?parseInt(e):1}function parseTime(e){const a=e.match(timeRegex);if(!a)return NaN;const r=parseTimeUnit(a[1]),s=parseTimeUnit(a[2]),n=parseTimeUnit(a[3]);return validateTime(r,s,n)?r*millisecondsInHour+s*millisecondsInMinute+n*1e3:NaN}function parseTimeUnit(e){return e&&parseFloat(e.replace(",","."))||0}function parseTimezone(e){if(e==="Z")return 0;const a=e.match(timezoneRegex);if(!a)return 0;const r=a[1]==="+"?-1:1,s=parseInt(a[2]),n=a[3]&&parseInt(a[3])||0;return validateTimezone(s,n)?r*(s*millisecondsInHour+n*millisecondsInMinute):NaN}function dayOfISOWeekYear(e,a,r){const s=new Date(0);s.setUTCFullYear(e,0,4);const n=s.getUTCDay()||7,i=(a-1)*7+r+1-n;return s.setUTCDate(s.getUTCDate()+i),s}const daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(e){return e%400===0||e%4===0&&e%100!==0}function validateDate(e,a,r){return a>=0&&a<=11&&r>=1&&r<=(daysInMonths[a]||(isLeapYearIndex(e)?29:28))}function validateDayOfYearDate(e,a){return a>=1&&a<=(isLeapYearIndex(e)?366:365)}function validateWeekDate(e,a,r){return a>=1&&a<=53&&r>=0&&r<=6}function validateTime(e,a,r){return e===24?a===0&&r===0:r>=0&&r<60&&a>=0&&a<60&&e>=0&&e<25}function validateTimezone(e,a){return a>=0&&a<=59}const _hoisted_1$4={class:"h-full w-full text-center content-center"},_hoisted_2$4={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},_hoisted_3$3={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},_hoisted_4$3={class:"grid grid-cols-2 md:grid-cols-1 gap-1 items-end w-full"},_hoisted_5$2={class:"flex gap-5 flex-wrap w-full mt-4"},_hoisted_6$2={class:"grid grid-cols-2 md:grid-cols-1 gap-1 items-end w-full"},_sfc_main$4={__name:"EditModal",props:["params"],setup(e){const a=e,r=ref(!1),s=inject("onupdated"),{init:n}=useToast(),{t:i}=useI18n(),l=ref([]),u=ref([]),o=ref([]),g=ref([]),d=ref([]),v=ref([]),m=reactive({ParametersID:"",FactoryStructureID:"",GrapicsID:"",SourceID:"",CurrentTime:"",EndingTime:"",OrderNumber:"",BlogID:"",PageId:"",id:a.params.data.id}),h=async()=>{var p,c,T,y,V,b,B;try{const[x,D,I,k,C,_,f]=await Promise.all([axios.get("/param"),axios.get("/graphics"),axios.get("/structure"),axios.get("/blogs"),axios.get("/sources"),axios.get("/pages"),axios.get(`get-params-for-id-edit/${a.params.data.id}`,{timeout:1e4})]);l.value=x.data.map(w=>({value:w.Uuid,text:w.Name})),u.value=D.data.map(w=>({value:w.id,text:w.Name})),o.value=I.data.map(w=>({value:w.id,text:w.Name})),g.value=k.data.map(w=>({value:w.id,text:w.Name})),d.value=C.data.map(w=>({value:w.id,text:w.Name})),v.value=_.data.map(w=>({value:w.id,text:w.Name})),m.ParametersID=((p=f.data[0])==null?void 0:p.ParametersID)||null,m.GrapicsID=+((c=f.data[0])==null?void 0:c.GrapicsID)||null,m.FactoryStructureID=+((T=f.data[0])==null?void 0:T.Sid)||null,m.SourceID=+((y=f.data[0])==null?void 0:y.SourceID)||null,m.OrderNumber=((V=f.data[0])==null?void 0:V.OrderNumber)||null,m.CurrentTime=(b=f.data[0])!=null&&b.CurrentTime?parseISO(f.data[0].CurrentTime):null,m.EndingTime=(B=f.data[0])!=null&&B.EndingTime?parseISO(f.data[0].EndingTime):null}catch(x){console.error("Error fetching data:",x)}},N=async()=>{try{const{data:p}=await axios.put("/paramsgraph",m);p.status===200?(s(a.params.node,p.unit),r.value=!1,n({message:i("login.successMessage"),color:"success"})):console.error("Error saving data:",p.message)}catch(p){console.error("Error saving data:",p)}};return(p,c)=>{const T=resolveComponent("VaSelect"),y=resolveComponent("VaDatePicker"),V=resolveComponent("VaModal");return openBlock(),createElementBlock("main",_hoisted_1$4,[createVNode(unref(VaButton),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:c[0]||(c[0]=b=>r.value=!0)}),createVNode(V,{modelValue:r.value,"onUpdate:modelValue":c[10]||(c[10]=b=>r.value=b),"ok-text":unref(i)("modals.apply"),"cancel-text":unref(i)("modals.cancel"),onOk:N,onClose:c[11]||(c[11]=b=>r.value=!1),"close-button":""},{default:withCtx(()=>[createBaseVNode("h3",{class:"va-h3",onVnodeMounted:h},toDisplayString(unref(i)("modals.editFactory"))+" "+toDisplayString(a.params.data.id),513),createBaseVNode("div",null,[createVNode(unref(VaForm),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$4,[createVNode(T,{modelValue:m.ParametersID,"onUpdate:modelValue":c[1]||(c[1]=b=>m.ParametersID=b),"value-by":"value",class:"mb-1",label:unref(i)("menu.params"),options:l.value,searchable:""},null,8,["modelValue","label","options"]),createVNode(T,{modelValue:m.GrapicsID,"onUpdate:modelValue":c[2]||(c[2]=b=>m.GrapicsID=b),"value-by":"value",class:"mb-1",label:unref(i)("menu.graphictimes"),options:u.value,clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_3$3,[createVNode(T,{modelValue:m.FactoryStructureID,"onUpdate:modelValue":c[3]||(c[3]=b=>m.FactoryStructureID=b),"value-by":"value",class:"mb-1",label:unref(i)("menu.structure"),options:o.value,clearable:""},null,8,["modelValue","label","options"]),createVNode(T,{modelValue:m.BlogID,"onUpdate:modelValue":c[4]||(c[4]=b=>m.BlogID=b),"value-by":"value",class:"mb-1",label:unref(i)("menu.blogs"),options:g.value??[],clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_4$3,[createVNode(T,{modelValue:m.SourceID,"onUpdate:modelValue":c[5]||(c[5]=b=>m.SourceID=b),"value-by":"value",class:"mb-1",label:unref(i)("menu.sources"),options:d.value,clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_5$2,[createVNode(y,{modelValue:m.CurrentTime,"onUpdate:modelValue":c[6]||(c[6]=b=>m.CurrentTime=b),stateful:"","highlight-weekend":""},null,8,["modelValue"]),createVNode(y,{modelValue:m.EndingTime,"onUpdate:modelValue":c[7]||(c[7]=b=>m.EndingTime=b),stateful:"","highlight-weekend":""},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_6$2,[createVNode(T,{modelValue:m.PageId,"onUpdate:modelValue":c[8]||(c[8]=b=>m.PageId=b),"value-by":"value",class:"mb-1",label:unref(i)("menu.pages"),options:v.value,searchable:""},null,8,["modelValue","label","options"])]),createVNode(unref(VaInput),{type:"number",class:"w-full",modelValue:m.OrderNumber,"onUpdate:modelValue":c[9]||(c[9]=b=>m.OrderNumber=b),rules:[b=>b&&b.length>0||"To'ldirish majburiy bo'lgan maydon"],label:unref(i)("modals.ordernumber")},null,8,["modelValue","rules","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},_hoisted_1$3={class:"h-full w-full text-center content-center"},_hoisted_2$3={class:"va-h3"},_sfc_main$3={__name:"DeleteModal",props:["params"],setup(e){const{init:a}=useToast(),{t:r}=useI18n(),s=ref(!1),n=e,i=inject("ondeleted"),l=async()=>{try{const{data:u}=await axios.delete(`/paramsgraph/${n.params.data.id}`);u.status===200?(i(n.params.data),s.value=!1,a({message:r("login.successMessage"),color:"success"})):console.error("Error deleting data:",u.message)}catch(u){console.error("Error deleting data:",u)}};return(u,o)=>{const g=resolveComponent("VaModal");return openBlock(),createElementBlock("main",_hoisted_1$3,[createVNode(unref(VaButton),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:o[0]||(o[0]=d=>s.value=!0)}),createVNode(g,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=d=>s.value=d),"ok-text":unref(r)("modals.apply"),"cancel-text":unref(r)("modals.cancel"),onClose:o[2]||(o[2]=d=>s.value=!1),onOk:l,"close-button":""},{default:withCtx(()=>[createBaseVNode("h3",_hoisted_2$3,toDisplayString(unref(r)("modals.title")),1),createBaseVNode("p",null,toDisplayString(unref(r)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};var defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(e,a,r){return Math.min(Math.max(e,a),r)}function stringContains(e,a){return e.indexOf(a)>-1}function applyArguments(e,a){return e.apply(null,a)}var is={arr:function(e){return Array.isArray(e)},obj:function(e){return stringContains(Object.prototype.toString.call(e),"Object")},pth:function(e){return is.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||is.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return is.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return is.hex(e)||is.rgb(e)||is.hsl(e)},key:function(e){return!defaultInstanceSettings.hasOwnProperty(e)&&!defaultTweenSettings.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function parseEasingParameters(e){var a=/\(([^)]+)\)/.exec(e);return a?a[1].split(",").map(function(r){return parseFloat(r)}):[]}function spring(e,a){var r=parseEasingParameters(e),s=minMax(is.und(r[0])?1:r[0],.1,100),n=minMax(is.und(r[1])?100:r[1],.1,100),i=minMax(is.und(r[2])?10:r[2],.1,100),l=minMax(is.und(r[3])?0:r[3],.1,100),u=Math.sqrt(n/s),o=i/(2*Math.sqrt(n*s)),g=o<1?u*Math.sqrt(1-o*o):0,d=1,v=o<1?(o*u+-l)/g:-l+u;function m(N){var p=a?a*N/1e3:N;return o<1?p=Math.exp(-p*o*u)*(d*Math.cos(g*p)+v*Math.sin(g*p)):p=(d+v*p)*Math.exp(-p*u),N===0||N===1?N:1-p}function h(){var N=cache.springs[e];if(N)return N;for(var p=1/6,c=0,T=0;;)if(c+=p,m(c)===1){if(T++,T>=16)break}else T=0;var y=c*p*1e3;return cache.springs[e]=y,y}return a?m:h}function steps(e){return e===void 0&&(e=10),function(a){return Math.ceil(minMax(a,1e-6,1)*e)*(1/e)}}var bezier=function(){var e=11,a=1/(e-1);function r(d,v){return 1-3*v+3*d}function s(d,v){return 3*v-6*d}function n(d){return 3*d}function i(d,v,m){return((r(v,m)*d+s(v,m))*d+n(v))*d}function l(d,v,m){return 3*r(v,m)*d*d+2*s(v,m)*d+n(v)}function u(d,v,m,h,N){var p,c,T=0;do c=v+(m-v)/2,p=i(c,h,N)-d,p>0?m=c:v=c;while(Math.abs(p)>1e-7&&++T<10);return c}function o(d,v,m,h){for(var N=0;N<4;++N){var p=l(v,m,h);if(p===0)return v;var c=i(v,m,h)-d;v-=c/p}return v}function g(d,v,m,h){if(!(0<=d&&d<=1&&0<=m&&m<=1))return;var N=new Float32Array(e);if(d!==v||m!==h)for(var p=0;p<e;++p)N[p]=i(p*a,d,m);function c(T){for(var y=0,V=1,b=e-1;V!==b&&N[V]<=T;++V)y+=a;--V;var B=(T-N[V])/(N[V+1]-N[V]),x=y+B*a,D=l(x,d,m);return D>=.001?o(T,x,d,m):D===0?x:u(T,y,y+a,d,m)}return function(T){return d===v&&m===h||T===0||T===1?T:i(c(T),v,h)}}return g}(),penner=function(){var e={linear:function(){return function(s){return s}}},a={Sine:function(){return function(s){return 1-Math.cos(s*Math.PI/2)}},Expo:function(){return function(s){return s?Math.pow(2,10*s-10):0}},Circ:function(){return function(s){return 1-Math.sqrt(1-s*s)}},Back:function(){return function(s){return s*s*(3*s-2)}},Bounce:function(){return function(s){for(var n,i=4;s<((n=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((n*3-2)/22-s,2)}},Elastic:function(s,n){s===void 0&&(s=1),n===void 0&&(n=.5);var i=minMax(s,1,10),l=minMax(n,.1,2);return function(u){return u===0||u===1?u:-i*Math.pow(2,10*(u-1))*Math.sin((u-1-l/(Math.PI*2)*Math.asin(1/i))*(Math.PI*2)/l)}}},r=["Quad","Cubic","Quart","Quint"];return r.forEach(function(s,n){a[s]=function(){return function(i){return Math.pow(i,n+2)}}}),Object.keys(a).forEach(function(s){var n=a[s];e["easeIn"+s]=n,e["easeOut"+s]=function(i,l){return function(u){return 1-n(i,l)(1-u)}},e["easeInOut"+s]=function(i,l){return function(u){return u<.5?n(i,l)(u*2)/2:1-n(i,l)(u*-2+2)/2}},e["easeOutIn"+s]=function(i,l){return function(u){return u<.5?(1-n(i,l)(1-u*2))/2:(n(i,l)(u*2-1)+1)/2}}}),e}();function parseEasings(e,a){if(is.fnc(e))return e;var r=e.split("(")[0],s=penner[r],n=parseEasingParameters(e);switch(r){case"spring":return spring(e,a);case"cubicBezier":return applyArguments(bezier,n);case"steps":return applyArguments(steps,n);default:return applyArguments(s,n)}}function selectString(e){try{var a=document.querySelectorAll(e);return a}catch{return}}function filterArray(e,a){for(var r=e.length,s=arguments.length>=2?arguments[1]:void 0,n=[],i=0;i<r;i++)if(i in e){var l=e[i];a.call(s,l,i,e)&&n.push(l)}return n}function flattenArray(e){return e.reduce(function(a,r){return a.concat(is.arr(r)?flattenArray(r):r)},[])}function toArray(e){return is.arr(e)?e:(is.str(e)&&(e=selectString(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function arrayContains(e,a){return e.some(function(r){return r===a})}function cloneObject(e){var a={};for(var r in e)a[r]=e[r];return a}function replaceObjectProps(e,a){var r=cloneObject(e);for(var s in e)r[s]=a.hasOwnProperty(s)?a[s]:e[s];return r}function mergeObjects(e,a){var r=cloneObject(e);for(var s in a)r[s]=is.und(e[s])?a[s]:e[s];return r}function rgbToRgba(e){var a=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return a?"rgba("+a[1]+",1)":e}function hexToRgba(e){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(a,function(u,o,g,d){return o+o+g+g+d+d}),s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(s[1],16),i=parseInt(s[2],16),l=parseInt(s[3],16);return"rgba("+n+","+i+","+l+",1)"}function hslToRgba(e){var a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(a[1],10)/360,s=parseInt(a[2],10)/100,n=parseInt(a[3],10)/100,i=a[4]||1;function l(m,h,N){return N<0&&(N+=1),N>1&&(N-=1),N<1/6?m+(h-m)*6*N:N<1/2?h:N<2/3?m+(h-m)*(2/3-N)*6:m}var u,o,g;if(s==0)u=o=g=n;else{var d=n<.5?n*(1+s):n+s-n*s,v=2*n-d;u=l(v,d,r+1/3),o=l(v,d,r),g=l(v,d,r-1/3)}return"rgba("+u*255+","+o*255+","+g*255+","+i+")"}function colorToRgb(e){if(is.rgb(e))return rgbToRgba(e);if(is.hex(e))return hexToRgba(e);if(is.hsl(e))return hslToRgba(e)}function getUnit(e){var a=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(a)return a[1]}function getTransformUnit(e){if(stringContains(e,"translate")||e==="perspective")return"px";if(stringContains(e,"rotate")||stringContains(e,"skew"))return"deg"}function getFunctionValue(e,a){return is.fnc(e)?e(a.target,a.id,a.total):e}function getAttribute(e,a){return e.getAttribute(a)}function convertPxToUnit(e,a,r){var s=getUnit(a);if(arrayContains([r,"deg","rad","turn"],s))return a;var n=cache.CSS[a+r];if(!is.und(n))return n;var i=100,l=document.createElement(e.tagName),u=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;u.appendChild(l),l.style.position="absolute",l.style.width=i+r;var o=i/l.offsetWidth;u.removeChild(l);var g=o*parseFloat(a);return cache.CSS[a+r]=g,g}function getCSSValue(e,a,r){if(a in e.style){var s=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[a]||getComputedStyle(e).getPropertyValue(s)||"0";return r?convertPxToUnit(e,n,r):n}}function getAnimationType(e,a){if(is.dom(e)&&!is.inp(e)&&(!is.nil(getAttribute(e,a))||is.svg(e)&&e[a]))return"attribute";if(is.dom(e)&&arrayContains(validTransforms,a))return"transform";if(is.dom(e)&&a!=="transform"&&getCSSValue(e,a))return"css";if(e[a]!=null)return"object"}function getElementTransforms(e){if(is.dom(e)){for(var a=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,s=new Map,n;n=r.exec(a);)s.set(n[1],n[2]);return s}}function getTransformValue(e,a,r,s){var n=stringContains(a,"scale")?1:0+getTransformUnit(a),i=getElementTransforms(e).get(a)||n;return r&&(r.transforms.list.set(a,i),r.transforms.last=a),s?convertPxToUnit(e,i,s):i}function getOriginalTargetValue(e,a,r,s){switch(getAnimationType(e,a)){case"transform":return getTransformValue(e,a,s,r);case"css":return getCSSValue(e,a,r);case"attribute":return getAttribute(e,a);default:return e[a]||0}}function getRelativeValue(e,a){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var s=getUnit(e)||0,n=parseFloat(a),i=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+i+s;case"-":return n-i+s;case"*":return n*i+s}}function validateValue(e,a){if(is.col(e))return colorToRgb(e);if(/\s/g.test(e))return e;var r=getUnit(e),s=r?e.substr(0,e.length-r.length):e;return a?s+a:s}function getDistance(e,a){return Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))}function getCircleLength(e){return Math.PI*2*getAttribute(e,"r")}function getRectLength(e){return getAttribute(e,"width")*2+getAttribute(e,"height")*2}function getLineLength(e){return getDistance({x:getAttribute(e,"x1"),y:getAttribute(e,"y1")},{x:getAttribute(e,"x2"),y:getAttribute(e,"y2")})}function getPolylineLength(e){for(var a=e.points,r=0,s,n=0;n<a.numberOfItems;n++){var i=a.getItem(n);n>0&&(r+=getDistance(s,i)),s=i}return r}function getPolygonLength(e){var a=e.points;return getPolylineLength(e)+getDistance(a.getItem(a.numberOfItems-1),a.getItem(0))}function getTotalLength(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return getCircleLength(e);case"rect":return getRectLength(e);case"line":return getLineLength(e);case"polyline":return getPolylineLength(e);case"polygon":return getPolygonLength(e)}}function setDashoffset(e){var a=getTotalLength(e);return e.setAttribute("stroke-dasharray",a),a}function getParentSvgEl(e){for(var a=e.parentNode;is.svg(a)&&is.svg(a.parentNode);)a=a.parentNode;return a}function getParentSvg(e,a){var r=a||{},s=r.el||getParentSvgEl(e),n=s.getBoundingClientRect(),i=getAttribute(s,"viewBox"),l=n.width,u=n.height,o=r.viewBox||(i?i.split(" "):[0,0,l,u]);return{el:s,viewBox:o,x:o[0]/1,y:o[1]/1,w:l,h:u,vW:o[2],vH:o[3]}}function getPath(e,a){var r=is.str(e)?selectString(e)[0]:e,s=a||100;return function(n){return{property:n,el:r,svg:getParentSvg(r),totalLength:getTotalLength(r)*(s/100)}}}function getPathProgress(e,a,r){function s(d){d===void 0&&(d=0);var v=a+d>=1?a+d:0;return e.el.getPointAtLength(v)}var n=getParentSvg(e.el,e.svg),i=s(),l=s(-1),u=s(1),o=r?1:n.w/n.vW,g=r?1:n.h/n.vH;switch(e.property){case"x":return(i.x-n.x)*o;case"y":return(i.y-n.y)*g;case"angle":return Math.atan2(u.y-l.y,u.x-l.x)*180/Math.PI}}function decomposeValue(e,a){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,s=validateValue(is.pth(e)?e.totalLength:e,a)+"";return{original:s,numbers:s.match(r)?s.match(r).map(Number):[0],strings:is.str(e)||a?s.split(r):[]}}function parseTargets(e){var a=e?flattenArray(is.arr(e)?e.map(toArray):toArray(e)):[];return filterArray(a,function(r,s,n){return n.indexOf(r)===s})}function getAnimatables(e){var a=parseTargets(e);return a.map(function(r,s){return{target:r,id:s,total:a.length,transforms:{list:getElementTransforms(r)}}})}function normalizePropertyTweens(e,a){var r=cloneObject(a);if(/^spring/.test(r.easing)&&(r.duration=spring(r.easing)),is.arr(e)){var s=e.length,n=s===2&&!is.obj(e[0]);n?e={value:e}:is.fnc(a.duration)||(r.duration=a.duration/s)}var i=is.arr(e)?e:[e];return i.map(function(l,u){var o=is.obj(l)&&!is.pth(l)?l:{value:l};return is.und(o.delay)&&(o.delay=u?0:a.delay),is.und(o.endDelay)&&(o.endDelay=u===i.length-1?a.endDelay:0),o}).map(function(l){return mergeObjects(l,r)})}function flattenKeyframes(e){for(var a=filterArray(flattenArray(e.map(function(i){return Object.keys(i)})),function(i){return is.key(i)}).reduce(function(i,l){return i.indexOf(l)<0&&i.push(l),i},[]),r={},s=function(i){var l=a[i];r[l]=e.map(function(u){var o={};for(var g in u)is.key(g)?g==l&&(o.value=u[g]):o[g]=u[g];return o})},n=0;n<a.length;n++)s(n);return r}function getProperties(e,a){var r=[],s=a.keyframes;s&&(a=mergeObjects(flattenKeyframes(s),a));for(var n in a)is.key(n)&&r.push({name:n,tweens:normalizePropertyTweens(a[n],e)});return r}function normalizeTweenValues(e,a){var r={};for(var s in e){var n=getFunctionValue(e[s],a);is.arr(n)&&(n=n.map(function(i){return getFunctionValue(i,a)}),n.length===1&&(n=n[0])),r[s]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function normalizeTweens(e,a){var r;return e.tweens.map(function(s){var n=normalizeTweenValues(s,a),i=n.value,l=is.arr(i)?i[1]:i,u=getUnit(l),o=getOriginalTargetValue(a.target,e.name,u,a),g=r?r.to.original:o,d=is.arr(i)?i[0]:g,v=getUnit(d)||getUnit(o),m=u||v;return is.und(l)&&(l=g),n.from=decomposeValue(d,m),n.to=decomposeValue(getRelativeValue(l,d),m),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=parseEasings(n.easing,n.duration),n.isPath=is.pth(i),n.isPathTargetInsideSVG=n.isPath&&is.svg(a.target),n.isColor=is.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var setProgressValue={css:function(e,a,r){return e.style[a]=r},attribute:function(e,a,r){return e.setAttribute(a,r)},object:function(e,a,r){return e[a]=r},transform:function(e,a,r,s,n){if(s.list.set(a,r),a===s.last||n){var i="";s.list.forEach(function(l,u){i+=u+"("+l+") "}),e.style.transform=i}}};function setTargetsValue(e,a){var r=getAnimatables(e);r.forEach(function(s){for(var n in a){var i=getFunctionValue(a[n],s),l=s.target,u=getUnit(i),o=getOriginalTargetValue(l,n,u,s),g=u||getUnit(o),d=getRelativeValue(validateValue(i,g),o),v=getAnimationType(l,n);setProgressValue[v](l,n,d,s.transforms,!0)}})}function createAnimation(e,a){var r=getAnimationType(e.target,a.name);if(r){var s=normalizeTweens(a,e),n=s[s.length-1];return{type:r,property:a.name,animatable:e,tweens:s,duration:n.end,delay:s[0].delay,endDelay:n.endDelay}}}function getAnimations(e,a){return filterArray(flattenArray(e.map(function(r){return a.map(function(s){return createAnimation(r,s)})})),function(r){return!is.und(r)})}function getInstanceTimings(e,a){var r=e.length,s=function(i){return i.timelineOffset?i.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(i){return s(i)+i.duration})):a.duration,n.delay=r?Math.min.apply(Math,e.map(function(i){return s(i)+i.delay})):a.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(i){return s(i)+i.duration-i.endDelay})):a.endDelay,n}var instanceID=0;function createNewInstance(e){var a=replaceObjectProps(defaultInstanceSettings,e),r=replaceObjectProps(defaultTweenSettings,e),s=getProperties(r,e),n=getAnimatables(e.targets),i=getAnimations(n,s),l=getInstanceTimings(i,r),u=instanceID;return instanceID++,mergeObjects(a,{id:u,children:[],animatables:n,animations:i,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}var activeInstances=[],engine=function(){var e;function a(){!e&&(!isDocumentHidden()||!anime.suspendWhenDocumentHidden)&&activeInstances.length>0&&(e=requestAnimationFrame(r))}function r(n){for(var i=activeInstances.length,l=0;l<i;){var u=activeInstances[l];u.paused?(activeInstances.splice(l,1),i--):(u.tick(n),l++)}e=l>0?requestAnimationFrame(r):void 0}function s(){anime.suspendWhenDocumentHidden&&(isDocumentHidden()?e=cancelAnimationFrame(e):(activeInstances.forEach(function(n){return n._onDocumentVisibility()}),engine()))}return typeof document<"u"&&document.addEventListener("visibilitychange",s),a}();function isDocumentHidden(){return!!document&&document.hidden}function anime(e){e===void 0&&(e={});var a=0,r=0,s=0,n,i=0,l=null;function u(y){var V=window.Promise&&new Promise(function(b){return l=b});return y.finished=V,V}var o=createNewInstance(e);u(o);function g(){var y=o.direction;y!=="alternate"&&(o.direction=y!=="normal"?"normal":"reverse"),o.reversed=!o.reversed,n.forEach(function(V){return V.reversed=o.reversed})}function d(y){return o.reversed?o.duration-y:y}function v(){a=0,r=d(o.currentTime)*(1/anime.speed)}function m(y,V){V&&V.seek(y-V.timelineOffset)}function h(y){if(o.reversePlayback)for(var b=i;b--;)m(y,n[b]);else for(var V=0;V<i;V++)m(y,n[V])}function N(y){for(var V=0,b=o.animations,B=b.length;V<B;){var x=b[V],D=x.animatable,I=x.tweens,k=I.length-1,C=I[k];k&&(C=filterArray(I,function(j){return y<j.end})[0]||C);for(var _=minMax(y-C.start-C.delay,0,C.duration)/C.duration,f=isNaN(_)?1:C.easing(_),w=C.to.strings,O=C.round,E=[],R=C.to.numbers.length,$=void 0,P=0;P<R;P++){var M=void 0,U=C.to.numbers[P],A=C.from.numbers[P]||0;C.isPath?M=getPathProgress(C.value,f*U,C.isPathTargetInsideSVG):M=A+f*(U-A),O&&(C.isColor&&P>2||(M=Math.round(M*O)/O)),E.push(M)}var L=w.length;if(!L)$=E[0];else{$=w[0];for(var S=0;S<L;S++){w[S];var G=w[S+1],F=E[S];isNaN(F)||(G?$+=F+G:$+=F+" ")}}setProgressValue[x.type](D.target,x.property,$,D.transforms),x.currentValue=$,V++}}function p(y){o[y]&&!o.passThrough&&o[y](o)}function c(){o.remaining&&o.remaining!==!0&&o.remaining--}function T(y){var V=o.duration,b=o.delay,B=V-o.endDelay,x=d(y);o.progress=minMax(x/V*100,0,100),o.reversePlayback=x<o.currentTime,n&&h(x),!o.began&&o.currentTime>0&&(o.began=!0,p("begin")),!o.loopBegan&&o.currentTime>0&&(o.loopBegan=!0,p("loopBegin")),x<=b&&o.currentTime!==0&&N(0),(x>=B&&o.currentTime!==V||!V)&&N(V),x>b&&x<B?(o.changeBegan||(o.changeBegan=!0,o.changeCompleted=!1,p("changeBegin")),p("change"),N(x)):o.changeBegan&&(o.changeCompleted=!0,o.changeBegan=!1,p("changeComplete")),o.currentTime=minMax(x,0,V),o.began&&p("update"),y>=V&&(r=0,c(),o.remaining?(a=s,p("loopComplete"),o.loopBegan=!1,o.direction==="alternate"&&g()):(o.paused=!0,o.completed||(o.completed=!0,p("loopComplete"),p("complete"),!o.passThrough&&"Promise"in window&&(l(),u(o)))))}return o.reset=function(){var y=o.direction;o.passThrough=!1,o.currentTime=0,o.progress=0,o.paused=!0,o.began=!1,o.loopBegan=!1,o.changeBegan=!1,o.completed=!1,o.changeCompleted=!1,o.reversePlayback=!1,o.reversed=y==="reverse",o.remaining=o.loop,n=o.children,i=n.length;for(var V=i;V--;)o.children[V].reset();(o.reversed&&o.loop!==!0||y==="alternate"&&o.loop===1)&&o.remaining++,N(o.reversed?o.duration:0)},o._onDocumentVisibility=v,o.set=function(y,V){return setTargetsValue(y,V),o},o.tick=function(y){s=y,a||(a=s),T((s+(r-a))*anime.speed)},o.seek=function(y){T(d(y))},o.pause=function(){o.paused=!0,v()},o.play=function(){o.paused&&(o.completed&&o.reset(),o.paused=!1,activeInstances.push(o),v(),engine())},o.reverse=function(){g(),o.completed=!o.reversed,v()},o.restart=function(){o.reset(),o.play()},o.remove=function(y){var V=parseTargets(y);removeTargetsFromInstance(V,o)},o.reset(),o.autoplay&&o.play(),o}function removeTargetsFromAnimations(e,a){for(var r=a.length;r--;)arrayContains(e,a[r].animatable.target)&&a.splice(r,1)}function removeTargetsFromInstance(e,a){var r=a.animations,s=a.children;removeTargetsFromAnimations(e,r);for(var n=s.length;n--;){var i=s[n],l=i.animations;removeTargetsFromAnimations(e,l),!l.length&&!i.children.length&&s.splice(n,1)}!r.length&&!s.length&&a.pause()}function removeTargetsFromActiveInstances(e){for(var a=parseTargets(e),r=activeInstances.length;r--;){var s=activeInstances[r];removeTargetsFromInstance(a,s)}}function stagger(e,a){a===void 0&&(a={});var r=a.direction||"normal",s=a.easing?parseEasings(a.easing):null,n=a.grid,i=a.axis,l=a.from||0,u=l==="first",o=l==="center",g=l==="last",d=is.arr(e),v=parseFloat(d?e[0]:e),m=d?parseFloat(e[1]):0,h=getUnit(d?e[1]:e)||0,N=a.start||0+(d?v:0),p=[],c=0;return function(T,y,V){if(u&&(l=0),o&&(l=(V-1)/2),g&&(l=V-1),!p.length){for(var b=0;b<V;b++){if(!n)p.push(Math.abs(l-b));else{var B=o?(n[0]-1)/2:l%n[0],x=o?(n[1]-1)/2:Math.floor(l/n[0]),D=b%n[0],I=Math.floor(b/n[0]),k=B-D,C=x-I,_=Math.sqrt(k*k+C*C);i==="x"&&(_=-k),i==="y"&&(_=-C),p.push(_)}c=Math.max.apply(Math,p)}s&&(p=p.map(function(w){return s(w/c)*c})),r==="reverse"&&(p=p.map(function(w){return i?w<0?w*-1:-w:Math.abs(c-w)}))}var f=d?(m-v)/c:v;return N+f*(Math.round(p[y]*100)/100)+h}}function timeline(e){e===void 0&&(e={});var a=anime(e);return a.duration=0,a.add=function(r,s){var n=activeInstances.indexOf(a),i=a.children;n>-1&&activeInstances.splice(n,1);function l(m){m.passThrough=!0}for(var u=0;u<i.length;u++)l(i[u]);var o=mergeObjects(r,replaceObjectProps(defaultTweenSettings,e));o.targets=o.targets||e.targets;var g=a.duration;o.autoplay=!1,o.direction=a.direction,o.timelineOffset=is.und(s)?g:getRelativeValue(s,g),l(a),a.seek(o.timelineOffset);var d=anime(o);l(d),i.push(d);var v=getInstanceTimings(i,e);return a.delay=v.delay,a.endDelay=v.endDelay,a.duration=v.duration,a.seek(0),a.reset(),a.autoplay&&a.play(),a},a}anime.version="3.2.1";anime.speed=1;anime.suspendWhenDocumentHidden=!0;anime.running=activeInstances;anime.remove=removeTargetsFromActiveInstances;anime.get=getOriginalTargetValue;anime.set=setTargetsValue;anime.convertPx=convertPxToUnit;anime.path=getPath;anime.setDashoffset=setDashoffset;anime.stagger=stagger;anime.timeline=timeline;anime.easing=parseEasings;anime.penner=penner;anime.random=function(e,a){return Math.floor(Math.random()*(a-e+1))+e};const Calculator_vue_vue_type_style_index_0_lang="",_hoisted_1$2={class:"h-full w-full text-center content-center"},_hoisted_2$2={class:""},_hoisted_3$2={class:"flex justify-between"},_hoisted_4$2={class:"calculator"},_hoisted_5$1={class:"answer"},_hoisted_6$1={class:"display"},_hoisted_7$1={class:"ml-4"},_hoisted_8$1={key:0,class:"ml-2"},_hoisted_9$1={key:1},_hoisted_10$1={key:0,class:"mt-2"},_sfc_main$2={__name:"Calculator",props:["params"],setup(__props){const{init}=useToast(),props=__props,selectedDataEdit=ref(!1);inject("onupdated");const factoryOptions=ref([]),getButton=ref(null),parameters=ref([]),timesG=ref([]);ref("");const logList=ref(""),current=ref(""),answer=ref(""),operatorClicked=ref(!0),{t,locale}=useI18n(),result=reactive({Calculate:[],Comment:"",id:props.params.data.GparamID,TimeID:props.params.data.id}),append=e=>{console.log(e),operatorClicked.value&&(current.value="",operatorClicked.value=!1),typeof e=="object"&&e!==null&&e.GName?(animateNumber(`n${e.id}`),result.Calculate.push(`Tid=${e.id}`),current.value+=`[${e.Name}]`):typeof e=="string"?(animateNumber(`n${e}`),result.Calculate.push(e),current.value+=e):typeof e=="object"&&e!==null&&e.Name?(animateNumber(`n${e.id}`),result.Calculate.push(e.id),current.value+=`[${e.Name}]`):typeof e=="object"&&e!==null&&e.GName&&(animateNumber(`n${e.id}`),result.Calculate.push(`Tid=${e.id}`),current.value+=`[${e.GName}]`)},addtoLog=e=>{operatorClicked.value||(logList.value+=`${current.value} ${e} `,current.value="",operatorClicked.value=!0,result.Calculate.push(e))},animateNumber=e=>{let a=anime.timeline({targets:`#${e}`,duration:250,easing:"easeInOutCubic"});a.add({backgroundColor:"#c1e3ff"}),a.add({backgroundColor:"#f4faff"})},animateOperator=e=>{let a=anime.timeline({targets:`#${e}`,duration:250,easing:"easeInOutCubic"});a.add({backgroundColor:"#a6daff"}),a.add({backgroundColor:"#d9efff"})},clear=()=>{animateOperator("clear"),current.value="",answer.value="",logList.value="",operatorClicked.value=!1},sign=()=>{animateOperator("sign"),current.value!==""&&(current.value=current.value.charAt(0)==="-"?current.value.slice(1):`-${current.value}`)},percent=()=>{animateOperator("percent"),current.value!==""&&(current.value=`${parseFloat(current.value)/100}`)},dot=()=>{animateNumber("dot"),current.value.includes(".")||append(".")},plus=()=>{animateOperator("plus"),addtoLog("+")},minus=()=>{animateOperator("minus"),addtoLog("-")},times=()=>{animateOperator("times"),addtoLog("*")},divide=()=>{animateOperator("divide"),addtoLog("/")},equal=()=>{animateOperator("equal"),operatorClicked.value?answer.value="WHAT?!!":answer.value=eval(logList.value+current.value)},fetchGraphics=async()=>{try{const e=await axios.get("/structure");factoryOptions.value=e.data.map(i=>({value:i.id,text:locale.value==="uz"?i.Name:i.NameRus}));const a=await axios.get(`getForFormule/${props.params.data.GPid}`),s=a.data.map(i=>i.parameters);getButton.value=a.data.formula,parameters.value=s.flat();const n=await axios.get(`getForFormuleTimes/${props.params.data.GraphicsID}`);timesG.value=n.data.map(i=>({...i,StartTime:i.StartTime?i.StartTime.substring(0,5):null,EndTime:i.EndTime?i.EndTime.substring(0,5):null,Name:i.Name?i.Name.substring(0,5):null})),console.log(timesG.value)}catch(e){console.error("Error fetching graphics data:",e)}},onSubmit=async()=>{try{const{data:e}=await axios.post("/calculator",result);e.status===200?(result.Calculate="",result.ParametersId="",result.Comment="",await fetchData(),init({message:t("login.successMessage"),color:"success"}),selectedDataEdit.value=!1,init({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",e.message)}catch(e){console.error("Error saving data:",e)}};return watch(()=>result.StructureID,e=>{}),(e,a)=>{const r=resolveComponent("VaTextarea"),s=resolveComponent("VaModal");return openBlock(),createElementBlock("main",_hoisted_1$2,[createVNode(unref(VaButton),{round:"",icon:"functions",preset:"primary",class:"mt-1",onClick:a[0]||(a[0]=n=>(selectedDataEdit.value=!0,fetchGraphics))}),createVNode(s,{modelValue:selectedDataEdit.value,"onUpdate:modelValue":a[14]||(a[14]=n=>selectedDataEdit.value=n),"ok-text":unref(t)("modals.apply"),"cancel-text":unref(t)("modals.cancel"),onOk:onSubmit,onClose:a[15]||(a[15]=n=>selectedDataEdit.value=!1),"close-button":""},{default:withCtx(()=>[createBaseVNode("h3",{class:"va-h3",onVnodeMounted:fetchGraphics},toDisplayString(unref(t)("modals.addFormula")),513),createBaseVNode("div",_hoisted_2$2,[createVNode(unref(VaForm),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$1,toDisplayString(answer.value),1),createBaseVNode("div",_hoisted_6$1,toDisplayString(logList.value+current.value),1),createBaseVNode("div",{onClick:clear,id:"clear",class:"btn operator"},"C"),createBaseVNode("div",{onClick:sign,id:"sign",class:"btn operator"},"+/-"),createBaseVNode("div",{onClick:percent,id:"percent",class:"btn operator"}," % "),createBaseVNode("div",{onClick:divide,id:"divide",class:"btn operator"}," / "),createBaseVNode("div",{onClick:a[1]||(a[1]=n=>append("7")),id:"n7",class:"btn"},"7"),createBaseVNode("div",{onClick:a[2]||(a[2]=n=>append("8")),id:"n8",class:"btn"},"8"),createBaseVNode("div",{onClick:a[3]||(a[3]=n=>append("9")),id:"n9",class:"btn"},"9"),createBaseVNode("div",{onClick:times,id:"times",class:"btn operator"},"*"),createBaseVNode("div",{onClick:a[4]||(a[4]=n=>append("4")),id:"n4",class:"btn"},"4"),createBaseVNode("div",{onClick:a[5]||(a[5]=n=>append("5")),id:"n5",class:"btn"},"5"),createBaseVNode("div",{onClick:a[6]||(a[6]=n=>append("6")),id:"n6",class:"btn"},"6"),createBaseVNode("div",{onClick:minus,id:"minus",class:"btn operator"},"-"),createBaseVNode("div",{onClick:a[7]||(a[7]=n=>append("1")),id:"n1",class:"btn"},"1"),createBaseVNode("div",{onClick:a[8]||(a[8]=n=>append("2")),id:"n2",class:"btn"},"2"),createBaseVNode("div",{onClick:a[9]||(a[9]=n=>append("3")),id:"n3",class:"btn"},"3"),createBaseVNode("div",{onClick:plus,id:"plus",class:"btn operator"},"+"),createBaseVNode("div",{onClick:a[10]||(a[10]=n=>append("0")),id:"n0",class:"zero"},"0"),createBaseVNode("div",{onClick:dot,id:"dot",class:"btn"},"."),createBaseVNode("div",{onClick:equal,id:"equal",class:"btn operator"},"="),createBaseVNode("div",{onClick:a[11]||(a[11]=n=>append("(")),id:"leftBracket",class:"btn p-4"},"("),createBaseVNode("div",{onClick:a[12]||(a[12]=n=>append(")")),id:"rightBracket",class:"btn p-4"},")")]),createBaseVNode("div",_hoisted_7$1,[parameters.value.length?(openBlock(),createElementBlock("div",_hoisted_8$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(parameters.value,(n,i)=>(openBlock(),createBlock(unref(VaButton),{preset:"primary",class:"mr-6 mb-2","border-color":"primary",round:"",key:n.id,style:{borderRadius:"0"},onClick:l=>append(n)},{default:withCtx(()=>[createTextVNode(toDisplayString(n.Name),1)]),_:2},1032,["onClick"]))),128))])):(openBlock(),createElementBlock("div",_hoisted_9$1," Loading parameters... "))])]),timesG.value.length?(openBlock(),createElementBlock("div",_hoisted_10$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(timesG.value,(n,i)=>(openBlock(),createBlock(unref(VaButton),{preset:"primary",class:"mr-6 mb-2","border-color":"primary",round:"",key:n.id,style:{borderRadius:"0"},onClick:l=>append(n)},{default:withCtx(()=>[createTextVNode(toDisplayString(n.Name),1)]),_:2},1032,["onClick"]))),128))])):createCommentVNode("",!0),createVNode(r,{class:"w-full",modelValue:result.Comment,"onUpdate:modelValue":a[13]||(a[13]=n=>result.Comment=n),"max-length":125,label:unref(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},_hoisted_1$1={class:"h-full w-full text-center content-center"},_hoisted_2$1={class:"va-h3"},_hoisted_3$1={class:"flex justify-between"},_hoisted_4$1={class:"h-full w-full"},_sfc_main$1={__name:"Times",props:["params"],setup(e){const{locale:a,t:r}=useI18n(),{init:s}=useToast(),n=ref(!1),i=ref([]),l=ref(null),u=ref(!1);ref([]),ref([]);const o=e,g=reactive({GraphicId:o.params.data.GrapicsID,ChangeId:"",Name:"",StartTime:"",EndTime:""});function d(c){l.value.applyTransaction({remove:[c]})}function v(c,T){c.setData(T)}provide("ondeleted",d),provide("onupdated",v);const m=computed(()=>[{headerName:r("table.headerRow"),valueGetter:"node.rowIndex + 1",width:80},{headerName:"ID",field:"id",width:80},{headerName:r("table.change"),field:"Change",width:120},{headerName:r("table.graphicName"),field:"GName",flex:1},{headerName:r("table.name"),field:"Name",flex:1,valueFormatter:c=>format(new Date(`1970-01-01T${c.value}`),"HH:mm")},{headerName:r("table.startTime"),field:"StartTime",valueFormatter:c=>format(new Date(`1970-01-01T${c.value}`),"HH:mm")},{headerName:r("table.endTime"),field:"EndTime",valueFormatter:c=>format(new Date(`1970-01-01T${c.value}`),"HH:mm")},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:_sfc_main$2}]),h={sortable:!0,filter:!0},N=async()=>{store.state.GParamID=o.params.data.ParametersID,store.state.GPid=o.params.data.id,store.state.GrapicsID=o.params.data.Gid;try{const c=await axios.get(`/getRowTimes/${g.GraphicId}/${store.state.GParamID}/${store.state.GPid}/${o.params.data.Gid}`);i.value=Array.isArray(c.data)?c.data:c.data.items}catch(c){console.error("Error fetching data:",c)}},p=async()=>{try{const{data:c}=await axios.post("/graphictimes",g);c.status===200?(u.value=!1,g.GraphicId="",g.ChangeId="",g.Name="",g.StartTime="",g.EndTime="",await N(),s({message:r("login.successMessage"),color:"success"})):console.error("Error saving data:",c.message)}catch(c){console.error("Error saving data:",c)}};return onMounted(()=>{const c=localStorage.getItem("locale");c&&(a.value=c),N()}),(c,T)=>{const y=resolveComponent("ag-grid-vue"),V=resolveComponent("VaModal");return openBlock(),createElementBlock("main",_hoisted_1$1,[createVNode(unref(VaButton),{round:"",icon:"functions",preset:"primary",class:"mt-1 w-",onClick:T[0]||(T[0]=()=>{n.value=!0})}),createVNode(V,{modelValue:n.value,"onUpdate:modelValue":T[2]||(T[2]=b=>n.value=b),"ok-text":unref(r)("modals.apply"),"cancel-text":unref(r)("modals.cancel"),onOk:p,onClose:T[3]||(T[3]=b=>n.value=!1),"close-button":"",class:"custom-modal",size:"large"},{default:withCtx(()=>[createBaseVNode("h3",_hoisted_2$1,toDisplayString(unref(r)("modals.addFormula"))+toDisplayString(o.params.data.Gid),1),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("main",_hoisted_4$1,[createVNode(y,{rowData:i.value,columnDefs:m.value,defaultColDef:h,animateRows:"true",class:"ag-theme-material",style:{height:"800px",width:"100%"},onGridReady:T[1]||(T[1]=b=>l.value=b.api)},null,8,["rowData","columnDefs"])])])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},ParameterGraphics_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"grid grid-rows-[55px,1fr]"},_hoisted_2={class:"flex justify-between"},_hoisted_3=createBaseVNode("span",{class:"flex w-full"},null,-1),_hoisted_4={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},_hoisted_5={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},_hoisted_6={class:"grid grid-cols-2 md:grid-cols-1 gap-1 items-end w-full"},_hoisted_7={class:"grid grid-cols-2 md:grid-cols-1 gap-1 items-end w-full"},_hoisted_8={class:"flex gap-5 flex-wrap w-full"},_hoisted_9={class:"grid grid-cols-2 md:grid-cols-1 gap-1 items-end w-full"},_hoisted_10={class:"flex-grow"},_sfc_main={__name:"ParameterGraphics",setup(e){const{init:a}=useToast(),{t:r}=useI18n(),s=ref([]),n=ref(null),i=ref(!1),l=ref([]),u=ref([]),o=ref([]),g=ref([]),d=ref([]),v=ref([]),m=ref([]),h=reactive({ParametersID:"",FactoryStructureID:"",GrapicsID:"",SourceID:"",CurrentTime:"",EndingTime:"",OrderNumber:"",BlogID:"",PageId:"",WithFormula:null});function N(x){n.value.applyTransaction({remove:[x]})}function p(x,D){x.setData(D)}provide("ondeleted",N),provide("onupdated",p);const c=computed(()=>[{headerName:"T/r",valueGetter:"node.rowIndex + 1",width:80},{headerName:"Parametr nomi",field:"PName",flex:1},{headerName:"GMZ tuzilmasi",field:"FName",flex:1},{headerName:"Grafik",field:"GName"},{headerName:"Joriy etish vaqti",field:"CurrentTime",valueFormatter:x=>{const[D,I]=x.value.split(" "),[k,C,_]=D.split("-");I.split(":");const f=new Date(k,C-1,_);return format(f,"dd/MM/yyyy")}},{headerName:"Tugatish vaqti",field:"EndingTime",valueFormatter:x=>{const[D,I]=x.value.split(" "),[k,C,_]=D.split("-");I.split(":");const f=new Date(k,C-1,_);return format(f,"dd/MM/yyyy")}},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:_sfc_main$1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:_sfc_main$4},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:_sfc_main$3}]),T={sortable:!0,filter:!0},y=async()=>{try{const x=await axios.get("/paramsgraph");s.value=Array.isArray(x.data)?x.data:x.data.items,console.log(s.value)}catch(x){console.error("Error fetching data:",x)}},V=async()=>{try{const x=await axios.get("/param"),D=await axios.get("/structure"),I=await axios.get("/graphics"),k=await axios.get("/blogs"),C=await axios.get("/source"),_=await axios.get("/formula");l.value=x.data.map(f=>({value:f.Uuid,text:f.Name})),o.value=D.data.map(f=>({value:f.id,text:f.Name})),g.value=I.data.map(f=>({value:f.id,text:f.Name})),d.value=k.data.map(f=>({value:f.id,text:f.Name})),v.value=C.data.map(f=>({value:f.id,text:f.Name})),m.value=_.data.map(f=>({value:f.id,text:f.Name}))}catch(x){console.error("Error fetching graphics data:",x)}};async function b(x){try{const D=await axios.get(`/pages-select/${x}`);u.value=D.data.map(I=>({value:I.id,text:I.Name}))}catch(D){console.error("Error fetching data:",D)}}const B=async()=>{try{const{data:x}=await axios.post("/paramsgraph",h);x.status===200?(h.ParametersID="",h.FactoryStructureID="",h.GrapicsID="",h.SourceID="",h.CurrentTime="",h.EndingTime="",h.OrderNumber="",h.BlogID="",h.PageId="",h.WithFormula="",await y(),a({message:r("login.successMessage"),color:"success"})):console.error("Error saving data:",x.message)}catch(x){console.error("Error saving data:",x)}};return onMounted(()=>{y()}),(x,D)=>{const I=resolveComponent("VaSelect"),k=resolveComponent("VaDatePicker"),C=resolveComponent("VaModal"),_=resolveComponent("ag-grid-vue");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("main",null,[createBaseVNode("div",_hoisted_2,[_hoisted_3,createVNode(unref(VaButton),{onClick:D[0]||(D[0]=f=>i.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),createVNode(C,{modelValue:i.value,"onUpdate:modelValue":D[11]||(D[11]=f=>i.value=f),"ok-text":unref(r)("modals.apply"),"cancel-text":unref(r)("modals.cancel"),onOk:B,"close-button":""},{default:withCtx(()=>[createBaseVNode("h3",{class:"va-h3",onVnodeMounted:V},toDisplayString(unref(r)("modals.addParamsGrafTitle")),513),createVNode(unref(VaForm),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4,[createVNode(I,{modelValue:h.ParametersID,"onUpdate:modelValue":D[1]||(D[1]=f=>h.ParametersID=f),"value-by":"value",class:"mb-1",label:unref(r)("menu.params"),options:l.value,searchable:"",clearable:""},null,8,["modelValue","label","options"]),createVNode(I,{modelValue:h.GrapicsID,"onUpdate:modelValue":D[2]||(D[2]=f=>h.GrapicsID=f),"value-by":"value",class:"mb-1",label:unref(r)("menu.graphictimes"),options:g.value,clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_5,[createVNode(I,{modelValue:h.FactoryStructureID,"onUpdate:modelValue":[D[3]||(D[3]=f=>h.FactoryStructureID=f),b],"value-by":"value",class:"mb-1",label:unref(r)("menu.structure"),options:o.value,clearable:""},null,8,["modelValue","label","options"]),createVNode(I,{modelValue:h.BlogID,"onUpdate:modelValue":D[4]||(D[4]=f=>h.BlogID=f),"value-by":"value",class:"mb-1",label:unref(r)("menu.blogs"),options:d.value,clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_6,[createVNode(I,{modelValue:h.SourceID,"onUpdate:modelValue":D[5]||(D[5]=f=>h.SourceID=f),"value-by":"value",class:"mb-1",label:unref(r)("menu.sources"),options:v.value,clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_7,[createVNode(I,{modelValue:h.WithFormula,"onUpdate:modelValue":D[6]||(D[6]=f=>h.WithFormula=f),"value-by":"value",class:"mb-1",label:unref(r)("menu.formula"),options:m.value,clearable:""},null,8,["modelValue","label","options"])]),createBaseVNode("div",_hoisted_8,[createVNode(k,{modelValue:h.CurrentTime,"onUpdate:modelValue":D[7]||(D[7]=f=>h.CurrentTime=f),stateful:"","highlight-weekend":""},null,8,["modelValue"]),createVNode(k,{modelValue:h.EndingTime,"onUpdate:modelValue":D[8]||(D[8]=f=>h.EndingTime=f),stateful:"","highlight-weekend":""},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_9,[createVNode(I,{modelValue:h.PageId,"onUpdate:modelValue":D[9]||(D[9]=f=>h.PageId=f),"value-by":"value",class:"mb-1",label:unref(r)("menu.pages"),options:u.value,clearable:""},null,8,["modelValue","label","options"])]),createVNode(unref(VaInput),{type:"number",class:"w-full",modelValue:h.OrderNumber,"onUpdate:modelValue":D[10]||(D[10]=f=>h.OrderNumber=f),rules:[f=>f&&f.length>0||"To'ldirish majburiy bo'lgan maydon"],label:unref(r)("modals.ordernumber")},null,8,["modelValue","rules","label"])]),_:1},512)]),_:1},8,["modelValue","ok-text","cancel-text"])]),createBaseVNode("main",_hoisted_10,[createVNode(_,{rowData:s.value,columnDefs:c.value,defaultColDef:T,animateRows:"true",class:"ag-theme-material h-full",onGridReady:D[12]||(D[12]=f=>n.value=f.api)},null,8,["rowData","columnDefs"])])])}}};export{_sfc_main as default};
