import{c as j,a as P,u as z,r as n,s as d,d as H,o as L,f as g,g as q,h as C,i as r,j as u,F as J,G as K,k as c,z as Q,l as W,t as X,m as Y,n as m,H as V}from"./app-CJV00KTh.js";/* empty css                   */import{_ as Z,a as ee}from"./DeleteGraphicTimesModal-BPIKWuSK.js";const ae={class:"grid grid-rows-[55px,1fr]"},te={class:"flex justify-between"},oe={class:"va-h3"},se={class:"grid grid-cols-1 md:grid-cols-1 gap-1 items-end w-full"},le={class:"flex-grow"},de={__name:"GraphicTermsPage",props:{id:Number},setup(_){const{locale:y,t:o}=j(),b=P(),{init:D}=z(),h=_,v=n([]),w=n(null),i=n(!1),G=n([]),k=n([]),p=n("Soat"),x=d(()=>b.state.user.roles[8]),f=e=>{var a,t;return((t=(a=x.value)==null?void 0:a.pivot)==null?void 0:t[e])==="1"},S=d(()=>f("create")),I=d(()=>f("update")),R=d(()=>f("delete"));console.log(x);const l=H({GraphicId:h.id,Name:"",Component:p.value});function B(e){w.value.applyTransaction({remove:[e]})}function E(e,a){e.setData(a)}V("ondeleted",B),V("onupdated",E);function M(e){l.Component=e}const O=d(()=>{const e=[{headerName:o("table.headerRow"),valueGetter:"node.rowIndex + 1",width:80},{headerName:"ID",field:"id",width:80},{headerName:o("table.graphicName"),field:"GName",flex:1},{headerName:o("table.name"),field:"Name",flex:1},{headerName:"Component",field:"Component",flex:1}];return I.value&&e.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Z}),R.value&&e.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:ee}),e}),T={sortable:!0,filter:!0},N=async()=>{try{const e=await m.get(`/graphicterms/${h.id}`);v.value=Array.isArray(e.data)?e.data:e.data.items}catch(e){console.error("Error fetching data:",e)}},F=async()=>{try{const e=await m.get("/graphics"),a=await m.get("/changes");G.value=e.data.map(t=>({value:t.id,text:t.Name})),k.value=a.data.map(t=>({value:t.Change,text:t.Change}))}catch(e){console.error("Error fetching graphics data:",e)}},U=async()=>{try{const{data:e}=await m.post("/graphicterms",l);e.status===200?(i.value=!1,l.GraphicId="",l.Name="",l.Component="",await N(),D({message:o("login.successMessage"),color:"success"})):console.error("Error saving data:",e.message)}catch(e){console.error("Error saving data:",e)}};return L(()=>{const e=localStorage.getItem("locale");e&&(y.value=e),N(),F()}),(e,a)=>{const t=g("VaSelect"),$=g("VaModal"),A=g("ag-grid-vue");return C(),q("div",ae,[r("main",null,[r("div",te,[a[5]||(a[5]=r("span",{class:"flex w-full"},null,-1)),S.value?(C(),J(c(Q),{key:0,onClick:a[0]||(a[0]=s=>i.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})):K("",!0)]),u($,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=s=>i.value=s),"ok-text":c(o)("buttons.save"),"cancel-text":c(o)("buttons.cancel"),onOk:U,"close-button":""},{default:W(()=>[r("h3",oe,X(c(o)("modals.addGraphicTimesTitle")),1),r("div",se,[u(c(Y),{modelValue:l.Name,"onUpdate:modelValue":a[1]||(a[1]=s=>l.Name=s),label:c(o)("form.name")},null,8,["modelValue","label"]),u(t,{modelValue:p.value,"onUpdate:modelValue":[a[2]||(a[2]=s=>p.value=s),M],options:[{text:"Oy",value:"Oy"},{text:"Soat",value:"Soat"}],label:"Formni tanlang"},null,8,["modelValue"])])]),_:1},8,["modelValue","ok-text","cancel-text"])]),r("main",le,[u(A,{rowData:v.value,columnDefs:O.value,defaultColDef:T,animateRows:"true",class:"ag-theme-material h-full",onGridReady:a[4]||(a[4]=s=>w.value=s.api)},null,8,["rowData","columnDefs"])])])}}};export{de as default};
