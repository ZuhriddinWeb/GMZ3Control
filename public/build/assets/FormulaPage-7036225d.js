import{u as O,r as g,G as H,c as j,d as L,I as J,f as R,g as S,h as M,k as t,j as l,D as r,l as s,i as p,t as P,V as A,B as u,J as K,K as Q,L as W,m as x,H as T,x as G,o as X,n as z}from"./app-1a49a4d8.js";/* empty css                   */import{_ as Y,a as Z}from"./EditBlog-2eaeea68.js";const ee={class:"h-full w-full text-center content-center"},ae={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},le={class:"grid grid-cols-9 gap-1 mt-3 w-full"},te={class:"grid grid-cols-11 gap-1 mt-3 w-full"},oe={class:"flex justify-between gap-1 mt-4"},se={__name:"Calculator",props:["params"],setup(B){const{init:k}=O(),b=B,n=g(!1);H("onupdated");const N=g([]),$=g(null),C=g(null),V=g(""),{t:y,locale:c}=j(),f=L({Calculate:"",Comment:"",id:b.params.data.id}),d=i=>{f.Calculate+=i,_()},E=i=>{f.Calculate+=i.id,V.value+=i.Name+","},F=()=>{f.Calculate=f.Calculate.slice(0,-1),_()},_=()=>{const i=f.Calculate.split(",").filter(Boolean);V.value=i.map(a=>{const v=C.value.find(o=>o.id===a);return v?v.Name:a}).join(", ")},D=async()=>{try{const i=await x.get("/structure");N.value=i.data.map(v=>({value:v.id,text:c.value==="uz"?v.Name:v.NameRus}));const a=await x.get(`formula/${b.params.data.id}`);$.value=a.data.formula,C.value=a.data.parameters}catch(i){console.error("Error fetching graphics data:",i)}},I=async()=>{try{const{data:i}=await x.post("/calculator",f);i.status===200?(f.Calculate="",f.ParametersId="",f.Comment="",await fetchData(),k({message:y("login.successMessage"),color:"success"}),n.value=!1,k({message:y("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return J(()=>f.StructureID,i=>{}),(i,a)=>{const v=R("VaTextarea"),o=R("VaModal");return S(),M("main",ee,[t(l(r),{round:"",icon:"functions",preset:"primary",class:"mt-1",onClick:a[0]||(a[0]=e=>(n.value=!0,D))}),t(o,{modelValue:n.value,"onUpdate:modelValue":a[22]||(a[22]=e=>n.value=e),"ok-text":l(y)("modals.apply"),"cancel-text":l(y)("modals.cancel"),onOk:I,onClose:a[23]||(a[23]=e=>n.value=!1),"close-button":""},{default:s(()=>[p("h3",{class:"va-h3",onVnodeMounted:D},P(l(y)("modals.addFormula")),513),p("div",null,[t(l(A),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:s(()=>[p("div",ae,[t(v,{class:"w-full",modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e),"max-length":125,readonly:""},null,8,["modelValue"])]),p("div",le,[t(l(r),{color:"success",onClick:a[2]||(a[2]=e=>d("&")),style:{borderRadius:"0"}},{default:s(()=>[u("&")]),_:1}),t(l(r),{color:"info",onClick:a[3]||(a[3]=e=>d("(")),style:{borderRadius:"0"}},{default:s(()=>[u("(")]),_:1}),t(l(r),{color:"info",onClick:a[4]||(a[4]=e=>d(")")),style:{borderRadius:"0"}},{default:s(()=>[u(")")]),_:1}),t(l(r),{color:"info",onClick:a[5]||(a[5]=e=>d("+")),style:{borderRadius:"0"}},{default:s(()=>[u("+")]),_:1}),t(l(r),{color:"info",onClick:a[6]||(a[6]=e=>d("-")),style:{borderRadius:"0"}},{default:s(()=>[u("-")]),_:1}),t(l(r),{color:"info",onClick:a[7]||(a[7]=e=>d("*")),style:{borderRadius:"0"}},{default:s(()=>[u("×")]),_:1}),t(l(r),{color:"info",onClick:a[8]||(a[8]=e=>d("/")),style:{borderRadius:"0"}},{default:s(()=>[u("÷")]),_:1}),t(l(r),{color:"info",onClick:a[9]||(a[9]=e=>d("%")),style:{borderRadius:"0"}},{default:s(()=>[u("%")]),_:1}),t(l(r),{color:"info",onClick:F,style:{borderRadius:"0"}},{default:s(()=>[u("<=")]),_:1})]),p("div",te,[t(l(r),{color:"secondary",onClick:a[10]||(a[10]=e=>d("1")),style:{borderRadius:"0"}},{default:s(()=>[u("1")]),_:1}),t(l(r),{color:"secondary",onClick:a[11]||(a[11]=e=>d("2")),style:{borderRadius:"0"}},{default:s(()=>[u("2")]),_:1}),t(l(r),{color:"secondary",onClick:a[12]||(a[12]=e=>d("3")),style:{borderRadius:"0"}},{default:s(()=>[u("3")]),_:1}),t(l(r),{color:"secondary",onClick:a[13]||(a[13]=e=>d("4")),style:{borderRadius:"0"}},{default:s(()=>[u("4")]),_:1}),t(l(r),{color:"secondary",onClick:a[14]||(a[14]=e=>d("5")),style:{borderRadius:"0"}},{default:s(()=>[u("5")]),_:1}),t(l(r),{color:"secondary",onClick:a[15]||(a[15]=e=>d("6")),style:{borderRadius:"0"}},{default:s(()=>[u("6")]),_:1}),t(l(r),{color:"secondary",onClick:a[16]||(a[16]=e=>d("7")),style:{borderRadius:"0"}},{default:s(()=>[u("7")]),_:1}),t(l(r),{color:"secondary",onClick:a[17]||(a[17]=e=>d("8")),style:{borderRadius:"0"}},{default:s(()=>[u("8")]),_:1}),t(l(r),{color:"secondary",onClick:a[18]||(a[18]=e=>d("9")),style:{borderRadius:"0"}},{default:s(()=>[u("9")]),_:1}),t(l(r),{color:"secondary",onClick:a[19]||(a[19]=e=>d("0")),style:{borderRadius:"0"}},{default:s(()=>[u("0")]),_:1}),t(l(r),{color:"secondary",onClick:a[20]||(a[20]=e=>d(".")),style:{borderRadius:"0"}},{default:s(()=>[u(".")]),_:1})]),p("div",oe,[(S(!0),M(K,null,Q(C.value,(e,w)=>(S(),W(l(r),{key:e.id,color:"primary",style:{borderRadius:"0"},onClick:U=>E(e)},{default:s(()=>[u(P(e.Name),1)]),_:2},1032,["onClick"]))),128))]),t(v,{class:"w-full",modelValue:f.Comment,"onUpdate:modelValue":a[21]||(a[21]=e=>f.Comment=e),"max-length":125,label:l(y)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const re={class:"grid grid-rows-[55px,1fr]"},ne={class:"flex justify-between"},de=p("span",{class:"flex w-full"},null,-1),ue={class:"va-h3"},ie={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},me={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},ce={class:"flex-grow"},ge={__name:"FormulaPage",setup(B){const{init:k}=O(),{locale:b,t:n}=j(),N=g([]),$=g(null),C=g(!1),V=g([]),y=g([]),c=L({StructureID:"",Name:"",NameRus:"",ParametersId:"",Comment:""});function f(o){$.value.applyTransaction({remove:[o]})}function d(o,e){o.setData(e)}T("ondeleted",f),T("onupdated",d);const E=G(()=>[{headerName:n("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:n("table.structure"),field:D(),flex:1},{headerName:n("table.Name"),field:_(),flex:1},{headerName:n("table.Comment"),field:"Comment"},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:se},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Y},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Z}]),F={sortable:!0,filter:!0},_=()=>b.value==="uz"?"Name":"NameRus",D=()=>b.value==="uz"?"SName":"NameRus",I=async()=>{try{const o=await x.get("/formula");N.value=Array.isArray(o.data)?o.data:o.data.items}catch(o){console.error("Error fetching data:",o)}},i=async()=>{try{const o=await x.get("/structure");V.value=o.data.map(e=>({value:e.id,text:b.value==="uz"?e.Name:e.NameRus}))}catch(o){console.error("Error fetching graphics data:",o)}};async function a(o){try{const e=await x.get(`/get-graph-with-params/${o}`);y.value=e.data.map(w=>({value:w.ParametersID,text:w.Name}))}catch(e){console.error("Error fetching data:",e)}}const v=async()=>{try{const{data:o}=await x.post("/formula",c);o.status===200?(C.value=!1,c.StructureID="",c.Name="",c.NameRus="",c.ParametersId="",c.Comment="",await I(),k({message:n("login.successMessage"),color:"success"})):console.error("Error saving data:",o.message)}catch(o){console.error("Error saving data:",o)}};return X(()=>{const o=localStorage.getItem("locale");o&&(b.value=o),I(),i()}),G(()=>b.value==="uz"?"Русский":"O‘zbek"),(o,e)=>{const w=R("VaSelect"),U=R("VaTextarea"),h=R("VaModal"),q=R("ag-grid-vue");return S(),M("div",re,[p("main",null,[p("div",ne,[de,t(l(r),{onClick:e[0]||(e[0]=m=>(C.value=!0,i)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),t(h,{modelValue:C.value,"onUpdate:modelValue":e[6]||(e[6]=m=>C.value=m),"ok-text":l(n)("buttons.save"),"cancel-text":l(n)("buttons.cancel"),onOk:v,"close-button":""},{default:s(()=>[p("h3",ue,P(l(n)("modals.addFormula")),1),p("div",null,[t(l(A),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:s(()=>[p("div",ie,[t(w,{modelValue:c.StructureID,"onUpdate:modelValue":[e[1]||(e[1]=m=>c.StructureID=m),a],"value-by":"value",class:"mb-1",label:l(n)("form.structureName"),options:V.value,clearable:""},null,8,["modelValue","label","options"])]),t(l(z),{class:"w-full",modelValue:c.Name,"onUpdate:modelValue":e[2]||(e[2]=m=>c.Name=m),rules:[m=>m&&m.length>0||l(n)("validation.requiredField")],label:l(n)("form.name")},null,8,["modelValue","rules","label"]),t(l(z),{class:"w-full",modelValue:c.NameRus,"onUpdate:modelValue":e[3]||(e[3]=m=>c.NameRus=m),rules:[m=>m&&m.length>0||l(n)("validation.requiredField")],label:l(n)("form.nameRus")},null,8,["modelValue","rules","label"]),p("div",me,[t(w,{modelValue:c.ParametersId,"onUpdate:modelValue":e[4]||(e[4]=m=>c.ParametersId=m),"value-by":"value",class:"mb-1",label:l(n)("form.structureName"),options:y.value,multiple:""},null,8,["modelValue","label","options"])]),t(U,{class:"w-full",modelValue:c.Comment,"onUpdate:modelValue":e[5]||(e[5]=m=>c.Comment=m),"max-length":"125",label:l(n)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),p("main",ce,[t(q,{rowData:N.value,columnDefs:E.value,defaultColDef:F,animateRows:"true",class:"ag-theme-material h-full",onGridReady:e[7]||(e[7]=m=>$.value=m.api)},null,8,["rowData","columnDefs"])])])}}};export{ge as default};
