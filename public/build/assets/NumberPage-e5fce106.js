import{u as k,c as P,r as N,G as B,f as x,g as $,h as E,k as d,j as e,D as I,l as D,i as f,t as R,m as w,d as G,K as H,V as T,n as h,H as F,x as z,o as K}from"./app-cceea9b3.js";/* empty css                   */const L={class:"h-full w-full text-center content-center"},J={class:"va-h3"},Q={__name:"DeleteBlog",props:["params"],setup(_){const{init:y}=k(),{t:c}=P(),a=N(!1),g=_,v=B("ondeleted"),m=async()=>{try{const{data:p}=await w.delete(`/pages/${g.params.data.id}`);p.status===200?(v(g.params.data),a.value=!1,y({message:c("login.successMessage"),color:"success"})):console.error("Error deleting data:",p.message)}catch(p){console.error("Error deleting data:",p)}};return(p,l)=>{const u=x("VaModal");return $(),E("main",L,[d(e(I),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:l[0]||(l[0]=b=>a.value=!0)}),d(u,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=b=>a.value=b),"ok-text":e(c)("modals.apply"),"cancel-text":e(c)("modals.cancel"),onClose:l[2]||(l[2]=b=>a.value=!1),onOk:m,"close-button":""},{default:D(()=>[f("h3",J,R(e(c)("modals.title")),1),f("p",null,R(e(c)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},W={class:"h-full w-full text-center content-center"},X={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},Y={__name:"EditBlog",props:["params"],setup(_){const{init:y}=k(),c=_,a=N(!1),g=B("onupdated"),v=N([]),{t:m,locale:p}=P(),l=G({StructureID:"",Name:"",NameRus:"",NumberPage:"",Comment:"",id:c.params.data.id}),u=async()=>{try{const i=await w.get("/structure");v.value=i.data.map(V=>({value:V.id,text:p.value==="uz"?V.Name:V.NameRus}));const t=await w.get(`pages/${c.params.data.id}`);l.StructureID=+t.data.StructureID,l.Name=t.data.Name,l.ShortName=t.data.ShortName,l.NumberPage=t.data.NumberPage,l.Comment=t.data.Comment}catch(i){console.error("Error fetching graphics data:",i)}},b=async()=>{try{const{data:i}=await w.put("/pages",l);i.status===200?(g(c.params.node,i.unit),a.value=!1,y({message:m("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return H(()=>l.StructureID,i=>{}),(i,t)=>{const V=x("VaSelect"),S=x("VaTextarea"),C=x("VaModal");return $(),E("main",W,[d(e(I),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:t[0]||(t[0]=o=>(a.value=!0,u))}),d(C,{modelValue:a.value,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value=o),"ok-text":e(m)("modals.apply"),"cancel-text":e(m)("modals.cancel"),onOk:b,onClose:t[7]||(t[7]=o=>a.value=!1),"close-button":""},{default:D(()=>[f("h3",{class:"va-h3",onVnodeMounted:u},R(e(m)("modals.editFactory")),513),f("div",null,[d(e(T),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:D(()=>[f("div",X,[d(V,{modelValue:l.StructureID,"onUpdate:modelValue":t[1]||(t[1]=o=>l.StructureID=o),"value-by":"value",class:"mb-1",label:e(m)("form.structureName"),options:v.value,clearable:""},null,8,["modelValue","label","options"])]),d(e(h),{class:"w-full",modelValue:l.NumberPage,"onUpdate:modelValue":t[2]||(t[2]=o=>l.NumberPage=o),type:"number",rules:[o=>o&&o.length>0||e(m)("validation.requiredField")],label:e(m)("form.numberpage")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:l.Name,"onUpdate:modelValue":t[3]||(t[3]=o=>l.Name=o),rules:[o=>o&&o.length>0||e(m)("validation.requiredField")],label:e(m)("form.name")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:l.NameRus,"onUpdate:modelValue":t[4]||(t[4]=o=>l.NameRus=o),rules:[o=>o&&o.length>0||e(m)("validation.requiredField")],label:e(m)("form.nameRus")},null,8,["modelValue","rules","label"]),d(S,{class:"w-full",modelValue:l.Comment,"onUpdate:modelValue":t[5]||(t[5]=o=>l.Comment=o),"max-length":"125",label:e(m)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const Z={class:"grid grid-rows-[55px,1fr]"},ee={class:"flex justify-between"},ae=f("span",{class:"flex w-full"},null,-1),le={class:"va-h3"},te={class:"flex-grow"},ne={__name:"NumberPage",props:{id:Number},setup(_){const{init:y}=k(),{locale:c,t:a}=P(),g=_,v=N([]),m=N(null),p=N(!1),l=N([]),u=G({StructureID:g.id,Name:"",NameRus:"",NumberPage:"",Comment:""});function b(s){m.value.applyTransaction({remove:[s]})}function i(s,r){s.setData(r)}F("ondeleted",b),F("onupdated",i);const t=z(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.structure"),field:o(),flex:1},{headerName:a("table.name"),field:S(),flex:1},{headerName:a("table.numberpage"),field:"NumberPage"},{headerName:a("table.comment"),field:C()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Y},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Q}]),V={sortable:!0,filter:!0},S=()=>c.value==="uz"?"Name":"NameRus",C=()=>c.value==="uz"?"ShortName":"ShortNameRus",o=()=>c.value==="uz"?"SName":"NameRus",M=async()=>{try{const s=await w.get(`/getRowPage/${g.id}`);v.value=Array.isArray(s.data)?s.data:s.data.items}catch(s){console.error("Error fetching data:",s)}},U=async()=>{try{const s=await w.get("/structure");l.value=s.data.map(r=>({value:r.id,text:c.value==="uz"?r.Name:r.NameRus}))}catch(s){console.error("Error fetching graphics data:",s)}},q=async()=>{try{const{data:s}=await w.post("/pages",u);s.status===200?(p.value=!1,u.StructureID="",u.Name="",u.NameRus="",u.NumberPage="",u.Comment="",await M(),y({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",s.message)}catch(s){console.error("Error saving data:",s)}};return K(()=>{const s=localStorage.getItem("locale");s&&(c.value=s),M(),U()}),z(()=>c.value==="uz"?"Русский":"O‘zbek"),(s,r)=>{const O=x("VaTextarea"),j=x("VaModal"),A=x("ag-grid-vue");return $(),E("div",Z,[f("main",null,[f("div",ee,[ae,d(e(I),{onClick:r[0]||(r[0]=n=>(p.value=!0,U)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),d(j,{modelValue:p.value,"onUpdate:modelValue":r[5]||(r[5]=n=>p.value=n),"ok-text":e(a)("buttons.save"),"cancel-text":e(a)("buttons.cancel"),onOk:q,"close-button":""},{default:D(()=>[f("h3",le,R(e(a)("modals.addPageTitle")),1),f("div",null,[d(e(T),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:D(()=>[d(e(h),{class:"w-full",modelValue:u.NumberPage,"onUpdate:modelValue":r[1]||(r[1]=n=>u.NumberPage=n),type:"number",rules:[n=>n&&n.length>0||e(a)("validation.requiredField")],label:e(a)("form.numberpage")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:u.Name,"onUpdate:modelValue":r[2]||(r[2]=n=>u.Name=n),rules:[n=>n&&n.length>0||e(a)("validation.requiredField")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:u.NameRus,"onUpdate:modelValue":r[3]||(r[3]=n=>u.NameRus=n),rules:[n=>n&&n.length>0||e(a)("validation.requiredField")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),d(O,{class:"w-full",modelValue:u.Comment,"onUpdate:modelValue":r[4]||(r[4]=n=>u.Comment=n),"max-length":"125",label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),f("main",te,[d(A,{rowData:v.value,columnDefs:t.value,defaultColDef:V,animateRows:"true",class:"ag-theme-material h-full",onGridReady:r[6]||(r[6]=n=>m.value=n.api)},null,8,["rowData","columnDefs"])])])}}};export{ne as default};
