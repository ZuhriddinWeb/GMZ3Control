import{u as M,r as N,c as $,E as F,f as x,g as E,h as y,j as m,k as e,z as U,l as b,i as p,t as _,n as w,d as S,V as B,m as R,a as L,s as V,o as J,F as K,G as Q,H as T}from"./app-W1L24GQ1.js";/* empty css                   */const W={class:"h-full w-full text-center content-center"},X={class:"va-h3"},Y={__name:"DeleteGraphicsModal",props:["params"],setup(h){const{init:v}=M(),c=N(!1),f=h,{t:a}=$(),g=F("ondeleted"),n=async()=>{try{const{data:i}=await w.delete(`/graphics/${f.params.data.id}`);i.status===200?(g(f.params.data),c.value=!1,v({message:a("login.successMessage"),color:"success"})):console.error("Error deleting data:",i.message)}catch(i){console.error("Error deleting data:",i)}};return(i,o)=>{const r=x("VaModal");return y(),E("main",W,[m(e(U),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:o[0]||(o[0]=l=>c.value=!0)}),m(r,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=l=>c.value=l),"ok-text":e(a)("modals.apply"),"cancel-text":e(a)("modals.cancel"),onClose:o[2]||(o[2]=l=>c.value=!1),onOk:n,"close-button":""},{default:b(()=>[p("h3",X,_(e(a)("modals.title")),1),p("p",null,_(e(a)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},Z={class:"h-full w-full text-center content-center"},ee={__name:"EditGraphicsModal",props:["params"],setup(h){const v=h,c=N(!1),f=F("onupdated"),{t:a}=$(),{init:g}=M(),n=S({Name:"",NameRus:"",Comment:"",id:v.params.data.id}),i=async()=>{w.get(`graphics/${n.id}`).then(r=>{n.Name=r.data.Name,n.NameRus=r.data.NameRus,n.Comment=r.data.Comment}).catch(r=>{console.error("Error fetching data:",r)})},o=async()=>{try{const{data:r}=await w.put(`/graphics/${n.id}`,n);r.status===200?(f(v.params.node,r.unit),c.value=!1,g({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",r.message)}catch(r){console.error("Error saving data:",r)}};return(r,l)=>{const k=x("VaTextarea"),D=x("VaModal");return y(),E("main",Z,[m(e(U),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:l[0]||(l[0]=d=>c.value=!0)}),m(D,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=d=>c.value=d),"ok-text":e(a)("modals.apply"),"cancel-text":e(a)("modals.cancel"),onOk:o,onClose:l[5]||(l[5]=d=>c.value=!1),"close-button":""},{default:b(()=>[p("h3",{class:"va-h3",onVnodeMounted:i},_(e(a)("modals.editFactory")),513),p("div",null,[m(e(B),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[m(e(R),{class:"w-full",modelValue:n.Name,"onUpdate:modelValue":l[1]||(l[1]=d=>n.Name=d),rules:[d=>!!d||e(a)("validation.required")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),m(e(R),{class:"w-full",modelValue:n.NameRus,"onUpdate:modelValue":l[2]||(l[2]=d=>n.NameRus=d),rules:[d=>!!d||e(a)("validation.required")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),m(k,{class:"w-full",modelValue:n.Comment,"onUpdate:modelValue":l[3]||(l[3]=d=>n.Comment=d),"max-length":125,label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},ae={class:"grid grid-rows-[55px,1fr]"},te={class:"flex justify-between"},le={class:"va-h3"},oe={class:"flex-grow"},re={__name:"GraphicsPage",setup(h){const{init:v}=M(),c=L(),{locale:f,t:a}=$(),g=N([]),n=N(null),i=N(!1),o=S({Name:"",NameRus:"",Comment:""}),r=V(()=>c.state.user.roles[8]),l=t=>{var s,C;return((C=(s=r.value)==null?void 0:s.pivot)==null?void 0:C[t])==="1"},k=V(()=>l("create")),D=V(()=>l("update")),d=V(()=>l("delete"));function q(t){n.value.applyTransaction({remove:[t]})}function z(t,s){t.setData(s)}T("ondeleted",q),T("onupdated",z);const I=V(()=>{const t=[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.name"),field:j(),flex:1},{headerName:a("table.comment"),field:"Comment",flex:1}];return D.value&&t.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:ee}),d.value&&t.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Y}),t}),O={sortable:!0,filter:!0},j=()=>f.value==="uz"?"Name":"NameRus",G=async()=>{try{const t=await w.get("/graphics");g.value=Array.isArray(t.data)?t.data:t.data.items}catch(t){console.error("Error fetching data:",t)}},A=async()=>{try{const{data:t}=await w.post("/graphics",o);t.status===200?(i.value=!1,o.Name="",o.NameRus="",o.Comment="",await G(),v({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",t.message)}catch(t){console.error("Error saving data:",t)}};return J(()=>{const t=localStorage.getItem("locale");t&&(f.value=t),G()}),V(()=>f.value==="uz"?"Русский":"O‘zbek"),(t,s)=>{const C=x("VaTextarea"),P=x("VaModal"),H=x("ag-grid-vue");return y(),E("div",ae,[p("main",null,[p("div",te,[s[6]||(s[6]=p("span",{class:"flex w-full"},null,-1)),k.value?(y(),K(e(U),{key:0,onClick:s[0]||(s[0]=u=>i.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})):Q("",!0)]),m(P,{modelValue:i.value,"onUpdate:modelValue":s[4]||(s[4]=u=>i.value=u),"ok-text":e(a)("buttons.save"),"cancel-text":e(a)("buttons.cancel"),onOk:A,"close-button":""},{default:b(()=>[p("h3",le,_(e(a)("modals.addGraphicTitle")),1),p("div",null,[m(e(B),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[m(e(R),{class:"w-full",modelValue:o.Name,"onUpdate:modelValue":s[1]||(s[1]=u=>o.Name=u),rules:[u=>u&&u.length>0||e(a)("validation.requiredField")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),m(e(R),{class:"w-full",modelValue:o.NameRus,"onUpdate:modelValue":s[2]||(s[2]=u=>o.NameRus=u),rules:[u=>u&&u.length>0||e(a)("validation.requiredField")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),m(C,{class:"w-full",modelValue:o.Comment,"onUpdate:modelValue":s[3]||(s[3]=u=>o.Comment=u),"max-length":"125",label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),p("main",oe,[m(H,{rowData:g.value,columnDefs:I.value,defaultColDef:O,animateRows:"true",class:"ag-theme-material h-full",onGridReady:s[5]||(s[5]=u=>n.value=u.api)},null,8,["rowData","columnDefs"])])])}}};export{re as default};
