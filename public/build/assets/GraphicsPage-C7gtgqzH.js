import{u as R,r as x,c as k,E as T,f as V,g as D,h as M,j as i,k as e,z as $,l as b,i as p,t as h,n as w,d as G,V as F,m as C,s as E,o as I,H as U}from"./app-BnZHz_BC.js";/* empty css                   */const O={class:"h-full w-full text-center content-center"},j={class:"va-h3"},A={__name:"DeleteGraphicsModal",props:["params"],setup(N){const{init:g}=R(),c=x(!1),n=N,{t:l}=k(),v=T("ondeleted"),a=async()=>{try{const{data:t}=await w.delete(`/graphics/${n.params.data.id}`);t.status===200?(v(n.params.data),c.value=!1,g({message:l("login.successMessage"),color:"success"})):console.error("Error deleting data:",t.message)}catch(t){console.error("Error deleting data:",t)}};return(t,f)=>{const r=V("VaModal");return M(),D("main",O,[i(e($),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:f[0]||(f[0]=o=>c.value=!0)}),i(r,{modelValue:c.value,"onUpdate:modelValue":f[1]||(f[1]=o=>c.value=o),"ok-text":e(l)("modals.apply"),"cancel-text":e(l)("modals.cancel"),onClose:f[2]||(f[2]=o=>c.value=!1),onOk:a,"close-button":""},{default:b(()=>[p("h3",j,h(e(l)("modals.title")),1),p("p",null,h(e(l)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},P={class:"h-full w-full text-center content-center"},H={__name:"EditGraphicsModal",props:["params"],setup(N){const g=N,c=x(!1),n=T("onupdated"),{t:l}=k(),{init:v}=R(),a=G({Name:"",NameRus:"",Comment:"",id:g.params.data.id}),t=async()=>{w.get(`graphics/${a.id}`).then(r=>{a.Name=r.data.Name,a.NameRus=r.data.NameRus,a.Comment=r.data.Comment}).catch(r=>{console.error("Error fetching data:",r)})},f=async()=>{try{const{data:r}=await w.put(`/graphics/${a.id}`,a);r.status===200?(n(g.params.node,r.unit),c.value=!1,v({message:l("login.successMessage"),color:"success"})):console.error("Error saving data:",r.message)}catch(r){console.error("Error saving data:",r)}};return(r,o)=>{const _=V("VaTextarea"),y=V("VaModal");return M(),D("main",P,[i(e($),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:o[0]||(o[0]=d=>c.value=!0)}),i(y,{modelValue:c.value,"onUpdate:modelValue":o[4]||(o[4]=d=>c.value=d),"ok-text":e(l)("modals.apply"),"cancel-text":e(l)("modals.cancel"),onOk:f,onClose:o[5]||(o[5]=d=>c.value=!1),"close-button":""},{default:b(()=>[p("h3",{class:"va-h3",onVnodeMounted:t},h(e(l)("modals.editFactory")),513),p("div",null,[i(e(F),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[i(e(C),{class:"w-full",modelValue:a.Name,"onUpdate:modelValue":o[1]||(o[1]=d=>a.Name=d),rules:[d=>!!d||e(l)("validation.required")],label:e(l)("form.name")},null,8,["modelValue","rules","label"]),i(e(C),{class:"w-full",modelValue:a.NameRus,"onUpdate:modelValue":o[2]||(o[2]=d=>a.NameRus=d),rules:[d=>!!d||e(l)("validation.required")],label:e(l)("form.nameRus")},null,8,["modelValue","rules","label"]),i(_,{class:"w-full",modelValue:a.Comment,"onUpdate:modelValue":o[3]||(o[3]=d=>a.Comment=d),"max-length":125,label:e(l)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},L={class:"grid grid-rows-[55px,1fr]"},J={class:"flex justify-between"},K={class:"va-h3"},Q={class:"flex-grow"},Y={__name:"GraphicsPage",setup(N){const{init:g}=R(),{locale:c,t:n}=k(),l=x([]),v=x(null),a=x(!1),t=G({Name:"",NameRus:"",Comment:""});function f(s){v.value.applyTransaction({remove:[s]})}function r(s,u){s.setData(u)}U("ondeleted",f),U("onupdated",r);const o=E(()=>[{headerName:n("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:n("table.name"),field:y(),flex:1},{headerName:n("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:H},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:A}]),_={sortable:!0,filter:!0},y=()=>c.value==="uz"?"Name":"NameRus",d=async()=>{try{const s=await w.get("/graphics");l.value=Array.isArray(s.data)?s.data:s.data.items}catch(s){console.error("Error fetching data:",s)}},S=async()=>{try{const{data:s}=await w.post("/graphics",t);s.status===200?(a.value=!1,t.Name="",t.NameRus="",t.Comment="",await d(),g({message:n("login.successMessage"),color:"success"})):console.error("Error saving data:",s.message)}catch(s){console.error("Error saving data:",s)}};return I(()=>{const s=localStorage.getItem("locale");s&&(c.value=s),d()}),E(()=>c.value==="uz"?"Русский":"O‘zbek"),(s,u)=>{const q=V("VaTextarea"),z=V("VaModal"),B=V("ag-grid-vue");return M(),D("div",L,[p("main",null,[p("div",J,[u[6]||(u[6]=p("span",{class:"flex w-full"},null,-1)),i(e($),{onClick:u[0]||(u[0]=m=>a.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),i(z,{modelValue:a.value,"onUpdate:modelValue":u[4]||(u[4]=m=>a.value=m),"ok-text":e(n)("buttons.save"),"cancel-text":e(n)("buttons.cancel"),onOk:S,"close-button":""},{default:b(()=>[p("h3",K,h(e(n)("modals.addGraphicTitle")),1),p("div",null,[i(e(F),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[i(e(C),{class:"w-full",modelValue:t.Name,"onUpdate:modelValue":u[1]||(u[1]=m=>t.Name=m),rules:[m=>m&&m.length>0||e(n)("validation.requiredField")],label:e(n)("form.name")},null,8,["modelValue","rules","label"]),i(e(C),{class:"w-full",modelValue:t.NameRus,"onUpdate:modelValue":u[2]||(u[2]=m=>t.NameRus=m),rules:[m=>m&&m.length>0||e(n)("validation.requiredField")],label:e(n)("form.nameRus")},null,8,["modelValue","rules","label"]),i(q,{class:"w-full",modelValue:t.Comment,"onUpdate:modelValue":u[3]||(u[3]=m=>t.Comment=m),"max-length":"125",label:e(n)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),p("main",Q,[i(B,{rowData:l.value,columnDefs:o.value,defaultColDef:_,animateRows:"true",class:"ag-theme-material h-full",onGridReady:u[5]||(u[5]=m=>v.value=m.api)},null,8,["rowData","columnDefs"])])])}}};export{Y as default};
