import{u as U,c as $,r as h,E as z,f as x,g as E,h as F,j as m,k as e,z as _,l as D,i as p,t as y,n as w,d as T,K,V as G,m as g,s as B,o as L,H as q}from"./app-DfyKVEEG.js";/* empty css                   */const P={class:"h-full w-full text-center content-center"},J={class:"va-h3"},Q={__name:"DeleteBlog",props:["params"],setup(S){const{init:R}=U(),{t:i}=$(),a=h(!1),v=S,V=z("ondeleted"),d=async()=>{try{const{data:f}=await w.delete(`/blogs/${v.params.data.id}`);f.status===200?(V(v.params.data),a.value=!1,R({message:i("login.successMessage"),color:"success"})):console.error("Error deleting data:",f.message)}catch(f){console.error("Error deleting data:",f)}};return(f,l)=>{const n=x("VaModal");return F(),E("main",P,[m(e(_),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:l[0]||(l[0]=N=>a.value=!0)}),m(n,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=N=>a.value=N),"ok-text":e(i)("modals.apply"),"cancel-text":e(i)("modals.cancel"),onClose:l[2]||(l[2]=N=>a.value=!1),onOk:d,"close-button":""},{default:D(()=>[p("h3",J,y(e(i)("modals.title")),1),p("p",null,y(e(i)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},W={class:"h-full w-full text-center content-center"},X={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},Y={__name:"EditBlog",props:["params"],setup(S){const{init:R}=U(),i=S,a=h(!1),v=z("onupdated"),V=h([]),{t:d,locale:f}=$(),l=T({StructureID:"",Name:"",NameRus:"",ShortNameRus:"",ShortName:"",Comment:"",id:i.params.data.id}),n=async()=>{try{const c=await w.get("/structure");V.value=c.data.map(b=>({value:b.id,text:f.value==="uz"?b.Name:b.NameRus}));const o=await w.get(`blogs/${i.params.data.id}`);l.StructureID=+o.data.StructureID,l.Name=o.data.Name,l.ShortName=o.data.ShortName,l.Comment=o.data.Comment}catch(c){console.error("Error fetching graphics data:",c)}},N=async()=>{try{const{data:c}=await w.put("/blogs",l);c.status===200?(v(i.params.node,c.unit),a.value=!1,R({message:d("login.successMessage"),color:"success"})):console.error("Error saving data:",c.message)}catch(c){console.error("Error saving data:",c)}};return K(()=>l.StructureID,c=>{}),(c,o)=>{const b=x("VaSelect"),C=x("VaTextarea"),k=x("VaModal");return F(),E("main",W,[m(e(_),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:o[0]||(o[0]=s=>(a.value=!0,n))}),m(k,{modelValue:a.value,"onUpdate:modelValue":o[7]||(o[7]=s=>a.value=s),"ok-text":e(d)("modals.apply"),"cancel-text":e(d)("modals.cancel"),onOk:N,onClose:o[8]||(o[8]=s=>a.value=!1),"close-button":""},{default:D(()=>[p("h3",{class:"va-h3",onVnodeMounted:n},y(e(d)("modals.editFactory")),513),p("div",null,[m(e(G),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:D(()=>[p("div",X,[m(b,{modelValue:l.StructureID,"onUpdate:modelValue":o[1]||(o[1]=s=>l.StructureID=s),"value-by":"value",class:"mb-1",label:e(d)("form.structureName"),options:V.value,clearable:""},null,8,["modelValue","label","options"])]),m(e(g),{class:"w-full",modelValue:l.Name,"onUpdate:modelValue":o[2]||(o[2]=s=>l.Name=s),rules:[s=>!!s||e(d)("validation.requiredField")],label:e(d)("form.name")},null,8,["modelValue","rules","label"]),m(e(g),{class:"w-full",modelValue:l.NameRus,"onUpdate:modelValue":o[3]||(o[3]=s=>l.NameRus=s),rules:[s=>!!s||e(d)("validation.requiredField")],label:e(d)("form.nameRus")},null,8,["modelValue","rules","label"]),m(e(g),{class:"w-full",modelValue:l.ShortName,"onUpdate:modelValue":o[4]||(o[4]=s=>l.ShortName=s),rules:[s=>!!s||e(d)("validation.requiredField")],label:e(d)("form.shortName")},null,8,["modelValue","rules","label"]),m(e(g),{class:"w-full",modelValue:l.ShortNameRus,"onUpdate:modelValue":o[5]||(o[5]=s=>l.ShortNameRus=s),rules:[s=>!!s||e(d)("validation.requiredField")],label:e(d)("form.shortNameRus")},null,8,["modelValue","rules","label"]),m(C,{class:"w-full",modelValue:l.Comment,"onUpdate:modelValue":o[6]||(o[6]=s=>l.Comment=s),"max-length":125,label:e(d)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},Z={class:"grid grid-rows-[55px,1fr]"},ee={class:"flex justify-between"},ae={class:"va-h3"},le={class:"flex-grow"},se={__name:"BlogsPage",props:{id:Number},setup(S){const{init:R}=U(),{locale:i,t:a}=$(),v=h([]),V=h(null),d=h(!1),f=h([]),l=S,n=T({StructureID:l.id,Name:"",NameRus:"",ShortName:"",ShortNameRus:"",Comment:""});function N(u){V.value.applyTransaction({remove:[u]})}function c(u,r){u.setData(r)}q("ondeleted",N),q("onupdated",c);const o=B(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.structure"),field:s(),flex:1},{headerName:a("table.name"),field:C(),flex:1},{headerName:a("table.shortName"),field:k()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Y},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Q}]),b={sortable:!0,filter:!0},C=()=>i.value==="uz"?"Name":"NameRus",k=()=>i.value==="uz"?"ShortName":"ShortNameRus",s=()=>i.value==="uz"?"Name":"NameRus",I=async()=>{try{const u=await w.get(`/getRowBlog/${l.id}`);v.value=Array.isArray(u.data)?u.data:u.data.items}catch(u){console.error("Error fetching data:",u)}},M=async()=>{try{const u=await w.get("/structure");f.value=u.data.map(r=>({value:r.id,text:i.value==="uz"?r.Name:r.NameRus}))}catch(u){console.error("Error fetching graphics data:",u)}},O=async()=>{try{const{data:u}=await w.post("/blogs",n);u.status===200?(d.value=!1,n.StructureID="",n.Name="",n.NameRus="",n.ShortName="",n.ShortNameRus="",n.Comment="",await I(),R({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",u.message)}catch(u){console.error("Error saving data:",u)}};return L(()=>{const u=localStorage.getItem("locale");u&&(i.value=u),I(),M()}),B(()=>i.value==="uz"?"Русский":"O‘zbek"),(u,r)=>{const j=x("VaTextarea"),A=x("VaModal"),H=x("ag-grid-vue");return F(),E("div",Z,[p("main",null,[p("div",ee,[r[8]||(r[8]=p("span",{class:"flex w-full"},null,-1)),m(e(_),{onClick:r[0]||(r[0]=t=>(d.value=!0,M)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),m(A,{modelValue:d.value,"onUpdate:modelValue":r[6]||(r[6]=t=>d.value=t),"ok-text":e(a)("buttons.save"),"cancel-text":e(a)("buttons.cancel"),onOk:O,"close-button":""},{default:D(()=>[p("h3",ae,y(e(a)("modals.addBlogTitle")),1),p("div",null,[m(e(G),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:D(()=>[m(e(g),{class:"w-full",modelValue:n.Name,"onUpdate:modelValue":r[1]||(r[1]=t=>n.Name=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),m(e(g),{class:"w-full",modelValue:n.NameRus,"onUpdate:modelValue":r[2]||(r[2]=t=>n.NameRus=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),m(e(g),{class:"w-full",modelValue:n.ShortName,"onUpdate:modelValue":r[3]||(r[3]=t=>n.ShortName=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.shortName")},null,8,["modelValue","rules","label"]),m(e(g),{class:"w-full",modelValue:n.ShortNameRus,"onUpdate:modelValue":r[4]||(r[4]=t=>n.ShortNameRus=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.shortNameRus")},null,8,["modelValue","rules","label"]),m(j,{class:"w-full",modelValue:n.Comment,"onUpdate:modelValue":r[5]||(r[5]=t=>n.Comment=t),"max-length":"125",label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),p("main",le,[m(H,{rowData:v.value,columnDefs:o.value,defaultColDef:b,animateRows:"true",class:"ag-theme-material h-full",onGridReady:r[7]||(r[7]=t=>V.value=t.api)},null,8,["rowData","columnDefs"])])])}}};export{se as default};
