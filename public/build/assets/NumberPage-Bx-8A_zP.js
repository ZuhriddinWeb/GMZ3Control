import{u as E,c as U,r as b,E as G,f as N,g as F,h as k,j as c,k as e,z as I,l as C,i as f,t as _,n as x,d as T,K as X,V as q,m as y,a as Y,s as h,o as Z,F as ee,G as ae,H as B}from"./app-wpU-urBl.js";/* empty css                   */const te={class:"h-full w-full text-center content-center"},le={class:"va-h3"},oe={__name:"DeleteBlog",props:["params"],setup(D){const{init:R}=E(),{t:p}=U(),d=b(!1),r=D,v=G("ondeleted"),m=async()=>{try{const{data:g}=await x.delete(`/pages/${r.params.data.id}`);g.status===200?(v(r.params.data),d.value=!1,R({message:p("login.successMessage"),color:"success"})):console.error("Error deleting data:",g.message)}catch(g){console.error("Error deleting data:",g)}};return(g,a)=>{const w=N("VaModal");return k(),F("main",te,[c(e(I),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:a[0]||(a[0]=u=>d.value=!0)}),c(w,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=u=>d.value=u),"ok-text":e(p)("modals.apply"),"cancel-text":e(p)("modals.cancel"),onClose:a[2]||(a[2]=u=>d.value=!1),onOk:m,"close-button":""},{default:C(()=>[f("h3",le,_(e(p)("modals.title")),1),f("p",null,_(e(p)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},se={class:"h-full w-full text-center content-center"},re={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},ne={__name:"EditBlog",props:["params"],setup(D){const{init:R}=E(),p=D,d=b(!1),r=G("onupdated"),v=b([]),{t:m,locale:g}=U(),a=T({StructureID:"",Name:"",NameRus:"",NumberPage:"",Comment:"",id:p.params.data.id}),w=async()=>{try{const i=await x.get("/structure");v.value=i.data.map(V=>({value:V.id,text:g.value==="uz"?V.Name:V.NameRus}));const l=await x.get(`pages/${p.params.data.id}`);a.StructureID=+l.data.StructureID,a.Name=l.data.Name,a.ShortName=l.data.ShortName,a.NumberPage=l.data.NumberPage,a.Comment=l.data.Comment}catch(i){console.error("Error fetching graphics data:",i)}},u=async()=>{try{const{data:i}=await x.put("/pages",a);i.status===200?(r(p.params.node,i.unit),d.value=!1,R({message:m("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return X(()=>a.StructureID,i=>{}),(i,l)=>{const V=N("VaSelect"),P=N("VaTextarea"),$=N("VaModal");return k(),F("main",se,[c(e(I),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:l[0]||(l[0]=s=>(d.value=!0,w))}),c($,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=s=>d.value=s),"ok-text":e(m)("modals.apply"),"cancel-text":e(m)("modals.cancel"),onOk:u,onClose:l[7]||(l[7]=s=>d.value=!1),"close-button":""},{default:C(()=>[f("h3",{class:"va-h3",onVnodeMounted:w},_(e(m)("modals.editFactory")),513),f("div",null,[c(e(q),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:C(()=>[f("div",re,[c(V,{modelValue:a.StructureID,"onUpdate:modelValue":l[1]||(l[1]=s=>a.StructureID=s),"value-by":"value",class:"mb-1",label:e(m)("form.structureName"),options:v.value,clearable:""},null,8,["modelValue","label","options"])]),c(e(y),{class:"w-full",modelValue:a.NumberPage,"onUpdate:modelValue":l[2]||(l[2]=s=>a.NumberPage=s),type:"number",rules:[s=>s&&s.length>0||e(m)("validation.requiredField")],label:e(m)("form.numberpage")},null,8,["modelValue","rules","label"]),c(e(y),{class:"w-full",modelValue:a.Name,"onUpdate:modelValue":l[3]||(l[3]=s=>a.Name=s),rules:[s=>s&&s.length>0||e(m)("validation.requiredField")],label:e(m)("form.name")},null,8,["modelValue","rules","label"]),c(e(y),{class:"w-full",modelValue:a.NameRus,"onUpdate:modelValue":l[4]||(l[4]=s=>a.NameRus=s),rules:[s=>s&&s.length>0||e(m)("validation.requiredField")],label:e(m)("form.nameRus")},null,8,["modelValue","rules","label"]),c(P,{class:"w-full",modelValue:a.Comment,"onUpdate:modelValue":l[5]||(l[5]=s=>a.Comment=s),"max-length":"125",label:e(m)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},ue={class:"grid grid-rows-[55px,1fr]"},de={class:"flex justify-between"},me={class:"va-h3"},ce={class:"flex-grow"},fe={__name:"NumberPage",props:{id:Number},setup(D){const{init:R}=E(),p=Y(),{locale:d,t:r}=U(),v=D,m=b([]),g=b(null),a=b(!1),w=b([]),u=T({StructureID:v.id,Name:"",NameRus:"",NumberPage:"",Comment:""}),i=h(()=>p.state.user.roles[17]),l=t=>{var o,S;return((S=(o=i.value)==null?void 0:o.pivot)==null?void 0:S[t])==="1"},V=h(()=>l("create")),P=h(()=>l("update")),$=h(()=>l("delete"));function s(t){g.value.applyTransaction({remove:[t]})}function O(t,o){t.setData(o)}B("ondeleted",s),B("onupdated",O);const j=h(()=>{const t=[{headerName:r("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:r("table.structure"),field:L(),flex:1},{headerName:r("table.name"),field:H(),flex:1},{headerName:r("table.numberpage"),field:"NumberPage"},{headerName:r("table.comment"),field:K()}];return P.value&&t.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:ne}),$.value&&t.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:oe}),t}),A={sortable:!0,filter:!0},H=()=>d.value==="uz"?"Name":"NameRus",K=()=>d.value==="uz"?"ShortName":"ShortNameRus",L=()=>d.value==="uz"?"SName":"NameRus",M=async()=>{try{const t=await x.get(`/getRowPage/${v.id}`);m.value=Array.isArray(t.data)?t.data:t.data.items}catch(t){console.error("Error fetching data:",t)}},z=async()=>{try{const t=await x.get("/structure");w.value=t.data.map(o=>({value:o.id,text:d.value==="uz"?o.Name:o.NameRus}))}catch(t){console.error("Error fetching graphics data:",t)}},J=async()=>{try{const{data:t}=await x.post("/pages",u);t.status===200?(a.value=!1,u.StructureID="",u.Name="",u.NameRus="",u.NumberPage="",u.Comment="",await M(),R({message:r("login.successMessage"),color:"success"})):console.error("Error saving data:",t.message)}catch(t){console.error("Error saving data:",t)}};return Z(()=>{const t=localStorage.getItem("locale");t&&(d.value=t),M(),z()}),h(()=>d.value==="uz"?"Русский":"O‘zbek"),(t,o)=>{const S=N("VaTextarea"),Q=N("VaModal"),W=N("ag-grid-vue");return k(),F("div",ue,[f("main",null,[f("div",de,[o[7]||(o[7]=f("span",{class:"flex w-full"},null,-1)),V.value?(k(),ee(e(I),{key:0,onClick:o[0]||(o[0]=n=>(a.value=!0,z)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})):ae("",!0)]),c(Q,{modelValue:a.value,"onUpdate:modelValue":o[5]||(o[5]=n=>a.value=n),"ok-text":e(r)("buttons.save"),"cancel-text":e(r)("buttons.cancel"),onOk:J,"close-button":""},{default:C(()=>[f("h3",me,_(e(r)("modals.addPageTitle")),1),f("div",null,[c(e(q),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:C(()=>[c(e(y),{class:"w-full",modelValue:u.NumberPage,"onUpdate:modelValue":o[1]||(o[1]=n=>u.NumberPage=n),type:"number",rules:[n=>n&&n.length>0||e(r)("validation.requiredField")],label:e(r)("form.numberpage")},null,8,["modelValue","rules","label"]),c(e(y),{class:"w-full",modelValue:u.Name,"onUpdate:modelValue":o[2]||(o[2]=n=>u.Name=n),rules:[n=>n&&n.length>0||e(r)("validation.requiredField")],label:e(r)("form.name")},null,8,["modelValue","rules","label"]),c(e(y),{class:"w-full",modelValue:u.NameRus,"onUpdate:modelValue":o[3]||(o[3]=n=>u.NameRus=n),rules:[n=>n&&n.length>0||e(r)("validation.requiredField")],label:e(r)("form.nameRus")},null,8,["modelValue","rules","label"]),c(S,{class:"w-full",modelValue:u.Comment,"onUpdate:modelValue":o[4]||(o[4]=n=>u.Comment=n),"max-length":"125",label:e(r)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),f("main",ce,[c(W,{rowData:m.value,columnDefs:j.value,defaultColDef:A,animateRows:"true",class:"ag-theme-material h-full",onGridReady:o[6]||(o[6]=n=>g.value=n.api)},null,8,["rowData","columnDefs"])])])}}};export{fe as default};
