import{u as F,c as E,r as c,d as M,H as N,x as h,o as T,m as f,f as p,g as q,h as z,i as r,k as n,j as l,l as v,D as B,t as I,V as $,n as m}from"./app-65366f31.js";/* empty css                   */import{_ as j,a as G}from"./EditUnitsModal-c21f8378.js";const O={class:"grid grid-rows-[55px,1fr]"},P={class:"flex justify-between"},A=r("span",{class:"flex w-full"},null,-1),H={class:"va-h3"},L={class:"flex-grow"},X={__name:"UnitsPage",setup(J){const{init:V}=F(),{locale:u,t}=E(),i=c([]),g=c(null),d=c(!1),s=M({Name:"",ShortName:"",NameRus:"",ShortNameRus:"",Comment:""});function w(o){g.value.applyTransaction({remove:[o]})}function x(o,a){o.setData(a)}N("ondeleted",w),N("onupdated",x);const _=h(()=>[{headerName:t("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:t("table.name"),field:R(),flex:1},{headerName:t("table.shortName"),field:S()},{headerName:t("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:j},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:G}]),b={sortable:!0,filter:!0},R=()=>u.value==="uz"?"Name":"NameRus",S=()=>u.value==="uz"?"ShortName":"ShortNameRus",y=async()=>{try{const o=await f.get("/units");console.log(o.data),i.value=o.data}catch(o){console.error("Error fetching data:",o)}},C=async()=>{try{const{data:o}=await f.post("/units",s);o.status===200?(d.value=!1,s.Name="",s.ShortName="",s.NameRus="",s.ShortNameRus="",s.Comment="",await y(),V({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",o.message)}catch(o){console.error("Error saving data:",o)}};return T(()=>{const o=localStorage.getItem("locale");o&&(u.value=o),(async()=>{try{const a=await f.get("/units");i.value=a.data}catch(a){console.error("Error fetching data:",a)}})()}),h(()=>u.value==="uz"?"Русский":"O‘zbek"),(o,a)=>{const D=p("VaTextarea"),U=p("VaModal"),k=p("ag-grid-vue");return q(),z("div",O,[r("main",null,[r("div",P,[A,n(l(B),{onClick:a[0]||(a[0]=e=>d.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),n(U,{modelValue:d.value,"onUpdate:modelValue":a[6]||(a[6]=e=>d.value=e),"ok-text":l(t)("buttons.save"),"cancel-text":l(t)("buttons.cancel"),onOk:C,"close-button":""},{default:v(()=>[r("h3",H,I(l(t)("modals.addUnitTitle")),1),r("div",null,[n(l($),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:v(()=>[n(l(m),{class:"w-full",modelValue:s.Name,"onUpdate:modelValue":a[1]||(a[1]=e=>s.Name=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.name")},null,8,["modelValue","rules","label"]),n(l(m),{class:"w-full",modelValue:s.NameRus,"onUpdate:modelValue":a[2]||(a[2]=e=>s.NameRus=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.nameRus")},null,8,["modelValue","rules","label"]),n(l(m),{class:"w-full",modelValue:s.ShortName,"onUpdate:modelValue":a[3]||(a[3]=e=>s.ShortName=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.shortName")},null,8,["modelValue","rules","label"]),n(l(m),{class:"w-full",modelValue:s.ShortNameRus,"onUpdate:modelValue":a[4]||(a[4]=e=>s.ShortNameRus=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.shortNameRus")},null,8,["modelValue","rules","label"]),n(D,{class:"w-full",modelValue:s.Comment,"onUpdate:modelValue":a[5]||(a[5]=e=>s.Comment=e),"max-length":"125",label:l(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),r("main",L,[n(k,{rowData:i.value,columnDefs:_.value,defaultColDef:b,animateRows:"true",class:"ag-theme-material h-full",onGridReady:a[7]||(a[7]=e=>g.value=e.api)},null,8,["rowData","columnDefs"])])])}}};export{X as default};
