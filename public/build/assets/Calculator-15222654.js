import{u as j,r as p,G as I,c as G,d as L,I as P,f as w,g as y,h as k,k as l,j as t,D as s,l as a,i as m,t as $,V as S,B as r,J as U,K as O,L as z,m as R}from"./app-d6fd952f.js";const J={class:"h-full w-full text-center content-center"},K={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},q={class:"grid grid-cols-9 gap-1 mt-3 w-full"},A={class:"grid grid-cols-11 gap-1 mt-3 w-full"},H={key:0},Q={class:"flex justify-between gap-1 mt-4"},W={key:1},_={__name:"Calculator",props:["params"],setup(B){const{init:V}=j(),b=B,f=p(!1);I("onupdated");const N=p([]),D=p(null),C=p([]),g=p(""),{t:i,locale:E}=G(),u=L({Calculate:"",Comment:"",id:b.params.data.id}),n=d=>{u.Calculate+=d,M()},F=d=>{u.Calculate+=d.id,g.value+=d.Name+","},M=()=>{const d=u.Calculate.split(",").filter(Boolean);g.value=d.map(e=>{const c=C.value.find(v=>v.id===e);return c?c.Name:e}).join(", ")},x=async()=>{try{const d=await R.get("/structure");N.value=d.data.map(o=>({value:o.id,text:E.value==="uz"?o.Name:o.NameRus}));const e=await R.get(`getForFormule/${b.params.data.id}`),v=e.data.map(o=>o.parameters);D.value=e.data.formula,C.value=v.flat()}catch(d){console.error("Error fetching graphics data:",d)}},T=async()=>{try{const{data:d}=await R.post("/calculator",u);d.status===200?(u.Calculate="",u.ParametersId="",u.Comment="",await fetchData(),V({message:i("login.successMessage"),color:"success"}),f.value=!1,V({message:i("login.successMessage"),color:"success"})):console.error("Error saving data:",d.message)}catch(d){console.error("Error saving data:",d)}};return P(()=>u.StructureID,d=>{}),(d,e)=>{const c=w("VaTextarea"),v=w("VaModal");return y(),k("main",J,[l(t(s),{round:"",icon:"functions",preset:"primary",class:"mt-1",onClick:e[0]||(e[0]=o=>(f.value=!0,x))}),l(v,{modelValue:f.value,"onUpdate:modelValue":e[22]||(e[22]=o=>f.value=o),"ok-text":t(i)("modals.apply"),"cancel-text":t(i)("modals.cancel"),onOk:T,onClose:e[23]||(e[23]=o=>f.value=!1),"close-button":""},{default:a(()=>[m("h3",{class:"va-h3",onVnodeMounted:x},$(t(i)("modals.addFormula"))+$(b.params.data.id),513),m("div",null,[l(t(S),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:a(()=>[m("div",K,[l(c,{class:"w-full",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),"max-length":125,readonly:""},null,8,["modelValue"])]),m("div",q,[l(t(s),{color:"success",onClick:e[2]||(e[2]=o=>n("&")),style:{borderRadius:"0"}},{default:a(()=>[r("&")]),_:1}),l(t(s),{color:"info",onClick:e[3]||(e[3]=o=>n("(")),style:{borderRadius:"0"}},{default:a(()=>[r("(")]),_:1}),l(t(s),{color:"info",onClick:e[4]||(e[4]=o=>n(")")),style:{borderRadius:"0"}},{default:a(()=>[r(")")]),_:1}),l(t(s),{color:"info",onClick:e[5]||(e[5]=o=>n("+")),style:{borderRadius:"0"}},{default:a(()=>[r("+")]),_:1}),l(t(s),{color:"info",onClick:e[6]||(e[6]=o=>n("-")),style:{borderRadius:"0"}},{default:a(()=>[r("-")]),_:1}),l(t(s),{color:"info",onClick:e[7]||(e[7]=o=>n("*")),style:{borderRadius:"0"}},{default:a(()=>[r("ร")]),_:1}),l(t(s),{color:"info",onClick:e[8]||(e[8]=o=>n("/")),style:{borderRadius:"0"}},{default:a(()=>[r("รท")]),_:1}),l(t(s),{color:"info",onClick:e[9]||(e[9]=o=>n("%")),style:{borderRadius:"0"}},{default:a(()=>[r("%")]),_:1})]),m("div",A,[l(t(s),{color:"secondary",onClick:e[10]||(e[10]=o=>n("1")),style:{borderRadius:"0"}},{default:a(()=>[r("1")]),_:1}),l(t(s),{color:"secondary",onClick:e[11]||(e[11]=o=>n("2")),style:{borderRadius:"0"}},{default:a(()=>[r("2")]),_:1}),l(t(s),{color:"secondary",onClick:e[12]||(e[12]=o=>n("3")),style:{borderRadius:"0"}},{default:a(()=>[r("3")]),_:1}),l(t(s),{color:"secondary",onClick:e[13]||(e[13]=o=>n("4")),style:{borderRadius:"0"}},{default:a(()=>[r("4")]),_:1}),l(t(s),{color:"secondary",onClick:e[14]||(e[14]=o=>n("5")),style:{borderRadius:"0"}},{default:a(()=>[r("5")]),_:1}),l(t(s),{color:"secondary",onClick:e[15]||(e[15]=o=>n("6")),style:{borderRadius:"0"}},{default:a(()=>[r("6")]),_:1}),l(t(s),{color:"secondary",onClick:e[16]||(e[16]=o=>n("7")),style:{borderRadius:"0"}},{default:a(()=>[r("7")]),_:1}),l(t(s),{color:"secondary",onClick:e[17]||(e[17]=o=>n("8")),style:{borderRadius:"0"}},{default:a(()=>[r("8")]),_:1}),l(t(s),{color:"secondary",onClick:e[18]||(e[18]=o=>n("9")),style:{borderRadius:"0"}},{default:a(()=>[r("9")]),_:1}),l(t(s),{color:"secondary",onClick:e[19]||(e[19]=o=>n("0")),style:{borderRadius:"0"}},{default:a(()=>[r("0")]),_:1}),l(t(s),{color:"secondary",onClick:e[20]||(e[20]=o=>n(".")),style:{borderRadius:"0"}},{default:a(()=>[r(".")]),_:1})]),C.value.length?(y(),k("div",H,[m("div",Q,[(y(!0),k(U,null,O(C.value,(o,X)=>(y(),z(t(s),{key:o.id,color:"primary",style:{borderRadius:"0"},onClick:Y=>F(o)},{default:a(()=>[r($(o.Name),1)]),_:2},1032,["onClick"]))),128))])])):(y(),k("div",W," Loading parameters... ")),l(c,{class:"w-full",modelValue:u.Comment,"onUpdate:modelValue":e[21]||(e[21]=o=>u.Comment=o),"max-length":125,label:t(i)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};export{_};
