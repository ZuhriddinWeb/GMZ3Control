import{r as _,E,c as h,d as M,o as T,n as x,f as m,g as N,h as k,j as u,l as g,i,t as b,k as l,s as D,H as $}from"./app-Cp5kX0cG.js";/* empty css                   */const S={class:"h-full w-full text-center content-center"},O={class:"va-h3"},j={__name:"EditParamTypesModal",props:["params"],setup(w){const p=w,a=_(!1),V=E("onupdated"),{t:r}=h(),n=M({Name:"",Comment:"",id:p.params.data.id});T(()=>{x.get(`paramtypes/${p.params.data.id}`).then(t=>{n.Name=t.data.Name,n.Comment=t.data.Comment}).catch(t=>{console.error("Error fetching data:",t)})});const s=async()=>{try{const{data:t}=await x.put(`/paramtypes/${n.id}`,n);t.status===200?(V(p.params.node,t.unit),a.value=!1):console.error("Error saving data:",t.message)}catch(t){console.error("Error saving data:",t)}};return(t,d)=>{const v=m("VaButton"),f=m("VaInput"),y=m("VaTextarea"),C=m("VaForm"),o=m("VaModal");return k(),N("main",S,[u(v,{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:d[0]||(d[0]=e=>a.value=!0)}),u(o,{modelValue:a.value,"onUpdate:modelValue":d[3]||(d[3]=e=>a.value=e),"ok-text":l(r)("modals.apply"),"cancel-text":l(r)("modals.cancel"),onOk:s,onClose:d[4]||(d[4]=e=>a.value=!1),"close-button":""},{default:g(()=>[i("h3",O,b(l(r)("modals.editFactory")),1),i("div",null,[u(C,{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:g(()=>[u(f,{class:"w-full",modelValue:n.Name,"onUpdate:modelValue":d[1]||(d[1]=e=>n.Name=e),rules:[e=>!!e||l(r)("validation.required")],label:l(r)("form.name")},null,8,["modelValue","rules","label"]),u(y,{class:"w-full",modelValue:n.Comment,"onUpdate:modelValue":d[2]||(d[2]=e=>n.Comment=e),"max-length":125,label:l(r)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},A={class:"h-full w-full text-center content-center"},q={class:"va-h3"},z={__name:"DeleteParamTypesModal",props:["params"],setup(w){const p=w,a=_(!1),V=E("ondeleted"),{t:r}=h(),n=async()=>{try{const{data:s}=await x.delete(`/paramtypes/${p.params.data.id}`);s.status===200?(V(p.params.data),a.value=!1):console.error("Error deleting data:",s.message)}catch(s){console.error("Error deleting data:",s)}};return(s,t)=>{const d=m("VaButton"),v=m("VaModal");return k(),N("main",A,[u(d,{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:t[0]||(t[0]=f=>a.value=!0)}),u(v,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=f=>a.value=f),"ok-text":l(r)("modals.apply"),"cancel-text":l(r)("modals.cancel"),onClose:t[2]||(t[2]=f=>a.value=!1),onOk:n,"close-button":""},{default:g(()=>[i("h3",q,b(l(r)("modals.title")),1),i("p",null,b(l(r)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},G={class:"grid grid-rows-[55px,1fr]"},H={class:"flex justify-between"},L={class:"va-h3"},J={class:"flex-grow"},W={__name:"ParametersTypesPage",setup(w){const{locale:p,t:a}=h(),V=_([]),r=_(null),n=_(!1),s=M({Name:"",Comment:""});function t(o){r.value.applyTransaction({remove:[o]})}function d(o,e){o.setData(e)}$("ondeleted",t),$("onupdated",d);const v=D(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1",width:120},{headerName:"ID",field:"id",width:120},{headerName:a("table.name"),field:"Name",flex:1},{headerName:a("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:j},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:z}]),f={sortable:!0,filter:!0},y=async()=>{try{const o=await x.get("/paramtypes");V.value=Array.isArray(o.data)?o.data:o.data.items}catch(o){console.error("Error fetching data:",o)}},C=async()=>{try{const{data:o}=await x.post("/paramtypes",s);o.status===200?(n.value=!1,s.Name="",s.Comment="",await y()):console.error("Error saving data:",o.message)}catch(o){console.error("Error saving data:",o)}};return T(()=>{const o=localStorage.getItem("locale");o&&(p.value=o),y()}),D(()=>p.value==="uz"?"Русский":"O‘zbek"),(o,e)=>{const B=m("VaButton"),I=m("VaInput"),R=m("VaTextarea"),U=m("VaForm"),F=m("VaModal"),P=m("ag-grid-vue");return k(),N("div",G,[i("main",null,[i("div",H,[e[5]||(e[5]=i("span",{class:"flex w-full"},null,-1)),u(B,{onClick:e[0]||(e[0]=c=>n.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),u(F,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=c=>n.value=c),"ok-text":l(a)("buttons.save"),"cancel-text":l(a)("buttons.cancel"),onOk:C,"close-button":""},{default:g(()=>[i("h3",L,b(l(a)("modals.addParamTypesTitle")),1),i("div",null,[u(U,{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:g(()=>[u(I,{class:"w-full",modelValue:s.Name,"onUpdate:modelValue":e[1]||(e[1]=c=>s.Name=c),rules:[c=>c&&c.length>0||l(a)("form.requiredField")],label:l(a)("form.name")},null,8,["modelValue","rules","label"]),u(R,{class:"w-full",modelValue:s.Comment,"onUpdate:modelValue":e[2]||(e[2]=c=>s.Comment=c),"max-length":"125",label:l(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),i("main",J,[u(P,{rowData:V.value,columnDefs:v.value,defaultColDef:f,animateRows:"true",class:"ag-theme-material h-full",onGridReady:e[4]||(e[4]=c=>r.value=c.api)},null,8,["rowData","columnDefs"])])])}}};export{W as default};
