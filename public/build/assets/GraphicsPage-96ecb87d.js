import{u as C,r as x,c as R,G,f as V,g as k,h as D,k as c,j as e,D as $,l as _,i as p,t as N,m as b,d as T,o as F,V as S,n as h,H as E,x as U}from"./app-e6aecf6e.js";/* empty css                   */const j={class:"h-full w-full text-center content-center"},z={class:"va-h3"},A={__name:"DeleteGraphicsModal",props:["params"],setup(w){const{init:g}=C(),u=x(!1),n=w,{t}=R(),v=G("ondeleted"),l=async()=>{try{const{data:o}=await b.delete(`/graphics/${n.params.data.id}`);o.status===200?(v(n.params.data),u.value=!1,g({message:t("login.successMessage"),color:"success"})):console.error("Error deleting data:",o.message)}catch(o){console.error("Error deleting data:",o)}};return(o,a)=>{const r=V("VaModal");return k(),D("main",j,[c(e($),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:a[0]||(a[0]=f=>u.value=!0)}),c(r,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=f=>u.value=f),"ok-text":e(t)("modals.apply"),"cancel-text":e(t)("modals.cancel"),onClose:a[2]||(a[2]=f=>u.value=!1),onOk:l,"close-button":""},{default:_(()=>[p("h3",z,N(e(t)("modals.title")),1),p("p",null,N(e(t)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},P={class:"h-full w-full text-center content-center"},H={class:"va-h3"},L={__name:"EditGraphicsModal",props:["params"],setup(w){const g=w,u=x(!1),n=G("onupdated"),{t}=R(),{init:v}=C(),l=T({Name:"",NameRus:"",Comment:"",id:g.params.data.id});F(()=>{b.get(`graphics/${l.id}`).then(a=>{l.Name=a.data.Name,l.NameRus=a.data.NameRus,l.Comment=a.data.Comment}).catch(a=>{console.error("Error fetching data:",a)})});const o=async()=>{try{const{data:a}=await b.put(`/graphics/${l.id}`,l);a.status===200?(n(g.params.node,a.unit),u.value=!1,v({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",a.message)}catch(a){console.error("Error saving data:",a)}};return(a,r)=>{const f=V("VaTextarea"),y=V("VaModal");return k(),D("main",P,[c(e($),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:r[0]||(r[0]=m=>u.value=!0)}),c(y,{modelValue:u.value,"onUpdate:modelValue":r[4]||(r[4]=m=>u.value=m),"ok-text":e(t)("modals.apply"),"cancel-text":e(t)("modals.cancel"),onOk:o,onClose:r[5]||(r[5]=m=>u.value=!1),"close-button":""},{default:_(()=>[p("h3",H,N(e(t)("modals.editFactory")),1),p("div",null,[c(e(S),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:_(()=>[c(e(h),{class:"w-full",modelValue:l.Name,"onUpdate:modelValue":r[1]||(r[1]=m=>l.Name=m),rules:[m=>!!m||e(t)("validation.required")],label:e(t)("form.name")},null,8,["modelValue","rules","label"]),c(e(h),{class:"w-full",modelValue:l.NameRus,"onUpdate:modelValue":r[2]||(r[2]=m=>l.NameRus=m),rules:[m=>!!m||e(t)("validation.required")],label:e(t)("form.nameRus")},null,8,["modelValue","rules","label"]),c(f,{class:"w-full",modelValue:l.Comment,"onUpdate:modelValue":r[3]||(r[3]=m=>l.Comment=m),"max-length":125,label:e(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const J={class:"grid grid-rows-[55px,1fr]"},K={class:"flex justify-between"},Q=p("span",{class:"flex w-full"},null,-1),W={class:"va-h3"},X={class:"flex-grow"},ee={__name:"GraphicsPage",setup(w){const{init:g}=C(),{locale:u,t:n}=R(),t=x([]),v=x(null),l=x(!1),o=T({Name:"",NameRus:"",Comment:""});function a(s){v.value.applyTransaction({remove:[s]})}function r(s,i){s.setData(i)}E("ondeleted",a),E("onupdated",r);const f=U(()=>[{headerName:n("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:n("table.name"),field:m(),flex:1},{headerName:n("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:L},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:A}]),y={sortable:!0,filter:!0},m=()=>u.value==="uz"?"Name":"NameRus",M=async()=>{try{const s=await b.get("/graphics");t.value=Array.isArray(s.data)?s.data:s.data.items}catch(s){console.error("Error fetching data:",s)}},q=async()=>{try{const{data:s}=await b.post("/graphics",o);s.status===200?(l.value=!1,o.Name="",o.NameRus="",o.Comment="",await M(),g({message:n("login.successMessage"),color:"success"})):console.error("Error saving data:",s.message)}catch(s){console.error("Error saving data:",s)}};return F(()=>{const s=localStorage.getItem("locale");s&&(u.value=s),M()}),U(()=>u.value==="uz"?"Русский":"O‘zbek"),(s,i)=>{const B=V("VaTextarea"),I=V("VaModal"),O=V("ag-grid-vue");return k(),D("div",J,[p("main",null,[p("div",K,[Q,c(e($),{onClick:i[0]||(i[0]=d=>l.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),c(I,{modelValue:l.value,"onUpdate:modelValue":i[4]||(i[4]=d=>l.value=d),"ok-text":e(n)("buttons.save"),"cancel-text":e(n)("buttons.cancel"),onOk:q,"close-button":""},{default:_(()=>[p("h3",W,N(e(n)("modals.addGraphicTitle")),1),p("div",null,[c(e(S),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:_(()=>[c(e(h),{class:"w-full",modelValue:o.Name,"onUpdate:modelValue":i[1]||(i[1]=d=>o.Name=d),rules:[d=>d&&d.length>0||e(n)("validation.requiredField")],label:e(n)("form.name")},null,8,["modelValue","rules","label"]),c(e(h),{class:"w-full",modelValue:o.NameRus,"onUpdate:modelValue":i[2]||(i[2]=d=>o.NameRus=d),rules:[d=>d&&d.length>0||e(n)("validation.requiredField")],label:e(n)("form.nameRus")},null,8,["modelValue","rules","label"]),c(B,{class:"w-full",modelValue:o.Comment,"onUpdate:modelValue":i[3]||(i[3]=d=>o.Comment=d),"max-length":"125",label:e(n)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),p("main",X,[c(O,{rowData:t.value,columnDefs:f.value,defaultColDef:y,animateRows:"true",class:"ag-theme-material h-full",onGridReady:i[5]||(i[5]=d=>v.value=d.api)},null,8,["rowData","columnDefs"])])])}}};export{ee as default};
