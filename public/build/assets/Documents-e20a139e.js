import{P as e2,Q as t2,R as pC,y as yr,S as fC,T as i2,U as Dt,W as n2,_ as s2,r as yd,o as o2,f as r2,g as a2,h as l2,i as wp,k as Is,l as Uu,j as ro,m as d2,B as t_,D as i_,q as c2,s as u2}from"./app-c8fa83ea.js";import{c as Cd}from"./_commonjs-dynamic-modules-302442b1.js";const h2={"[object Array]":"array","[object Date]":"date","[object Object]":"object","[object String]":"string"},kn=function(i){if(i===null)return"null";const e=Object.prototype.toString.call(i);return typeof i=="object"?h2[e]||"object":typeof i},hl=function(i){return typeof i=="boolean"},n_=function(i){return Wt(i)&&i.toString().indexOf("e")!==-1},yn=function(i){return kn(i)==="date"},U=function(i){return i!=null},Ee=function(i){return typeof i=="function"},Ke=function(i){return typeof i=="string"},Wt=function(i){return typeof i=="number"&&isFinite(i)||!isNaN(i-parseFloat(i))},We=function(i){return kn(i)==="object"},cn=function(i){let e;for(e in i)return!1;return!0},ht=function(i){if(!i||kn(i)!=="object")return!1;const e=Object.getPrototypeOf(i);if(!e)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&Object.toString.call(t)===Object.toString.call(Object)},Qa=function(i){return["object","array","function"].indexOf(kn(i))===-1},gi=function(i){return i!=null&&i===i.window},Cn=function(i){return!!i&&!!(i.jquery||i.dxRenderer)},ba=function(i){return!!i&&Ee(i.then)},cu=function(i){return!!i&&Ee(i.done)&&Ee(i.fail)},p2=function(i){return!!(i&&i.preventDefault)},f2=function(i,e,t){i=i||{};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const s=e[n];(!(n in i)||t)&&(i[n]=s)}return i},Y=function(i){i=i||{};let e=1,t=!1;for(typeof i=="boolean"&&(t=i,i=arguments[1]||{},e++);e<arguments.length;e++){const n=arguments[e];if(n!=null)for(const s in n){const o=i[s],r=n[s];let a=!1,l;s==="__proto__"||s==="constructor"||i===r||(t&&r&&(ht(r)||(a=Array.isArray(r)))?(a?l=o&&Array.isArray(o)?o:[]:l=o&&ht(o)?o:{},i[s]=Y(t,l,r)):r!==void 0&&(i[s]=r))}}return i},Ii=(i,e)=>{if(Array.isArray(i))return i.map(e);const t=[];for(const n in i)t.push(e(i[n],n));return t},ie=(i,e)=>{if(i){if("length"in i)for(let t=0;t<i.length&&e.call(i[t],t,i[t])!==!1;t++);else for(const t in i)if(e.call(i[t],t,i[t])===!1)break;return i}},m2=function(){},xd=function(i){return typeof console>"u"||!Ee(console[i])?m2:console[i].bind(console)},uu={log:xd("log"),info:xd("info"),warn:xd("warn"),error:xd("error")},mC=function(){const i=[new RegExp("&","g"),new RegExp('"',"g"),new RegExp("'","g"),new RegExp("<","g"),new RegExp(">","g")];return function(e){return String(e).replace(i[0],"&amp;").replace(i[1],"&quot;").replace(i[2],"&#39;").replace(i[3],"&lt;").replace(i[4],"&gt;")}}(),g2=function(i){switch(typeof i){case"string":return i.split(/\s+/,4);case"object":return[i.x||i.h||i.left,i.y||i.v||i.top,i.x||i.h||i.right,i.y||i.v||i.bottom];case"number":return[i];default:return i}},_2=function(i){const e=g2(i);let t=parseInt(e&&e[0],10),n=parseInt(e&&e[1],10),s=parseInt(e&&e[2],10),o=parseInt(e&&e[3],10);return isFinite(t)||(t=0),isFinite(n)||(n=t),isFinite(s)||(s=t),isFinite(o)||(o=n),{top:n,right:s,bottom:o,left:t}};function vs(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Ee(i)?i(...t):(t.forEach((s,o)=>{Ke(s)&&(s=s.replace(/\$/g,"$$$$"));const r=new RegExp("\\{"+o+"\\}","gm");i=i.replace(r,s)}),i)}const rc=function(){const i=/\s/g;return function(e){return!e||!e.replace(i,"")}}(),b2="24.1.7",s_="24.1.7",v2="https://js.devexpress.com/error/"+b2.split(".").slice(0,2).join("_")+"/";function Gf(i,e){const t={ERROR_MESSAGES:Y(e,i),Error:function(){return function(r){const a=r[0];r=r.slice(1);const l=n(a,r),d=o(a),c=s(a,l);return Y(new Error(c),{__id:a,__details:l,url:d})}([].slice.call(arguments))},log:function(r){let a="log";/^E\d+$/.test(r)?a="error":/^W\d+$/.test(r)&&(a="warn"),uu[a](a==="log"?r:function(l){const d=l[0];return l=l.slice(1),s(d,n(d,l))}([].slice.call(arguments)))}};function n(r,a){return a=[t.ERROR_MESSAGES[r]].concat(a),vs.apply(this,a).replace(/\.*\s*?$/,"")}function s(r,a){const l=r!=null&&r.startsWith("W")?"warning":"error";return vs.apply(this,[`{0} - {1}.

For additional information on this {2} message, see: {3}`,r,a,l,o(r)])}function o(r){return v2+r}return t}const Pt=Gf({E0001:"Method is not implemented",E0002:"Member name collision: {0}",E0003:"A class must be instantiated using the 'new' keyword",E0004:"The NAME property of the component is not specified",E0005:"Unknown device",E0006:"Unknown endpoint key is requested",E0007:"'Invalidate' method is called outside the update transaction",E0008:"Type of the option name is not appropriate to create an action",E0009:"Component '{0}' has not been initialized for an element",E0010:"Animation configuration with the '{0}' type requires '{1}' configuration as {2}",E0011:"Unknown animation type '{0}'",E0012:"jQuery version is too old. Please upgrade jQuery to 1.10.0 or later",E0013:"KnockoutJS version is too old. Please upgrade KnockoutJS to 2.3.0 or later",E0014:"The 'release' method shouldn't be called for an unlocked Lock object",E0015:"Queued task returned an unexpected result",E0017:"Event namespace is not defined",E0018:"DevExpress.ui.DevExpressPopup widget is required",E0020:"Template engine '{0}' is not supported",E0021:"Unknown theme is set: {0}",E0022:"LINK[rel=DevExpress-theme] tags must go before DevExpress included scripts",E0023:"Template name is not specified",E0024:"DevExtreme bundle already included",E0025:"Unexpected argument type",E0100:"Unknown validation type is detected",E0101:"Misconfigured range validation rule is detected",E0102:"Misconfigured comparison validation rule is detected",E0103:"validationCallback of an asynchronous rule should return a jQuery or a native promise",E0110:"Unknown validation group is detected",E0120:"Adapter for a DevExpressValidator component cannot be configured",E0121:"The 'customItem' parameter of the 'onCustomItemCreating' function is empty or contains invalid data. Assign a custom object or a Promise that is resolved after the item is created.",W0000:"'{0}' is deprecated in {1}. {2}",W0001:"{0} - '{1}' option is deprecated in {2}. {3}",W0002:"{0} - '{1}' method is deprecated in {2}. {3}",W0003:"{0} - '{1}' property is deprecated in {2}. {3}",W0004:"Timeout for theme loading is over: {0}",W0005:"'{0}' event is deprecated in {1}. {2}",W0006:"Invalid recurrence rule: '{0}'",W0007:"'{0}' Globalize culture is not defined",W0008:"Invalid view name: '{0}'",W0009:"Invalid time zone name: '{0}'",W0010:"{0} is deprecated in {1}. {2}",W0011:"Number parsing is invoked while the parser is not defined",W0012:"Date parsing is invoked while the parser is not defined",W0013:"'{0}' file is deprecated in {1}. {2}",W0014:"{0} - '{1}' type is deprecated in {2}. {3}",W0015:"Instead of returning a value from the '{0}' function, write it into the '{1}' field of the function's parameter.",W0016:'The "{0}" option does not accept the "{1}" value since v{2}. {3}.',W0017:'Setting the "{0}" property with a function is deprecated since v21.2',W0018:'Setting the "position" property with a function is deprecated since v21.2',W0019:`DevExtreme: Unable to Locate a Valid License Key.

Detailed license/registration related information and instructions: https://js.devexpress.com/Documentation/Licensing/.

If you are using a 30-day trial version of DevExtreme, you must uninstall all copies of DevExtreme once your 30-day trial period expires. For terms and conditions that govern use of DevExtreme UI components/libraries, please refer to the DevExtreme End User License Agreement: https://js.devexpress.com/EULAs/DevExtremeComplete.

To use DevExtreme in a commercial project, you must purchase a license. For pricing/licensing options, please visit: https://js.devexpress.com/Buy.

If you have licensing-related questions or need help with a purchase, please email clientservices@devexpress.com.

`,W0020:`DevExtreme: License Key Has Expired.

Detailed license/registration related information and instructions: https://js.devexpress.com/Documentation/Licensing/.

A mismatch exists between the license key used and the DevExtreme version referenced in this project.

To proceed, you can:
• use a version of DevExtreme linked to your license key: https://www.devexpress.com/ClientCenter/DownloadManager
• renew your DevExpress Subscription: https://www.devexpress.com/buy/renew (once you renew your subscription, you will be entitled to product updates and support service as defined in the DevExtreme End User License Agreement)

If you have licensing-related questions or need help with a renewal, please email clientservices@devexpress.com.

`,W0021:`DevExtreme: License Key Verification Has Failed.

Detailed license/registration related information and instructions: https://js.devexpress.com/Documentation/Licensing/.

To verify your DevExtreme license, make certain to specify a correct key in the GlobalConfig. If you continue to encounter this error, please visit https://www.devexpress.com/ClientCenter/DownloadManager to obtain a valid license key.

If you have a valid license and this problem persists, please submit a support ticket via the DevExpress Support Center. We will be happy to follow-up: https://supportcenter.devexpress.com/ticket/create.

`,W0022:`DevExtreme: Pre-release software. Not suitable for commercial use.

Detailed license/registration related information and instructions: https://js.devexpress.com/Documentation/Licensing/.

Pre-release software may contain deficiencies and as such, should not be considered for use or integrated in any mission critical application.

`,W0023:`DevExtreme: the following 'devextreme' package version does not match versions of other DevExpress products used in this application:

{0}

Interoperability between different versions of the products listed herein cannot be guaranteed.

`}),y2=function(i,e,t){return function(){const n=this.callBase;this.callBase=i[e];try{return t.apply(this,arguments)}finally{this.callBase=n}}},C2=function(i){const e=function(){};return e.prototype=i.prototype,new e},x2=function(i){const e=this;let t,n,s;if(!i)return e;for(n in i)s=i[n],t=typeof e.prototype[n]=="function"&&typeof s=="function",e.prototype[n]=t?y2(e.parent.prototype,n,s):s;return e},w2=function(){const i=this;let e,t,n;const s=Object.prototype.hasOwnProperty.bind(i);for(!s("_includedCtors")&&!s("_includedPostCtors")&&(i._includedCtors=i._includedCtors.slice(0),i._includedPostCtors=i._includedPostCtors.slice(0)),n=0;n<arguments.length;n++){e=arguments[n],e.ctor&&i._includedCtors.push(e.ctor),e.postCtor&&i._includedPostCtors.push(e.postCtor);for(t in e)t==="ctor"||t==="postCtor"||t==="default"||(i.prototype[t]=e[t])}return i},S2=function(i){if(!Object.prototype.hasOwnProperty.bind(this)("parent")&&this.parent){const n=Object.getPrototypeOf(this);return n===i||n.subclassOf(i)}else return this.parent===i?!0:!this.parent||!this.parent.subclassOf?!1:this.parent.subclassOf(i)},gC=function(){throw Pt.Error("E0001")},E2=function(){const i=Object.prototype.hasOwnProperty;return function(e,t){for(const n in e){if(!i.call(e,n))return;t[n]=e[n]}}}(),Lt=function(){};Lt.inherit=function(i){const e=function(){if(!this||gi(this)||typeof this.constructor!="function")throw Pt.Error("E0003");const t=this,n=t.ctor,s=t.constructor._includedCtors,o=t.constructor._includedPostCtors;let r;for(r=0;r<s.length;r++)s[r].call(t);for(n&&n.apply(t,arguments),r=0;r<o.length;r++)o[r].call(t)};return e.prototype=C2(this),E2(this,e),e.inherit=this.inherit,e.abstract=gC,e.redefine=x2,e.include=w2,e.subclassOf=S2,e.parent=this,e._includedCtors=this._includedCtors?this._includedCtors.slice(0):[],e._includedPostCtors=this._includedPostCtors?this._includedPostCtors.slice(0):[],e.prototype.constructor=e,e.redefine(i),e};Lt.abstract=gC;function qn(i){const e=Lt.inherit(i);let t=e,n=new t(i);const s={},o=function(r,a){ie(r,function(l){Ee(n[l])?(a||!i[l])&&(i[l]=function(){return n[l].apply(i,arguments)}):(a&&(s[l]=i[l]),i[l]=n[l])})};return o(i,!0),i.inject=function(r){t=t.inherit(r),n=new t,o(r)},i.resetInjection=function(){Y(i,s),t=e,n=new e},i}function ve(){return ve=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ve.apply(null,arguments)}const o_={rtlEnabled:!1,defaultCurrency:"USD",defaultUseCurrencyAccountingStyle:!0,oDataFilterToLower:!0,serverDecimalSeparator:".",decimalSeparator:".",thousandsSeparator:",",forceIsoDateParsing:!0,wrapActionsBeforeExecute:!0,useLegacyStoreResult:!1,useJQuery:void 0,editorStylingMode:void 0,useLegacyVisibleIndex:!1,floatingActionButtonConfig:{icon:"add",closeIcon:"close",label:"",position:{at:"right bottom",my:"right bottom",offset:{x:-16,y:-16}},maxSpeedDialActionCount:5,shading:!1,direction:"auto"},optionsParser:i=>{i.trim().charAt(0)!=="{"&&(i="{"+i+"}");try{return JSON.parse(i)}catch(e){try{return JSON.parse(I2(i))}catch{throw Pt.Error("E3018",e,i)}}}},I2=i=>i.replace(/'/g,'"').replace(/,\s*([\]}])/g,"$1").replace(/([{,])\s*([^":\s]+)\s*:/g,'$1"$2":'),T2=["decimalSeparator","thousandsSeparator"],$t=function(){if(!arguments.length)return o_;const i=arguments.length<=0?void 0:arguments[0];T2.forEach(e=>{if(i[e]){const t=`Now, the ${e} is selected based on the specified locale.`;Pt.log("W0003","config",e,"19.2",t)}}),Y(o_,i)};typeof DevExpress<"u"&&DevExpress.config&&$t(DevExpress.config);const hi=Lt.inherit({ctor:function(i){i&&(i=String(i)),this._value=this._normalize(i||this._generate())},_normalize:function(i){for(i=i.replace(/[^a-f0-9]/gi,"").toLowerCase();i.length<32;)i+="0";return[i.substr(0,8),i.substr(8,4),i.substr(12,4),i.substr(16,4),i.substr(20,12)].join("-")},_generate:function(){let i="";for(let e=0;e<32;e++)i+=Math.round(15*Math.random()).toString(16);return i},toString:function(){return this._value},valueOf:function(){return this._value},toJSON:function(){return this._value}}),Zs=function(i){this._options=i||{},this._list=[],this._queue=[],this._firing=!1,this._fired=!1,this._firingIndexes=[]};Zs.prototype._fireCore=function(i,e){const t=this._firingIndexes,n=this._list,s=this._options.stopOnFalse,o=t.length;for(t[o]=0;t[o]<n.length&&!(n[t[o]].apply(i,e)===!1&&s);t[o]++);t.pop()};Zs.prototype.add=function(i){return typeof i=="function"&&(!this._options.unique||!this.has(i))&&this._list.push(i),this};Zs.prototype.remove=function(i){const e=this._list,t=this._firingIndexes,n=e.indexOf(i);if(n>-1&&(e.splice(n,1),this._firing&&t.length))for(let s=0;s<t.length;s++)n<=t[s]&&t[s]--;return this};Zs.prototype.has=function(i){const e=this._list;return i?e.indexOf(i)>-1:!!e.length};Zs.prototype.empty=function(i){return this._list=[],this};Zs.prototype.fireWith=function(i,e){const t=this._queue;if(e=e||[],e=e.slice?e.slice():e,this._options.syncStrategy)this._firing=!0,this._fireCore(i,e);else{if(t.push([i,e]),this._firing)return;for(this._firing=!0;t.length;){const n=t.shift();this._fireCore(n[0],n[1])}}return this._firing=!1,this._fired=!0,this};Zs.prototype.fire=function(){this.fireWith(this,arguments)};Zs.prototype.fired=function(){return this._fired};const Tt=function(i){return new Zs(i)},_C=[{method:"resolve",handler:"done",state:"resolved"},{method:"reject",handler:"fail",state:"rejected"},{method:"notify",handler:"progress"}];let ua=function(){const i=this;this._state="pending",this._promise={},_C.forEach((function(e){const t=e.method;this[t+"Callbacks"]=Tt(),this[t]=(function(){return this[t+"With"](this._promise,arguments)}).bind(this),this._promise[e.handler]=function(n){if(!n)return this;const s=i[t+"Callbacks"];return s.fired()?n.apply(i[t+"Context"],i[t+"Args"]):s.add((function(o,r){n.apply(o,r)}).bind(this)),this}}).bind(this)),this._promise.always=function(e){return this.done(e).fail(e)},this._promise.catch=function(e){return this.then(null,e)},this._promise.then=function(e,t){const n=new ua;return["done","fail"].forEach((function(s){const o=s==="done"?e:t;this[s](function(){if(!o){n[s==="done"?"resolve":"reject"].apply(this,arguments);return}const r=o&&o.apply(this,arguments);cu(r)?r.done(n.resolve).fail(n.reject):ba(r)?r.then(n.resolve,n.reject):n.resolve.apply(this,U(r)?[r]:arguments)})}).bind(this)),n.promise()},this._promise.state=function(){return i._state},this._promise.promise=function(e){return e?Y(e,i._promise):i._promise},this._promise.promise(this)};_C.forEach(function(i){const e=i.method,t=i.state;ua.prototype[e+"With"]=function(n,s){const o=this[e+"Callbacks"];return this.state()==="pending"&&(this[e+"Args"]=s,this[e+"Context"]=n,t&&(this._state=t),o.fire(n,s),t!=="pending"&&(this.resolveCallbacks.empty(),this.rejectCallbacks.empty())),this}});function Pi(i,e){if(cu(i))return i;if(ba(i)){const t=new ua;return i.then(function(){t.resolveWith.apply(t,[e].concat([[].slice.call(arguments)]))},function(){t.rejectWith.apply(t,[e].concat([[].slice.call(arguments)]))}),t}return new ua().resolveWith(e,[i])}let D2=function(){if(arguments.length===1)return Pi(arguments[0]);const i=[].slice.call(arguments),e=[];let t=0;const n=new ua,s=function(o){return function(r){e[o]=this,i[o]=arguments.length>1?[].slice.call(arguments):r,t++,t===i.length&&n.resolveWith(e,i)}};for(let o=0;o<i.length;o++)cu(i[o])?i[o].promise().done(s(o)).fail(n.reject):t++;return t===i.length&&n.resolveWith(e,i),n.promise()};function ae(){return new ua}function De(){return D2.apply(this,arguments)}const Qi=qn({isWrapped:function(){return!1},isWritableWrapped:function(){return!1},wrap:function(i){return i},unwrap:function(i){return i},assign:function(){uu.error("Method 'assign' should not be used for not wrapped variables. Use 'isWrapped' method for ensuring.")}}),Sp=function(i,e){const t=[];let n,s;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.push(n);for(t.sort(function(o,r){const a=Wt(o),l=Wt(r);return a&&l?o-r:a&&!l?-1:!a&&l?1:o<r?-1:o>r?1:0}),s=0;s<t.length;s++)n=t[s],e(n,i[n])},A2=function(i,e,t,n){!n&&Qi.isWrapped(i[e])?Qi.assign(i[e],t):i[e]=t},In=function(i,e,t,n){let s,o;for(const r in e)if(s=i[r],o=e[r],!(r==="__proto__"||r==="constructor"||i===o)){if(ht(o)){const a=t?We(s):ht(s);o=In(a?s:{},o,t,n)}o!==void 0&&s!==o&&A2(i,r,o,n)}return i},k2=Qi.unwrap,bC=Qi.isWrapped,O2=Qi.assign,R2=function(i){return i.replace(/\[/g,".").replace(/\]/g,"")},Cr=function(i){return R2(i).split(".")},M2=function(i,e,t){return t=t||{},pl(e==="this"?i:i[e],t)},vC=function(i,e,t,n){if(e==="this")throw new Pt.Error("E4016");const s=i[e];n.unwrapObservables&&bC(s)?O2(s,t):i[e]=t},yC=function(i){return i=i||{},i.unwrapObservables=i.unwrapObservables!==void 0?i.unwrapObservables:!0,i};function pl(i,e){return e.unwrapObservables?k2(i):i}const Nt=function(i){if(arguments.length>1&&(i=[].slice.call(arguments)),!i||i==="this")return function(e){return e};if(typeof i=="string"){const e=Cr(i);return function(t,n){n=yC(n);const s=n.functionsAsIs,o="defaultValue"in n;let r=pl(t,n);for(let a=0;a<e.length;a++){if(!r){if(r==null&&o)return n.defaultValue;break}const l=e[a];if(o&&We(r)&&!(l in r))return n.defaultValue;let d=pl(r[l],n);!s&&Ee(d)&&(d=d.call(r)),r=d}return r}}if(Array.isArray(i))return P2(i);if(Ee(i))return i};function P2(i){const e={};for(let t=0,n=i.length;t<n;t++){const s=i[t];e[s]=Nt(s)}return function(t,n){let s;return ie(e,function(o){const r=this(t,n);if(r===void 0)return;let a=s||(s={});const l=o.split("."),d=l.length-1;for(let c=0;c<d;c++){const h=l[c];h in a||(a[h]={}),a=a[h]}a[l[d]]=r}),s}}function B2(i,e){return e!=null&&e.locale?i.toLocaleLowerCase(e.locale):i.toLowerCase()}function F2(i,e){return e!=null&&e.locale?i.toLocaleUpperCase(e.locale):i.toUpperCase()}const r_=function(i,e,t,n){if(U(t))return t;const s={};return vC(i,e,s,n),s},Uf=function(i){i=Cr(i||"this");const e=i.length-1;return function(t,n,s){s=yC(s);let o=pl(t,s);i.forEach(function(r,a){let l=M2(o,r,s);const d=!s.functionsAsIs&&Ee(l)&&!bC(l);a===e?s.merge&&ht(n)&&(!U(l)||ht(l))?(l=r_(o,r,l,s),In(l,n,!1,!0)):d?o[r](n):vC(o,r,n,s):(l=r_(o,r,l,s),d&&(l=l.call(o)),o=l)})}},Ki=function(i,e){var t;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i instanceof Date)return i.getTime();if(i&&i instanceof Lt&&i.valueOf)return i.valueOf();if(!((n==null||(t=n.collatorOptions)===null||t===void 0?void 0:t.sensitivity)==="case"||e)&&typeof i=="string"){var o,r;if((n==null||(o=n.collatorOptions)===null||o===void 0?void 0:o.sensitivity)==="base"){const d=/[\u0300-\u036f]/g;i=i.normalize("NFD").replace(d,"")}const a=n==null||(r=n.locale)===null||r===void 0?void 0:r.toLowerCase();return(a&&!!["hy","el"].find(d=>a===d||a.startsWith(`${d}-`))?F2:B2)(i,n)}return i},ci=function(i,e){return U(i)?i:e},qf=function(i,e){const t=new ae,n=e||this,s={promise:t.promise(),abort:function(){clearTimeout(o),t.rejectWith(n)}},o=(arguments[2]||setTimeout)(function(){const r=i.call(n);r&&r.done&&Ee(r.done)?r.done(function(){t.resolveWith(n)}):t.resolveWith(n)},typeof e=="number"?e:0);return s},qu=[],a_=[],Ea=[];let Vr;const hu=function(i,e,t){if(Vr&&Vr!==i)return qu.push(e),a_.push(i),t=t||new ae,Ea.push(t),t;{const n=Vr,s=Ea.length;Vr=i;let o=e();return o||(Ea.length>s?o=De.apply(this,Ea.slice(s)):t&&t.resolve()),Vr=n,t&&o&&o.done&&o.done(t.resolve).fail(t.reject),!Vr&&qu.length&&(a_.shift()==="render"?Di:rn)(qu.shift(),Ea.shift()),o||De()}},Di=function(i,e){return hu("render",i,e)},rn=function(i,e){return hu("update",i,e)},ra=function(i){return function(){const e=this;return hu("render",function(){return i.call(e)})}},l_=function(i){return function(){const e=this;return hu("update",function(){return i.call(e)})}},CC=function(i,e,t){const n=[];let s=0;return ie(e,(o,r)=>{let a=0;const l=t?t(r):r;ie(i,(d,c)=>{const h=l[d];if(h!==void 0){if(V2(h,c)){a++;return}return a=-1,!1}}),!(a<s)&&(a>s&&(n.length=0,s=a),n.push(r))}),n},V2=function(i,e){if(Array.isArray(i)&&Array.isArray(e)){let t=!1;return ie(i,(n,s)=>{if(s!==e[n])return t=!0,!1}),!t}return i===e},va=function(i){switch(kn(i)){case"string":return i.split(/\s+/,2);case"object":return[i.x??i.h,i.y??i.v];case"number":return[i];case"array":return i;default:return null}},xC=function(i,e){const t=va(i);let n=e?parseFloat(t&&t[0]):parseInt(t&&t[0],10),s=e?parseFloat(t&&t[1]):parseInt(t&&t[1],10);return isFinite(n)||(n=0),isFinite(s)||(s=n),{h:n,v:s}},ys=function(i){if(i instanceof hi)return i.toString();if(We(i)||Array.isArray(i))try{const e=JSON.stringify(i);return e==="{}"?i:e}catch{return i}return i},Co=function(i){return i.replace(/[[\]{}\-()*+?.\\^$|\s]/g,"\\$&")},N2=function(i){const e=$t().serverDecimalSeparator;return U(i)&&(i=i.toString().replace(".",e)),i},ue=function(){},wC=function(){return new ae().resolve().promise()},ln=function(i,e,t){const n=[];let s;const o=!t;for(let r=0;r<i.length;r++)s=!!e(i[r],r),s===o&&n.push(i[r]);return n},L2=(i,e,t,n)=>i.length!==e.length?!1:!i.some((s,o)=>!Yf(s,e[o],t+1,ve({},n,{strict:!0}))),$2=(i,e,t,n)=>{const s=Object.keys(i),o=Object.keys(e);if(s.length!==o.length)return!1;const r=new Set(o);return!s.some(a=>!r.has(a)||!Yf(i[a],e[a],t+1,n))},d_={maxDepth:3,strict:!0},Yf=(i,e,t,n)=>{const{strict:s,maxDepth:o}=n,r=Ki(i,!0),a=Ki(e,!0),l=s?r===a:r==a;switch(!0){case l:case t>=o:return!0;case(We(r)&&We(a)):return $2(r,a,t,n);case(Array.isArray(r)&&Array.isArray(a)):return L2(r,a,t,n);default:return!1}},zt=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d_;const n=ve({},d_,t);return Yf(i,e,0,n)},Yu="dx-";let wd=null;function c_(i){try{return new CSSStyleSheet}catch{const t=i.ownerDocument.createElement("style");return i.appendChild(t),t.sheet}}function u_(i,e,t){for(let n=0;n<e.length;n++){const s=e[n];try{for(let o=0;o<s.cssRules.length;o++)H2(i,s.cssRules[o],t)}catch{}}}function H2(i,e,t){var n,s,o,r;(t||((n=e.selectorText)===null||n===void 0?void 0:n.includes(Yu))||((s=e.cssRules)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.selectorText)===null||s===void 0?void 0:s.includes(Yu))||((o=e.name)===null||o===void 0?void 0:o.startsWith(Yu))||((r=e.style)===null||r===void 0?void 0:r.fontFamily)==="DXIcons")&&i.insertRule(e.cssText,i.cssRules.length)}function z2(i){var e;const t=i.get(0),n=(e=t.getRootNode)===null||e===void 0?void 0:e.call(t);if(!(n!=null&&n.host))return;wd||(wd=c_(n),u_(wd,t.ownerDocument.styleSheets,!1));const s=c_(n);u_(s,n.styleSheets,!0),n.adoptedStyleSheets=[wd,s]}function W2(i,e,t){const n=i.getBoundingClientRect();return n&&e>=n.left&&e<n.right&&t>=n.top&&t<n.bottom}function j2(){let i=0;const e=[];return{push(t){return e.push(t),this},shift(){return i++,e[i-1]},get length(){return e.length-i},get items(){return e}}}function K2(i,e,t){const n=j2().push(t);for(;n.length;){const o=n.shift();for(let r=0;r<o.childNodes.length;r++){const a=o.childNodes[r];a.nodeType===Node.ELEMENT_NODE&&W2(a,i,e)&&getComputedStyle(a).pointerEvents!=="none"&&n.push(a)}}const s=n.items.reverse();return s.pop(),s}const G2={querySelectorAll:(i,e)=>i.querySelectorAll(e),elementMatches(i,e){return(i.matches||i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector||(n=>{const s=i.document||i.ownerDocument;if(!s)return!1;const o=this.querySelectorAll(s,n);for(let r=0;r<o.length;r++)if(o[r]===i)return!0})).call(i,e)},createElement(i,e){return e=e||this._document,e.createElement(i)},createElementNS(i,e,t){return t=t||this._document,t.createElementNS(i,e)},createTextNode(i,e){return e=e||this._document,e.createTextNode(i)},createAttribute(i,e){return e=e||this._document,e.createAttribute(i)},isNode:i=>i&&typeof i=="object"&&"nodeType"in i&&"nodeName"in i,isElementNode:i=>i&&i.nodeType===1,isTextNode:i=>i&&i.nodeType===3,isDocument:i=>i&&i.nodeType===9,isDocumentFragment:i=>i&&i.nodeType===11,removeElement(i){const e=i&&i.parentNode;e&&e.removeChild(i)},insertElement(i,e,t){i&&e&&i!==e&&(t?i.insertBefore(e,t):i.appendChild(e))},getAttribute:(i,e)=>i.getAttribute(e),setAttribute(i,e,t){e==="style"?i.style.cssText=t:i.setAttribute(e,t)},removeAttribute(i,e){i.removeAttribute(e)},setProperty(i,e,t){i[e]=t},setText(i,e){i&&(i.textContent=e)},setClass(i,e,t){i.nodeType===1&&e&&(t?i.classList.add(e):i.classList.remove(e))},setStyle(i,e,t){i.style[e]=t||""},_document:typeof document>"u"?void 0:document,getDocument(){return this._document},getActiveElement(i){return this.getRootNode(i).activeElement},getRootNode(i){var e;return(i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i))??this._document},getBody(){return this._document.body},createDocumentFragment(){return this._document.createDocumentFragment()},getDocumentElement(){return this._document.documentElement},getLocation(){return this._document.location},getSelection(){return this._document.selection},getReadyState(){return this._document.readyState},getHead(){return this._document.head},hasDocumentProperty(i){return i in this._document},listen(i,e,t,n){return!i||!("addEventListener"in i)?ue:(i.addEventListener(e,t,n),()=>{i.removeEventListener(e,t)})},elementsFromPoint(i,e,t){const n=this.getRootNode(t);return n.host?K2(i,e,n):n.elementsFromPoint(i,e)}},_e=qn(G2);class Xf{constructor(){this.memory=[],this.callbacks=Tt()}add(e){ie(this.memory,(t,n)=>e.apply(e,n)),this.callbacks.add(e)}remove(e){this.callbacks.remove(e)}fire(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.memory.push(t),this.callbacks.fire.apply(this.callbacks,t)}}const Zf=new Xf,Jf=i=>{var e,t;const n=i.originalEvent;if(!n)return i.target;if(!!!(!((e=n.target)===null||e===void 0)&&e.shadowRoot))return n.target;const o=n.path??((t=n.composedPath)===null||t===void 0?void 0:t.call(n));return(o==null?void 0:o[0])??i.target};let U2=typeof window<"u";const qe=()=>U2;let Zo=qe()?window:void 0;Zo||(Zo={},Zo.window=Zo);const Je=()=>Zo,SC=i=>qe()&&i in Zo,Qf=i=>i<768?"xs":i<992?"sm":i<1200?"md":"lg",EC=i=>{const e=i||Qf,t=_e.getDocumentElement().clientWidth;return e(t)},Pl=()=>qe()?Zo.navigator:{userAgent:""},q2=["pageX","pageY","screenX","screenY","clientX","clientY"],Y2=function(i,e){if(e[i]&&!e.touches||!e.touches)return e[i];const t=e.touches.length?e.touches:e.changedTouches;if(t.length)return t[0][i]};function X2(i){q2.forEach(function(e){i(e,function(t){return Y2(e,t)})},this)}const Js=function(i){let e,t=function(){return e=i.apply(this,arguments),t=function(){return e},e};return function(){return t.apply(this,arguments)}},em=Je(),Sd="dxEmptyEventType",h_={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},Z2={focusin:"focus",focusout:"blur"},J2=["blur","focus","load"],IC=["touchmove","wheel","mousewheel","touchstart"],Q2=["target","relatedTarget","delegateTarget","altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","offsetX","offsetY","pointerId","pointerType","targetTouches","toElement","touches"];function eD(i,e){return!gi(i)&&i.nodeName!=="#document"&&_e.elementMatches(i,e)}const Xu=new WeakMap;let TC=0,Dc;const fo=function(){const i={};return Zf.add(function(e,t){i[e]=t}),{getField:function(e,t){return i[e]&&i[e][t]},callMethod:function(e,t,n,s){return i[e]&&i[e][t]&&i[e][t].apply(n,s)}}}(),q=qn({on:Ia(Ep(m_(function(i,e,t,n,s){Xr(i,e).addHandler(s,t,n)}))),one:Ia(Ep(function(i,e,t,n,s){const o=function(){q.off(i,e,t,o),s.apply(this,arguments)};q.on(i,e,t,n,o)})),off:Ia(nD(m_(function(i,e,t,n){Xr(i,e).removeHandler(n,t)}))),trigger:Ia(f_(function(i,e,t){const n=e.type,s=Xr(i,e.type);if(fo.callMethod(n,"trigger",i,[e,t]),s.callHandlers(e,t),!(fo.getField(n,"noBubble")||e.isPropagationStopped()||J2.indexOf(n)!==-1)){const r=[],a=function(d){const c=d.parentNode??(We(d.host)?d.host:null);c&&(r.push(c),a(c))};a(i),r.push(em);let l=0;for(;r[l]&&!e.isPropagationStopped();)Xr(r[l],e.type).callHandlers(Y(e,{currentTarget:r[l]}),t),l++}(i.nodeType||gi(i))&&(fo.callMethod(n,"_default",i,[e,t]),oD(n,i))})),triggerHandler:Ia(f_(function(i,e,t){Xr(i,e.type).callHandlers(e,t)}))});function tm(i,e){const t=i[0];if(t)if(_e.isNode(t)||gi(t))e.apply(q,i);else if(!Ke(t)&&"length"in t){const n=Array.prototype.slice.call(i,0);Array.prototype.forEach.call(t,function(s){n[0]=s,tm(n,e)})}else throw Pt.Error("E0025")}function Ia(i){return function(){tm(arguments,i)}}function tD(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});em.addEventListener("test",null,e)}catch{}return i}const DC=Js(tD),AC=(i,e)=>gi(i)?AC(i.document,e):i.contains?i.contains(e):!!(e.compareDocumentPosition(i)&e.DOCUMENT_POSITION_CONTAINS);function Xr(i,e){let t=Xu.get(i);e=e||"";const n=e.split("."),s=n.slice(1),o=!!n[0];e=n[0]||Sd,t||(t={},Xu.set(i,t)),t[e]||(t[e]={handleObjects:[],nativeHandler:null});const r=t[e];return{addHandler:function(a,l,d){const c=function(g,m){const b=[g],_=g.currentTarget,w=g.relatedTarget;let E,D;e in h_&&(E=w&&_&&(w===_||AC(_,w))),m!==void 0&&b.push(m),fo.callMethod(e,"handle",i,[g,d]),E||(D=a.apply(_,b)),D===!1&&(g.preventDefault(),g.stopPropagation())},h={handler:a,wrappedHandler:function(g,m){if(!(Dc&&g.type===Dc))if(g.data=d,g.delegateTarget=i,l){let _=g.target;for(;_&&_!==i;)eD(_,l)&&(g.currentTarget=_,c(g,m)),_=_.parentNode}else{var b;if(g.currentTarget=g.delegateTarget||g.target,!!(!((b=g.target)===null||b===void 0)&&b.shadowRoot)){const w=Jf(g);g.target=w}c(g,m)}},selector:l,type:e,data:d,namespace:s.join("."),namespaces:s,guid:++TC};r.handleObjects.push(h);let p=r.handleObjects.length===1&&o,f;p&&(p=!fo.callMethod(e,"setup",i,[d,s,a])),p&&(r.nativeHandler=iD(e),DC()&&IC.indexOf(e)>-1&&(f={passive:!1}),r.removeListener=_e.listen(i,h_[e]||e,r.nativeHandler,f)),fo.callMethod(e,"add",i,[h])},removeHandler:function(a,l){const d=function(h){const u=t[h];if(!u.handleObjects.length){delete t[h];return}let p;u.handleObjects=u.handleObjects.filter(function(m){const b=s.length&&!p_(m.namespaces,s)||a&&m.handler!==a||l&&m.selector!==l;return b||(p=m.handler,fo.callMethod(h,"remove",i,[m])),b}),!u.handleObjects.length&&h!==Sd&&(fo.callMethod(h,"teardown",i,[s,p]),u.nativeHandler&&u.removeListener(),delete t[h])};if(o)d(e);else for(const h in t)d(h);Object.keys(t).length===0&&Xu.delete(i)},callHandlers:function(a,l){let d=!1;const c=function(h){d||(!s.length||p_(h.namespaces,s))&&(h.wrappedHandler(a,l),d=a.isImmediatePropagationStopped())};r.handleObjects.forEach(c),s.length&&t[Sd]&&t[Sd].handleObjects.forEach(c)}}}function iD(i){return function(e,t){const n=Xr(this,i);e=q.Event(e),n.callHandlers(e,t)}}function p_(i,e){for(let t=0;t<e.length;t++)if(i.indexOf(e[t])<0)return!1;return!0}function Ep(i){return function(e,t,n,s,o){o||(o=s,s=void 0),typeof n!="string"&&(s=n,n=void 0),!o&&typeof t=="string"&&(o=s||n,n=void 0,s=void 0),i(e,t,n,s,o)}}function nD(i){return function(e,t,n,s){typeof n=="function"&&(s=n,n=void 0),i(e,t,n,s)}}function f_(i){return function(e,t,n){typeof t=="string"&&(t={type:t}),t.target||(t.target=e),t.currentTarget=e,t.delegateTarget||(t.delegateTarget=e),!t.type&&t.originalEvent&&(t.type=t.originalEvent.type),i(e,t instanceof q.Event?t:q.Event(t),n)}}function sD(i){return q.Event=function(e,t){if(!(this instanceof q.Event))return new q.Event(e,t);e||(e={}),typeof e=="string"&&(e={type:e}),t||(t={}),i.call(this,e,t)},Object.assign(q.Event.prototype,{_propagationStopped:!1,_immediatePropagationStopped:!1,_defaultPrevented:!1,isPropagationStopped:function(){return!!(this._propagationStopped||this.originalEvent&&this.originalEvent.propagationStopped)},stopPropagation:function(){this._propagationStopped=!0,this.originalEvent&&this.originalEvent.stopPropagation()},isImmediatePropagationStopped:function(){return this._immediatePropagationStopped},stopImmediatePropagation:function(){this.stopPropagation(),this._immediatePropagationStopped=!0,this.originalEvent&&this.originalEvent.stopImmediatePropagation()},isDefaultPrevented:function(){return!!(this._defaultPrevented||this.originalEvent&&this.originalEvent.defaultPrevented)},preventDefault:function(){this._defaultPrevented=!0,this.originalEvent&&this.originalEvent.preventDefault()}}),q.Event}function m_(i){const e=function(t,n){if(n&&n.indexOf(" ")>-1){const s=Array.prototype.slice.call(arguments,0);n.split(" ").forEach(function(o){s[1]=o,i.apply(this,s)})}else i.apply(this,arguments)};return function(t,n){if(typeof n=="object"){const s=Array.prototype.slice.call(arguments,0);for(const o in n)s[1]=o,s[s.length-1]=n[o],e.apply(this,s)}else e.apply(this,arguments)}}function oD(i,e){const t=Z2[i]||i;(function(n,s){return n==="click"&&s.localName==="a"})(i,e)||Ee(e[t])&&(Dc=i,e[t](),Dc=void 0)}function rD(i){return function(e){return e.which==null&&e.type.indexOf("key")===0}(i)?i.charCode!=null?i.charCode:i.keyCode:function(e){return!e.which&&e.button!==void 0&&/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(e.type)}(i)?{1:1,2:3,3:1,4:2}[i.button]:i.which}function kC(i){i&&(q.Event=i,q.Event.prototype=i.prototype)}kC(sD(function(i,e){var t;i instanceof q.Event||qe()&&i instanceof em.Event||((t=i.view)===null||t===void 0?void 0:t.Event)&&i instanceof i.view.Event?(this.originalEvent=i,this.type=i.type,this.currentTarget=void 0,Object.prototype.hasOwnProperty.call(i,"isTrusted")&&(this.isTrusted=i.isTrusted),this.timeStamp=i.timeStamp||Date.now()):Object.assign(this,i),im("which",rD,this),i.type.indexOf("touch")===0&&(delete e.pageX,delete e.pageY),Object.assign(this,e),this.guid=++TC}));function im(i,e,t){Object.defineProperty(t||q.Event.prototype,i,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent&&e(this.originalEvent)},set:function(n){Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:n})}})}Q2.forEach(i=>im(i,e=>e[i]));X2(im);const OC=Tt(),RC=Tt();q.set=function(i){OC.fire(),q.inject(i),kC(i.Event),RC.fire()};q.subscribeGlobal=function(){tm(arguments,Ep(function(){const i=arguments;q.on.apply(this,i),OC.add(function(){const e=Array.prototype.slice.call(i,0);e.splice(3,1),q.off.apply(this,e)}),RC.add(function(){q.on.apply(this,i)})}))};q.forcePassiveFalseEventNames=IC;q.passiveEventHandlersSupported=DC;const Ta=new WeakMap;let ir;const aD=new Xf;let MC=function(){};const lD=function(i){aD.fire(i),ir=i;const e=ir.cleanData;ir.cleanData=function(t){return MC(t),e.call(this,t)}};lD({data:function(){const i=arguments[0],e=arguments[1],t=arguments[2];if(!i)return;let n=Ta.get(i);return n||(n={},Ta.set(i,n)),e===void 0?n:arguments.length===2?n[e]:(n[e]=t,t)},removeData:function(i,e){if(i)if(e===void 0)Ta.delete(i);else{const t=Ta.get(i);t&&delete t[e]}},cleanData:function(i){for(let e=0;e<i.length;e++)q.off(i[e]),Ta.delete(i[e])}});function di(){return ir.data.apply(this,arguments)}function dD(i){MC=i}function pu(i,e){return ir.removeData.call(this,i,e)}function Bl(i,e){if(!_e.isElementNode(i))return;const t=i.getElementsByTagName("*");ir.cleanData(t),e&&ir.cleanData([i])}const PC=function(i){return i==null?"":String(i)},nm=function(i){return PC(i).charAt(0).toUpperCase()+i.substr(1)},sm=function(i){return PC(i).replace(/([a-z\d])([A-Z])/g,"$1 $2").split(/[\s_-]+/)},om=function(i){return Ii(sm(i),function(e){return e.toLowerCase()}).join("-")},fl=function(i,e){return Ii(sm(i),function(t,n){return t=t.toLowerCase(),(e||n>0)&&(t=nm(t)),t}).join("")},cD=function(i){return nm(om(i).replace(/-/g," "))},ml=function(i){return Ii(sm(i),function(e){return nm(e.toLowerCase())}).join(" ")},uD=["0","1","2","3","4","5","6","7","8","9"],cr=function(i){const e=[];let t,n,s=!1,o=!1;for(t=0;t<i.length;t++)n=i.charAt(t),o=n===n.toUpperCase()&&n!=="-"&&n!==")"&&n!=="/"||n in uD,n==="_"||n==="."?(n=" ",o=!0):t===0?(n=n.toUpperCase(),o=!0):!s&&o&&e.length>0&&e.push(" "),e.push(n),s=o;return e.join("")},Ac=["","Webkit","Moz","O","Ms"],hD={"":"",Webkit:"-webkit-",Moz:"-moz-",O:"-o-",ms:"-ms-"},Ip=Js(function(){return _e.createElement("dx").style}),pD=function(i,e){i=fl(i,!0);let t;for(let n=0,s=Ac.length;n<s;n++){const o=Ac[n],r=o+i,a=fl(r);if(t=e(a,o),t===void 0&&(t=e(r,o)),t!==void 0)break}return t||""},xr=function(i){if(i in Ip())return i;const e=i;i=i.charAt(0).toUpperCase()+i.substr(1);for(let t=1;t<Ac.length;t++){const n=Ac[t].toLowerCase()+i;if(n in Ip())return n}return e},ac=function(i){return pD(i,function(e,t){if(e in Ip())return hD[t]})},fD=["fillOpacity","columnCount","flexGrow","flexShrink","fontWeight","lineHeight","opacity","zIndex","zoom"],gl=function(i,e){return Wt(e)&&fD.indexOf(i)===-1&&(e+="px"),e},BC=function(i,e,t){if(i){t=Wt(t)?t+="px":t;for(let n=0;n<i.length;++n)i[n].style[e]=t}},Tp=function(i,e){BC(i,"width",e)},Zu=function(i,e){BC(i,"height",e)},FC=function(i,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0)&&[].slice.call(i.style).forEach(s=>{i.style.removeProperty(s)}),e.split(";").forEach(n=>{const s=n.split(":").map(o=>o.trim());if(s.length===2){const[o,r]=s;i.style[o]=r}})},kc=Je(),mD=["auto","none","inherit","initial"],Ju=function(i,e){let t=0;return e.forEach(function(n){t+=parseFloat(i[n])||0}),t},VC=function(i,e){const t=i==="width"?"Left":"Top",n=i==="width"?"Right":"Bottom";return{padding:Ju(e,["padding"+t,"padding"+n]),border:Ju(e,["border"+t+"Width","border"+n+"Width"]),margin:Ju(e,["margin"+t,"margin"+n])}},NC=function(i){var e;const t=(i==null||(e=i.ownerDocument)===null||e===void 0?void 0:e.defaultView)||kc;return t.getComputedStyle&&t.getComputedStyle(i)},Dp=function(i,e,t,n){var s;return(e==null?void 0:e[t])||((s=i.style)===null||s===void 0?void 0:s[t])||n},Nr={content:0,padding:1,border:2,margin:3,"content-box":0,"border-box":2},g_={width:["left","right"],height:["top","bottom"]};function Da(i,e,t,n){const s=(r,a,l)=>parseFloat(Dp(r,a,l,"0"))||0,o=t==="border"?"-width":"";return s(i,n,`${t}-${g_[e][0]}${o}`)+s(i,n,`${t}-${g_[e][1]}${o}`)}const gD=function(i,e,t){const n=e==="width"?"offsetWidth":"offsetHeight",s=NC(i);let o=Dp(i,s,e);(o===""||o==="auto")&&(o=i[n]),o=parseFloat(o)||0;const r=Dp(i,s,"boxSizing","content-box");let l=Nr[t||r],d=Nr[r];if(l===void 0||d===void 0)throw new Error;if(d===l)return o;const c=Math.sign(l-d);let h=!1,u=!1,p=!1,f=!1;c===1&&(l+=1,d+=1);for(let g=d;g!==l;g+=c)switch(g){case Nr.content:break;case Nr.padding:h=c*Da(i,e,"padding",s);break;case Nr.border:u=c*Da(i,e,"border",s);break;case Nr.margin:p=c*Da(i,e,"margin",s)}if(h||u){const g=(h===!1?c*Da(i,e,"padding",s):h)+(u===!1?c*Da(i,e,"border",s):u);f=c*Math.max(0,Math.floor(i[n]-o-c*g))||0}return o+p+h+u+f},_D=function(i){return gi(i)?i.innerHeight:i.offsetHeight},bD=function(i,e,t){return i.indexOf("px")>0?i=parseInt(i.replace("px","")):i.indexOf("%")>0?i=parseInt(i.replace("%",""))*_D(e)/100:isNaN(i)?i.indexOf("vh")>0?i=kc.innerHeight/100*parseInt(i.replace("vh","")):t&&i.indexOf("em")>0&&(i=parseFloat(i.replace("em",""))*parseFloat(kc.getComputedStyle(t).fontSize)):i=parseInt(i),i},LC=function(i,e,t){if(!i)return null;if(mD.indexOf(i)>-1)return e?null:i;if(Ke(i)&&(i=bD(i,t)),Wt(i))return Math.max(0,i+e);const n=e<0?" - ":" ";return"calc("+i+n+Math.abs(e)+"px)"},vD=function(i,e,t){const n=LC(i,e,t);return n!==null?n:"none"},yD=function(i,e,t){const n=LC(i,e,t);return n!==null?n:0},Qu=function(i,e){if(!i)return 0;const t=VC("height",kc.getComputedStyle(i));return t.padding+t.border+(e?t.margin:0)},__=function(i){if(i){const e=i.getBoundingClientRect();if(e.height)return e.height}return 0},xs={getWidth:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("width",...e)},setWidth:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("width",...e)},getHeight:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("height",...e)},setHeight:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("height",...e)},getOuterWidth:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("outerWidth",...e)},setOuterWidth:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("outerWidth",...e)},getOuterHeight:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("outerHeight",...e)},setOuterHeight:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("outerHeight",...e)},getInnerWidth:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("innerWidth",...e)},setInnerWidth:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("innerWidth",...e)},getInnerHeight:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("innerHeight",...e)},setInnerHeight:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return Bn("innerHeight",...e)}};function Bn(i,e,t){return arguments.length===2?kp(e,i):kp(e,i,t)}const Ge=i=>xs.getWidth(i),rm=(i,e)=>xs.setWidth(i,e),st=i=>xs.getHeight(i),Io=(i,e)=>xs.setHeight(i,e),St=(i,e)=>xs.getOuterWidth(i,e||!1),b_=(i,e)=>xs.setOuterWidth(i,e),rt=(i,e)=>xs.getOuterHeight(i,e||!1),v_=(i,e)=>xs.setOuterHeight(i,e),Ap=i=>xs.getInnerWidth(i),Oc=i=>xs.getInnerHeight(i),kp=function(i,e,t){const n=e.toLowerCase().indexOf("width")>=0?"Width":"Height",s=n.toLowerCase(),o=e.indexOf("outer")===0,r=e.indexOf("inner")===0,a=arguments.length===2||typeof t=="boolean";if(Cn(i)){if(i.length>1&&!a){for(let l=0;l<i.length;l++)kp(i[l],e,t);return}i=i[0]}if(i){if(gi(i))return o?i["inner"+n]:_e.getDocumentElement()["client"+n];if(_e.isDocument(i)){const l=_e.getDocumentElement(),d=_e.getBody();return Math.max(d["scroll"+n],d["offset"+n],l["scroll"+n],l["offset"+n],l["client"+n])}if(a){let l="content";return o&&(l=t?"margin":"border"),r&&(l="padding"),gD(i,s,l)}if(Wt(t)){const l=NC(i),d=VC(s,l),c=l.boxSizing==="border-box";t=Number(t),o?t-=c?0:d.border+d.padding:r?t+=c?d.border:-d.padding:c&&(t+=d.border+d.padding)}return t+=Wt(t)?"px":"",_e.setStyle(i,s,t),null}},$C=i=>gi(i)?i:i.defaultView,Op=i=>{if(!i.getClientRects().length)return{top:0,left:0};const e=i.getBoundingClientRect(),t=$C(i.ownerDocument),n=i.ownerDocument.documentElement;return{top:e.top+t.pageYOffset-n.clientTop,left:e.left+t.pageXOffset-n.clientLeft}},HC=/<([a-z][^/\0>\x20\t\r\n\f]+)/i,hs={default:{tagsCount:0,startTags:"",endTags:""},thead:{tagsCount:1,startTags:"<table>",endTags:"</table>"},td:{tagsCount:3,startTags:"<table><tbody><tr>",endTags:"</tr></tbody></table>"},col:{tagsCount:2,startTags:"<table><colgroup>",endTags:"</colgroup></table>"},tr:{tagsCount:2,startTags:"<table><tbody>",endTags:"</tbody></table>"}};hs.tbody=hs.colgroup=hs.caption=hs.tfoot=hs.thead;hs.th=hs.td;const am=function(i){if(typeof i!="string")return null;let t=_e.createDocumentFragment().appendChild(_e.createElement("div"));const n=HC.exec(i),s=n&&n[1].toLowerCase(),o=hs[s]||hs.default;t.innerHTML=o.startTags+i+o.endTags;for(let r=0;r<o.tagsCount;r++)t=t.lastChild;return[...t.childNodes]},CD=function(i){const e=HC.exec(i);return e&&e[1]in hs},xD=Je();let xt;const Ze=function(i,e){return i?typeof i=="string"?i==="body"?(this[0]=e?e.body:_e.getBody(),this.length=1,this):(e=e||_e.getDocument(),i[0]==="<"?(this[0]=_e.createElement(i.slice(1,-1),e),this.length=1,this):([].push.apply(this,_e.querySelectorAll(e,i)),this)):_e.isNode(i)||gi(i)?(this[0]=i,this.length=1,this):Array.isArray(i)?([].push.apply(this,i),this):xt(i.toArray?i.toArray():[i]):(this.length=0,this)};xt=function(i,e){return new Ze(i,e)};xt.fn={dxRenderer:!0};Ze.prototype=xt.fn;const ya=function(i,e){for(let t=0;t<this.length;t++){const n=xt(this[t]);n[i].apply(n,e)}return this},Rp=function(i,e,t){t!=null&&t!==!1?_e.setAttribute(i,e,t):_e.removeAttribute(i,e)};Ze.prototype.show=function(){return this.toggle(!0)};Ze.prototype.hide=function(){return this.toggle(!1)};Ze.prototype.toggle=function(i){return this[0]&&this.toggleClass("dx-state-invisible",!i),this};Ze.prototype.attr=function(i,e){if(this.length>1&&arguments.length>1)return ya.call(this,"attr",arguments);if(!this[0])return We(i)||e!==void 0?this:void 0;if(!this[0].getAttribute)return this.prop(i,e);if(typeof i=="string"&&arguments.length===1){const t=this[0].getAttribute(i);return t??void 0}else if(ht(i))for(const t in i)this.attr(t,i[t]);else Rp(this[0],i,e);return this};Ze.prototype.removeAttr=function(i){return this[0]&&_e.removeAttribute(this[0],i),this};Ze.prototype.prop=function(i,e){if(!this[0])return this;if(typeof i=="string"&&arguments.length===1)return this[0][i];if(ht(i))for(const t in i)this.prop(t,i[t]);else _e.setProperty(this[0],i,e);return this};Ze.prototype.addClass=function(i){return this.toggleClass(i,!0)};Ze.prototype.removeClass=function(i){return this.toggleClass(i,!1)};Ze.prototype.hasClass=function(i){if(!this[0]||this[0].className===void 0)return!1;const e=i.split(" ");for(let t=0;t<e.length;t++)if(this[0].classList){if(this[0].classList.contains(e[t]))return!0}else if(((Ke(this[0].className)?this[0].className:_e.getAttribute(this[0],"class"))||"").split(" ").indexOf(e[t])>=0)return!0;return!1};Ze.prototype.toggleClass=function(i,e){if(this.length>1)return ya.call(this,"toggleClass",arguments);if(!this[0]||!i)return this;e=e===void 0?!this.hasClass(i):e;const t=i.split(" ");for(let n=0;n<t.length;n++)_e.setClass(this[0],t[n],e);return this};Ze.prototype.html=function(i){return arguments.length?(this.empty(),typeof i=="string"&&!CD(i)||typeof i=="number"?(this[0].innerHTML=i,this):this.append(am(i))):this[0].innerHTML};const zC=function(i,e){if(!(!this[0]||!i)){typeof i=="string"?i=am(i):i.nodeType?i=[i]:Wt(i)&&(i=[_e.createTextNode(i)]);for(let t=0;t<i.length;t++){const n=i[t];let s=this[0];s.tagName==="TABLE"&&n.tagName==="TR"&&s.tBodies&&s.tBodies.length&&(s=s.tBodies[0]),_e.insertElement(s,n.nodeType?n:n[0],e)}}},y_=function(i,e){if(!(!this[0]||!this[0].style)&&!(e===null||typeof e=="number"&&isNaN(e))){i=xr(i);for(let t=0;t<this.length;t++)this[t].style[i]=gl(i,e)}};Ze.prototype.css=function(i,e){if(Ke(i))if(arguments.length===2)y_.call(this,i,e);else{if(!this[0])return;i=xr(i);const t=xD.getComputedStyle(this[0])[i]||this[0].style[i];return Wt(t)?t.toString():t}else if(ht(i))for(const t in i)y_.call(this,t,i[t]);return this};Ze.prototype.prepend=function(i){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.prepend(arguments[e]);return this}return zC.apply(this,[i,this[0].firstChild]),this};Ze.prototype.append=function(i){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.append(arguments[e]);return this}return zC.apply(this,[i]),this};Ze.prototype.prependTo=function(i){if(this.length>1){for(let e=this.length-1;e>=0;e--)xt(this[e]).prependTo(i);return this}return i=xt(i),i[0]&&_e.insertElement(i[0],this[0],i[0].firstChild),this};Ze.prototype.appendTo=function(i){return this.length>1?ya.call(this,"appendTo",arguments):(_e.insertElement(xt(i)[0],this[0]),this)};Ze.prototype.insertBefore=function(i){return i&&i[0]&&_e.insertElement(i[0].parentNode,this[0],i[0]),this};Ze.prototype.insertAfter=function(i){return i&&i[0]&&_e.insertElement(i[0].parentNode,this[0],i[0].nextSibling),this};Ze.prototype.before=function(i){return this[0]&&_e.insertElement(this[0].parentNode,i[0],this[0]),this};Ze.prototype.after=function(i){return this[0]&&_e.insertElement(this[0].parentNode,i[0],this[0].nextSibling),this};Ze.prototype.wrap=function(i){if(this[0]){const e=xt(i);e.insertBefore(this),e.append(this)}return this};Ze.prototype.wrapInner=function(i){const e=this.contents();return e.length?e.wrap(i):this.append(i),this};Ze.prototype.replaceWith=function(i){if(i&&i[0])return i.is(this)?this:(i.insertBefore(this),this.remove(),i)};Ze.prototype.remove=function(){return this.length>1?ya.call(this,"remove",arguments):(Bl(this[0],!0),_e.removeElement(this[0]),this)};Ze.prototype.detach=function(){return this.length>1?ya.call(this,"detach",arguments):(_e.removeElement(this[0]),this)};Ze.prototype.empty=function(){return this.length>1?ya.call(this,"empty",arguments):(Bl(this[0]),_e.setText(this[0],""),this)};Ze.prototype.clone=function(){const i=[];for(let e=0;e<this.length;e++)i.push(this[e].cloneNode(!0));return xt(i)};Ze.prototype.text=function(i){if(!arguments.length){let t="";for(let n=0;n<this.length;n++)t+=this[n]&&this[n].textContent||"";return t}const e=Ee(i)?i():i;return Bl(this[0],!1),_e.setText(this[0],U(e)?e:""),this};Ze.prototype.val=function(i){return arguments.length===1?this.prop("value",U(i)?i:""):this.prop("value")};Ze.prototype.contents=function(){if(!this[0])return xt();const i=[];return i.push.apply(i,this[0].childNodes),xt(i)};Ze.prototype.find=function(i){const e=xt();if(!i)return e;const t=[];let n;if(typeof i=="string")for(i=i.trim(),n=0;n<this.length;n++){const s=this[n];if(_e.isElementNode(s)){const o=s.getAttribute("id");let r=o||"dx-query-children";o||Rp(s,"id",r),r="[id='"+r+"'] ";const a=r+i.replace(/([^\\])(,)/g,"$1, "+r);t.push.apply(t,_e.querySelectorAll(s,a)),Rp(s,"id",o)}else(_e.isDocument(s)||_e.isDocumentFragment(s))&&t.push.apply(t,_e.querySelectorAll(s,i))}else for(n=0;n<this.length;n++)i=_e.isNode(i)?i:i[0],this[n]!==i&&this[n].contains(i)&&t.push(i);return e.add(t)};const C_=function(i,e){return e=e.host??e,e.nodeType?!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length):!0};Ze.prototype.filter=function(i){if(!i)return xt();if(i===":visible")return this.filter(C_);if(i===":hidden")return this.filter(function(t,n){return!C_(0,n)});const e=[];for(let t=0;t<this.length;t++){const n=this[t];if(_e.isElementNode(n)&&kn(i)==="string")_e.elementMatches(n,i)&&e.push(n);else if(_e.isNode(i)||gi(i))i===n&&e.push(n);else if(Ee(i))i.call(n,t,n)&&e.push(n);else for(let s=0;s<i.length;s++)i[s]===n&&e.push(n)}return xt(e)};Ze.prototype.not=function(i){const e=[],t=this.filter(i).toArray();for(let n=0;n<this.length;n++)t.indexOf(this[n])===-1&&e.push(this[n]);return xt(e)};Ze.prototype.is=function(i){return!!this.filter(i).length};Ze.prototype.children=function(i){let e=[];for(let t=0;t<this.length;t++){const n=this[t]?this[t].childNodes:[];for(let s=0;s<n.length;s++)_e.isElementNode(n[s])&&e.push(n[s])}return e=xt(e),i?e.filter(i):e};Ze.prototype.siblings=function(){const i=this[0];if(!i||!i.parentNode)return xt();const e=[],t=i.parentNode.childNodes||[];for(let n=0;n<t.length;n++){const s=t[n];_e.isElementNode(s)&&s!==i&&e.push(s)}return xt(e)};Ze.prototype.each=function(i){for(let e=0;e<this.length&&i.call(this[e],e,this[e])!==!1;e++);};Ze.prototype.index=function(i){return i?(i=xt(i),this.toArray().indexOf(i[0])):this.parent().children().index(this)};Ze.prototype.get=function(i){return this[i<0?this.length+i:i]};Ze.prototype.eq=function(i){return i=i<0?this.length+i:i,xt(this[i])};Ze.prototype.first=function(){return this.eq(0)};Ze.prototype.last=function(){return this.eq(-1)};Ze.prototype.select=function(){for(let i=0;i<this.length;i+=1)this[i].select&&this[i].select();return this};Ze.prototype.parent=function(i){if(!this[0])return xt();const e=xt(this[0].parentNode);return!i||e.is(i)?e:xt()};Ze.prototype.parents=function(i){const e=[];let t=this.parent();for(;t&&t[0]&&!_e.isDocument(t[0]);)_e.isElementNode(t[0])&&(!i||t.is(i))&&e.push(t.get(0)),t=t.parent();return xt(e)};Ze.prototype.closest=function(i){if(this.is(i))return this;let e=this.parent();for(;e&&e.length;){if(e.is(i))return e;e=e.parent()}return xt()};Ze.prototype.next=function(i){if(!this[0])return xt();let e=xt(this[0].nextSibling);if(!arguments.length)return e;for(;e&&e.length;){if(e.is(i))return e;e=e.next()}return xt()};Ze.prototype.prev=function(){return this[0]?xt(this[0].previousSibling):xt()};Ze.prototype.add=function(i){const e=xt(i),t=this.toArray();for(let n=0;n<e.length;n++){const s=e[n];t.indexOf(s)===-1&&t.push(s)}return xt(t)};const lm=[];Ze.prototype.splice=function(){return xt(lm.splice.apply(this,arguments))};Ze.prototype.slice=function(){return xt(lm.slice.apply(this,arguments))};Ze.prototype.toArray=function(){return lm.slice.call(this)};Ze.prototype.offset=function(){if(this[0])return Op(this[0])};Ze.prototype.offsetParent=function(){if(!this[0])return xt();let i=xt(this[0].offsetParent);for(;i[0]&&i.css("position")==="static";)i=xt(i[0].offsetParent);return i=i[0]?i:xt(_e.getDocumentElement()),i};Ze.prototype.position=function(){if(!this[0])return;let i;const e=parseFloat(this.css("marginTop")),t=parseFloat(this.css("marginLeft"));if(this.css("position")==="fixed")return i=this[0].getBoundingClientRect(),{top:i.top-e,left:i.left-t};i=this.offset();const n=this.offsetParent();let s={top:0,left:0};return n[0].nodeName!=="HTML"&&(s=n.offset()),s={top:s.top+parseFloat(n.css("borderTopWidth")),left:s.left+parseFloat(n.css("borderLeftWidth"))},{top:i.top-s.top-e,left:i.left-s.left-t}};[{name:"scrollLeft",offsetProp:"pageXOffset",scrollWindow:function(i,e){i.scrollTo(e,i.pageYOffset)}},{name:"scrollTop",offsetProp:"pageYOffset",scrollWindow:function(i,e){i.scrollTo(i.pageXOffset,e)}}].forEach(function(i){const e=i.name;Ze.prototype[e]=function(t){if(!this[0])return;const n=$C(this[0]);return t===void 0?n?n[i.offsetProp]:this[0][e]:(n?i.scrollWindow(n,t):this[0][e]=t,this)}});Ze.prototype.data=function(i,e){if(this[0])return arguments.length<2?di.call(xt,this[0],i):(di.call(xt,this[0],i,e),this)};Ze.prototype.removeData=function(i){return this[0]&&pu(this[0],i),this};const WC=function(){return xt.apply(this,arguments)};Object.defineProperty(WC,"fn",{enumerable:!0,configurable:!0,get:function(){return xt.fn},set:function(i){xt.fn=i}});const wD={set:function(i){xt=i},get:function(){return WC}},R=wD.get(),SD={"en-150":"en-001","en-AG":"en-001","en-AI":"en-001","en-AU":"en-001","en-BB":"en-001","en-BM":"en-001","en-BS":"en-001","en-BW":"en-001","en-BZ":"en-001","en-CC":"en-001","en-CK":"en-001","en-CM":"en-001","en-CX":"en-001","en-CY":"en-001","en-DG":"en-001","en-DM":"en-001","en-ER":"en-001","en-FJ":"en-001","en-FK":"en-001","en-FM":"en-001","en-GB":"en-001","en-GD":"en-001","en-GG":"en-001","en-GH":"en-001","en-GI":"en-001","en-GM":"en-001","en-GY":"en-001","en-HK":"en-001","en-IE":"en-001","en-IL":"en-001","en-IM":"en-001","en-IN":"en-001","en-IO":"en-001","en-JE":"en-001","en-JM":"en-001","en-KE":"en-001","en-KI":"en-001","en-KN":"en-001","en-KY":"en-001","en-LC":"en-001","en-LR":"en-001","en-LS":"en-001","en-MG":"en-001","en-MO":"en-001","en-MS":"en-001","en-MT":"en-001","en-MU":"en-001","en-MV":"en-001","en-MW":"en-001","en-MY":"en-001","en-NA":"en-001","en-NF":"en-001","en-NG":"en-001","en-NR":"en-001","en-NU":"en-001","en-NZ":"en-001","en-PG":"en-001","en-PK":"en-001","en-PN":"en-001","en-PW":"en-001","en-RW":"en-001","en-SB":"en-001","en-SC":"en-001","en-SD":"en-001","en-SG":"en-001","en-SH":"en-001","en-SL":"en-001","en-SS":"en-001","en-SX":"en-001","en-SZ":"en-001","en-TC":"en-001","en-TK":"en-001","en-TO":"en-001","en-TT":"en-001","en-TV":"en-001","en-TZ":"en-001","en-UG":"en-001","en-VC":"en-001","en-VG":"en-001","en-VU":"en-001","en-WS":"en-001","en-ZA":"en-001","en-ZM":"en-001","en-ZW":"en-001","en-AT":"en-150","en-BE":"en-150","en-CH":"en-150","en-DE":"en-150","en-DK":"en-150","en-FI":"en-150","en-NL":"en-150","en-SE":"en-150","en-SI":"en-150","hi-Latn":"en-IN","es-AR":"es-419","es-BO":"es-419","es-BR":"es-419","es-BZ":"es-419","es-CL":"es-419","es-CO":"es-419","es-CR":"es-419","es-CU":"es-419","es-DO":"es-419","es-EC":"es-419","es-GT":"es-419","es-HN":"es-419","es-MX":"es-419","es-NI":"es-419","es-PA":"es-419","es-PE":"es-419","es-PR":"es-419","es-PY":"es-419","es-SV":"es-419","es-US":"es-419","es-UY":"es-419","es-VE":"es-419",nb:"no",nn:"no","pt-AO":"pt-PT","pt-CH":"pt-PT","pt-CV":"pt-PT","pt-FR":"pt-PT","pt-GQ":"pt-PT","pt-GW":"pt-PT","pt-LU":"pt-PT","pt-MO":"pt-PT","pt-MZ":"pt-PT","pt-ST":"pt-PT","pt-TL":"pt-PT","az-Arab":"und","az-Cyrl":"und","bal-Latn":"und","blt-Latn":"und","bm-Nkoo":"und","bs-Cyrl":"und","byn-Latn":"und","cu-Glag":"und","dje-Arab":"und","dyo-Arab":"und","en-Dsrt":"und","en-Shaw":"und","ff-Adlm":"und","ff-Arab":"und","ha-Arab":"und","iu-Latn":"und","kk-Arab":"und","ks-Deva":"und","ku-Arab":"und","ky-Arab":"und","ky-Latn":"und","ml-Arab":"und","mn-Mong":"und","mni-Mtei":"und","ms-Arab":"und","pa-Arab":"und","sat-Deva":"und","sd-Deva":"und","sd-Khoj":"und","sd-Sind":"und","shi-Latn":"und","so-Arab":"und","sr-Latn":"und","sw-Arab":"und","tg-Arab":"und","ug-Cyrl":"und","uz-Arab":"und","uz-Cyrl":"und","vai-Latn":"und","wo-Arab":"und","yo-Arab":"und","yue-Hans":"und","zh-Hant":"und","zh-Hant-MO":"zh-Hant-HK"},ED=(i,e)=>{const t=i[e];return t?t!=="root"&&t:e.substr(0,e.lastIndexOf("-"))},Kn=qn({locale:(()=>{let i="en";return e=>{if(!e)return i;i=e}})(),getValueByClosestLocale:function(i){let e=this.locale(),t=i(e),n;for(;!t&&!n;)e=ED(SD,e),e?t=i(e):n=!0;return t===void 0&&e!=="en"?i("en"):t}}),ID={en:{Yes:"Yes",No:"No",Cancel:"Cancel",CheckState:"Check state",Close:"Close",Clear:"Clear",Done:"Done",Loading:"Loading...",Select:"Select...",Search:"Search",Back:"Back",OK:"OK","dxCollectionWidget-noDataText":"No data to display","dxDropDownEditor-selectLabel":"Select","validation-required":"Required","validation-required-formatted":"{0} is required","validation-numeric":"Value must be a number","validation-numeric-formatted":"{0} must be a number","validation-range":"Value is out of range","validation-range-formatted":"{0} is out of range","validation-stringLength":"The length of the value is not correct","validation-stringLength-formatted":"The length of {0} is not correct","validation-custom":"Value is invalid","validation-custom-formatted":"{0} is invalid","validation-async":"Value is invalid","validation-async-formatted":"{0} is invalid","validation-compare":"Values do not match","validation-compare-formatted":"{0} does not match","validation-pattern":"Value does not match pattern","validation-pattern-formatted":"{0} does not match pattern","validation-email":"Email is invalid","validation-email-formatted":"{0} is invalid","validation-mask":"Value is invalid","dxLookup-searchPlaceholder":"Minimum character number: {0}","dxList-pullingDownText":"Pull down to refresh...","dxList-pulledDownText":"Release to refresh...","dxList-refreshingText":"Refreshing...","dxList-pageLoadingText":"Loading...","dxList-nextButtonText":"More","dxList-selectAll":"Select All","dxList-listAriaLabel":"Items","dxList-listAriaLabel-deletable":"Deletable items","dxListEditDecorator-delete":"Delete","dxListEditDecorator-more":"More","dxList-selectAll-indeterminate":"Half-checked","dxList-selectAll-checked":"Checked","dxList-selectAll-notChecked":"Not checked","dxScrollView-pullingDownText":"Pull down to refresh...","dxScrollView-pulledDownText":"Release to refresh...","dxScrollView-refreshingText":"Refreshing...","dxScrollView-reachBottomText":"Loading...","dxDateBox-simulatedDataPickerTitleTime":"Select time","dxDateBox-simulatedDataPickerTitleDate":"Select date","dxDateBox-simulatedDataPickerTitleDateTime":"Select date and time","dxDateBox-validation-datetime":"Value must be a date or time","dxDateRangeBox-invalidStartDateMessage":"Start value must be a date","dxDateRangeBox-invalidEndDateMessage":"End value must be a date","dxDateRangeBox-startDateOutOfRangeMessage":"Start date is out of range","dxDateRangeBox-endDateOutOfRangeMessage":"End date is out of range","dxDateRangeBox-startDateLabel":"Start Date","dxDateRangeBox-endDateLabel":"End Date","dxFileUploader-selectFile":"Select a file","dxFileUploader-dropFile":"or Drop a file here","dxFileUploader-bytes":"bytes","dxFileUploader-kb":"KB","dxFileUploader-Mb":"MB","dxFileUploader-Gb":"GB","dxFileUploader-upload":"Upload","dxFileUploader-uploaded":"Uploaded","dxFileUploader-readyToUpload":"Ready to upload","dxFileUploader-uploadAbortedMessage":"Upload cancelled","dxFileUploader-uploadFailedMessage":"Upload failed","dxFileUploader-invalidFileExtension":"File type is not allowed","dxFileUploader-invalidMaxFileSize":"File is too large","dxFileUploader-invalidMinFileSize":"File is too small","dxRangeSlider-ariaFrom":"From","dxRangeSlider-ariaTill":"Till","dxSwitch-switchedOnText":"ON","dxSwitch-switchedOffText":"OFF","dxForm-optionalMark":"optional","dxForm-requiredMessage":"{0} is required","dxNumberBox-invalidValueMessage":"Value must be a number","dxNumberBox-noDataText":"No data","dxDataGrid-emptyHeaderWithColumnChooserText":"Use {0} to display columns","dxDataGrid-emptyHeaderWithGroupPanelText":"Drag a column from the group panel here","dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText":"Use {0} or drag a column from the group panel","dxDataGrid-emptyHeaderColumnChooserText":"column chooser","dxDataGrid-columnChooserTitle":"Column Chooser","dxDataGrid-columnChooserEmptyText":"Drag a column here to hide it","dxDataGrid-groupContinuesMessage":"Continues on the next page","dxDataGrid-groupContinuedMessage":"Continued from the previous page","dxDataGrid-groupHeaderText":"Group by This Column","dxDataGrid-ungroupHeaderText":"Ungroup","dxDataGrid-ungroupAllText":"Ungroup All","dxDataGrid-editingEditRow":"Edit","dxDataGrid-editingSaveRowChanges":"Save","dxDataGrid-editingCancelRowChanges":"Cancel","dxDataGrid-editingDeleteRow":"Delete","dxDataGrid-editingUndeleteRow":"Undelete","dxDataGrid-editingConfirmDeleteMessage":"Are you sure you want to delete this record?","dxDataGrid-validationCancelChanges":"Cancel changes","dxDataGrid-groupPanelEmptyText":"Drag a column header here to group by that column","dxDataGrid-noDataText":"No data","dxDataGrid-searchPanelPlaceholder":"Search...","dxDataGrid-filterRowShowAllText":"(All)","dxDataGrid-filterRowResetOperationText":"Reset","dxDataGrid-filterRowOperationEquals":"Equals","dxDataGrid-filterRowOperationNotEquals":"Does not equal","dxDataGrid-filterRowOperationLess":"Less than","dxDataGrid-filterRowOperationLessOrEquals":"Less than or equal to","dxDataGrid-filterRowOperationGreater":"Greater than","dxDataGrid-filterRowOperationGreaterOrEquals":"Greater than or equal to","dxDataGrid-filterRowOperationStartsWith":"Starts with","dxDataGrid-filterRowOperationContains":"Contains","dxDataGrid-filterRowOperationNotContains":"Does not contain","dxDataGrid-filterRowOperationEndsWith":"Ends with","dxDataGrid-filterRowOperationBetween":"Between","dxDataGrid-filterRowOperationBetweenStartText":"Start","dxDataGrid-filterRowOperationBetweenEndText":"End","dxDataGrid-ariaSearchBox":"Search box","dxDataGrid-applyFilterText":"Apply filter","dxDataGrid-trueText":"true","dxDataGrid-falseText":"false","dxDataGrid-sortingAscendingText":"Sort Ascending","dxDataGrid-sortingDescendingText":"Sort Descending","dxDataGrid-sortingClearText":"Clear Sorting","dxDataGrid-ariaNotSortedColumn":"Not sorted column","dxDataGrid-ariaSortedAscendingColumn":"Column sorted in ascending order","dxDataGrid-ariaSortedDescendingColumn":"Column sorted in descending order","dxDataGrid-ariaSortIndex":"Sort index {0}","dxDataGrid-editingSaveAllChanges":"Save changes","dxDataGrid-editingCancelAllChanges":"Discard changes","dxDataGrid-editingAddRow":"Add a row","dxDataGrid-summaryMin":"Min: {0}","dxDataGrid-summaryMinOtherColumn":"Min of {1} is {0}","dxDataGrid-summaryMax":"Max: {0}","dxDataGrid-summaryMaxOtherColumn":"Max of {1} is {0}","dxDataGrid-summaryAvg":"Avg: {0}","dxDataGrid-summaryAvgOtherColumn":"Avg of {1} is {0}","dxDataGrid-summarySum":"Sum: {0}","dxDataGrid-summarySumOtherColumn":"Sum of {1} is {0}","dxDataGrid-summaryCount":"Count: {0}","dxDataGrid-columnFixingFix":"Fix","dxDataGrid-columnFixingUnfix":"Unfix","dxDataGrid-columnFixingLeftPosition":"To the left","dxDataGrid-columnFixingRightPosition":"To the right","dxDataGrid-exportTo":"Export","dxDataGrid-exportToExcel":"Export to Excel file","dxDataGrid-exporting":"Exporting...","dxDataGrid-excelFormat":"Excel file","dxDataGrid-selectedRows":"Selected rows","dxDataGrid-exportSelectedRows":"Export selected rows to {0}","dxDataGrid-exportAll":"Export all data to {0}","dxDataGrid-headerFilterLabel":"Filter options","dxDataGrid-headerFilterIndicatorLabel":"Show filter options for column '{0}'","dxDataGrid-headerFilterEmptyValue":"(Blanks)","dxDataGrid-headerFilterOK":"OK","dxDataGrid-headerFilterCancel":"Cancel","dxDataGrid-ariaAdaptiveCollapse":"Hide additional data","dxDataGrid-ariaAdaptiveExpand":"Display additional data","dxDataGrid-ariaColumn":"Column","dxDataGrid-ariaColumnHeader":"Column header","dxDataGrid-ariaValue":"Value","dxDataGrid-ariaError":"Error","dxDataGrid-ariaRevertButton":"Press Escape to discard the changes","dxDataGrid-ariaFilterCell":"Filter cell","dxDataGrid-ariaCollapse":"Collapse","dxDataGrid-ariaModifiedCell":"Modified","dxDataGrid-ariaDeletedCell":"Deleted","dxDataGrid-ariaEditableCell":"Editable","dxDataGrid-ariaExpand":"Expand","dxDataGrid-ariaCollapsedRow":"Collapsed row","dxDataGrid-ariaExpandedRow":"Expanded row","dxDataGrid-ariaDataGrid":"Data grid with {0} rows and {1} columns","dxDataGrid-ariaSearchInGrid":"Search in the data grid","dxDataGrid-ariaSelectAll":"Select all","dxDataGrid-ariaSelectRow":"Select row","dxDataGrid-ariaToolbar":"Data grid toolbar","dxDataGrid-ariaEditForm":"Edit form","dxDataGrid-filterBuilderPopupTitle":"Filter Builder","dxDataGrid-filterPanelCreateFilter":"Create Filter","dxDataGrid-filterPanelClearFilter":"Clear","dxDataGrid-filterPanelFilterEnabledHint":"Enable the filter","dxDataGrid-masterDetail":"Cell with details","dxTreeList-ariaTreeList":"Tree list with {0} rows and {1} columns","dxTreeList-ariaSearchInGrid":"Search in the tree list","dxTreeList-ariaToolbar":"Tree list toolbar","dxTreeList-editingAddRowToNode":"Add","dxPager-infoText":"Page {0} of {1} ({2} items)","dxPager-pagesCountText":"of","dxPager-pageSize":"Items per page: {0}","dxPager-pageSizesAllText":"All","dxPager-page":"Page {0}","dxPager-prevPage":"Previous Page","dxPager-nextPage":"Next Page","dxPager-ariaLabel":"Page Navigation","dxPager-ariaPageSize":"Page size","dxPager-ariaPageNumber":"Page number","dxPivotGrid-grandTotal":"Grand Total","dxPivotGrid-total":"{0} Total","dxPivotGrid-fieldChooserTitle":"Field Chooser","dxPivotGrid-showFieldChooser":"Show Field Chooser","dxPivotGrid-expandAll":"Expand All","dxPivotGrid-collapseAll":"Collapse All","dxPivotGrid-sortColumnBySummary":'Sort "{0}" by This Column',"dxPivotGrid-sortRowBySummary":'Sort "{0}" by This Row',"dxPivotGrid-removeAllSorting":"Remove All Sorting","dxPivotGrid-dataNotAvailable":"N/A","dxPivotGrid-rowFields":"Row Fields","dxPivotGrid-columnFields":"Column Fields","dxPivotGrid-dataFields":"Data Fields","dxPivotGrid-filterFields":"Filter Fields","dxPivotGrid-allFields":"All Fields","dxPivotGrid-columnFieldArea":"Drop Column Fields Here","dxPivotGrid-dataFieldArea":"Drop Data Fields Here","dxPivotGrid-rowFieldArea":"Drop Row Fields Here","dxPivotGrid-filterFieldArea":"Drop Filter Fields Here","dxScheduler-editorLabelTitle":"Subject","dxScheduler-editorLabelStartDate":"Start Date","dxScheduler-editorLabelEndDate":"End Date","dxScheduler-editorLabelDescription":"Description","dxScheduler-editorLabelRecurrence":"Repeat","dxScheduler-openAppointment":"Open appointment","dxScheduler-recurrenceNever":"Never","dxScheduler-recurrenceMinutely":"Every minute","dxScheduler-recurrenceHourly":"Hourly","dxScheduler-recurrenceDaily":"Daily","dxScheduler-recurrenceWeekly":"Weekly","dxScheduler-recurrenceMonthly":"Monthly","dxScheduler-recurrenceYearly":"Yearly","dxScheduler-recurrenceRepeatEvery":"Repeat Every","dxScheduler-recurrenceRepeatOn":"Repeat On","dxScheduler-recurrenceEnd":"End repeat","dxScheduler-recurrenceAfter":"After","dxScheduler-recurrenceOn":"On","dxScheduler-recurrenceRepeatMinutely":"minute(s)","dxScheduler-recurrenceRepeatHourly":"hour(s)","dxScheduler-recurrenceRepeatDaily":"day(s)","dxScheduler-recurrenceRepeatWeekly":"week(s)","dxScheduler-recurrenceRepeatMonthly":"month(s)","dxScheduler-recurrenceRepeatYearly":"year(s)","dxScheduler-switcherDay":"Day","dxScheduler-switcherWeek":"Week","dxScheduler-switcherWorkWeek":"Work Week","dxScheduler-switcherMonth":"Month","dxScheduler-switcherAgenda":"Agenda","dxScheduler-switcherTimelineDay":"Timeline Day","dxScheduler-switcherTimelineWeek":"Timeline Week","dxScheduler-switcherTimelineWorkWeek":"Timeline Work Week","dxScheduler-switcherTimelineMonth":"Timeline Month","dxScheduler-recurrenceRepeatOnDate":"on date","dxScheduler-recurrenceRepeatCount":"occurrence(s)","dxScheduler-allDay":"All day","dxScheduler-confirmRecurrenceEditTitle":"Edit Recurring Appointment","dxScheduler-confirmRecurrenceDeleteTitle":"Delete Recurring Appointment","dxScheduler-confirmRecurrenceEditMessage":"Do you want to edit only this appointment or the whole series?","dxScheduler-confirmRecurrenceDeleteMessage":"Do you want to delete only this appointment or the whole series?","dxScheduler-confirmRecurrenceEditSeries":"Edit series","dxScheduler-confirmRecurrenceDeleteSeries":"Delete series","dxScheduler-confirmRecurrenceEditOccurrence":"Edit appointment","dxScheduler-confirmRecurrenceDeleteOccurrence":"Delete appointment","dxScheduler-noTimezoneTitle":"No timezone","dxScheduler-moreAppointments":"{0} more","dxCalendar-currentDay":"Today","dxCalendar-currentMonth":"Current month","dxCalendar-currentYear":"Current year","dxCalendar-currentYearRange":"Current year range","dxCalendar-todayButtonText":"Today","dxCalendar-ariaWidgetName":"Calendar","dxCalendar-previousMonthButtonLabel":"Previous month","dxCalendar-previousYearButtonLabel":"Previous year","dxCalendar-previousDecadeButtonLabel":"Previous decade","dxCalendar-previousCenturyButtonLabel":"Previous century","dxCalendar-nextMonthButtonLabel":"Next month","dxCalendar-nextYearButtonLabel":"Next year","dxCalendar-nextDecadeButtonLabel":"Next decade","dxCalendar-nextCenturyButtonLabel":"Next century","dxCalendar-captionMonthLabel":"Month selection","dxCalendar-captionYearLabel":"Year selection","dxCalendar-captionDecadeLabel":"Decade selection","dxCalendar-captionCenturyLabel":"Century selection","dxCalendar-selectedDate":"The selected date is {0}","dxCalendar-selectedDateRange":"The selected date range is from {0} to {1}","dxColorView-ariaRed":"Red","dxColorView-ariaGreen":"Green","dxColorView-ariaBlue":"Blue","dxColorView-ariaAlpha":"Transparency","dxColorView-ariaHex":"Color code","dxTagBox-selected":"{0} selected","dxTagBox-allSelected":"All selected ({0})","dxTagBox-moreSelected":"{0} more","dxTagBox-tagRoleDescription":"Tag. Press the delete button to remove this tag","vizExport-printingButtonText":"Print","vizExport-titleMenuText":"Exporting/Printing","vizExport-exportButtonText":"{0} file","dxFilterBuilder-and":"And","dxFilterBuilder-or":"Or","dxFilterBuilder-notAnd":"Not And","dxFilterBuilder-notOr":"Not Or","dxFilterBuilder-addCondition":"Add Condition","dxFilterBuilder-addGroup":"Add Group","dxFilterBuilder-enterValueText":"<enter a value>","dxFilterBuilder-filterOperationEquals":"Equals","dxFilterBuilder-filterOperationNotEquals":"Does not equal","dxFilterBuilder-filterOperationLess":"Is less than","dxFilterBuilder-filterOperationLessOrEquals":"Is less than or equal to","dxFilterBuilder-filterOperationGreater":"Is greater than","dxFilterBuilder-filterOperationGreaterOrEquals":"Is greater than or equal to","dxFilterBuilder-filterOperationStartsWith":"Starts with","dxFilterBuilder-filterOperationContains":"Contains","dxFilterBuilder-filterOperationNotContains":"Does not contain","dxFilterBuilder-filterOperationEndsWith":"Ends with","dxFilterBuilder-filterOperationIsBlank":"Is blank","dxFilterBuilder-filterOperationIsNotBlank":"Is not blank","dxFilterBuilder-filterOperationBetween":"Is between","dxFilterBuilder-filterOperationAnyOf":"Is any of","dxFilterBuilder-filterOperationNoneOf":"Is none of","dxHtmlEditor-dialogColorCaption":"Change Font Color","dxHtmlEditor-dialogBackgroundCaption":"Change Background Color","dxHtmlEditor-dialogLinkCaption":"Add Link","dxHtmlEditor-dialogLinkUrlField":"URL","dxHtmlEditor-dialogLinkTextField":"Text","dxHtmlEditor-dialogLinkTargetField":"Open link in new window","dxHtmlEditor-dialogImageCaption":"Add Image","dxHtmlEditor-dialogImageUrlField":"URL","dxHtmlEditor-dialogImageAltField":"Alternate text","dxHtmlEditor-dialogImageWidthField":"Width (px)","dxHtmlEditor-dialogImageHeightField":"Height (px)","dxHtmlEditor-dialogInsertTableRowsField":"Rows","dxHtmlEditor-dialogInsertTableColumnsField":"Columns","dxHtmlEditor-dialogInsertTableCaption":"Insert Table","dxHtmlEditor-dialogUpdateImageCaption":"Update Image","dxHtmlEditor-dialogImageUpdateButton":"Update","dxHtmlEditor-dialogImageAddButton":"Add","dxHtmlEditor-dialogImageSpecifyUrl":"From the Web","dxHtmlEditor-dialogImageSelectFile":"From This Device","dxHtmlEditor-dialogImageKeepAspectRatio":"Keep Aspect Ratio","dxHtmlEditor-dialogImageEncodeToBase64":"Encode to Base64","dxHtmlEditor-heading":"Heading","dxHtmlEditor-normalText":"Normal text","dxHtmlEditor-background":"Background Color","dxHtmlEditor-bold":"Bold","dxHtmlEditor-color":"Font Color","dxHtmlEditor-font":"Font","dxHtmlEditor-italic":"Italic","dxHtmlEditor-link":"Add Link","dxHtmlEditor-image":"Add Image","dxHtmlEditor-size":"Size","dxHtmlEditor-strike":"Strikethrough","dxHtmlEditor-subscript":"Subscript","dxHtmlEditor-superscript":"Superscript","dxHtmlEditor-underline":"Underline","dxHtmlEditor-blockquote":"Blockquote","dxHtmlEditor-header":"Header","dxHtmlEditor-increaseIndent":"Increase Indent","dxHtmlEditor-decreaseIndent":"Decrease Indent","dxHtmlEditor-orderedList":"Ordered List","dxHtmlEditor-bulletList":"Bullet List","dxHtmlEditor-alignLeft":"Align Left","dxHtmlEditor-alignCenter":"Align Center","dxHtmlEditor-alignRight":"Align Right","dxHtmlEditor-alignJustify":"Align Justify","dxHtmlEditor-codeBlock":"Code Block","dxHtmlEditor-variable":"Add Variable","dxHtmlEditor-undo":"Undo","dxHtmlEditor-redo":"Redo","dxHtmlEditor-clear":"Clear Formatting","dxHtmlEditor-insertTable":"Insert Table","dxHtmlEditor-insertHeaderRow":"Insert Header Row","dxHtmlEditor-insertRowAbove":"Insert Row Above","dxHtmlEditor-insertRowBelow":"Insert Row Below","dxHtmlEditor-insertColumnLeft":"Insert Column Left","dxHtmlEditor-insertColumnRight":"Insert Column Right","dxHtmlEditor-deleteColumn":"Delete Column","dxHtmlEditor-deleteRow":"Delete Row","dxHtmlEditor-deleteTable":"Delete Table","dxHtmlEditor-cellProperties":"Cell Properties","dxHtmlEditor-tableProperties":"Table Properties","dxHtmlEditor-insert":"Insert","dxHtmlEditor-delete":"Delete","dxHtmlEditor-border":"Border","dxHtmlEditor-style":"Style","dxHtmlEditor-width":"Width","dxHtmlEditor-height":"Height","dxHtmlEditor-borderColor":"Color","dxHtmlEditor-borderWidth":"Border Width","dxHtmlEditor-tableBackground":"Background","dxHtmlEditor-dimensions":"Dimensions","dxHtmlEditor-alignment":"Alignment","dxHtmlEditor-horizontal":"Horizontal","dxHtmlEditor-vertical":"Vertical","dxHtmlEditor-paddingVertical":"Vertical Padding","dxHtmlEditor-paddingHorizontal":"Horizontal Padding","dxHtmlEditor-pixels":"Pixels","dxHtmlEditor-list":"List","dxHtmlEditor-ordered":"Ordered","dxHtmlEditor-bullet":"Bullet","dxHtmlEditor-align":"Align","dxHtmlEditor-center":"Center","dxHtmlEditor-left":"Left","dxHtmlEditor-right":"Right","dxHtmlEditor-indent":"Indent","dxHtmlEditor-justify":"Justify","dxHtmlEditor-borderStyleNone":"none","dxHtmlEditor-borderStyleHidden":"hidden","dxHtmlEditor-borderStyleDotted":"dotted","dxHtmlEditor-borderStyleDashed":"dashed","dxHtmlEditor-borderStyleSolid":"solid","dxHtmlEditor-borderStyleDouble":"double","dxHtmlEditor-borderStyleGroove":"groove","dxHtmlEditor-borderStyleRidge":"ridge","dxHtmlEditor-borderStyleInset":"inset","dxHtmlEditor-borderStyleOutset":"outset","dxFileManager-newDirectoryName":"Untitled directory","dxFileManager-rootDirectoryName":"Files","dxFileManager-errorNoAccess":"Access Denied. Operation could not be completed.","dxFileManager-errorDirectoryExistsFormat":"Directory '{0}' already exists.","dxFileManager-errorFileExistsFormat":"File '{0}' already exists.","dxFileManager-errorFileNotFoundFormat":"File '{0}' not found.","dxFileManager-errorDirectoryNotFoundFormat":"Directory '{0}' not found.","dxFileManager-errorWrongFileExtension":"File extension is not allowed.","dxFileManager-errorMaxFileSizeExceeded":"File size exceeds the maximum allowed size.","dxFileManager-errorInvalidSymbols":"This name contains invalid characters.","dxFileManager-errorDefault":"Unspecified error.","dxFileManager-errorDirectoryOpenFailed":"The directory cannot be opened","dxFileManager-commandCreate":"New directory","dxFileManager-commandRename":"Rename","dxFileManager-commandMove":"Move to","dxFileManager-commandCopy":"Copy to","dxFileManager-commandDelete":"Delete","dxFileManager-commandDownload":"Download","dxFileManager-commandUpload":"Upload files","dxFileManager-commandRefresh":"Refresh","dxFileManager-commandThumbnails":"Thumbnails View","dxFileManager-commandDetails":"Details View","dxFileManager-commandClearSelection":"Clear selection","dxFileManager-commandShowNavPane":"Toggle navigation pane","dxFileManager-dialogDirectoryChooserMoveTitle":"Move to","dxFileManager-dialogDirectoryChooserMoveButtonText":"Move","dxFileManager-dialogDirectoryChooserCopyTitle":"Copy to","dxFileManager-dialogDirectoryChooserCopyButtonText":"Copy","dxFileManager-dialogRenameItemTitle":"Rename","dxFileManager-dialogRenameItemButtonText":"Save","dxFileManager-dialogCreateDirectoryTitle":"New directory","dxFileManager-dialogCreateDirectoryButtonText":"Create","dxFileManager-dialogDeleteItemTitle":"Delete","dxFileManager-dialogDeleteItemButtonText":"Delete","dxFileManager-dialogDeleteItemSingleItemConfirmation":"Are you sure you want to delete {0}?","dxFileManager-dialogDeleteItemMultipleItemsConfirmation":"Are you sure you want to delete {0} items?","dxFileManager-dialogButtonCancel":"Cancel","dxFileManager-editingCreateSingleItemProcessingMessage":"Creating a directory inside {0}","dxFileManager-editingCreateSingleItemSuccessMessage":"Created a directory inside {0}","dxFileManager-editingCreateSingleItemErrorMessage":"Directory was not created","dxFileManager-editingCreateCommonErrorMessage":"Directory was not created","dxFileManager-editingRenameSingleItemProcessingMessage":"Renaming an item inside {0}","dxFileManager-editingRenameSingleItemSuccessMessage":"Renamed an item inside {0}","dxFileManager-editingRenameSingleItemErrorMessage":"Item was not renamed","dxFileManager-editingRenameCommonErrorMessage":"Item was not renamed","dxFileManager-editingDeleteSingleItemProcessingMessage":"Deleting an item from {0}","dxFileManager-editingDeleteMultipleItemsProcessingMessage":"Deleting {0} items from {1}","dxFileManager-editingDeleteSingleItemSuccessMessage":"Deleted an item from {0}","dxFileManager-editingDeleteMultipleItemsSuccessMessage":"Deleted {0} items from {1}","dxFileManager-editingDeleteSingleItemErrorMessage":"Item was not deleted","dxFileManager-editingDeleteMultipleItemsErrorMessage":"{0} items were not deleted","dxFileManager-editingDeleteCommonErrorMessage":"Some items were not deleted","dxFileManager-editingMoveSingleItemProcessingMessage":"Moving an item to {0}","dxFileManager-editingMoveMultipleItemsProcessingMessage":"Moving {0} items to {1}","dxFileManager-editingMoveSingleItemSuccessMessage":"Moved an item to {0}","dxFileManager-editingMoveMultipleItemsSuccessMessage":"Moved {0} items to {1}","dxFileManager-editingMoveSingleItemErrorMessage":"Item was not moved","dxFileManager-editingMoveMultipleItemsErrorMessage":"{0} items were not moved","dxFileManager-editingMoveCommonErrorMessage":"Some items were not moved","dxFileManager-editingCopySingleItemProcessingMessage":"Copying an item to {0}","dxFileManager-editingCopyMultipleItemsProcessingMessage":"Copying {0} items to {1}","dxFileManager-editingCopySingleItemSuccessMessage":"Copied an item to {0}","dxFileManager-editingCopyMultipleItemsSuccessMessage":"Copied {0} items to {1}","dxFileManager-editingCopySingleItemErrorMessage":"Item was not copied","dxFileManager-editingCopyMultipleItemsErrorMessage":"{0} items were not copied","dxFileManager-editingCopyCommonErrorMessage":"Some items were not copied","dxFileManager-editingUploadSingleItemProcessingMessage":"Uploading an item to {0}","dxFileManager-editingUploadMultipleItemsProcessingMessage":"Uploading {0} items to {1}","dxFileManager-editingUploadSingleItemSuccessMessage":"Uploaded an item to {0}","dxFileManager-editingUploadMultipleItemsSuccessMessage":"Uploaded {0} items to {1}","dxFileManager-editingUploadSingleItemErrorMessage":"Item was not uploaded","dxFileManager-editingUploadMultipleItemsErrorMessage":"{0} items were not uploaded","dxFileManager-editingUploadCanceledMessage":"Canceled","dxFileManager-editingDownloadSingleItemErrorMessage":"Item was not downloaded","dxFileManager-editingDownloadMultipleItemsErrorMessage":"{0} items were not downloaded","dxFileManager-listDetailsColumnCaptionName":"Name","dxFileManager-listDetailsColumnCaptionDateModified":"Date Modified","dxFileManager-listDetailsColumnCaptionFileSize":"File Size","dxFileManager-listThumbnailsTooltipTextSize":"Size","dxFileManager-listThumbnailsTooltipTextDateModified":"Date Modified","dxFileManager-notificationProgressPanelTitle":"Progress","dxFileManager-notificationProgressPanelEmptyListText":"No operations","dxFileManager-notificationProgressPanelOperationCanceled":"Canceled","dxDiagram-categoryGeneral":"General","dxDiagram-categoryFlowchart":"Flowchart","dxDiagram-categoryOrgChart":"Org Chart","dxDiagram-categoryContainers":"Containers","dxDiagram-categoryCustom":"Custom","dxDiagram-commandExportToSvg":"Export to SVG","dxDiagram-commandExportToPng":"Export to PNG","dxDiagram-commandExportToJpg":"Export to JPEG","dxDiagram-commandUndo":"Undo","dxDiagram-commandRedo":"Redo","dxDiagram-commandFontName":"Font Name","dxDiagram-commandFontSize":"Font Size","dxDiagram-commandBold":"Bold","dxDiagram-commandItalic":"Italic","dxDiagram-commandUnderline":"Underline","dxDiagram-commandTextColor":"Font Color","dxDiagram-commandLineColor":"Line Color","dxDiagram-commandLineWidth":"Line Width","dxDiagram-commandLineStyle":"Line Style","dxDiagram-commandLineStyleSolid":"Solid","dxDiagram-commandLineStyleDotted":"Dotted","dxDiagram-commandLineStyleDashed":"Dashed","dxDiagram-commandFillColor":"Fill Color","dxDiagram-commandAlignLeft":"Align Left","dxDiagram-commandAlignCenter":"Align Center","dxDiagram-commandAlignRight":"Align Right","dxDiagram-commandConnectorLineType":"Connector Line Type","dxDiagram-commandConnectorLineStraight":"Straight","dxDiagram-commandConnectorLineOrthogonal":"Orthogonal","dxDiagram-commandConnectorLineStart":"Connector Line Start","dxDiagram-commandConnectorLineEnd":"Connector Line End","dxDiagram-commandConnectorLineNone":"None","dxDiagram-commandConnectorLineArrow":"Arrow","dxDiagram-commandFullscreen":"Full Screen","dxDiagram-commandUnits":"Units","dxDiagram-commandPageSize":"Page Size","dxDiagram-commandPageOrientation":"Page Orientation","dxDiagram-commandPageOrientationLandscape":"Landscape","dxDiagram-commandPageOrientationPortrait":"Portrait","dxDiagram-commandPageColor":"Page Color","dxDiagram-commandShowGrid":"Show Grid","dxDiagram-commandSnapToGrid":"Snap to Grid","dxDiagram-commandGridSize":"Grid Size","dxDiagram-commandZoomLevel":"Zoom Level","dxDiagram-commandAutoZoom":"Auto Zoom","dxDiagram-commandFitToContent":"Fit to Content","dxDiagram-commandFitToWidth":"Fit to Width","dxDiagram-commandAutoZoomByContent":"Auto Zoom by Content","dxDiagram-commandAutoZoomByWidth":"Auto Zoom by Width","dxDiagram-commandSimpleView":"Simple View","dxDiagram-commandCut":"Cut","dxDiagram-commandCopy":"Copy","dxDiagram-commandPaste":"Paste","dxDiagram-commandSelectAll":"Select All","dxDiagram-commandDelete":"Delete","dxDiagram-commandBringToFront":"Bring to Front","dxDiagram-commandSendToBack":"Send to Back","dxDiagram-commandLock":"Lock","dxDiagram-commandUnlock":"Unlock","dxDiagram-commandInsertShapeImage":"Insert Image...","dxDiagram-commandEditShapeImage":"Change Image...","dxDiagram-commandDeleteShapeImage":"Delete Image","dxDiagram-commandLayoutLeftToRight":"Left-to-right","dxDiagram-commandLayoutRightToLeft":"Right-to-left","dxDiagram-commandLayoutTopToBottom":"Top-to-bottom","dxDiagram-commandLayoutBottomToTop":"Bottom-to-top","dxDiagram-unitIn":"in","dxDiagram-unitCm":"cm","dxDiagram-unitPx":"px","dxDiagram-dialogButtonOK":"OK","dxDiagram-dialogButtonCancel":"Cancel","dxDiagram-dialogInsertShapeImageTitle":"Insert Image","dxDiagram-dialogEditShapeImageTitle":"Change Image","dxDiagram-dialogEditShapeImageSelectButton":"Select image","dxDiagram-dialogEditShapeImageLabelText":"or drop a file here","dxDiagram-uiExport":"Export","dxDiagram-uiProperties":"Properties","dxDiagram-uiSettings":"Settings","dxDiagram-uiShowToolbox":"Show Toolbox","dxDiagram-uiSearch":"Search","dxDiagram-uiStyle":"Style","dxDiagram-uiLayout":"Layout","dxDiagram-uiLayoutTree":"Tree","dxDiagram-uiLayoutLayered":"Layered","dxDiagram-uiDiagram":"Diagram","dxDiagram-uiText":"Text","dxDiagram-uiObject":"Object","dxDiagram-uiConnector":"Connector","dxDiagram-uiPage":"Page","dxDiagram-shapeText":"Text","dxDiagram-shapeRectangle":"Rectangle","dxDiagram-shapeEllipse":"Ellipse","dxDiagram-shapeCross":"Cross","dxDiagram-shapeTriangle":"Triangle","dxDiagram-shapeDiamond":"Diamond","dxDiagram-shapeHeart":"Heart","dxDiagram-shapePentagon":"Pentagon","dxDiagram-shapeHexagon":"Hexagon","dxDiagram-shapeOctagon":"Octagon","dxDiagram-shapeStar":"Star","dxDiagram-shapeArrowLeft":"Left Arrow","dxDiagram-shapeArrowUp":"Up Arrow","dxDiagram-shapeArrowRight":"Right Arrow","dxDiagram-shapeArrowDown":"Down Arrow","dxDiagram-shapeArrowUpDown":"Up Down Arrow","dxDiagram-shapeArrowLeftRight":"Left Right Arrow","dxDiagram-shapeProcess":"Process","dxDiagram-shapeDecision":"Decision","dxDiagram-shapeTerminator":"Terminator","dxDiagram-shapePredefinedProcess":"Predefined Process","dxDiagram-shapeDocument":"Document","dxDiagram-shapeMultipleDocuments":"Multiple Documents","dxDiagram-shapeManualInput":"Manual Input","dxDiagram-shapePreparation":"Preparation","dxDiagram-shapeData":"Data","dxDiagram-shapeDatabase":"Database","dxDiagram-shapeHardDisk":"Hard Disk","dxDiagram-shapeInternalStorage":"Internal Storage","dxDiagram-shapePaperTape":"Paper Tape","dxDiagram-shapeManualOperation":"Manual Operation","dxDiagram-shapeDelay":"Delay","dxDiagram-shapeStoredData":"Stored Data","dxDiagram-shapeDisplay":"Display","dxDiagram-shapeMerge":"Merge","dxDiagram-shapeConnector":"Connector","dxDiagram-shapeOr":"Or","dxDiagram-shapeSummingJunction":"Summing Junction","dxDiagram-shapeContainerDefaultText":"Container","dxDiagram-shapeVerticalContainer":"Vertical Container","dxDiagram-shapeHorizontalContainer":"Horizontal Container","dxDiagram-shapeCardDefaultText":"Person's Name","dxDiagram-shapeCardWithImageOnLeft":"Card with Image on the Left","dxDiagram-shapeCardWithImageOnTop":"Card with Image on the Top","dxDiagram-shapeCardWithImageOnRight":"Card with Image on the Right","dxGantt-dialogTitle":"Title","dxGantt-dialogStartTitle":"Start","dxGantt-dialogEndTitle":"End","dxGantt-dialogProgressTitle":"Progress","dxGantt-dialogResourcesTitle":"Resources","dxGantt-dialogResourceManagerTitle":"Resource Manager","dxGantt-dialogTaskDetailsTitle":"Task Details","dxGantt-dialogEditResourceListHint":"Edit Resource List","dxGantt-dialogEditNoResources":"No resources","dxGantt-dialogButtonAdd":"Add","dxGantt-contextMenuNewTask":"New Task","dxGantt-contextMenuNewSubtask":"New Subtask","dxGantt-contextMenuDeleteTask":"Delete Task","dxGantt-contextMenuDeleteDependency":"Delete Dependency","dxGantt-dialogTaskDeleteConfirmation":"Deleting a task also deletes all its dependencies and subtasks. Are you sure you want to delete this task?","dxGantt-dialogDependencyDeleteConfirmation":"Are you sure you want to delete the dependency from the task?","dxGantt-dialogResourcesDeleteConfirmation":"Deleting a resource also deletes it from tasks to which this resource is assigned. Are you sure you want to delete these resources? Resources: {0}","dxGantt-dialogConstraintCriticalViolationMessage":"The task you are attempting to move is linked to a second task by a dependency relation. This change would conflict with dependency rules. How would you like to proceed?","dxGantt-dialogConstraintViolationMessage":"The task you are attempting to move is linked to a second task by a dependency relation. How would you like to proceed?","dxGantt-dialogCancelOperationMessage":"Cancel the operation","dxGantt-dialogDeleteDependencyMessage":"Delete the dependency","dxGantt-dialogMoveTaskAndKeepDependencyMessage":"Move the task and keep the dependency","dxGantt-dialogConstraintCriticalViolationSeveralTasksMessage":"The task you are attempting to move is linked to another tasks by dependency relations. This change would conflict with dependency rules. How would you like to proceed?","dxGantt-dialogConstraintViolationSeveralTasksMessage":"The task you are attempting to move is linked to another tasks by dependency relations. How would you like to proceed?","dxGantt-dialogDeleteDependenciesMessage":"Delete the dependency relations","dxGantt-dialogMoveTaskAndKeepDependenciesMessage":"Move the task and keep the dependencies","dxGantt-undo":"Undo","dxGantt-redo":"Redo","dxGantt-expandAll":"Expand All","dxGantt-collapseAll":"Collapse All","dxGantt-addNewTask":"Add New Task","dxGantt-deleteSelectedTask":"Delete Selected Task","dxGantt-zoomIn":"Zoom In","dxGantt-zoomOut":"Zoom Out","dxGantt-fullScreen":"Full Screen","dxGantt-quarter":"Q{0}","dxGantt-sortingAscendingText":"Sort Ascending","dxGantt-sortingDescendingText":"Sort Descending","dxGantt-sortingClearText":"Clear Sorting","dxGantt-showResources":"Show Resources","dxGantt-showDependencies":"Show Dependencies","dxGantt-dialogStartDateValidation":"Start date must be after {0}","dxGantt-dialogEndDateValidation":"End date must be after {0}","dxGallery-itemName":"Gallery item","dxMultiView-elementAriaRoleDescription":"MultiView","dxMultiView-elementAriaLabel":"Use the arrow keys or swipe to navigate between views","dxMultiView-itemAriaRoleDescription":"View","dxMultiView-itemAriaLabel":"{0} of {1}","dxSplitter-resizeHandleAriaLabel":"Split bar"}},TD=Y(!0,{},ID),DD=(i,e)=>{var t;return i[e]||(e==null?void 0:e.toLowerCase)&&((t=Object.entries(i).find(n=>{let[s]=n;return s.toLowerCase()===e.toLowerCase()}))===null||t===void 0?void 0:t[1])||{}},eh={},re=qn({engine:function(){return"base"},_dictionary:TD,load:function(i){Y(!0,this._dictionary,i)},_localizablePrefix:"@",setup:function(i){this._localizablePrefix=i},localizeString:function(i){const e=this,t=new RegExp("(^|[^a-zA-Z_0-9"+e._localizablePrefix+"-]+)("+e._localizablePrefix+"{1,2})([a-zA-Z_0-9-]+)","g"),n=e._localizablePrefix+e._localizablePrefix;return i.replace(t,(s,o,r,a)=>{const l=e._localizablePrefix+a;let d;return r!==n&&(d=e.format(a)),d||(eh[a]=cD(a)),o+(d||l)})},getMessagesByLocales:function(){return this._dictionary},getDictionary:function(i){return i?eh:Y({},eh,this.getMessagesByLocales()[Kn.locale()])},getFormatter:function(i){return this._getFormatterBase(i)||this._getFormatterBase(i,"en")},_getFormatterBase:function(i,e){const t=Kn.getValueByClosestLocale(n=>DD(this._dictionary,n)[i]);if(t)return function(){const n=arguments.length===1&&Array.isArray(arguments[0])?arguments[0].slice(0):Array.prototype.slice.call(arguments,0);return n.unshift(t),vs.apply(this,n)}},format:function(i){const e=this.getFormatter(i),t=Array.prototype.slice.call(arguments,1);return e&&e.apply(this,t)||""}}),Mp=(i,e)=>{if(!e)throw Pt.Error("E0017");return Array.isArray(i)?i.map(t=>Mp(t,e)).join(" "):i.indexOf(" ")!==-1?Mp(i.split(/\s+/g),e):`${i}.${e}`},jC=function(i,e){if(!AD(i))return!1;const t=i.nodeName.toLowerCase(),n=!isNaN(e),s=i.disabled,o=/^(input|select|textarea|button|object|iframe)$/.test(t),r=t==="a";let a;const l=i.isContentEditable;return o||l?a=!s:r?a=i.href||n:a=n,a};function AD(i){const e=R(i);return e.is(":visible")&&e.css("visibility")!=="hidden"&&e.parents().css("visibility")!=="hidden"}const Pp=function(i,e){return jC(e,R(e).attr("tabIndex"))},x_=function(i,e){const t=R(e).attr("tabIndex");return(isNaN(t)||t>=0)&&jC(e,t)},To=function(i){const e=R(i).get(0);return _e.getActiveElement(e)===e},kD={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space",f:"F",a:"A","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift"},OD={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",70:"F",65:"A",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},RD={dx:/^dx/i,mouse:/(mouse|wheel)/i,touch:/^touch/i,keyboard:/^key/i,pointer:/^(ms)?pointer/i};let MD=i=>i;const PD=i=>MD(q.Event(i,i)),dm=i=>Fl(i)==="dx",BD=i=>Fl(i)==="mouse",KC=i=>Fl(i)==="touch",Fl=i=>{let{type:e}=i,t="other";return ie(RD,function(n){if(this.test(e))return t=n,!1}),t},GC=i=>Fl(i)==="pointer",ur=i=>BD(i)||(GC(i)||dm(i))&&i.pointerType==="mouse",an=i=>i&&i.type==="dxmousewheel",Vl=i=>KC(i)||(GC(i)||dm(i))&&i.pointerType==="touch",pi=i=>{let{pageX:e,pageY:t,timeStamp:n}=i;return{x:e,y:t,time:n}},Jo=(i,e)=>({x:e.x-i.x,y:e.y-i.y,time:e.time-i.time||1}),FD=i=>{const{originalEvent:e,pointers:t}=i;return KC(i)?(e.touches||[]).length:dm(i)?(t||[]).length:0},UC=i=>{const{target:e}=i,t=R(e),n=(e==null?void 0:e.isContentEditable)||(e==null?void 0:e.hasAttribute("contenteditable")),s=t.is("input, textarea, select")||n;if(an(i))return t.is("textarea")&&t.hasClass("dx-texteditor-input")||n?!1:t.is("input[type='number'], textarea, select")&&t.is(":focus");if(ur(i))return s||i.which>1;if(Vl(i))return s&&To(t)},bo=(i,e)=>{const t=PD(i);return e&&Y(t,e),t},Mo=i=>{const{originalEvent:e,delegateTarget:t}=i,n=bo(e,i);return q.trigger(t||n.target,n),n},oi=i=>{let{key:e,which:t}=i;const n=kD[e==null?void 0:e.toLowerCase()]||e,s=OD[t];return s&&n===e?s:!n&&t?String.fromCharCode(t):n},Bp=i=>{let{key:e,which:t}=i;return e||String.fromCharCode(t)},be=Mp,ki=i=>{let{ctrlKey:e,metaKey:t}=i;return e||t},Fp="dx-state-focused",VD="dx-cell-focus-disabled",qC=".dx-datagrid-rowsview .dx-row",w_=`${qC} > td`,YC=".dx-treelist-rowsview .dx-row",S_=`${YC} > td`,E_={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:[".dx-row-focused",`${qC}[tabindex]`,`${w_}[tabindex]`,`${w_}`,`${YC}[tabindex]`,`${S_}[tabindex]`,`${S_}`],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]};let th=!1,Rc=!1,Zr=null;function ND(i,e,t,n,s,o){if($D(e,t.originalEvent,o))return;const a=oi(t);a==="enter"||a==="space"?(XC(t.target,e),n&&n({event:t})):a==="tab"?s.addClass(Fp):um(i,e,t)}function XC(i,e){const t=R(i),n=t.attr("aria-label"),o=ZC(n,e.element()).index(t);Zr=Y({},{ariaLabel:n,index:o},{viewInstance:e})}function ZC(i,e){const t=R(e);let n;if(i){const s=i==null?void 0:i.replace(/"/g,'\\"');n=t.find(`[aria-label="${s}"][tabindex]`)}else n=t.find("[tabindex]");return n}function LD(i,e){const t=(e==null?void 0:e.getRootNode())||_e.getDocument();for(const n in i){const s=i[n],o=R(t).find(s).first();if(o.length)return o}}function $D(i,e,t){const n={event:e,handled:!1};return t?t(n):i._createActionByOption("onKeyDown")(n),n.handled}function JC(){Rc=_e.getDocument().visibilityState==="visible"}function HD(){q.on(_e.getDocument(),"visibilitychange",JC)}function I_(){q.off(_e.getDocument(),"visibilitychange",JC)}function zD(i,e){Rc=!0,i.focus({preventScroll:e}),Rc=!1}function QC(i,e,t,n,s,o){if(e.option("useLegacyKeyboardNavigation"))return ue;const r=()=>R(e.element()),a=c=>ND(i,e,c,s,r(),o),l=()=>{th=!0,r().removeClass(Fp)},d=()=>{!th&&!Rc&&r().addClass(Fp),th=!1};return q.on(t,"keydown",n,a),q.on(t,"mousedown",n,l),q.on(t,"focusin",n,d),()=>{q.off(t,"keydown",n,a),q.off(t,"mousedown",n,l),q.off(t,"focusin",n,d)}}function cm(i){if(!i.option("useLegacyKeyboardNavigation")&&Zr){const e=Zr.viewInstance;if(e){const n=ZC(Zr.ariaLabel,e.element()).eq(Zr.index);Zr=null,q.trigger(n,"focus")}}}function um(i,e,t){const n=oi(t);if(t.ctrlKey&&(n==="upArrow"||n==="downArrow")){const s=Object.keys(E_);let o=s.indexOf(i);for(;o>=0&&o<s.length;){o=n==="upArrow"?--o:++o;const r=s[o],a=E_[r],l=LD(a,t.target);if(l&&l.length){l.attr("tabindex",e.option("tabindex")||0),q.trigger(l,"focus"),l.removeClass(VD);break}}}}function WD(i,e){i.option("useLegacyKeyboardnavigation")||e.attr("tabindex",i.option("tabindex")||0)}const el=function(i,e,t,n,s){const o=e.getController("keyboardNavigation");e.option("useLegacyKeyboardNavigation")||o&&!o.isKeyboardEnabled()||(e.createAction("onKeyDown"),QC(i,e,t,n,s,r=>{e.executeAction("onKeyDown",r)}))};function jD(i){return i&&i.get?i.get(0):i}let KD=jD;function ze(i){return KD(i)}const GD=Pl(),UD=/(webkit)[ /]([\w.]+)/,qD=/(mozilla)(?:.*? rv:([\w.]+))/,T_=i=>{i=i.toLowerCase();const e={},t=UD.exec(i)||i.indexOf("compatible")<0&&qD.exec(i)||[];let n=t[1],s=t[2];return n==="webkit"&&(e.webkit=!0,i.indexOf("chrome")>=0||i.indexOf("crios")>=0?(n="chrome",s=/(?:chrome|crios)\/(\d+\.\d+)/.exec(i),s=s&&s[1]):i.indexOf("fxios")>=0?(n="mozilla",s=/fxios\/(\d+\.\d+)/.exec(i),s=s&&s[1]):i.indexOf("safari")>=0&&/version|phantomjs/.test(i)?(n="safari",s=/(?:version|phantomjs)\/([0-9.]+)/.exec(i),s=s&&s[1]):(n="unknown",s=/applewebkit\/([0-9.]+)/.exec(i),s=s&&s[1])),n&&(e[n]=!0,e.version=s),e},Zt=Y({_fromUA:T_},T_(GD.userAgent)),Po=i=>i??$t().rtlEnabled?"right":"left",yi=i=>gi(i)?{width:i.outerWidth,height:i.outerHeight}:i.getBoundingClientRect();let ih=[];const YD=Js(()=>{const i=_e.listen(_e.getDocument(),"DOMContentLoaded",()=>{ex.fire(),i()})}),ex={add:i=>{const e=qe();e&&_e.getReadyState()!=="loading"?i():(ih.push(i),e&&YD())},fire:()=>{ih.forEach(i=>i()),ih=[]}},ws=qn(ex),hr=function(){let i;const e=Tt(),t=e.add,n=e.remove;if(!qe())return e;const s=function(){const l=Je();return{width:l.innerWidth,height:l.innerHeight}},o=function(){const l=s();if(l.width===i.width&&l.height===i.height)return;let d;l.width===i.width&&(d="height"),l.height===i.height&&(d="width"),i=l,e.fire(d)},r=Js(function(){i=s()});let a;return e.add=function(){const l=t.apply(e,arguments);return r(),ws.add(function(){!a&&e.has()&&(a=_e.listen(Je(),"resize",o))}),l},e.remove=function(){const l=n.apply(e,arguments);return!e.has()&&a&&(a(),a=void 0),l},e}();class wr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._events={},this._owner=e,this._options=t}static create(e,t){return t?Ee(t)?t(e):t:new wr(e)}hasEvent(e){const t=this._events[e];return t?t.has():!1}fireEvent(e,t){const n=this._events[e];return n&&n.fireWith(this._owner,t),this._owner}on(e,t){if(ht(e))ie(e,(n,s)=>{this.on(n,s)});else{let n=this._events[e];n||(n=Tt({syncStrategy:this._options.syncStrategy}),this._events[e]=n),(n.originalAdd||n.add).call(n,t)}}off(e,t){const n=this._events[e];n&&(Ee(t)?n.remove(t):n.empty())}dispose(){ie(this._events,(e,t)=>{t.empty()})}}const XD=Je(),tx=function(){let i;try{i=XD.sessionStorage}catch{}return i},ZD=ws.add,fu=Tt();let ix=R();const Do=function(){let i;return function(e){if(!arguments.length)return i;const t=R(e);ix=t;const n=!!t.length,s=Do();i=n?t:R("body"),fu.fire(n?Do():R(),s)}}();ZD(function(){Do(".dx-viewport")});function nx(){return ix}const sx=Je(),JD={iPhone:"iPhone",iPhone5:"iPhone",iPhone6:"iPhone",iPhone6plus:"iPhone",iPad:"iPad",iPadMini:"iPad Mini",androidPhone:"Android Mobile",androidTablet:"Android",msSurface:"Windows ARM Tablet PC",desktop:"desktop"},D_={deviceType:"desktop",platform:"generic",version:[],phone:!1,tablet:!1,android:!1,ios:!1,generic:!0,grade:"A",mac:!1},nh={generic(i){const e=/windows phone/i.test(i)||i.match(/WPDesktop/),t=!e&&/Windows(.*)arm(.*)Tablet PC/i.test(i),n=!e&&!t&&/msapphost/i.test(i),s=/((intel|ppc) mac os x)/.test(i.toLowerCase());return e||t||n||s?{deviceType:e?"phone":t?"tablet":"desktop",platform:"generic",version:[],grade:"A",mac:s}:null},appleTouchDevice(i){const e=Pl(),t=/Macintosh/i.test(i)&&(e==null?void 0:e.maxTouchPoints)>2;if(!/ip(hone|od|ad)/i.test(i)&&!t)return null;const s=/ip(hone|od)/i.test(i),o=i.match(/os\s{0,}X? (\d+)_(\d+)_?(\d+)?/i),r=o?[parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3]||0,10)]:[],l=sx.screen.height===480?"B":"A";return{deviceType:s?"phone":"tablet",platform:"ios",version:r,grade:l}},android(i){const e=/android|htc_|silk/i.test(i),t=/windows phone/i.test(i);if(!e||t)return null;const n=/mobile/i.test(i),s=i.match(/android (\d+)\.?(\d+)?\.?(\d+)?/i),o=s?[parseInt(s[1],10),parseInt(s[2]||0,10),parseInt(s[3]||0,10)]:[],a=o.length>1&&(o[0]<4||o[0]===4&&o[1]<4)?"B":"A";return{deviceType:n?"phone":"tablet",platform:"android",version:o,grade:a}}},A_=[nh.appleTouchDevice,nh.android,nh.generic];class QD{constructor(e){this._window=(e==null?void 0:e.window)||sx,this._realDevice=this._getDevice(),this._currentDevice=void 0,this._currentOrientation=void 0,this._eventsStrategy=new wr(this),this.changed=Tt(),qe()&&(ws.add(this._recalculateOrientation.bind(this)),hr.add(this._recalculateOrientation.bind(this)))}current(e){if(e){this._currentDevice=this._getDevice(e),this._forced=!0,this.changed.fire();return}if(!this._currentDevice){e=void 0;try{e=this._getDeviceOrNameFromWindowScope()}catch{e=this._getDeviceNameFromSessionStorage()}finally{e||(e=this._getDeviceNameFromSessionStorage()),e&&(this._forced=!0)}this._currentDevice=this._getDevice(e)}return this._currentDevice}real(e){return Y({},this._realDevice)}orientation(){return this._currentOrientation}isForced(){return this._forced}isRippleEmulator(){return!!this._window.tinyHippos}_getCssClasses(e){const t=[],n=this._realDevice;return e=e||this.current(),e.deviceType&&(t.push(`dx-device-${e.deviceType}`),e.deviceType!=="desktop"&&t.push("dx-device-mobile")),t.push(`dx-device-${n.platform}`),n.version&&n.version.length&&t.push(`dx-device-${n.platform}-${n.version[0]}`),this.isSimulator()&&t.push("dx-simulator"),$t().rtlEnabled&&t.push("dx-rtl"),t}attachCssClasses(e,t){this._deviceClasses=this._getCssClasses(t).join(" "),R(e).addClass(this._deviceClasses)}detachCssClasses(e){R(e).removeClass(this._deviceClasses)}isSimulator(){try{return this._isSimulator||qe()&&this._window.top!==this._window.self&&this._window.top["dx-force-device"]||this.isRippleEmulator()}catch{return!1}}forceSimulator(){this._isSimulator=!0}_getDevice(e){if(e==="genericPhone"&&(e={deviceType:"phone",platform:"generic",generic:!0}),ht(e))return this._fromConfig(e);{let t;if(e){if(t=JD[e],!t)throw Pt.Error("E0005")}else t=Pl().userAgent;return this._fromUA(t)}}_getDeviceOrNameFromWindowScope(){let e;return qe()&&(this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"])&&(e=this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"]),e}_getDeviceNameFromSessionStorage(){const e=tx();if(!e)return;const t=e.getItem("dx-force-device");try{return JSON.parse(t)}catch{return t}}_fromConfig(e){const t=Y({},D_,this._currentDevice,e),n={phone:t.deviceType==="phone",tablet:t.deviceType==="tablet",android:t.platform==="android",ios:t.platform==="ios",generic:t.platform==="generic"};return Y(t,n)}_fromUA(e){for(let t=0;t<A_.length;t+=1){const n=A_[t],s=n(e);if(s)return this._fromConfig(s)}return D_}_changeOrientation(){const e=R(this._window),t=st(e)>Ge(e)?"portrait":"landscape";this._currentOrientation!==t&&(this._currentOrientation=t,this._eventsStrategy.fireEvent("orientationChanged",[{orientation:t}]))}_recalculateOrientation(){const e=Ge(this._window);this._currentWidth!==e&&(this._currentWidth=e,this._changeOrientation())}on(e,t){return this._eventsStrategy.on(e,t),this}off(e,t){return this._eventsStrategy.off(e,t),this}}const Re=new QD,k_=Do();k_&&Re.attachCssClasses(k_);fu.add((i,e)=>{Re.detachCssClasses(e),Re.attachCssClasses(i)});const{maxTouchPoints:ox}=Pl(),eA={webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},hm=function(i){return!!xr(i)},tA=function(){const{platform:i,mac:e}=Re.real();return i==="ios"||i==="android"||e},mu=function(i){if(i==="text")return!0;const e=_e.createElement("input");try{return e.setAttribute("type",i),e.value="wrongValue",!e.value}catch{return!1}},iA=function(i,e){return(i("ontouchstart")||!!e)&&!i("callPhantom")},nA=function(i){return i("PointerEvent")},rx=iA(SC,ox),ax=nA(SC),sA=!!ox,pr=rx||ax&&sA,Vp=Js(function(){return hm("transition")}),lx=Js(function(){return eA[xr("transition")]}),Np=Js(function(){return hm("animation")}),fr=tA(),oA=Object.freeze(Object.defineProperty({__proto__:null,animation:Np,inputType:mu,nativeScrolling:fr,pointerEvents:ax,styleProp:xr,stylePropPrefix:ac,supportProp:hm,touch:pr,touchEvents:rx,transition:Vp,transitionEndEventName:lx},Symbol.toStringTag,{value:"Module"})),pm=Je(),rA=i=>{if(!i.getRootNode)return;const e=i.getRootNode().host;if(!Ke(e))return e},Ca=()=>{const i=_e.getActiveElement();if(i&&i!==_e.getBody()){var e;(e=i.blur)===null||e===void 0||e.call(i)}},aA=()=>{const i=pm.getSelection();if(i&&i.type!=="Caret"){if(i.empty)i.empty();else if(i.removeAllRanges)try{i.removeAllRanges()}catch{}}},lA=(i,e)=>{const t=R(i),n=R(e);if(t[0]===n[0])return t[0];const s=t.parents(),o=n.parents(),r=Math.min(s.length,o.length);for(let a=-r;a<0;a++)if(s.get(a)===o.get(a))return s.get(a)},gu=i=>{let e=U(i)&&(i.nodeType||Cn(i))?R(i):R("<div>").html(i).contents();return e.length===1&&(e.is("script")?e=gu(e.html().trim()):e.is("table")&&(e=e.children("tbody").contents())),e},Lp=(i,e)=>{const t=i.originalEvent&&i.originalEvent.clipboardData||pm.clipboardData;if(!e)return t&&t.getData("Text");t&&t.setData("Text",e)},ms=(i,e)=>e?gi(i)?ms(i.document,e):i.contains(e)||ms(i,rA(e)):!1,dA=(i,e,t)=>{const n=pm.getComputedStyle(R(i).get(0)),s=t&&t.includePaddings;return R("<div>").text(e).css({fontStyle:n.fontStyle,fontVariant:n.fontVariant,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFamily:n.fontFamily,letterSpacing:n.letterSpacing,border:n.border,paddingTop:s?n.paddingTop:"",paddingRight:s?n.paddingRight:"",paddingBottom:s?n.paddingBottom:"",paddingLeft:s?n.paddingLeft:"",visibility:"hidden",whiteSpace:"pre",position:"absolute",float:"left"})},cA=(i,e)=>(e&&_e.insertElement(i.parentNode,e,i),i),uA=(i,e)=>{if(e&&e[0])return e.is(i)?i:(ie(e,(t,n)=>{cA(i[0],n)}),i.remove(),e)},_u=i=>{const e=i==null?void 0:i.get(0),t=e==null?void 0:e.getRootNode().host;return!!R(t||e).closest(Je().document).length},$n=qe()?Je():{};let dx=function(i){return setTimeout(i,16.666666666666668)},cx=function(i){clearTimeout(i)};const ux=Js(function(){const i=$n.requestAnimationFrame||$n.webkitRequestAnimationFrame||$n.mozRequestAnimationFrame||$n.oRequestAnimationFrame||$n.msRequestAnimationFrame,e=$n.cancelAnimationFrame||$n.webkitCancelAnimationFrame||$n.mozCancelAnimationFrame||$n.oCancelAnimationFrame||$n.msCancelAnimationFrame;i&&e&&(dx=i,cx=e)});function Mc(){return ux(),dx.apply($n,arguments)}function Fs(){ux(),cx.apply($n,arguments)}const Yn=function(i,e){const t={};"noBubble"in e&&(t.noBubble=e.noBubble),"bindType"in e&&(t.bindType=e.bindType),"delegateType"in e&&(t.delegateType=e.delegateType),ie(["setup","teardown","add","remove","trigger","handle","_default","dispose"],function(n,s){e[s]&&(t[s]=function(){const o=[].slice.call(arguments);return o.unshift(this),e[s].apply(e,o)})}),Zf.fire(i,t)};Yn.callbacks=Zf;const Rn="dxremove",$p="dxRemoveEvent";dD(function(i){i=[].slice.call(i);for(let e=0;e<i.length;e++){const t=R(i[e]);t.prop($p)&&(t[0][$p]=null,q.triggerHandler(t,"dxremove"))}});Yn("dxremove",{noBubble:!0,setup:function(i){R(i).prop($p,!0)}});function hx(i){return i&&[i.target,i.delegateTarget,i.relatedTarget,i.currentTarget].filter(e=>!!e)}const hA=(i,e)=>{q.one(hx(i),Rn,e)},pA=(i,e)=>{q.off(hx(i),Rn,e)},fm=Lt.inherit({ctor:function(i,e){this._eventName=i,this._originalEvents=be(e,"dxPointerEvents"),this._handlerCount=0,this.noBubble=this._isNoBubble()},_isNoBubble:function(){const i=this._eventName;return i==="dxpointerenter"||i==="dxpointerleave"},_handler:function(i){const e=this._getDelegateTarget(i),t={type:this._eventName,pointerType:i.pointerType||Fl(i),originalEvent:i,delegateTarget:e,timeStamp:Zt.mozilla?new Date().getTime():i.timeStamp},n=Jf(i);return t.target=n,this._fireEvent(t)},_getDelegateTarget:function(i){let e;return this.noBubble&&(e=i.delegateTarget),e},_fireEvent:function(i){return Mo(i)},_setSelector:function(i){this._selector=this.noBubble&&i?i.selector:null},_getSelector:function(){return this._selector},setup:function(){return!0},add:function(i,e){if(this._handlerCount<=0||this.noBubble){i=this.noBubble?i:_e.getDocument(),this._setSelector(e);const t=this;q.on(i,this._originalEvents,this._getSelector(),function(n){t._handler(n)})}this.noBubble||this._handlerCount++},remove:function(i){this._setSelector(i),this.noBubble||this._handlerCount--},teardown:function(i){this._handlerCount&&!this.noBubble||(i=this.noBubble?i:_e.getDocument(),this._originalEvents!==".dxPointerEvents"&&q.off(i,this._originalEvents,this._getSelector()))},dispose:function(i){i=this.noBubble?i:_e.getDocument(),q.off(i,this._originalEvents)}}),fA={dxpointerdown:"touchstart",dxpointermove:"touchmove",dxpointerup:"touchend",dxpointercancel:"touchcancel",dxpointerover:"",dxpointerout:"",dxpointerenter:"",dxpointerleave:""},px=function(i){const e=[];return ie(i.touches,function(t,n){e.push(Y({pointerId:n.identifier},n))}),{pointers:e,pointerId:i.changedTouches[0].identifier}},mA=function(i){return Re.real().platform==="ios"&&(i==="dxpointerdown"||i==="dxpointerup")},Nl=fm.inherit({ctor:function(){this.callBase.apply(this,arguments),this._pointerId=0},_handler:function(i){if(mA(this._eventName)){const e=i.changedTouches[0];if(this._pointerId===e.identifier&&this._pointerId!==0)return;this._pointerId=e.identifier}return this.callBase.apply(this,arguments)},_fireEvent:function(i){return this.callBase(Y(px(i.originalEvent),i))}});Nl.map=fA;Nl.normalize=px;const Ed=function(i,e){ws.add(function(){i.split(" ").forEach(function(t){_e.listen(_e.getDocument(),t,e,!0)})})},gA=function(i,e,t){t=t||function(){};let n=[];const s=function(r){let a=-1;return ie(n,function(l,d){return e(r,d)?(a=l,!1):!0}),a},o=function(r){const a=s(r);a>-1&&n.splice(a,1)};Ed(i.dxpointerdown,function(r){s(r)===-1&&(t(r),n.push(r))}),Ed(i.dxpointermove,function(r){n[s(r)]=r}),Ed(i.dxpointerup,o),Ed(i.dxpointercancel,o),this.pointers=function(){return n},this.reset=function(){n=[]}},fx={dxpointerdown:"mousedown",dxpointermove:"mousemove",dxpointerup:"mouseup",dxpointercancel:"",dxpointerover:"mouseover",dxpointerout:"mouseout",dxpointerenter:"mouseenter",dxpointerleave:"mouseleave"},mx=function(i){return i.pointerId=1,{pointers:mm.pointers(),pointerId:1}};let mm,O_=!1;const gx=function(){O_||(mm=new gA(fx,function(){return!0}),O_=!0)},Qs=fm.inherit({ctor:function(){this.callBase.apply(this,arguments),gx()},_fireEvent:function(i){return this.callBase(Y(mx(i.originalEvent),i))}});Qs.map=fx;Qs.normalize=mx;Qs.activate=gx;Qs.resetObserver=function(){mm.reset()};const _A={dxpointerdown:"touchstart mousedown",dxpointermove:"touchmove mousemove",dxpointerup:"touchend mouseup",dxpointercancel:"touchcancel",dxpointerover:"mouseover",dxpointerout:"mouseout",dxpointerenter:"mouseenter",dxpointerleave:"mouseleave"};let R_=!1;const bA=function(){R_||(Qs.activate(),R_=!0)},bu=fm.inherit({EVENT_LOCK_TIMEOUT:100,ctor:function(){this.callBase.apply(this,arguments),bA()},_handler:function(i){const e=ur(i);if(e||(this._skipNextEvents=!0),!(e&&this._mouseLocked)){if(e&&this._skipNextEvents){this._skipNextEvents=!1,this._mouseLocked=!0,clearTimeout(this._unlockMouseTimer);const t=this;this._unlockMouseTimer=setTimeout(function(){t._mouseLocked=!1},this.EVENT_LOCK_TIMEOUT);return}return this.callBase(i)}},_fireEvent:function(i){const e=ur(i.originalEvent)?Qs.normalize:Nl.normalize;return this.callBase(Y(e(i.originalEvent),i))},dispose:function(){this.callBase(),this._skipNextEvents=!1,this._mouseLocked=!1,clearTimeout(this._unlockMouseTimer)}});bu.map=_A;bu.resetObserver=Qs.resetObserver;const vA=(i,e)=>{let{tablet:t,phone:n}=e;const s=yA();return s||(i.touch&&!(t||n)?bu:i.touch?Nl:Qs)},M_=vA(oA,Re.real());ie(M_.map,(i,e)=>{Yn(i,new M_(i,e))});const Ct={down:"dxpointerdown",up:"dxpointerup",move:"dxpointermove",cancel:"dxpointercancel",enter:"dxpointerenter",leave:"dxpointerleave",over:"dxpointerover",out:"dxpointerout"};function yA(){const i=$t().pointerEventStrategy;return{"mouse-and-touch":bu,touch:Nl,mouse:Qs}[i]}const vu=Lt.inherit({ctor:function(i){this._$element=R(i),this._cancelCallback=Tt(),this._acceptCallback=Tt()},getElement:function(){return this._$element},validate:function(i){return!an(i)},validatePointers:function(i){return FD(i)===1},allowInterruptionByMouseWheel:function(){return!0},configure:function(i){Y(this,i)},addCancelCallback:function(i){this._cancelCallback.add(i)},removeCancelCallback:function(){this._cancelCallback.empty()},_cancel:function(i){this._cancelCallback.fire(this,i)},addAcceptCallback:function(i){this._acceptCallback.add(i)},removeAcceptCallback:function(){this._acceptCallback.empty()},_accept:function(i){this._acceptCallback.fire(this,i)},_requestAccept:function(i){this._acceptRequestEvent=i},_forgetAccept:function(){this._accept(this._acceptRequestEvent),this._acceptRequestEvent=null},start:ue,move:ue,end:ue,cancel:ue,reset:function(){this._acceptRequestEvent&&this._accept(this._acceptRequestEvent)},_fireEvent:function(i,e,t){const n=Y({type:i,originalEvent:e,target:this._getEmitterTarget(e),delegateTarget:this.getElement().get(0)},t);return e=Mo(n),e.cancel&&this._cancel(e),e},_getEmitterTarget:function(i){return(this.delegateSelector?R(i.target).closest(this.delegateSelector):this.getElement()).get(0)},dispose:ue}),Ll="dxmousewheel",Hp={setup:function(i){const e=R(i);q.on(e,be("wheel","dxWheel"),Hp._wheelHandler.bind(Hp))},teardown:function(i){q.off(i,".dxWheel")},_wheelHandler:function(i){const{deltaMode:e,deltaY:t,deltaX:n,deltaZ:s}=i.originalEvent;Mo({type:Ll,originalEvent:i,delta:this._normalizeDelta(t,e),deltaX:n,deltaY:t,deltaZ:s,deltaMode:e,pointerType:"mouse"}),i.stopPropagation()},_normalizeDelta(i){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:0)===0?-i:-30*i}};Yn(Ll,Hp);const Id="dxEventManager",CA=Lt.inherit({ctor:function(){this._attachHandlers(),this.reset(),this._proxiedCancelHandler=this._cancelHandler.bind(this),this._proxiedAcceptHandler=this._acceptHandler.bind(this)},_attachHandlers:function(){ws.add((function(){const i=_e.getDocument();q.subscribeGlobal(i,be(Ct.down,Id),this._pointerDownHandler.bind(this)),q.subscribeGlobal(i,be(Ct.move,Id),this._pointerMoveHandler.bind(this)),q.subscribeGlobal(i,be([Ct.up,Ct.cancel].join(" "),Id),this._pointerUpHandler.bind(this)),q.subscribeGlobal(i,be(Ll,Id),this._mouseWheelHandler.bind(this))}).bind(this))},_eachEmitter:function(i){const e=this._activeEmitters||[];let t=0;for(;e.length>t;){const n=e[t];if(i(n)===!1)break;e[t]===n&&t++}},_applyToEmitters:function(i,e){this._eachEmitter(function(t){t[i].call(t,e)})},reset:function(){this._eachEmitter(this._proxiedCancelHandler),this._activeEmitters=[]},resetEmitter:function(i){this._proxiedCancelHandler(i)},_pointerDownHandler:function(i){ur(i)&&i.which>1||this._updateEmitters(i)},_updateEmitters:function(i){this._isSetChanged(i)&&(this._cleanEmitters(i),this._fetchEmitters(i))},_isSetChanged:function(i){const e=this._closestEmitter(i),t=this._emittersSet||[];let n=e.length!==t.length;return ie(e,function(s,o){return n=n||t[s]!==o,!n}),this._emittersSet=e,n},_closestEmitter:function(i){const e=this,t=[];let n=R(i.target);function s(o,r){r&&r.validatePointers(i)&&r.validate(i)&&(r.addCancelCallback(e._proxiedCancelHandler),r.addAcceptCallback(e._proxiedAcceptHandler),t.push(r))}for(;n.length;){const o=di(n.get(0),"dxEmitter")||[];ie(o,s),n=n.parent()}return t},_acceptHandler:function(i,e){const t=this;this._eachEmitter(function(n){n!==i&&t._cancelEmitter(n,e)})},_cancelHandler:function(i,e){this._cancelEmitter(i,e)},_cancelEmitter:function(i,e){const t=this._activeEmitters;e?i.cancel(e):i.reset(),i.removeCancelCallback(),i.removeAcceptCallback();const n=t.indexOf(i);n>-1&&t.splice(n,1)},_cleanEmitters:function(i){this._applyToEmitters("end",i),this.reset(i)},_fetchEmitters:function(i){this._activeEmitters=this._emittersSet.slice(),this._applyToEmitters("start",i)},_pointerMoveHandler:function(i){this._applyToEmitters("move",i)},_pointerUpHandler:function(i){this._updateEmitters(i)},_mouseWheelHandler:function(i){this._allowInterruptionByMouseWheel()&&(i.pointers=[null],this._pointerDownHandler(i),this._adjustWheelEvent(i),this._pointerMoveHandler(i),i.pointers=[],this._pointerUpHandler(i))},_allowInterruptionByMouseWheel:function(){let i=!0;return this._eachEmitter(function(e){return i=e.allowInterruptionByMouseWheel()&&i,i}),i},_adjustWheelEvent:function(i){let e=null;if(this._eachEmitter(function(o){if(!o.gesture)return;const r=o.getDirection(i);if(r!=="horizontal"&&!i.shiftKey||r!=="vertical"&&i.shiftKey)return e=o,!1}),!e)return;const t=e.getDirection(i),s=t==="both"&&!i.shiftKey||t==="vertical"?"pageY":"pageX";i[s]+=i.delta},isActive:function(i){let e=!1;return this._eachEmitter(function(t){e=e||t.getElement().is(i)}),e}}),P_=new CA,xa=function(i){const e=i.emitter,t=i.events[0],n=i.events;ie(n,function(s,o){Yn(o,{noBubble:!i.bubble,setup:function(r){const a=di(r,"dxEmitterSubscription")||{},l=di(r,"dxEmitter")||{},d=l[t]||new e(r);a[o]=!0,l[t]=d,di(r,"dxEmitter",l),di(r,"dxEmitterSubscription",a)},add:function(r,a){di(r,"dxEmitter")[t].configure(Y({delegateSelector:a.selector},a.data),a.type)},teardown:function(r){const a=di(r,"dxEmitterSubscription"),l=di(r,"dxEmitter"),d=l[t];delete a[o];let c=!0;ie(n,function(h,u){return c=c&&!a[u],c}),c&&(P_.isActive(r)&&P_.resetEmitter(d),d&&d.dispose(),delete l[t])}})})},kt="dxclick";let zp=null,Ga=null;const B_=()=>{Ga=null},F_=function(i){const e=i.originalEvent,t=Ga===e||e&&e.DXCLICK_FIRED;(!i.which||i.which===1)&&!zp&&!t&&(e&&(e.DXCLICK_FIRED=!0),pA(Ga,B_),Ga=e,hA(Ga,B_),Mo({type:"dxclick",originalEvent:i}))},xA=vu.inherit({ctor:function(i){this.callBase(i),q.on(this.getElement(),"click",F_)},start:function(i){zp=null},cancel:function(){zp=!0},dispose:function(){q.off(this.getElement(),"click",F_)}});(function(){if(!Re.real().generic){let e=null,t=!1;const n=function(d){return R(d).is("input, textarea, select, button ,:focus, :focus *")},s=function(d){e=d.target,t=d.isDefaultPrevented()},o=function(d){const c=Jf(d);return R(c)},r=function(d){const c=o(d);!t&&e&&!c.is(e)&&!R(e).is("label")&&n(c)&&Ca(),e=null,t=!1},a="NATIVE_CLICK_FIXER",l=_e.getDocument();q.subscribeGlobal(l,be(Ct.down,a),s),q.subscribeGlobal(l,be("click",a),r)}})();xa({emitter:xA,bubble:!0,events:["dxclick"]});const $l="dxdblclick",V_=be(kt,"dxDblClick"),wA=Lt.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&q.on(_e.getDocument(),V_,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(i){const e=i.timeStamp||Date.now(),t=e-this._lastClickTimeStamp;!(t<0)&&t<300?(Mo({type:"dxdblclick",target:lA(this._firstClickTarget,i.target),originalEvent:i}),this._forgetLastClick()):(this._firstClickTarget=i.target,this._lastClickTimeStamp=e,clearTimeout(this._lastClickClearTimeout),this._lastClickClearTimeout=setTimeout(()=>{this._forgetLastClick()},600))},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),q.off(_e.getDocument(),V_,void 0),clearTimeout(this._lastClickClearTimeout),this._handlerCount=0)}}),SA=new wA;Yn($l,SA);const EA=i=>class extends i{_applyColumnState(e){var t;const n=this.option("rtlEnabled"),s=this._getColumnAlignment(e.column.alignment,n),o=Y(!0,{columnAlignment:s},e),r=o.rootElement.hasClass("dx-group-panel-item"),a=this._createIndicatorContainer(o,r),l=R("<span>").addClass(this._getIndicatorClassName(e.name)),d=(t=this.component)===null||t===void 0?void 0:t.getController("columns"),c=(d==null?void 0:d.getHeaderContentAlignment(s))||s;return o.container=a,o.indicator=l,this._renderIndicator(o),a[(r||!e.showColumnLines)&&c==="left"?"appendTo":"prependTo"](e.rootElement),l}_getIndicatorClassName(e){}_getColumnAlignment(e,t){return t=t||this.option("rtlEnabled"),e&&e!=="center"?e:Po(t)}_createIndicatorContainer(e,t){let n=this._getIndicatorContainer(e.rootElement);const s=e.columnAlignment==="left"?"right":"left";return n.length||(n=R("<div>").addClass("dx-column-indicators")),this.setAria("role","presentation",n),n.css("float",e.showColumnLines&&!t?s:null)}_getIndicatorContainer(e){return e&&e.find(".dx-column-indicators")}_getIndicatorElements(e){const t=this._getIndicatorContainer(e);return t&&t.children()}_renderIndicator(e){const t=e.container,n=e.indicator;t&&n&&t.append(n)}_updateIndicators(e){const t=this,n=t.getColumns(),s=t.getColumnElements();let o;if(!(!s||n.length!==s.length))for(let r=0;r<n.length;r++){o=s.eq(r),t._updateIndicator(o,n[r],e);const a=o.parent().data("options");a&&a.cells&&(a.cells[o.index()].column=n[r])}}_updateIndicator(e,t,n){if(!t.command)return this._applyColumnState({name:n,rootElement:e,column:t,showColumnLines:this.option("showColumnLines")})}},mt=Gf(Pt.ERROR_MESSAGES,{E1001:"Module '{0}'. Controller '{1}' is already registered",E1002:"Module '{0}'. Controller '{1}' does not inherit from DevExpress.ui.dxDataGrid.Controller",E1003:"Module '{0}'. View '{1}' is already registered",E1004:"Module '{0}'. View '{1}' does not inherit from DevExpress.ui.dxDataGrid.View",E1005:"Public method '{0}' is already registered",E1006:"Public method '{0}.{1}' does not exist",E1007:"State storing cannot be provided due to the restrictions of the browser",E1010:"The template does not contain the TextBox widget",E1011:'Items cannot be deleted from the List. Implement the "remove" function in the data store',E1012:"Editing type '{0}' with the name '{1}' is unsupported",E1016:"Unexpected type of data source is provided for a lookup column",E1018:"The 'collapseAll' method cannot be called if you use a remote data source",E1019:"Search mode '{0}' is unavailable",E1020:"The type cannot be changed after initialization",E1021:"{0} '{1}' you are trying to remove does not exist",E1022:'The "markers" option is given an invalid value. Assign an array instead',E1023:'The "routes" option is given an invalid value. Assign an array instead',E1025:"This layout is too complex to render",E1026:'The "calculateCustomSummary" function is missing from a field whose "summaryType" option is set to "custom"',E1031:"Unknown subscription in the Scheduler widget: '{0}'",E1032:"Unknown start date in an appointment: '{0}'",E1033:"Unknown step in the date navigator: '{0}'",E1034:"The browser does not implement an API for saving files",E1035:"The editor cannot be created: {0}",E1037:"Invalid structure of grouped data",E1038:"The browser does not support local storages for local web pages",E1039:"A cell's position cannot be calculated",E1040:"The '{0}' key value is not unique within the data array",E1041:"The '{0}' script is referenced after the DevExtreme scripts or not referenced at all",E1042:"{0} requires the key field to be specified",E1043:"Changes cannot be processed due to the incorrectly set key",E1044:"The key field specified by the keyExpr option does not match the key field specified in the data store",E1045:"Editing requires the key field to be specified in the data store",E1046:"The '{0}' key field is not found in data objects",E1047:'The "{0}" field is not found in the fields array',E1048:'The "{0}" operation is not found in the filterOperations array',E1049:"Column '{0}': filtering is allowed but the 'dataField' or 'name' option is not specified",E1050:"The validationRules option does not apply to third-party editors defined in the editCellTemplate",E1051:`HtmlEditor's valueType is "{0}", but the {0} converter was not imported.`,E1052:'{0} should have the "dataSource" option specified',E1053:'The "buttons" option accepts an array that contains only objects or string values',E1054:"All text editor buttons must have names",E1055:'One or several text editor buttons have invalid or non-unique "name" values',E1056:'The {0} widget does not support buttons of the "{1}" type',E1058:'The "startDayHour" and "endDayHour" options must be integers in the [0, 24] range, with "endDayHour" being greater than "startDayHour".',E1059:"The following column names are not unique: {0}",E1060:"All editable columns must have names",E1061:'The "offset" option must be an integer in the [-1440, 1440] range, divisible by 5 without a remainder.',E1062:'The "cellDuration" must be a positive integer, evenly dividing the ("endDayHour" - "startDayHour") interval into minutes.',W1001:'The "key" option cannot be modified after initialization',W1002:"An item with the key '{0}' does not exist",W1003:"A group with the key '{0}' in which you are trying to select items does not exist",W1004:"The item '{0}' you are trying to select in the group '{1}' does not exist",W1005:"Due to column data types being unspecified, data has been loaded twice in order to apply initial filter settings. To resolve this issue, specify data types for all grid columns.",W1006:"The map service returned the following error: '{0}'",W1007:"No item with key {0} was found in the data source, but this key was used as the parent key for item {1}",W1008:"Cannot scroll to the '{0}' date because it does not exist on the current view",W1009:"Searching works only if data is specified using the dataSource option",W1010:"The capability to select all items works with source data of plain structure only",W1011:'The "keyExpr" option is not applied when dataSource is not an array',W1012:"The '{0}' key field is not found in data objects",W1013:'The "message" field in the dialog component was renamed to "messageHtml". Change your code correspondingly. In addition, if you used HTML code in the message, make sure that it is secure',W1014:"The Floating Action Button exceeds the recommended speed dial action count. If you need to display more speed dial actions, increase the maxSpeedDialActionCount option value in the global config.",W1016:"The '{0}' field in the HTML Editor toolbar item configuration was renamed to '{1}'. Please make a corresponding change in your code.",W1017:"The 'key' property is not specified for a lookup data source. Please specify it to prevent requests for the entire dataset when users filter data.",W1018:"Infinite scrolling may not work properly with multiple selection. To use these features together, set 'selection.deferred' to true or set 'selection.selectAllMode' to 'page'.",W1019:"Filter query string exceeds maximum length limit of {0} characters.",W1020:"hideEvent is ignored when the shading property is true",W1021:`The '{0}' is not rendered because none of the DOM elements match the value of the "container" property.`,W1022:"{0} JSON parsing error: '{1}'",W1023:"Appointments require unique keys. Otherwise, the agenda view may not work correctly.",W1024:"The client-side export is enabled. Implement the 'onExporting' function.",W1025:"'scrolling.mode' is set to 'virtual' or 'infinite'. Specify the height of the component."});function ei(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}const IA=["rowsView"],ao={borderedTop:"dx-bordered-top-view",borderedBottom:"dx-bordered-bottom-view"},TA=i=>{let{columnHeadersView:e,rowsView:t}=i;return e!=null&&e.isVisible()?e.element():t.element()},DA=i=>{let{filterPanelView:e,footerView:t,rowsView:n}=i;return e!=null&&e.isVisible()?e.element():t!=null&&t.isVisible()?t.element():n.element()},N_=(i,e)=>{const t=Object.values(i).find(n=>{var s;return n==null||(s=n.element())===null||s===void 0?void 0:s.hasClass(e)});return(t==null?void 0:t.element())??null},AA=(i,e)=>{var t;if(!Object.keys(e).includes(i))return!1;const{rowsView:n}=e,s=ei(e,IA);return U(n==null||(t=n.element)===null||t===void 0?void 0:t.call(n))?Object.values(s).filter(o=>{var r;return o==null||(r=o.isVisible)===null||r===void 0?void 0:r.call(o)}).every(o=>U(o==null?void 0:o.element())):!1},kA=(i,e)=>{if(!AA(i,e))return;const t=N_(e,ao.borderedTop),n=N_(e,ao.borderedBottom),s=TA(e),o=DA(e);t&&!t.is(s)&&t.removeClass(ao.borderedTop),n&&!n.is(o)&&n.removeClass(ao.borderedBottom),s.hasClass(ao.borderedTop)||s.addClass(ao.borderedTop),o.hasClass(ao.borderedBottom)||o.addClass(ao.borderedBottom)};class _x{constructor(e){const t=this;t._updateLockCount=0,t.component=e,t._actions={},t._actionConfigs={},ie(this.callbackNames()||[],function(n,s){const o=t.callbackFlags(s)||{};o.unique=!0,o.syncStrategy=!0,t[this]=Tt(o)})}_endUpdateCore(){}init(){}callbackNames(){}callbackFlags(e){}publicMethods(){return[]}beginUpdate(){this._updateLockCount++}endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())}option(e){const{component:t}=this,n=t._optionCache;return arguments.length===1&&n?(e in n||(n[e]=t.option(e)),n[e]):t.option.apply(t,arguments)}_silentOption(e,t){const{component:n}=this,s=n._optionCache;return s&&(s[e]=t),n._setOptionWithoutOptionChange(e,t)}localize(e){const t=this.component._optionCache;return t?(e in t||(t[e]=re.format(e)),t[e]):re.format(e)}on(e,t){return this.component.on.apply(this.component,arguments)}off(){return this.component.off.apply(this.component,arguments)}optionChanged(e){e.name in this._actions&&(this.createAction(e.name,this._actionConfigs[e.name]),e.handled=!0)}getAction(e){return this._actions[e]}setAria(e,t,n){const s=n.get(0),o=e!=="role"&&e!=="id"?"aria-":"";s.setAttribute?s.setAttribute(o+e,t):n.attr(o+e,t)}_createComponent(e,t,n){return this.component._createComponent(e,t,n)}getController(e){return this.component._controllers[e]}createAction(e,t){if(Ee(e)){const n=this.component._createAction(e.bind(this),t);return function(s){n({event:s})}}this._actions[e]=this.component._createActionByOption(e,t),this._actionConfigs[e]=t}executeAction(e,t){const n=this._actions[e];return n&&n(t)}dispose(){const e=this;ie(e.callbackNames()||[],function(){e[this].empty()})}addWidgetPrefix(e){return`dx-${this.component.NAME.slice(2).toLowerCase()}${e?`-${e}`:""}`}getWidgetContainerClass(){const e=this.component.NAME==="dxDataGrid"?null:"container";return this.addWidgetPrefix(e)}elementIsInsideGrid(e){return e.closest(`.${this.getWidgetContainerClass()}`).parent().is(this.component.$element())}}class gm extends _x{}class OA extends gm{getView(e){return this.component._views[e]}getViews(){return this.component._views}}class bx extends _x{constructor(e){super(e),this.renderCompleted=Tt(),this.resizeCompleted=Tt()}_isReady(){return this.component.isReady()}_endUpdateCore(){super._endUpdateCore(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))}_invalidate(e,t){this._requireRender=!0,this.component._requireResize=qe()&&(this.component._requireResize||e),this._requireReady=this._requireReady||t}_renderCore(e){}_resizeCore(){}_parentElement(){return this._$parent}element(){return this._$element}getElementHeight(){const e=this.element();if(!e)return 0;const t=parseFloat(e.css("marginTop"))||0,n=parseFloat(e.css("marginBottom"))||0,{offsetHeight:s}=e.get(0);return s+t+n}isVisible(){return!0}getTemplate(e){return this.component._getTemplate(e)}getView(e){return this.component._views[e]}_getBorderedViews(){return{columnHeadersView:this.component._views.columnHeadersView,rowsView:this.component._views.rowsView,filterPanelView:this.component._views.filterPanelView,footerView:this.component._views.footerView}}render(e,t){let n=this._$element;const s=this.isVisible();if(!(!n&&!e)&&(this._requireReady=!1,n||(n=this._$element=R("<div>").appendTo(e),this._$parent=e),n.toggleClass("dx-hidden",!s),this.component._views&&kA(this.name,this._getBorderedViews()),s)){this.component._optionCache={};const o=this._renderCore(t);this.component._optionCache=void 0,o?o.done(()=>{this.renderCompleted.fire(t)}):this.renderCompleted.fire(t)}}resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1}focus(e){this.element().get(0).focus({preventScroll:e})}}function L_(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};return Object.entries(e).forEach(n=>{let[s,o]=n;const r=i[s];if(r)if(Ee(o))t[s]=o(r);else{const a=r;t[s]=a.inherit(o)}}),t}function RA(i,e,t){const n=t.publicMethods();n&&ie(n,(s,o)=>{if(t[o])if(!i[o])i[o]=function(){return t[o](...arguments)};else throw mt.Error("E1005",o);else throw mt.Error("E1006",e,o)})}function MA(i,e){const{modules:t}=e,{modulesOrder:n}=e;function s(c){const h={};return ie(c,(u,p)=>{const f=new p(i);f.name=u,RA(i,u,f),h[u]=f}),h}n&&t.sort((c,h)=>{let u=n.indexOf(c.name),p=n.indexOf(h.name);return u<0&&(u=1e6),p<0&&(p=1e6),u-p});const o={},r={};t.forEach(c=>{let{name:h,controllers:u={},views:p={}}=c;Object.entries(u).forEach(f=>{let[g,m]=f;if(o[g])throw mt.Error("E1001",h,g);if(!((m==null?void 0:m.prototype)instanceof gm))throw mt.Error("E1002",h,g);o[g]=m}),Object.entries(p).forEach(f=>{let[g,m]=f;if(r[g])throw mt.Error("E1003",h,g);if(!((m==null?void 0:m.prototype)instanceof bx))throw mt.Error("E1004",h,g);r[g]=m})});const a=t.filter(c=>{let{extenders:h}=c;return!!h}),l=a.reduce((c,h)=>{let{extenders:u}=h;return ve({},c,L_(c,u==null?void 0:u.controllers))},o),d=a.reduce((c,h)=>{let{extenders:u}=h;return ve({},c,L_(c,u==null?void 0:u.views))},r);i._controllers=s(l),i._views=s(d)}const PA=function(i,e,t){t=t||[],i._controllers&&ie(i._controllers,function(){this[e]&&this[e].apply(this,t)}),i._views&&ie(i._views,function(){this[e]&&this[e].apply(this,t)})},Yt={modules:[],View:bx,ViewController:OA,Controller:gm,registerModule(i,e){const{modules:t}=this;for(let n=0;n<t.length;n++)if(t[n].name===i)return;e.name=i,t.push(e)},registerModulesOrder(i){this.modulesOrder=i},unregisterModule(i){this.modules=ln(this.modules,e=>e.name!==i)},processModules:MA,callModuleItemsMethod:PA},BA=ws.add,vx="DEVEXTREME_XHR_ERROR_UNLOAD",FA=function(i){return[i[0],i.length<3?"=":String(i[1]).toLowerCase(),i.length<2?!0:i[i.length-1]]},Us=function(i){return Array.isArray(i)||(i=[i]),Ii(i,function(e){const t={selector:Ee(e)||typeof e=="string"?e:e.getter||e.field||e.selector,desc:!!(e.desc||String(e.dir).charAt(0).toLowerCase()==="d")};return e.compare&&(t.compare=e.compare),t})},VA=function(){const i={timeout:"Network connection timeout",error:"Unspecified network error",parsererror:"Unexpected server response"};let e;return BA(function(){const t=Je();_e.listen(t,"beforeunload",function(){e=!0})}),function(t,n){return e?vx:t.status<400?function(s){let o=i[s];return o||s}(n):t.statusText}}(),_m={count:{seed:0,step:function(i){return 1+i}},sum:{seed:0,step:function(i,e){return i+e}},min:{step:function(i,e){return e<i?e:i}},max:{step:function(i,e){return e>i?e:i}},avg:{seed:[0,0],step:function(i,e){return[i[0]+e,i[1]+1]},finalize:function(i){return i[1]?i[0]/i[1]:NaN}}},NA=function(){let i=0,e;return{obtain:function(){i===0&&(e=new ae),i++},release:function(){i--,i<1&&e.resolve()},promise:function(){return(i===0?new ae().resolve():e).promise()},reset:function(){i=0,e&&e.resolve()}}}();function LA(i){return/^(and|&&|&)$/i.test(i)}const Hl=function(i,e,t){if(Array.isArray(i)){const n=Ii(e,function(o,r){return r});let s;for(let o=0;o<n.length;o++)if(s=n[o],!zt(e[s],t[s],{strict:!1}))return!1;return!0}return zt(e,t,{strict:!1})},$A=function(i){return i[0]==="!"&&Array.isArray(i[1])},HA=function(i){return i==="and"||i==="or"},zA=function(i){if(i.length>2&&Array.isArray(i[0])&&i[1]==="or"&&typeof i[0][0]=="string"&&i[0][1]==="="){const[e]=i[0];return!i.find((t,n)=>n%2!==0?t!=="or":!Array.isArray(t)||t.length!==3||t[0]!==e||t[1]!=="=")}return!1},WA=function(i){const e=i[0],t=i[1];return!!(Array.isArray(e)||Ee(e)&&(Array.isArray(t)||Ee(t)||HA(t)))},aa=function(){const i=new ae;return i.resolve.apply(i,arguments).promise()},yx=function(){const i=new ae;return i.reject.apply(i,arguments).promise()};function jA(i,e){let t;return function(){return t||(t=setTimeout(()=>{t=void 0,i.call(this)},Ee(e)?e():e)),t}}function KA(i,e){let t=[];const n=jA(function(){i.call(this,t),t=[]},e);return function(s){return Array.isArray(s)&&t.push(...s),n.call(this,t)}}const Ei=Gf(Pt.ERROR_MESSAGES,{E4000:"[DevExpress.data]: {0}",E4001:"Unknown aggregating function is detected: '{0}'",E4002:"Unsupported OData protocol version is used",E4003:"Unknown filter operation is used: {0}",E4004:"The thenby() method is called before the sortby() method",E4005:"Store requires a key expression for this operation",E4006:"ArrayStore 'data' option must be an array",E4007:"Compound keys cannot be auto-generated",E4008:"Attempt to insert an item with a duplicated key",E4009:"Data item cannot be found",E4010:"CustomStore does not support creating queries",E4011:"Custom Store method is not implemented or is not a function: {0}",E4012:"Custom Store method returns an invalid value: {0}",E4013:"Local Store requires the 'name' configuration option is specified",E4014:"Unknown data type is specified for ODataStore: {0}",E4015:"Unknown entity name or alias is used: {0}",E4016:"The compileSetter(expr) method is called with 'self' passed as a parameter",E4017:"Keys cannot be modified",E4018:"The server has returned a non-numeric value in a response to an item count request",E4019:"Mixing of group operators inside a single group of filter expression is not allowed",E4020:"Unknown store type is detected: {0}",E4021:"The server response does not provide the totalCount value",E4022:"The server response does not provide the groupCount value",E4023:"Could not parse the following XML: {0}",E4024:"String function {0} cannot be used with the data field {1} of type {2}.",W4000:"Data returned from the server has an incorrect structure",W4001:'The {0} field is listed in both "keyType" and "fieldTypes". The value of "fieldTypes" is used.',W4002:"Data loading has failed for some cells due to the following error: {0}"});let GA=null;const bm=function(i){var e;(e=GA)===null||e===void 0||e(i)};function UA(i,e){let t;const n=typeof e=="string"?e.split():e.slice();for(;n.length;)if(t=n.shift(),t in i)return!0;return!1}function Cx(i,e,t,n){let s,o;if(n){for(let r=0;r<e.length;r++)if(s=e[r].items||e[r].collapsedItems||[],o=Cx(i,s||[],t,n-1),o)return o}else if(mr(i,e,t)>=0)return e}function qA(i,e,t,n){return n?Cx(i,e,t,n)||[]:e}function YA(i,e){if(i.key()&&(!e._dataByKeyMap||e._dataByKeyMapLength!==e.length)){const t={},n=e.length;for(let s=0;s<n;s++)t[JSON.stringify(i.keyOf(e[s]))]=e[s];e._dataByKeyMap=t,e._dataByKeyMapLength=n}}function XA(i,e){if(i._dataByKeyMap)return i._dataByKeyMap[JSON.stringify(e)]}function ZA(i,e){return i._dataByKeyMap?i._dataByKeyMap[JSON.stringify(e)]:!0}function xx(i,e,t){i._dataByKeyMap&&(i._dataByKeyMap[JSON.stringify(e)]=t,i._dataByKeyMapLength+=t?1:-1)}function wx(i,e,t){t=t||new WeakMap;const n=i?Object.create(Object.getPrototypeOf(i)):{};i&&t.set(i,n);const s=ve({},i);In(n,s,!0,!0);for(const o in s){const r=s[o],a=e==null?void 0:e[o];We(r)&&!ht(r)&&We(a)&&!t.has(r)&&(n[o]=wx(r,a,t))}for(const o in n){const r=n[o];We(r)&&t.has(r)&&(n[o]=t.get(r))}return n}function vo(i,e){const t=wx(i,e);return In(t,e,!0,!0)}function nr(i){let{keyInfo:e,data:t,changes:n,groupCount:s,useInsertIndex:o,immutable:r,disableCache:a,logError:l,skipCopying:d}=i;const c=r===!0?[...t]:t;return n.forEach(h=>{const u=h.type==="insert"?c:qA(e,c,h.key,s);switch(!a&&YA(e,u),h.type){case"update":vm(e,u,h.key,h.data,!0,r,l);break;case"insert":ym(e,u,h.data,o&&U(h.index)?h.index:-1,!0,l,d);break;case"remove":Sx(e,u,h.key,!0,l)}}),c}function Pc(i,e,t){return i?e&&Ei.log(t):yx(Ei.Error(t))}function vm(i,e,t,n,s,o,r){let a;const l=i.key();if(l){if(UA(n,l)&&!Hl(l,t,i.keyOf(n)))return Pc(s,r,"E4017");if(a=XA(e,t),!a){const d=mr(i,e,t);if(d<0)return Pc(s,r,"E4009");if(a=e[d],o===!0&&U(a)){const c=vo(a,n);return e[d]=c,!s&&aa(c,t)}}}else a=t;if(In(a,n,!0),!s)return $t().useLegacyStoreResult?aa(t,n):aa(a,t)}function ym(i,e,t,n,s,o,r){let a;const l=i.key(),d=ht(t)&&!r?Y({},t):t;if(l){if(a=i.keyOf(d),a===void 0||typeof a=="object"&&cn(a)){if(Array.isArray(l))throw Ei.Error("E4007");a=d[l]=String(new hi)}else if(e[mr(i,e,a)]!==void 0)return Pc(s,o,"E4008")}else a=d;if(n>=0?e.splice(n,0,d):e.push(d),xx(e,a,d),!s)return aa($t().useLegacyStoreResult?t:d,a)}function Sx(i,e,t,n,s){const o=mr(i,e,t);if(o>-1&&(e.splice(o,1),xx(e,t,null)),n){if(o<0)return Pc(n,s,"E4009")}else return aa(t)}function mr(i,e,t){const n=i.key();if(!ZA(e,t))return-1;for(let s=0,o=e.length;s<o;s++)if(Hl(n,i.keyOf(e[s]),t))return s;return-1}const zl=Lt.inherit({toArray:function(){const i=[];for(this.reset();this.next();)i.push(this.current());return i},countable:function(){return!1}}),Cm=zl.inherit({ctor:function(i){this.array=i,this.index=-1},next:function(){return this.index+1<this.array.length?(this.index++,!0):!1},current:function(){return this.array[this.index]},reset:function(){this.index=-1},toArray:function(){return this.array.slice(0)},countable:function(){return!0},count:function(){return this.array.length}}),yu=zl.inherit({ctor:function(i){this.iter=i},next:function(){return this.iter.next()},current:function(){return this.iter.current()},reset:function(){return this.iter.reset()}}),sh=yu.inherit({ctor:function(i,e){this.callBase(i),this.index=-1,this.mapper=e},current:function(){return this.mapper(this.callBase(),this.index)},next:function(){const i=this.callBase();return i&&this.index++,i}}),JA=function(i,e,t){return Ke(i)&&Ke(e)&&(t!=null&&t.locale||t!=null&&t.collatorOptions)?new Intl.Collator((t==null?void 0:t.locale)||void 0,(t==null?void 0:t.collatorOptions)||void 0).compare(i,e):(i=Ki(i,!1,t),e=Ki(e,!1,t),i===null&&e!==null?-1:i!==null&&e===null||i===void 0&&e!==void 0?1:i!==void 0&&e===void 0||i<e?-1:i>e?1:0)},Wp=zl.inherit({ctor:function(i,e,t,n){this.langParams=i.langParams,i instanceof sh||(i=new sh(i,this._wrap),i.langParams=this.langParams),this.iter=i,this.rules=[{getter:e,desc:t,compare:n,langParams:this.langParams}]},thenBy:function(i,e,t){const n=new Wp(this.sortedIter||this.iter,i,e,t);return this.sortedIter||(n.rules=this.rules.concat(n.rules)),n},next:function(){return this._ensureSorted(),this.sortedIter.next()},current:function(){return this._ensureSorted(),this.sortedIter.current()},reset:function(){delete this.sortedIter},countable:function(){return this.sortedIter||this.iter.countable()},count:function(){return this.sortedIter?this.sortedIter.count():this.iter.count()},_ensureSorted:function(){const i=this;i.sortedIter||(ie(i.rules,function(){this.getter=Nt(this.getter)}),i.sortedIter=new sh(new Cm(this.iter.toArray().sort(function(e,t){return i._compare(e,t)})),i._unwrap))},_wrap:function(i,e){return{index:e,value:i}},_unwrap:function(i){return i.value},_getDefaultCompare:i=>(e,t)=>JA(e,t,i),_compare:function(i,e){const t=i.index,n=e.index;if(i=i.value,e=e.value,i===e)return t-n;for(let s=0,o=this.rules.length;s<o;s++){const r=this.rules[s],a=r.getter(i),l=r.getter(e),c=(r.compare||this._getDefaultCompare(r.langParams))(a,l);if(c)return r.desc?-c:c}return t-n}}),jp=function(){let i={};const e=r=>Ki(r,!1,i),t=function(r){if(zA(r))return(c=>{const h=Nt(c[0][0]),u=c.reduce((p,f,g)=>(g%2===0&&p.push(e(f[2])),p),[]);return p=>{const f=e(h(p));return u.some(g=>o(g)?f===g:f==g)}})(r);const a=[];let l=!1,d=!1;return ie(r,function(){if(Array.isArray(this)||Ee(this)){if(a.length>1&&l!==d)throw new Ei.Error("E4019");a.push(jp(this,i)),l=d,d=!0}else d=LA(this)}),function(c){let h=l;for(let u=0;u<a.length;u++)if(a[u](c)!==l){h=!l;break}return h}},n=function(r){var a;return U(r)?(a=i)!==null&&a!==void 0&&a.locale?r.toLocaleString(i.locale):r.toString():""};function s(r,a,l){return function(d){d=e(r(d));let c=o(a)?d===a:d==a;return l&&(c=!c),c}}function o(r){return r===""||r===0||r===!1}return function(r,a){return i=a||{},Ee(r)?r:WA(r)?t(r):$A(r)?function(l){const d=l[0],c=jp(l[1],i);if(d==="!")return function(h){return!c(h)};throw Ei.Error("E4003",d)}(r):function(l){l=FA(l);const d=Nt(l[0]),c=l[1];let h=l[2];h=e(h);const u=(p,f)=>(p=e(d(p)),(h==null||p==null)&&h!==p?!1:f(p,h));switch(c.toLowerCase()){case"=":return s(d,h);case"<>":return s(d,h,!0);case">":return p=>u(p,(f,g)=>f>g);case"<":return p=>u(p,(f,g)=>f<g);case">=":return p=>u(p,(f,g)=>f>=g);case"<=":return p=>u(p,(f,g)=>f<=g);case"startswith":return function(p){return e(n(d(p))).indexOf(h)===0};case"endswith":return function(p){const f=e(n(d(p))),g=n(h);if(f.length<g.length)return!1;const m=f.lastIndexOf(h);return m!==-1&&m===f.length-h.length};case"contains":return function(p){return e(n(d(p))).indexOf(h)>-1};case"notcontains":return function(p){return e(n(d(p))).indexOf(h)===-1}}throw Ei.Error("E4003",c)}(r)}}(),QA=yu.inherit({ctor:function(i,e){this.callBase(i),this.langParams=i.langParams,this.criteria=jp(e,this.langParams)},next:function(){for(;this.iter.next();)if(this.criteria(this.current()))return!0;return!1}}),ek=zl.inherit({ctor:function(i,e){this.iter=i,this.getter=e},next:function(){return this._ensureGrouped(),this.groupedIter.next()},current:function(){return this._ensureGrouped(),this.groupedIter.current()},reset:function(){delete this.groupedIter},countable:function(){return!!this.groupedIter},count:function(){return this.groupedIter.count()},_ensureGrouped:function(){if(this.groupedIter)return;const i={},e=[],t=this.iter,n=Nt(this.getter);for(t.reset();t.next();){const s=t.current(),o=n(s);o in i?i[o].push(s):(i[o]=[s],e.push(o))}this.groupedIter=new Cm(Ii(e,function(s){return{key:s,items:i[s]}}))}}),tk=yu.inherit({ctor:function(i,e){this.callBase(i),this.getter=Nt(e)},current:function(){return this.getter(this.callBase())},countable:function(){return this.iter.countable()},count:function(){return this.iter.count()}}),ik=yu.inherit({ctor:function(i,e,t){this.callBase(i),this.skip=Math.max(0,e),this.take=Math.max(0,t),this.pos=0},next:function(){if(this.pos>=this.skip+this.take)return!1;for(;this.pos<this.skip&&this.iter.next();)this.pos++;return this.pos++,this.iter.next()},reset:function(){this.callBase(),this.pos=0},countable:function(){return this.iter.countable()},count:function(){return Math.min(this.iter.count()-this.skip,this.take)}}),Wl=function(i,e){e=e||{},i instanceof zl||(i=new Cm(i)),e.langParams&&(i.langParams=e.langParams);const t=function(l){const d=e.errorHandler;d&&d(l),bm(l)},n=function(l){const d=new ae().fail(t);let c;const h=l.step,u=l.finalize;try{i.reset(),"seed"in l?c=l.seed:c=i.next()?i.current():NaN;let p=c;for(;i.next();)p=h(p,i.current());d.resolve(u?u(p):p)}catch(p){d.reject(p)}return d.promise()},s=function(l){return n(_m[l])},o=function(l){return!Ee(l)&&!Array.isArray(l)&&(l=[].slice.call(arguments)),a(new tk(i,l))},r=function(l){return o(Nt(l))};function a(l){return Wl(l,e)}return{toArray:function(){return i.toArray()},enumerate:function(){const l=new ae().fail(t);try{l.resolve(i.toArray())}catch(d){l.reject(d)}return l.promise()},setLangParams(l){i.langParams=l},sortBy:function(l,d,c){return a(new Wp(i,l,d,c))},thenBy:function(l,d,c){if(i instanceof Wp)return a(i.thenBy(l,d,c));throw Ei.Error("E4004")},filter:function(l){return Array.isArray(l)||(l=[].slice.call(arguments)),a(new QA(i,l))},slice:function(l,d){return d===void 0&&(d=Number.MAX_VALUE),a(new ik(i,l,d))},select:o,groupBy:function(l){return a(new ek(i,l))},aggregate:function(l,d,c){return arguments.length<2?n({step:arguments[0]}):n({seed:l,step:d,finalize:c})},count:function(){if(i.countable()){const l=new ae().fail(t);try{l.resolve(i.count())}catch(d){l.reject(d)}return l.promise()}return s("count")},sum:function(l){return l?r(l).sum():s("sum")},min:function(l){return l?r(l).min():s("min")},max:function(l){return l?r(l).max():s("max")},avg:function(l){return l?r(l).avg():s("avg")}}};function xm(i,e){return i=i.groupBy(e[0].selector),e.length>1&&(i=i.select(function(t){return Y({},t,{items:xm(Wl(t.items),e.slice(1)).toArray()})})),i}function Ex(i,e){const t=[];return ie(i,function(n,s){ln(e,function(r){return s.selector===r.selector}).length<1&&t.push(s)}),t.concat(e)}function nk(i,e,t){var n;e=e||{};const s=e.filter;if((n=e)!==null&&n!==void 0&&n.langParams){var o,r;(o=(r=i).setLangParams)===null||o===void 0||o.call(r,e.langParams)}if(s&&(i=i.filter(s)),t)return i;let a=e.sort;const l=e.select;let d=e.group;const c=e.skip,h=e.take;return d&&(d=Us(d),d.keepInitialKeyOrder=!!e.group.keepInitialKeyOrder),(a||d)&&(a=Us(a||[]),d&&!d.keepInitialKeyOrder&&(a=Ex(d,a)),ie(a,function(u){i=i[u?"thenBy":"sortBy"](this.selector,this.desc,this.compare)})),l&&(i=i.select(l)),d&&(i=xm(i,d)),(h||c)&&(i=i.slice(c||0,h)),i}const qs={multiLevelGroup:xm,arrangeSortingInfo:Ex,queryByOptions:nk},Aa=Lt.abstract,$_=qs.queryByOptions,Kp={},gs=Lt.inherit({_langParams:{},ctor:function(i){const e=this;i=i||{},this._eventsStrategy=new wr(this),ie(["onLoaded","onLoading","onInserted","onInserting","onUpdated","onUpdating","onPush","onRemoved","onRemoving","onModified","onModifying"],function(t,n){n in i&&e.on(n.slice(2).toLowerCase(),i[n])}),this._key=i.key,this._errorHandler=i.errorHandler,this._useDefaultSearch=!0},_clearCache:ue,_customLoadOptions:function(){return null},key:function(){return this._key},keyOf:function(i){return this._keyGetter||(this._keyGetter=Nt(this.key())),this._keyGetter(i)},_requireKey:function(){if(!this.key())throw Ei.Error("E4005")},load:function(i){const e=this;return i=i||{},this._eventsStrategy.fireEvent("loading",[i]),this._withLock(this._loadImpl(i)).done(function(t){e._eventsStrategy.fireEvent("loaded",[t,i])})},_loadImpl:function(i){return cn(this._langParams)||(i=i||{},i._langParams=ve({},this._langParams,i._langParams)),$_(this.createQuery(i),i).enumerate()},_withLock:function(i){const e=new ae;return i.done(function(){const t=this,n=arguments;NA.promise().done(function(){e.resolveWith(t,n)})}).fail(function(){e.rejectWith(this,arguments)}),e},createQuery:Aa,totalCount:function(i){return this._totalCountImpl(i)},_totalCountImpl:function(i){return $_(this.createQuery(i),i,!0).count()},byKey:function(i,e){return this._addFailHandlers(this._withLock(this._byKeyImpl(i,e)))},_byKeyImpl:Aa,insert:function(i){const e=this;return e._eventsStrategy.fireEvent("modifying"),e._eventsStrategy.fireEvent("inserting",[i]),e._addFailHandlers(e._insertImpl(i).done(function(t,n){e._eventsStrategy.fireEvent("inserted",[t,n]),e._eventsStrategy.fireEvent("modified")}))},_insertImpl:Aa,update:function(i,e){const t=this;return t._eventsStrategy.fireEvent("modifying"),t._eventsStrategy.fireEvent("updating",[i,e]),t._addFailHandlers(t._updateImpl(i,e).done(function(){t._eventsStrategy.fireEvent("updated",[i,e]),t._eventsStrategy.fireEvent("modified")}))},_updateImpl:Aa,push:function(i){const e={changes:i,waitFor:[]};this._eventsStrategy.fireEvent("beforePushAggregation",[e]),De(...e.waitFor).done(()=>{this._pushImpl(i),this._eventsStrategy.fireEvent("beforePush",[{changes:i}]),this._eventsStrategy.fireEvent("push",[i])})},_pushImpl:ue,remove:function(i){const e=this;return e._eventsStrategy.fireEvent("modifying"),e._eventsStrategy.fireEvent("removing",[i]),e._addFailHandlers(e._removeImpl(i).done(function(t){e._eventsStrategy.fireEvent("removed",[t]),e._eventsStrategy.fireEvent("modified")}))},_removeImpl:Aa,_addFailHandlers:function(i){return i.fail(this._errorHandler).fail(bm)},on(i,e){return this._eventsStrategy.on(i,e),this},off(i,e){return this._eventsStrategy.off(i,e),this}});gs.create=function(i,e){if(!(i in Kp))throw Ei.Error("E4020",i);return new Kp[i](e)};gs.registerClass=function(i,e){return e&&(Kp[e]=i),i};gs.inherit=function(i){return function(e,t){const n=i.apply(this,[e]);return gs.registerClass(n,t),n}}(gs.inherit);const Ix="totalCount",Gp="load",Tx="byKey",H_="insert",z_="update",W_="remove";function la(i){return i&&Ee(i.then)}function sr(i){return new ae().resolve(i).promise()}function tl(i,e){if(!Ee(e))throw Ei.Error("E4011",i)}function Dx(i){throw Ei.Error("E4012",i)}function Go(i){return function(e){let t;e instanceof Error?t=e:t=new Error(function(n){const s=n[0],o=n[1];return!s||!s.getResponseHeader?null:VA(s,o)}(arguments)||e&&String(e)||"Unknown error"),t.message!==vx&&i.reject(t)}}function Ax(i,e){const t=i._loadFunc;let n;return tl(Gp,t),n=t.apply(i,[e]),Array.isArray(n)?n=sr(n):n==null?n=sr([]):la(n)||Dx(Gp),Pi(n)}function sk(i,e){const t=i._totalCountFunc;let n;if(!Ee(t))throw Ei.Error("E4021");return n=t.apply(i,[e]),la(n)||(n=Number(n),isFinite(n)||Dx(Ix),n=sr(n)),Pi(n)}function ok(i,e,t){const n=i._byKeyFunc;let s;return tl(Tx,n),s=n.apply(i,[e,t]),la(s)||(s=sr(s)),Pi(s)}function kx(i,e,t,n){if(e.__rawData)n(e.__rawData);else{const s=e.__rawDataPromise||Ax(e,t);e._cacheRawData&&(e.__rawDataPromise=s),s.always(function(){delete e.__rawDataPromise}).done(function(o){e._cacheRawData&&(e.__rawData=o),n(o)}).fail(o=>{var r;const a=Go(i);(r=e._errorHandler)===null||r===void 0||r.call(e,o),a(o)})}}function j_(i,e,t,n){t=t||{};const s={};"userData"in t&&(s.userData=t.userData),kx(i,e,s,function(o){const r=Wl(o,{errorHandler:e._errorHandler});let a,l;const d=[];let c,h;n||(a=qs.queryByOptions(r,t),a===r?c=o.slice(0):d.push(a.enumerate().done(function(u){c=u}))),(t.requireTotalCount||n)&&(l=qs.queryByOptions(r,t,!0),l===r?h=o.length:d.push(l.count().done(function(u){h=u}))),De.apply(R,d).done(function(){n?i.resolve(h):t.requireTotalCount?i.resolve(c,{totalCount:h}):i.resolve(c)}).fail(function(u){i.reject(u)})})}function rk(i,e,t){kx(i,e,{},function(n){const s=e.key();let o;for(let r=0,a=n.length;r<a;r++)if(o=n[r],Hl(s,e.keyOf(n[r]),t)){i.resolve(o);return}i.reject(Ei.Error("E4009"))})}const Cu=gs.inherit({ctor:function(i){i=i||{},this.callBase(i),this._useDefaultSearch=!!i.useDefaultSearch||i.loadMode==="raw",this._loadMode=i.loadMode,this._cacheRawData=i.cacheRawData!==!1,this._loadFunc=i[Gp],this._totalCountFunc=i[Ix],this._byKeyFunc=i[Tx],this._insertFunc=i[H_],this._updateFunc=i[z_],this._removeFunc=i[W_]},_clearCache(){delete this.__rawData},createQuery:function(){throw Ei.Error("E4010")},clearRawDataCache:function(){this._clearCache()},_totalCountImpl:function(i){let e=new ae;return this._loadMode==="raw"&&!this._totalCountFunc?j_(e,this,i,!0):(sk(this,i).done(function(t){e.resolve(Number(t))}).fail(Go(e)),e=this._addFailHandlers(e)),e.promise()},_pushImpl:function(i){this.__rawData&&nr({keyInfo:this,data:this.__rawData,changes:i})},_loadImpl:function(i){let e=new ae;return this._loadMode==="raw"?j_(e,this,i,!1):(Ax(this,i).done(function(t,n){e.resolve(t,n)}).fail(Go(e)),e=this._addFailHandlers(e)),e.promise()},_byKeyImpl:function(i,e){const t=new ae;return this._byKeyViaLoad()?(this._requireKey(),rk(t,this,i)):ok(this,i,e).done(function(n){t.resolve(n)}).fail(Go(t)),t.promise()},_byKeyViaLoad:function(){return this._loadMode==="raw"&&!this._byKeyFunc},_insertImpl:function(i){const e=this,t=e._insertFunc;let n;const s=new ae;return tl(H_,t),n=t.apply(e,[i]),la(n)||(n=sr(n)),Pi(n).done(function(o){$t().useLegacyStoreResult?s.resolve(i,o):s.resolve(o||i,e.keyOf(o))}).fail(Go(s)),s.promise()},_updateImpl:function(i,e){const t=this._updateFunc;let n;const s=new ae;return tl(z_,t),n=t.apply(this,[i,e]),la(n)||(n=sr(n)),Pi(n).done(function(o){$t().useLegacyStoreResult?s.resolve(i,e):s.resolve(o||e,i)}).fail(Go(s)),s.promise()},_removeImpl:function(i){const e=this._removeFunc;let t;const n=new ae;return tl(W_,e),t=e.apply(this,[i]),la(t)||(t=sr()),Pi(t).done(function(){n.resolve(i)}).fail(Go(n)),n.promise()}});function ak(i){let e=[],t=!1;function n(){for(;e.length;){t=!0;const o=e.shift()();if(o!==void 0){if(o.then){De(o).always(n);return}throw Pt.Error("E0015")}}t=!1}return{add:function(s,o){i?(e[0]&&o&&o(e[0]),e=[s]):e.push(s),t||n()},busy:function(){return t}}}const lk=Je(),dk={getXhr:function(){return new lk.XMLHttpRequest}},ck=qn(dk),Ox=Je(),Rx=function(i){const e=_e.createElement("script");for(const t in i)e[t]=i[t];return e},Mx=function(i){return _e.getHead().appendChild(i)},Px=function(i){i.parentNode.removeChild(i)},K_=function(i){const e=Rx({text:i});Mx(e),Px(e)},uk=function(i){const e=Rx({src:i});return new Promise(function(t,n){const s={load:t,error:n},o=function(r){s[r.type](),Px(e)};for(const r in s)_e.listen(e,r,o);Mx(e)})};function wm(i){return(i.method||"GET").toUpperCase()}const hk=function(i){const e=[];for(const t in i){let n=i[t];n!==void 0&&(n===null&&(n=""),typeof n=="function"&&(n=n()),e.push(encodeURIComponent(t)+"="+encodeURIComponent(n)))}return e.join("&")},pk=function(i){let e;return i.data&&!i.upload&&wm(i)!=="GET"&&(e="application/x-www-form-urlencoded;charset=utf-8"),i.contentType||e},fk=function(i){const e=i.dataType||"*",t="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",n={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",jsonp:t,script:t};return f2(n,i.accepts,!0),n[e]?n[e]+(e!=="*"?", */*; q=0.01":""):n["*"]},mk=function(i){const e=i.headers||{};return e["Content-Type"]=e["Content-Type"]||pk(i),e.Accept=e.Accept||fk(i),!i.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest"),e},gk=function(i){if(i.dataType==="jsonp"){const e=Math.random().toString().replace(/\D/g,""),t=i.jsonpCallback||"dxCallback"+Date.now()+"_"+e,n=i.jsonp||"callback";return i.data=i.data||{},i.data[n]=t,t}},_k=function(i,e){let t=i.data;const n=typeof t=="string";let s=i.url||Ox.location.href;return!n&&!i.cache&&(t=t||{},t._=Date.now()),t&&!i.upload&&(n||(t=hk(t)),wm(i)==="GET"?(t!==""&&(s+=(s.indexOf("?")>-1?"&":"?")+t),t=null):e["Content-Type"]&&e["Content-Type"].indexOf("application/x-www-form-urlencoded")>-1&&(t=t.replace(/%20/g,"+"))),{url:s,parameters:t}},bk=function(i){if(!qe())return!0;let e=!1;const t=_e.createElement("a"),n=_e.createElement("a");t.href=Ox.location.href;try{n.href=i,n.href=n.href,e=t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch{e=!0}return e},vk=Je(),il="success",oh="error",yk="timeout",Ck="nocontent",xk="parsererror",wk=function(i){return 200<=i&&i<300},Sk=function(i){return i!==204},Ek=function(i){return i.responseType&&i.responseType!=="text"||typeof i.responseText!="string"?i.response:i.responseText},Ik=function(i,e,t){const n=Ek(e);switch(t){case"jsonp":K_(n);break;case"script":K_(n),i.resolve(n,il,e);break;case"json":try{i.resolve(JSON.parse(n),il,e)}catch(s){i.reject(e,xk,s)}break;default:i.resolve(n,il,e)}},Tk=function(i,e){return i&&setTimeout(function(){e.customStatus=yk,e.abort()},i)},Dk=function(i){const e=ck.getXhr(),t=new ae,n=t.promise(),s=U(i.async)?i.async:!0,o=i.dataType,r=i.timeout||0;let a;i.crossDomain=bk(i.url);const l=o==="jsonp"||o==="script";i.cache===void 0&&(i.cache=!l);const d=gk(i),c=mk(i),h=_k(i,c),u=h.url,p=h.parameters;if(d&&(vk[d]=function(f){t.resolve(f,il,e)}),i.crossDomain&&l){const f=function(){t.reject(e,oh)},g=function(){o!=="jsonp"&&t.resolve(null,il,e)};return uk(u).then(g,f),n}if(i.crossDomain&&!("withCredentials"in e))return t.reject(e,oh),n;if(e.open(wm(i),u,s,i.username,i.password),s&&(e.timeout=r,a=Tk(r,e)),e.onreadystatechange=function(f){e.readyState===4&&(clearTimeout(a),wk(e.status)?Sk(e.status)?Ik(t,e,o):t.resolve(null,Ck,e):t.reject(e,e.customStatus||oh))},i.upload&&(e.upload.onprogress=i.upload.onprogress,e.upload.onloadstart=i.upload.onloadstart,e.upload.onabort=i.upload.onabort),i.xhrFields)for(const f in i.xhrFields)e[f]=i.xhrFields[f];i.responseType==="arraybuffer"&&(e.responseType=i.responseType);for(const f in c)Object.prototype.hasOwnProperty.call(c,f)&&U(c[f])&&e.setRequestHeader(f,c[f]);return i.beforeSend&&i.beforeSend(e),e.send(p),n.abort=function(){e.abort()},n},Ak=qn({sendRequest:Dk}),kk={},Bx=function(i,e,t){t=t||[],e=e||{};const n=function(r,a){return{name:r,args:a}},s=function(r){const a=new ae;let l,d,c,h,u;const p=function(g){const m=e.errorHandler;m&&m(g),bm(g),a.reject(g)};function f(g){switch(g.name){case"sortBy":return u=[g.args],!0;case"thenBy":if(!u)throw Ei.Error("E4004");return u.push(g.args),!0}return!1}try{l=e.adapter,Ee(l)||(l=kk[l]),d=l(e),c=[].concat(t).concat(r);const g=d.optimize;for(g&&g(c);c.length;){if(h=c[0],!f(h)){if(u){c.unshift(n("multiSort",[u])),u=null;continue}if(String(h.name)!=="enumerate"&&(!d[h.name]||d[h.name].apply(d,h.args)===!1))break}c.shift()}(function(){const m=c[0],b=[];m&&m.name==="multiSort"&&(c.shift(),ie(m.args[0],function(){b.push(n(b.length?"thenBy":"sortBy",this))})),c=b.concat(c)})(),d.exec(i).done(function(m,b){if(!c.length)a.resolve(m,b);else{let _=Wl(m,{errorHandler:e.errorHandler});ie(c,function(){_=_[this.name].apply(_,this.args)}),_.done(a.resolve).fail(a.reject)}}).fail(p)}catch(g){p(g)}return a.promise()},o={};return ie(["sortBy","thenBy","filter","slice","select","groupBy"],function(){const r=String(this);o[r]=function(){return Bx(i,e,t.concat(n(r,arguments)))}}),ie(["count","min","max","sum","avg","aggregate","enumerate"],function(){const r=String(this);o[r]=function(){return s.call(this,n(r,arguments))}}),o},Ok={array:Wl,remote:Bx},dn=function(){const i=Array.isArray(arguments[0])?"array":"remote";return Ok[i].apply(this,arguments)},jl=gs.inherit({ctor:function(i){Array.isArray(i)?i={data:i}:i=i||{},this.callBase(i);const e=i.data;if(e&&!Array.isArray(e))throw Ei.Error("E4006");this._array=e||[]},createQuery:function(){return dn(this._array,{errorHandler:this._errorHandler})},_byKeyImpl:function(i){const e=mr(this,this._array,i);return e===-1?yx(Ei.Error("E4009")):aa(this._array[e])},_insertImpl:function(i){return ym(this,this._array,i)},_pushImpl:function(i){nr({keyInfo:this,data:this._array,changes:i})},_updateImpl:function(i,e){return vm(this,this._array,i,e)},_removeImpl:function(i){return Sx(this,this._array,i)},clear:function(){this._eventsStrategy.fireEvent("modifying"),this._array=[],this._eventsStrategy.fireEvent("modified")}},"array"),Rk=["items"],Fx="canceled",G_=i=>i.state()==="pending",U_=i=>{switch(i.length){case 0:return;case 1:return i[0]}return[].slice.call(i)},Mk=(i,e,t)=>Ii(i,n=>{const s=ei(n,Rk);return ve({},s,{items:Vx(n.items,e-1,t)})}),Vx=(i,e,t)=>Array.isArray(i)?e?Mk(i,e,t):Ii(i,t):i,Pk=(i,e,t)=>{const n=t?Us(t).length:0;return Vx(i,n,e)},Nx=(i,e)=>{var t;return(t=i)!==null&&t!==void 0&&t.data&&(e=i,i=i.data),Array.isArray(i)||(i=[i]),{data:i,extra:e}},Bk=i=>{const e={};return ie(["useDefaultSearch","key","load","loadMode","cacheRawData","byKey","lookup","totalCount","insert","update","remove"],function(){e[this]=i[this],delete i[this]}),new Cu(e)},Fk=i=>{const e=i.type;return delete i.type,gs.create(e,i)},Vk=(i,e)=>new Cu({load:()=>Ak.sendRequest({url:i,dataType:"json"}),loadMode:e==null?void 0:e.fromUrlLoadMode}),Bo=(i,e)=>{let t;return typeof i=="string"&&(i={paginate:!1,store:Vk(i,e)}),i===void 0&&(i=[]),Array.isArray(i)||i instanceof gs?i={store:i}:i=Y({},i),i.store===void 0&&(i.store=[]),t=i.store,"load"in i?t=Bk(i):Array.isArray(t)?t=new jl(t):ht(t)&&(t=Fk(Y({},t))),i.store=t,i};class Nk{constructor(){this._counter=-1,this._deferreds={}}add(e){return this._counter++,this._deferreds[this._counter]=e,this._counter}remove(e){return delete this._deferreds[e]}cancel(e){return e in this._deferreds?(this._deferreds[e].reject(Fx),!0):!1}cancelAll(){for(;this._counter>-1;)this.cancel(this._counter),this._counter--}}const Dn=Lt.inherit({ctor(i){if(i=Bo(i),this._eventsStrategy=new wr(this,{syncStrategy:!0}),this._store=i.store,this._changedTime=0,i.pushAggregationTimeout!==0){const t=i.pushAggregationTimeout===void 0?()=>5*this._changedTime:i.pushAggregationTimeout;let n,s;const o=KA(r=>{n.resolve(),De(...s).done(()=>this._onPush(r)),s=void 0,n=void 0},t);this._onPushHandler=r=>{this._aggregationTimeoutId=o(r.changes),n||(n=new ae),s=r.waitFor,r.waitFor.push(n.promise())},this._store.on("beforePushAggregation",this._onPushHandler)}else this._onPushHandler=t=>this._onPush(t),this._store.on("push",this._onPushHandler);this._storeLoadOptions=this._extractLoadOptions(i),this._mapFunc=i.map,this._postProcessFunc=i.postProcess,this._pageIndex=i.pageIndex!==void 0?i.pageIndex:0,this._pageSize=i.pageSize!==void 0?i.pageSize:20,this._loadingCount=0,this._loadQueue=this._createLoadQueue(),this._searchValue="searchValue"in i?i.searchValue:null,this._searchOperation=i.searchOperation||"contains",this._searchExpr=i.searchExpr,this._paginate=i.paginate,this._reshapeOnPush=i.reshapeOnPush??!1,ie(["onChanged","onLoadError","onLoadingChanged","onCustomizeLoadResult","onCustomizeStoreLoadOptions"],(t,n)=>{n in i&&this.on(n.substr(2,1).toLowerCase()+n.substr(3),i[n])}),this._operationManager=new Nk,this._init()},_init(){this._items=[],this._userData={},this._totalCount=-1,this._isLoaded=!1,U(this._paginate)||(this._paginate=!this.group()),this._isLastPage=!this._paginate},dispose(){var i;this._store.off("beforePushAggregation",this._onPushHandler),this._store.off("push",this._onPushHandler),this._eventsStrategy.dispose(),clearTimeout(this._aggregationTimeoutId),(i=this._delayedLoadTask)===null||i===void 0||i.abort(),this._operationManager.cancelAll(),delete this._store,delete this._items,delete this._delayedLoadTask,this._disposed=!0},_extractLoadOptions(i){const e={};let t=["sort","filter","langParams","select","group","requireTotalCount"];const n=this._store._customLoadOptions();return n&&(t=t.concat(n)),ie(t,function(){e[this]=i[this]}),e},loadOptions(){return this._storeLoadOptions},items(){return this._items},pageIndex(i){if(!Wt(i))return this._pageIndex;this._pageIndex=i,this._isLastPage=!this._paginate},paginate(i){if(!hl(i))return this._paginate;this._paginate!==i&&(this._paginate=i,this.pageIndex(0))},pageSize(i){if(!Wt(i))return this._pageSize;this._pageSize=i},isLastPage(){return this._isLastPage},generateStoreLoadOptionAccessor(i){return e=>{const t=U_(e);if(t===void 0)return this._storeLoadOptions[i];this._storeLoadOptions[i]=t}},sort(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return this.generateStoreLoadOptionAccessor("sort")(e)},filter(){const i=U_(arguments);if(i===void 0)return this._storeLoadOptions.filter;this._storeLoadOptions.filter=i,this.pageIndex(0)},group(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return this.generateStoreLoadOptionAccessor("group")(e)},select(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return this.generateStoreLoadOptionAccessor("select")(e)},requireTotalCount(i){if(!hl(i))return this._storeLoadOptions.requireTotalCount;this._storeLoadOptions.requireTotalCount=i},searchValue(i){if(arguments.length<1)return this._searchValue;this._searchValue=i,this.pageIndex(0)},searchOperation(i){if(!Ke(i))return this._searchOperation;this._searchOperation=i,this.pageIndex(0)},searchExpr(i){const e=arguments.length;if(e===0)return this._searchExpr;e>1&&(i=[].slice.call(arguments)),this._searchExpr=i,this.pageIndex(0)},store(){return this._store},key(){var i;return(i=this._store)===null||i===void 0?void 0:i.key()},totalCount(){return this._totalCount},isLoaded(){return this._isLoaded},isLoading(){return this._loadingCount>0},beginLoading(){this._changeLoadingCount(1)},endLoading(){this._changeLoadingCount(-1)},_createLoadQueue:()=>ak(),_changeLoadingCount(i){const e=this.isLoading();this._loadingCount+=i;const t=this.isLoading();e^t&&this._eventsStrategy.fireEvent("loadingChanged",[t])},_scheduleLoadCallbacks(i){this.beginLoading(),i.always(()=>{this.endLoading()})},_scheduleFailCallbacks(i){var e=this;i.fail(function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];n[0]!==Fx&&e._eventsStrategy.fireEvent("loadError",n)})},_fireChanged(i){const e=new Date;this._eventsStrategy.fireEvent("changed",i),this._changedTime=new Date-e},_scheduleChangedCallbacks(i){i.done(()=>this._fireChanged())},loadSingle(i,e){const t=new ae,n=this.key(),s=this._store,o=this._createStoreLoadOptions();return this._scheduleFailCallbacks(t),arguments.length<2&&(e=i,i=n),delete o.skip,delete o.group,delete o.refresh,delete o.pageIndex,delete o.searchString,(()=>i===n||s instanceof Cu&&!s._byKeyViaLoad()?s.byKey(e,o):(o.take=1,o.filter=o.filter?[o.filter,[i,e]]:[i,e],s.load(o)))().fail(t.reject).done(r=>{const a=Array.isArray(r)&&!r.length;!U(r)||a?t.reject(new Ei.Error("E4009")):(Array.isArray(r)||(r=[r]),t.resolve(this._applyMapFunction(r)[0]))}),t.promise()},load(){const i=new ae,e=()=>{if(!this._disposed&&G_(i))return this._loadFromStore(t,i)};this._scheduleLoadCallbacks(i),this._scheduleFailCallbacks(i),this._scheduleChangedCallbacks(i);const t=this._createLoadOperation(i);return this._eventsStrategy.fireEvent("customizeStoreLoadOptions",[t]),this._loadQueue.add(()=>(typeof t.delay=="number"?this._delayedLoadTask=qf(e,t.delay):e(),i.promise())),i.promise({operationId:t.operationId})},_onPush(i){if(this._reshapeOnPush)this.load();else{const e={changes:i};this._eventsStrategy.fireEvent("changing",[e]);const t=this.group(),n=this.items();let s=0,o=this.paginate()||t?i.filter(r=>r.type==="update"):i;t&&(s=Array.isArray(t)?t.length:1),this._mapFunc&&o.forEach(r=>{r.type==="insert"&&(r.data=this._mapFunc(r.data))}),e.postProcessChanges&&(o=e.postProcessChanges(o)),nr({keyInfo:this.store(),data:n,changes:o,groupCount:s,useInsertIndex:!0}),this._fireChanged([{changes:i}])}},_createLoadOperation(i){const e=this._operationManager.add(i),t=this._createStoreLoadOptions();return this._store&&!cn(t==null?void 0:t.langParams)&&(this._store._langParams=ve({},this._store._langParams,t.langParams)),i.always(()=>this._operationManager.remove(e)),{operationId:e,storeLoadOptions:t}},reload(){return this.store()._clearCache(),this._init(),this.load()},cancel(i){return this._operationManager.cancel(i)},cancelAll(){return this._operationManager.cancelAll()},_addSearchOptions(i){this._disposed||(this.store()._useDefaultSearch?this._addSearchFilter(i):(i.searchOperation=this._searchOperation,i.searchValue=this._searchValue,i.searchExpr=this._searchExpr))},_createStoreLoadOptions(){const i=Y({},this._storeLoadOptions);return this._addSearchOptions(i),this._paginate&&this._pageSize&&(i.skip=this._pageIndex*this._pageSize,i.take=this._pageSize),i.userData=this._userData,i},_addSearchFilter(i){const e=this._searchValue,t=this._searchOperation;let n=this._searchExpr;const s=[];e&&(n||(n="this"),Array.isArray(n)||(n=[n]),ie(n,function(o,r){s.length&&s.push("or"),s.push([r,t,e])}),i.filter?i.filter=[s,i.filter]:i.filter=s)},_loadFromStore(i,e){const t=(n,s)=>{if(this._disposed||!G_(e))return;const o=Y(Nx(n,s),i);this._eventsStrategy.fireEvent("customizeLoadResult",[o]),De(o.data).done(r=>{o.data=r,this._processStoreLoadResult(o,e)}).fail(e.reject)};return i.data?new ae().resolve(i.data).done(t):this.store().load(i.storeLoadOptions).done(t).fail(e.reject)},_processStoreLoadResult(i,e){let t=i.data,n=i.extra;const s=i.storeLoadOptions,o=()=>(this._isLoaded=!0,this._totalCount=isFinite(n.totalCount)?n.totalCount:-1,e.resolve(t,n)),r=()=>{this.store().totalCount(s).done(function(a){n.totalCount=a,o()}).fail(e.reject)};this._disposed||(t=this._applyPostProcessFunction(this._applyMapFunction(t)),We(n)||(n={}),this._items=t,(!t.length||!this._paginate||this._pageSize&&t.length<this._pageSize)&&(this._isLastPage=!0),s.requireTotalCount&&!isFinite(n.totalCount)?r():o())},_applyMapFunction(i){return this._mapFunc?Pk(i,this._mapFunc,this.group()):i},_applyPostProcessFunction(i){return this._postProcessFunc?this._postProcessFunc(i):i},on(i,e){return this._eventsStrategy.on(i,e),this},off(i,e){return this._eventsStrategy.off(i,e),this}}),ha=function(i){return i===0?0:i/Math.abs(i)},Yi=function(i,e,t){const n=!e&&e!==0,s=!t&&t!==0;return n&&(e=s?i:Math.min(i,t)),s&&(t=n?i:Math.max(i,e)),Math.min(Math.max(i,e),t)},$s=function(i,e,t){return i>=e&&i<=t};function q_(i){return Math.abs(parseInt(i.toExponential().split("e")[1]))}function Lk(i){const e=i.toExponential().split("e"),t=parseFloat(e[0]);return{exponent:parseInt(e[1]),mantissa:t}}function Lx(i,e){const t=Lk(i);return parseFloat(`${t.mantissa}e${t.exponent+e}`)}function $k(){return 3e-4.toPrecision(3)!=="0.000300"}function $x(i,e){let t=Hk(e||0)+2;const n=i.toString().split("."),s=i,o=Math.abs(i);let r;const a=n_(i),l=o>1?10:0;return n.length===1?i:(a||(n_(e)&&(t=n[0].length+q_(e)),i=o,i=i-Math.floor(i)+l),t=$k()&&q_(i)>6||t>7?15:7,!a&&(r=parseFloat(i.toPrecision(t)).toString().split("."),r[0]===l.toString())?parseFloat(n[0]+"."+r[1]):parseFloat(s.toPrecision(t)))}function Hk(i){const e=i.toString();if(e.indexOf(".")<0)return 0;const t=e.split("."),n=t[1].indexOf("e");return n>=0?n:t[1].length}const zk={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function xu(i){return zk[i]}const _l=7,Ua=["millisecond","second","minute","hour","day","week","month","quarter","year"],Wk=function(i,e,t){const n=e.getTime()-i.getTime(),s=xu(t)||1;return Math.floor(n/s)},jk=function(i,e){switch(wu(i)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return e?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},Hx=function(i){let e,t,n;const s=["millisecond","second","minute","hour","day","month","year"],o={};for(e=s.length-1;e>=0;e--)n=s[e],t=Math.floor(i/xu(n)),t>0&&(o[n+"s"]=t,i-=Bc(n,t));return o},Kk=function(i){let e=0;return We(i)&&ie(i,function(t,n){e+=Bc(t.substr(0,t.length-1),n)}),Ke(i)&&(e=Bc(i,1)),e};function Bc(i,e){return xu(i)*e}function wu(i){let e=-1,t;return Ke(i)?i:We(i)?(ie(i,function(n,s){for(t=0;t<Ua.length;t++)s&&(n===Ua[t]+"s"||n===Ua[t])&&e<t&&(e=t)}),Ua[e]):""}const Gk={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"};function Uk(i){return Gk[wu(i)]||""}const zx=function(i){return Math.floor(i/3)},Wx=function(i){return 3*zx(i)};function jx(i,e,t,n){i=new Date(i.getTime());const s=new Date(i.getTime());let o,r;const a=wu(e);switch(a){case"second":i=new Date(1e3*Math.floor(s.getTime()/1e3));break;case"minute":i=new Date(6e4*Math.floor(s.getTime()/6e4));break;case"hour":i=new Date(36e5*Math.floor(s.getTime()/36e5));break;case"year":i.setMonth(0);case"month":i.setDate(1);case"day":i.setHours(0,0,0,0);break;case"week":i=Xx(i,n||0),i.setHours(0,0,0,0);break;case"quarter":o=Wx(i.getMonth()),r=i.getMonth(),i.setDate(1),i.setHours(0,0,0,0),r!==o&&i.setMonth(o)}return t&&a!=="hour"&&a!=="minute"&&a!=="second"&&Qx(s,i),i}function Kx(i){return jx(i,"day")}const qk=function(i){const e=Kx(i);return e.setDate(e.getDate()+1),new Date(e.getTime()-1)},Yk=function(i,e){let t=0;const n={year:i.getFullYear()!==e.getFullYear(),month:i.getMonth()!==e.getMonth(),day:i.getDate()!==e.getDate(),hour:i.getHours()!==e.getHours(),minute:i.getMinutes()!==e.getMinutes(),second:i.getSeconds()!==e.getSeconds(),millisecond:i.getMilliseconds()!==e.getMilliseconds()};return ie(n,function(s,o){o&&t++}),t===0&&ew(i,e)!==0&&(n.hour=!0,t++),n.count=t,n};function Gx(i,e,t){const n=new Date(i.getTime()),s=Ke(e)?qx(e.toLowerCase()):Wt(e)?Hx(e):e;return s.years&&n.setFullYear(n.getFullYear()+s.years*t),s.quarters&&n.setMonth(n.getMonth()+3*s.quarters*t),s.months&&n.setMonth(n.getMonth()+s.months*t),s.weeks&&n.setDate(n.getDate()+7*s.weeks*t),s.days&&n.setDate(n.getDate()+s.days*t),s.hours&&n.setTime(n.getTime()+36e5*s.hours*t),s.minutes&&n.setTime(n.getTime()+6e4*s.minutes*t),s.seconds&&n.setTime(n.getTime()+1e3*s.seconds*t),s.milliseconds&&n.setTime(n.getTime()+s.milliseconds*t),n}const Ux=function(i,e,t){const n=t?-1:1;return yn(i)?Gx(i,e,n):$x(i+e*n,e)},Xk=function(i,e,t){const n=[];let s;for(n.push(yn(i)?new Date(i.getTime()):i),s=i;s<e;)s=Ux(s,t),n.push(s);return n},Zk=function(i,e){if(i==="month")return Tn(e.getFullYear(),e.getMonth(),1);if(i==="year")return Tn(e.getFullYear(),0,e.getDate());if(i==="decade")return Tn(Gl(e),e.getMonth(),e.getDate());if(i==="century")return Tn(Kl(e),e.getMonth(),e.getDate())},Jk=function(i,e){if(i==="month")return Tn(e.getFullYear(),e.getMonth(),Fc(e));if(i==="year")return Tn(e.getFullYear(),11,e.getDate());if(i==="decade")return Tn(Gl(e)+9,e.getMonth(),e.getDate());if(i==="century")return Tn(Kl(e)+90,e.getMonth(),e.getDate())},Qk=function(i,e){const t=Tn(e.getFullYear(),e.getMonth(),1);return i==="month"||(t.setMonth(0),i==="year")||(i==="decade"&&t.setFullYear(Gl(e)),i==="century"&&t.setFullYear(Kl(e))),t},eO=function(i,e){const t=new Date(e);return t.setDate(Fc(e)),i==="month"||(t.setMonth(11),t.setDate(Fc(t)),i==="year")||(i==="decade"&&t.setFullYear(Gl(e)+9),i==="century"&&t.setFullYear(Kl(e)+99)),t};function Fc(i){return Tn(i.getFullYear(),i.getMonth()+1,0).getDate()}const tO=function(i){switch(i){case"month":return"year";case"year":return"decade";case"decade":return"century"}},iO=function(i){switch(i){case"century":return"decade";case"decade":return"year";case"year":return"month"}},nO=function(i){let e=1;return i==="year"&&(e=12),i==="decade"&&(e=120),i==="century"&&(e=1200),e},sO=function(i){let e=1;return i==="decade"&&(e=12),i==="century"&&(e=120),e};function qx(i){const e={};switch(i){case"year":e.years=1;break;case"month":e.months=1;break;case"quarter":e.months=3;break;case"week":e.weeks=1;break;case"day":e.days=1;break;case"hour":e.hours=1;break;case"minute":e.minutes=1;break;case"second":e.seconds=1;break;case"millisecond":e.milliseconds=1}return e}function oO(i,e){return Up(i,e)&&i.getDate()===e.getDate()}function Up(i,e){return Yx(i,e)&&i.getMonth()===e.getMonth()}function Yx(i,e){return i&&e&&i.getFullYear()===e.getFullYear()}function rO(i,e){return i&&e&&i.getHours()===e.getHours()&&i.getMinutes()===e.getMinutes()}const aO=function(i,e){if(!U(i)||!U(e))return;const t=i.getFullYear()-i.getFullYear()%10,n=e.getFullYear()-e.getFullYear()%10;return i&&e&&t===n},lO=function(i,e){if(!U(i)||!U(e))return;const t=i.getFullYear()-i.getFullYear()%100,n=e.getFullYear()-e.getFullYear()%100;return i&&e&&t===n};function Kl(i){return i&&i.getFullYear()-i.getFullYear()%100}function Gl(i){return i&&i.getFullYear()-i.getFullYear()%10}const dO=function(){return"yyyy/MM/dd"},cO=function(i){if(U(i))return Tn(i.getFullYear(),i.getMonth(),1)},uO=function(i){if(U(i))return Tn(i.getFullYear(),i.getMonth()+1,0)};function Xx(i,e){const t=(i.getDay()-e+_l)%_l,n=new Date(i);return n.setDate(i.getDate()-t),n}function Y_(i){return Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())}function hO(i){const e=Y_(i)-Y_(Zx(i.getFullYear()));return 1+Math.floor(e/xu("day"))}function Zx(i){return new Date(i,0,1)}function rh(i){return new Date(i,11,31)}function X_(i,e){let t=i.getDay()-e+1;return t<=0&&(t+=_l),t}function qp(i,e,t){const n=X_(Zx(i.getFullYear()),e),s=X_(rh(i.getFullYear()),e),o=_l-n+1;let r=Math.ceil((hO(i)-o)/7);switch(t){case"fullWeek":if(o===_l&&r++,r===0){const a=rh(i.getFullYear()-1);return qp(a,e,t)}return r;case"firstDay":{o>0&&r++;const a=n===7||s===7;return(r>52&&!a||r===54)&&(r=1),r}case"firstFourDays":{o>3&&r++;const a=n===4||s===4;if(r>52&&!a&&(r=1),r===0){const l=rh(i.getFullYear()-1);return qp(l,e,t)}return r}}}const pO=function(i,e){const t=Ae.getDatesInterval(i,e,"day");let n=new Date(i);return t>=6&&(n=new Date(n.setDate(n.getDate()+7))),n},fO=function(i,e,t,n){return n==="date"&&(e=e&&Ae.correctDateWithUnitBeginning(e,"day"),t=t&&Ae.correctDateWithUnitBeginning(t,"day"),i=i&&Ae.correctDateWithUnitBeginning(i,"day")),Jx(i,e,t)===i},mO=function(i){const{firstMin:e,firstMax:t,secondMin:n,secondMax:s}=i;return e<=n&&n<=t||e>n&&e<s||e<s&&t>s},gO=function(i){const e=Math.floor(i),t=i%1*60;return{hours:e,minutes:t}},_O=function(i,e){const t=this.dateTimeFromDecimal(e),n=new Date(i);return(i.getHours()===t.hours&&i.getMinutes()<t.minutes||i.getHours()<t.hours)&&n.setHours(t.hours,t.minutes,0,0),n};function Jx(i,e,t){let n=i;return U(i)?(U(e)&&i<e&&(n=e),U(t)&&i>t&&(n=t),n):i}function Qx(i,e){if(!U(i))return;const t=e.getHours()-i.getHours();if(t===0)return;const n=t===1||t===-23?-1:1,s=new Date(e.getTime()+36e5*n);(n>0||s.getDate()===e.getDate())&&e.setTime(s.getTime())}const bO=function(i){const e=new Date(i.getTime());return e.setHours(e.getHours()+1),e.setMinutes(0),e};function ew(i,e){return 60*(e.getTimezoneOffset()-i.getTimezoneOffset())*1e3}const vO=function(i){return new Date(i)},yO=function(i,e,t){const n=[];let s=new Date(i.getTime());for(;s<e;)n.push(new Date(s.getTime())),s=this.addInterval(s,t);return n},Tn=function(i){const e=new Date(...arguments);return e.setFullYear(i),e},CO=()=>typeof Intl<"u"?Intl.DateTimeFormat().resolvedOptions().timeZone:null,Ae={dateUnitIntervals:Ua,convertMillisecondsToDateUnits:Hx,dateToMilliseconds:Kk,getNextDateUnit:jk,convertDateUnitToMilliseconds:Bc,getDateUnitInterval:wu,getDateFormatByTickInterval:Uk,getDatesDifferences:Yk,correctDateWithUnitBeginning:jx,trimTime:Kx,setToDayEnd:qk,roundDateByStartDayHour:_O,dateTimeFromDecimal:gO,addDateInterval:Gx,addInterval:Ux,getSequenceByInterval:Xk,getDateIntervalByString:qx,sameHoursAndMinutes:rO,sameDate:oO,sameMonthAndYear:Up,sameMonth:Up,sameYear:Yx,sameDecade:aO,sameCentury:lO,getDifferenceInMonth:nO,getDifferenceInMonthForCells:sO,getFirstYearInDecade:Gl,getFirstDecadeInCentury:Kl,getShortDateFormat:dO,getViewFirstCellDate:Zk,getViewLastCellDate:Jk,getViewDown:iO,getViewUp:tO,getLastMonthDay:Fc,getLastMonthDate:uO,getFirstMonthDate:cO,getFirstWeekDate:Xx,getWeekNumber:qp,normalizeDateByWeek:pO,getQuarter:zx,getFirstQuarterMonth:Wx,dateInRange:fO,intervalsOverlap:mO,roundToHour:bO,normalizeDate:Jx,getViewMinBoundaryDate:Qk,getViewMaxBoundaryDate:eO,fixTimezoneGap:Qx,getTimezonesDifference:ew,makeDate:vO,getDatesInterval:Wk,getDatesOfInterval:yO,createDateWithFullYear:Tn,getMachineTimezoneName:CO};Ae.sameView=function(i,e,t){return Ae[fl("same "+i)](e,t)};const xO=10;function wO(i){return ha(i)*Math.round(Math.abs(i))}function SO(i,e){const t=Math.pow(xO,e),n=Lx(i,e);return wO(n)/t}function tw(i,e){const t=e||0;return(t>0?SO(...arguments):i).toFixed(t)}const EO={thousandsSeparator:",",decimalSeparator:"."},Z_="'";function IO(i){return i.split(",").slice(1).map(function(e){let t=0;return e.split("").filter(function(n,s){t+=n==="'";const o=n==="#"||n==="0",r=t%2;return o&&!r}).length})}function TO(i){const e=i.split(";");return e.length===1&&e.push("-"+e[0]),e}function ah(i){return i.toString().split("").reverse().join("")}function DO(i){return i.indexOf("%")!==-1&&!i.match(/'[^']*%[^']*'/g)}function iw(i){return i.replace(/'.+'/g,"")}function J_(i){if(!i)return 0;const e=iw(i);return e.length-e.replace(/[#]/g,"").length}function Q_(i){if(!i)return 0;const e=iw(i);return e.length-e.replace(/[0]/g,"").length}function e0(i,e,t){if(!i)return"";for(i.length>t&&(i=i.substr(0,t));i.length>e&&i.slice(-1)==="0";)i=i.substr(0,i.length-1);for(;i.length<e;)i+="0";return i}function AO(i,e,t){if(!e.length)return i;const n=[];let s=0;for(;i;){const o=e[s];if(!o)break;n.push(i.slice(0,o)),i=i.slice(o),s<e.length-1&&s++}return n.join(t)}function t0(i,e){return i.split(Z_).map(function(t,n){const s=n%2;return!t&&s?Z_:s?t:t.replace(/[,#0]+/,e)}).join("")}function kO(i){let e=!1;for(let t=0;t<i.length;t++)if(i[t]==="'"&&(e=!e),i[t]==="."&&!e)return t;return i.length}function OO(i,e){return e=e||EO,function(t){if(typeof t!="number"||isNaN(t))return"";const n=TO(i),s=1/t===1/0,o=t>0||s,r=n[o?0:1],a=kO(r),l=[r.substr(0,a),r.substr(a+1)],d=Q_(l[1]),c=d+J_(l[1]);DO(r)&&(t=Lx(t,2)),o||(t=-t);const h=Q_(l[0]),u=J_(l[0])||e.unlimitedIntegerDigits?void 0:h,p=Math.floor(t).toString().length,f=Yi(c,0,15-p),g=IO(l[0]).reverse(),m=tw(t,f<0?0:f).split(".");let b=e0(ah(m[0]),h,u);const _=e0(m[1],d,c);b=AO(b,g,e.thousandsSeparator);const w=ah(t0(ah(l[0]),b)),E=c?t0(l[1],_):"";return w+(E.match(/\d/)?e.decimalSeparator:"")+E}}function nl(i,e,t){const n=(e?.01:1)*parseFloat(i)||0;return t?-n:n}function i0(i,e,t,n){let s=i,o,r,a;do a&&(o=r.length===a.length?"0":"1",i=n?o+i:i+o),r=a||e(nl(s,t)),s=n?"1"+s:s+"1",a=e(nl(s,t));while(r!==a&&(n?r.length===a.length:r.length<=a.length));if(n&&a.length>r.length){const l=e(12345).indexOf("12345")===-1;do i="1"+i;while(l&&nl(i,t)<1e5)}return i}function n0(i,e,t,n){let s=e(nl(i,t,n));const o=i.split("."),r=o[0]+".3"+o[1].slice(1),a=nl(r,t,n),l=e(a).indexOf("3")-1;return s=s.replace(/(\d)\D(\d)/g,"$1,$2"),l>=0&&(s=s.slice(0,l)+"."+s.slice(l+1)),s=s.replace(/1+/,"1").replace(/1/g,"#"),t||(s=s.replace(/%/g,"'%'")),s}function RO(i){let e=".";const t=i(1).indexOf("100")>=0;e=i0(e,i,t,!0),e=i0(e,i,t,!1);const n=n0(e,i,t,!1),s=n0(e,i,t,!0);return s==="-"+n?n:n+";"+s}const MO={_formatNumberCore:function(i,e,t){if(e==="currency"){t.precision=t.precision||0;let n=this.format(i,Y({},t,{type:"fixedpoint"}));const s=this.getCurrencySymbol().symbol.replace(/\$/g,"$$$$");return n=n.replace(/^(\D*)(\d.*)/,"$1"+s+"$2"),n}return this.callBase.apply(this,arguments)},getCurrencySymbol:function(){return{symbol:"$"}},getOpenXmlCurrencyFormat:function(){return"$#,##0{0}_);\\($#,##0{0}\\)"}},PO=(i,e)=>{if(!e)return;let t=i;if(typeof i=="string"){t="";for(let o=0;o<i.length;o++)i[o]!=="$"&&(t+="\\"),t+=i[o]}const n={".00":"{0}","'":"\\'","\\(":"\\(","\\)":"\\)"," ":"\\ ",'"':"&quot;","\\¤":t},s=e.split(";");for(let o=0;o<s.length;o++)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[o]=s[o].replace(new RegExp(r,"g"),n[r]));return s.length===2?s[0]+"_);"+s[1]:s[0]},BO={af:"¤#,##0.00;(¤#,##0.00)","af-NA":"¤#,##0.00;(¤#,##0.00)",agq:"#,##0.00¤",ak:"¤#,##0.00",am:"¤#,##0.00;(¤#,##0.00)",ar:"¤#,##0.00;(¤#,##0.00)","ar-AE":"¤#,##0.00;(¤#,##0.00)","ar-BH":"¤#,##0.00;(¤#,##0.00)","ar-DJ":"¤#,##0.00;(¤#,##0.00)","ar-DZ":"¤#,##0.00;(¤#,##0.00)","ar-EG":"¤#,##0.00;(¤#,##0.00)","ar-EH":"¤#,##0.00;(¤#,##0.00)","ar-ER":"¤#,##0.00;(¤#,##0.00)","ar-IL":"¤#,##0.00;(¤#,##0.00)","ar-IQ":"¤#,##0.00;(¤#,##0.00)","ar-JO":"¤#,##0.00;(¤#,##0.00)","ar-KM":"¤#,##0.00;(¤#,##0.00)","ar-KW":"¤#,##0.00;(¤#,##0.00)","ar-LB":"¤#,##0.00;(¤#,##0.00)","ar-LY":"¤#,##0.00;(¤#,##0.00)","ar-MA":"¤#,##0.00;(¤#,##0.00)","ar-MR":"¤#,##0.00;(¤#,##0.00)","ar-OM":"¤#,##0.00;(¤#,##0.00)","ar-PS":"¤#,##0.00;(¤#,##0.00)","ar-QA":"¤#,##0.00;(¤#,##0.00)","ar-SA":"¤#,##0.00;(¤#,##0.00)","ar-SD":"¤#,##0.00;(¤#,##0.00)","ar-SO":"¤#,##0.00;(¤#,##0.00)","ar-SS":"¤#,##0.00;(¤#,##0.00)","ar-SY":"¤#,##0.00;(¤#,##0.00)","ar-TD":"¤#,##0.00;(¤#,##0.00)","ar-TN":"¤#,##0.00;(¤#,##0.00)","ar-YE":"¤#,##0.00;(¤#,##0.00)",as:"¤ #,##,##0.00",asa:"#,##0.00 ¤",ast:"#,##0.00 ¤",az:"#,##0.00 ¤","az-Cyrl":"#,##0.00 ¤","az-Latn":"#,##0.00 ¤",bas:"#,##0.00 ¤",be:"#,##0.00 ¤","be-tarask":"#,##0.00 ¤",bem:"¤#,##0.00;(¤#,##0.00)",bez:"#,##0.00¤",bg:"0.00 ¤;(0.00 ¤)",bm:"¤#,##0.00;(¤#,##0.00)",bn:"#,##,##0.00¤;(#,##,##0.00¤)","bn-IN":"#,##,##0.00¤;(#,##,##0.00¤)",bo:"¤ #,##0.00","bo-IN":"¤ #,##0.00",br:"#,##0.00 ¤",brx:"¤ #,##,##0.00",bs:"#,##0.00 ¤","bs-Cyrl":"#,##0.00 ¤","bs-Latn":"#,##0.00 ¤",ca:"#,##0.00 ¤;(#,##0.00 ¤)","ca-AD":"#,##0.00 ¤;(#,##0.00 ¤)","ca-ES-valencia":"#,##0.00 ¤;(#,##0.00 ¤)","ca-FR":"#,##0.00 ¤;(#,##0.00 ¤)","ca-IT":"#,##0.00 ¤;(#,##0.00 ¤)",ccp:"#,##,##0.00¤;(#,##,##0.00¤)","ccp-IN":"#,##,##0.00¤;(#,##,##0.00¤)",ce:"#,##0.00 ¤",ceb:"¤#,##0.00;(¤#,##0.00)",cgg:"¤#,##0.00",chr:"¤#,##0.00;(¤#,##0.00)",ckb:"¤ #,##0.00","ckb-IR":"¤ #,##0.00",cs:"#,##0.00 ¤",cy:"¤#,##0.00;(¤#,##0.00)",da:"#,##0.00 ¤","da-GL":"#,##0.00 ¤",dav:"¤#,##0.00;(¤#,##0.00)",de:"#,##0.00 ¤","de-AT":"#,##0.00 ¤","de-BE":"#,##0.00 ¤","de-CH":"#,##0.00 ¤","de-IT":"#,##0.00 ¤","de-LI":"#,##0.00 ¤","de-LU":"#,##0.00 ¤",dje:"#,##0.00¤",doi:"¤#,##0.00",dsb:"#,##0.00 ¤",dua:"#,##0.00 ¤",dyo:"#,##0.00 ¤",dz:"¤#,##,##0.00",ebu:"¤#,##0.00;(¤#,##0.00)",ee:"¤#,##0.00;(¤#,##0.00)","ee-TG":"¤#,##0.00;(¤#,##0.00)",el:"#,##0.00 ¤","el-CY":"#,##0.00 ¤",en:"¤#,##0.00;(¤#,##0.00)","en-001":"¤#,##0.00;(¤#,##0.00)","en-150":"#,##0.00 ¤","en-AE":"¤#,##0.00;(¤#,##0.00)","en-AG":"¤#,##0.00;(¤#,##0.00)","en-AI":"¤#,##0.00;(¤#,##0.00)","en-AS":"¤#,##0.00;(¤#,##0.00)","en-AT":"¤ #,##0.00","en-AU":"¤#,##0.00;(¤#,##0.00)","en-BB":"¤#,##0.00;(¤#,##0.00)","en-BE":"#,##0.00 ¤","en-BI":"¤#,##0.00;(¤#,##0.00)","en-BM":"¤#,##0.00;(¤#,##0.00)","en-BS":"¤#,##0.00;(¤#,##0.00)","en-BW":"¤#,##0.00;(¤#,##0.00)","en-BZ":"¤#,##0.00;(¤#,##0.00)","en-CA":"¤#,##0.00;(¤#,##0.00)","en-CC":"¤#,##0.00;(¤#,##0.00)","en-CH":"¤ #,##0.00;¤-#,##0.00","en-CK":"¤#,##0.00;(¤#,##0.00)","en-CM":"¤#,##0.00;(¤#,##0.00)","en-CX":"¤#,##0.00;(¤#,##0.00)","en-CY":"¤#,##0.00;(¤#,##0.00)","en-DE":"#,##0.00 ¤","en-DG":"¤#,##0.00;(¤#,##0.00)","en-DK":"#,##0.00 ¤","en-DM":"¤#,##0.00;(¤#,##0.00)","en-ER":"¤#,##0.00;(¤#,##0.00)","en-FI":"#,##0.00 ¤","en-FJ":"¤#,##0.00;(¤#,##0.00)","en-FK":"¤#,##0.00;(¤#,##0.00)","en-FM":"¤#,##0.00;(¤#,##0.00)","en-GB":"¤#,##0.00;(¤#,##0.00)","en-GD":"¤#,##0.00;(¤#,##0.00)","en-GG":"¤#,##0.00;(¤#,##0.00)","en-GH":"¤#,##0.00;(¤#,##0.00)","en-GI":"¤#,##0.00;(¤#,##0.00)","en-GM":"¤#,##0.00;(¤#,##0.00)","en-GU":"¤#,##0.00;(¤#,##0.00)","en-GY":"¤#,##0.00;(¤#,##0.00)","en-HK":"¤#,##0.00;(¤#,##0.00)","en-IE":"¤#,##0.00;(¤#,##0.00)","en-IL":"¤#,##0.00;(¤#,##0.00)","en-IM":"¤#,##0.00;(¤#,##0.00)","en-IN":"¤#,##0.00;(¤#,##0.00)","en-IO":"¤#,##0.00;(¤#,##0.00)","en-JE":"¤#,##0.00;(¤#,##0.00)","en-JM":"¤#,##0.00;(¤#,##0.00)","en-KE":"¤#,##0.00;(¤#,##0.00)","en-KI":"¤#,##0.00;(¤#,##0.00)","en-KN":"¤#,##0.00;(¤#,##0.00)","en-KY":"¤#,##0.00;(¤#,##0.00)","en-LC":"¤#,##0.00;(¤#,##0.00)","en-LR":"¤#,##0.00;(¤#,##0.00)","en-LS":"¤#,##0.00;(¤#,##0.00)","en-MG":"¤#,##0.00;(¤#,##0.00)","en-MH":"¤#,##0.00;(¤#,##0.00)","en-MO":"¤#,##0.00;(¤#,##0.00)","en-MP":"¤#,##0.00;(¤#,##0.00)","en-MS":"¤#,##0.00;(¤#,##0.00)","en-MT":"¤#,##0.00;(¤#,##0.00)","en-MU":"¤#,##0.00;(¤#,##0.00)","en-MV":"¤ #,##0.00","en-MW":"¤#,##0.00;(¤#,##0.00)","en-MY":"¤#,##0.00;(¤#,##0.00)","en-NA":"¤#,##0.00;(¤#,##0.00)","en-NF":"¤#,##0.00;(¤#,##0.00)","en-NG":"¤#,##0.00;(¤#,##0.00)","en-NL":"¤ #,##0.00;(¤ #,##0.00)","en-NR":"¤#,##0.00;(¤#,##0.00)","en-NU":"¤#,##0.00;(¤#,##0.00)","en-NZ":"¤#,##0.00;(¤#,##0.00)","en-PG":"¤#,##0.00;(¤#,##0.00)","en-PH":"¤#,##0.00;(¤#,##0.00)","en-PK":"¤#,##0.00;(¤#,##0.00)","en-PN":"¤#,##0.00;(¤#,##0.00)","en-PR":"¤#,##0.00;(¤#,##0.00)","en-PW":"¤#,##0.00;(¤#,##0.00)","en-RW":"¤#,##0.00;(¤#,##0.00)","en-SB":"¤#,##0.00;(¤#,##0.00)","en-SC":"¤#,##0.00;(¤#,##0.00)","en-SD":"¤#,##0.00;(¤#,##0.00)","en-SE":"#,##0.00 ¤","en-SG":"¤#,##0.00;(¤#,##0.00)","en-SH":"¤#,##0.00;(¤#,##0.00)","en-SI":"#,##0.00 ¤;(#,##0.00 ¤)","en-SL":"¤#,##0.00;(¤#,##0.00)","en-SS":"¤#,##0.00;(¤#,##0.00)","en-SX":"¤#,##0.00;(¤#,##0.00)","en-SZ":"¤#,##0.00;(¤#,##0.00)","en-TC":"¤#,##0.00;(¤#,##0.00)","en-TK":"¤#,##0.00;(¤#,##0.00)","en-TO":"¤#,##0.00;(¤#,##0.00)","en-TT":"¤#,##0.00;(¤#,##0.00)","en-TV":"¤#,##0.00;(¤#,##0.00)","en-TZ":"¤#,##0.00;(¤#,##0.00)","en-UG":"¤#,##0.00;(¤#,##0.00)","en-UM":"¤#,##0.00;(¤#,##0.00)","en-VC":"¤#,##0.00;(¤#,##0.00)","en-VG":"¤#,##0.00;(¤#,##0.00)","en-VI":"¤#,##0.00;(¤#,##0.00)","en-VU":"¤#,##0.00;(¤#,##0.00)","en-WS":"¤#,##0.00;(¤#,##0.00)","en-ZA":"¤#,##0.00;(¤#,##0.00)","en-ZM":"¤#,##0.00;(¤#,##0.00)","en-ZW":"¤#,##0.00;(¤#,##0.00)",eo:"¤ #,##0.00",es:"#,##0.00 ¤","es-419":"¤#,##0.00","es-AR":"¤ #,##0.00;(¤ #,##0.00)","es-BO":"¤#,##0.00","es-BR":"¤#,##0.00","es-BZ":"¤#,##0.00","es-CL":"¤#,##0.00","es-CO":"¤#,##0.00","es-CR":"¤#,##0.00","es-CU":"¤#,##0.00","es-DO":"¤#,##0.00;(¤#,##0.00)","es-EA":"#,##0.00 ¤","es-EC":"¤#,##0.00","es-GQ":"#,##0.00 ¤","es-GT":"¤#,##0.00","es-HN":"¤#,##0.00","es-IC":"#,##0.00 ¤","es-MX":"¤#,##0.00","es-NI":"¤#,##0.00","es-PA":"¤#,##0.00","es-PE":"¤#,##0.00","es-PH":"#,##0.00 ¤","es-PR":"¤#,##0.00","es-PY":"¤#,##0.00","es-SV":"¤#,##0.00","es-US":"¤#,##0.00","es-UY":"¤ #,##0.00;(¤ #,##0.00)","es-VE":"¤#,##0.00",et:"#,##0.00 ¤;(#,##0.00 ¤)",eu:"#,##0.00 ¤;(#,##0.00 ¤)",ewo:"#,##0.00 ¤",fa:"‎¤ #,##0.00;‎(¤ #,##0.00)","fa-AF":"¤ #,##0.00;‎(¤ #,##0.00)",ff:"#,##0.00 ¤","ff-Adlm":"¤ #,##0.00","ff-Adlm-BF":"¤ #,##0.00","ff-Adlm-CM":"¤ #,##0.00","ff-Adlm-GH":"¤ #,##0.00","ff-Adlm-GM":"¤ #,##0.00","ff-Adlm-GW":"¤ #,##0.00","ff-Adlm-LR":"¤ #,##0.00","ff-Adlm-MR":"¤ #,##0.00","ff-Adlm-NE":"¤ #,##0.00","ff-Adlm-NG":"¤ #,##0.00","ff-Adlm-SL":"¤ #,##0.00","ff-Adlm-SN":"¤ #,##0.00","ff-Latn":"#,##0.00 ¤","ff-Latn-BF":"#,##0.00 ¤","ff-Latn-CM":"#,##0.00 ¤","ff-Latn-GH":"#,##0.00 ¤","ff-Latn-GM":"#,##0.00 ¤","ff-Latn-GN":"#,##0.00 ¤","ff-Latn-GW":"#,##0.00 ¤","ff-Latn-LR":"#,##0.00 ¤","ff-Latn-MR":"#,##0.00 ¤","ff-Latn-NE":"#,##0.00 ¤","ff-Latn-NG":"#,##0.00 ¤","ff-Latn-SL":"#,##0.00 ¤",fi:"#,##0.00 ¤",fil:"¤#,##0.00;(¤#,##0.00)",fo:"#,##0.00 ¤;(#,##0.00 ¤)","fo-DK":"#,##0.00 ¤;(#,##0.00 ¤)",fr:"#,##0.00 ¤;(#,##0.00 ¤)","fr-BE":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BI":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BJ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BL":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CA":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CD":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CG":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CH":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CI":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CM":"#,##0.00 ¤;(#,##0.00 ¤)","fr-DJ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-DZ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GA":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GN":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GP":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GQ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-HT":"#,##0.00 ¤;(#,##0.00 ¤)","fr-KM":"#,##0.00 ¤;(#,##0.00 ¤)","fr-LU":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MA":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MC":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MG":"#,##0.00 ¤;(#,##0.00 ¤)","fr-ML":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MQ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MR":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MU":"#,##0.00 ¤;(#,##0.00 ¤)","fr-NC":"#,##0.00 ¤;(#,##0.00 ¤)","fr-NE":"#,##0.00 ¤;(#,##0.00 ¤)","fr-PF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-PM":"#,##0.00 ¤;(#,##0.00 ¤)","fr-RE":"#,##0.00 ¤;(#,##0.00 ¤)","fr-RW":"#,##0.00 ¤;(#,##0.00 ¤)","fr-SC":"#,##0.00 ¤;(#,##0.00 ¤)","fr-SN":"#,##0.00 ¤;(#,##0.00 ¤)","fr-SY":"#,##0.00 ¤;(#,##0.00 ¤)","fr-TD":"#,##0.00 ¤;(#,##0.00 ¤)","fr-TG":"#,##0.00 ¤;(#,##0.00 ¤)","fr-TN":"#,##0.00 ¤;(#,##0.00 ¤)","fr-VU":"#,##0.00 ¤;(#,##0.00 ¤)","fr-WF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-YT":"#,##0.00 ¤;(#,##0.00 ¤)",fur:"¤ #,##0.00",fy:"¤ #,##0.00;(¤ #,##0.00)",ga:"¤#,##0.00;(¤#,##0.00)","ga-GB":"¤#,##0.00;(¤#,##0.00)",gd:"¤#,##0.00;(¤#,##0.00)",gl:"#,##0.00 ¤",gsw:"#,##0.00 ¤","gsw-FR":"#,##0.00 ¤","gsw-LI":"#,##0.00 ¤",gu:"¤#,##,##0.00;(¤#,##,##0.00)",guz:"¤#,##0.00;(¤#,##0.00)",gv:"¤#,##0.00",ha:"¤ #,##0.00","ha-GH":"¤ #,##0.00","ha-NE":"¤ #,##0.00",haw:"¤#,##0.00;(¤#,##0.00)",he:"#,##0.00 ¤",hi:"¤#,##,##0.00","hi-Latn":"¤#,##,##0.00",hr:"#,##0.00 ¤","hr-BA":"#,##0.00 ¤",hsb:"#,##0.00 ¤",hu:"#,##0.00 ¤",hy:"#,##0.00 ¤",ia:"¤ #,##0.00;(¤ #,##0.00)",id:"¤#,##0.00",ig:"¤#,##0.00;(¤#,##0.00)",ii:"¤ #,##0.00",is:"#,##0.00 ¤",it:"#,##0.00 ¤","it-CH":"#,##0.00 ¤","it-SM":"#,##0.00 ¤","it-VA":"#,##0.00 ¤",ja:"¤#,##0.00;(¤#,##0.00)",jgo:"¤ #,##0.00",jmc:"¤#,##0.00",jv:"¤ #,##0.00",ka:"#,##0.00 ¤",kab:"#,##0.00¤",kam:"¤#,##0.00;(¤#,##0.00)",kde:"¤#,##0.00;(¤#,##0.00)",kea:"#,##0.00 ¤;(#,##0.00 ¤)",kgp:"¤ #,##0.00",khq:"#,##0.00¤",ki:"¤#,##0.00;(¤#,##0.00)",kk:"#,##0.00 ¤",kkj:"¤ #,##0.00",kl:"¤#,##0.00;¤-#,##0.00",kln:"¤#,##0.00;(¤#,##0.00)",km:"#,##0.00¤;(#,##0.00¤)",kn:"¤#,##0.00;(¤#,##0.00)",ko:"¤#,##0.00;(¤#,##0.00)","ko-KP":"¤#,##0.00;(¤#,##0.00)",kok:"¤#,##0.00;(¤#,##0.00)",ks:"¤#,##0.00","ks-Arab":"¤#,##0.00","ks-Deva":"¤ #,##0.00",ksb:"#,##0.00¤",ksf:"#,##0.00 ¤",ksh:"#,##0.00 ¤",ku:"#,##0.00 ¤;(#,##0.00 ¤)",kw:"¤#,##0.00",ky:"#,##0.00 ¤",lag:"¤ #,##0.00",lb:"#,##0.00 ¤",lg:"#,##0.00¤",lkt:"¤ #,##0.00",ln:"#,##0.00 ¤","ln-AO":"#,##0.00 ¤","ln-CF":"#,##0.00 ¤","ln-CG":"#,##0.00 ¤",lo:"¤#,##0.00;¤-#,##0.00",lrc:"¤ #,##0.00","lrc-IQ":"¤ #,##0.00",lt:"#,##0.00 ¤",lu:"#,##0.00¤",luo:"#,##0.00¤",luy:"¤#,##0.00;¤- #,##0.00",lv:"#,##0.00 ¤",mai:"¤ #,##0.00",mas:"¤#,##0.00;(¤#,##0.00)","mas-TZ":"¤#,##0.00;(¤#,##0.00)",mer:"¤#,##0.00;(¤#,##0.00)",mfe:"¤ #,##0.00",mg:"¤#,##0.00",mgh:"¤ #,##0.00",mgo:"¤ #,##0.00",mi:"¤ #,##0.00",mk:"#,##0.00 ¤",ml:"¤#,##0.00;(¤#,##0.00)",mn:"¤ #,##0.00",mni:"¤ #,##0.00","mni-Beng":"¤ #,##0.00",mr:"¤#,##0.00;(¤#,##0.00)",ms:"¤#,##0.00;(¤#,##0.00)","ms-BN":"¤#,##0.00;(¤#,##0.00)","ms-ID":"¤#,##0.00","ms-SG":"¤#,##0.00;(¤#,##0.00)",mt:"¤#,##0.00",mua:"¤#,##0.00;(¤#,##0.00)",my:"¤ #,##0.00",mzn:"¤ #,##0.00",naq:"¤#,##0.00",nb:"¤ #,##0.00;(¤ #,##0.00)","nb-SJ":"¤ #,##0.00;(¤ #,##0.00)",nd:"¤#,##0.00;(¤#,##0.00)",nds:"¤ #,##0.00","nds-NL":"¤ #,##0.00",ne:"¤ #,##,##0.00","ne-IN":"¤ #,##,##0.00",nl:"¤ #,##0.00;(¤ #,##0.00)","nl-AW":"¤ #,##0.00;(¤ #,##0.00)","nl-BE":"¤ #,##0.00;(¤ #,##0.00)","nl-BQ":"¤ #,##0.00;(¤ #,##0.00)","nl-CW":"¤ #,##0.00;(¤ #,##0.00)","nl-SR":"¤ #,##0.00;(¤ #,##0.00)","nl-SX":"¤ #,##0.00;(¤ #,##0.00)",nmg:"#,##0.00 ¤",nn:"#,##0.00 ¤",nnh:"¤ #,##0.00",no:"¤ #,##0.00;(¤ #,##0.00)",nus:"¤#,##0.00;(¤#,##0.00)",nyn:"¤#,##0.00",om:"¤#,##0.00","om-KE":"¤#,##0.00",or:"¤#,##0.00;(¤#,##0.00)",os:"¤ #,##0.00","os-RU":"¤ #,##0.00",pa:"¤ #,##0.00","pa-Arab":"¤ #,##0.00","pa-Guru":"¤ #,##0.00",pcm:"¤#,##0.00",pl:"#,##0.00 ¤;(#,##0.00 ¤)",ps:"¤#,##0.00;(¤#,##0.00)","ps-PK":"¤#,##0.00;(¤#,##0.00)",pt:"¤ #,##0.00","pt-AO":"#,##0.00 ¤;(#,##0.00 ¤)","pt-CH":"#,##0.00 ¤;(#,##0.00 ¤)","pt-CV":"#,##0.00 ¤;(#,##0.00 ¤)","pt-GQ":"#,##0.00 ¤;(#,##0.00 ¤)","pt-GW":"#,##0.00 ¤;(#,##0.00 ¤)","pt-LU":"#,##0.00 ¤;(#,##0.00 ¤)","pt-MO":"#,##0.00 ¤;(#,##0.00 ¤)","pt-MZ":"#,##0.00 ¤;(#,##0.00 ¤)","pt-PT":"#,##0.00 ¤;(#,##0.00 ¤)","pt-ST":"#,##0.00 ¤;(#,##0.00 ¤)","pt-TL":"#,##0.00 ¤;(#,##0.00 ¤)",qu:"¤ #,##0.00","qu-BO":"¤ #,##0.00","qu-EC":"¤ #,##0.00",rm:"#,##0.00 ¤",rn:"#,##0.00¤",ro:"#,##0.00 ¤;(#,##0.00 ¤)","ro-MD":"#,##0.00 ¤;(#,##0.00 ¤)",rof:"¤#,##0.00",ru:"#,##0.00 ¤","ru-BY":"#,##0.00 ¤","ru-KG":"#,##0.00 ¤","ru-KZ":"#,##0.00 ¤","ru-MD":"#,##0.00 ¤","ru-UA":"#,##0.00 ¤",rw:"¤ #,##0.00",rwk:"#,##0.00¤",sa:"¤ #,##0.00",sah:"#,##0.00 ¤",saq:"¤#,##0.00;(¤#,##0.00)",sat:"¤ #,##0.00","sat-Olck":"¤ #,##0.00",sbp:"#,##0.00¤",sc:"#,##0.00 ¤",sd:"¤ #,##0.00","sd-Arab":"¤ #,##0.00","sd-Deva":"¤ #,##0.00",se:"#,##0.00 ¤","se-FI":"#,##0.00 ¤","se-SE":"#,##0.00 ¤",seh:"#,##0.00¤",ses:"#,##0.00¤",sg:"¤#,##0.00;¤-#,##0.00",shi:"#,##0.00¤","shi-Latn":"#,##0.00¤","shi-Tfng":"#,##0.00¤",si:"¤#,##0.00;(¤#,##0.00)",sk:"#,##0.00 ¤;(#,##0.00 ¤)",sl:"#,##0.00 ¤;(#,##0.00 ¤)",smn:"#,##0.00 ¤",sn:"¤#,##0.00;(¤#,##0.00)",so:"¤#,##0.00;(¤#,##0.00)","so-DJ":"¤#,##0.00;(¤#,##0.00)","so-ET":"¤#,##0.00;(¤#,##0.00)","so-KE":"¤#,##0.00;(¤#,##0.00)",sq:"#,##0.00 ¤;(#,##0.00 ¤)","sq-MK":"#,##0.00 ¤;(#,##0.00 ¤)","sq-XK":"#,##0.00 ¤;(#,##0.00 ¤)",sr:"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl-BA":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl-ME":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl-XK":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn-BA":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn-ME":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn-XK":"#,##0.00 ¤;(#,##0.00 ¤)",su:"¤#,##0.00","su-Latn":"¤#,##0.00",sv:"#,##0.00 ¤","sv-AX":"#,##0.00 ¤","sv-FI":"#,##0.00 ¤",sw:"¤ #,##0.00","sw-CD":"¤ #,##0.00","sw-KE":"¤ #,##0.00","sw-UG":"¤ #,##0.00",ta:"¤#,##0.00;(¤#,##0.00)","ta-LK":"¤#,##0.00;(¤#,##0.00)","ta-MY":"¤#,##0.00;(¤#,##0.00)","ta-SG":"¤#,##0.00;(¤#,##0.00)",te:"¤#,##0.00;(¤#,##0.00)",teo:"¤#,##0.00;(¤#,##0.00)","teo-KE":"¤#,##0.00;(¤#,##0.00)",tg:"#,##0.00 ¤",th:"¤#,##0.00;(¤#,##0.00)",ti:"¤#,##0.00","ti-ER":"¤#,##0.00",tk:"#,##0.00 ¤",to:"¤ #,##0.00",tr:"¤#,##0.00;(¤#,##0.00)","tr-CY":"¤#,##0.00;(¤#,##0.00)",tt:"#,##0.00 ¤",twq:"#,##0.00¤",tzm:"#,##0.00 ¤",ug:"¤#,##0.00;(¤#,##0.00)",uk:"#,##0.00 ¤",und:"¤ #,##0.00",ur:"¤#,##0.00;(¤#,##0.00)","ur-IN":"¤#,##0.00;(¤#,##0.00)",uz:"#,##0.00 ¤","uz-Arab":"¤ #,##0.00","uz-Cyrl":"#,##0.00 ¤","uz-Latn":"#,##0.00 ¤",vai:"¤#,##0.00;(¤#,##0.00)","vai-Latn":"¤#,##0.00;(¤#,##0.00)","vai-Vaii":"¤#,##0.00;(¤#,##0.00)",vi:"#,##0.00 ¤",vun:"¤#,##0.00",wae:"¤ #,##0.00",wo:"¤ #,##0.00",xh:"¤#,##0.00",xog:"#,##0.00 ¤",yav:"#,##0.00 ¤;(#,##0.00 ¤)",yi:"¤ #,##0.00",yo:"¤#,##0.00;(¤#,##0.00)","yo-BJ":"¤#,##0.00;(¤#,##0.00)",yrl:"¤ #,##0.00","yrl-CO":"¤ #,##0.00","yrl-VE":"¤ #,##0.00",yue:"¤#,##0.00;(¤#,##0.00)","yue-Hans":"¤#,##0.00;(¤#,##0.00)","yue-Hant":"¤#,##0.00;(¤#,##0.00)",zgh:"#,##0.00¤",zh:"¤#,##0.00;(¤#,##0.00)","zh-Hans":"¤#,##0.00;(¤#,##0.00)","zh-Hans-HK":"¤#,##0.00;(¤#,##0.00)","zh-Hans-MO":"¤#,##0.00;(¤#,##0.00)","zh-Hans-SG":"¤#,##0.00;(¤#,##0.00)","zh-Hant":"¤#,##0.00;(¤#,##0.00)","zh-Hant-HK":"¤#,##0.00;(¤#,##0.00)","zh-Hant-MO":"¤#,##0.00;(¤#,##0.00)",zu:"¤#,##0.00;(¤#,##0.00)"},FO=["standard","accounting"],VO=/([^\s0]+)?(\s*)0*[.,]*0*(\s*)([^\s0]+)?/,lh={},s0=i=>{const e=Kn.locale()+"/"+JSON.stringify(i);return lh[e]||(lh[e]=new Intl.NumberFormat(Kn.locale(),i).format),lh[e]},NO=i=>new Intl.NumberFormat(Kn.locale(),{style:"currency",currency:i}),LO={engine:function(){return"intl"},_formatNumberCore:function(i,e,t){return e==="exponential"?this.callBase.apply(this,arguments):s0(this._normalizeFormatConfig(e,t,i))(i)},_normalizeFormatConfig:function(i,e,t){let n;if(i==="decimal"){const s=String(t).split(".")[1];n={minimumIntegerDigits:e.precision||void 0,useGrouping:!1,maximumFractionDigits:s&&s.length,round:t<0?"ceil":"floor"}}else n=this._getPrecisionConfig(e.precision);if(i==="percent")n.style="percent";else if(i==="currency"){const s=e.useCurrencyAccountingStyle??$t().defaultUseCurrencyAccountingStyle;n.style="currency",n.currency=e.currency||$t().defaultCurrency,n.currencySign=FO[+s]}return n},_getPrecisionConfig:function(i){let e;return i===null?e={minimumFractionDigits:0,maximumFractionDigits:20}:e={minimumFractionDigits:i||0,maximumFractionDigits:i||0},e},format:function(i,e){return typeof i!="number"?i:(e=this._normalizeFormat(e),e.currency==="default"&&(e.currency=$t().defaultCurrency),!e||typeof e!="function"&&!e.type&&!e.formatter?s0(e)(i):this.callBase.apply(this,arguments))},_getCurrencySymbolInfo:function(i){const e=NO(i);return this._extractCurrencySymbolInfo(e.format(0))},_extractCurrencySymbolInfo:function(i){const e=VO.exec(i)||[],t=e[1]?"before":"after",n=e[1]||e[4]||"",s=e[2]||e[3]||"";return{position:t,symbol:n,delimiter:s}},getCurrencySymbol:function(i){return i||(i=$t().defaultCurrency),{symbol:this._getCurrencySymbolInfo(i).symbol}},getOpenXmlCurrencyFormat:function(i){const e=i||$t().defaultCurrency,t=this._getCurrencySymbolInfo(e).symbol,n=Kn.getValueByClosestLocale(s=>BO[s]);return PO(t,n)}},$O=typeof Intl<"u",o0=["currency","fixedpoint","exponential","percent","decimal"],dh={1:"K",2:"M",3:"B",4:"T"},r0={largenumber:"auto",thousands:1,millions:2,billions:3,trillions:4},Gt=qn({engine:function(){return"base"},numericFormats:o0,defaultLargeNumberFormatPostfixes:dh,_parseNumberFormatString:function(i){const e={};if(!i||typeof i!="string")return;const t=i.toLowerCase().split(" ");if(ie(t,(n,s)=>{o0.includes(s)?e.formatType=s:s in r0&&(e.power=r0[s])}),e.power&&!e.formatType&&(e.formatType="fixedpoint"),e.formatType)return e},_calculateNumberPower:function(i,e,t,n){let s=Math.abs(i),o=0;if(s>1)for(;s&&s>=e&&(n===void 0||o<n);)o++,s/=e;else if(s>0&&s<1)for(;s<1&&(t===void 0||o>t);)o--,s*=e;return o},_getNumberByPower:function(i,e,t){let n=i;for(;e>0;)n/=t,e--;for(;e<0;)n*=t,e++;return n},_formatNumber:function(i,e,t){e.power==="auto"&&(e.power=this._calculateNumberPower(i,1e3,0,4)),e.power&&(i=this._getNumberByPower(i,e.power,1e3));const n=this.defaultLargeNumberFormatPostfixes[e.power]||"";let s=this._formatNumberCore(i,e.formatType,t);return s=s.replace(/(\d|.$)(\D*)$/,"$1"+n+"$2"),s},_formatNumberExponential:function(i,e){let t=this._calculateNumberPower(i,10),n=this._getNumberByPower(i,t,10);e.precision===void 0&&(e.precision=1),n.toFixed(e.precision||0)>=10&&(t++,n/=10);const s=(t>=0?"+":"")+t.toString();return this._formatNumberCore(n,"fixedpoint",e)+"E"+s},_addZeroes:function(i,e){const t=Math.pow(10,e),n=i<0?"-":"";i=(Math.abs(i)*t>>>0)/t;let s=i.toString();for(;s.length<e;)s="0"+s;return n+s},_addGroupSeparators:function(i){const e=i.toString().split(".");return e[0].replace(/\B(?=(\d{3})+(?!\d))/g,$t().thousandsSeparator)+(e[1]?$t().decimalSeparator+e[1]:"")},_formatNumberCore:function(i,e,t){return e==="exponential"?this._formatNumberExponential(i,t):(e!=="decimal"&&t.precision!==null&&(t.precision=t.precision||0),e==="percent"&&(i*=100),t.precision!==void 0&&(e==="decimal"?i=this._addZeroes(i,t.precision):i=t.precision===null?i.toPrecision():tw(i,t.precision)),e!=="decimal"?i=this._addGroupSeparators(i):i=i.toString().replace(".",$t().decimalSeparator),e==="percent"&&(i+="%"),i)},_normalizeFormat:function(i){return i?(typeof i=="function"||ht(i)||(i={type:i}),i):{}},_getSeparators:function(){return{decimalSeparator:this.getDecimalSeparator(),thousandsSeparator:this.getThousandsSeparator()}},getThousandsSeparator:function(){return this.format(1e4,"fixedPoint")[2]},getDecimalSeparator:function(){return this.format(1.2,{type:"fixedPoint",precision:1})[1]},convertDigits:function(i,e){const t=this.format(90,"decimal");if(typeof i!="string"||t[1]==="0")return i;const n=e?t[1]:"0",s=e?"0":t[1],o=e?t[0]:"9",r=new RegExp("["+n+"-"+o+"]","g");return i.replace(r,a=>String.fromCharCode(a.charCodeAt(0)+(s.charCodeAt(0)-n.charCodeAt(0))))},getNegativeEtalonRegExp:function(i){const e=this._getSeparators(),t=new RegExp("[0-9"+Co(e.decimalSeparator+e.thousandsSeparator)+"]+","g");let n=this.format(-1,i).replace(t,"1");return["\\","(",")","[","]","*","+","$","^","?","|","{","}"].forEach(s=>{n=n.replace(new RegExp(`\\${s}`,"g"),`\\${s}`)}),n=n.replace(/ /g,"\\s"),n=n.replace(/1/g,".*"),new RegExp(n,"g")},getSign:function(i,e){if(!e)return i.replace(/[^0-9-]/g,"").charAt(0)==="-"?-1:1;const t=this.getNegativeEtalonRegExp(e);return i.match(t)?-1:1},format:function(i,e){if(typeof i!="number"||typeof e=="number")return i;if(e=e&&e.formatter||e,typeof e=="function")return e(i);e=this._normalizeFormat(e),e.type||(e.type="decimal");const t=this._parseNumberFormatString(e.type);if(!t){const n=this._getSeparators();return n.unlimitedIntegerDigits=e.unlimitedIntegerDigits,this.convertDigits(OO(e.type,n)(i))}return this._formatNumber(i,t,e)},parse:function(i,e){if(!i)return;if(e&&e.parser)return e.parser(i);i=this.convertDigits(i,!0),e&&typeof e!="string"&&Pt.log("W0011");const t=this.getDecimalSeparator(),n=new RegExp("[^0-9"+Co(t)+"]","g"),s=i.replace(n,"").replace(t,".").replace(/\.$/g,"");if(s==="."||s==="")return null;if(this._calcSignificantDigits(s)>15)return NaN;let o=+s*this.getSign(i,e);e=this._normalizeFormat(e);const r=this._parseNumberFormatString(e.type);let a=r==null?void 0:r.power;if(a){if(a==="auto"){const l=i.match(/\d(K|M|B|T)/);l&&(a=Object.keys(dh).find(d=>dh[d]===l[1]))}o*=Math.pow(10,3*a)}return(r==null?void 0:r.formatType)==="percent"&&(o/=100),o},_calcSignificantDigits:function(i){const[e,t]=i.split("."),n=o=>{let r=-1;for(let a=0;a<o.length;a++)if(o[a]!=="0"){r=a;break}return r>-1?o.length-r:0};let s=0;return e&&(s+=n(e.split(""))),t&&(s+=n(t.split("").reverse())),s}});Gt.inject(MO);$O&&Gt.inject(LO);function Fn(i,e){for(;i.length<e;)i="0"+i;return i}const ka={3:"abbreviated",4:"wide",5:"narrow"},Yp={y:function(i,e,t){let n=i[t?"getUTCFullYear":"getFullYear"]();return e===2&&(n%=100),Fn(n.toString(),e)},M:function(i,e,t,n){const s=i[t?"getUTCMonth":"getMonth"](),o=ka[e];return o?n.getMonthNames(o,"format")[s]:Fn((s+1).toString(),Math.min(e,2))},L:function(i,e,t,n){const s=i[t?"getUTCMonth":"getMonth"](),o=ka[e];return o?n.getMonthNames(o,"standalone")[s]:Fn((s+1).toString(),Math.min(e,2))},Q:function(i,e,t,n){const s=i[t?"getUTCMonth":"getMonth"](),o=Math.floor(s/3),r=ka[e];return r?n.getQuarterNames(r)[o]:Fn((o+1).toString(),Math.min(e,2))},E:function(i,e,t,n){const s=i[t?"getUTCDay":"getDay"](),o=ka[e<3?3:e];return n.getDayNames(o)[s]},a:function(i,e,t,n){const o=i[t?"getUTCHours":"getHours"]()<12?0:1,r=ka[e];return n.getPeriodNames(r)[o]},d:function(i,e,t){return Fn(i[t?"getUTCDate":"getDate"]().toString(),Math.min(e,2))},H:function(i,e,t){return Fn(i[t?"getUTCHours":"getHours"]().toString(),Math.min(e,2))},h:function(i,e,t){const n=i[t?"getUTCHours":"getHours"]();return Fn((n%12||12).toString(),Math.min(e,2))},m:function(i,e,t){return Fn(i[t?"getUTCMinutes":"getMinutes"]().toString(),Math.min(e,2))},s:function(i,e,t){return Fn(i[t?"getUTCSeconds":"getSeconds"]().toString(),Math.min(e,2))},S:function(i,e,t){return Fn(i[t?"getUTCMilliseconds":"getMilliseconds"]().toString(),3).substr(0,e)},x:function(i,e,t){const n=t?0:i.getTimezoneOffset(),s=n>0?"-":"+",o=Math.abs(n),r=Math.floor(o/60),a=o%60,l=Fn(r.toString(),2),d=Fn(a.toString(),2);return s+l+(e>=3?":":"")+(e>1||a?d:"")},X:function(i,e,t){return t||!i.getTimezoneOffset()?"Z":Yp.x(i,e,t)},Z:function(i,e,t){return Yp.X(i,e>=5?3:2,t)}},nw=function(i,e){return function(t){let n,s,o,r=0,a=!1,l,d="";if(!t)return null;if(!i)return t;const c=i[i.length-1]==="Z"||i.slice(-3)==="'Z'";for(n=0;n<i.length;n++)o=i[n],s=Yp[o],l=o===i[n+1],r++,l||(s&&!a&&(d+=s(t,r,c,e)),r=0),o==="'"&&!l?a=!a:(a||!s)&&(d+=o),o==="'"&&l&&n++;return d}},sw=" .,:;/\\<>()-[]،",xo=function(i){const e=i&&Gt.convertDigits(i,!1).charCodeAt(0),t=Gt.convertDigits("0",!1).charCodeAt(0);return t<=e&&e<t+10},HO=function(i,e,t,n){const s=i[t],o=i[t+1];if(!n&&(s==="."||s===" "&&i.slice(t-1,t+3)===". m."||s==="-"&&!xo(o)))return!0;const r=n&&e.some(a=>i[t]!==a[t]);return sw.indexOf(s)<0&&n===xo(s)&&(!n||r)},zO=function(i,e){if(!xo(i[e]))for(;e>0&&!xo(i[e-1])&&(i[e-1]==="."||sw.indexOf(i[e-1])<0);)e--;return e},WO=function(i,e,t,n){let s=0;const o=[],r=function(a){return i[s]!==a[s]&&(n===void 0||xo(i[s])===n)};for(Array.isArray(e)||(e=[e]),s=0;s<i.length;s++)if(t.indexOf(s)<0&&e.filter(r).length){s=zO(i,s);do{if(n=xo(i[s]),!o.length&&!n&&xo(e[0][s]))break;o.push(s),t.unshift(s),s++}while(i[s]&&HO(i,e,s,n));break}return o.length===1&&(i[t[0]-1]==="0"||i[t[0]-1]==="٠")&&t.unshift(t[0]-1),o},jO=function(i,e,t,n){const s=e[0],o=s<n.length?n[s]:s;return e.forEach(function(r,a){i=i.substr(0,o+a)+(t.length>1?t[a]:t)+i.substr(o+a+1)}),e.length===1&&(i=i.replace("0"+t,t+t),i=i.replace("٠"+t,t+t)),i},KO=function(i,e,t,n){let s,o,r;if(!xo(i[e[0]]||"0")){const a=Math.max(e.length<=3?3:4,t.length);for(;e.length>a;){for(o=e.pop(),r=n[o],n[o]=-1,s=o+1;s<n.length;s++)n[s]--;i=i.substr(0,r)+i.substr(r+1)}for(o=e[e.length-1]+1,r=o<n.length?n[o]:o;e.length<a;){for(e.push(e[e.length-1]+1),s=o;s<n.length;s++)n[s]++;i=i.substr(0,r)+" "+i.substr(r)}}return i=jO(i,e,t,n),i},a0=function(i,e){return Array.isArray(i)?i.map(function(t){return(e(t)||"").toString()}):(e(i)||"").toString()},GO=/[a-zA-Z]/g,UO=function(i,e,t,n){const s=e.split("").map(function(o,r){return t.indexOf(r)<0&&(o.match(GO)||o==="'")?n[r]:-1});return i=i.split("").map(function(o,r){let a=o;const l=s.indexOf(r)>=0,d=r>0&&s.indexOf(r-1)>=0,c=s.indexOf(r+1)>=0;return l&&(d||(a="'"+a),c||(a+="'")),a}).join(""),i},ow=function(i){const e=[],t=a0(new Date(2009,8,8,6,5,4),i),n=t.split("").map(function(a,l){return l});let s=t;const o={},r=[{date:new Date(2009,8,8,6,5,4,111),pattern:"S"},{date:new Date(2009,8,8,6,5,2),pattern:"s"},{date:new Date(2009,8,8,6,2,4),pattern:"m"},{date:new Date(2009,8,8,18,5,4),pattern:"H",isDigit:!0},{date:new Date(2009,8,8,2,5,4),pattern:"h",isDigit:!0},{date:new Date(2009,8,8,18,5,4),pattern:"a",isDigit:!1},{date:new Date(2009,8,1,6,5,4),pattern:"d"},{date:[new Date(2009,8,2,6,5,4),new Date(2009,8,3,6,5,4),new Date(2009,8,4,6,5,4)],pattern:"E"},{date:new Date(2009,9,6,6,5,4),pattern:"M"},{date:new Date(1998,8,8,6,5,4),pattern:"y"}];if(s&&(r.forEach(function(a){const l=WO(t,a0(a.date,i),e,a.isDigit),d=a.pattern==="M"&&!o.d?"L":a.pattern;s=KO(s,l,d,n),o[d]=l.length}),s=UO(s,t,e,n),e.length))return s},Hs={3:"abbreviated",4:"wide",5:"narrow"},l0=function(i,e){return i>2?Object.keys(Hs).map(function(t){return["format","standalone"].map(function(n){return e.getMonthNames(Hs[t],n).join("|")}).join("|")}).join("|"):i===2?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},qO={":":function(i,e){const t=i>1?`{${i}}`:"";let n=Co(e.getTimeSeparator());return n!==":"&&(n=`${n}|:`),`${n}${t}`},y:function(i){return i===2?`[0-9]{${i}}`:"[0-9]+?"},M:l0,L:l0,Q:function(i,e){return i>2?e.getQuarterNames(Hs[i],"format").join("|"):"0?[1-4]"},E:function(i,e){return"\\D*"},a:function(i,e){return e.getPeriodNames(Hs[i<3?3:i],"format").join("|")},d:function(i){return i===2?"3[01]|[12][0-9]|0?[1-9]":"0??[1-9]|[12][0-9]|3[01]"},H:function(i){return i===2?"2[0-3]|1[0-9]|0?[0-9]":"0??[0-9]|1[0-9]|2[0-3]"},h:function(i){return i===2?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},m:function(i){return i===2?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},s:function(i){return i===2?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},S:function(i){return`[0-9]{1,${i}}`},w:function(i){return i===2?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},x:function(i){return i===3?"[+-](?:2[0-3]|[01][0-9]):(?:[0-5][0-9])|Z":"[+-](?:2[0-3]|[01][0-9])(?:[0-5][0-9])|Z"}},Rs=Number,Xp=function(i,e){return i.map(t=>t.toLowerCase()).indexOf(e.toLowerCase())},d0=function(i,e,t){return e>2?["format","standalone"].map(function(n){return Object.keys(Hs).map(function(s){const o=t.getMonthNames(Hs[s],n);return Xp(o,i)})}).reduce(function(n,s){return n.concat(s)}).filter(function(n){return n>=0})[0]:Rs(i)-1},YO={y:function(i,e){const t=Rs(i);return e===2?t<30?2e3+t:1900+t:t},M:d0,L:d0,Q:function(i,e,t){return e>2?t.getQuarterNames(Hs[e],"format").indexOf(i):Rs(i)-1},E:function(i,e,t){const n=t.getDayNames(Hs[e<3?3:e],"format");return Xp(n,i)},a:function(i,e,t){const n=t.getPeriodNames(Hs[e<3?3:e],"format");return Xp(n,i)},d:Rs,H:Rs,h:Rs,m:Rs,s:Rs,S:function(i,e){for(e=Math.max(e,3),i=i.slice(0,3);e<3;)i+="0",e++;return Rs(i)}},Vc=["y","M","d","h","m","s","S"],Sm={y:"setFullYear",M:"setMonth",L:"setMonth",a:function(i,e,t){let n=i.getHours();const s=t.h;s!==void 0&&s!==n&&n--,!e&&n===12?n=0:e&&n!==12&&(n+=12),i.setHours(n)},d:"setDate",H:"setHours",h:"setHours",m:"setMinutes",s:"setSeconds",S:"setMilliseconds"},XO=function(i,e){const t=i[e];if(!t)return 0;let n=0;do e++,n++;while(i[e]===t);return n},ZO=function(i,e){let t="";for(let n=0;n<e;n++)t+=i;return t},rw=function(i,e){let t="",n="",s;const o=[],r=function(){n&&(o.push(`'${n}'`),t+=`${Co(n)})`,n="")};for(let a=0;a<i.length;a++){const l=i[a],d=l==="'",c=qO[l];if(!(d&&(s=!s,i[a-1]!=="'")))if(c&&!s){const h=XO(i,a),u=ZO(l,h);r(),o.push(u),t+=`(${c(h,e)})`,a+=h-1}else n||(t+="("),n+=l}return r(),QO(o)||uu.warn(`The following format may be parsed incorrectly: ${i}.`),{patterns:o,regexp:new RegExp(`^${t}$`,"i")}},JO=["d","H","h","m","s","w","M","L","Q"],QO=function(i){const e=s=>{if(!s)return!1;const o=s[0];return["y","S"].includes(o)||JO.includes(o)&&s.length<3};let t=!0,n=0;return i.every((s,o,r)=>(e(s)&&((a=>a[0]!=="S"&&a.length!==2)(s)&&(t=++n<2),e(r[o+1])||(n=0)),t))},eR=function(){return Sm},tR=function(i,e,t,n,s){const o=e[0],r=Sm[o],a=YO[o];if(r&&a){const l=a(t,e.length,n);s[e]=l,i[r]?i[r](l):r(i,l,s)}},iR=function(i,e,t){const n=Sm[e],s="g"+n.substr(1),o=t[s]();i[n](o)},nR=function(i){return i.map(function(e){return e[0]==="'"?"":e[0]==="H"?"h":e[0]})},sR=function(i){const e=i.map(function(t){return Vc.indexOf(t)});return Math.max.apply(Math,e)},oR=function(i){const e=i.filter(function(t){return Vc.indexOf(t)<0});return Vc.concat(e)},rR=function(i,e){const t=rw(i,e);return function(n){const s=t.regexp.exec(n);if(s){const o=new Date,r=new Date(o.getFullYear(),0,1),a=nR(t.patterns),l=sR(a),d=oR(a),c={};return d.forEach(function(h,u){if(!h||u<Vc.length&&u>l)return;const p=a.indexOf(h);if(p>=0){const f=t.patterns[p],g=s[p+1];tR(r,f,g,e,c)}else iR(r,h,o)}),r}return null}},aR=["January","February","March","April","May","June","July","August","September","October","November","December"],lR=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dR=["AM","PM"],cR=["Q1","Q2","Q3","Q4"],c0=(i,e)=>{const t={abbreviated:3,short:2,narrow:1};return Ii(i,n=>n.substr(0,t[e]))},ta={getMonthNames:function(i){return c0(aR,i)},getDayNames:function(i){return c0(lR,i)},getQuarterNames:function(i){return cR},getPeriodNames:function(i){return dR}},uR={"af-NA":1,agq:1,ak:1,ar:6,"ar-EH":1,"ar-ER":1,"ar-KM":1,"ar-LB":1,"ar-MA":1,"ar-MR":1,"ar-PS":1,"ar-SO":1,"ar-SS":1,"ar-TD":1,"ar-TN":1,asa:1,ast:1,az:1,"az-Cyrl":1,bas:1,be:1,bem:1,bez:1,bg:1,bm:1,br:1,bs:1,"bs-Cyrl":1,ca:1,ce:1,cgg:1,ckb:6,cs:1,cy:1,da:1,de:1,dje:1,dsb:1,dua:1,dyo:1,ee:1,el:1,"en-001":1,"en-AE":6,"en-BI":1,"en-MP":1,"en-MV":5,"en-SD":6,eo:1,es:1,et:1,eu:1,ewo:1,fa:6,ff:1,"ff-Adlm":1,fi:1,fo:1,fr:1,"fr-DJ":6,"fr-DZ":6,"fr-SY":6,fur:1,fy:1,ga:1,gd:1,gl:1,gsw:1,gv:1,ha:1,hr:1,hsb:1,hu:1,hy:1,ia:1,ig:1,is:1,it:1,jgo:1,jmc:1,ka:1,kab:6,kde:1,kea:1,khq:1,kk:1,kkj:1,kl:1,"ko-KP":1,ksb:1,ksf:1,ksh:1,ku:1,kw:1,ky:1,lag:1,lb:1,lg:1,ln:1,lrc:6,lt:1,lu:1,lv:1,"mas-TZ":1,mfe:1,mg:1,mgo:1,mi:1,mk:1,mn:1,ms:1,mua:1,mzn:6,naq:1,nds:1,nl:1,nmg:1,nnh:1,no:1,nus:1,nyn:1,os:1,pcm:1,pl:1,ps:6,"pt-AO":1,"pt-CH":1,"pt-CV":1,"pt-GQ":1,"pt-GW":1,"pt-LU":1,"pt-ST":1,"pt-TL":1,"qu-BO":1,"qu-EC":1,rm:1,rn:1,ro:1,rof:1,ru:1,rw:1,rwk:1,sah:1,sbp:1,sc:1,se:1,ses:1,sg:1,shi:1,"shi-Latn":1,si:1,sk:1,sl:1,smn:1,so:1,"so-DJ":6,sq:1,sr:1,"sr-Latn":1,sv:1,sw:1,"ta-LK":1,"ta-MY":1,teo:1,tg:1,"ti-ER":1,tk:1,to:1,tr:1,tt:1,twq:1,tzm:1,uk:1,uz:1,"uz-Arab":6,"uz-Cyrl":1,vai:1,"vai-Latn":1,vi:1,vun:1,wae:1,wo:1,xog:1,yav:1,yi:1,yo:1,zgh:1},hR=/[\u200E\u200F]/g,pR=/[\u202F]/g,qo=i=>e=>{if(!i.timeZoneName){const t=e.getFullYear(),n=String(t).length<3,o=n?t+400:t,r=new Date(Date.UTC(o,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));n&&r.setFullYear(t);const a=Y({timeZone:"UTC"},i);return Zp(r,a)}return Zp(e,i)},ch={},fR=i=>{const e=Kn.locale()+"/"+JSON.stringify(i);return ch[e]||(ch[e]=new Intl.DateTimeFormat(Kn.locale(),i).format),ch[e]};function Zp(i,e){return fR(e)(i).replace(hR,"").replace(pR," ")}const Jp=i=>new Intl.NumberFormat(Kn.locale()).format(i),mR=(()=>{const i={};return e=>{if(!(e in i)){if(Jp(0)==="0")return i[e]=!1,!1;i[e]={};for(let t=0;t<10;++t)i[e][Jp(t)]=t}return i[e]}})(),Td=i=>{const e=mR(Kn.locale());return e?i.split("").map(t=>t in e?String(e[t]):t).join(""):i},u0=i=>i.replace(/(\D)0+(\d)/g,"$1$2"),gR=(i,e)=>u0(i)===u0(e),Qp=i=>i.replace("d’","de "),Em={day:{day:"numeric"},date:{year:"numeric",month:"long",day:"numeric"},dayofweek:{weekday:"long"},longdate:{weekday:"long",year:"numeric",month:"long",day:"numeric"},longdatelongtime:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},longtime:{hour:"numeric",minute:"numeric",second:"numeric"},month:{month:"long"},monthandday:{month:"long",day:"numeric"},monthandyear:{year:"numeric",month:"long"},shortdate:{},shorttime:{hour:"numeric",minute:"numeric"},shortyear:{year:"2-digit"},year:{year:"numeric"}};Object.defineProperty(Em,"shortdateshorttime",{get:function(){const i=Intl.DateTimeFormat(Kn.locale()).resolvedOptions();return{year:i.year,month:i.month,day:i.day,hour:"numeric",minute:"numeric"}}});const _R=i=>typeof i=="string"&&Em[i.toLowerCase()],aw={standalone:function(i,e){const t=new Date(1999,i,13,1);return qo({month:e})(t)},format:function(i,e){const t=new Date(0,i,13,1),s=Qp(qo({day:"numeric",month:e})(t)).split(" ").filter(o=>o.indexOf("13")<0);return s.length===1?s[0]:s.length===2?s[0].length>s[1].length?s[0]:s[1]:aw.standalone(i,e)}},bR={engine:function(){return"intl"},getMonthNames:function(i,e){const t={wide:"long",abbreviated:"short",narrow:"narrow"}[i||"wide"];return e=e==="format"?e:"standalone",Array.apply(null,new Array(12)).map((n,s)=>aw[e](s,t))},getDayNames:function(i){return(t=>Array.apply(null,new Array(7)).map((n,s)=>qo({weekday:t})(new Date(0,0,s))))({wide:"long",abbreviated:"short",short:"narrow",narrow:"narrow"}[i||"wide"])},getPeriodNames:function(){const i=qo({hour:"numeric",hour12:!0});return[1,13].map(e=>{const t=Jp(1),n=i(new Date(0,0,1,e)).split(t);return n.length!==2?"":(n[0].length>n[1].length?n[0]:n[1]).trim()})},format:function(i,e){if(!i)return;if(!e)return i;typeof e!="function"&&!e.formatter&&(e=e.type||e);const t=_R(e);if(t)return qo(t)(i);const n=typeof e;return e.formatter||n==="function"||n==="string"?this.callBase.apply(this,arguments):qo(e)(i)},parse:function(i,e){let t;return e&&!e.parser&&typeof i=="string"&&(i=Qp(i),t=n=>Qp(this.format(n,e))),this.callBase(i,t||e)},_parseDateBySimpleFormat:function(i,e){i=Td(i);const t=this.getFormatParts(e),n=i.split(/\D+/).filter(r=>r.length>0);if(t.length!==n.length)return;const s=this._generateDateArgs(t,n),o=r=>{const a=((l,d)=>{const c=d?12:0;return new Date(l.year,l.month,l.day,(l.hours+c)%24,l.minutes,l.seconds)})(s,r);if(gR(Td(this.format(a,e)),i))return a};return o(!1)||o(!0)},_generateDateArgs:function(i,e){const t=new Date,n={year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hours:0,minutes:0,seconds:0};return i.forEach((s,o)=>{const r=e[o];let a=parseInt(r,10);s==="month"&&(a-=1),n[s]=a}),n},formatUsesMonthName:function(i){return typeof i=="object"&&!(i.type||i.format)?i.month==="long":this.callBase.apply(this,arguments)},formatUsesDayName:function(i){return typeof i=="object"&&!(i.type||i.format)?i.weekday==="long":this.callBase.apply(this,arguments)},getTimeSeparator:function(){return Td(Zp(new Date(2001,1,1,11,11),{hour:"numeric",minute:"numeric",hour12:!1})).replace(/\d/g,"")},getFormatParts:function(i){if(typeof i=="string")return this.callBase(i);const e=Y({},Em[i.toLowerCase()]),t=new Date(2001,2,4,5,6,7);let n=qo(e)(t);return n=Td(n),[{name:"year",value:1},{name:"month",value:3},{name:"day",value:4},{name:"hours",value:5},{name:"minutes",value:6},{name:"seconds",value:7}].map(s=>({name:s.name,index:n.indexOf(s.value)})).filter(s=>s.index>-1).sort((s,o)=>s.index-o.index).map(s=>s.name)}},vR=typeof Intl<"u",uh={shortdate:"M/d/y",shorttime:"h:mm a",longdate:"EEEE, MMMM d, y",longtime:"h:mm:ss a",monthandday:"MMMM d",monthandyear:"MMMM y",quarterandyear:"QQQ y",day:"d",year:"y",shortdateshorttime:"M/d/y, h:mm a",longdatelongtime:"EEEE, MMMM d, y, h:mm:ss a",month:"LLLL",shortyear:"yy",dayofweek:"EEEE",quarter:"QQQ",hour:"HH",minute:"mm",second:"ss",millisecond:"SSS","datetime-local":"yyyy-MM-ddTHH':'mm':'ss"},yR={year:["y","yy","yyyy"],day:["d","dd"],month:["M","MM","MMM","MMMM"],hours:["H","HH","h","hh","ah"],minutes:["m","mm"],seconds:["s","ss"],milliseconds:["S","SS","SSS"]},ct=qn({engine:function(){return"base"},_getPatternByFormat:function(i){return uh[i.toLowerCase()]},_expandPattern:function(i){return this._getPatternByFormat(i)||i},formatUsesMonthName:function(i){return this._expandPattern(i).indexOf("MMMM")!==-1},formatUsesDayName:function(i){return this._expandPattern(i).indexOf("EEEE")!==-1},getFormatParts:function(i){const e=this._getPatternByFormat(i)||i,t=[];return ie(e.split(/\W+/),(n,s)=>{ie(yR,(o,r)=>{r.includes(s)&&t.push(o)})}),t},getMonthNames:function(i){return ta.getMonthNames(i)},getDayNames:function(i){return ta.getDayNames(i)},getQuarterNames:function(i){return ta.getQuarterNames(i)},getPeriodNames:function(i){return ta.getPeriodNames(i)},getTimeSeparator:function(){return":"},is24HourFormat:function(i){const e=new Date(2017,0,20,11,0,0,0),t=new Date(2017,0,20,23,0,0,0),n=this.format(e,i),s=this.format(t,i);for(let o=0;o<n.length;o++)if(n[o]!==s[o])return!isNaN(parseInt(n[o]))},format:function(i,e){if(!i)return;if(!e)return i;let t;if(typeof e=="function")t=e;else if(e.formatter)t=e.formatter;else if(e=e.type||e,Ke(e))return e=uh[e.toLowerCase()]||e,Gt.convertDigits(nw(e,this)(i));if(t)return t(i)},parse:function(i,e){const t=this;let n,s;if(!i)return;if(!e)return this.parse(i,"shortdate");if(e.parser)return e.parser(i);if(typeof e=="string"&&!uh[e.toLowerCase()])n=e;else{s=r=>{const a=t.format(r,e);return Gt.convertDigits(a,!0)};try{n=ow(s)}catch{}}if(n)return i=Gt.convertDigits(i,!0),rR(n,this)(i);Pt.log("W0012");const o=new Date(i);if(!(!o||isNaN(o.getTime())))return o},firstDayOfWeekIndex:function(){const i=Kn.getValueByClosestLocale(e=>uR[e]);return i===void 0?0:i}});vR&&ct.inject(bR);const lw=qn({format:function(i,e){const t=Ke(e)&&e!==""||ht(e)||Ee(e),n=Wt(i)||yn(i);if(!t||!n)return U(i)?i.toString():"";if(Ee(e))return e(i);if(Ke(e)&&(e={type:e}),Wt(i))return Gt.format(i,e);if(yn(i))return ct.format(i,e)},getTimeFormat:function(i){return i?"longtime":"shorttime"},_normalizeFormat:function(i){return Array.isArray(i)?i.length===1?i[0]:function(e){return i.map(function(t){return ct.format(e,t)}).join(" ")}:i},getDateFormatByDifferences:function(i,e){const t=[],n=e&&i.millisecond&&!(i.year||i.month||i.day);if(n){const s=function(o){return o.getSeconds()+o.getMilliseconds()/1e3+"s"};t.push(s)}else i.millisecond&&t.push("millisecond");if((i.hour||i.minute||!n&&i.second)&&t.unshift(this.getTimeFormat(i.second)),i.year&&i.month&&i.day)return e&&e==="month"?"monthandyear":(t.unshift("shortdate"),this._normalizeFormat(t));if(i.year&&i.month)return"monthandyear";if(i.year&&i.quarter)return"quarterandyear";if(i.year)return"year";if(i.quarter)return"quarter";if(i.month&&i.day){if(e){const s=function(o){return ct.getMonthNames("abbreviated")[o.getMonth()]+" "+ct.format(o,"day")};t.unshift(s)}else t.unshift("monthandday");return this._normalizeFormat(t)}if(i.month)return"month";if(i.day){if(e)t.unshift("day");else{const s=function(o){return ct.format(o,"dayofweek")+", "+ct.format(o,"day")};t.unshift(s)}return this._normalizeFormat(t)}return this._normalizeFormat(t)},getDateFormatByTicks:function(i){let e,t,n;if(i.length>1)for(e=Ae.getDatesDifferences(i[0],i[1]),n=1;n<i.length-1;n++)t=Ae.getDatesDifferences(i[n],i[n+1]),e.count<t.count&&(e=t);else e={year:!0,month:!0,day:!0,hour:i[0].getHours()>0,minute:i[0].getMinutes()>0,second:i[0].getSeconds()>0,millisecond:i[0].getMilliseconds()>0};return this.getDateFormatByDifferences(e)},getDateFormatByTickInterval:function(i,e,t){let n;const s=function(a,l,d){switch(l){case"year":case"quarter":a.month=d;case"month":a.day=d;case"week":case"day":a.hour=d;case"hour":a.minute=d;case"minute":a.second=d;case"second":a.millisecond=d}};t=Ke(t)?t.toLowerCase():t;const o=Ae.getDatesDifferences(i,e);return i!==e&&function(a,l,d){!d.getMilliseconds()&&d.getSeconds()?d.getSeconds()-l.getSeconds()===1&&(a.millisecond=!0,a.second=!1):!d.getSeconds()&&d.getMinutes()?d.getMinutes()-l.getMinutes()===1&&(a.second=!0,a.minute=!1):!d.getMinutes()&&d.getHours()?d.getHours()-l.getHours()===1&&(a.minute=!0,a.hour=!1):!d.getHours()&&d.getDate()>1?d.getDate()-l.getDate()===1&&(a.hour=!0,a.day=!1):d.getDate()===1&&d.getMonth()?d.getMonth()-l.getMonth()===1&&(a.day=!0,a.month=!1):!d.getMonth()&&d.getFullYear()&&d.getFullYear()-l.getFullYear()===1&&(a.month=!0,a.year=!1)}(o,i>e?e:i,i>e?i:e),n=Ae.getDateUnitInterval(o),s(o,n,!0),n=Ae.getDateUnitInterval(t||"second"),s(o,n,!1),o[{week:"day"}[n]||n]=!0,this.getDateFormatByDifferences(o)}}),dw=new Xf,Dd=new WeakMap;let CR=0;const Ul=function(i,e){if(U(e)){Dd.set(i,e);return}if(!Dd.has(i)){const t="dxPrivateComponent"+CR++;return Dd.set(i,t),t}return Dd.get(i)};function cw(i,e,t){const n=di(i.get(0)),s=Ul(e.constructor);n[s]=e,t&&q.one(i,Rn,function(){t.call(e)}),n.dxComponents||(n.dxComponents=[]),n.dxComponents.push(s)}function uw(i,e){const t=Ul(e);return di(i.get(0),t)}const wt=function(i,e,t){t?e[i]=t:t=e,Ul(t,i),dw.fire(i,t)},xR=function(i,e){R.fn[i]=function(t){const n=typeof t=="string";let s;if(n){const o=t,r=[].slice.call(arguments).slice(1);this.each(function(){const a=e.getInstance(this);if(!a)throw Pt.Error("E0009",i);const d=a[o].apply(a,r);s===void 0&&(s=d)})}else this.each(function(){const o=e.getInstance(this);o?o.option(t):new e(this,t)}),s=this;return s}};dw.add(xR);const ia=Tt(),hw=Je(),wR=ws.add,SR=Do,ER=fu;let bl=new ae;const pw="link[rel=dx-theme]",IR="data-theme",TR="data-active",h0="dx-hairlines",fw="any";let zs,ef,Ws,Sn,mo,p0=15e3;const hh="dx.";function Im(){if(!qe())return null;const i=R("<div>",zs).addClass("dx-theme-marker").appendTo(zs.documentElement);let e;try{return e=hw.getComputedStyle(i.get(0)).fontFamily,!e||(e=e.replace(/["']/g,""),e.substr(0,hh.length)!==hh)?null:e.substr(hh.length)}finally{i.remove()}}function f0(i){let e,t,n=!0;mo=i;function s(){mo=null,clearInterval(t),n=!0,ia.fire(),ia.empty(),bl.resolve()}if(m0()||!p0)s();else{if(!n){mo&&(mo=i);return}e=Date.now(),n=!1,t=setInterval(function(){const o=m0(),r=!o&&Date.now()-e>p0;r&&mt.log("W0004",mo),(o||r)&&s()},10)}}function m0(){if(!mo)return!0;const i=mo===fw;if(bl.state()==="resolved"&&i)return!0;const e=Im();return e&&i?!0:e===mo}function DR(){const i=R(pw,zs);i.length&&(Ws={},ef=R(am("<link rel=stylesheet>"),zs),i.each(function(){const e=R(this,zs),t=e.attr(IR),n=e.attr("href"),s=e.attr(TR)==="true";Ws[t]={url:n,isActive:s}}),i.last().after(ef),i.remove())}function AR(i){const e=i?i.split("."):[];let t=null;if(Ws){if(i in Ws)return i;ie(Ws,function(n,s){const o=n.split(".");if(!(e[0]&&o[0]!==e[0])&&!(e[1]&&e[1]!==o[1])&&!(e[2]&&e[2]!==o[2])&&((!t||s.isActive)&&(t=n),s.isActive))return!1})}return t}function kR(i){try{i!==zs&&(Ws=null)}catch{Ws=null}zs=i}function mw(i){i=i||{},kR(i.context||_e.getDocument()),zs&&(DR(),Sn=void 0,un(i))}function un(i){if(!arguments.length)return Sn=Sn||Im(),Sn;_w(SR()),i=i||{},typeof i=="string"&&(i={theme:i});const e=i._autoInit,t=i.loadCallback;let n;if(Sn=AR(i.theme||Sn),Sn&&(n=Ws[Sn]),t&&ia.add(t),n)ef.attr("href",Ws[Sn].url),(ia.has()||bl.state()!=="resolved"||i._forceTimeout)&&f0(Sn);else if(e)qe()&&f0(fw),ia.fire(),ia.empty();else throw mt.Error("E0021",Sn);bl.done(()=>gw(nx(),Sn))}function OR(i){i=i||un();const e=[],t=i&&i.split(".");return t&&(e.push("dx-theme-"+t[0],"dx-theme-"+t[0]+"-typography"),t.length>1&&e.push("dx-color-scheme-"+t[1]+(On(i)?"-"+t[2]:""))),e}let lc;function gw(i,e){lc=OR(e).join(" "),R(i).addClass(lc),function(){const t=qe()&&hw.devicePixelRatio;if(!t||t<2)return;const n=R("<div>");n.css("border",".5px solid transparent"),R("body").append(n),rt(n)===1&&(R(i).addClass(h0),lc+=" "+h0),n.remove()}()}function _w(i){R(i).removeClass(lc)}function Tm(i,e){return e||(e=Sn||Im()),new RegExp(i).test(e)}function On(i){return tn(i)||nn(i)}function tn(i){return Tm("material",i)}function nn(i){return Tm("fluent",i)}function bw(i){return Tm("generic",i)}function RR(i,e){const t=_e.getDocument(),n=t.createElement("span");n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",n.style.visibility="hidden",n.style.fontFamily="Arial",n.style.fontSize="250px",n.style.fontWeight=e,n.innerHTML=i,t.body.appendChild(n);const s=n.offsetWidth;n.style.fontFamily="Roboto, RobotoFallback, Arial";const o=n.offsetWidth;return n.parentNode.removeChild(n),s!==o}function MR(i,e){return new Promise(t=>{const n=()=>{clearInterval(s),clearTimeout(o),t()},s=setInterval(()=>{RR(i,e)&&n()},15),o=setTimeout(n,2e3)})}function g0(){if(mw({_autoInit:!0,_forceTimeout:!0}),R(pw,zs).length)throw mt.Error("E0022")}qe()?g0():wR(g0);ER.add(function(i,e){bl.done(function(){_w(e),gw(i)})});Re.changed.add(function(){mw({_autoInit:!0})});class bn{constructor(e,t){t=t||{},this._action=e,this._context=t.context||Je(),this._beforeExecute=t.beforeExecute,this._afterExecute=t.afterExecute,this._component=t.component,this._validatingTargetName=t.validatingTargetName;const n=this._excludeValidators={};if(t.excludeValidators)for(let s=0;s<t.excludeValidators.length;s++)n[t.excludeValidators[s]]=!0}execute(){const e={action:this._action,args:Array.prototype.slice.call(arguments),context:this._context,component:this._component,validatingTargetName:this._validatingTargetName,cancel:!1,handled:!1},t=this._beforeExecute,n=this._afterExecute,s=e.args[0]||{};if(!this._validateAction(e)||(t==null||t.call(this._context,e),e.cancel))return;const o=this._executeAction(e);if(!s.cancel)return n==null||n.call(this._context,e),o}_validateAction(e){const t=this._excludeValidators,{executors:n}=bn;for(const o in n)if(!t[o]){var s;const r=n[o];if((s=r.validate)===null||s===void 0||s.call(r,e),e.cancel)return!1}return!0}_executeAction(e){let t;const{executors:n}=bn;for(const o in n){var s;const r=n[o];if((s=r.execute)===null||s===void 0||s.call(r,e),e.handled){t=e.result;break}}return t}static registerExecutor(e,t){if(ht(e)){ie(e,bn.registerExecutor);return}bn.executors[e]=t}static unregisterExecutor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ie(t,function(){delete bn.executors[this]})}}bn.executors={};const _0=i=>e=>{if(!e.args.length)return;const t=e.args[0],n=t[e.validatingTargetName]||t.element;n&&i(R(n))&&(e.cancel=!0)};bn.registerExecutor({disabled:{validate:_0(i=>i.is(".dx-state-disabled, .dx-state-disabled *"))},readOnly:{validate:_0(i=>i.is(".dx-state-readonly, .dx-state-readonly *:not(.dx-state-independent)"))},undefined:{execute:i=>{i.action||(i.result=void 0,i.handled=!0)}},func:{execute:i=>{Ee(i.action)&&(i.result=i.action.call(i.context,i.args[0]),i.handled=!0)}}});const PR=function(i,e){return 1/i===1/e},BR=function(i,e){return i=Ki(i,!0),e=Ki(e,!0),i&&e&&Cn(i)&&Cn(e)?e.is(i):i!==i&&e!==e?!0:i===0&&e===0?PR(i,e):i===null||typeof i!="object"||_e.isElementNode(i)?i===e:!1},ph={},pa=i=>{const e=Re.current();return i.reduce((t,n)=>{let{device:s,options:o}=n;const r=s||{};return(Ee(r)?r(e):VR(e,r))&&Y(!0,t,o),t},{})},FR=(i,e)=>typeof i!="string"?i:{[i]:e},VR=(i,e)=>cn(e)||CC(i,[e]).length>0,b0=i=>i.substr(i.lastIndexOf(".")+1),v0=i=>i.substr(0,i.lastIndexOf(".")),NR=function(i,e){return ph[e]=ph[e]||Nt(e),ph[e](i,{functionsAsIs:!0})},LR=function(){return arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]},fh={},mh={};class $R{constructor(e,t){this._options=e,this._optionsByReference=t,this._changingCallback,this._changedCallback,this._namePreparedCallbacks}_setByReference(e,t){Y(!0,e,t);for(const n in this._optionsByReference)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}_setPreparedValue(e,t,n,s){const o=this.get(this._options,e,!1);if(!BR(o,t)){const r=Cr(e);!s&&this._changingCallback(e,o,t),mh[e]=mh[e]||Uf(e),mh[e](this._options,t,{functionsAsIs:!0,merge:U(n)?n:!this._optionsByReference[e],unwrapObservables:r.length>1&&!!this._optionsByReference[r[0]]}),!s&&this._changedCallback(e,t,o)}}_prepareRelevantNames(e,t,n,s){if(ht(n))for(const o in n)this._prepareRelevantNames(e,`${t}.${o}`,n[o]);this._namePreparedCallbacks(e,t,n,s)}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._options,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return fh[t]=fh[t]||Nt(t),fh[t](e,{functionsAsIs:!0,unwrapObservables:n})}set(e,t,n,s){e=FR(e,t);for(const o in e)this._prepareRelevantNames(e,o,e[o],s);for(const o in e)this._setPreparedValue(o,e[o],n,s)}onRelevantNamesPrepared(e){this._namePreparedCallbacks=e}onChanging(e){this._changingCallback=e}onChanged(e){this._changedCallback=e}dispose(){this._changingCallback=ue,this._changedCallback=ue}}class HR{constructor(e,t,n,s){this._deprecatedCallback,this._startChangeCallback,this._endChangeCallback,this._default=t,this._deprecated=s,this._deprecatedNames=[],this._initDeprecatedNames(),this._optionManager=new $R(e,n),this._optionManager.onRelevantNamesPrepared((o,r,a,l)=>this._setRelevantNames(o,r,a,l)),this._cachedOptions={},this._rules=[]}set _initial(e){this._initialOptions=e}get _initial(){if(!this._initialOptions){const e=this._getByRules(this.silent("defaultOptionsRules"));this._initialOptions=this._default,this._optionManager._setByReference(this._initialOptions,e)}return this._initialOptions}_initDeprecatedNames(){for(const e in this._deprecated)this._deprecatedNames.push(e)}_getByRules(e){return e=Array.isArray(e)?this._rules.concat(e):this._rules,pa(e)}_notifyDeprecated(e){const t=this._deprecated[e];t&&this._deprecatedCallback(e,t)}_setRelevantNames(e,t,n,s){if(t){const o=this._normalizeName(t,s);o&&o!==t&&(this._setField(e,o,n),this._clearField(e,t))}}_setField(e,t,n){let s="",o=null;do s=s?`.${s}`:"",s=b0(t)+s,t=v0(t),o=t?this._optionManager.get(e,t,!1):e;while(!o);o[s]=n}_clearField(e,t){delete e[t];const n=v0(t),s=n?this._optionManager.get(e,n,!1):e;s&&delete s[b0(t)]}_normalizeName(e,t){if(this._deprecatedNames.length&&e){for(let n=0;n<this._deprecatedNames.length;n++)if(this._deprecatedNames[n]===e){const s=this._deprecated[e];if(s)return!t&&this._notifyDeprecated(e),s.alias||e}}return e}addRules(e){this._rules=e.concat(this._rules)}applyRules(e){const t=this._getByRules(e);this.silent(t)}dispose(){this._deprecatedCallback=ue,this._startChangeCallback=ue,this._endChangeCallback=ue,this._optionManager.dispose()}onChanging(e){this._optionManager.onChanging(e)}onChanged(e){this._optionManager.onChanged(e)}onDeprecated(e){this._deprecatedCallback=e}onStartChange(e){this._startChangeCallback=e}onEndChange(e){this._endChangeCallback=e}isInitial(e){const t=this.silent(e),n=this.initial(e);return Ee(t)&&Ee(n)?t.toString()===n.toString():zt(t,n)}initial(e){return NR(this._initial,e)}option(e,t){if(arguments.length<2&&kn(e)!=="object")return this._optionManager.get(void 0,this._normalizeName(e));this._startChangeCallback();try{this._optionManager.set(e,t)}finally{this._endChangeCallback()}}silent(e,t){if(arguments.length<2&&kn(e)!=="object")return this._optionManager.get(void 0,e,void 0,!0);this._optionManager.set(e,t,void 0,!0)}reset(e){if(e){const n=Cr(e).reduce((o,r)=>o?o[r]:this.initial(r),null),s=We(n)?ve({},n):n;this._optionManager.set(e,s,!1)}}getAliasesByName(e){return Object.keys(this._deprecated).filter(t=>e===this._deprecated[t].alias)}isDeprecated(e){return Object.prototype.hasOwnProperty.call(this._deprecated,e)}cache(e,t){if(arguments.length<2)return this._cachedOptions[e];this._cachedOptions[e]=Y(this._cachedOptions[e],t)}}class zR{constructor(){this._postponedOperations={}}add(e,t,n){if(e in this._postponedOperations)n&&this._postponedOperations[e].promises.push(n);else{const s=new ae;this._postponedOperations[e]={fn:t,completePromise:s,promises:n?[n]:[]}}return this._postponedOperations[e].completePromise.promise()}callPostponedOperations(){for(const e in this._postponedOperations){const t=this._postponedOperations[e];U(t)&&(t.promises&&t.promises.length?De(...t.promises).done(t.fn).then(t.completePromise.resolve):t.fn().done(t.completePromise.resolve))}this._postponedOperations={}}}const y0=i=>i.charAt(2).toLowerCase()+i.substr(3),WR=i=>i.indexOf("_",0)===0,vw=Lt.inherit({_setDeprecatedOptions(){this._deprecatedOptions={}},_getDeprecatedOptions(){return this._deprecatedOptions},_getDefaultOptions:()=>({onInitialized:null,onOptionChanged:null,onDisposing:null,defaultOptionsRules:null}),_defaultOptionsRules:()=>[],_setOptionsByDevice(i){this._options.applyRules(i)},_convertRulesToOptions:i=>pa(i),_isInitialOptionValue(i){return this._options.isInitial(i)},_setOptionsByReference(){this._optionsByReference={}},_getOptionsByReference(){return this._optionsByReference},ctor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_optionChangedCallbacks:e,_disposingCallbacks:t}=i;this.NAME=Ul(this.constructor),this._eventsStrategy=wr.create(this,i.eventsStrategy),this._updateLockCount=0,this._optionChangedCallbacks=e||Tt(),this._disposingCallbacks=t||Tt(),this.postponedOperations=new zR,this._createOptions(i)},_createOptions(i){this.beginUpdate();try{this._setOptionsByReference(),this._setDeprecatedOptions(),this._options=new HR(this._getDefaultOptions(),this._getDefaultOptions(),this._getOptionsByReference(),this._getDeprecatedOptions()),this._options.onChanging((e,t,n)=>this._initialized&&this._optionChanging(e,t,n)),this._options.onDeprecated((e,t)=>this._logDeprecatedOptionWarning(e,t)),this._options.onChanged((e,t,n)=>this._notifyOptionChanged(e,t,n)),this._options.onStartChange(()=>this.beginUpdate()),this._options.onEndChange(()=>this.endUpdate()),this._options.addRules(this._defaultOptionsRules()),i&&i.onInitializing&&i.onInitializing.apply(this,[i]),this._setOptionsByDevice(i.defaultOptionsRules),this._initOptions(i)}finally{this.endUpdate()}},_initOptions(i){this.option(i)},_init(){this._createOptionChangedAction(),this.on("disposing",i=>{this._disposingCallbacks.fireWith(this,[i])})},_logDeprecatedOptionWarning(i,e){const t=e.message||`Use the '${e.alias}' option instead`;Pt.log("W0001",this.NAME,i,e.since,t)},_logDeprecatedComponentWarning(i,e){Pt.log("W0000",this.NAME,i,`Use the '${e}' widget instead`)},_createOptionChangedAction(){this._optionChangedAction=this._createActionByOption("onOptionChanged",{excludeValidators:["disabled","readOnly"]})},_createDisposingAction(){this._disposingAction=this._createActionByOption("onDisposing",{excludeValidators:["disabled","readOnly"]})},_optionChanged(i){switch(i.name){case"onDisposing":case"onInitialized":case"defaultOptionsRules":break;case"onOptionChanged":this._createOptionChangedAction()}},_dispose(){this._optionChangedCallbacks.empty(),this._createDisposingAction(),this._disposingAction(),this._eventsStrategy.dispose(),this._options.dispose(),this._disposed=!0},_lockUpdate(){this._updateLockCount++},_unlockUpdate(){this._updateLockCount=Math.max(this._updateLockCount-1,0)},_isUpdateAllowed(){return this._updateLockCount===0},_isInitializingRequired(){return!this._initializing&&!this._initialized},isInitialized(){return this._initialized},_commitUpdate(){this.postponedOperations.callPostponedOperations(),this._isInitializingRequired()&&this._initializeComponent()},_initializeComponent(){this._initializing=!0;try{this._init()}finally{this._initializing=!1,this._lockUpdate(),this._createActionByOption("onInitialized",{excludeValidators:["disabled","readOnly"]})(),this._unlockUpdate(),this._initialized=!0}},instance(){return this},beginUpdate:function(){this._lockUpdate()},endUpdate:function(){this._unlockUpdate(),this._isUpdateAllowed()&&this._commitUpdate()},_optionChanging:ue,_notifyOptionChanged(i,e,t){if(this._initialized){const n=[i].concat(this._options.getAliasesByName(i));for(let s=0;s<n.length;s++){const o=n[s],r={name:Cr(o)[0],fullName:o,value:e,previousValue:t};WR(o)||(this._optionChangedCallbacks.fireWith(this,[Y(this._defaultActionArgs(),r)]),this._optionChangedAction(Y({},r))),!this._disposed&&this._cancelOptionChange!==o&&this._optionChanged(r)}}},initialOption(i){return this._options.initial(i)},_defaultActionConfig(){return{context:this,component:this}},_defaultActionArgs(){return{component:this}},_createAction(i,e){let t;return n=>(U(n)||(n={}),ht(n)||(n={actionValue:n}),t=t||new bn(i,Y({},e,this._defaultActionConfig())),t.execute.call(t,Y(n,this._defaultActionArgs())))},_createActionByOption(i,e){var t=this;let n,s,o;e=Y({},e);const r=function(){if(!s){if(e=e||{},typeof i!="string")throw Pt.Error("E0008");i.indexOf("on")===0&&(s=y0(i)),o=t.option(i)}if(!(!n&&!o&&!e.beforeExecute&&!e.afterExecute&&!t._eventsStrategy.hasEvent(s))){if(!n){const h=e.beforeExecute;e.beforeExecute=function(){for(var u=arguments.length,p=new Array(u),f=0;f<u;f++)p[f]=arguments[f];h&&h.apply(t,p),t._eventsStrategy.fireEvent(s,p[0].args)},n=t._createAction(o,e)}for(var l=arguments.length,d=new Array(l),c=0;c<l;c++)d[c]=arguments[c];return $t().wrapActionsBeforeExecute?((t.option("beforeActionExecute")||ue)(t,n,e)||n).apply(t,d):n.apply(t,d)}};return $t().wrapActionsBeforeExecute?r:(this.option("onActionCreated")||ue)(this,r,e)||r},on(i,e){return this._eventsStrategy.on(i,e),this},off(i,e){return this._eventsStrategy.off(i,e),this},hasActionSubscription:function(i){return!!this._options.silent(i)||this._eventsStrategy.hasEvent(y0(i))},isOptionDeprecated(i){return this._options.isDeprecated(i)},_setOptionWithoutOptionChange(i,e){this._cancelOptionChange=i,this.option(i,e),this._cancelOptionChange=!1},_getOptionValue(i,e){const t=this.option(i);return Ee(t)?t.bind(e)():t},option(){return this._options.option(...arguments)},resetOption(i){this.beginUpdate(),this._options.reset(i),this.endUpdate()}}),Dm=function(i){return function(e){const t=R(e||"body"),n=t.filter(".dx-visibility-change-handler").add(t.find(".dx-visibility-change-handler"));for(let s=0;s<n.length;s++)q.triggerHandler(n[s],i)}},Am=Dm("dxshown"),jR=Dm("dxhiding"),ps=Dm("dxresize"),KR=Tt({syncStrategy:!0});class Sr{render(e){e=e||{};const t=e.onRendered;delete e.onRendered;let n;return e.renovated&&e.transclude&&this._element?n=R("<div>").append(this._element).contents():n=this._renderCore(e),this._ensureResultInContainer(n,e.container),KR.fire(n,e.container),t&&t(),n}_ensureResultInContainer(e,t){if(!t)return;const n=R(t),s=ms(n.get(0),e.get(0));n.append(e),!(s||!ms(_e.getBody(),n.get(0)))&&Am(e)}_renderCore(){throw Pt.Error("E0001")}}class fa extends Sr{constructor(e){super(),this._render=e}_renderCore(e){return gu(this._render(e))}}class or extends Sr{_renderCore(){return R()}}class km extends Sr{constructor(e){super(),this.name=e}}const yw={};let dc;function GR(i,e){yw[i]=e}function UR(i){if(Ke(i)){if(dc=yw[i],!dc)throw Pt.Error("E0020",i)}else dc=i}function C0(){return dc}GR("default",{compile:i=>gu(i),render:(i,e,t)=>i.clone()});UR("default");class qR extends Sr{constructor(e){super(),this._element=e}_renderCore(e){const t=e.transclude;return!t&&!this._compiledTemplate&&(this._compiledTemplate=C0().compile(this._element)),R("<div>").append(t?this._element:C0().render(this._compiledTemplate,e.model,e.index)).contents()}source(){return R(this._element).clone()}}function YR(i){return i.reduce((e,t)=>{const n=(e.get(t)??0)+1;return e.set(t,n),e},new Map)}const XR=function(i){return Array.isArray(i)?i:[i]},ZR=function(i){return[...new Set(i)]},x0=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=YR(e);return i.filter(n=>{const s=t.get(n);return s&&t.set(n,s-1),!s})},vl=function(i,e,t,n){const s={},{useLegacyVisibleIndex:o}=$t();let r=0;const a=l=>!U(l[e])&&(!n||n(l));i.forEach(l=>{const d=l[e];d>=0?(s[d]=s[d]||[],l===t?s[d].unshift(l):s[d].push(l)):l[e]=void 0}),o||i.forEach(l=>{if(a(l)){for(;s[r];)r++;s[r]=[l],r++}}),r=0,Sp(s,function(l,d){d.forEach(c=>{l>=0&&(c[e]=r++)})}),o&&i.forEach(l=>{a(l)&&(l[e]=r++)})},JR=(i,e)=>i.reduce((t,n)=>{const s=e(n);return t[s]=t[s]??[],t[s].push(n),t},{}),Cw=(i,e)=>{const t=R(i).contents().filter(`[data-options*="${e}"]`);return[].slice.call(t).map(n=>{const s=R(n).attr("data-options")||"";return{element:n,options:$t().optionsParser(s)[e]}}).filter(n=>!!n.options)},QR=i=>{const e=JR(i,n=>n.options.name);if(e[void 0])throw Pt.Error("E0023");const t={};return Object.keys(e).forEach(n=>{var s;const o=(s=CC(Re.current(),e[n],r=>r.options)[0])===null||s===void 0?void 0:s.element;o&&(t[n]=o)}),t},xw=i=>{const e=i.render.bind(i);return Y({},i,{render(t){const n=e(t);return t&&t.onRendered&&t.onRendered(),n}})},e4=i=>{const e=i.render.bind(i);return Y({},i,{render(t){const n=R(t.container);return e(ve({},t,{container:ze(n)}))}})},t4=i=>{const e=[];return"model"in i&&e.push(i.model),"index"in i&&e.push(i.index),e.push(i.container),e},i4=i=>typeof i=="string"?gu(i):i,w0=i=>Cn(i)&&i[0]||i,n4=i=>new qR(i),s4=(i,e,t,n)=>{let s=null;return(!n||n.indexOf(i)===-1)&&(s=e[i],s&&!(s instanceof Sr)&&(Ee(s.render)&&(s=e4(s)),t||(s=xw(s)))),s},S0=(i,e,t,n,s,o)=>i==null?new or:i instanceof km?o[i.name]:i instanceof Sr?i:Ee(i.render)&&!Cn(i)?n?i:xw(i):i.nodeType||Cn(i)?e(R(i)):s4(i,t,n,s)||o[i]||e(i),o4=new fa(i=>{let{model:e,parent:t}=i;const n=e.widget;if(!n)return R();const s=R("<div>"),o=e.options||{};return t?t._createComponent(s,n,o):s[n](o),s});class E0{constructor(e,t){this._tempTemplates=[],this._defaultTemplates={},this._anonymousTemplateName=t||"template",this._createElement=e||n4,this._createTemplateIfNeeded=this._createTemplateIfNeeded.bind(this)}static createDefaultOptions(){return{integrationOptions:{watchMethod:function(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).skipImmediate||t(e()),ue},templates:{"dx-polymorph-widget":o4},useDeferUpdateForTemplates:!0}}}get anonymousTemplateName(){return this._anonymousTemplateName}addDefaultTemplates(e){this._defaultTemplates=Y({},this._defaultTemplates,e)}dispose(){this._tempTemplates.forEach(e=>{e.template.dispose&&e.template.dispose()}),this._tempTemplates=[]}extractTemplates(e){const t=this._extractTemplates(e),n=this._extractAnonymousTemplate(e);return{templates:t,anonymousTemplateMeta:n}}_extractTemplates(e){const t=Cw(e,"dxTemplate"),n=QR(t);return t.forEach(s=>{let{element:o,options:{name:r}}=s;o===n[r]?R(o).addClass("dx-template-wrapper").detach():R(o).remove()}),Object.keys(n).map(s=>({name:s,template:this._createTemplate(n[s])}))}_extractAnonymousTemplate(e){const t=e.contents().detach();return t.filter((s,o)=>{const r=o.nodeType===3,a=R(o).text().trim().length<1;return!(r&&a)}).length>0?{template:this._createTemplate(t),name:this._anonymousTemplateName}:{}}_createTemplateIfNeeded(e){const t=this._tempTemplates.filter(s=>s.source===w0(e))[0];if(t)return t.template;const n=this._createTemplate(e);return this._tempTemplates.push({template:n,source:w0(e)}),n}_createTemplate(e){return this._createElement(i4(e))}getTemplate(e,t,n,s){let{isAsyncTemplate:o,skipTemplates:r}=n;return Ee(e)?new fa(a=>{const l=e.apply(s,t4(a));if(!U(l))return new or;let d=!1;const c=S0(l,u=>u.nodeType||Cn(u)&&!R(u).is("script")?new fa(()=>u):(d=!0,this._createTemplate(u)),t,o,r,this._defaultTemplates),h=c.render(a);return d&&c.dispose&&c.dispose(),h}):S0(e,this._createTemplateIfNeeded,t,o,r,this._defaultTemplates)}}const gh="KeyboardProcessor",ww=i=>({keyName:oi(i),key:i.key,code:i.code,ctrl:i.ctrlKey,location:i.location,metaKey:i.metaKey,shift:i.shiftKey,alt:i.altKey,which:i.which,originalEvent:i}),Om=Lt.inherit({_keydown:be("keydown",gh),_compositionStart:be("compositionstart",gh),_compositionEnd:be("compositionend",gh),ctor:function(i){i=i||{},i.element&&(this._element=R(i.element)),i.focusTarget&&(this._focusTarget=i.focusTarget),this._handler=i.handler,this._element&&(this._processFunction=e=>{const t=R(this._focusTarget).toArray(),n=this._focusTarget&&this._focusTarget!==e.target&&!t.includes(e.target),s=this._isComposingJustFinished&&e.which===229||this._isComposing||n;this._isComposingJustFinished=!1,s||this.process(e)},this._toggleProcessingWithContext=this.toggleProcessing.bind(this),q.on(this._element,this._keydown,this._processFunction),q.on(this._element,this._compositionStart,this._toggleProcessingWithContext),q.on(this._element,this._compositionEnd,this._toggleProcessingWithContext))},dispose:function(){this._element&&(q.off(this._element,this._keydown,this._processFunction),q.off(this._element,this._compositionStart,this._toggleProcessingWithContext),q.off(this._element,this._compositionEnd,this._toggleProcessingWithContext)),this._element=void 0,this._handler=void 0},process:function(i){this._handler(ww(i))},toggleProcessing:function(i){let{type:e}=i;this._isComposing=e==="compositionstart",this._isComposingJustFinished=!this._isComposing}});Om.createKeyDownOptions=ww;function Si(i,e){return e?be(i,e):i}function tf(i,e){return typeof i=="function"?i(e):i.execute(e)}const I0={on:(i,e,t,n)=>{const{selector:s,showTimeout:o,hideTimeout:r,namespace:a}=n;q.on(i,Si("dxactive",a),s,{timeout:o},l=>tf(e,{event:l,element:l.currentTarget})),q.on(i,Si("dxinactive",a),s,{timeout:r},l=>tf(t,{event:l,element:l.currentTarget}))},off:(i,e)=>{let{namespace:t,selector:n}=e;q.off(i,Si("dxactive",t),n),q.off(i,Si("dxinactive",t),n)}},Nc={on:function(i,e){let{namespace:t}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q.on(i,Si("dxresize",t),e)},off:function(i){let{namespace:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q.off(i,Si("dxresize",e))}},T0={on:(i,e,t,n)=>{let{selector:s,namespace:o}=n;q.on(i,Si("dxhoverend",o),s,r=>t(r)),q.on(i,Si("dxhoverstart",o),s,r=>tf(e,{element:r.target,event:r}))},off:(i,e)=>{let{selector:t,namespace:n}=e;q.off(i,Si("dxhoverstart",n),t),q.off(i,Si("dxhoverend",n),t)}},Lc={on:(i,e,t,n)=>{let{namespace:s}=n;q.on(i,Si("dxhiding",s),t),q.on(i,Si("dxshown",s),e)},off:(i,e)=>{let{namespace:t}=e;q.off(i,Si("dxhiding",t)),q.off(i,Si("dxshown",t))}},cc={on:(i,e,t,n)=>{let{namespace:s}=n;q.on(i,Si("focusin",s),e),q.on(i,Si("focusout",s),t)},off:(i,e)=>{let{namespace:t}=e;q.off(i,Si("focusin",t)),q.off(i,Si("focusout",t))},trigger:i=>q.trigger(i,"focus")},D0={on:function(i,e){let{namespace:t}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q.on(i,Si("dxclick",t),e)},off:function(i){let{namespace:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q.off(i,Si("dxclick",e))}},A0={on:function(i,e){let{namespace:t}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q.on(i,Si("click",t),e)},off:function(i){let{namespace:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q.off(i,Si("click",e))}};let r4=0;const Oa={},a4=()=>"keyboardProcessorId"+r4++,wo={on:(i,e,t)=>{const n=a4();return Oa[n]=new Om({element:i,focusTarget:e,handler:t}),n},off:i=>{i&&Oa[i]&&(Oa[i].dispose(),delete Oa[i])},_getProcessor:i=>Oa[i]},l4=[],d4=".";function c4(i){const{major:e,minor:t,patch:n}=i;return[e,t,n].join(d4)}function Sw(i){const[e,t,n]=i.split(".").map(Number);return{major:e,minor:t,patch:n}}function u4(i){return i.map(e=>`${e.packageName}: ${e.version}`).join(`
`)}function h4(i,e){return i.major===e.major&&i.minor===e.minor&&i.patch===e.patch}function p4(i){let{major:e,minor:t,patch:n}=i;return t===1?{major:e-1,minor:2,patch:n}:{major:e,minor:t-1,patch:n}}function f4(i){const e=l4.filter(t=>!h4(Sw(t.version),i));return e.length?(Pt.log("W0023",u4([{packageName:"devextreme",version:c4(i)},...e])),!1):!0}function m4(i){return new Uint8Array(atob(i).split("").map(e=>e.charCodeAt(0)))}function g4(i){var e;return new Uint8Array(((e=i.match(/.{1,2}/g))===null||e===void 0?void 0:e.map(t=>parseInt(t,16)))??[])}function _4(i){const e=new Uint8Array(i.length);for(let t=0;t<i.length;t+=1)e[t]=255&i.charCodeAt(t);return e}function b4(i){const e=new Uint8Array(4*i.length);for(let t=0;t<e.length;t+=1)e[t]=i[t>>2]>>>8*(3-t%4);return e}function v4(i){const e=new Uint32Array(1+(i.length-1>>2));for(let t=0;t<i.length;t+=1)e[t>>2]|=i[t]<<8*(3-t%4);return e}function k0(i,e){return(i<<e|i>>>32-e)>>>0}function O0(i,e){const t=new Uint8Array(i.length+e.length);return t.set(i,0),t.set(e,i.length),t}const Ew={e:65537,n:new Uint8Array([200,219,153,203,140,7,228,253,193,243,62,137,139,60,68,242,48,142,113,88,185,235,253,105,80,74,32,170,96,74,111,250,7,205,154,3,146,115,153,53,45,132,123,56,61,208,184,201,63,24,109,223,0,179,169,102,139,224,73,233,45,173,138,66,98,88,69,76,177,111,113,218,192,33,101,152,25,134,34,173,32,82,230,44,247,200,253,170,192,246,30,12,96,205,100,249,181,93,0,231])},y4="rP3XF5nvQkaypOyBLpucTA",C4="3021300906052b0e03021a05000414";function x4(i){const e=(8*Ew.n.length+6)/8,t=O0(g4(C4),i);if(t.length+10>e)throw Error("Key is too short for SHA1 signing algorithm");const n=new Uint8Array(e-t.length);return n.fill(255,0,n.length-1),n[0]=0,n[1]=1,n[n.length-1]=0,O0(n,t)}function w4(i){try{const e=BigInt(0),t=BigInt(1),n=BigInt(8),s=(h,u,p)=>{let f=t,g=h,m=u;for(;m;)m&t&&(f=f*g%p),g=g*g%p,m>>=t;return f},o=h=>h.reduce((u,p)=>(u<<n)+BigInt(p),e),r=o(i.actual),a=o(i.signature),l=BigInt(i.key.e),d=o(i.key.n);return s(a,l,d)===r}catch{return!0}}function S4(i){const e=new Uint8Array(i.length+1);e.set(_4(i)),e[e.length-1]=128;const t=v4(new Uint8Array(e)),n=new Uint32Array(16*Math.ceil((t.length+2)/16));return n.set(t,0),n[n.length-1]=8*(e.length-1),n}function E4(i){const e=S4(i),t=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]);for(let n=0;n<e.length;n+=16){const s=new Uint32Array(80);for(let c=0;c<16;c+=1)s[c]=e[n+c];for(let c=16;c<80;c+=1){const h=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=h<<1|h>>>31}let o=t[0],r=t[1],a=t[2],l=t[3],d=t[4];for(let c=0;c<80;c+=1){const[h,u]=c<20?[r&a|~r&l,1518500249]:c<40?[r^a^l,1859775393]:c<60?[r&a|r&l|a&l,2400959708]:[r^a^l,3395469782],p=k0(o,5)+h+d+u+s[c];d=l,l=a,a=k0(r,30),r=o,o=p}t[0]+=o,t[1]+=r,t[2]+=a,t[3]+=l,t[4]+=d}return b4(t)}const Iw=()=>typeof HTMLElement<"u"&&typeof customElements<"u",Tw=Iw()?HTMLElement:class{},rr={trigger:"dx-license-trigger",panel:"dx-license"},yo={buyNow:"buy-now",version:"version"},Dw={opacity:"1",visibility:"visible","clip-path":"none",filter:"none"},Aw=ve({},Dw,{width:"100%",height:"auto","line-height":"normal",display:"block","z-index":"1500",position:"static",transform:"translate(0px, 0px)","background-color":"#FF7200",border:"none",margin:"auto","box-sizing":"border-box","text-align":"center"}),I4=ve({},Aw,{display:"flex","align-items":"center","flex-direction":"row",position:"relative",top:"0px",left:"0px",padding:"0.5rem"}),T4={width:"1rem",cursor:"pointer",height:"1rem"},R0=ve({},Dw,{display:"inline",position:"static",padding:"0px",margin:"0px",color:"white","font-family":"'Segoe UI','Open Sans Condensed',-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,Cantarell,Ubuntu,roboto,noto,arial,sans-serif","font-size":"0.875rem","font-wight":"600"});function Ms(i,e){const t=e?ve({},i,e):i;return Object.keys(t).reduce((n,s)=>`${n}${[s,`${t[s]} !important;`].join(": ")}`,"")}class Vs extends Tw{constructor(){var e,t,n,s,o;super(),this._observer=null,this._inReassign=!1,this._hidden=!1,this._spanStyles=Ms(R0,(e=Vs.customStyles)===null||e===void 0?void 0:e.textStyles),this._linkStyles=Ms(R0,(t=Vs.customStyles)===null||t===void 0?void 0:t.linkStyles),this._containerStyles=Ms(I4,(n=Vs.customStyles)===null||n===void 0?void 0:n.containerStyles),this._contentStyles=Ms(Aw,(s=Vs.customStyles)===null||s===void 0?void 0:s.contentStyles),this._buttonStyles=Ms(T4,(o=Vs.customStyles)===null||o===void 0?void 0:o.contentStyles)}_createSpan(e){const t=document.createElement("span");return t.innerText=e,t.style.cssText=this._spanStyles,t}_createLink(e,t){const n=document.createElement("a");return n.innerText=e,n.style.cssText=this._linkStyles,n.href=t,n.target="_blank",n}_createButton(){const e=document.createElement("div");e.style.cssText=this._buttonStyles;const t=document.createElementNS("http://www.w3.org/2000/svg","polygon"),n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("points","13.4 12.7 8.7 8 13.4 3.4 12.6 2.6 8 7.3 3.4 2.6 2.6 3.4 7.3 8 2.6 12.6 3.4 13.4 8 8.7 12.7 13.4 13.4 12.7"),t.style.cssText=Ms({fill:"#fff",opacity:".5","stroke-width":"0px"}),n.setAttribute("id","Layer_1"),n.setAttribute("data-name","Layer 1"),n.setAttribute("version","1.1"),n.setAttribute("viewBox","0 0 16 16"),n.style.cssText=Ms({"vertical-align":"baseline"}),n.appendChild(t),e.appendChild(n),e.onclick=()=>{this._hidden=!0,this.style.cssText=Ms({display:"none"})},e}_createContentContainer(){const e=document.createElement("div");return e.style.cssText=this._contentStyles,e.append(this._createSpan("For evaluation purposes only. Redistribution prohibited. Please "),this._createLink("purchase a license",this.getAttribute(yo.buyNow)),this._createSpan(` to continue use of DevExpress product libraries (v${this.getAttribute(yo.version)}).`)),e}_reassignComponent(){this.innerHTML="",this.style.cssText=this._containerStyles,this.append(this._createContentContainer(),this._createButton())}connectedCallback(){this._reassignComponent(),this._observer||(this._observer=new MutationObserver(()=>{if(this._hidden){var e;(e=this._observer)===null||e===void 0||e.disconnect();return}this._inReassign?this._inReassign=!1:(this._inReassign=!0,this._reassignComponent())}),this._observer.observe(this,{childList:!0,attributes:!0,subtree:!0}))}disconnectedCallback(){setTimeout(()=>{document.getElementsByTagName(rr.panel).length||document.body.prepend(this)},100)}}Vs.customStyles=void 0;class D4 extends Tw{connectedCallback(){if(this.style.cssText=Ms({display:"none"}),!document.getElementsByTagName(rr.panel).length){const t=document.createElement(rr.panel);t.setAttribute(yo.version,this.getAttribute(yo.version)),t.setAttribute(yo.buyNow,this.getAttribute(yo.buyNow)),t.setAttribute("data-permanent","true"),document.body.prepend(t)}}}function A4(i){customElements.get(rr.trigger)||(Vs.customStyles=i,customElements.define(rr.trigger,D4),customElements.define(rr.panel,Vs))}function k4(i,e,t){A4(t);const n=document.createElement(rr.trigger);n.setAttribute(yo.buyNow,i),n.setAttribute(yo.version,e),document.body.appendChild(n)}function O4(i,e,t){Iw()&&k4(i,e,t)}var Gn;(function(i){i.corrupted="corrupted",i.verified="verified",i.internal="internal"})(Gn||(Gn={}));const R4=["customerId","maxVersionAllowed","format","internalUsageId"],M4=1,P4=3,B4=".",F4="https://go.devexpress.com/Licensing_Installer_Watermark_DevExtremeJQuery.aspx",M0={kind:Gn.corrupted,error:"general"},V4={kind:Gn.corrupted,error:"verification"},N4={kind:Gn.corrupted,error:"decoding"},L4={kind:Gn.corrupted,error:"deserialization"},$4={kind:Gn.corrupted,error:"payload"},H4={kind:Gn.corrupted,error:"version"};let nf=!1;function z4(i){let{text:e,signature:t}=i;return w4({key:Ew,signature:m4(t),actual:x4(E4(e))})}function W4(i){if(i===void 0)return M0;const e=i.split(B4);if(e.length!==2||e[0].length===0||e[1].length===0)return M0;if(!z4({text:e[0],signature:e[1]}))return V4;let t="";try{t=atob(e[0])}catch{return N4}let n={};try{n=JSON.parse(t)}catch{return L4}const{customerId:s,maxVersionAllowed:o,format:r,internalUsageId:a}=n,l=ei(n,R4);return a!==void 0?{kind:Gn.internal,internalUsageId:a}:s===void 0||o===void 0||r===void 0?$4:r!==M4?H4:{kind:Gn.verified,payload:ve({customerId:s,maxVersionAllowed:o},l)}}function kw(i){return isNaN(i)||i<P4}function j4(i){let{licenseKey:e,version:t}=i,n=!1;try{n=kw(t.patch);const{major:s,minor:o}=n?p4(t):t;if(!e)return{preview:n,error:"W0019"};const r=W4(e);return r.kind===Gn.corrupted?{preview:n,error:"W0021"}:r.kind===Gn.internal?{preview:n,internal:!0,error:r.internalUsageId===y4?void 0:"W0020"}:s&&o?10*s+o>r.payload.maxVersionAllowed?{preview:n,error:"W0020"}:{preview:n,error:void 0}:{preview:n,error:"W0021"}}catch{return{preview:n,error:"W0021"}}}function K4(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s_;if(nf)return;nf=!0;const t=Sw(e),n=f4(t),{internal:s,error:o}=j4({licenseKey:i,version:t});if(!n&&s)return;o&&!s&&O4($t().buyNowLink??F4,s_);const r=kw(t.patch);if(o){Pt.log(r?"W0022":o);return}r&&!s&&Pt.log("W0022")}function P0(){return nf}const G4={validateLicense:K4},{abstract:Ad}=vw,Ss=vw.inherit({_getDefaultOptions(){return Y(this.callBase(),{width:void 0,height:void 0,rtlEnabled:$t().rtlEnabled,elementAttr:{},disabled:!1,integrationOptions:{}},this._useTemplates()?E0.createDefaultOptions():{})},ctor(i,e){this._customClass=null,this._createElement(i),cw(this._$element,this,this._dispose),this.callBase(e);const t=P0();G4.validateLicense($t().licenseKey),!t&&P0()&&$t({licenseKey:""})},_createElement(i){this._$element=R(i)},_getSynchronizableOptionsForCreateComponent:()=>["rtlEnabled","disabled","templatesRenderAsynchronously"],_checkFunctionValueDeprecation:function(i){this.option("_ignoreFunctionValueDeprecation")||i.forEach(e=>{Ee(this.option(e))&&Pt.log("W0017",e)})},_visibilityChanged:Ad,_dimensionChanged:Ad,_init(){this.callBase(),this._checkFunctionValueDeprecation(["width","height","maxHeight","maxWidth","minHeight","minWidth","popupHeight","popupWidth"]),this._attachWindowResizeCallback(),this._initTemplateManager()},_setOptionsByDevice(i){this.callBase([].concat(this.constructor._classCustomRules||[],i||[]))},_isInitialOptionValue(i){return!(this.constructor._classCustomRules&&Object.prototype.hasOwnProperty.call(this._convertRulesToOptions(this.constructor._classCustomRules),i))&&this.callBase(i)},_attachWindowResizeCallback(){if(this._isDimensionChangeSupported()){const i=this._windowResizeCallBack=this._dimensionChanged.bind(this);hr.add(i)}},_isDimensionChangeSupported(){return this._dimensionChanged!==Ad},_renderComponent(){z2(this.$element()),this._initMarkup(),qe()&&this._render()},_initMarkup(){const{rtlEnabled:i}=this.option()||{};this._renderElementAttributes(),this._toggleRTLDirection(i),this._renderVisibilityChange(),this._renderDimensions()},_render(){this._attachVisibilityChangeHandlers()},_renderElementAttributes(){const{elementAttr:i}=this.option()||{},e=Y({},i),t=e.class;delete e.class,this.$element().attr(e).removeClass(this._customClass).addClass(t),this._customClass=t},_renderVisibilityChange(){this._isDimensionChangeSupported()&&this._attachDimensionChangeHandlers(),this._isVisibilityChangeSupported()&&this.$element().addClass("dx-visibility-change-handler")},_renderDimensions(){const i=this.$element(),e=i.get(0),t=this._getOptionValue("width",e),n=this._getOptionValue("height",e);this._isCssUpdateRequired(e,n,t)&&i.css({width:t===null?"":t,height:n===null?"":n})},_isCssUpdateRequired:(i,e,t)=>!!(U(t)||U(e)||i.style.width||i.style.height),_attachDimensionChangeHandlers(){const i=this.$element(),e=`${this.NAME}VisibilityChange`;Nc.off(i,{namespace:e}),Nc.on(i,()=>this._dimensionChanged(),{namespace:e})},_attachVisibilityChangeHandlers(){if(this._isVisibilityChangeSupported()){const i=this.$element(),e=`${this.NAME}VisibilityChange`;this._isHidden=!this._isVisible(),Lc.off(i,{namespace:e}),Lc.on(i,()=>this._checkVisibilityChanged("shown"),()=>this._checkVisibilityChanged("hiding"),{namespace:e})}},_isVisible(){return this.$element().is(":visible")},_checkVisibilityChanged(i){this._isVisible()&&(i==="hiding"&&!this._isHidden?(this._visibilityChanged(!1),this._isHidden=!0):i==="shown"&&this._isHidden&&(this._isHidden=!1,this._visibilityChanged(!0)))},_isVisibilityChangeSupported(){return this._visibilityChanged!==Ad&&qe()},_clean:ue,_modelByElement(){const{modelByElement:i}=this.option(),e=this.$element();return i?i(e):void 0},_invalidate(){if(this._isUpdateAllowed())throw Pt.Error("E0007");this._requireRefresh=!0},_refresh(){this._clean(),this._renderComponent()},_dispose(){this._templateManager&&this._templateManager.dispose(),this.callBase(),this._clean(),this._detachWindowResizeCallback()},_detachWindowResizeCallback(){this._isDimensionChangeSupported()&&hr.remove(this._windowResizeCallBack)},_toggleRTLDirection(i){this.$element().toggleClass("dx-rtl",i)},_createComponent(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=ln(this._getSynchronizableOptionsForCreateComponent(),l=>!(l in t)),{integrationOptions:s}=this.option();let{nestedComponentOptions:o}=this.option();o=o||ue;const r=Y({integrationOptions:s},o(this));n.forEach(l=>r[l]=this.option(l)),this._extendConfig(t,r);let a;if(Ke(e)?a=R(i)[e](t)[e]("instance"):i&&(a=e.getInstance(i),a?a.option(t):a=new e(i,t)),a){const l=d=>{let{name:c,value:h}=d;n.includes(c)&&a.option(c,h)};this.on("optionChanged",l),a.on("disposing",()=>this.off("optionChanged",l))}return a},_extendConfig(i,e){ie(e,(t,n)=>{!Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=n)})},_defaultActionConfig(){const i=this.$element(),e=this._modelByElement(i);return Y(this.callBase(),{context:e})},_defaultActionArgs(){const i=this.$element(),e=this._modelByElement(i),t=this.element();return Y(this.callBase(),{element:t,model:e})},_optionChanged(i){switch(i.name){case"width":case"height":this._renderDimensions();break;case"rtlEnabled":this._invalidate();break;case"elementAttr":this._renderElementAttributes();break;case"disabled":case"integrationOptions":break;default:this.callBase(i)}},_removeAttributes(i){const e=i.attributes;for(let t=e.length-1;t>=0;t--){const n=e[t];if(n){const{name:s}=n;(!s.indexOf("aria-")||s.indexOf("dx-")!==-1||s==="role"||s==="style"||s==="tabindex")&&i.removeAttribute(s)}}},_removeClasses(i){i.className=i.className.split(" ").filter(e=>e.lastIndexOf("dx-",0)!==0).join(" ")},_updateDOMComponent(i){i?this._renderComponent():this._requireRefresh&&(this._requireRefresh=!1,this._refresh())},endUpdate(){const i=this._isInitializingRequired();this.callBase(),this._isUpdateAllowed()&&this._updateDOMComponent(i)},$element(){return this._$element},element(){const i=this.$element();return ze(i)},dispose(){const i=this.$element().get(0);Bl(i,!0),i.textContent="",this._removeAttributes(i),this._removeClasses(i)},resetOption(i){if(this.callBase(i),i==="width"||i==="height"){const e=this.initialOption(i);!U(e)&&this.$element().css(i,"")}},_getAnonymousTemplateName(){},_initTemplateManager(){if(this._templateManager||!this._useTemplates())return;const{integrationOptions:i={}}=this.option(),{createTemplate:e}=i;this._templateManager=new E0(e,this._getAnonymousTemplateName()),this._initTemplates()},_initTemplates(){const{templates:i,anonymousTemplateMeta:e}=this._templateManager.extractTemplates(this.$element()),t=this.option(`integrationOptions.templates.${e.name}`);i.forEach(n=>{let{name:s,template:o}=n;this._options.silent(`integrationOptions.templates.${s}`,o)}),e.name&&!t&&(this._options.silent(`integrationOptions.templates.${e.name}`,e.template),this._options.silent("_hasAnonymousTemplateContent",!0))},_getTemplateByOption(i){return this._getTemplate(this.option(i))},_getTemplate(i){const e=this.option("integrationOptions.templates"),t=this.option("templatesRenderAsynchronously"),n=this.option("integrationOptions.skipTemplates");return this._templateManager.getTemplate(i,e,{isAsyncTemplate:t,skipTemplates:n},this)},_saveTemplate(i,e){this._setOptionWithoutOptionChange("integrationOptions.templates."+i,this._templateManager._createTemplate(e))},_useTemplates:()=>!0});Ss.getInstance=function(i){return uw(R(i),this)};Ss.defaultOptions=function(i){this._classCustomRules=this._classCustomRules||[],this._classCustomRules.push(i)};function Ow(i,e,t){function n(o){return typeof o=="string"?o.split("."):typeof o=="number"?[o]:o}i=n(i),e=n(e);let s=Math.max(i.length,e.length);isFinite(t)&&(s=Math.min(s,t));for(let o=0;o<s;o++){const r=parseInt(i[o]||0,10),a=parseInt(e[o]||0,10);if(r<a)return-1;if(r>a)return 1}return 0}const U4="dxactive",kd=Lt.inherit({ctor:function(i,e){this._timeout=i,this._fire=e},start:function(){const i=this;this._schedule(function(){i.force()})},_schedule:function(i){this.stop(),this._timer=setTimeout(i,this._timeout)},stop:function(){clearTimeout(this._timer)},force:function(){this._fired||(this.stop(),this._fire(),this._fired=!0)},fired:function(){return this._fired}});let es;const Rm=vu.inherit({ctor:function(){this.callBase.apply(this,arguments),this._active=new kd(0,ue),this._inactive=new kd(0,ue)},configure:function(i,e){switch(e){case"dxactive":i.activeTimeout=i.timeout;break;case"dxinactive":i.inactiveTimeout=i.timeout}this.callBase(i)},start:function(i){if(es){const e=ms(this.getElement().get(0),es.getElement().get(0)),t=!es._active.fired();if(e&&t){this._cancel();return}es._inactive.force()}es=this,this._initEvents(i),this._active.start()},_initEvents:function(i){const e=this,t=this._getEmitterTarget(i),n=ur(i),o=Re.isSimulator()||!n,r=ci(this.activeTimeout,30),a=ci(this.inactiveTimeout,400);this._active=new kd(o?r:0,function(){e._fireEvent("dxactive",i,{target:t})}),this._inactive=new kd(o?a:0,function(){e._fireEvent("dxinactive",i,{target:t}),es=null})},cancel:function(i){this.end(i)},end:function(i){const e=i.type!==Ct.up;e?this._active.stop():this._active.force(),this._inactive.start(),e&&this._inactive.force()},dispose:function(){this._active.stop(),this._inactive.stop(),es===this&&(es=null),this.callBase()},lockInactive:function(){return this._active.force(),this._inactive.stop(),es=null,this._cancel(),this._inactive.force.bind(this._inactive)}});Rm.lock=function(i){const e=es?es.lockInactive():ue;i.done(e)};xa({emitter:Rm,events:["dxactive","dxinactive"]});const q4=Rm.lock,ql="dxhoverstart",Y4=be(Ct.enter,"dxHoverStart"),Yl="dxhoverend",X4=be(Ct.leave,"dxHoverEnd"),Rw=Lt.inherit({noBubble:!0,ctor:function(){this._handlerArrayKeyPath=this._eventNamespace+"_HandlerStore"},setup:function(i){di(i,this._handlerArrayKeyPath,{})},add:function(i,e){const t=this,n=function(s){t._handler(s)};q.on(i,this._originalEventName,e.selector,n),di(i,this._handlerArrayKeyPath)[e.guid]=n},_handler:function(i){Vl(i)||Re.isSimulator()||Mo({type:this._eventName,originalEvent:i,delegateTarget:i.delegateTarget})},remove:function(i,e){const t=di(i,this._handlerArrayKeyPath)[e.guid];q.off(i,this._originalEventName,e.selector,t)},teardown:function(i){pu(i,this._handlerArrayKeyPath)}}),Z4=Rw.inherit({ctor:function(){this._eventNamespace="dxHoverStart",this._eventName=ql,this._originalEventName=Y4,this.callBase()},_handler:function(i){(i.pointers||[]).length||this.callBase(i)}}),J4=Rw.inherit({ctor:function(){this._eventNamespace="dxHoverEnd",this._eventName=Yl,this._originalEventName=X4,this.callBase()}});Yn(ql,new Z4);Yn(Yl,new J4);function B0(i,e,t){i=i==="role"||i==="id"?i:`aria-${i}`,e=U(e)?e.toString():null,t.attr(i,e)}const Hi=Ss.inherit({_feedbackHideTimeout:400,_feedbackShowTimeout:30,_supportedKeys:()=>({}),_getDefaultOptions(){return Y(this.callBase(),{hoveredElement:null,isActive:!1,disabled:!1,visible:!0,hint:void 0,activeStateEnabled:!1,onContentReady:null,hoverStateEnabled:!1,focusStateEnabled:!1,tabIndex:0,accessKey:void 0,onFocusIn:null,onFocusOut:null,onKeyboardHandled:null,ignoreParentReadOnly:!1,useResizeObserver:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){const i=Re.real(),e=i.platform,t=i.version;return e==="ios"&&Ow(t,"13.3")<=0},options:{useResizeObserver:!1}}])},_init(){this.callBase(),this._initContentReadyAction()},_innerWidgetOptionChanged:function(i,e){const t=Hi.getOptionsFromContainer(e);i&&i.option(t),this._options.cache(e.name,t)},_bindInnerWidgetOptions(i,e){const t=()=>this._options.silent(e,Y({},i.option()));t(),i.on("optionChanged",t)},_getAriaTarget(){return this._focusTarget()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){const{disabled:i,visible:e}=this.option();this.$element().addClass("dx-widget"),this._toggleDisabledState(i),this._toggleVisibility(e),this._renderHint(),this._isFocusable()&&this._renderFocusTarget(),this.callBase()},_render(){this.callBase(),this._renderContent(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents(),this._toggleIndependentState()},_renderHint(){const{hint:i}=this.option();this.$element().attr("title",i||null)},_renderContent(){Di(()=>this._disposed?void 0:this._renderContentImpl()).done(()=>this._disposed?void 0:this._fireContentReadyAction())},_renderContentImpl:ue,_fireContentReadyAction:ra(function(){return this._contentReadyAction()}),_dispose(){this._contentReadyAction=null,this._detachKeyboardEvents(),this.callBase()},_resetActiveState(){this._toggleActiveState(this._eventBindingTarget(),!1)},_clean(){this._cleanFocusState(),this._resetActiveState(),this.callBase(),this.$element().empty()},_toggleVisibility(i){this.$element().toggleClass("dx-state-invisible",!i)},_renderFocusState(){this._attachKeyboardEvents(),this._isFocusable()&&(this._renderFocusTarget(),this._attachFocusEvents(),this._renderAccessKey())},_renderAccessKey(){const i=this._focusTarget(),{accessKey:e}=this.option();i.attr("accesskey",e)},_isFocusable(){const{focusStateEnabled:i,disabled:e}=this.option();return i&&!e},_eventBindingTarget(){return this.$element()},_focusTarget(){return this._getActiveElement()},_isFocusTarget:function(i){return R(this._focusTarget()).toArray().includes(i)},_findActiveTarget(i){return i.find(this._activeStateUnit).not(".dx-state-disabled")},_getActiveElement(){const i=this._eventBindingTarget();return this._activeStateUnit?this._findActiveTarget(i):i},_renderFocusTarget(){const{tabIndex:i}=this.option();this._focusTarget().attr("tabIndex",i)},_keyboardEventBindingTarget(){return this._eventBindingTarget()},_refreshFocusEvent(){this._detachFocusEvents(),this._attachFocusEvents()},_focusEventTarget(){return this._focusTarget()},_focusInHandler(i){i.isDefaultPrevented()||this._createActionByOption("onFocusIn",{beforeExecute:()=>this._updateFocusState(i,!0),excludeValidators:["readOnly"]})({event:i})},_focusOutHandler(i){i.isDefaultPrevented()||this._createActionByOption("onFocusOut",{beforeExecute:()=>this._updateFocusState(i,!1),excludeValidators:["readOnly","disabled"]})({event:i})},_updateFocusState(i,e){let{target:t}=i;this._isFocusTarget(t)&&this._toggleFocusClass(e,R(t))},_toggleFocusClass(i,e){(e&&e.length?e:this._focusTarget()).toggleClass("dx-state-focused",i)},_hasFocusClass(i){return R(i||this._focusTarget()).hasClass("dx-state-focused")},_isFocused(){return this._hasFocusClass()},_getKeyboardListeners:()=>[],_attachKeyboardEvents(){this._detachKeyboardEvents();const{focusStateEnabled:i,onKeyboardHandled:e}=this.option(),t=this._getKeyboardListeners().length;(i||t||!!e)&&(this._keyboardListenerId=wo.on(this._keyboardEventBindingTarget(),this._focusTarget(),o=>this._keyboardHandler(o)))},_keyboardHandler(i,e){if(!e){const{originalEvent:s,keyName:o,which:r}=i,a=this._supportedKeys(s),l=a[o]||a[r];if(l!==void 0&&!l.bind(this)(s,i))return!1}const t=this._getKeyboardListeners(),{onKeyboardHandled:n}=this.option();return t.forEach(s=>s&&s._keyboardHandler(i)),n&&n(i),!0},_refreshFocusState(){this._cleanFocusState(),this._renderFocusState()},_cleanFocusState(){this._focusTarget().removeAttr("tabIndex"),this._toggleFocusClass(!1),this._detachFocusEvents(),this._detachKeyboardEvents()},_detachKeyboardEvents(){wo.off(this._keyboardListenerId),this._keyboardListenerId=null},_attachHoverEvents(){const{hoverStateEnabled:i}=this.option(),e=this._activeStateUnit,t=this._eventBindingTarget();T0.off(t,{selector:e,namespace:"UIFeedback"}),i&&T0.on(t,new bn(n=>{let{event:s,element:o}=n;this._hoverStartHandler(s),this.option("hoveredElement",R(o))},{excludeValidators:["readOnly"]}),n=>{this.option("hoveredElement",null),this._hoverEndHandler(n)},{selector:e,namespace:"UIFeedback"})},_attachFeedbackEvents(){const{activeStateEnabled:i}=this.option(),e=this._activeStateUnit,t=this._eventBindingTarget();I0.off(t,{namespace:"UIFeedback",selector:e}),i&&I0.on(t,new bn(n=>{let{event:s,element:o}=n;return this._toggleActiveState(R(o),!0,s)}),new bn(n=>{let{event:s,element:o}=n;return this._toggleActiveState(R(o),!1,s)},{excludeValidators:["disabled","readOnly"]}),{showTimeout:this._feedbackShowTimeout,hideTimeout:this._feedbackHideTimeout,selector:e,namespace:"UIFeedback"})},_detachFocusEvents(){const i=this._focusEventTarget();cc.off(i,{namespace:`${this.NAME}Focus`})},_attachFocusEvents(){const i=this._focusEventTarget();cc.on(i,e=>this._focusInHandler(e),e=>this._focusOutHandler(e),{namespace:`${this.NAME}Focus`,isFocusable:(e,t)=>R(t).is(Pp)})},_hoverStartHandler:ue,_hoverEndHandler:ue,_toggleActiveState(i,e){this.option("isActive",e),i.toggleClass("dx-state-active",e)},_updatedHover(){const i=this._options.silent("hoveredElement");this._hover(i,i)},_findHoverTarget(i){return i&&i.closest(this._activeStateUnit||this._eventBindingTarget())},_hover(i,e){const{hoverStateEnabled:t,disabled:n,isActive:s}=this.option();if(e=this._findHoverTarget(e),e&&e.toggleClass("dx-state-hover",!1),i&&t&&!n&&!s){const o=this._findHoverTarget(i);o&&o.toggleClass("dx-state-hover",!0)}},_toggleDisabledState(i){this.$element().toggleClass("dx-state-disabled",!!i),this.setAria("disabled",i||void 0)},_toggleIndependentState(){this.$element().toggleClass("dx-state-independent",this.option("ignoreParentReadOnly"))},_setWidgetOption(i,e){if(!this[i])return;if(ht(e[0])){ie(e[0],(o,r)=>this._setWidgetOption(i,[o,r]));return}const t=e[0];let n=e[1];e.length===1&&(n=this.option(t));const s=this[`${i}OptionMap`];this[i].option(s?s(t):t,n)},_optionChanged(i){const{name:e,value:t,previousValue:n}=i;switch(e){case"disabled":this._toggleDisabledState(t),this._updatedHover(),this._refreshFocusState();break;case"hint":this._renderHint();break;case"ignoreParentReadOnly":this._toggleIndependentState();break;case"activeStateEnabled":this._attachFeedbackEvents();break;case"hoverStateEnabled":this._attachHoverEvents(),this._updatedHover();break;case"tabIndex":case"focusStateEnabled":this._refreshFocusState();break;case"onFocusIn":case"onFocusOut":case"useResizeObserver":break;case"accessKey":this._renderAccessKey();break;case"hoveredElement":this._hover(t,n);break;case"isActive":this._updatedHover();break;case"visible":this._toggleVisibility(t),this._isVisibilityChangeSupported()&&this._checkVisibilityChanged(t?"shown":"hiding");break;case"onKeyboardHandled":this._attachKeyboardEvents();break;case"onContentReady":this._initContentReadyAction();break;default:this.callBase(i)}},_isVisible(){const{visible:i}=this.option();return this.callBase()&&i},beginUpdate(){this._ready(!1),this.callBase()},endUpdate(){this.callBase(),this._initialized&&this._ready(!0)},_ready(i){if(arguments.length===0)return this._isReady;this._isReady=i},setAria(){if(!ht(arguments.length<=0?void 0:arguments[0]))B0(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],(arguments.length<=2?void 0:arguments[2])||this._getAriaTarget());else{const i=(arguments.length<=1?void 0:arguments[1])||this._getAriaTarget();ie(arguments.length<=0?void 0:arguments[0],(e,t)=>B0(e,t,i))}},isReady(){return this._ready()},repaint(){this._refresh()},focus(){cc.trigger(this._focusTarget())},registerKeyHandler(i,e){const t=this._supportedKeys();this._supportedKeys=()=>Y(t,{[i]:e})}});Hi.getOptionsFromContainer=i=>{let{name:e,fullName:t,value:n}=i,s={};if(e===t)s=n;else{const o=t.split(".").pop();s[o]=n}return s};const Q4=Pl(),An=Hi.inherit({_getDefaultOptions(){return Y(this.callBase(),{indicatorSrc:"",activeStateEnabled:!1,hoverStateEnabled:!1,_animatingSegmentCount:1,_animatingSegmentInner:!1})},_defaultOptionsRules(){const i=un();return this.callBase().concat([{device(){return Re.real().platform==="android"&&!/chrome/i.test(Q4.userAgent)},options:{viaImage:!0}},{device:()=>On(i),options:{_animatingSegmentCount:2,_animatingSegmentInner:!0}},{device:()=>bw(i),options:{_animatingSegmentCount:7}}])},_useTemplates:()=>!1,_init(){this.callBase(),this.$element().addClass("dx-loadindicator");const e={role:"alert",label:re.format("Loading")};this.setAria(e)},_initMarkup(){this.callBase(),this._renderWrapper(),this._renderIndicatorContent(),this._renderMarkup()},_renderWrapper(){this._$wrapper=R("<div>").addClass("dx-loadindicator-wrapper"),this.$element().append(this._$wrapper)},_renderIndicatorContent(){this._$content=R("<div>").addClass("dx-loadindicator-content"),this._$wrapper.append(this._$content)},_renderMarkup(){const{viaImage:i,indicatorSrc:e}=this.option();Np()&&!i&&!e?this._renderMarkupForAnimation():this._renderMarkupForImage()},_renderMarkupForAnimation(){const i=this.option("_animatingSegmentInner");this._$indicator=R("<div>").addClass("dx-loadindicator-icon"),this._$content.append(this._$indicator);for(let e=this.option("_animatingSegmentCount");e>=0;--e){const t=R("<div>").addClass("dx-loadindicator-segment").addClass("dx-loadindicator-segment"+e);i&&t.append(R("<div>").addClass("dx-loadindicator-segment-inner")),this._$indicator.append(t)}},_renderMarkupForImage(){const{indicatorSrc:i}=this.option();i?(this._$wrapper.addClass("dx-loadindicator-image"),this._$wrapper.css("backgroundImage",`url(${i})`)):Np()&&this._renderMarkupForAnimation()},_renderDimensions(){this.callBase(),this._updateContentSizeForAnimation()},_updateContentSizeForAnimation(){if(!this._$indicator)return;let i=this.option("width"),e=this.option("height");if(i||e){i=Ge(this.$element()),e=st(this.$element());const t=Math.min(e,i);this._$wrapper.css({height:t,width:t,fontSize:t})}},_clean(){this.callBase(),this._removeMarkupForAnimation(),this._removeMarkupForImage()},_removeMarkupForAnimation(){this._$indicator&&(this._$indicator.remove(),delete this._$indicator)},_removeMarkupForImage(){this._$wrapper.css("backgroundImage","none")},_optionChanged(i){switch(i.name){case"_animatingSegmentCount":case"_animatingSegmentInner":case"indicatorSrc":this._invalidate();break;default:this.callBase(i)}}});wt("dxLoadIndicator",An);const e3=/matrix(3d)?\((.+?)\)/,t3=/translate(?:3d)?\((.+?)\)/,Hn=function(i){i=R(i);const e=Hc(i);return{left:e.x,top:e.y}};function $c(i){return kn(i)==="string"&&i[i.length-1]==="%"}function Mw(i,e){i.length&&di(i.get(0),"dxTranslator",e)}const Mm=function(i){i.length&&pu(i.get(0),"dxTranslator")},Xl=function(i){i.x=i.x||0,i.y=i.y||0;const e=$c(i.x)?i.x:i.x+"px",t=$c(i.y)?i.y:i.y+"px";return"translate("+e+", "+t+")"},Hc=function(i){let e=i.length?di(i.get(0),"dxTranslator"):null;if(!e){let n=(i.css("transform")||Xl({x:0,y:0})).match(e3);const s=n&&n[1];n?(n=n[2].split(","),s==="3d"?n=n.slice(12,15):(n.push(0),n=n.slice(4,7))):n=[0,0,0],e={x:parseFloat(n[0]),y:parseFloat(n[1]),z:parseFloat(n[2])},Mw(i,e)}return e},Bi=function(i,e){i=R(i);const t=e.left,n=e.top;let s;t===void 0?(s=Hc(i),s.y=n||0):n===void 0?(s=Hc(i),s.x=t||0):(s={x:t||0,y:n||0,z:0},Mw(i,s)),i.css({transform:Xl(s)}),($c(t)||$c(n))&&Mm(i)},Zl=function(i,e){i=R(i);let t;const n={left:0,top:0,transform:"none"};e&&(t=i.css("transition"),n.transition="none"),i.css(n),Mm(i),e&&(i.get(0).offsetHeight,i.css("transition",t))},i3=function(i){let e=i.match(t3);if(!(!e||!e[1]))return e=e[1].split(","),e={x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])},e},F0=/cubic-bezier\((\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\)/,V0={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)"},n3=function(i,e,t,n){const s=3*i,o=3*(t-i)-s,r=1-s-o,a=3*e,l=3*(n-e)-a,d=1-a-l,c=function(u){return u*(s+u*(o+u*r))},h=function(u){return s+u*(2*o+3*u*r)};return function(u){return function(p){return p*(a+p*(l+p*d))}(function(p){let f=p,g=0,m;for(;g<14&&(m=c(f)-p,!(Math.abs(m)<.001));)f-=m/h(f),g++;return f}(u))}};let sf={};const s3=function(i){i=V0[i]||i;let e=i.match(F0),t;e||(t="linear",e=V0[t].match(F0)),e=e.slice(1,5);for(let s=0;s<e.length;s++)e[s]=parseFloat(e[s]);const n=t||"cubicbezier_"+e.join("_").replace(/\./g,"p");return Ee(sf[n])||(sf[n]=function(s,o,r,a,l){return a*n3(e[0],e[1],e[2],e[3])(o/l)+r}),n};function o3(i){return sf[i]}const N0=Je(),r3=/left|right/,a3=/top|bottom/,L0=/fit|flip|none/,l3=/scale\(.+?\)/,d3=Zt.safari,of=function(i){const e={h:"center",v:"center"},t=va(i);return t&&ie(t,function(){const n=String(this).toLowerCase();r3.test(n)?e.h=n:a3.test(n)&&(e.v=n)}),e},$0=function(i,e){return xC(i,e)},c3=function(i){const e=va(i);let t=String(e&&e[0]).toLowerCase(),n=String(e&&e[1]).toLowerCase();return L0.test(t)||(t="none"),L0.test(n)||(n=t),{h:t,v:n}},H0=function(i){switch(i){case"center":return .5;case"right":case"bottom":return 1;default:return 0}},rf=function(i){switch(i){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return i}},af=function(i,e){let t=0;return i.myLocation<e.min&&(t+=e.min-i.myLocation),i.myLocation>e.max&&(t+=i.myLocation-e.max),t},z0=function(i,e,t){return e.myLocation<t.min?i==="h"?"left":"top":e.myLocation>t.max?i==="h"?"right":"bottom":"none"},lf=function(i){i.myLocation=i.atLocation+H0(i.atAlign)*i.atSize-H0(i.myAlign)*i.mySize+i.offset},Od={fit:function(i,e){let t=!1;i.myLocation>e.max&&(i.myLocation=e.max,t=!0),i.myLocation<e.min&&(i.myLocation=e.min,t=!0),i.fit=t},flip:function(i,e){if(i.flip=!1,!(i.myAlign==="center"&&i.atAlign==="center")&&(i.myLocation<e.min||i.myLocation>e.max)){const t=Y({},i,{myAlign:rf(i.myAlign),atAlign:rf(i.atAlign),offset:-i.offset});lf(t),t.oversize=af(t,e),(t.myLocation>=e.min&&t.myLocation<=e.max||i.oversize>t.oversize)&&(i.myLocation=t.myLocation,i.oversize=t.oversize,i.flip=!0)}},flipfit:function(i,e){this.flip(i,e),this.fit(i,e)},none:function(i){i.oversize=0}};let Pw;const Bw=function(){const i=R("<div>").css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(R("body")),e=i.get(0).offsetWidth-i.get(0).clientWidth;i.remove(),Pw=e},u3={h:{location:0,flip:!1,fit:!1,oversize:0},v:{location:0,flip:!1,fit:!1,oversize:0}},Fw=function(i,e){const t=R(i),n=t.offset(),s=Y(!0,{},u3,{h:{location:n.left},v:{location:n.top}});if(!e)return s;const o=of(e.my),r=of(e.at);let a=R(e.of).length&&e.of||N0;const l=$0(e.offset,e.precise),d=c3(e.collision),c=e.boundary,h=$0(e.boundaryOffset,e.precise),u={mySize:St(t),myAlign:o.h,atAlign:r.h,offset:l.h,collision:d.h,boundaryOffset:h.h},p={mySize:rt(t),myAlign:o.v,atAlign:r.v,offset:l.v,collision:d.v,boundaryOffset:h.v};if(a.preventDefault)u.atLocation=a.pageX,p.atLocation=a.pageY,u.atSize=0,p.atSize=0;else if(a=R(a),gi(a[0]))u.atLocation=a.scrollLeft(),p.atLocation=a.scrollTop(),Re.real().deviceType==="phone"&&a[0].visualViewport?(u.atLocation=Math.max(u.atLocation,a[0].visualViewport.offsetLeft),p.atLocation=Math.max(p.atLocation,a[0].visualViewport.offsetTop),u.atSize=a[0].visualViewport.width,p.atSize=a[0].visualViewport.height):(u.atSize=a[0].innerWidth>a[0].outerWidth?a[0].innerWidth:Ge(a),p.atSize=a[0].innerHeight>a[0].outerHeight||d3?a[0].innerHeight:st(a));else if(a[0].nodeType===9)u.atLocation=0,p.atLocation=0,u.atSize=Ge(a),p.atSize=st(a);else{const m=yi(a.get(0)),b=zc(a);u.atLocation=b.left,p.atLocation=b.top,u.atSize=Math.max(m.width,St(a)),p.atSize=Math.max(m.height,rt(a))}lf(u),lf(p);const f=function(){const m=R(N0),b=Ge(m),_=st(m);let w=m.scrollLeft(),E=m.scrollTop();const D=_e.getDocumentElement(),B=pr?D.clientWidth/b:1,$=pr?D.clientHeight/_:1;Pw===void 0&&Bw();let F=b,N=_;if(c&&!gi(c)){const L=R(c),j=L.offset();w=j.left,E=j.top,F=Ge(L),N=st(L)}return{h:{min:w+u.boundaryOffset,max:w+F/B-u.mySize-u.boundaryOffset},v:{min:E+p.boundaryOffset,max:E+N/$-p.mySize-p.boundaryOffset}}}();u.oversize=af(u,f.h),p.oversize=af(p,f.v),u.collisionSide=z0("h",u,f.h),p.collisionSide=z0("v",p,f.v),Od[u.collision]&&Od[u.collision](u,f.h),Od[p.collision]&&Od[p.collision](p,f.v);const g=function(m){return e.precise?m:Math.round(m)};return Y(!0,s,{h:{location:g(u.myLocation),oversize:g(u.oversize),fit:u.fit,flip:u.flip,collisionSide:u.collisionSide},v:{location:g(p.myLocation),oversize:g(p.oversize),fit:p.fit,flip:p.flip,collisionSide:p.collisionSide},precise:e.precise}),s},W0=function(i,e,t,n){const s=U(i.style)&&!_e.isNode(i.style),o=n?t.replace(e,""):t;if(s)FC(i,o,!1);else{const r=_e.createAttribute("style");r.value=o,i.setAttributeNode(r)}},zc=function(i){var e,t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i;const s=n.get(0);if(!s)return i.offset();const o=((e=s.getAttribute)===null||e===void 0?void 0:e.call(s,"style"))||"",r=(t=o.match(l3))===null||t===void 0?void 0:t[0];let a;return r?(W0(s,r,o,!0),a=zc(i,n.parent()),W0(s,r,o,!1)):a=zc(i,n.parent()),a},yl=function(i,e){const t=R(i);if(!e)return t.offset();Zl(t,!0);const n=zc(t),s=e.h&&e.v?e:Fw(t,e),o=function(r){return e.precise?r:Math.round(r)};return Bi(t,{left:s.h.location-o(n.left),top:s.v.location-o(n.top)}),s},h3=function(i){return i=R(i).get(0),gi(i)?null:i&&"pageY"in i&&"pageX"in i?{top:i.pageY,left:i.pageX}:R(i).offset()};yl.inverseAlign||(yl.inverseAlign=rf);yl.normalizeAlign||(yl.normalizeAlign=of);const Un={calculateScrollbarWidth:Bw,calculate:Fw,setup:yl,offset:h3},Vw=Je(),sl=be(Rn,"dxFX"),p3=/^([+-])=(.*)/i,Cl="dxAnimData",Pm="dxAnimQueue",f3={initAnimation:function(i,e){i.css({transitionProperty:"none"}),typeof e.from=="string"?i.addClass(e.from):cf(i,e.from);const t=this,n=new ae,s=e.cleanupWhen;e.transitionAnimation={deferred:n,finish:function(){t._finishTransition(i),s?De(n,s).always(function(){t._cleanup(i,e)}):t._cleanup(i,e),n.resolveWith(i,[e,i])}},this._completeAnimationCallback(i,e).done(function(){e.transitionAnimation.finish()}).fail(function(){n.rejectWith(i,[e,i])}),e.duration||e.transitionAnimation.finish(),i.css("transform")},animate:function(i,e){return this._startAnimation(i,e),e.transitionAnimation.deferred.promise()},_completeAnimationCallback:function(i,e){const t=this,n=Date.now()+e.delay,s=new ae,o=new ae,r=new ae;let a;const l=lx()+".dxFX";e.transitionAnimation.cleanup=function(){clearTimeout(a),clearTimeout(d),q.off(i,l),q.off(i,sl)},q.one(i,l,function(){Date.now()-n>=e.duration&&o.reject()}),q.off(i,sl),q.on(i,sl,function(){t.stop(i,e),s.reject()});const d=setTimeout(function(){a=setTimeout(function(){r.reject()},e.duration+e.delay+li._simulatedTransitionEndDelay),De(o,r).fail((function(){s.resolve()}).bind(this))});return s.promise()},_startAnimation:function(i,e){i.css({transitionProperty:"all",transitionDelay:e.delay+"ms",transitionDuration:e.duration+"ms",transitionTimingFunction:e.easing}),typeof e.to=="string"?i[0].className+=" "+e.to:e.to&&cf(i,e.to)},_finishTransition:function(i){i.css("transition","none")},_cleanup:function(i,e){e.transitionAnimation.cleanup(),typeof e.from=="string"&&(i.removeClass(e.from),i.removeClass(e.to))},stop:function(i,e,t){e&&(t?e.transitionAnimation.finish():(ht(e.to)&&ie(e.to,function(n){i.css(n,i.css(n))}),this._finishTransition(i),this._cleanup(i,e)))}},j0={initAnimation:function(i,e){cf(i,e.from)},animate:function(i,e){const t=new ae,n=this;return e?(ie(e.to,function(s){e.from[s]===void 0&&(e.from[s]=n._normalizeValue(i.css(s)))}),e.to.transform&&(e.from.transform=n._parseTransform(e.from.transform),e.to.transform=n._parseTransform(e.to.transform)),e.frameAnimation={to:e.to,from:e.from,currentValue:e.from,easing:s3(e.easing),duration:e.duration,startTime:new Date().valueOf(),finish:function(){this.currentValue=this.to,this.draw(),Fs(e.frameAnimation.animationFrameId),t.resolve()},draw:function(){if(e.draw){e.draw(this.currentValue);return}const s=Y({},this.currentValue);s.transform&&(s.transform=Ii(s.transform,function(o,r){if(r==="translate")return Xl(o);if(r==="scale")return"scale("+o+")";if(r.substr(0,r.length-1)==="rotate")return r+"("+o+"deg)"}).join(" ")),i.css(s)}},e.delay?(e.frameAnimation.startTime+=e.delay,e.frameAnimation.delayTimeout=setTimeout(function(){n._startAnimation(i,e)},e.delay)):n._startAnimation(i,e),t.promise()):t.reject().promise()},_startAnimation:function(i,e){q.off(i,sl),q.on(i,sl,function(){e.frameAnimation&&Fs(e.frameAnimation.animationFrameId)}),this._animationStep(i,e)},_parseTransform:function(i){const e={};return ie(i.match(/\w+\d*\w*\([^)]*\)\s*/g),function(t,n){const s=i3(n),o=n.match(/scale\((.+?)\)/),r=n.match(/(rotate.)\((.+)deg\)/);s&&(e.translate=s),o&&o[1]&&(e.scale=parseFloat(o[1])),r&&r[1]&&(e[r[1]]=parseFloat(r[2]))}),e},stop:function(i,e,t){const n=e&&e.frameAnimation;n&&(Fs(n.animationFrameId),clearTimeout(n.delayTimeout),t&&n.finish(),delete e.frameAnimation)},_animationStep:function(i,e){const t=e&&e.frameAnimation;if(!t)return;const n=new Date().valueOf();if(n>=t.startTime+t.duration){t.finish();return}t.currentValue=this._calcStepValue(t,n-t.startTime),t.draw();const s=this;t.animationFrameId=Mc(function(){s._animationStep(i,e)})},_calcStepValue:function(i,e){const t=function(n,s){const o=Array.isArray(s)?[]:{};return ie(s,function(r,a){if(typeof a=="string"&&parseFloat(a)===!1)return!0;o[r]=typeof a=="object"?t(n[r],a):function(l){const d=e/i.duration,c=e,h=1*n[l],u=s[l]-n[l],p=i.duration;return o3(i.easing)(d,c,h,u,p)}(r)}),o};return t(i.from,i.to)},_normalizeValue:function(i){const e=parseFloat(i);return e===!1?i:e}},m3={initAnimation:function(){},animate:function(){return new ae().resolve().promise()},stop:ue,isSynchronous:!0},g3=function(i){i=i||{};const e={transition:Vp()?f3:j0,frame:j0,noAnimation:m3};let t=i.strategy||"transition";return i.type==="css"&&!Vp()&&(t="noAnimation"),e[t]},Nw=function(i,e,t,n){ie(["from","to"],function(){if(!t(i[this]))throw Pt.Error("E0010",e,this,n)})},Lw=function(i,e){return Nw(i,e,function(t){return ht(t)},"a plain object")},_3=function(i,e){return Nw(i,e,function(t){return typeof t=="string"},"a string")},b3={setup:function(){}},v3={validateConfig:function(i){_3(i,"css")},setup:function(){}},y3={top:{my:"bottom center",at:"top center"},bottom:{my:"top center",at:"bottom center"},right:{my:"left center",at:"right center"},left:{my:"right center",at:"left center"}},_h={validateConfig:function(i){Lw(i,"slide")},setup:function(i,e){const t=Hn(i);if(e.type!=="slide"){const n=e.type==="slideIn"?e.from:e.to;n.position=Y({of:Vw},y3[e.direction]),df(i,n)}this._setUpConfig(t,e.from),this._setUpConfig(t,e.to),Mm(i)},_setUpConfig:function(i,e){e.left="left"in e?e.left:"+=0",e.top="top"in e?e.top:"+=0",this._initNewPosition(i,e)},_initNewPosition:function(i,e){const t={left:e.left,top:e.top};delete e.left,delete e.top;let n=this._getRelativeValue(t.left);n!==void 0?t.left=n+i.left:e.left=0,n=this._getRelativeValue(t.top),n!==void 0?t.top=n+i.top:e.top=0,e.transform=Xl({x:t.left,y:t.top})},_getRelativeValue:function(i){let e;if(typeof i=="string"&&(e=p3.exec(i)))return parseInt(e[1]+"1")*e[2]}},bh={setup:function(i,e){const t=e.from,n=e.to,s=e.type==="fadeOut"?1:0,o=e.type==="fadeOut"?0:1;let r=ht(t)?String(t.opacity??s):String(t),a=ht(n)?String(n.opacity??o):String(n);switch(e.skipElementInitialStyles||(r=i.css("opacity")),e.type){case"fadeIn":a=1;break;case"fadeOut":a=0}e.from={visibility:"visible",opacity:r},e.to={opacity:a}}},C3={validateConfig:function(i){Lw(i,"pop")},setup:function(i,e){const t=e.from,n=e.to,s="opacity"in t?t.opacity:i.css("opacity"),o="opacity"in n?n.opacity:1,r="scale"in t?t.scale:0,a="scale"in n?n.scale:1;e.from={opacity:s};const l=Hc(i);e.from.transform=this._getCssTransform(l,r),e.to={opacity:o},e.to.transform=this._getCssTransform(l,a)},_getCssTransform:function(i,e){return Xl(i)+"scale("+e+")"}},$w={custom:b3,slide:_h,slideIn:_h,slideOut:_h,fade:bh,fadeIn:bh,fadeOut:bh,pop:C3,css:v3},x3=function(i){const e=$w[i.type];if(!e)throw Pt.Error("E0011",i.type);return e},w3={type:"custom",from:{},to:{},duration:400,start:ue,complete:ue,easing:"ease",delay:0},S3={duration:400,easing:"ease",delay:0};function E3(){const i=this.element,e=this.config;if(df(i,e.from),df(i,e.to),this.configurator.setup(i,e),i.data(Cl,this),this.strategy.initAnimation(i,e),e.start){const t=ze(i);e.start.apply(this,[t,e])}}const I3=function(i){const e=i.element,t=i.config;if(e.removeData(Cl),t.complete){const n=ze(e);t.complete.apply(this,[n,t])}i.deferred.resolveWith(this,[e,t])},T3=function(){const i=this,e=i.element,t=i.config;return i.isStarted=!0,i.strategy.animate(e,t).done(function(){I3(i)}).fail(function(){i.deferred.rejectWith(this,[e,t])})},D3=function(i){const e=this,t=e.element,n=e.config;clearTimeout(e.startTimeout),e.isStarted||e.start(),e.strategy.stop(t,n,i)},vh=be(Rn,"dxFXStartAnimation"),A3=function(i){q.off(i.element,vh),q.on(i.element,vh,function(){li.stop(i.element)}),i.deferred.always(function(){q.off(i.element,vh)})},Hw=function(i,e){const t=e.type==="css"?S3:w3,n=Y(!0,{},t,e),s=x3(n),o=g3(n),r={element:R(i),config:n,configurator:s,strategy:o,isSynchronous:o.isSynchronous,setup:E3,start:T3,stop:D3,deferred:new ae};return Ee(s.validateConfig)&&s.validateConfig(n),A3(r),r},k3=function(i,e){const t=R(i);if(!t.length)return new ae().resolve().promise();const n=Hw(t,e);return O3(t,n),n.deferred.promise()};function O3(i,e){const t=Bm(i);R3(i,t),t.push(e),Su(i)||Fm(i,t)}function Bm(i){return i.data(Pm)||[]}function R3(i,e){i.data(Pm,e)}const zw=function(i){i.removeData(Pm)};function Su(i){return!!i.data(Cl)}function Fm(i,e){if(e=Bm(i),!e.length)return;const t=e.shift();e.length===0&&zw(i),M3(t).done(function(){Su(i)||Fm(i)})}function M3(i){return i.setup(),i.isSynchronous?i.start():i.startTimeout=setTimeout(function(){i.start()}),i.deferred.promise()}function df(i,e){if(!e||!e.position)return;const t=R(Vw);let n=0,s=0;const o=Un.calculate(i,e.position),r=i.offset(),a=i.position();a.top>r.top&&(s=t.scrollTop()),a.left>r.left&&(n=t.scrollLeft()),Y(e,{left:o.h.location-r.left+a.left-n,top:o.v.location-r.top+a.top-s}),delete e.position}function cf(i,e){ie(e,function(t,n){try{i.css(t,Ee(n)?n():n)}catch{}})}const P3=function(i,e){const t=R(i),n=Bm(t);ie(n,function(o,r){r.config.delay=0,r.config.duration=0,r.isSynchronous=!0}),Su(t)||Fm(t,n);const s=t.data(Cl);s&&s.stop(e),t.removeData(Cl),zw(t)},li={off:!1,animationTypes:$w,animate:k3,createAnimation:Hw,isAnimating:Su,stop:P3,_simulatedTransitionEndDelay:100},B3=ws.add,K0=Math.abs;let Wc=10;const F3=function(){return xr("pointer-events")},V3=Js(function(){const i=Re.real().deviceType==="desktop";if(!F3()||!i)return ue;const e=R("<div>").addClass("dx-gesture-cover").css("pointerEvents","none");return q.subscribeGlobal(e,"dxmousewheel",function(t){t.preventDefault()}),B3(function(){e.appendTo("body")}),function(t,n){e.css("pointerEvents",t?"all":"none"),t&&e.css("cursor",n)}}),N3=function(i,e){V3()(i,e)},Jl=vu.inherit({gesture:!0,configure:function(i){this.getElement().css("msTouchAction",i.immediate?"pinch-zoom":""),this.callBase(i)},allowInterruptionByMouseWheel:function(){return this._stage!==2},getDirection:function(){return this.direction},_cancel:function(){this.callBase.apply(this,arguments),this._toggleGestureCover(!1),this._stage=0},start:function(i){if(i._needSkipEvent||UC(i)){this._cancel(i);return}this._startEvent=bo(i),this._startEventData=pi(i),this._stage=1,this._init(i),this._setupImmediateTimer()},_setupImmediateTimer:function(){if(clearTimeout(this._immediateTimer),this._immediateAccepted=!1,!!this.immediate){if(this.immediateTimeout===0){this._immediateAccepted=!0;return}this._immediateTimer=setTimeout((function(){this._immediateAccepted=!0}).bind(this),this.immediateTimeout??180)}},move:function(i){if(this._stage===1&&this._directionConfirmed(i)){if(this._stage=2,this._resetActiveElement(),this._toggleGestureCover(!0),this._clearSelection(i),this._adjustStartEvent(i),this._start(this._startEvent),this._stage===0)return;this._requestAccept(i),this._move(i),this._forgetAccept()}else this._stage===2&&(this._clearSelection(i),this._move(i))},_directionConfirmed:function(i){const e=this._getTouchBoundary(i),t=Jo(this._startEventData,pi(i)),n=K0(t.x),s=K0(t.y),o=this._validateMove(e,n,s),r=this._validateMove(e,s,n),a=this.getDirection(i);return a==="both"&&(o||r)||a==="horizontal"&&o||a==="vertical"&&r||this._immediateAccepted},_validateMove:function(i,e,t){return e&&e>=i&&(this.immediate?e>=t:!0)},_getTouchBoundary:function(i){return this.immediate||an(i)?0:Wc},_adjustStartEvent:function(i){const e=this._getTouchBoundary(i),t=Jo(this._startEventData,pi(i));this._startEvent.pageX+=ha(t.x)*e,this._startEvent.pageY+=ha(t.y)*e},_resetActiveElement:function(){Re.real().platform==="ios"&&this.getElement().find(":focus").length&&Ca()},_toggleGestureCover:function(i){this._toggleGestureCoverImpl(i)},_toggleGestureCoverImpl:function(i){this._stage===2&&N3(i,this.getElement().css("cursor"))},_clearSelection:function(i){an(i)||Vl(i)||aA()},end:function(i){this._toggleGestureCover(!1),this._stage===2?this._end(i):this._stage===1&&this._stop(i),this._stage=0},dispose:function(){clearTimeout(this._immediateTimer),this.callBase.apply(this,arguments),this._toggleGestureCover(!1)},_init:ue,_start:ue,_move:ue,_stop:ue,_end:ue});Jl.initialTouchBoundary=Wc;Jl.touchBoundary=function(i){if(U(i)){Wc=i;return}return Wc};const xl="dxdragstart",ma="dxdrag",wl="dxdragend",Eu="dxdragenter",Iu="dxdragleave",Vm="dxdrop",Ns=[],na=[],uf=[],Nm={setup:function(i,e){Ns.includes(i)||(Ns.push(i),na.push([]),uf.push(e||{}))},add:function(i,e){const t=Ns.indexOf(i);this.updateEventsCounter(i,e.type,1);const n=e.selector;na[t].includes(n)||na[t].push(n)},updateEventsCounter:function(i,e,t){if([Eu,Iu,Vm].indexOf(e)>-1){const n=di(i,"dxDragEventsCount")||0;di(i,"dxDragEventsCount",Math.max(0,n+t))}},remove:function(i,e){this.updateEventsCounter(i,e.type,-1)},teardown:function(i){if(!di(i,"dxDragEventsCount")){const t=Ns.indexOf(i);Ns.splice(t,1),na.splice(t,1),uf.splice(t,1),pu(i,"dxDragEventsCount")}}};Yn(Eu,Nm);Yn(Iu,Nm);Yn(Vm,Nm);const L3=function(i){const e=Ns.indexOf(i.get(0)),t=na[e].filter(s=>s);let n=i.find(t.join(", "));return na[e].includes(void 0)&&(n=n.add(i)),n},$3=function(i){const e=Ns.indexOf(i.get(0));return uf[e]},H3=function(i,e){return i.itemPositionFunc?i.itemPositionFunc(e):e.offset()},z3=function(i,e){return i.itemSizeFunc?i.itemSizeFunc(e):{width:e.get(0).getBoundingClientRect().width,height:e.get(0).getBoundingClientRect().height}},W3=Jl.inherit({ctor:function(i){this.callBase(i),this.direction="both"},_init:function(i){this._initEvent=i},_start:function(i){if(i=this._fireEvent("dxdragstart",this._initEvent),this._maxLeftOffset=i.maxLeftOffset,this._maxRightOffset=i.maxRightOffset,this._maxTopOffset=i.maxTopOffset,this._maxBottomOffset=i.maxBottomOffset,i.targetElements||i.targetElements===null){const e=XR(i.targetElements||[]);this._dropTargets=Ii(e,function(t){return R(t).get(0)})}else this._dropTargets=Ns},_move:function(i){const e=pi(i),t=this._calculateOffset(e);i=this._fireEvent("dxdrag",i,{offset:t}),this._processDropTargets(i),i._cancelPreventDefault||i.preventDefault()},_calculateOffset:function(i){return{x:this._calculateXOffset(i),y:this._calculateYOffset(i)}},_calculateXOffset:function(i){if(this.direction!=="vertical"){const e=i.x-this._startEventData.x;return this._fitOffset(e,this._maxLeftOffset,this._maxRightOffset)}return 0},_calculateYOffset:function(i){if(this.direction!=="horizontal"){const e=i.y-this._startEventData.y;return this._fitOffset(e,this._maxTopOffset,this._maxBottomOffset)}return 0},_fitOffset:function(i,e,t){return e!=null&&(i=Math.max(i,-e)),t!=null&&(i=Math.min(i,t)),i},_processDropTargets:function(i){const e=this._findDropTarget(i);e===this._currentDropTarget||(this._fireDropTargetEvent(i,Iu),this._currentDropTarget=e,this._fireDropTargetEvent(i,Eu))},_fireDropTargetEvent:function(i,e){if(!this._currentDropTarget)return;const t={type:e,originalEvent:i,draggingElement:this._$element.get(0),target:this._currentDropTarget};Mo(t)},_findDropTarget:function(i){const e=this;let t;return ie(Ns,function(n,s){if(!e._checkDropTargetActive(s))return;const o=R(s);ie(L3(o),function(r,a){const l=R(a);e._checkDropTarget($3(o),l,R(t),i)&&(t=a)})}),t},_checkDropTargetActive:function(i){let e=!1;return ie(this._dropTargets,function(t,n){return e=e||n===i||ms(n,i),!e}),e},_checkDropTarget:function(i,e,t,n){if(e.get(0)===R(n.target).get(0))return!1;const o=H3(i,e);if(n.pageX<o.left||n.pageY<o.top)return!1;const r=z3(i,e);return n.pageX>o.left+r.width||n.pageY>o.top+r.height||t.length&&t.closest(e).length||i.checkDropTarget&&!i.checkDropTarget(e,n)?!1:e},_end:function(i){const e=pi(i);this._fireEvent("dxdragend",i,{offset:this._calculateOffset(e)}),this._fireDropTargetEvent(i,Vm),delete this._currentDropTarget}});xa({emitter:W3,events:["dxdragstart","dxdrag","dxdragend"]});const G0=function(){let i=[];return{add:function(e){i.includes(e)||i.push(e)},remove:function(e){const t=i.indexOf(e);t!==-1&&i.splice(t,1)},fire:function(){const e=i.pop(),t=!!e;return t&&e(),t},hasCallback:function(){return i.length>0}}}(),j3=i=>{const t=R(i).closest('[class^="dx-swatch-"], [class*=" dx-swatch-"]'),n=Do();if(!t.length)return n;const s=new RegExp("(\\s|^)(dx-swatch-.*?)(\\s|$)"),o=t[0].className.match(s)[2];let r=n.children("."+o);return r.length||(r=R("<div>").addClass(o).appendTo(n)),r},Ww={getSwatchContainer:j3},K3=Je(),jw={top:{my:"top center",at:"top center"},bottom:{my:"bottom center",at:"bottom center"},right:{my:"right center",at:"right center"},left:{my:"left center",at:"left center"},center:{my:"center",at:"center"},"right bottom":{my:"right bottom",at:"right bottom"},"right top":{my:"right top",at:"right top"},"left bottom":{my:"left bottom",at:"left bottom"},"left top":{my:"left top",at:"left top"}},U0={h:0,v:0};class Kw{constructor(e){let{position:t,container:n,visualContainer:s,$root:o,$content:r,$wrapper:a,onPositioned:l,onVisualPositionChanged:d,restorePosition:c,_fixWrapperPosition:h,_skipContentPositioning:u}=e;this._props={position:t,container:n,visualContainer:s,restorePosition:c,onPositioned:l,onVisualPositionChanged:d,_fixWrapperPosition:h,_skipContentPositioning:u},this._$root=o,this._$content=r,this._$wrapper=a,this._$markupContainer=void 0,this._$visualContainer=void 0,this._shouldRenderContentInitialPosition=!0,this._visualPosition=void 0,this._initialPosition=void 0,this._previousVisualPosition=void 0,this.updateContainer(n),this.updatePosition(t),this.updateVisualContainer(s)}get $container(){return this.updateContainer(),this._$markupContainer}get $visualContainer(){return this._$visualContainer}get position(){return this._position}set fixWrapperPosition(e){this._props._fixWrapperPosition=e,this.styleWrapperPosition()}set restorePosition(e){this._props.restorePosition=e}restorePositionOnNextRender(e){this._shouldRenderContentInitialPosition=e||!this._visualPosition}openingHandled(){const e=this._props.restorePosition;this.restorePositionOnNextRender(e)}updatePosition(e){this._props.position=e,this._position=this._normalizePosition(e),this.updateVisualContainer()}updateContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._props.container;this._props.container=e,this._$markupContainer=e?R(e):Ww.getSwatchContainer(this._$root),this.updateVisualContainer(this._props.visualContainer)}updateVisualContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._props.visualContainer;this._props.visualContainer=e,this._$visualContainer=this._getVisualContainer()}detectVisualPositionChange(e){this._updateVisualPositionValue(),this._raisePositionedEvents(e)}positionContent(){this._shouldRenderContentInitialPosition?this._renderContentInitialPosition():(Bi(this._$content,this._visualPosition),this.detectVisualPositionChange())}positionWrapper(){this._$visualContainer&&Un.setup(this._$wrapper,{my:"top left",at:"top left",of:this._$visualContainer})}styleWrapperPosition(){const t=gi(this.$visualContainer.get(0))||this._props._fixWrapperPosition?"fixed":"absolute";this._$wrapper.css("position",t)}_updateVisualPositionValue(){this._previousVisualPosition=this._visualPosition,this._visualPosition=Hn(this._$content)}_renderContentInitialPosition(){this._renderBoundaryOffset(),Zl(this._$content);const e=this._$wrapper.css("overflow");if(this._$wrapper.css("overflow","hidden"),!this._props._skipContentPositioning){const t=Un.setup(this._$content,this._position);this._initialPosition=t}this._$wrapper.css("overflow",e),this.detectVisualPositionChange()}_raisePositionedEvents(e){const t=this._previousVisualPosition,n=this._visualPosition;((t==null?void 0:t.top)!==n.top||(t==null?void 0:t.left)!==n.left)&&this._props.onVisualPositionChanged({previousPosition:t,position:n,event:e}),this._props.onPositioned({position:this._initialPosition})}_renderBoundaryOffset(){const e=this._position??{boundaryOffset:U0};this._$content.css("margin",`${e.v}px ${e.h}px`)}_getVisualContainer(){var e,t;const n=this._props.container,s=this._props.visualContainer,o=p2((e=this._props.position)===null||e===void 0?void 0:e.of)?this._props.position.of.target:(t=this._props.position)===null||t===void 0?void 0:t.of;return R(s||n||o||K3)}_normalizePosition(e){const t={boundaryOffset:U0};return U(e)?Y(!0,{},t,this._positionToObject(e)):t}_positionToObject(e){return Ke(e)?Y({},jw[e]):e}}let uc=1500,So=[];const G3=i=>(uc=ci(i,uc),uc),Gw=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uc;const{length:e}=So,t=(e?So[e-1]:i)+1;return So.push(t),t},hf=i=>{const e=So.indexOf(i);e>=0&&So.splice(e,1)},U3=i=>So.length&&So[So.length-1]===i,q3=ws.add,Lr=Je(),q0=fu,pf=[];q3(()=>{q.subscribeGlobal(_e.getDocument(),Ct.down,i=>{for(let e=pf.length-1;e>=0;e--)if(!pf[e]._proxiedDocumentDownHandler(i))return})});const is=Hi.inherit({_supportedKeys(){return Y(this.callBase(),{escape(){this.hide()}})},_getDefaultOptions(){return Y(this.callBase(),{activeStateEnabled:!1,visible:!1,deferRendering:!0,shading:!0,shadingColor:"",wrapperAttr:{},position:Y({},jw.center),width:"80vw",minWidth:null,maxWidth:null,height:"80vh",minHeight:null,maxHeight:null,animation:{show:{type:"pop",duration:300,from:{scale:.55}},hide:{type:"pop",duration:300,from:{opacity:1,scale:1},to:{opacity:0,scale:.55}}},closeOnOutsideClick:!1,hideOnOutsideClick:!1,_ignorePreventScrollEventsDeprecation:!1,onShowing:null,onShown:null,onHiding:null,onHidden:null,contentTemplate:"content",innerOverlay:!1,restorePosition:!0,container:void 0,visualContainer:void 0,hideTopOverlayHandler:()=>{this.hide()},hideOnParentScroll:!1,preventScrollEvents:!0,onPositioned:null,propagateOutsideClick:!1,ignoreChildEvents:!0,_checkParentVisibility:!0,_hideOnParentScrollTarget:void 0,_fixWrapperPosition:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>!qe(),options:{width:null,height:null,animation:null,_checkParentVisibility:!1}}])},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{animation:!0})},$wrapper(){return this._$wrapper},_eventBindingTarget(){return this._$content},_setDeprecatedOptions(){this.callBase(),Y(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.1",alias:"hideOnOutsideClick"}})},ctor(i,e){this.callBase(i,e),e&&"preventScrollEvents"in e&&!e._ignorePreventScrollEventsDeprecation&&this._logDeprecatedPreventScrollEventsInfo()},_logDeprecatedPreventScrollEventsInfo(){this._logDeprecatedOptionWarning("preventScrollEvents",{since:"23.1",message:"If you enable this option, end-users may experience scrolling issues."})},_init(){this.callBase(),this._initActions(),this._initHideOnOutsideClickHandler(),this._initTabTerminatorHandler(),this._customWrapperClass=null,this._$wrapper=R("<div>").addClass("dx-overlay-wrapper"),this._$content=R("<div>").addClass("dx-overlay-content"),this._initInnerOverlayClass(),this.$element().addClass("dx-overlay"),this._$wrapper.attr("data-bind","dxControlsDescendantBindings: true"),this._toggleViewPortSubscription(!0),this._initHideTopOverlayHandler(this.option("hideTopOverlayHandler")),this._parentsScrollSubscriptionInfo={handler:e=>{this._hideOnParentsScrollHandler(e)}},this.warnPositionAsFunction()},warnPositionAsFunction(){Ee(this.option("position"))&&Pt.log("W0018")},_initInnerOverlayClass(){this._$content.toggleClass("dx-inner-overlay",this.option("innerOverlay"))},_initHideTopOverlayHandler(i){this._hideTopOverlayHandler=i},_getActionsList:()=>["onShowing","onShown","onHiding","onHidden","onPositioned","onVisualPositionChanged"],_initActions(){this._actions={};const i=this._getActionsList();ie(i,(e,t)=>{this._actions[t]=this._createActionByOption(t,{excludeValidators:["disabled","readOnly"]})||ue})},_initHideOnOutsideClickHandler(){var i=this;this._proxiedDocumentDownHandler=function(){return i._documentDownHandler(...arguments)}},_initMarkup(){this.callBase(),this._renderWrapperAttributes(),this._initPositionController()},_documentDownHandler(i){this._showAnimationProcessing&&this._stopAnimation();const e=R(Lr.document).is(i.target)||ms(Lr.document,i.target),t=R(i.target).closest(".dx-inner-overlay").length;return e&&!t&&!(this._$content.is(i.target)||ms(this._$content.get(0),i.target))&&this._shouldHideOnOutsideClick(i)&&this._outsideClickHandler(i),this.option("propagateOutsideClick")},_shouldHideOnOutsideClick(i){const{hideOnOutsideClick:e}=this.option();return Ee(e)?e(i):e},_outsideClickHandler(i){this.option("shading")&&i.preventDefault(),this.hide()},_getAnonymousTemplateName:()=>"content",_initTemplates(){this._templateManager.addDefaultTemplates({content:new or}),this.callBase()},_isTopOverlay(){const i=this._overlayStack();for(let e=i.length-1;e>=0;e--){const t=i[e]._findTabbableBounds();if(t.first||t.last)return i[e]===this}return!1},_overlayStack:()=>pf,_zIndexInitValue:()=>is.baseZIndex(),_toggleViewPortSubscription(i){var e=this;q0.remove(this._viewPortChangeHandle),i&&(this._viewPortChangeHandle=function(){e._viewPortChangeHandler(...arguments)},q0.add(this._viewPortChangeHandle))},_viewPortChangeHandler(){this._positionController.updateContainer(this.option("container")),this._refresh()},_renderWrapperAttributes(){const{wrapperAttr:i}=this.option(),e=Y({},i),t=e.class;delete e.class,this.$wrapper().attr(e).removeClass(this._customWrapperClass).addClass(t),this._customWrapperClass=t},_renderVisibilityAnimate(i){return this._stopAnimation(),i?this._show():this._hide()},_getAnimationConfig(){return this._getOptionValue("animation",this)},_toggleBodyScroll:ue,_animateShowing(){var i=this;const e=this._getAnimationConfig()??{},t=this._normalizeAnimation(e.show,"to"),n=(t==null?void 0:t.start)??ue,s=(t==null?void 0:t.complete)??ue;this._animate(t,function(){if(!i._isAnimationPaused){i.option("focusStateEnabled")&&q.trigger(i._focusTarget(),"focus");for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];s.call(i,...r),i._showAnimationProcessing=!1,i._isHidden=!1,i._actions.onShown(),i._toggleSafariScrolling(),i._showingDeferred.resolve()}},function(){if(!i._isAnimationPaused){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];n.call(i,...r),i._showAnimationProcessing=!0}})},_processShowingHidingCancel(i,e,t){ba(i)?i.then(n=>{n?t():e()}).catch(()=>e()):i?t():e()},_show(){if(this._showingDeferred=ae(),this._parentHidden=this._isParentHidden(),this._showingDeferred.done(()=>{delete this._parentHidden}),this._parentHidden)return this._isHidden=!0,this._showingDeferred.resolve();if(this._currentVisible)return ae().resolve().promise();if(this._currentVisible=!0,this._isHidingActionCanceled)delete this._isHidingActionCanceled,this._showingDeferred.reject();else{const i=()=>{this._stopAnimation(),this._toggleBodyScroll(this.option("enableBodyScroll")),this._toggleVisibility(!0),this._$content.css("visibility","hidden"),this._$content.toggleClass("dx-state-invisible",!1),this._updateZIndexStackPosition(!0),this._positionController.openingHandled(),this._renderContent();const e={cancel:!1};this._actions.onShowing(e),this._processShowingHidingCancel(e.cancel,()=>{this._$content.css("visibility",""),this._renderVisibility(!0),this._animateShowing()},()=>{this._toggleVisibility(!1),this._$content.css("visibility",""),this._$content.toggleClass("dx-state-invisible",!0),this._isShowingActionCanceled=!0,this._moveFromContainer(),this._toggleBodyScroll(!0),this.option("visible",!1),this._showingDeferred.resolve()})};this.option("templatesRenderAsynchronously")?(this._stopShowTimer(),this._asyncShowTimeout=setTimeout(i)):i()}return this._showingDeferred.promise()},_normalizeAnimation(i,e){return i&&(i=Y({type:"slide",skipElementInitialStyles:!0},i),We(i[e])&&Y(i[e],{position:this._positionController.position})),i},_animateHiding(){var i=this;const e=this._getAnimationConfig()??{},t=this._normalizeAnimation(e.hide,"from"),n=(t==null?void 0:t.start)??ue,s=(t==null?void 0:t.complete)??ue;this._animate(t,function(){var o;i._$content.css("pointerEvents",""),i._renderVisibility(!1);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];s.call(i,...a),i._hideAnimationProcessing=!1,(o=i._actions)===null||o===void 0||o.onHidden(),i._hidingDeferred.resolve()},function(){i._$content.css("pointerEvents","none");for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];n.call(i,...r),i._hideAnimationProcessing=!0})},_hide(){if(!this._currentVisible)return ae().resolve().promise();this._currentVisible=!1,this._hidingDeferred=ae();const i={cancel:!1};if(this._isShowingActionCanceled)delete this._isShowingActionCanceled,this._hidingDeferred.reject();else{this._actions.onHiding(i),this._toggleSafariScrolling(),this._toggleBodyScroll(!0);const e=()=>{this._isHidingActionCanceled=!0,this._toggleBodyScroll(this.option("enableBodyScroll")),this.option("visible",!0),this._hidingDeferred.resolve()},t=()=>{this._forceFocusLost(),this._toggleShading(!1),this._toggleSubscriptions(!1),this._stopShowTimer(),this._animateHiding()};this._processShowingHidingCancel(i.cancel,t,e)}return this._hidingDeferred.promise()},_forceFocusLost(){const i=_e.getActiveElement();!!this._$content.find(i).length&&Ca()},_animate(i,e,t){i?(t=t||i.start||ue,li.animate(this._$content,Y({},i,{start:t,complete:e}))):e()},_stopAnimation(){li.stop(this._$content,!0)},_renderVisibility(i){i&&this._isParentHidden()||(this._currentVisible=i,this._stopAnimation(),i||jR(this._$content),i?(this._checkContainerExists(),this._moveToContainer(),this._renderGeometry(),Am(this._$content),ps(this._$content)):(this._toggleVisibility(i),this._$content.toggleClass("dx-state-invisible",!i),this._updateZIndexStackPosition(i),this._moveFromContainer()),this._toggleShading(i),this._toggleSubscriptions(i))},_updateZIndexStackPosition(i){const e=this._overlayStack(),t=e.indexOf(this);i?(t===-1&&(this._zIndex=Gw(this._zIndexInitValue()),e.push(this)),this._$wrapper.css("zIndex",this._zIndex),this._$content.css("zIndex",this._zIndex)):t!==-1&&(e.splice(t,1),hf(this._zIndex))},_toggleShading(i){this._$wrapper.toggleClass("dx-overlay-shader",i&&this.option("shading")),this._$wrapper.css("backgroundColor",this.option("shading")?this.option("shadingColor"):""),this._toggleTabTerminator(i&&this.option("shading"))},_initTabTerminatorHandler(){var i=this;this._proxiedTabTerminatorHandler=function(){i._tabKeyHandler(...arguments)}},_toggleTabTerminator(i){const e=be("keydown",this.NAME);i?q.on(_e.getDocument(),e,this._proxiedTabTerminatorHandler):q.off(_e.getDocument(),e,this._proxiedTabTerminatorHandler)},_findTabbableBounds(){const i=this._$wrapper.find("*"),e=i.length-1,t={first:null,last:null};for(let n=0;n<=e&&(!t.first&&i.eq(n).is(x_)&&(t.first=i.eq(n)),!t.last&&i.eq(e-n).is(x_)&&(t.last=i.eq(e-n)),!(t.first&&t.last));n++);return t},_tabKeyHandler(i){if(oi(i)!=="tab"||!this._isTopOverlay())return;const e=this._findTabbableBounds(),t=e.first,n=e.last,s=!i.shiftKey&&i.target===n.get(0),o=i.shiftKey&&i.target===t.get(0),r=e.length===0,a=!ms(this._$wrapper.get(0),i.target);if(s||o||r||a){i.preventDefault();const l=i.shiftKey?n:t;q.trigger(l,"focusin"),q.trigger(l,"focus")}},_toggleSubscriptions(i){qe()&&(this._toggleHideTopOverlayCallback(i),this._toggleHideOnParentsScrollSubscription(i))},_toggleHideTopOverlayCallback(i){this._hideTopOverlayHandler&&(i?G0.add(this._hideTopOverlayHandler):G0.remove(this._hideTopOverlayHandler))},_toggleHideOnParentsScrollSubscription(i){const e=be("scroll",this.NAME),{prevTargets:t,handler:n}=this._parentsScrollSubscriptionInfo??{};q.off(t,e,n);const s=this.option("hideOnParentScroll");if(i&&s){let o=this._getHideOnParentScrollTarget().parents();Re.real().deviceType==="desktop"&&(o=o.add(Lr)),q.on(o,e,n),this._parentsScrollSubscriptionInfo.prevTargets=o}},_hideOnParentsScrollHandler(i){let e=!1;const t=this.option("hideOnParentScroll");Ee(t)&&(e=t(i)),!e&&!this._showAnimationProcessing&&this.hide()},_getHideOnParentScrollTarget(){const i=R(this.option("_hideOnParentScrollTarget"));return i.length?i:this._$wrapper},_render(){this.callBase(),this._appendContentToElement(),this._renderVisibilityAnimate(this.option("visible"))},_appendContentToElement(){this._$content.parent().is(this.$element())||this._$content.appendTo(this.$element())},_renderContent(){const i=!this._currentVisible&&this.option("deferRendering");if(this.option("visible")&&this._isParentHidden()){this._isHidden=!0;return}this._contentAlreadyRendered||i||(this._contentAlreadyRendered=!0,this._appendContentToElement(),this.callBase())},_isParentHidden(){if(!this.option("_checkParentVisibility"))return!1;if(this._parentHidden!==void 0)return this._parentHidden;const i=this.$element().parent();if(i.is(":visible"))return!1;let e=!1;return i.add(i.parents()).each((t,n)=>{if(R(n).css("display")==="none")return e=!0,!1}),e||!_e.getBody().contains(i.get(0))},_renderContentImpl(){const i=ae(),e=this.option("contentTemplate"),t=this._getTemplate(e),n=this._templateManager.anonymousTemplateName===e;return t&&t.render({container:ze(this.$content()),noModel:!0,transclude:n,onRendered:()=>{i.resolve(),this.option("templatesRenderAsynchronously")&&this._dimensionChanged()}}),this._toggleWrapperScrollEventsSubscription(this.option("preventScrollEvents")),i.done(()=>{this.option("visible")&&this._moveToContainer()}),i.promise()},_getPositionControllerConfig(){const{container:i,visualContainer:e,_fixWrapperPosition:t,restorePosition:n,_skipContentPositioning:s}=this.option();return{container:i,visualContainer:e,$root:this.$element(),$content:this._$content,$wrapper:this._$wrapper,onPositioned:this._actions.onPositioned,onVisualPositionChanged:this._actions.onVisualPositionChanged,restorePosition:n,_fixWrapperPosition:t,_skipContentPositioning:s}},_initPositionController(){this._positionController=new Kw(this._getPositionControllerConfig())},_toggleWrapperScrollEventsSubscription(i){const e=be(ma,this.NAME);q.off(this._$wrapper,e),i&&q.on(this._$wrapper,e,{validate:()=>!0,getDirection:()=>"both",_toggleGestureCover(t){t||this._toggleGestureCoverImpl(t)},_clearSelection:ue,isNative:!0},t=>{const{originalEvent:n}=t.originalEvent,{type:s}=n||{},o=s==="wheel",r=s==="mousemove",a=o&&!ki(t);t._cancelPreventDefault=!0,n&&t.cancelable!==!1&&(!r&&!o||a)&&t.preventDefault()})},_moveFromContainer(){this._$content.appendTo(this.$element()),this._$wrapper.detach()},_checkContainerExists(){const i=this._positionController.$container;if(i===void 0)return;i.length>0||mt.log("W1021",this.NAME)},_moveToContainer(){const i=this._positionController.$container;this._$wrapper.appendTo(i),this._$content.appendTo(this._$wrapper)},_renderGeometry(i){const{visible:e}=this.option();e&&qe()&&(this._stopAnimation(),this._renderGeometryImpl())},_renderGeometryImpl(){this._positionController.updatePosition(this._getOptionValue("position")),this._renderWrapper(),this._renderDimensions(),this._renderPosition()},_renderPosition(){this._positionController.positionContent()},_isAllWindowCovered(){return gi(this._positionController.$visualContainer.get(0))&&this.option("shading")},_toggleSafariScrolling(){const i=this.option("visible"),e=R(_e.getBody()),t=Re.real().platform==="ios"&&Zt.safari,n=this._isAllWindowCovered(),s=e.hasClass("dx-prevent-safari-scrolling"),o=!s&&i&&n,r=s&&(!i||!n||this._disposed);t&&(r?(e.removeClass("dx-prevent-safari-scrolling"),Lr.scrollTo(0,this._cachedBodyScrollTop),this._cachedBodyScrollTop=void 0):o&&(this._cachedBodyScrollTop=Lr.pageYOffset,e.addClass("dx-prevent-safari-scrolling")))},_renderWrapper(){this._positionController.styleWrapperPosition(),this._renderWrapperDimensions(),this._positionController.positionWrapper()},_renderWrapperDimensions(){const{$visualContainer:i}=this._positionController,e=_e.getDocumentElement(),t=gi(i.get(0)),n=t?e.clientWidth:St(i),s=t?Lr.innerHeight:rt(i);this._$wrapper.css({width:n,height:s})},_renderDimensions(){const i=this._$content.get(0);this._$content.css({minWidth:this._getOptionValue("minWidth",i),maxWidth:this._getOptionValue("maxWidth",i),minHeight:this._getOptionValue("minHeight",i),maxHeight:this._getOptionValue("maxHeight",i),width:this._getOptionValue("width",i),height:this._getOptionValue("height",i)})},_focusTarget(){return this._$content},_attachKeyboardEvents(){this._keyboardListenerId=wo.on(this._$content,null,i=>this._keyboardHandler(i))},_keyboardHandler(i){const e=i.originalEvent;(R(e.target).is(this._$content)||!this.option("ignoreChildEvents"))&&this.callBase(...arguments)},_isVisible(){return this.option("visible")},_visibilityChanged(i){i?this.option("visible")&&this._renderVisibilityAnimate(i):this._renderVisibilityAnimate(i)},_dimensionChanged(){this._renderGeometry()},_clean(){const i=this.option();!this._contentAlreadyRendered&&!i.isRenovated&&this.$content().empty(),this._renderVisibility(!1),this._stopShowTimer(),this._cleanFocusState()},_stopShowTimer(){this._asyncShowTimeout&&clearTimeout(this._asyncShowTimeout),this._asyncShowTimeout=null},_dispose(){li.stop(this._$content,!1),clearTimeout(this._deferShowTimer),this._toggleViewPortSubscription(!1),this._toggleSubscriptions(!1),this._updateZIndexStackPosition(!1),this._toggleTabTerminator(!1),this._actions=null,this._parentsScrollSubscriptionInfo=null,this.callBase(),this._toggleSafariScrolling(),this.option("visible")&&hf(this._zIndex),this._$wrapper.remove(),this._$content.remove()},_toggleRTLDirection(i){this._$content.toggleClass("dx-rtl",i)},_optionChanged(i){const{value:e,name:t}=i;if(this._getActionsList().includes(t)){this._initActions();return}switch(t){case"animation":case"closeOnOutsideClick":case"hideOnOutsideClick":case"propagateOutsideClick":break;case"shading":this._toggleShading(this.option("visible")),this._toggleSafariScrolling();break;case"shadingColor":this._toggleShading(this.option("visible"));break;case"width":case"height":case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":this._renderGeometry();break;case"position":this._positionController.updatePosition(this.option("position")),this._positionController.restorePositionOnNextRender(!0),this._renderGeometry(),this._toggleSafariScrolling();break;case"visible":this._renderVisibilityAnimate(e).done(()=>{var n;return(n=this._animateDeferred)===null||n===void 0?void 0:n.resolveWith(this)}).fail(()=>{var n;return(n=this._animateDeferred)===null||n===void 0?void 0:n.reject()});break;case"container":this._positionController.updateContainer(e),this._invalidate(),this._toggleSafariScrolling();break;case"visualContainer":this._positionController.updateVisualContainer(e),this._renderWrapper(),this._toggleSafariScrolling();break;case"innerOverlay":this._initInnerOverlayClass();break;case"deferRendering":case"contentTemplate":this._contentAlreadyRendered=!1,this._clean(),this._invalidate();break;case"hideTopOverlayHandler":this._toggleHideTopOverlayCallback(!1),this._initHideTopOverlayHandler(e),this._toggleHideTopOverlayCallback(this.option("visible"));break;case"hideOnParentScroll":case"_hideOnParentScrollTarget":this._toggleHideOnParentsScrollSubscription(this.option("visible"));break;case"rtlEnabled":this._contentAlreadyRendered=!1,this.callBase(i);break;case"_fixWrapperPosition":this._positionController.fixWrapperPosition=e;break;case"wrapperAttr":this._renderWrapperAttributes();break;case"restorePosition":this._positionController.restorePosition=e;break;case"preventScrollEvents":this._logDeprecatedPreventScrollEventsInfo(),this._toggleWrapperScrollEventsSubscription(e);break;default:this.callBase(i)}},toggle(i){i=i===void 0?!this.option("visible"):i;const e=ae();if(i===this.option("visible"))return e.resolveWith(this,[i]).promise();const t=ae();return this._animateDeferred=t,this.option("visible",i),t.promise().done(()=>{delete this._animateDeferred,e.resolveWith(this,[this.option("visible")])}).fail(()=>{delete this._animateDeferred,e.reject()}),e.promise()},$content(){return this._$content},show(){return this.toggle(!0)},hide(){return this.toggle(!1)},content(){return ze(this._$content)},repaint(){this._contentAlreadyRendered?(this._positionController.restorePositionOnNextRender(!0),this._renderGeometry({forceStopAnimation:!0}),ps(this._$content)):this.callBase()}});is.baseZIndex=i=>G3(i);wt("dxOverlay",is);const Lm=is.inherit({_supportedKeys(){return Y(this.callBase(),{escape:ue})},_getDefaultOptions(){return Y(this.callBase(),{message:re.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:()=>tn(),options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:()=>nn(),options:{width:"auto",height:"auto"}}])},_init(){this.callBase.apply(this,arguments)},_render(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._updateWrapperAria()},_updateWrapperAria(){if(this.$wrapper().removeAttr("aria-label").removeAttr("role"),!this.option("showIndicator")){const e=this._getAriaAttributes();this.$wrapper().attr(e)}},_getAriaAttributes(){const{message:i}=this.option();return{role:"alert","aria-label":i||re.format("Loading")}},_renderContentImpl(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=R("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show(){const i=this.option("delay");if(!i)return this.callBase();const e=ae(),t=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(()=>{t().done(()=>{e.resolve()})},i),e.promise()},_hide(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout(){clearTimeout(this._showTimeout)},_renderMessage(){if(!this._$loadPanelContentWrapper)return;const i=this.option("message");if(!i)return;const e=R("<div>").addClass("dx-loadpanel-message").text(i);this._$loadPanelContentWrapper.append(e)},_renderLoadIndicator(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=R("<div>").addClass("dx-loadpanel-indicator").appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,An,{elementAttr:this._getAriaAttributes(),indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent(){this.$content().find(".dx-loadpanel-message").remove(),this.$content().find(".dx-loadpanel-indicator").remove(),delete this._$indicator},_togglePaneVisible(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged(i){switch(i.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._updateWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(i)}},_dispose(){this._clearShowTimeout(),this.callBase()}});wt("dxLoadPanel",Lm);const Y3=["year","month","day"],X3=["year","month","day","hour","minute"],ff=function(i){return i==="date"||i==="datetime"},yh=function(i){let e,t=[];const n=["year","month","day","hour","minute","second"],s=i.headerFilter&&i.headerFilter.groupInterval,o=s==="quarter"?"month":s;if(ff(i.dataType)&&s!==null)return t=i.dataType==="datetime"?X3:Y3,e=n.indexOf(o),e>=0&&(t=n.slice(0,e),t.push(s)),t;if(U(s))return Array.isArray(s)?s:[s]},Er=function(){const i=function(s,o){let r=s.dataField||s.selector;return o==="search"&&(r=s.displayField||s.calculateDisplayValue||r),r},e=function(s,o){const r=this;let a,l,d;const c=i(r,o);if(Array.isArray(s)&&U(s[0])&&U(s[1]))return l=[c,">=",s[0]],d=[c,"<=",s[1]],ff(r.dataType)&&(h=s[1],h.getHours()+h.getMinutes()+h.getSeconds()+h.getMilliseconds()<1)&&(a=new Date(s[1].getTime()),r.dataType==="date"&&a.setDate(s[1].getDate()+1),d=[c,"<",a]),[l,"and",d];var h},t=function(s,o,r){const a=this;let l,d,c;const h=function(p){return yn(p)?[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]:Ii((""+p).split("/"),function(f,g){return g===1?Number(f)-1:Number(f)})}(s),u=i(a,r);switch(r==="headerFilter"?c=yh(a)[h.length-1]:a.dataType==="datetime"&&(c="minute"),c){case"year":l=new Date(h[0],0,1),d=new Date(h[0]+1,0,1);break;case"month":l=new Date(h[0],h[1],1),d=new Date(h[0],h[1]+1,1);break;case"quarter":l=new Date(h[0],3*h[1],1),d=new Date(h[0],3*h[1]+3,1);break;case"hour":l=new Date(h[0],h[1],h[2],h[3]),d=new Date(h[0],h[1],h[2],h[3]+1);break;case"minute":l=new Date(h[0],h[1],h[2],h[3],h[4]),d=new Date(h[0],h[1],h[2],h[3],h[4]+1);break;case"second":l=new Date(h[0],h[1],h[2],h[3],h[4],h[5]),d=new Date(h[0],h[1],h[2],h[3],h[4],h[5]+1);break;default:l=new Date(h[0],h[1],h[2]),d=new Date(h[0],h[1],h[2]+1)}switch(o){case"<":return[u,"<",l];case"<=":return[u,"<",d];case">":return[u,">=",d];case">=":return[u,">=",l];case"<>":return[[u,"<",l],"or",[u,">=",d]];default:return[[u,">=",l],"and",[u,"<",d]]}},n=function(s,o,r){const a=i(this,r),l=yh(this);if(r==="headerFilter"&&l&&U(s)){const d=(""+s).split("/"),c=Number(d[d.length-1]),h=l[d.length-1],u=[a,">=",c],p=[a,"<",c+h];return[u,"and",p]}return[a,o||"=",s]};return{defaultCalculateFilterExpression:function(s,o,r){const a=this,l=i(a,r),d=a.calculateDisplayValue&&r==="search",c=d&&a.lookup&&a.lookup.dataType||a.dataType;let h=null;if((r==="headerFilter"||r==="filterBuilder")&&s===null)h=[l,o||"=",null],c==="string"&&(h=[h,o==="="?"or":"and",[l,o||"=",""]]);else if(c==="string"&&(!a.lookup||d))h=[l,o||"contains",s];else{if(o==="between")return e.apply(a,[s,r]);if(ff(c)&&U(s))return t.apply(a,arguments);if(c==="number")return n.apply(a,arguments);h=[l,o||"=",s]}return h},getGroupInterval:yh}}(),Z3="scrolling.legacyMode",J3="scrolling.rowRenderingMode",Q3={year:i=>i&&i.getFullYear(),month:i=>i&&i.getMonth()+1,day:i=>i&&i.getDate(),quarter:i=>i&&Math.floor(i.getMonth()/3)+1,hour:i=>i&&i.getHours(),minute:i=>i&&i.getMinutes(),second:i=>i&&i.getSeconds()},eM=function(){const i=arguments[1],e=this.calculateCellValue(i);if(!U(e))return null;if(Uw(this.dataType)){const t=arguments[0];return Q3[t](e)}if(this.dataType==="number"){const t=arguments[0];return Math.floor(Number(e)/t)*t}},tM=function(i,e){return Ee(i)&&Ee(e)&&i.originalCallback&&e.originalCallback?i.originalCallback===e.originalCallback&&i.columnIndex===e.columnIndex:i===e};function Uw(i){return i==="date"||i==="datetime"}const Y0=function(i){i.get(0).textContent=" "},Ch=function(i){i=i||[];const e=Us(i);for(let t=0;t<i.length;t++)i&&i[t]&&i[t].isExpanded!==void 0&&(e[t].isExpanded=i[t].isExpanded),i&&i[t]&&i[t].groupInterval!==void 0&&(e[t].groupInterval=i[t].groupInterval);return e},qw=function(i,e){const t=lw.format(i,e.format)||i&&i.toString()||"",n={value:i,valueText:e.getDisplayFormat?e.getDisplayFormat(t):t,target:e.target||"row",groupInterval:e.groupInterval};return e.customizeText?e.customizeText.call(e,n):n.valueText},X0=function(i,e){const t=i.displayFormat||i.columnCaption&&e[`${i.summaryType}OtherColumn`]||e[i.summaryType];return qw(i.value,{format:i.valueFormat,getDisplayFormat:n=>t?vs(t,n,i.columnCaption):n,customizeText:i.customizeText})},Z0=function(i){const e=i.data&&i.data(),t=e&&e.dxComponents,n=t&&t[0];return n&&e[n]},Yw=function(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!Yw(i[t],e[t]))return!1;return!0}return Ee(i)&&i.columnIndex>=0&&Ee(e)&&e.columnIndex>=0?i.columnIndex===e.columnIndex&&Ki(i.filterValue)===Ki(e.filterValue)&&Ki(i.selectedFilterOperation)===Ki(e.selectedFilterOperation):Ki(i)==Ki(e)};function iM(i){return Array.isArray(i)||(i=[i]),i.map((e,t)=>Ke(e)?{selector:e,isExpanded:t<i.length-1}:e)}const Ce={renderNoDataText(i){const e=this;if(i=i||this.element(),!i)return;const t=e.addWidgetPrefix("nodata");let n=i.find(`.${t}`).last();const s=this._dataController.isEmpty(),o=this._dataController.isLoading();n.length||(n=R("<span>").addClass(t)),n.parent().is(i)||n.appendTo(i),s&&!o?n.removeClass("dx-hidden").text(e._getNoDataText()):n.addClass("dx-hidden")},renderLoadPanel(i,e,t){const n=this;let s;n._loadPanel&&n._loadPanel.$element().remove(),s=n.option("loadPanel"),s&&(s.enabled==="auto"?!t:s.enabled)?(s=Y({shading:!1,message:s.text,container:e},s),n._loadPanel=n._createComponent(R("<div>").appendTo(e),Lm,s)):n._loadPanel=null},calculateLoadPanelPosition(i){const e=R(Je());return st(i)>st(e)?{of:e,boundary:i,collision:"fit"}:{of:i}},getIndexByKey(i,e,t){let n=-1;if(i!==void 0&&Array.isArray(e)){t=arguments.length<=2?"key":t;for(let s=0;s<e.length;s++){const o=U(t)?e[s][t]:e[s];if(zt(i,o)){n=s;break}}}return n},combineFilters(i,e){let t=[];e=e||"and";for(let s=0;s<i.length;s++){var n;if(i[s]){if(((n=i[s])===null||n===void 0?void 0:n.length)===1&&i[s][0]==="!"){if(e==="and")return["!"];if(e==="or")continue}t.length&&t.push(e),t.push(i[s])}}if(t.length===1&&(t=t[0]),t.length)return t},checkChanges(i,e){let t=0;for(let n=0;n<e.length;n++)i[e[n]]&&t++;return i.length&&i.length===t},equalFilterParameters:Yw,proxyMethod(i,e,t){i[e]||(i[e]=function(){const n=this._dataSource;return n?n[e].apply(n,arguments):t})},formatValue:qw,getFormatOptionsByColumn:(i,e)=>({format:i.format,getDisplayFormat:i.getDisplayFormat,customizeText:i.customizeText,target:e,trueText:i.trueText,falseText:i.falseText}),getDisplayValue(i,e,t,n){return i.displayValueMap&&i.displayValueMap[e]!==void 0?i.displayValueMap[e]:i.calculateDisplayValue&&t&&n!=="group"?i.calculateDisplayValue(t):i.lookup&&!(n==="group"&&(i.calculateGroupValue||i.calculateDisplayValue))?i.lookup.calculateCellValue(e):e},getGroupRowSummaryText(i,e){let t="(";for(let n=0;n<i.length;n++){const s=i[n];t+=(n>0?", ":"")+X0(s,e)}return t+")"},getSummaryText:X0,normalizeSortingInfo:Ch,getFormatByDataType(i){switch(i){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(i,e){let t=[];const n=i.dataField||i.name,s=Er.getGroupInterval(i);return s?(ie(s,(o,r)=>{t.push(e?{selector:n,groupInterval:r,isExpanded:o<s.length-1}:eM.bind(i,r))}),t):(e?t=[{selector:n,isExpanded:!1}]:(t=function(o){let r=i.calculateCellValue(o);return(r===void 0||r==="")&&(r=null),r},i.sortingMethod&&(t=[{selector:t,compare:i.sortingMethod.bind(i)}])),t)},equalSortParameters(i,e,t){if(i=Ch(i),e=Ch(e),Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(!tM(i[n].selector,e[n].selector)||i[n].desc!==e[n].desc||i[n].groupInterval!==e[n].groupInterval||!t&&!!i[n].isExpanded!=!!e[n].isExpanded)return!1;return!0}return(!i||!i.length)==(!e||!e.length)},getPointsByColumns(i,e,t,n){const s=i.length;let o=!1,r,a,l=n||0;const d=[];let c;for(let h=0;h<=s;h++){h<s&&(r=i.eq(h),a=r.offset(),c=r.css("direction")==="rtl");const u={index:l,x:a?a.left+(!t&&c^h===s?yi(r[0]).width:0):0,y:a?a.top+(t&&h===s?yi(r[0]).height:0):0,columnIndex:l};if(!t&&h>0){const p=i.eq(h-1).offset();p.top<u.y&&(u.y=p.top)}e&&(o=e(u)),o||d.push(u),l++}return d},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(i,e){const t=R(i);if(U(e.value)&&!(e.data&&e.data.isContinuation)&&!e.row.isNewRow){const n=e.component.getView("rowsView");t.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),R("<div>").addClass(e.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(t),n.setAria("label",e.value?n.localize("dxDataGrid-ariaCollapse"):n.localize("dxDataGrid-ariaExpand"),t)}else Y0(t)}}),setEmptyText:Y0,isDateType:Uw,getSelectionRange(i){try{if(i)return{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd}}catch{}return{}},setSelectionRange(i,e){try{i&&i.setSelectionRange&&i.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}},focusAndSelectElement(i,e){const t=e.is(":focus");q.trigger(e,"focus");const n=i.option("editing.selectTextOnEditStart"),s=e.get(0);if(!t&&n&&e.is(".dx-texteditor-input")&&!e.is("[readonly]")){const o=Z0(e.closest(".dx-texteditor"));De(o&&o._loadItemDeferred).done(()=>{s.select()})}},getWidgetInstance:Z0,getLastResizableColumnIndex(i,e){const t=i.some(s=>s&&!s.command&&!s.fixed&&s.allowResizing!==!1);let n;for(n=i.length-1;i[n];n--){const s=i[n],o=e&&e[n],r=!t||s.allowResizing!==!1;if(!s.command&&!s.fixed&&o!=="adaptiveHidden"&&r)break}return n},isElementInCurrentGrid(i,e){return e&&e.length?e.closest(`.${i.getWidgetContainerClass()}`).parent().is(i.component.$element()):!1},isVirtualRowRendering(i){const e=i.option(J3),t=i.option("scrolling.mode")==="virtual",n=i.option("scrolling.mode")==="infinite";return i.option(Z3)===!1&&(t||n)?!0:e==="virtual"},getPixelRatio:i=>i.devicePixelRatio||1,getContentHeightLimit(i){return i.mozilla?8e6:15e6/this.getPixelRatio(Je())},normalizeLookupDataSource(i){let e;return i.items?e=i.items:(e=i.dataSource,Ee(e)&&!Qi.isWrapped(e)&&(e=e({}))),Bo(e)},getWrappedLookupDataSource(i,e,t){if(!e)return[];const n=this.normalizeLookupDataSource(i.lookup);if(i.calculateCellValue!==i.defaultCalculateCellValue)return n;const s=e.remoteOperations().groupPaging,o=i.displayField&&Ke(i.displayField);let r,a,l;const d=(h,u)=>{const p=u.skip??0,f=u.take?p+u.take:h.length;return h.slice(p,f)};return ve({},n,{__dataGridSourceFilter:t,load:h=>{const u=new ae;return(p=>{const f=iM(o?[i.dataField,i.displayField]:i.dataField),g=new ae;return r&&(!s||p.skip===l&&p.take===a)?g.resolve(d(r,p)):(l=p.skip,a=p.take,e.load({filter:t,group:f,take:s?p.take:void 0,skip:s?p.skip:void 0}).done(b=>{r=b,g.resolve(s?b:d(b,p))}).fail(g.fail)),g})(h).done(p=>{if(p.length===0){u.resolve([]);return}const f=this.combineFilters(p.flatMap(m=>m.key).map(m=>[i.lookup.valueExpr,m]),"or");new Dn(ve({},n,h,{filter:this.combineFilters([f,h.filter],"and"),paginate:!1})).load().done(u.resolve).fail(u.fail)}).fail(u.fail),u},key:i.lookup.valueExpr,byKey(h){const u=ae();return this.load({filter:[i.lookup.valueExpr,"=",h]}).done(p=>{u.resolve(p[0])}),u.promise()}})},logHeaderFilterDeprecatedWarningIfNeed(i){const e=i._logDeprecatedOptionWarning.bind(i);U(i.option("headerFilter.allowSearch"))&&e("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),U(i.option("headerFilter.searchTimeout"))&&e("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});const t=i.NAME==="dxPivotGrid"?"dataSource.fields":"columns",n=i.option(t);if(!Array.isArray(n))return;const s=o=>{o.forEach(r=>{var a;const l=r.headerFilter||{};U(l.allowSearch)&&e(`${t}[].headerFilter.allowSearch`,{since:"23.1",alias:`${t}[].headerFilter.search.enabled`}),U(l.searchMode)&&e(`${t}[].headerFilter.searchMode`,{since:"23.1",alias:`${t}[].headerFilter.search.mode`}),(a=r.columns)!==null&&a!==void 0&&a.length&&s(r.columns)})};s(n)}},xh="dx-master-detail-row",wh="dxCellHintVisible",nM={render(i){i.container.append(i.content)}},sM=function(i,e){let t,n,s;function o(r){return setTimeout(()=>{t=n=null},r)}q.on(e,"touchstart touchend",".dx-row",r=>{clearTimeout(s),r.type==="touchstart"?(t=r.target,n=r.currentTarget,s=o(1e3)):s=o()}),q.on(e,[kt,$l,Ct.down].join(" "),".dx-row",i.createAction(r=>{const{event:a}=r;t&&(a.target=t,a.currentTarget=n),R(a.target).closest("a").length||(r.rowIndex=i.getRowIndex(a.currentTarget),r.rowIndex>=0&&(r.rowElement=ze(R(a.currentTarget)),r.columns=i.getColumns(),a.type===Ct.down?i._rowPointerDown(r):a.type===kt?i._rowClick(r):i._rowDblClick(r)))}))},Rd=function(i){return i==="auto"?"":Wt(i)?`${i}px`:i},J0=function(i,e,t){i.style.width=i.style.maxWidth=e.width==="auto"?"":t},oM=function(i,e){if(!i||!e)return;const t=i.attributes,n=e.attributes;let s;for(s=0;s<t.length;s++){const o=t[s].nodeName;e.hasAttribute(o)||i.removeAttribute(o)}for(s=0;s<n.length;s++)i.setAttribute(n[s].nodeName,n[s].nodeValue)},rM=function(i){i.resolve()},Xw=i=>typeof i=="number"?`${i.toFixed(3)}px`:i==="adaptiveHidden"?"0.0001px":i;class Ql extends EA(Yt.View){init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnChooserController=this.getController("columnChooser"),this._editorFactoryController=this.getController("editorFactory"),this._selectionController=this.getController("selection"),this._columnChooserView=this.getView("columnChooserView"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}dispose(){if(qe()){var e,t;const n=Je();(e=this._templateTimeouts)===null||e===void 0||e.forEach(s=>n.clearTimeout(s)),(t=this._templateTimeouts)===null||t===void 0||t.clear()}}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":this._invalidate(!0,!0),e.handled=!0;break;case"keyboardNavigation":e.fullName==="keyboardNavigation.enabled"&&this._invalidate(!0,!0),e.handled=!0}}_createScrollableOptions(){const e=this.option("scrolling");let t=this.option("scrolling.useNative");const n=Y({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return t===void 0&&(t=!0),t==="auto"?(delete n.useNative,delete n.useSimulatedScrollbar):(n.useNative=!!t,n.useSimulatedScrollbar=!t),n}_updateCell(e,t){t.rowType&&this._cellPrepared(e,t)}_needToSetCellWidths(){return this.option("columnAutoWidth")}_createCell(e){const{column:t}=e,n=t.alignment||Po(this.option("rtlEnabled")),s=this._needToSetCellWidths(),o=_e.createElement("td");o.style.textAlign=n;const r=R(o);return e.rowType==="data"&&t.headerId&&!t.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",t.headerId,r),t.cssClass&&r.addClass(t.cssClass),Array.isArray(t.elementAttr)&&t.elementAttr.forEach(a=>{let{name:l,value:d}=a;r.attr(l,d)}),t.command==="expand"&&(r.addClass(t.cssClass),r.addClass(this.addWidgetPrefix("group-space"))),t.colspan>1?r.attr("colSpan",t.colspan):!t.isBand&&t.visibleWidth!=="auto"&&s&&((t.width||t.minWidth)&&(o.style.minWidth=Rd(t.minWidth||t.width)),t.width&&J0(o,t,Rd(t.width))),r}_createRow(e,t){t=t||"tr";const n=R(`<${t}>`).addClass("dx-row");return t==="tr"&&this.setAria("role","row",n),n}_isAltRow(e){return e&&e.dataIndex%2===1}_createTable(e,t){const n=R("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!t?(n.attr("id",`dx-${new hi}`).append(this._createColGroup(e)),Zt.safari&&n.append(R("<thead>").append("<tr>")),this.setAria("role","presentation",n)):this.setAria("hidden",!0,n),this.setAria("role","presentation",R("<tbody>").appendTo(n)),t)return n;Zt.mozilla&&q.on(n,"mousedown","td",o=>{o.ctrlKey&&o.preventDefault()}),this.option("cellHintEnabled")&&q.on(n,"mousemove",".dx-row > td",this.createAction(o=>{const r=o.event,a=R(r.target),l=R(r.currentTarget),d=l.parent(),c=this._columnsController.getVisibleColumns(),h=d.data("options"),u=l.index(),p=h&&h.cells&&h.cells[u],f=p?p.column:c[u],g=d.hasClass("dx-header-row"),m=d.hasClass("dx-data-row"),b=d.hasClass(xh),_=d.hasClass("dx-group-row"),w=d.hasClass(this.addWidgetPrefix("filter-row")),E=m&&(!f||f.cellTemplate),D=m&&p&&(h.isEditing||p.isEditing||(f==null?void 0:f.showEditorAlways)),B=g&&(!f||f.headerCellTemplate),$=_&&(!f||f.groupIndex&&f.groupCellTemplate);!b&&!w&&!D&&!E&&!B&&!$&&(a.data(wh)&&(a.removeAttr("title"),a.data(wh,!1)),a[0].scrollWidth-a[0].clientWidth>0&&!U(a.attr("title"))&&(a.attr("title",a.text()),a.data(wh,!0)))}));const s=o=>{const r=R(o.currentTarget),a=R(o.target).closest(".dx-field-item-content"),l=r.parent(),d=l.data("options"),c=d&&d.cells&&d.cells[r.index()];if(!r.closest("table").is(o.delegateTarget))return;const h=Y({},c,{cellElement:ze(r),event:o,eventType:o.type});if(h.rowIndex=this.getRowIndex(l),a.length){const u=a.data("dx-form-item");u.column&&(h.column=u.column,h.columnIndex=this._columnsController.getVisibleIndex(h.column.index))}return h};return q.on(n,"mouseover",".dx-row > td",o=>{const r=s(o);r&&this.executeAction("onCellHoverChanged",r)}),q.on(n,"mouseout",".dx-row > td",o=>{const r=s(o);r&&this.executeAction("onCellHoverChanged",r)}),q.on(n,kt,".dx-row > td",o=>{const r=s(o);r&&this.executeAction("onCellClick",r)}),q.on(n,$l,".dx-row > td",o=>{const r=s(o);r&&this.executeAction("onCellDblClick",r)}),sM(this,n),n}_rowPointerDown(e){}_rowClick(){}_rowDblClick(){}_createColGroup(e){const t=R("<colgroup>");for(let n=0;n<e.length;n++){const s=e[n].colspan||1;for(let o=0;o<s;o++)t.append(this._createCol(e[n]))}return t}_createCol(e){let t=e.visibleWidth||e.width;t==="adaptiveHidden"&&(t="0.0001px");const n=R("<col>");return Tp(n,t),n}renderDelayedTemplates(e){const t=this._delayedTemplates,n=t.filter(o=>!o.async),s=t.filter(o=>o.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(n,!1,e),this._renderDelayedTemplatesCoreAsync(s)}_renderDelayedTemplatesCoreAsync(e){if(e.length){const t=Je().setTimeout(()=>{this._templateTimeouts.delete(t),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(t)}}_renderDelayedTemplatesCore(e,t,n){const s=new Date;for(;e.length;){const o=e.shift(),{options:r}=o,a=_e.getRootNode(R(r.container).get(0)),l=this.needWaitAsyncTemplates();if((!t||R(r.container).closest(a).length||l)&&(n&&(r.change=n),o.template.render(r)),t&&new Date-s>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,t){const n=this;let s;if(e&&e.render&&!Cn(e))s={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(o){e.render(o.container,o.model,o.change),o.deferred&&o.deferred.resolve()}};else if(Ee(e))s={render(o){const r=e(ze(o.container),o.model,o.change);r&&(r.nodeType||Cn(r))&&o.container.append(r),o.deferred&&o.deferred.resolve()}};else{const o=Ke(e)?e:R(e).attr("id");o?(n._templatesCache[o]||(n._templatesCache[o]=n.getTemplate(e)),s=n._templatesCache[o]):s=n.getTemplate(e)}return s}renderTemplate(e,t,n,s,o){const r=this._processTemplate(t,n),{column:a}=n,l=n.rowType==="data",d=new ae,c={container:e,model:n,deferred:d,onRendered:()=>{this.isDisposed()?d.reject():d.resolve()}};if(r){n.component=this.component;const h=a&&(a.renderAsync&&l||this.option("renderAsync")&&(a.renderAsync!==!1&&(a.command||a.showEditorAlways)&&l||n.rowType==="filter")),u=n.renderAsync??h;(r.allowRenderToDetachedContainer||s)&&!u?r.render(c):this._delayedTemplates.push({template:r,options:c,async:u}),this._templateDeferreds.add(d),q.on(e,Rn,rM.bind(null,d))}else d.reject();return d.promise().always(()=>{this._templateDeferreds.delete(d)})}_getBodies(e){return R(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var t;return!!this.option().rowTemplate&&!!((t=this._getBodies(e))!==null&&t!==void 0&&t.filter(".dx-row").length)}_wrapRowIfNeed(e,t,n){const s=n?e||this._tableElement:this._tableElement||e;if(this._needWrapRow(s)){const r=R("<tbody>").addClass(t.attr("class"));return this.setAria("role","presentation",r),r.append(t)}return t}_appendRow(e,t,n){n=n||nM,n.render({content:t,container:e})}_resizeCore(){const e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){const t=this.element().parent();(!t||t.parent().length)&&this.renderDelayedTemplates(e)}_renderTable(e){e=e||{},e.columns=this._columnsController.getVisibleColumns();const t=e.change&&e.change.changeType,n=this._createTable(e.columns,t==="append"||t==="prepend"||t==="update");return this._renderRows(n,e),n}_renderRows(e,t){const n=this,s=n._getRows(t.change),o=t.change&&t.change.columnIndices||[],r=t.change&&t.change.changeTypes||[];for(let a=0;a<s.length;a++)n._renderRow(e,Y({row:s[a],columnIndices:o[a],changeType:r[a]},t))}_renderRow(e,t){t.columnIndices||(t.row.cells=[]);const n=this._createRow(t.row),s=this._wrapRowIfNeed(e,n);t.changeType!=="remove"&&this._renderCells(n,t),this._appendRow(e,s);const o=Y({columns:t.columns},t.row);this._addWatchMethod(o,t.row),this._rowPrepared(s,o,t.row)}_needRenderCell(e,t){return!t||t.indexOf(e)>=0}_renderCells(e,t){const n=this;let s=0;const{row:o}=t,{columns:r}=t;for(let a=0;a<r.length;a++)this._needRenderCell(a,t.columnIndices)&&n._renderCell(e,Y({column:r[a],columnIndex:s,value:o.values&&o.values[s],oldValue:o.oldValues&&o.oldValues[s]},t)),r[a].colspan>1?s+=r[a].colspan:s++}_updateCells(e,t,n){const s=e.children(),o=t.children(),r=this.option("highlightChanges"),a=this.addWidgetPrefix("cell-updated-animation");n.forEach((l,d)=>{const c=s.eq(l),h=o.eq(d);c.replaceWith(h),r&&!h.hasClass("dx-command-expand")&&h.addClass(a)}),oM(e.get(0),t.get(0))}_setCellAriaAttributes(e,t){if(t.rowType!=="freeSpace"){this.setAria("role","gridcell",e);const n=this._columnsController.getColumnIndexOffset(),s=t.columnIndex+n+1;this.setAria("colindex",s,e)}}_renderCell(e,t){const n=this._getCellOptions(t);if(t.columnIndices){if(t.row.cells){const o=t.row.cells.findIndex(r=>r.columnIndex===n.columnIndex);t.row.cells[o]=n}}else t.row.cells.push(n);const s=this._createCell(n);return this._setCellAriaAttributes(s,n),this._renderCellContent(s,n,t),e.get(0).appendChild(s.get(0)),s}_renderCellContent(e,t,n){const s=this._getCellTemplate(t);De(!s||this.renderTemplate(e,s,t,void 0,n.change)).done(()=>{this._updateCell(e,t)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){const t={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(t),t}_addWatchMethod(e,t){if(!this.option("repaintChangesOnly"))return;const n=[];return t=t||e,t.watch=t.watch||function(s,o,r){let a=s(t.data);const l=function(d){d&&r&&r(d);const c=s(t.data);JSON.stringify(a)!==JSON.stringify(c)&&(d&&o(c),a=c)};return n.push(l),function(){const d=n.indexOf(l);d>=0&&n.splice(d,1)}},t.update=t.update||function(s,o){s&&(this.data=e.data=s.data,this.rowIndex=e.rowIndex=s.rowIndex,this.dataIndex=e.dataIndex=s.dataIndex,this.isExpanded=e.isExpanded=s.isExpanded,e.row&&!o&&(e.row=s)),n.forEach(r=>{r(s)})},t!==e&&(e.watch=t.watch.bind(t)),e}_cellPrepared(e,t){t.cellElement=ze(R(e)),this.executeAction("onCellPrepared",t)}_rowPrepared(e,t,n){di(e.get(0),"options",t),t.rowElement=ze(e),this.executeAction("onRowPrepared",t)}_columnOptionChanged(e){const{optionNames:t}=e;if(Ce.checkChanges(t,["width","visibleWidth"])){const s=this._columnsController.getVisibleColumns().map(o=>o.visibleWidth||o.width);this.setColumnWidths({widths:s,optionNames:t});return}this._requireReady||this.render()}getCellIndex(e,t){return e.length?e[0].cellIndex:-1}getTableElements(){return this._tableElement||R()}getTableElement(e){return this._tableElement}setTableElement(e,t){this._tableElement=e}_afterRowPrepared(e){}_handleDataChanged(e){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){const e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){const t=this.element(),n=t&&t.children(`.${this.addWidgetPrefix("scroll-container")}`).not(`.${this.addWidgetPrefix("content-fixed")}`);U(e)&&U(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,n&&n.scrollLeft(e.left))}_getContent(e){var t;return(t=this._tableElement)===null||t===void 0?void 0:t.parent()}_removeContent(e){const t=this._getContent(e);t!=null&&t.length&&t.remove()}_wrapTableInScrollContainer(e,t){const n=R("<div>"),s=this.option("scrolling.useNative");return(s===!1||s==="auto"&&!fr)&&n.addClass(this.addWidgetPrefix("scrollable-simulated")),q.on(n,"scroll",()=>{const o=n.scrollLeft();o!==this._scrollLeft&&this.scrollChanged.fire({left:o},this.name)}),n.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix("scroll-container")).append(e).appendTo(this.element()),this.setAria("role","presentation",n),n}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&this.option("renderAsync")===!1}waitAsyncTemplates(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=new ae;if(!(e||this.needWaitAsyncTemplates()))return t.resolve();const s=()=>De.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?t.reject():this._templateDeferreds.size>0?s():t.resolve()}).fail(t.reject);return s(),t.promise()}_updateContent(e,t,n){return this.waitAsyncTemplates().done(()=>{this._removeContent(n),this.setTableElement(e,n),this._wrapTableInScrollContainer(e,n)})}_findContentElement(e){}_getWidths(e){if(!e)return[];const t=[];return e.toArray().forEach(s=>{let o=s.offsetWidth;if(s.getBoundingClientRect){const r=yi(s);r.width>s.offsetWidth-1&&(o=r.width)}t.push(o)}),t}getColumnWidths(e){if((this.option("forceApplyBindings")||ue)(),e=e??this.getTableElement(),e){const t=e.children("tbody:not(.dx-header)").children();for(let n=0;n<t.length;n++){const s=t.eq(n),o=s.hasClass("dx-group-row"),r=s.hasClass(xh),a=s.hasClass("dx-error-row");if(s.get(0).style.display!=="none"&&!s.hasClass("dx-state-invisible")&&(!o&&!r&&!a)){const c=s.children("td");return this._getWidths(c)}}}return[]}getVisibleColumnIndex(e,t){return e}setColumnWidths(e){let{widths:t,optionNames:n}=e;const s=this.getTableElement();if(!(s!=null&&s.length)||!t)return;const o=this.getColumns(),r=this._needToSetCellWidths(),a=s.children("colgroup").children("col");a.toArray().forEach(l=>l.removeAttribute("style")),o.forEach((l,d)=>{if(r&&l.width&&!l.command){const h=Rd(l.visibleWidth||l.width),u=Rd(l.minWidth||h),p=s.children().children(".dx-row").not(`.${xh}`);for(let f=0;f<p.length;f++){const g=this.getVisibleColumnIndex(d,f);if(g>=0){const m=p.eq(f),b=m.hasClass("dx-group-row")?m.find(`td[aria-colindex='${g+1}']:not(.dx-group-cell)`):m.find("td").eq(g);if(b.length){const _=b.get(0);J0(_,l,h),_.style.minWidth=u}}}}const c=Xw(t[d]);U(c)&&Tp(a.eq(d),c)})}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){return e<0?void 0:this._getRowElements().eq(e).children()}_getCellElement(e,t){const n=this.getCellElements(e),s=this._getVisibleColumnIndex(n,e,t);if(!(n!=null&&n.length)||s<0)return;const o=n.eq(s);return o.length>0?o:void 0}_getRowElement(e){const t=this;let n=R();const s=t.getTableElements();if(ie(s,(o,r)=>{n=n.add(t._getRowElements(R(r)).eq(e))}),n.length)return n}getCellElement(e,t){const n=this._getCellElement(e,t);if(n)return ze(n)}getRowElement(e){const t=this._getRowElement(e);let n=[];if(t&&!ze(t).get)for(let s=0;s<t.length;s++)n.push(t[s]);else n=t;return n}_getVisibleColumnIndex(e,t,n){if(Ke(n)){const s=this._columnsController.columnOption(n,"index");return this._columnsController.getVisibleIndex(s)}return n}getColumnElements(){}getColumns(e,t){return this._columnsController.getVisibleColumns(e)}getCell(e,t,n){const s=t||this._getRowElements();let o;if(s.length>0&&e.rowIndex>=0){var r;if(this.option("scrolling.mode")!=="virtual"&&this.option("scrolling.rowRenderingMode")!=="virtual"&&(e.rowIndex=e.rowIndex<s.length?e.rowIndex:s.length-1),o=n||this.getCellElements(e.rowIndex),((r=o)===null||r===void 0?void 0:r.length)>0)return o.eq(o.length>e.columnIndex?e.columnIndex:o.length-1)}}getRowsCount(){const e=this.getTableElement();return e&&e.length===1?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement(),e){const n=(this.option().rowTemplate||this.option("dataRowTemplate"))&&e.find("> tbody.dx-row");return n&&n.length?n:e.find("> tbody > .dx-row, > .dx-row")}return R()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){const t=this.element(),n=this.option("rtlEnabled");t&&t.css({paddingLeft:n?e:"",paddingRight:n?"":e})}isScrollbarVisible(e){const t=this.element(),n=this._tableElement;return t&&n?e?St(n)-Ge(t)>0:rt(n)-st(t)>0:!1}isDisposed(){var e;return(e=this.component)===null||e===void 0?void 0:e._disposed}}const aM="dx-link",Sh=function(i,e,t){const n=R("<div>").addClass(i.addWidgetPrefix("text-content"));i.setAria("role","presentation",n),Zw(i,e,t.column,n);const s=i.option("showColumnLines"),o=i.getController("columns").getHeaderContentAlignment(t.column.alignment);return n[s||o==="right"?"appendTo":"prependTo"](e)};function Zw(i,e,t,n){const s=i._getIndicatorElements(e,!0),o=i._getIndicatorElements(e),r=s&&s.length,a=i._getColumnAlignment(t.alignment),l=`.${i._getIndicatorClassName("sort")}`,d=`.${i._getIndicatorClassName("sortIndex")}`,c=o.filter(l),h=o.children().filter(d);n=n||e.children(`.${i.addWidgetPrefix("text-content")}`),n.toggleClass("dx-text-content-alignment-"+a,r>0).toggleClass("dx-text-content-alignment-"+(a==="left"?"right":"left"),r>0&&t.alignment==="center").toggleClass("dx-sort-indicator",!!c.length).toggleClass("dx-sort-index-indicator",!!h.length).toggleClass("dx-header-filter-indicator",!!o.filter(`.${i._getIndicatorClassName("headerFilter")}`).length)}class lM extends Ql{init(){super.init(),this._headerPanelView=this.getView("headerPanel"),this._headerFilterController=this.getController("headerFilter"),this._dataController=this.getController("data")}_createTable(){const e=super._createTable.apply(this,arguments);return q.on(e,"mousedown selectstart",this.createAction(t=>{const{event:n}=t;n.shiftKey&&n.preventDefault()})),e}_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDefaultTemplate(e){const t=this;return function(n,s){const{caption:o}=e,r=!e.command||o&&e.command!=="expand";e.command==="empty"?t._renderEmptyMessage(n,s):r?Sh(t,n,s).text(o):e.command&&n.html("&nbsp;")}}_renderEmptyMessage(e,t){const n=this._getEmptyHeaderText();if(!n){e.html("&nbsp;");return}const s=Sh(this,e,t);if(n.includes("{0}")){const[r,a]=n.split("{0}"),l=re.format("dxDataGrid-emptyHeaderColumnChooserText"),d=this._columnChooserView,c=R("<a>").text(l).addClass(aM);q.on(c,"click",this.createAction(()=>d.showColumnChooser())),s.append(_e.createTextNode(r)).append(c).append(_e.createTextNode(a))}else s.text(n)}_getEmptyHeaderText(){const e=!!this._columnChooserView.hasHiddenColumns(),t=!!this._headerPanelView.hasGroupedColumns();switch(!0){case(e&&t):return re.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case t:return re.format("dxDataGrid-emptyHeaderWithGroupPanelText");case e:return re.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}}_getHeaderTemplate(e){return e.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(e)}}_processTemplate(e,t){const n=this;let s;const{column:o}=t,r=super._processTemplate(e);return t.rowType==="header"&&r&&o.headerCellTemplate&&!o.command?s={render(a){const l=Sh(n,a.container,a.model);r.render(Y({},a,{container:l}))}}:s=r,s}_handleDataChanged(e){e.changeType==="refresh"&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())}_renderCell(e,t){const n=super._renderCell(e,t);return t.row.rowType==="header"&&(n.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||t.column&&!t.column.type&&n.attr("tabindex",this.option("tabindex")||0)),n}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),t.rowType==="header"&&(t.column.type||this.setAria("role","columnheader",e),t.column&&!t.column.command&&!t.column.isBand&&(e.attr("id",t.column.headerId),this.setAria("label",`${re.format("dxDataGrid-ariaColumn")} ${t.column.caption}`,e)))}_createRow(e){const t=super._createRow.apply(this,arguments);return t.toggleClass("dx-column-lines",this.option("showColumnLines")),e.rowType==="header"&&(t.addClass("dx-header-row"),this._isLegacyKeyboardNavigation()||el("columnHeaders",this,t,"td",this._handleActionKeyDown.bind(this))),t}_processHeaderAction(e,t){}_handleActionKeyDown(e){const{event:t}=e,n=R(t.target);if(this._lastActionElement=t.target,n.is(".dx-header-filter")){const s=this._headerFilterController,o=n.closest("td"),r=this.getColumnIndexByElement(o);r>=0&&s.showHeaderFilterMenu(r,!1)}else{const s=n.closest(".dx-row");this._processHeaderAction(t,s)}t.preventDefault()}_renderCore(){const e=this.element(),t={};if(this._tableElement&&!this._dataController.isLoaded()&&!this._hasRowElements)return;e.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",e);const n=this._updateContent(this._renderTable({change:t}),t);return this.getRowCount()>1&&e.addClass("dx-header-multi-row"),super._renderCore.apply(this,arguments),n}_renderRows(){const e=this;(e._dataController.isLoaded()||e._hasRowElements)&&(super._renderRows.apply(e,arguments),e._hasRowElements=!0)}_renderRow(e,t){const n=this.getRowCount()===1?null:t.row.rowIndex;t.columns=this.getColumns(n),super._renderRow(e,t)}_createCell(e){const{column:t}=e,n=super._createCell.apply(this,arguments);return t.rowspan>1&&e.rowType==="header"&&n.attr("rowSpan",t.rowspan),n}_getRows(){const e=[],t=this.getRowCount();if(this.option("showColumnHeaders"))for(let n=0;n<t;n++)e.push({rowType:"header",rowIndex:n});return e}_getCellTemplate(e){if(e.rowType==="header")return this._getHeaderTemplate(e.column)}_columnOptionChanged(e){const{changeTypes:t}=e,{optionNames:n}=e;if(t.grouping||t.groupExpanding){t.grouping&&(this._isGroupingChanged=!0);return}super._columnOptionChanged(e),(n.width||n.visible)&&this.resizeCompleted.fire()}_isElementVisible(e){return e&&e.visible}_alignCaptionByCenter(e){let t=this._getIndicatorContainer(e,!0);t&&t.length&&(t.filter(".dx-visibility-hidden").remove(),t=this._getIndicatorContainer(e),t.clone().addClass("dx-visibility-hidden").css("float","").insertBefore(e.children(`.${this.addWidgetPrefix("text-content")}`)))}_updateCell(e,t){t.rowType==="header"&&t.column.alignment==="center"&&this._alignCaptionByCenter(e),super._updateCell.apply(this,arguments)}_updateIndicator(e,t,n){const s=super._updateIndicator.apply(this,arguments);return t.alignment==="center"&&this._alignCaptionByCenter(e),Zw(this,e,t),s}_getIndicatorContainer(e,t){const n=super._getIndicatorContainer(e);return t?n:n.filter(":not(.dx-visibility-hidden)")}_isSortableElement(e){return!0}getHeadersRowHeight(){const e=this.getTableElement(),t=e&&e.find(".dx-header-row");return t&&t.toArray().reduce((n,s)=>n+st(s),0)||0}getHeaderElement(e){const t=this.getColumnElements();return t&&t.eq(e)}getColumnElements(e,t){const n=this;let s;const o=n._columnsController,r=n.getRowCount();if(n.option("showColumnHeaders")){if(r>1&&(!U(e)||U(t))){const a=[],l=U(t)?o.getChildrenByBandColumn(t,!0):o.getVisibleColumns();return ie(l,(d,c)=>{const h=U(e)?e:o.getRowIndex(c.index);s=n._getCellElement(h,o.getVisibleIndex(c.index,h)),s&&a.push(s.get(0))}),R(a)}if(!e||e<r)return n.getCellElements(e||0)}}getColumnIndexByElement(e){const t=this.getCellIndex(e),n=e.closest(".dx-row"),{rowIndex:s}=n[0],o=this.getColumns(s)[t];return o?o.index:-1}getVisibleColumnIndex(e,t){const n=this.getColumns()[e];return n?this._columnsController.getVisibleIndex(n.index,t):-1}getColumnWidths(){const e=this.getColumnElements();return e&&e.length?this._getWidths(e):super.getColumnWidths.apply(this,arguments)}allowDragging(e){const t=e&&this._columnsController.getRowIndex(e.index),n=this.getColumns(t);return(this.option("allowColumnReordering")??this._columnsController.isColumnOptionUsed("allowReordering"))&&e.allowReordering&&n.length>1}getBoundingRect(){const e=this,t=e.getColumnElements();return t&&t.length?{top:e.getTableElement().offset().top}:null}getName(){return"headers"}getColumnCount(){const e=this.getColumnElements();return e?e.length:0}isVisible(){return this.option("showColumnHeaders")}optionChanged(e){const t=this;switch(e.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":t._invalidate(!0,!0),e.handled=!0;break;default:super.optionChanged(e)}}getHeight(){return this.getElementHeight()}getContextMenuItems(e){const t=this,{column:n}=e;if(e.row&&(e.row.rowType==="header"||e.row.rowType==="detailAdaptive")){const s=t.option("sorting");if(s&&s.mode!=="none"&&n&&n.allowSorting){const o=function(r){setTimeout(()=>{t._columnsController.changeSortOrder(n.index,r.itemData.value)})};return[{text:s.ascendingText,value:"asc",disabled:n.sortOrder==="asc",icon:"context-menu-sort-asc",onItemClick:o},{text:s.descendingText,value:"desc",disabled:n.sortOrder==="desc",icon:"context-menu-sort-desc",onItemClick:o},{text:s.clearText,value:"none",disabled:!n.sortOrder,icon:"context-menu-sort-none",onItemClick:o}]}}}getRowCount(){return this._columnsController&&this._columnsController.getRowCount()}setRowsOpacity(e,t,n){let s,o;const r=this.getRowCount(),a=this._columnsController.getColumns(),l=a&&a[e],d=l&&l.isBand&&l.index,c=(h,u)=>{h.ownerBand===d&&(o.eq(u).css({opacity:t}),h.isBand&&this.setRowsOpacity(h.index,t,s+1))};if(U(d))for(n=n||0,s=n;s<r;s++)o=this.getCellElements(s),o&&this.getColumns(s).forEach(c)}}const Jw={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:lM}},He=ve({},Yt,Ce,{modules:[]});Jw.views.columnHeadersView;He.registerModule("columnHeaders",Jw);const Qw=["filterValues","filterType","fixed","fixedPosition"],jc=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(Qw),dM={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},cM="dx-command-expand",Q0=Number.MAX_SAFE_INTEGER||9007199254740991,Eo="groupExpand",uM="detailExpand",Eh=/columns\[(\d+)\]\.?/gi,hM={visible:!0,showInColumnChooser:!0},pM={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},fM={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},Jr="group",Qr="columnChooser",e1=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,t1=/^(\d{2}):(\d{2})(:(\d{2}))?$/,eb=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],mM=/^(\d{4})\/(\d{2})\/(\d{2})$/,i1=function(i,e){let t;return Ke(i)&&!e&&(t=_M(i)),t||gM(i)};function Ji(i){return+i||0}function gM(i){const e=n1(i)==="yyyy/MM/dd",t=!yn(i)&&Date.parse(i);if(!t&&e){const n=i.match(mM);if(n){const s=new Date(Ji(n[1]),Ji(n[2]),Ji(n[3]));return s.setFullYear(Ji(n[1])),s.setMonth(Ji(n[2])-1),s.setDate(Ji(n[3])),s}}return Wt(t)?new Date(t):i}function _M(i){let e=i.match(e1);if(!e)return e=i.match(t1),e?new Date(0,0,0,Ji(e[1]),Ji(e[2]),Ji(e[4])):void 0;const t=Ji(e[1]),n=--e[3],s=e[5];let o=0,r=0;const a=u=>(t<100&&u.setFullYear(t),u);o=Ji(e[14]),r=Ji(e[16]),e[13]==="-"&&(o=-o,r=-r);const l=Ji(e[6])-o,d=Ji(e[8])-r,c=Ji(e[10]),h=function(u){return u=u||"",Ji(u)*Math.pow(10,3-u.length)}(e[11]);return e[12]?a(new Date(Date.UTC(t,n,s,l,d,c,h))):a(new Date(t,n,s,l,d,c,h))}const bM=function(i,e){let t=i.match(e1),n="";if(!t)return t=i.match(t1),t?t[3]?"HH:mm:ss":"HH:mm":void 0;for(let s=1;s<eb.length;s++)t[s]&&(n+=eb[s]||t[s]);return t[12]==="Z"&&(n+="'Z'"),t[14]&&(t[15]?n+="xxx":t[16]?n+="xx":n+="x"),n},vM=function(i){return typeof i=="number"?new Date(i):i1(i,!$t().forceIsoDateParsing)},yM=function(i,e){return e?yn(i)?e==="number"?i&&i.valueOf?i.valueOf():null:nw(e,ta)(i):null:i},n1=function(i){if(typeof i=="number")return"number";if(Ke(i)){let e;return $t().forceIsoDateParsing&&(e=bM(i)),e||(i.indexOf(":")>=0?"yyyy/MM/dd HH:mm:ss":"yyyy/MM/dd")}else if(i)return null},vi={dateParser:i1,deserializeDate:vM,serializeDate:yM,getDateSerializationFormat:n1},s1=function(i){i.filterOperations=i.defaultFilterOperations};let CM=1;const Tu=function(i,e,t,n){let s={};if(e){Ke(e)&&(e={dataField:e}),i.setName(e);let o={};if(e.command)o=In(s,e);else{s=i.getCommonSettings(e),t&&t.name&&t.dataField&&(e=Y({},e,{dataField:t.dataField}));const r=i._createCalculatedColumnOptions(e,n);e.type||(o={headerId:"dx-col-"+CM++}),o=In(o,hM),In(o,s),In(o,r),In(o,e),In(o,{selector:null})}return e.filterOperations===e.defaultFilterOperations&&s1(o),o}},Yo=function(i,e,t,n){let s=[];return e&&ie(e,(o,r)=>{const a=(n??0)+s.length,l=i._columnsUserState&&$m(r,i._columnsUserState[a])&&i._columnsUserState[a],d=Tu(i,r,l,t);d&&(t&&(d.ownerBand=t),s.push(d),d.columns&&(s=s.concat(Yo(i,d.columns,d,s.length)),delete d.columns,d.hasColumns=!0))}),s},Qo=function(i,e){const t=[];let n=e[i];for(;n;)t.unshift(n),i=n.index,n=e[i];return t},o1=function(i,e,t){let n=[];const s=e[i];if(s)for(let o=0;o<s.length;o++){const r=s[o];(!U(r.groupIndex)||r.showWhenGrouped)&&(n.push(r),t&&r.isBand&&(n=n.concat(o1(r.index,e,t))))}return n},xM=function(i,e){let t,n;const s=i.getBandColumnsCache(),o=function(r){const a=t?t.index:void 0;return r.ownerBand===a};if(s.isPlain)t=i._columns[e[0]];else{n=i._columns.filter(o);for(let r=0;r<e.length;r++)t=n[e[r]],t&&(n=i._columns.filter(o))}return t},wM=function(i,e){let t=[],n;const s=i.getBandColumnsCache(),o=function(r){return r.ownerBand===e.ownerBand};if(s.isPlain){const r=i._columns.indexOf(e);r>=0&&(t=[`columns[${r}]`])}else for(n=i._columns.filter(o);n.length&&n.indexOf(e)!==-1;)t.unshift(`columns[${n.indexOf(e)}]`),e=s.columnParentByIndex[e.index],n=e?i._columns.filter(o):[];return t.join(".")},r1=function(i,e){let t=0;const n=i.getChildrenByBandColumn(e,!0);return ie(n,(s,o)=>{o.isBand?(o.colspan=o.colspan||r1(i,o.index),t+=o.colspan||1):t+=1}),t},SM=function(i,e,t){let n;for(let s=0;s<e.length;s++){const o=e[s];(o.visible||o.command)&&(o.isBand&&(o.colspan=o.colspan||r1(i,o.index)),(!o.isBand||!o.colspan)&&(n=i.getRowCount(),!o.command&&(!U(o.groupIndex)||o.showWhenGrouped)&&(n-=Qo(o.index,t.columnParentByIndex).length),n>1&&(o.rowspan=n)))}},Ih=function(i){let e=kn(i);return e!=="string"&&e!=="boolean"&&e!=="number"&&e!=="date"&&e!=="object"&&(e=void 0),e},tb=function(i,e){switch(i){case"date":case"datetime":return vi.getDateSerializationFormat(e);case"number":if(Ke(e))return"string";if(Wt(e))return null}},ib=function(i,e){i.deserializeValue||(Ce.isDateType(e)&&(i.deserializeValue=function(t){return vi.deserializeDate(t)},i.serializeValue=function(t){return Ke(t)?t:vi.serializeDate(t,this.serializationFormat)}),e==="number"&&(i.deserializeValue=function(t){const n=parseFloat(t);return isNaN(n)?t:n},i.serializeValue=function(t,n){return n==="filter"?t:U(t)&&this.serializationFormat==="string"?t.toString():t}))},EM=function(i,e){switch(i){case"number":return"right";case"boolean":return"center";default:return Po(e)}},IM=function(i){return i.value===!0?this.trueText||"true":i.value===!1?this.falseText||"false":i.valueText||""},nb=function(i){if(i==="boolean")return IM},TM=function(i,e){const t=i._getFirstItems(e);let n;const s={},o=[];for(let r=0;r<t.length;r++)if(t[r])for(n in t[r])(!Ee(t[r][n])||Qi.isWrapped(t[r][n]))&&(s[n]=!0);for(n in s)if(n.indexOf("__")!==0){const r=Tu(i,n);o.push(r)}return o},a1=function(i){ie(i._columns,(e,t)=>{t.index=e}),ie(i._columns,(e,t)=>{We(t.ownerBand)&&(t.ownerBand=t.ownerBand.index)}),ie(i._commandColumns,(e,t)=>{t.index=-(e+1)})},l1=function(i,e){vl(i._columns,"groupIndex",e,t=>{const{grouped:n}=t;return delete t.grouped,n})},DM=function(i,e){ie(i._columns,(t,n)=>{U(n.sortIndex)&&!Kc(n.sortOrder)&&delete n.sortIndex}),vl(i._columns,"sortIndex",e,t=>!U(t.groupIndex)&&Kc(t.sortOrder))},AM=function(i,e){let t;const n=[],s=i.getBandColumnsCache(),o=[],r=i._columns.filter(a=>!a.command);for(let a=0;a<r.length;a++)t=r[a],Qo(a,s.columnParentByIndex).length?o.push(t):n.push(t);vl(o,"visibleIndex",e),vl(n,"visibleIndex",e)},Th=function(i,e,t){const n=We(e)?e.rowIndex:null,s=t===Jr?i.getGroupColumns():t===Qr?i.getChooserColumns():i.getVisibleColumns(n);let o;return e=We(e)?e.columnIndex:e,o=s[e],o&&o.type===Eo&&(o=i._columns.filter(r=>o.type===r.type)[0]||o),o&&U(o.index)?o.index:-1},kM=function(i,e,t){const n=i.getGroupColumns();let s;if(t>=0)for(s=0;s<n.length;s++)n[s].groupIndex>=t&&n[s].groupIndex++;else for(t=0,s=0;s<n.length;s++)t=Math.max(t,n[s].groupIndex+1);return t};function $m(i,e){return i&&e&&e.name===(i.name||i.dataField)&&(e.dataField===i.dataField||i.name)}const sb=function(i){const e=i._columnsUserState,t=i._ignoreColumnOptionNames||[],n=i._columns,s={};let o=[],r=!0;const a=[];let l,d,c;function h(p,f){if(f)for(let g=0;g<jc.length;g++){const m=jc[g];t.includes(m)||(m==="dataType"?p[m]=p[m]||f[m]:Qw.includes(m)?m in f&&(p[m]=f[m]):(m==="selectedFilterOperation"&&f[m]&&(p.defaultSelectedFilterOperation=p[m]||null),p[m]=f[m]))}}function u(p,f){const g=f.name||f.dataField;let m=s[g]||0;for(let b=0;b<p.length;b++)if($m(f,p[b]))if(m)m--;else return s[g]=s[g]||0,s[g]++,b;return-1}if(e){for(c=0;c<n.length;c++)d=u(e,n[c]),r=r&&d>=0,a.push(d);for(c=0;c<n.length;c++)l=n[c],d=a[c],(i._hasUserState||r)&&h(l,e[d]),d>=0&&U(e[d].initialIndex)?o[d]=l:o.push(l);let p=!1;for(c=0;c<e.length;c++){const f=e[c];f.added&&u(n,f)<0&&(l=Tu(i,f.added),h(l,f),o.push(l),f.added.columns&&(p=!0))}p&&(a1(i),o=Yo(i,o)),ea(i,o)}},Uo=function(i,e){a1(i),l1(i,e),DM(i,e),c1(i),AM(i,e)},Du=function(i){i.resetColumnsCache()};function ea(i,e){i._previousColumns=i._columns,i._columns=e,Du(i),i.updateColumnDataTypes()}const ls=function(i,e,t,n){const s=i._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:n};t=t||"all",t=t.split(".")[0];const{changeTypes:o}=s;e&&!o[e]&&(o[e]=!0,o.length++);const{optionNames:r}=s;t&&!r[t]&&(r[t]=!0,r.length++),(n===void 0||n!==s.columnIndex)&&(U(n)&&(s.columnIndices??(s.columnIndices=[]),U(s.columnIndex)&&s.columnIndices.push(s.columnIndex),s.columnIndices.push(n)),delete s.columnIndex),i._columnChanges=s,Du(i)},Ra=function(i){const e=i.option("onColumnsChanging"),t=i._columnChanges,n=["dataField","lookup","dataType","columns"];i.isInitialized()&&!i._updateLockCount&&t&&(e&&(i._updateLockCount++,e(Y({component:i.component},t)),i._updateLockCount--),i._columnChanges=void 0,s=t.optionNames,s&&n.some(o=>s[o])?(i._reinitAfterLookupChanges=t==null?void 0:t.optionNames.lookup,i.reinit(),i._reinitAfterLookupChanges=void 0):i.columnsChanged.fire(t));var s},OM=function(i,e,t,n){const s=n>=0;if(t>=0)s||(e.lastSortOrder=e.sortOrder);else{const o=i.option("sorting.mode");let r=e.lastSortOrder;o==="single"&&i._columns.some(l=>l!==e&&U(l.sortIndex))&&(r=void 0),e.sortOrder=r}},RM=function(i,e){const{value:t}=e,{optionName:n}=e,{prevValue:s}=e,{fullOptionName:o}=e,r=`${o}.${n}`;!dM[n]&&i._skipProcessingColumnsChange!==r&&(i._skipProcessingColumnsChange=r,i.component._notifyOptionChanged(r,t,s),i._skipProcessingColumnsChange=!1)},Dh=function(i,e,t,n,s){const o=Nt(t),r=e.index;let a,l,d;if(arguments.length===3)return o(e,{functionsAsIs:!0});const c=o(e,{functionsAsIs:!0});if(!zt(c,n,{maxDepth:5})){t==="groupIndex"||t==="calculateGroupValue"?(l="grouping",OM(i,e,n,c)):t==="sortIndex"||t==="sortOrder"||t==="calculateSortValue"?l="sorting":l="columns";const h=Uf(t);h(e,n,{functionsAsIs:!0});const u=wM(i,e);fM[t]&&(Uo(i,e),n=o(e)),(t==="name"||t==="allowEditing")&&i._checkColumns(),!U(c)&&!U(n)&&t.indexOf("buffer")!==0&&(s=!0),s?Du(i):(!jc.includes(t)&&t!=="visibleWidth"&&(a=i.option("columns"),d=i.getColumnByPath(u,a),Ke(d)&&(d=a[r]={dataField:d}),d&&$m(d,e)&&h(d,n,{functionsAsIs:!0})),ls(i,l,t,r)),u&&RM(i,{fullOptionName:u,optionName:t,value:n,prevValue:c})}};function Kc(i){return i==="asc"||i==="desc"}const MM=function(i){const e=i._getExpandColumnOptions();i.addCommandColumn(e)},PM=function(i,e){if(!this.dataField)return;const t=this.dataField.split("."),n=t.length-1;this.serializeValue&&(e=this.serializeValue(e));for(let s=0;s<n;s++){const o=t[s];i=i[o]=i[o]||{}}i[t[n]]=e},d1=function(i,e,t){const n=[];return e=e||0,i[e]&&ie(i[e],(s,o)=>{(o.ownerBand===t||o.type===Eo)&&(!o.isBand||!o.colspan?(!o.command||e<1)&&n.push(o):n.push.apply(n,d1(i,e+1,o.index)))}),n},BM=function(i){let e=1;const t=i.getBandColumnsCache(),{columnParentByIndex:n}=t;return i._columns.forEach(s=>{const o=Qo(s.index,n),r=o.filter(a=>!a.visible);s.visible&&!r.length&&(e=Math.max(e,o.length+1))}),e},mf=(i,e)=>!!i._columns.filter(n=>n.type===e.type).length,ob=function(i,e){const t=i.option("rtlEnabled");return e.command&&!mf(i,e)||!e.fixedPosition?t?"right":"left":e.fixedPosition},rb=function(i,e,t,n){let s;const o=this.getRowCount();let r=i[n]&&i[n].rowspan,a=e.filter(l=>l.type===t);return i.forEach((l,d)=>{l.type===t&&(s=d,r=i[d+1]?i[d+1].rowspan:o)}),r>1&&(a=Ii(a,l=>Y({},l,{rowspan:r}))),a.unshift.apply(a,U(s)?[s,1]:[n,0]),i.splice.apply(i,a),r||1},FM=function(i){let e;for(e=0;i>1;e++)i/=10;return e},ab=function(i,e){let t=i?i.toString():"0";for(;t.length<e;)t=`0${t}`;return t},lb=(i,e,t,n)=>{let s,o,r=e.slice().map(h=>Y({},h));const a=i._isColumnFixing();let l=t.slice().map(h=>Y({fixed:a},h));const d=h=>t.reduce((u,p,f)=>{const g=n&&h.type===Eo?"expand":h.type;return p.type===g||p.command===h.command?f:u},-1),c=h=>h.command!==t[o].command;for(let h=0;h<e.length;h++)if(s=e[h],o=s&&(s.type||s.command)?d(s):-1,o>=0)if(n)r[h]=Y({fixed:a},t[o],s),s.type!==Eo&&(l=l.filter(c));else{const u={visibleIndex:s.visibleIndex,index:s.index,headerId:s.headerId,allowFixing:s.groupIndex===0,allowReordering:s.groupIndex===0,groupIndex:s.groupIndex};r[h]=Y({},s,t[o],s.type===Eo&&u)}return e.length&&n&&l.length&&(r=r.concat(l)),r},db=(i,e)=>U(e.fixed)||!e.type?e.fixed:i._isColumnFixing(),VM=i=>{i.forEach(e=>{U(e.ownerBand)&&(e.ownerBand=i[e.ownerBand])})},c1=i=>{i._bandColumnsCache=void 0},cb=(i,e)=>{const t=Ke(e)&&e.substr(0,e.indexOf(":"));let n;if(e!==void 0)return t&&(e=e.substr(t.length+1)),t?n=i.filter(s=>`${s[t]}`===e)[0]:["index","name","dataField","caption"].some(s=>(n=i.filter(o=>o[s]===e)[0],!!n)),n},NM=(i,e)=>{if(e!=="asc"&&e!=="desc")return i;const t=e==="asc"?1:-1;return i.sort((n,s)=>{const o=n.caption||"",r=s.caption||"";return t*o.localeCompare(r)}),i},LM=function(i,e){const t=Gt.parse(i);if(Wt(t)){const n=Gt.format(t,e),s=Gt.format(t,"decimal");if(n===i||s===i)return t}};class $M extends Yt.Controller{init(e){this._dataController=this.getController("data"),this._focusController=this.getController("focus"),this._stateStoringController=this.getController("stateStoring");const t=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!t,this._isColumnsFromOptions?(ea(this,t?Yo(this,t):[]),sb(this)):ea(this,this._columnsUserState?Yo(this,this._columnsUserState):this._columns),MM(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):Uo(this),this._checkColumns()}_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:cM,allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){let t,n=[];const s=function(o,r){if(!o||!r)return o;for(let a=0;a<o.length;a++){const l=s(o[a].items||o[a].collapsedItems,r-1);if(l&&l.length)return l}};return e&&e.items().length>0&&(t=Ce.normalizeSortingInfo(e.group()).length,n=s(e.items(),t)||[]),n}_endUpdateCore(){!this._skipProcessingColumnsChange&&Ra(this)}callbackNames(){return["columnsChanged"]}getColumnByPath(e,t){const n=this;let s;const o=[];return e.replace(Eh,(r,a)=>(o.push(parseInt(a)),"")),o.length&&(t?s=o.reduce((r,a)=>r&&r.columns&&r.columns[a],{columns:t}):s=xM(n,o)),s}optionChanged(e){let t;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value!==e.previousValue&&!this.option("columns")&&(!Array.isArray(e.value)||!Array.isArray(e.previousValue))&&(this._columns=[]);break;case"columns":t=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),t=!0)),t&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":{e.handled=!0;const n=e.fullName==="columnWidth"&&["width"];this.reinit(n);break}case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){let t={};const n=this.getColumnByPath(e.fullName),s=e.fullName.replace(Eh,"");n&&(s?t[s]=e.value:t=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(n.index,t),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){const{component:t}=this;e.fullName.replace(Eh,"")==="width"&&t._updateLockCount&&(t._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(e,t,n){const s=this,o=e&&e.isLoaded();if(s._dataSource=e,!s._dataSourceApplied||s._dataSourceColumnsCount===0||t||s.option("regenerateColumnsByVisibleItems")){if(o){if(!s._isColumnsFromOptions){const r=TM(s,e);r.length&&(ea(s,r),s._dataSourceColumnsCount=s._columns.length,sb(s))}return s.updateColumns(e,t,n)}s._dataSourceApplied=!1,Uo(s)}else if(o&&!s.isAllDataTypesDefined(!0)&&s.updateColumnDataTypes(e))return ls(s,"columns"),Ra(s),new ae().reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,c1(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){const t=(!e||!e.type)&&this.option("commonColumnSettings")||{},n=this.option("grouping")??{},s=this.option("groupPanel")??{};return Y({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:n.autoExpandAll,allowCollapsing:n.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||n.contextMenuEnabled},t)}isColumnOptionUsed(e){for(let t=0;t<this._columns.length;t++)if(this._columns[t][e])return!0}isAllDataTypesDefined(e){const t=this._columns;if(!t.length)return!1;for(let n=0;n<t.length;n++)if(!(!t[n].dataField&&t[n].calculateCellValue===t[n].defaultCalculateCellValue)&&(!t[n].dataType||e&&t[n].deserializeValue&&t[n].serializationFormat===void 0))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){const e=[];return ie(this._columns,function(){const t=this;U(t.groupIndex)&&(e[t.groupIndex]=t)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=U(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,t){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=U(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{const t=Y(!0,{},e);return U(t.dataField)||(t.dataField=t.name),t.filterOperations=e.filterOperations!==e.defaultFilterOperations?t.filterOperations:null,t})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){const e=this,t=[],n=e.getRowCount(),s=e._isColumnFixing(),o={command:"transparent"};let r=0,a,l,d;if(s)for(let c=0;c<=n;c++){a=0,d=null,l=null;const h=e.getVisibleColumns(c,!0);for(let u=0;u<h.length;u++){const p=h[u-1],f=h[u];f.fixed?p&&p.fixed&&ob(e,p)!==ob(e,f)?U(l)||(l=u):d=f.fixedPosition:(c===0&&(f.isBand&&f.colspan?r+=f.colspan:r++),a++,U(l)||(l=u))}if(c===0&&(a===0||a>=h.length))return[];U(l)||(l=d==="right"?0:h.length),t[c]=h.slice(0),o.colspan||(o.colspan=r),t[c].splice(l,a,o)}return t.map(c=>c.map(h=>{const u=ve({},h);return u.headerId&&(u.headerId+="-fixed"),u}))}_isColumnFixing(){let e=this.option("columnFixing.enabled");return!e&&ie(this._columns,(t,n)=>{if(n.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){let e=this._getExpandColumnsCore(),t;const n=e.filter(a=>a.groupIndex===0)[0],s=n&&n.fixed,o=this._isColumnFixing(),r=this.option("rtlEnabled");return e.length&&(t=this.columnOption("command:expand")),e=Ii(e,a=>Y({},a,{visibleWidth:null,minWidth:null,cellTemplate:U(a.groupIndex)?null:a.cellTemplate,headerCellTemplate:null,fixed:!U(a.groupIndex)||!s?o:!0,fixedPosition:r?"right":"left"},t,{index:a.index,type:a.type||Eo})),e}getBandColumnsCache(){if(!this._bandColumnsCache){const e=this._columns,t={},n={};let s=!0;e.forEach(o=>{const{ownerBand:r}=o;let a=We(r)?r.index:r;const l=e[a];o.hasColumns&&(s=!1),o.colspan&&(o.colspan=void 0),o.rowspan&&(o.rowspan=void 0),l?n[o.index]=l:a=-1,t[a]=t[a]||[],t[a].push(o)}),this._bandColumnsCache={isPlain:s,columnChildrenByIndex:t,columnParentByIndex:n}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return U(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(t=>{const n=this._isColumnVisible(t),s=this._isColumnInGroupPanel(t),o=!!t.command;return n&&!s&&!o})}_compileVisibleColumnsCore(){const e=this.getBandColumnsCache(),t=lb(this,this._columns,this._commandColumns,!0);SM(this,t,e);const n=this._getIndexedColumns(t),s=this._getVisibleColumnsFromIndexed(n);return!this.hasVisibleDataColumns()&&this._columns.length&&s[s.length-1].push({command:"empty"}),s}_getIndexedColumns(e){const t=this.option("rtlEnabled"),n=this.getRowCount(),s=FM(e.length),o=this.getBandColumnsCache(),r=[],a=[];for(let l=0;l<n;l+=1)a[l]=[{}],r[l]=[{},{},{}];return e.forEach(l=>{let{visibleIndex:d}=l,c;const h=Qo(l.index,o.columnParentByIndex),u=this._isColumnVisible(l),p=this._isColumnInGroupPanel(l);if(u&&!p){const m=h.length;if(d<0)d=-d,c=a[m];else{var f,g;if(l.fixed=((f=h[0])===null||f===void 0?void 0:f.fixed)??l.fixed,l.fixedPosition=((g=h[0])===null||g===void 0?void 0:g.fixedPosition)??l.fixedPosition,l.fixed){const b=!!l.command&&!mf(this,l);let _=l.fixedPosition==="right";t&&!b&&(_=!_),c=_?r[m][2]:r[m][0]}else c=r[m][1]}if(h.length){d=ab(d,s);for(let b=h.length-1;b>=0;b-=1)d=ab(h[b].visibleIndex,s)+d}c[d]=c[d]||[],c[d].push(l)}}),{positiveIndexedColumns:r,negativeIndexedColumns:a}}_getVisibleColumnsFromIndexed(e){let{positiveIndexedColumns:t,negativeIndexedColumns:n}=e;const s=[],o=this.getRowCount(),r=lb(this,this.getExpandColumns(),this._columns);let a=0,l=0;for(let d=0;d<o;d+=1){s.push([]),Sp(n[d],(u,p)=>{s[d].unshift.apply(s[d],p)});const c=s[d].length;t[d].forEach(u=>{Sp(u,(p,f)=>{s[d].push.apply(s[d],f)})}),l<=d&&(l+=rb.call(this,s[d],r,uM,c)),a<=d&&(a+=rb.call(this,s[d],r,Eo,c))}return s.push(d1(s)),s}getInvisibleColumns(e,t){const n=this;let s=[],o;return e=e||n._columns,ie(e,(r,a)=>{if(a.ownerBand===t){if(a.isBand){a.visible?o=n.getInvisibleColumns(n.getChildrenByBandColumn(a.index),a.index):o=n.getChildrenByBandColumn(a.index),o.length&&(s.push(a),s=s.concat(o));return}a.visible||s.push(a)}}),s}getChooserColumns(e){const n=(e?this.getColumns():this.getInvisibleColumns()).filter(o=>o.showInColumnChooser),s=this.option("columnChooser.sortOrder");return NM(n,s)}allowMoveColumn(e,t,n,s){const o=Th(this,e,n),r=this._columns[o];return r&&(r.allowReordering||r.allowGrouping||r.allowHiding)?n===s?n===Qr?!1:(e=We(e)?e.columnIndex:e,t=We(t)?t.columnIndex:t,e!==t&&e+1!==t):n===Jr&&s!==Qr||s===Jr?r&&r.allowGrouping:n===Qr||s===Qr?r&&r.allowHiding:!0:!1}moveColumn(e,t,n,s){const o=this,r={};let a;const l=Th(o,e,n),d=Th(o,t,s);let c;if(l>=0){const h=o._columns[l];if(t=We(t)?t.columnIndex:t,c=d>=0?o._columns[d].groupIndex:-1,U(h.groupIndex)&&n===Jr&&(c>h.groupIndex&&c--,s!==Jr?r.groupIndex=void 0:(a=h.groupIndex,delete h.groupIndex,l1(o))),s===Jr)r.groupIndex=kM(o,h,c),h.groupIndex=a;else if(t>=0){const p=o._columns[d];!p||h.ownerBand!==p.ownerBand||db(o,h)^db(o,p)?r.visibleIndex=Q0:r.visibleIndex=p.visibleIndex}const u=s!==Qr;h.visible!==u&&(r.visible=u),o.columnOption(h.index,r)}}changeSortOrder(e,t){const n=this,s={},o=n.option("sorting"),r=o&&o.mode,a=r==="single"||!t,l=r==="single"||r==="multiple",d=n._columns[e];l&&d&&d.allowSorting&&(a&&!U(d.groupIndex)&&ie(n._columns,function(c){c!==e&&this.sortOrder&&(U(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),Kc(t)?d.sortOrder!==t&&(s.sortOrder=t):t==="none"?d.sortOrder&&(s.sortIndex=void 0,s.sortOrder=void 0):function(c){if(t==="ctrl"){if(!("sortOrder"in c&&"sortIndex"in c))return!1;s.sortOrder=void 0,s.sortIndex=void 0}else U(c.groupIndex)||U(c.sortIndex)?s.sortOrder=c.sortOrder==="desc"?"asc":"desc":s.sortOrder="asc";return!0}(d)),n.columnOption(d.index,s)}getSortDataSourceParameters(e){const t=[],n=[];return ie(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&U(this.sortIndex)&&!U(this.groupIndex)&&(t[this.sortIndex]=this)}),ie(t,function(){const s=this&&this.sortOrder;if(Kc(s)){const o={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:this.sortOrder==="desc"};this.sortingMethod&&(o.compare=this.sortingMethod.bind(this)),n.push(o)}}),n.length>0?n:null}getGroupDataSourceParameters(e){const t=[];return ie(this.getGroupColumns(),function(){const n=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(n){const s={selector:n,desc:this.sortOrder==="desc",isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(s.compare=this.sortingMethod.bind(this)),t.push(s)}}),t.length>0?t:null}refresh(e){const t=[];return ie(this._columns,function(){const{lookup:n}=this;if(n&&!this.calculateDisplayValue){if(e&&n.valueMap)return;n.update&&t.push(n.update())}}),De.apply(R,t).done(Du.bind(null,this))}_updateColumnOptions(e,t){var n,s;const o=this._reinitAfterLookupChanges&&((n=this._previousColumns)===null||n===void 0?void 0:n[t]);e.selector=e.selector??(l=>e.calculateCellValue(l)),e.selector.columnIndex=t,e.selector.originalCallback=o?((s=this._previousColumns[t].selector)===null||s===void 0?void 0:s.originalCallback)??e.selector:e.selector,ie(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(l,d)=>{const c=e[d];if(Ee(c))if(c.originalCallback)e[d].context.column=e;else{const h={column:e};e[d]=function(u){return c.call(h.column,u)},e[d].originalCallback=c,e[d].columnIndex=t,e[d].context=h}}),Ke(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=Nt(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),ib(e,e.dataType);const{lookup:r}=e;r&&ib(r,r.dataType);const a=r?r.dataType:e.dataType;a&&(e.alignment=e.alignment||EM(a,this.option("rtlEnabled")),e.format=e.format||Ce.getFormatByDataType(a),e.customizeText=e.customizeText||nb(a),e.defaultFilterOperations=e.defaultFilterOperations||!r&&pM[a]||[],U(e.filterOperations)||s1(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=U(e.showEditorAlways)?e.showEditorAlways:a==="boolean"&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){const t=this,n=t.option("dateSerializationFormat"),s=t._getFirstItems(e);let o=!1;return ie(t._columns,(r,a)=>{let l,d,c,h,u;const{lookup:p}=a;if(Ce.isDateType(a.dataType)&&a.serializationFormat===void 0&&(a.serializationFormat=n),p&&Ce.isDateType(p.dataType)&&a.serializationFormat===void 0&&(p.serializationFormat=n),a.calculateCellValue&&s.length){if(!a.dataType||p&&!p.dataType){for(l=0;l<s.length;l++)d=a.calculateCellValue(s[l]),a.dataType||(u=Ih(d),c=c||u,c&&u&&c!==u&&(c="string")),p&&!p.dataType&&(u=Ih(Ce.getDisplayValue(a,d,s[l])),h=h||u,h&&u&&h!==u&&(h="string"));(c||h)&&(c&&(a.dataType=c),p&&h&&(p.dataType=h),o=!0)}if(a.serializationFormat===void 0||p&&p.serializationFormat===void 0)for(l=0;l<s.length;l++)d=a.calculateCellValue(s[l],!0),a.serializationFormat===void 0&&(a.serializationFormat=tb(a.dataType,d)),p&&p.serializationFormat===void 0&&(p.serializationFormat=tb(p.dataType,p.calculateCellValue(d,!0)))}t._updateColumnOptions(a,r)}),o}_customizeColumns(e){const t=this,n=t.option("customizeColumns");n&&(e.some(o=>We(o.ownerBand))&&Uo(t),n(e),ea(t,Yo(t,e)))}updateColumns(e,t,n){if(t||this.updateSortingGrouping(e),!e||e.isLoaded()){const s=e?e.sort()||[]:this.getSortDataSourceParameters(),o=e?e.group()||[]:this.getGroupDataSourceParameters(),r=e==null?void 0:e.lastLoadOptions().filter;n||this._customizeColumns(this._columns),Uo(this);const a=this._columns;return De(this.refresh(!0)).always(()=>{this._columns===a&&(this._updateChanges(e,{sorting:s,grouping:o,filtering:r}),Ra(this))})}}_updateChanges(e,t){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),Ce.equalSortParameters(t.sorting,this.getSortDataSourceParameters())||ls(this,"sorting"),Ce.equalSortParameters(t.grouping,this.getGroupDataSourceParameters())||ls(this,"grouping"),this._dataController&&!Ce.equalFilterParameters(t.filtering,this._dataController.getCombinedFilter())&&ls(this,"filtering"),ls(this,"columns")}updateSortingGrouping(e,t){const n=this;let s,o;const r=function(a,l,d){ie(a,(c,h)=>{if(delete h[d],l)for(let u=0;u<l.length;u++){const{selector:p}=l[u],{isExpanded:f}=l[u];if(p===h.dataField||p===h.name||p===h.displayField||p===h.selector||p===h.calculateCellValue||p===h.calculateGroupValue||p===h.calculateDisplayValue){t?h.sortOrder="sortOrder"in h?h.sortOrder:l[u].desc?"desc":"asc":h.sortOrder=h.sortOrder||(l[u].desc?"desc":"asc"),f!==void 0&&(h.autoExpandGroup=f),h[d]=u;break}}})};if(e){s=Ce.normalizeSortingInfo(e.sort());const a=Ce.normalizeSortingInfo(e.group()),l=n.getGroupDataSourceParameters(),d=n.getSortDataSourceParameters(),c=!Ce.equalSortParameters(a,l,!0),h=!c&&!Ce.equalSortParameters(a,l);n._columns.length||(ie(a,(u,p)=>{n._columns.push(p.selector)}),ie(s,(u,p)=>{Ee(p.selector)||n._columns.push(p.selector)}),ea(n,Yo(n,n._columns))),(t||!l&&!n._hasUserState)&&(c||h)&&(r(n._columns,a,"groupIndex"),t&&(c&&ls(n,"grouping"),h&&ls(n,"groupExpanding"),o=!0)),(t||!d&&!n._hasUserState)&&!Ce.equalSortParameters(s,d)&&(r(n._columns,s,"sortIndex"),t&&(ls(n,"sorting"),o=!0)),o&&Ra(n)}}updateFilter(e,t,n,s){const o=this;if(!Array.isArray(e))return e;if(e=Y([],e),n=e.columnIndex!==void 0?e.columnIndex:n,s=e.filterValue!==void 0?e.filterValue:s,Ke(e[0])&&e[0]!=="!"){const r=o.columnOption(e[0]);t?$t().forceIsoDateParsing&&r&&r.serializeValue&&e.length>1&&(e[e.length-1]=r.serializeValue(e[e.length-1],"filter")):r&&r.selector&&(e[0]=r.selector,e[0].columnIndex=r.index)}else Ee(e[0])&&(e[0].columnIndex=n,e[0].filterValue=s,e[0].selectedFilterOperation=e.selectedFilterOperation);for(let r=0;r<e.length;r++)e[r]=o.updateFilter(e[r],t,n,s);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,t,n,s){const o=this,r=o._columns.concat(o._commandColumns),a=cb(r,e);if(a){if(arguments.length===1)return Y({},a);if(Ke(t)){if(arguments.length===2)return Dh(o,a,t);Dh(o,a,t,n,s)}else We(t)&&ie(t,(l,d)=>{Dh(o,a,l,d,s)});Ra(o)}}clearSorting(){const e=this,t=this.columnCount();e.beginUpdate();for(let n=0;n<t;n++)e.columnOption(n,"sortOrder",void 0),delete cb(e._columns,n).sortOrder;e.endUpdate()}clearGrouping(){const e=this,t=this.columnCount();e.beginUpdate();for(let n=0;n<t;n++)e.columnOption(n,"groupIndex",void 0);e.endUpdate()}getVisibleIndex(e,t){const n=this.getVisibleColumns(t);for(let s=n.length-1;s>=0;s--)if(n[s].index===e)return s;return-1}getVisibleIndexByColumn(e,t){const n=this.getVisibleColumns(t),s=n.filter(o=>o.index===e.index&&o.command===e.command)[0];return n.indexOf(s)}getVisibleColumnIndex(e,t){const n=this.columnOption(e,"index");return this.getVisibleIndex(n,t)}addColumn(e){const t=this;let n=Tu(t,e);const s=t._columns.length;t._columns.push(n),n.isBand&&(t._columns=Yo(t,t._columns),n=t._columns[s]),n.added=e,Uo(t,n),t.updateColumns(t._dataSource),t._checkColumns()}deleteColumn(e){const t=this,n=t.columnOption(e);if(n&&n.index>=0){if(VM(t._columns),t._columns.splice(n.index,1),n.isBand){const s=t.getChildrenByBandColumn(n.index).map(o=>o.index);t._columns=t._columns.filter(o=>s.indexOf(o.index)<0)}Uo(t),t.updateColumns(t._dataSource)}}addCommandColumn(e){let t=this._commandColumns.filter(n=>n.command===e.command)[0];t||(t=e,this._commandColumns.push(t))}getUserState(){const e=this._columns,t=[];let n;function s(o,r){e[n][r]!==void 0&&(t[n][r]=e[n][r])}for(n=0;n<e.length;n++)t[n]={},ie(jc,s);return t}setName(e){e.name=e.name||e.dataField||e.type}setUserState(e){const t=this,n=t._dataSource;let s=t.option("stateStoring.ignoreColumnOptionNames");if(e==null||e.forEach(this.setName),!s){s=[];const o=t.getCommonSettings();t.option("columnChooser.enabled")||s.push("visible"),t.option("sorting.mode")==="none"&&s.push("sortIndex","sortOrder"),o.allowGrouping||s.push("groupIndex"),o.allowFixing||s.push("fixed","fixedPosition"),o.allowResizing||s.push("width","visibleWidth");const r=!t.option("filterPanel.visible");!t.option("filterRow.visible")&&r&&s.push("filterValue","selectedFilterOperation"),!t.option("headerFilter.visible")&&r&&s.push("filterValues","filterType")}t._columnsUserState=e,t._ignoreColumnOptionNames=s,t._hasUserState=!!e,ls(t,"filtering"),t.init(!0),n&&(n.sort(t.getSortDataSourceParameters()),n.group(t.getGroupDataSourceParameters()))}_checkColumns(){const e={};let t=!1;const n=[];this._columns.forEach(s=>{var o;const{name:r}=s,a=(o=s.columns)===null||o===void 0?void 0:o.length,l=s.allowEditing&&(s.dataField||s.setCellValue)&&!a;r?(e[r]&&n.push(`"${r}"`),e[r]=!0):l&&(t=!0)}),n.length&&mt.log("E1059",n.join(", ")),t&&mt.log("E1060")}_createCalculatedColumnOptions(e,t){let n={},{dataField:s}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(n.isBand=!0,s=null),s){if(Ke(s)){const o=Nt(s);n={caption:cr(s),calculateCellValue(r,a){const l=o(r);return this.deserializeValue&&!a?this.deserializeValue(l):l},setCellValue:PM,parseValue(r){const a=this;let l,d;return a.dataType==="number"?Ke(r)&&a.format?l=LM(r.trim(),a.format):U(r)&&Wt(r)&&(l=Number(r)):a.dataType==="boolean"?r===a.trueText?l=!0:r===a.falseText&&(l=!1):Ce.isDateType(a.dataType)?(d=ct.parse(r,a.format),d&&(l=d)):l=r,l}}}n.allowFiltering=!0}else n.allowFiltering=!!e.calculateFilterExpression;return n.calculateFilterExpression=function(){return Er.defaultCalculateFilterExpression.apply(this,arguments)},n.defaultFilterOperation="=",n.createFilterExpression=function(o,r){let a;return this.calculateFilterExpression&&(a=this.calculateFilterExpression.apply(this,arguments)),Ee(a)&&(a=[a,"=",!0]),a&&(a.columnIndex=this.index,a.filterValue=o,a.selectedFilterOperation=r),a},(!s||!Ke(s))&&Y(!0,n,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),t&&(n.allowFixing=!1),e.dataType&&(n.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in n)&&(n.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(n.lookup={calculateCellValue(o,r){return this.valueExpr&&(o=this.valueMap&&this.valueMap[o]),this.deserializeValue&&!r?this.deserializeValue(o):o},updateValueMap(){if(this.valueMap={},this.items){const o=Nt(this.valueExpr),r=Nt(this.displayExpr);for(let a=0;a<this.items.length;a++){const l=this.items[a],d=r(l);this.valueMap[o(l)]=d,this.dataType=this.dataType||Ih(d)}}},update(){const o=this;let{dataSource:r}=o;if(r)if(Ee(r)&&!Qi.isWrapped(r)&&(r=r({})),ht(r)||r instanceof gs||Array.isArray(r)){if(o.valueExpr){const a=Bo(r);return a.paginate=!1,r=new Dn(a),r.load().done(l=>{o.items=l,o.updateValueMap&&o.updateValueMap()})}}else mt.log("E1016");else o.updateValueMap&&o.updateValueMap()}}),n.resizedCallbacks=Tt(),e.resized&&n.resizedCallbacks.add(e.resized.bind(e)),ie(n,o=>{if(Ee(n[o])&&o.indexOf("default")!==0){const r=`default${o.charAt(0).toUpperCase()}${o.substr(1)}`;n[r]=n[o]}}),n}getRowCount(){return this._rowCount=this._rowCount||BM(this),this._rowCount}getRowIndex(e,t){const n=this._columns[e],s=this.getBandColumnsCache();return n&&(t||n.visible&&!(n.command||U(n.groupIndex)))?Qo(e,s.columnParentByIndex).length:0}getChildrenByBandColumn(e,t){const n=this.getBandColumnsCache(),s=o1(e,n.columnChildrenByIndex,!t);return t?s.filter(o=>o.visible&&!o.command).sort((o,r)=>o.visibleIndex-r.visibleIndex):s}isParentBandColumn(e,t){let n=!1;const s=this._columns[e],o=this.getBandColumnsCache(),r=s&&Qo(e,o.columnParentByIndex);return r&&ie(r,(a,l)=>{if(l.index===t)return n=!0,!1}),n}isParentColumnVisible(e){let t=!0;const n=this.getBandColumnsCache(),s=e>=0&&Qo(e,n.columnParentByIndex);return s&&ie(s,(o,r)=>(t=t&&r.visible,t)),t}getColumnId(e){return e.command&&e.type===Eo?mf(this,e)?`type:${e.type}`:`command:${e.command}`:e.index}getCustomizeTextByDataType(e){return nb(e)}getHeaderContentAlignment(e){return this.option("rtlEnabled")?e==="left"?"right":"left":e}}const ub={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:re.format("dxDataGrid-trueText"),falseText:re.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:$M}};He.registerModule("columns",{defaultOptions:()=>Y(!0,{},ub.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:ub.controllers});const hc=function(i,e){const t=e(i);if(We(t))try{return JSON.stringify(t)}catch{return t}return t},HM=function(i,e,t,n){const s=hc(i,n);return e[t[s]]},zM=function(i,e){if(i.length!==e.length)return!1;for(let t=0;t<e.length;t++)if(i[t]!==e[t])return!1;return!0},u1=function(i,e,t,n){const s={},o={};let r=0,a=0;const l=[];i.forEach(function(c,h){const u=hc(c,t);s[u]=h}),e.forEach(function(c,h){const u=hc(c,t);o[u]=h});const d=Math.max(i.length,e.length);for(let c=0;c<d+r;c++){const h=e[c],u=c-r+a,p=i[u];if(!h||p&&!HM(p,e,o,t))p&&(l.push({type:"remove",key:t(p),index:c,oldItem:p}),a++,c--);else{const g=hc(h,t),m=s[g],b=i[m];if(!b)r++,l.push({type:"insert",data:h,index:c});else if(m===u)n(b,h)||l.push({type:"update",data:h,key:t(h),index:c,oldItem:b});else return}}return l},WM={load:()=>ae().reject(),loadSingle:()=>ae().reject(),loadFromStore:()=>ae().reject(),loadNextPage:()=>ae().reject(),loadOptions:ue,userData:ue,cancel:ue,cancelAll:ue,filter:ue,addSearchFilter:ue,group:ue,paginate:ue,pageSize:ue,pageIndex:ue,resetDataSourcePageIndex:ue,totalCount:ue,isLastPage:ue,isLoading:ue,isLoaded:ue,searchValue:ue,searchOperation:ue,searchExpr:ue,select:ue,key:ue,keyOf:ue,store:ue,items:ue,applyMapFunction:ue,getDataSource:ue,reload:ue,on:ue,off:ue};let h1=class{constructor(e){if(!e)return WM;this._dataSource=e}load(){return this._dataSource.load()}loadSingle(e,t){return arguments.length<2&&(t=e,e=this.key()),this._dataSource.loadSingle(e,t)}loadFromStore(e){return this.store().load(e)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(e){this._dataSource.cancel(e)}cancelAll(){this._dataSource.cancelAll()}filter(e){return this._dataSource.filter(e)}addSearchFilter(e){this._dataSource._addSearchFilter(e)}group(e){return this._dataSource.group(e)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(e){return this._dataSource.pageIndex(e)}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(e){return arguments.length?this._dataSource.searchValue(e):this._dataSource.searchValue()}searchOperation(e){return this._dataSource.searchOperation(e)}searchExpr(e){return arguments.length?this._dataSource.searchExpr(e):this._dataSource.searchExpr()}select(){return this._dataSource.select(...arguments)}key(){return this._dataSource.key()}keyOf(e){return this.store().keyOf(e)}store(){return this._dataSource.store()}items(){return this._dataSource.items()}applyMapFunction(e){return this._dataSource._applyMapFunction(e)}getDataSource(){return this._dataSource||null}reload(){return this._dataSource.reload()}on(e,t){this._dataSource.on(e,t)}off(e,t){this._dataSource.off(e,t)}};const hb="_dataSourceChangedHandler",pb="_getSpecificDataSourceOption",fb="_normalizeDataSource",jM=i=>class extends i{postCtor(){this.on("disposing",()=>{this._disposeDataSource()})}_refreshDataSource(){this._initDataSource(),this._loadDataSource()}_initDataSource(){let e=pb in this?this[pb]():this.option("dataSource"),t,n;this._disposeDataSource(),e&&(e instanceof Dn?(this._isSharedDataSource=!0,this._dataSource=e):(t="_dataSourceOptions"in this?this._dataSourceOptions():{},n=this._dataSourceType?this._dataSourceType():Dn,e=Bo(e,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new n(Y(!0,{},t,e))),fb in this&&(this._dataSource=this[fb](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())}_initDataController(){var e;const t=(e=this.option)===null||e===void 0?void 0:e.call(this,"_dataController"),n=this._dataSource;t?this._dataController=t:this._dataController=new h1(n)}_addDataSourceHandlers(){hb in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()}_addReadyWatcher(){this.readyWatcher=(function(e){this._ready&&this._ready(!e)}).bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)}_addDataSourceChangeHandler(){const e=this._dataSource;this._proxiedDataSourceChangedHandler=(function(t){this[hb](e.items(),t)}).bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)}_addDataSourceLoadErrorHandler(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)}_addDataSourceLoadingChangedHandler(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)}_loadDataSource(){const e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())}_loadSingle(e,t){return e=e==="this"?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)}_isLastPage(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize}_isDataSourceLoading(){return this._dataSource&&this._dataSource.isLoading()}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)}getDataSource(){return this._dataSource||null}},mb=function(i,e,t){const n=i._dataSource;if(n){if(t!==void 0){if(i._getPagingOptionValue(e)!==t){e==="pageSize"&&n.pageIndex(0),n[e](t),i._skipProcessingPagingChange=!0,i.option(`paging.${e}`,t),i._skipProcessingPagingChange=!1;const o=n.pageIndex();return i._isPaging=e==="pageIndex",n[e==="pageIndex"?"load":"reload"]().done(()=>{i._isPaging=!1,i.pageChanged.fire(o)})}return ae().resolve().promise()}return n[e]()}return 0};let p1=class extends jM(Yt.Controller){init(){this._items=[],this._cachedProcessedItems=null,this._columnsController=this.getController("columns"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._errorHandlingController=this.getController("errorHandling"),this._filterSyncController=this.getController("filterSync"),this._applyFilterController=this.getController("applyFilter"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._focusController=this.getController("focus"),this._headerFilterController=this.getController("headerFilter"),this._selectionController=this.getController("selection"),this._stateStoringController=this.getController("stateStoring"),this._validatingController=this.getController("validating"),this._isPaging=!1,this._currentOperationTypes=null,this._dataChangedHandler=e=>{this._currentOperationTypes=this._dataSource.operationTypes(),this._handleDataChanged(e),this._currentOperationTypes=null},this._columnsChangedHandler=this._handleColumnsChanged.bind(this),this._loadingChangedHandler=this._handleLoadingChanged.bind(this),this._loadErrorHandler=this._handleLoadError.bind(this),this._customizeStoreLoadOptionsHandler=this._handleCustomizeStoreLoadOptions.bind(this),this._changingHandler=this._handleChanging.bind(this),this._dataPushedHandler=this._handleDataPushed.bind(this),this._columnsController.columnsChanged.add(this._columnsChangedHandler),this._isLoading=!1,this._isCustomLoading=!1,this._repaintChangesOnly=void 0,this._changes=[],this.createAction("onDataErrorOccurred"),this.dataErrorOccurred.add(e=>this.executeAction("onDataErrorOccurred",{error:e})),this._refreshDataSource(),this.postCtor()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if(e==="dataErrorOccurred")return{stopOnFalse:!0}}publicMethods(){return["_disposeDataSource","beginCustomLoading","byKey","clearFilter","endCustomLoading","filter","getCombinedFilter","getDataByKeys","getDataSource","getKeyByRowIndex","getRowIndexByKey","getVisibleRows","keyOf","pageCount","pageIndex","pageSize","refresh","repaintRows","totalCount"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){if(e.value!==e.previousValue){const n=this.store();n&&(n._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){const t=this;let n,s;function o(){e.handled=!0}if(e.name==="dataSource"&&e.name===e.fullName&&this._handleDataSourceChange(e)){o();return}switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":o();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":o(),t.reset();break;case"paging":if(n=t.dataSource(),n&&(s=t._setPagingOptions(n),s)){const r=n.pageIndex();this._isPaging=s.isPageIndexChanged,n.load().done(()=>{this._isPaging=!1,t.pageChanged.fire(r)})}o();break;case"rtlEnabled":t.reset();break;case"columns":n=t.dataSource(),n&&n.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,n.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,t){if(!this._dataSource)return e;let n=e??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){const r=this._calculateAdditionalFilter();n=r?Ce.combineFilters([r,n]):n}const o=this._dataSource.remoteOperations().filtering||t;return n=this._columnsController.updateFilter(n,o),n}waitReady(){return this._updateLockCount?(this._readyDeferred=new ae,this._readyDeferred):De()}_endUpdateCore(){const e=this._changes;if(e.length){this._changes=[];const t=e.every(n=>n.repaintChangesOnly);this.updateItems(e.length===1?e[0]:{repaintChangesOnly:t})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var t;const n=this._columnsController,s=this._dataSource,{storeLoadOptions:o}=e;e.isCustomLoading&&!o.isLoadingAll||(o.filter=this.combinedFilter(o.filter),((t=o.filter)===null||t===void 0?void 0:t.length)===1&&o.filter[0]==="!"&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),n.isDataSourceApplied()||n.updateColumnDataTypes(s),this._columnsUpdating=!0,n.updateSortingGrouping(s,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,o.sort=n.getSortDataSourceParameters(),o.group=n.getGroupDataSourceParameters(),s.sort(o.sort),s.group(o.group),o.sort=n.getSortDataSourceParameters(!s.remoteOperations().sorting),e.group=n.getGroupDataSourceParameters(!s.remoteOperations().grouping))}_handleColumnsChanged(e){const t=this,{changeTypes:n}=e,{optionNames:s}=e;let o,r,a;const l=function(d){var c;t._columnsController.columnsChanged.remove(l),t.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:d==null||(c=d.changeTypes)===null||c===void 0?void 0:c.virtualColumnsScrolling})};if(n.sorting||n.grouping)t._dataSource&&!t._columnsUpdating&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload());else if(n.columns&&(r=t._columnsController.columnOption(e.columnIndex,"filterValues"),(s.filterValues||s.filterType&&Array.isArray(r)||s.filterValue||s.selectedFilterOperation||s.allowFiltering)&&(o=t._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(r)||e.columnIndex===void 0||U(o)||!s.selectedFilterOperation||s.filterValue)&&(t._applyFilter(),a=!0)),!t._needApplyFilter&&!Ce.checkChanges(s,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&t._columnsController.columnsChanged.add(l),U(s.visible))){const d=t._columnsController.columnOption(e.columnIndex);d&&(U(d.filterValue)||U(d.filterValues))&&(t._applyFilter(),a=!0)}!a&&n.filtering&&!this._needApplyFilter&&t.reload()}_handleDataChanged(e){const t=this,n=t._dataSource,s=t._columnsController;let o=!1;this._useSortingGroupingFromColumns=!1,n&&!t._isDataSourceApplying&&(t._isDataSourceApplying=!0,De(t._columnsController.applyDataSource(n)).done(()=>{t._isLoading&&t._handleLoadingChanged(!1),o&&e&&e.isDelayed&&(e.isDelayed=!1),t._isDataSourceApplying=!1;const r=t._needApplyFilter;t._needApplyFilter=!1,r&&!t._isAllDataTypesDefined&&(()=>{const a=t._calculateAdditionalFilter();return a&&a.length})()?(mt.log("W1005",t.component.NAME),t._applyFilter()):t.updateItems(e,!0)}).fail(()=>{t._isDataSourceApplying=!1}),t._isDataSourceApplying&&(o=!0,t._handleLoadingChanged(!0)),t._needApplyFilter=!t._columnsController.isDataSourceApplied(),t._isAllDataTypesDefined=s.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.dataErrorOccurred.fire(mt.Error.apply(mt,t))}_setPagingOptions(e){const t=this.option("paging.pageIndex"),n=this.option("paging.pageSize"),s=this.option("paging.enabled"),o=this.option("scrolling.mode"),r=o==="infinite",l=s||o==="virtual"||r;let d=!1,c=!1,h=!1;return e.requireTotalCount(!r),s!==void 0&&e.paginate()!==l&&(e.paginate(l),d=!0),n!==void 0&&e.pageSize()!==n&&(e.pageSize(n),c=!0),t!==void 0&&e.pageIndex()!==t&&(e.pageIndex(t),h=!0),d||c||h?{isPaginateChanged:d,isPageSizeChanged:c,isPageIndexChanged:h}:!1}_getSpecificDataSourceOption(){const e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){const e=this,t=this._dataSource;super._initDataSource();const n=e._dataSource;if(e._useSortingGroupingFromColumns=!0,e._cachedProcessedItems=null,n){const s=e._setPagingOptions(n);this._isPaging=s==null?void 0:s.isPageIndexChanged,e.setDataSource(n)}else t&&e.updateItems()}_loadDataSource(){const e=this,t=e._dataSource,n=new ae;return De(this._columnsController.refresh(!0)).always(()=>{t?t.load().done(function(){e._isPaging=!1,n.resolve.apply(n,arguments)}).fail(n.reject):n.resolve()}),n.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){const t=this._items,n=e.changeType==="append"&&t.length>0?t[t.length-1]:null;return U(n==null?void 0:n.dataIndex)?n.dataIndex+1:0}_processItems(e,t){const n=this,s=n.getRowIndexDelta(),{changeType:o}=t,r=n._columnsController.getVisibleColumns(null,o==="loadingAll"),a=this.getDataIndex(t),l={visibleColumns:r,dataIndex:a},d=[];return ie(e,(c,h)=>{U(h)&&(l.rowIndex=c-s,h=n._processItem(h,l),d.push(h))}),d}_processItem(e,t){return e=this._generateDataItem(e,t),e=this._processDataItem(e,t),e.dataIndex=t.dataIndex++,e}_generateDataItem(e,t){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,t){return e.values=this.generateDataValues(e.data,t.visibleColumns),e}generateDataValues(e,t,n){const s=[];let o;for(let r=0;r<t.length;r++){const a=t[r];o=n?void 0:null,a.command||(a.calculateCellValue?o=a.calculateCellValue(e):a.dataField&&(o=e[a.dataField])),s.push(o)}return s}_applyChange(e){const t=this;e.changeType==="update"?t._applyChangeUpdate(e):t.items().length&&e.repaintChangesOnly&&e.changeType==="refresh"?t._applyChangesOnly(e):e.changeType==="refresh"&&t._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){const t=e.rowIndices.slice(0),n=this.getRowIndexDelta();t.sort((s,o)=>s-o);for(let s=0;s<t.length;s++){let o=t[s];e.allowInvisibleRowIndices&&(o+=n),o<0&&(t.splice(s,1),s--)}return t}_applyChangeUpdate(e){const t=this,{items:n}=e,s=t._getRowIndices(e),o=t.getRowIndexDelta(),r=t.option("repaintChangesOnly");let a=-1,l=0,d;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];const c=function(h,u,p){let f=h&&u&&zt(h.key,u.key);return f&&p&&(f=h.rowType===u.rowType&&(u.rowType!=="detail"||h.isEditing===u.isEditing)),f};ie(s,(h,u)=>{let p;if(u+=l+o,a===u)return;a=u;const f=t._items[u],g=t._items[u+1],m=n[u],b=n[u+1],_=c(f,g)||c(m,b);if(m&&(m.rowIndex=u,e.items.push(m)),f&&m&&c(f,m,_))d="update",t._items[u]=m,f.visible!==m.visible?e.items.splice(-1,1,{visible:m.visible}):r&&!e.isFullUpdate&&(p=t._partialUpdateRow(f,m,u-o));else if(m&&!f||b&&c(f,b,_))d="insert",t._items.splice(u,0,m),l++;else if(f&&!m||g&&c(m,g,_))d="remove",t._items.splice(u,1),l--,a=-1;else if(m)d="update",t._items[u]=m;else return;e.rowIndices.push(u-o),e.changeTypes.push(d),e.columnIndices.push(p)})}_isCellChanged(e,t,n,s,o){if(JSON.stringify(e.values[s])!==JSON.stringify(t.values[s]))return!0;function r(a,l){return a.modifiedValues?a.modifiedValues[l]!==void 0:!1}return r(e,s)!==r(t,s)}_getChangedColumnIndices(e,t,n,s){let o;if(e.rowType===t.rowType){if(t.rowType!=="group"&&t.rowType!=="groupFooter"&&(o=[],t.rowType!=="detail"))for(let r=0;r<e.values.length;r++)this._isCellChanged(e,t,n,r,s)&&o.push(r);t.rowType==="group"&&e.cells&&t.isExpanded===e.isExpanded&&t.data.isContinuation===e.data.isContinuation&&t.data.isContinuationOnNextPage===e.data.isContinuationOnNextPage&&(o=e.cells.map((a,l)=>{var d;return((d=a.column)===null||d===void 0?void 0:d.type)!=="groupExpand"?l:-1}).filter(a=>a>=0))}return o}_partialUpdateRow(e,t,n,s){var o;let r=this._getChangedColumnIndices(e,t,n,s);return(o=r)!==null&&o!==void 0&&o.length&&this.option("dataRowTemplate")&&(r=void 0),r&&(e.cells&&e.cells.forEach((a,l)=>{!(r.indexOf(l)>=0)&&a&&a.update&&a.update(t)}),t.update=e.update,t.watch=e.watch,t.cells=e.cells,s&&(t.oldValues=e.values),e.update&&e.update(t)),r}_isItemEquals(e,t){if(JSON.stringify(e.values)!==JSON.stringify(t.values)||["modified","isNewRow","removed","isEditing"].some(a=>e[a]!==t[a]))return!1;if(e.rowType==="group"||e.rowType==="groupFooter"){var n,s,o,r;const a=e.isExpanded===t.isExpanded,l=JSON.stringify(e.summaryCells)===JSON.stringify(t.summaryCells),d=((n=e.data)===null||n===void 0?void 0:n.isContinuation)===((s=t.data)===null||s===void 0?void 0:s.isContinuation)&&((o=e.data)===null||o===void 0?void 0:o.isContinuationOnNextPage)===((r=t.data)===null||r===void 0?void 0:r.isContinuationOnNextPage);if(!a||!l||!d)return!1}return!0}_applyChangesOnly(e){const t=[],n=[],s=[],o=[],r={},a=(e==null?void 0:e.isLiveUpdate)??!0;function l(u){if(u)return`${u.rowType},${JSON.stringify(u.key)}`}const d=this._items,c=d.slice();e.items.forEach((u,p)=>{const f=l(u);r[f]=p,u.rowIndex=p});const h=u1(c,e.items,l,(u,p)=>this._isItemEquals(u,p)?(u.cells&&(u.update&&u.update(p),u.cells.forEach(f=>{f&&f.update&&f.update(p,!0)})),!0):!1);if(!h){this._applyChangeFull(e);return}h.forEach(u=>{switch(u.type){case"update":{const{index:p}=u,f=u.data,{oldItem:g}=u,m=this._partialUpdateRow(g,f,p,a);t.push(p),s.push("update"),o.push(f),d[p]=f,n.push(m);break}case"insert":t.push(u.index),s.push("insert"),o.push(u.data),n.push(void 0),d.splice(u.index,0,u.data);break;case"remove":t.push(u.index),s.push("remove"),d.splice(u.index,1),o.push(u.oldItem),n.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=t,e.columnIndices=n,e.changeTypes=s,e.items=o,c.length&&(e.isLiveUpdate=!0),this._correctRowIndices(u=>{const p=this._rowIndexOffset||0,f=this.getRowIndexOffset(),g=c[u-p],m=l(g),b=r[m];return b>=0?b+f-u:0})}_correctRowIndices(e){}_afterProcessItems(e,t){return e}_updateItemsCore(e){let t;const n=this._dataSource,s=e.changeType||"refresh";if(e.changeType=s,n){const o=this._cachedProcessedItems;e.useProcessedItemsCache&&o?t=o:(t=e.items||n.items(),t=this._beforeProcessItems(t),t=this._processItems(t,e),this._cachedProcessedItems=t),t=this._afterProcessItems(t,e),e.items=t;const r=this._items.length===t.length&&this._items;this._applyChange(e);const a=this.getRowIndexDelta();ie(this._items,(l,d)=>{d.rowIndex=l-a,r&&(d.cells=r[l].cells??[]);const c=t[l];c&&(d.loadIndex=c.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){const t=this.getVisibleRows();this.dataSource()&&e.changes.forEach(s=>{if(s.type==="insert"&&s.index>=0){let o=0;for(let r=0;r<s.index;r++){const a=t[r];a&&(a.rowType==="data"||a.rowType==="group")&&o++}s.index=o}})}updateItems(e,t){e=e||{};const n=this;if(n._repaintChangesOnly!==void 0)e.repaintChangesOnly=e.repaintChangesOnly??n._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||n._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=n.option("repaintChangesOnly");else if(t){const s=n.dataSource().operationTypes();e.repaintChangesOnly=s&&!s.grouping&&!s.filtering&&n.option("repaintChangesOnly"),e.isDataChanged=!0,s&&(s.reload||s.paging||s.groupExpanding)&&(e.needUpdateDimensions=!0)}if(n._updateLockCount&&!e.cancel){n._changes.push(e);return}n._updateItemsCore(e),!e.cancel&&n._fireChanged(e)}loadingOperationTypes(){const e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),Di(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){const e=this._dataSource;return e?(e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})):new ae().resolve()}resetFilterApplying(){this._isFilterApplying=!1}filter(e){const t=this._dataSource,n=t&&t.filter();if(arguments.length===0)return n;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,!Ce.equalFilterParameters(n,e)&&(t&&t.filter(e),this._applyFilter())}clearFilter(e){const t=this,n=t._columnsController,s=function(o){const r=n.columnCount();for(let a=0;a<r;a++)n.columnOption(a,o,void 0)};if(t.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":t.filter(null);break;case"search":t.searchByText("");break;case"header":s("filterValues");break;case"row":s("filterValue")}else t.filter(null),t.searchByText(""),s("filterValue"),s("bufferedFilterValue"),s("filterValues");t.component.endUpdate()}_fireDataSourceChanged(){const e=this,t=function(){e.changed.remove(t),e.dataSourceChanged.fire()};e.changed.add(t)}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,t){const s=this._getDataSourceAdapter().create(this.component);return s.init(e,t),s}isLocalStore(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.store())instanceof jl}isCustomStore(e){return e=e||this.store(),e instanceof Cu}_createDataSourceAdapter(e){let t=this.option("remoteOperations");const n=e.store(),s={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return We(t)&&t.groupPaging&&(t=Y({},s,t)),t==="auto"&&(t=this.isLocalStore(n)||this.isCustomStore(n)?{}:{filtering:!0,sorting:!0,paging:!0}),t===!0&&(t=s),this._createDataSourceAdapterCore(e,t)}setDataSource(e){const t=this,n=t._dataSource;!e&&n&&(n.cancelAll(),n.changed.remove(t._dataChangedHandler),n.loadingChanged.remove(t._loadingChangedHandler),n.loadError.remove(t._loadErrorHandler),n.customizeStoreLoadOptions.remove(t._customizeStoreLoadOptionsHandler),n.changing.remove(t._changingHandler),n.pushed.remove(t._dataPushedHandler),n.dispose(t._isSharedDataSource)),e&&(e=t._createDataSourceAdapter(e)),t._dataSource=e,e&&(t._fireDataSourceChanged(),t._isLoading=!e.isLoaded(),t._needApplyFilter=!0,t._isAllDataTypesDefined=t._columnsController.isAllDataTypesDefined(),e.changed.add(t._dataChangedHandler),e.loadingChanged.add(t._loadingChangedHandler),e.loadError.add(t._loadErrorHandler),e.customizeStoreLoadOptions.add(t._customizeStoreLoadOptionsHandler),e.changing.add(t._changingHandler),e.pushed.add(t._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){const e=this._dataSource;return e&&e.store()}loadAll(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this,s=new ae,o=n._dataSource;if(o)if(e){const r={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:t?null:n.getCombinedFilter(),group:o.group(),sort:o.sort()}};o._handleDataLoaded(r),De(r.data).done(a=>{var l;a=n._beforeProcessItems(a),s.resolve(n._processItems(a,{changeType:"loadingAll"}),(l=r.extra)===null||l===void 0?void 0:l.summary)}).fail(s.reject)}else if(o.isLoading())s.reject();else{const r=Y({},o.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});o.load(r).done((a,l)=>{a=n._beforeProcessItems(a),a=n._processItems(a,{changeType:"loadingAll"}),s.resolve(a,l&&l.summary)}).fail(s.reject)}else s.resolve([]);return s}getKeyByRowIndex(e,t){const n=this.items(t)[e];if(n)return n.key}getRowIndexByKey(e,t){return Ce.getIndexByKey(e,this.items(t))}keyOf(e){const t=this.store();if(t)return t.keyOf(e)}byKey(e){const t=this.store(),n=this.getRowIndexByKey(e);let s;if(t)return n>=0&&(s=new ae().resolve(this.items()[n].data)),s||t.byKey(e)}key(){const e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){const t=this,n=new ae,s=[],o=[];return ie(e,(r,a)=>{s.push(t.byKey(a).done(l=>{o[r]=l}))}),De.apply(R,s).always(()=>{n.resolve(o)}),n}pageIndex(e){return mb(this,"pageIndex",e)}pageSize(e){return mb(this,"pageSize",e)}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){e===!0?e={reload:!0,changesOnly:!0}:e||(e={lookup:!0,selection:!0,reload:!0});const t=this,n=t.getDataSource(),{changesOnly:s}=e,o=new ae,r=function(){t._repaintChangesOnly=!!s};return De(!e.lookup||t._columnsController.refresh()).always(()=>{e.load||e.reload?(n&&n.on("customizeLoadResult",r),De(t.reload(e.reload,s)).always(()=>{n&&n.off("customizeLoadResult",r),t._repaintChangesOnly=void 0}).done(o.resolve).fail(o.reject)):(t.updateItems({repaintChangesOnly:e.changesOnly}),o.resolve())}),o.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this._dataSource&&this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher),this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,t){e=Array.isArray(e)?e:[e],(e.length>1||U(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!t})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&(e==="paging.pageIndex"||e==="paging.pageSize")}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){const e=this.pageIndex(),t=this.pageCount();return e===t-1}load(){var e;return(e=this._dataSource)===null||e===void 0?void 0:e.load()}reload(e,t){var n;return(n=this._dataSource)===null||n===void 0?void 0:n.reload(e,t)}push(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=this._dataSource)===null||e===void 0?void 0:e.push(...n)}itemsCount(){var e;return this._dataSource?(e=this._dataSource)===null||e===void 0?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?(e=this._dataSource)===null||e===void 0?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return this._dataSource?(e=this._dataSource)===null||e===void 0?void 0:e.hasKnownLastPage():!0}isLoaded(){var e;return this._dataSource?(e=this._dataSource)===null||e===void 0?void 0:e.isLoaded():!0}totalCount(){var e;return this._dataSource?(e=this._dataSource)===null||e===void 0?void 0:e.totalCount():0}hasLoadOperation(){var e;const t=((e=this._dataSource)===null||e===void 0?void 0:e.operationTypes())??{};return Object.keys(t).some(n=>t[n])}};const KM={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:p1}},pc=function(i,e){if(i&&(i=i.slice(0),e))for(let t=0;t<i.length;t++)i[t]=Y({key:i[t].key},i[t]),i[t].items=pc(i[t].items,e-1);return i},gb=function(i,e,t){let n={reload:!0,fullReload:!0};return e&&(n={sorting:!Ce.equalSortParameters(i.sort,e.sort),grouping:!Ce.equalSortParameters(i.group,e.group,!0),groupExpanding:!Ce.equalSortParameters(i.group,e.group)||e.groupExpand,filtering:!Ce.equalFilterParameters(i.filter,e.filter),pageIndex:i.pageIndex!==e.pageIndex,skip:i.skip!==e.skip,take:i.take!==e.take,pageSize:i.pageSize!==e.pageSize,fullReload:t,reload:!1,paging:!1},n.reload=t||n.sorting||n.grouping||n.filtering,n.paging=n.pageIndex||n.pageSize||n.take),n},GM=function(i,e){U(e)?qf(i,e):i()},Ma=function(){return{items:{}}},_b=function(i,e){const t=Ce.normalizeSortingInfo(i.group||i.storeLoadOptions.group||i.loadOptions.group).length,n=[];if(f1(n,i,t))return n;e&&qM(n,i,t)},f1=function(i,e,t,n){var s;const{storeLoadOptions:o}=e,r=e.take??o.take??0,a=(s=e.cachedData)===null||s===void 0?void 0:s.items;if(r&&a){const l=e.skip??o.skip??0;for(let d=0;d<r;d+=1){const c=n?r-1-d:d,h=c+l,u=a[h];if(u===void 0&&h in a)return!0;const p=UM(e,u,t,c,r);if(p)i.push(p);else return!1}return!0}return!1},UM=function(i,e,t,n,s){if(t&&e){const o=n===0&&i.skips||[],r=n===s-1&&i.takes||[];return m1(e,t,o,r)}return e},m1=function(i,e,t,n){if(e&&i){const s=ve({},i),o=t[0]||0,r=n[0],{items:a}=i;if(a){if(r===void 0&&!a[o])return;s.items=[],t.length&&(s.isContinuation=!0),r&&(s.isContinuationOnNextPage=i.count>r);for(let l=0;r===void 0?a[l+o]:l<r;l+=1){const d=a[l+o],c=l+1===r,h=m1(d,e-1,l===0?t.slice(1):[],c?n.slice(1):[]);if(h!==void 0)s.items.push(h);else return}}return s}return i},qM=function(i,e,t){const n=i.length,{storeLoadOptions:s}=e;if(s.skip!==void 0&&s.take&&!t){const o=[];f1(o,e,t,!0);const r=o.length;(n||r)&&(e.skip=e.skip??s.skip,e.take=e.take??s.take),n&&(s.skip+=n,s.take-=n,e.cachedDataPartBegin=i),r&&(s.take-=r,e.cachedDataPartEnd=o.reverse())}},YM=function(i,e,t){const{storeLoadOptions:n}=i,s=i.skip??n.skip??0,o=i.take??n.take??0;for(let r=0;r<o;r+=1){const a=r+s,l=i.cachedData.items,d=r===0&&i.skips||[];l[a]=g1(l[a],e[r],t,d)}},g1=function(i,e,t,n){if(t&&e){const s=ve({},e);delete s.isContinuation,delete s.isContinuationOnNextPage;const o=n[0]||0;return e.items&&(s.items=(i==null?void 0:i.items)||{},e.items.forEach((r,a)=>{const l=a+o,d=a===0?n.slice(1):[];s.items[l]=g1(s.items[l],r,t-1,d)})),s}return e};class XM extends Yt.Controller{init(e,t){const n=this;n._dataSource=e,n._remoteOperations=t||{},n._isLastPage=!e.isLastPage(),n._hasLastPage=!1,n._currentTotalCount=0,n._cachedData=Ma(),n._lastOperationTypes={},n._eventsStrategy=e._eventsStrategy,n._totalCountCorrection=0,n._isLoadingAll=!1,n.changed=Tt(),n.loadingChanged=Tt(),n.loadError=Tt(),n.customizeStoreLoadOptions=Tt(),n.changing=Tt(),n.pushed=Tt(),n._dataChangedHandler=n._handleDataChanged.bind(n),n._customizeStoreLoadOptionsHandler=n._handleCustomizeStoreLoadOptions.bind(n),n._dataLoadedHandler=n._handleDataLoaded.bind(n),n._loadingChangedHandler=n._handleLoadingChanged.bind(n),n._loadErrorHandler=n._handleLoadError.bind(n),n._pushHandler=n._handlePush.bind(n),n._changingHandler=n._handleChanging.bind(n),e.on("changed",n._dataChangedHandler),e.on("customizeStoreLoadOptions",n._customizeStoreLoadOptionsHandler),e.on("customizeLoadResult",n._dataLoadedHandler),e.on("loadingChanged",n._loadingChangedHandler),e.on("loadError",n._loadErrorHandler),e.on("changing",n._changingHandler),e.store().on("beforePush",n._pushHandler),ie(e,(s,o)=>{!n[s]&&Ee(o)&&(n[s]=function(){return this._dataSource[s].apply(this._dataSource,arguments)})})}dispose(e){const t=this._dataSource,n=t.store();t.off("changed",this._dataChangedHandler),t.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),t.off("customizeLoadResult",this._dataLoadedHandler),t.off("loadingChanged",this._loadingChangedHandler),t.off("loadError",this._loadErrorHandler),t.off("changing",this._changingHandler),n&&n.off("beforePush",this._pushHandler),e||t.dispose()}remoteOperations(){return this._remoteOperations}refresh(e,t){const n=this,s=n._dataSource;t.reload&&(n.resetCurrentTotalCount(),n._isLastPage=!s.paginate(),n._hasLastPage=n._isLastPage)}resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0}resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0}resetPagesCache(e){this._cachedData=Ma()}_needClearStoreDataCache(){const e=this.remoteOperations(),t=gb(this._lastLoadOptions||{},{});return!Object.keys(e).every(s=>!t[s]||!e[s])}push(e,t){const n=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&nr({keyInfo:n,data:this._cachedStoreData,changes:e}),t||this._applyBatch(e),this.pushed.fire(e)}getDataIndexGetter(){if(!this._dataIndexGetter){let e,t;const n=this.store();this._dataIndexGetter=s=>{const o=t&&t!==this._cachedStoreData;if(!e||o){t=this._cachedStoreData||[],e={};for(let r=0;r<t.length;r++)e[ys(n.keyOf(t[r]))]=r}return e[ys(n.keyOf(s))]}}return this._dataIndexGetter}_getKeyInfo(){return this.store()}_needToCopyDataObject(){return!0}_applyBatch(e,t){const n=this._getKeyInfo(),s=this._dataSource,o=Ce.normalizeSortingInfo(this.group()).length,r=this.option("editing.refreshMode")==="reshape",a=this.option("scrolling.mode")==="virtual";e=e.filter(h=>!s.paginate()||h.type!=="insert"||h.index!==void 0);const l=()=>o?this.itemsCount():this.items().length,d=l();nr({keyInfo:n,data:this._items,changes:e,groupCount:o,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),nr({keyInfo:n,data:s.items(),changes:e,groupCount:o,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(t||!r)&&a)&&(this._totalCountCorrection+=l()-d),e.splice(0,e.length)}_handlePush(e){let{changes:t}=e;this.push(t,!0)}_handleChanging(e){this.changing.fire(e),this._applyBatch(e.changes,!0)}_needCleanCacheByOperation(e,t){const n=["filtering","sorting","paging"],s=n.indexOf(e);return(s>=0?n.slice(s):[e]).some(r=>t[r])}_customizeRemoteOperations(e,t){let n=this._cachedStoreData,s=this._cachedPagingData,o=this._cachedData;(e.storeLoadOptions.filter&&!e.remoteOperations.filtering||e.storeLoadOptions.sort&&!e.remoteOperations.sorting)&&(e.remoteOperations={filtering:e.remoteOperations.filtering,summary:e.remoteOperations.summary}),t.fullReload?(n=void 0,s=void 0,o=Ma()):(t.reload?(s=void 0,o=Ma()):t.groupExpanding&&(o=Ma()),ie(t,(r,a)=>{a&&this._needCleanCacheByOperation(r,e.remoteOperations)&&(n=void 0,s=void 0)})),s&&(e.remoteOperations.paging=!1),e.cachedStoreData=n,e.cachedPagingData=s,e.cachedData=o,e.isCustomLoading||(this._cachedStoreData=n,this._cachedPagingData=s,this._cachedData=o)}_handleCustomizeStoreLoadOptions(e){var t;this._handleDataLoading(e),((t=e.data)===null||t===void 0?void 0:t.length)!==0&&(e.data=_b(e,!0)||e.cachedStoreData)}_handleDataLoading(e){const t=this._dataSource,n=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(e),e.delay=this.option("loadingTimeout"),e.originalStoreLoadOptions=e.storeLoadOptions,e.remoteOperations=Y({},this.remoteOperations());const s=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(e.delay=void 0);const o=Y({pageIndex:this.pageIndex(),pageSize:this.pageSize()},e.storeLoadOptions),r=gb(o,n,s);if(this._customizeRemoteOperations(e,r),!e.isCustomLoading){const a=this._isRefreshing;e.pageIndex=t.pageIndex(),e.lastLoadOptions=o,e.operationTypes=r,this._loadingOperationTypes=r,this._isRefreshing=!0,De(a||this._isRefreshed||this.refresh(e,r)).done(()=>{this._lastOperationId===e.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{t.cancel(e.operationId)}).always(()=>{this._isRefreshing=!1}),t.cancel(this._lastOperationId),this._lastOperationId=e.operationId,this._isRefreshing&&t.cancel(this._lastOperationId)}this._handleDataLoadingCore(e)}_handleDataLoadingCore(e){const{remoteOperations:t}=e;e.loadOptions={};const n=e.cachedData.extra,s={filter:!t.filtering,sort:!t.sorting,group:!t.grouping,summary:!t.summary,skip:!t.paging,take:!t.paging,requireTotalCount:n&&"totalCount"in n||!t.paging,langParams:!t.filtering||!t.sorting};ie(e.storeLoadOptions,(o,r)=>{s[o]&&(e.loadOptions[o]=r,delete e.storeLoadOptions[o])}),n&&(e.extra=n)}_handleDataLoaded(e){const{loadOptions:t}=e,n=e.remoteOperations&&!e.remoteOperations.paging,{cachedData:s}=e,{storeLoadOptions:o}=e,r=this.option("cacheEnabled")!==!1&&o,a=r&&!e.isCustomLoading&&s&&(!n||o.group),l=r&&n,d=l&&!e.isCustomLoading;if(!t){this._dataSource.cancel(e.operationId);return}n&&(e.skip=t.skip,e.take=t.take,delete t.skip,delete t.take),t.group&&(t.group=e.group||t.group);const c=Ce.normalizeSortingInfo(e.group||o.group||t.group).length;if(e.cachedDataPartBegin&&(e.data=e.cachedDataPartBegin.concat(e.data)),e.cachedDataPartEnd&&(e.data=e.data.concat(e.cachedDataPartEnd)),!a||!_b(e)){var h;l&&e.cachedPagingData?e.data=pc(e.cachedPagingData,c):(d&&(this._cachedStoreData?e.mergeStoreLoadData&&(e.data=this._cachedStoreData=this._cachedStoreData.concat(e.data)):this._cachedStoreData=pc(e.data,Ce.normalizeSortingInfo(o.group).length)),new jl(e.data).load(t).done(u=>{e.data=u,d&&(this._cachedPagingData=pc(e.data,c))}).fail(u=>{e.data=new ae().reject(u)})),t.requireTotalCount&&n&&(e.extra=ht(e.extra)?e.extra:{},e.extra.totalCount=e.data.length),e.extra&&e.extra.totalCount>=0&&(o.requireTotalCount===!1||t.requireTotalCount===!1)&&(e.extra.totalCount=-1),!t.data&&(o.requireTotalCount||(((h=e.extra)===null||h===void 0?void 0:h.totalCount)??-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(e),a&&(s.extra=s.extra||Y({},e.extra),De(e.data).done(u=>{YM(e,u,c)}))}De(e.data).done(()=>{e.lastLoadOptions&&(this._lastLoadOptions=e.lastLoadOptions,Object.keys(e.operationTypes).forEach(u=>{this._lastOperationTypes[u]=this._lastOperationTypes[u]||e.operationTypes[u]}))}),e.storeLoadOptions=e.originalStoreLoadOptions}_handleDataLoadedCore(e){e.remoteOperations&&!e.remoteOperations.paging&&Array.isArray(e.data)&&(e.skip!==void 0&&(e.data=e.data.slice(e.skip)),e.take!==void 0&&(e.data=e.data.slice(0,e.take)))}_handleLoadingChanged(e){this.loadingChanged.fire(e)}_handleLoadError(e){this.loadError.fire(e),this.changed.fire({changeType:"loadError",error:e})}_loadPageSize(){return this.pageSize()}_handleDataChanged(e){let t;const n=this._dataSource;let s=!1;const o=!e||U(e.changeType),r=this.itemsCount();o&&(this._isLastPage=!r||!this._loadPageSize()||r<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),n.totalCount()>=0?n.pageIndex()>=this.pageCount()&&(n.pageIndex(this.pageCount()-1),this.pageIndex(n.pageIndex()),this.resetPagesCache(),n.load(),s=!0):o&&(t=n.pageIndex()*this.pageSize()+r,t>this._currentTotalCount&&(this._currentTotalCount=t,(n.pageIndex()===0||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),r===0&&n.pageIndex()>=this.pageCount()&&(n.pageIndex(this.pageCount()-1),this.option("scrolling.mode")!=="infinite"&&(n.load(),s=!0))),s||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(e),this.component._optionCache=void 0)}_scheduleCustomLoadCallbacks(e){const t=this;t._isCustomLoading=!0,e.always(()=>{t._isCustomLoading=!1})}loadingOperationTypes(){return this._loadingOperationTypes}operationTypes(){return this._operationTypes}lastLoadOptions(){return this._lastLoadOptions||{}}isLastPage(){return this._isLastPage}_dataSourceTotalCount(){return this._dataSource.totalCount()}_changeRowExpandCore(e){}changeRowExpand(e){}totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)}totalCountCorrection(){return this._totalCountCorrection}items(){}itemsCount(){return this._dataSource.items().length}totalItemsCount(){return this.totalCount()}pageSize(){const e=this._dataSource;return!arguments.length&&!e.paginate()?0:e.pageSize.apply(e,arguments)}pageCount(){const e=this.totalItemsCount()-this._totalCountCorrection,t=this.pageSize();return t&&e>0?Math.max(1,Math.ceil(e/t)):1}hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0}loadFromStore(e,t){const n=this._dataSource,s=new ae;if(n)return t=t||n.store(),t.load(e).done((o,r)=>{o&&!Array.isArray(o)&&Array.isArray(o.data)&&(r=o,o=o.data),s.resolve(o,r)}).fail(s.reject),s}isCustomLoading(){return!!this._isCustomLoading}load(e){const t=this,n=t._dataSource,s=new ae;if(e){const o=n.store(),r=n.loadOptions(),a={storeLoadOptions:Y({},e,{langParams:r==null?void 0:r.langParams}),isCustomLoading:!0};return ie(o._customLoadOptions()||[],(l,d)=>{d in a.storeLoadOptions||(a.storeLoadOptions[d]=r[d])}),this._isLoadingAll=e.isLoadingAll,t._scheduleCustomLoadCallbacks(s),n._scheduleLoadCallbacks(s),t._handleCustomizeStoreLoadOptions(a),GM(()=>{if(!n.store())return s.reject("canceled");De(a.data||t.loadFromStore(a.storeLoadOptions)).done((l,d)=>{a.data=l,a.extra=d||{},t._handleDataLoaded(a),e.requireTotalCount&&a.extra.totalCount===void 0&&(a.extra.totalCount=o.totalCount(a.storeLoadOptions)),De(a.data,a.extra.totalCount).done((c,h)=>{a.extra.totalCount=h,s.resolve(c,a.extra)}).fail(s.reject)}).fail(s.reject)},t.option("loadingTimeout")),s.fail(function(){t._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return n.load()}reload(e){return e?this._dataSource.reload():this._dataSource.load()}getCachedStoreData(){return this._cachedStoreData}isLoaded(){}pageIndex(e){}}let Ah=XM;const Au={extend(i){Ah=i(Ah)},create:i=>new Ah(i)};class ZM extends p1{_getDataSourceAdapter(){return Au}_getSpecificDataSourceOption(){const e=this.option("dataSource");return e&&!Array.isArray(e)&&this.option("keyExpr")&&mt.log("W1011"),super._getSpecificDataSourceOption()}}He.registerModule("data",{defaultOptions:KM.defaultOptions,controllers:{data:ZM}});const _1=i=>class extends i{_applyColumnState(e){const t=this;let n,s;const o=t.option("sorting.mode"),{rootElement:r}=e,{column:a}=e,l=t._getIndicatorContainer(r);if(e.name==="sort"){r.find(".dx-sort").remove(),!l.children().length&&l.remove();const d=o!=="none"&&a.allowSorting,c=t.getController&&!!t.getController("columns").columnOption("sortIndex:1");return!U(a.groupIndex)&&(d||U(a.sortOrder))&&(n=a.sortOrder==="asc"?"ascending":"descending",s=super._applyColumnState(e).toggleClass("dx-sort-up",a.sortOrder==="asc").toggleClass("dx-sort-down",a.sortOrder==="desc"),c&&t.option("sorting.showSortIndexes")&&a.sortIndex>=0&&(R("<span>").addClass("dx-sort-index-icon").text(a.sortIndex+1).appendTo(s),s.addClass("dx-sort-index")),d&&e.rootElement.addClass(t.addWidgetPrefix("action"))),this._setAriaSortAttribute(a,n,r,c),s}return super._applyColumnState(e)}_setAriaSortAttribute(e,t,n,s){if(n.removeAttr("aria-roledescription"),e.isGrouped){let o=this.localize("dxDataGrid-ariaNotSortedColumn");U(e.sortOrder)&&(o=e.sortOrder==="asc"?this.localize("dxDataGrid-ariaSortedAscendingColumn"):this.localize("dxDataGrid-ariaSortedDescendingColumn")),this.setAria("roledescription",o,n)}else if(!U(e.sortOrder))this.setAria("sort","none",n);else if(this.setAria("sort",t,n),s&&e.sortIndex>=0){const o=re.format("dxDataGrid-ariaColumnHeader"),r=re.format("dxDataGrid-ariaSortIndex",e.sortIndex+1),a=`${o}, ${r}`;this.setAria("roledescription",a,n)}}_getIndicatorClassName(e){return e==="sort"?"dx-sort":e==="sortIndex"?"dx-sort-index-icon":super._getIndicatorClassName(e)}_renderIndicator(e){const{column:t}=e,n=e.container,s=e.indicator;if(e.name==="sort"){const o=this.option("rtlEnabled");if(U(t.sortOrder)||s&&s.addClass("dx-sort-none"),n.children().length&&(!o&&e.columnAlignment==="left"||o&&e.columnAlignment==="right")){n.prepend(s);return}}super._renderIndicator(e)}_updateIndicator(e,t,n){if(!(n==="sort"&&U(t.groupIndex)))return super._updateIndicator.apply(this,arguments)}_getIndicatorElements(e,t){const n=super._getIndicatorElements(e);return t?n:n&&n.not(".dx-sort-none")}},JM=i=>class extends _1(i){optionChanged(e){const t=this;e.name==="sorting"?(t._invalidate(),e.handled=!0):super.optionChanged(e)}_createRow(e){const t=super._createRow(e);return e.rowType==="header"&&q.on(t,be(kt,"dxDataGridColumnHeadersView"),"td",this.createAction(n=>{this._processHeaderAction(n.event,t)})),t}_processHeaderAction(e,t){if(R(e.currentTarget).parent().get(0)!==t.get(0))return;const n=this;let s=null;const o=R(e.currentTarget),r=o.parent().index();let a=-1;[].slice.call(n.getCellElements(r)).some((p,f)=>{if(p===o.get(0))return a=f,!0});const d=n._columnsController.getVisibleColumns(r)[a],c=n.getController("editing"),h=n.option("editing.mode");c&&c.isEditing()&&(h==="batch"||h==="cell")||!n._isSortableElement(R(e.target))||d&&!U(d.groupIndex)&&!d.command&&(e.shiftKey?s="shift":ki(e)&&(s="ctrl"),setTimeout(()=>{n._columnsController.changeSortOrder(d.index,s)}))}_renderCellContent(e,t){const n=this,{column:s}=t;!s.command&&t.rowType==="header"&&n._applyColumnState({name:"sort",rootElement:e,column:s,showColumnLines:n.option("showColumnLines")}),super._renderCellContent.apply(this,arguments)}_columnOptionChanged(e){const{changeTypes:t}=e;if(t.length===1&&t.sorting){this._updateIndicators("sort");return}super._columnOptionChanged(e)}},QM=i=>class extends _1(i){optionChanged(e){const t=this;e.name==="sorting"?(t._invalidate(),e.handled=!0):super.optionChanged(e)}_createGroupPanelItem(e,t){const n=this,s=super._createGroupPanelItem(...arguments);return q.on(s,be(kt,"dxDataGridHeaderPanel"),n.createAction(()=>{n._processGroupItemAction(t.index)})),n._applyColumnState({name:"sort",rootElement:s,column:{alignment:n.option("rtlEnabled")?"right":"left",allowSorting:t.allowSorting,sortOrder:t.sortOrder==="desc"?"desc":"asc",isGrouped:!0},showColumnLines:!0}),s}_processGroupItemAction(e){setTimeout(()=>this.getController("columns").changeSortOrder(e))}},e6={defaultOptions:()=>({sorting:{mode:"single",ascendingText:re.format("dxDataGrid-sortingAscendingText"),descendingText:re.format("dxDataGrid-sortingDescendingText"),clearText:re.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:JM,headerPanel:QM}}};He.registerModule("sorting",e6);const t6=Lt.abstract,i6=Re.real(),b1=Lt.inherit(function(){const i=be("scroll","dxScrollEmitter");return{ctor:function(e){this._element=e,this._locked=!1,this._proxiedScroll=t=>{this._disposed||this._scroll(t)},q.on(this._element,i,this._proxiedScroll)},_scroll:t6,check:function(e,t){this._locked&&t()},dispose:function(){this._disposed=!0,q.off(this._element,i,this._proxiedScroll)}}}()),v1=b1.inherit({ctor:function(i,e){this.callBase(i),this._timeout=e},_scroll:function(){this._prepare(),this._forget()},_prepare:function(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer:function(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget:function(){const i=this;this._timer=setTimeout(function(){i._clearTimer()},this._timeout)},dispose:function(){this.callBase(),this._clearTimer()}}),bb=v1.inherit({ctor:function(i){this.callBase(i,400),this._lastWheelDirection=null},check:function(i,e){this._checkDirectionChanged(i),this.callBase(i,e)},_checkDirectionChanged:function(i){if(!an(i)){this._lastWheelDirection=null;return}const e=i.shiftKey||!1,t=this._lastWheelDirection!==null&&e!==this._lastWheelDirection;this._lastWheelDirection=e,this._locked=this._locked&&!t}});let gf=v1.inherit({ctor:function(i){this.callBase(i,400)}});(function(){const{ios:i,android:e}=i6;(i||e)&&(gf=b1.inherit({_scroll:function(){this._locked=!0;const t=this;Fs(this._scrollFrame),this._scrollFrame=Mc(function(){t._locked=!1})},check:function(t,n){Fs(this._scrollFrame),Fs(this._checkFrame);const s=this,o=this.callBase;this._checkFrame=Mc(function(){o.call(s,t,n),s._locked=!1})},dispose:function(){this.callBase(),Fs(this._scrollFrame),Fs(this._checkFrame)}}))})();const n6=Jl.inherit(function(){const i=Math.round(16.666666666666668);return{ctor:function(e){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new gf(e),this._wheelLocker=new bb(e)},validate:function(){return!0},configure:function(e){e.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new gf(e.scrollTarget),this._wheelLocker=new bb(e.scrollTarget)),this.callBase(e)},_init:function(e){this._wheelLocker.check(e,(function(){an(e)&&this._accept(e)}).bind(this)),this._pointerLocker.check(e,(function(){const t=this.isNative&&ur(e);!an(e)&&!t&&this._accept(e)}).bind(this)),this._fireEvent("dxscrollinit",e),this._prevEventData=pi(e)},move:function(e){this.callBase.apply(this,arguments),e.isScrollingEvent=this.isNative||e.isScrollingEvent},_start:function(e){this._savedEventData=pi(e),this._fireEvent("dxscrollstart",e),this._prevEventData=pi(e)},_move:function(e){const t=pi(e);this._fireEvent("dxscroll",e,{delta:Jo(this._prevEventData,t)}),Jo(this._savedEventData,t).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=pi(e)},_end:function(e){const t=Jo(this._prevEventData,pi(e));let n={x:0,y:0};if(!an(e)&&t.time<100){const s=Jo(this._savedEventData,this._prevEventData),o=i/s.time;n={x:s.x*o,y:s.y*o}}this._fireEvent("dxscrollend",e,{velocity:n})},_stop:function(e){this._fireEvent("dxscrollstop",e)},cancel:function(e){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",e)},dispose:function(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection:function(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover:function(){if(!this.isNative)return this.callBase.apply(this,arguments)}}}());xa({emitter:n6,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});const $r={init:"dxscrollinit",start:"dxscrollstart",move:"dxscroll",end:"dxscrollend",stop:"dxscrollstop",cancel:"dxscrollcancel",scroll:"scroll"};function y1(i,e){const t={left:0,top:0};let n=e;for(;(s=n)!==null&&s!==void 0&&s.offsetParent&&!n.classList.contains(i);){var s;const o=n.offsetParent,r=n.getBoundingClientRect(),a=o.getBoundingClientRect();t.left+=r.left-a.left,t.top+=r.top-a.top,n=n.offsetParent}return t}const Gc="vertical",C1="horizontal",kh="both",x1="dx-scrollable-content";function s6(i,e,t,n,s){const o=ve({top:0,left:0,right:0,bottom:0},s),r=e===Gc,a=r?"top":"left",l=r?"bottom":"right",d=r?"height":"width",c=t[`offset${ml(d)}`],h=t[`client${ml(d)}`],u=t.getBoundingClientRect()[d],p=i.getBoundingClientRect()[d];let f=1;Math.abs(u-c)>1&&(f=u/c);const g=y1(x1,i)[a]/f,m=n[a],b=m-g+o[a],_=m-g-p/f+h-o[l];return b<=0&&_>=0?m:m-(Math.abs(b)>Math.abs(_)?_:b)}const w1=function(){return[{device:()=>!fr,options:{useNative:!1}},{device:i=>!Re.isSimulator()&&Re.real().deviceType==="desktop"&&i.platform==="generic",options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:pr,showScrollbar:"onHover"}}]},_f="dxScrollbar",o6="dx-scrollbar-hoverable",vb="horizontal",Ts={onScroll:"onScroll",onHover:"onHover",always:"always",never:"never"};let sa=null;const S1=Hi.inherit({_getDefaultOptions(){return Y(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:Ts.onScroll,containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init(){this.callBase(),this._isHovered=!1},_initMarkup(){this._renderThumb(),this.callBase()},_render(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass(o6,this.option("hoverStateEnabled"))},_renderThumb(){this._$thumb=R("<div>").addClass("dx-scrollable-scroll"),R("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)},isThumb(i){return!!this.$element().find(i).length},_isHoverMode(){const i=this.option("visibilityMode");return(i===Ts.onHover||i===Ts.always)&&this.option("expandable")},_renderDirection(){const i=this.option("direction");this.$element().addClass(`dx-scrollbar-${i}`),this._dimension=i===vb?"width":"height",this._prop=i===vb?"left":"top"},_attachPointerDownHandler(){q.on(this._$thumb,be(Ct.down,_f),this.feedbackOn.bind(this))},feedbackOn(i){i==null||i.preventDefault(),this.$element().addClass("dx-scrollable-scrollbar-active"),sa=this},feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),sa=null},cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility(i){this.option("visibilityMode")===Ts.onScroll&&this._$thumb.css("opacity"),i=this._adjustVisibility(i),this.option().visible=i,this._$thumb.toggleClass("dx-state-invisible",!i)},_adjustVisibility(i){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case Ts.onScroll:break;case Ts.onHover:i=i||!!this._isHovered;break;case Ts.never:i=!1;break;case Ts.always:i=!0}return i},moveTo(i){if(this._isHidden())return;ht(i)&&(i=i[this._prop]||0);const e={};e[this._prop]=this._calculateScrollBarPosition(i),Bi(this._$thumb,e)},_calculateScrollBarPosition(i){return-i*this._thumbRatio},_update(){const i=Math.round(this.option("containerSize")),e=Math.round(this.option("contentSize"));let t=Math.round(this.option("baseContainerSize")),n=Math.round(this.option("baseContentSize"));isNaN(t)&&(t=i,n=e),this._baseContainerToContentRatio=n?t/n:t,this._realContainerToContentRatio=e?i/e:i;const s=Math.round(Math.max(Math.round(i*this._realContainerToContentRatio),15));this._thumbRatio=(i-s)/(this.option("scaleRatio")*(e-i)),this.option(this._dimension,s/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden(){return this.option("visibilityMode")===Ts.never},_needScrollbar(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio(){return this._realContainerToContentRatio},_normalizeSize(i){return ht(i)?i[this._dimension]||0:i},_clean(){this.callBase(),this===sa&&(sa=null),q.off(this._$thumb,`.${_f}`)},_optionChanged(i){if(!this._isHidden())switch(i.name){case"containerSize":case"contentSize":this.option()[i.name]=this._normalizeSize(i.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:ra(function(){this._adjustVisibility()&&this.option("visible",!0)})});ws.add(()=>{q.subscribeGlobal(_e.getDocument(),be(Ct.up,_f),()=>{sa&&sa.feedbackOff()})});const yb="dxNativeScrollable",r6="dx-scrollable-scrollbar-simulated",a6="dx-scrollable-scrollbars-hidden",Pa="vertical",Md="horizontal",Hm=Lt.inherit({ctor(i){this._init(i)},_init(i){this._component=i,this._$element=i.$element(),this._$container=R(i.container()),this._$content=i.$content(),this._direction=i.option("direction"),this._useSimulatedScrollbar=i.option("useSimulatedScrollbar"),this.option=i.option.bind(i),this._createActionByOption=i._createActionByOption.bind(i),this._isLocked=i._isLocked.bind(i),this._isDirection=i._isDirection.bind(i),this._allowedDirection=i._allowedDirection.bind(i),this._getMaxOffset=i._getMaxOffset.bind(i),this._isRtlNativeStrategy=i._isRtlNativeStrategy.bind(i)},render(){const e=Re.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${e}`).toggleClass(a6,!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition(i){i&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass(r6),this._renderScrollbar(Pa),this._renderScrollbar(Md)},_renderScrollbar(i){this._isDirection(i)&&(this._scrollbars[i]=new S1(R("<div>").appendTo(this._$element),{direction:i,expandable:this._component.option("scrollByThumb")}))},handleInit:ue,handleStart:ue,handleMove(i){if(this._isLocked()){i.cancel=!0;return}this._allowedDirection()&&(i.originalEvent.isScrollingEvent=!0)},handleEnd:ue,handleCancel:ue,handleStop:ue,_eachScrollbar(i){i=i.bind(this),ie(this._scrollbars||{},(e,t)=>{i(t,e)})},createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs(){const{left:i,top:e}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-i):this._isReachedLeft(i),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(i)):this._isReachedRight(i),reachedTop:this._isDirection(Pa)?Math.round(e)>=0:void 0,reachedBottom:this._isDirection(Pa)?Math.round(Math.abs(e)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset(){const{top:i,left:e}=this.location();return{top:-i,left:this._normalizeOffsetLeft(-e)}},_normalizeOffsetLeft(i){return this._isRtlNativeStrategy()?this._getMaxOffset().left+i:i},_isReachedLeft(i){return this._isDirection(Md)?Math.round(i)>=0:void 0},_isReachedRight(i){return this._isDirection(Md)?Math.round(Math.abs(i)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible(){const{showScrollbar:i}=this.option();return i!=="never"&&i!==!1},handleScroll(i){this._eventForUserAction=i,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars(){const{top:i,left:e}=this._getScrollOffset();this._eachScrollbar(t=>{t.moveTo({top:-i,left:-e}),t.option("visible",!0)}),this._hideScrollbars()},_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(()=>{this._eachScrollbar(i=>{i.option("visible",!1)})},500)},location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:ue,update(){this._update(),this._updateAction(this._createActionArgs())},_update(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions(){this._containerSize={height:st(this._$container),width:Ge(this._$container)},this._componentContentSize={height:st(this._component.$content()),width:Ge(this._component.$content())},this._contentSize={height:st(this._$content),width:Ge(this._$content)}},_updateScrollbars(){this._eachScrollbar(function(i,e){const t=e===Pa?"height":"width";i.option({containerSize:this._containerSize[t],contentSize:this._componentContentSize[t]}),i.update()})},_allowedDirections(){return{vertical:this._isDirection(Pa)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(Md)&&this._contentSize.width>this._containerSize.width}},dispose(){const{className:i}=this._$element.get(0),e=new RegExp("dx-scrollable-native\\S*","g");e.test(i)&&this._$element.removeClass(i.match(e).join(" ")),q.off(this._$element,`.${yb}`),q.off(this._$container,`.${yb}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars(){this._eachScrollbar(i=>{i.$element().remove()})},scrollBy(i){const e=this.location();this._$container.scrollTop(Math.round(-e.top-i.top)),this._$container.scrollLeft(Math.round(-e.left-i.left))},validate(i){return this.option("disabled")||an(i)&&this._isScrolledInMaxDirection(i)?!1:!!this._allowedDirection()},_isScrolledInMaxDirection(i){const e=this._$container.get(0);let t;return i.delta>0?t=i.shiftKey?!e.scrollLeft:!e.scrollTop:i.shiftKey?t=e.scrollLeft>=this._getMaxOffset().left:t=e.scrollTop>=this._getMaxOffset().top,t},getDirection(){return this._allowedDirection()}}),{abstract:l6}=Lt,E1=Lt.inherit({ctor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start(){this._stopped=!1,this._finished=!1,this._stepCore()},stop(){this._stopped=!0,Fs(this._stepAnimationFrame)},_stepCore(){if(this._isStopped()){this._stop();return}if(this._isFinished()){this._finished=!0,this._complete();return}this._step(),this._stepAnimationFrame=Mc(this._proxiedStepCore)},_step:l6,_isFinished:ue,_stop:ue,_complete:ue,_isStopped(){return this._stopped},inProgress(){return!(this._stopped||this._finished)}}),I1="dxSimulatedScrollable",d6="dxScrollableStrategy",Pd=`${I1}Cursor`,Oh=`${I1}Keyboard`,c6="dx-scrollable-scrollbars-alwaysvisible",os="vertical",Ui="horizontal",u6=Math.round(1e3/60),h6=400/u6,p6=(1-.92**h6)/(1-.92),Ds={PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home",LEFT:"leftArrow",UP:"upArrow",RIGHT:"rightArrow",DOWN:"downArrow",TAB:"tab"},T1=E1.inherit({ctor(i){this.callBase(),this.scroller=i},VELOCITY_LIMIT:1,_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration(){return this.scroller._inBounds()?.92:.5},_complete(){this.scroller._scrollComplete()}}),f6=T1.inherit({VELOCITY_LIMIT:.2,_isFinished(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:()=>.92,_complete(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),D1=Lt.inherit({ctor(i){this._initOptions(i),this._initAnimators(),this._initScrollbar()},_initOptions(i){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=i.direction===Ui?"x":"y",this._prop=i.direction===Ui?"left":"top",this._dimension=i.direction===Ui?"width":"height",this._scrollProp=i.direction===Ui?"scrollLeft":"scrollTop",ie(i,(e,t)=>{this[`_${e}`]=t})},_initAnimators(){this._inertiaAnimator=new T1(this),this._bounceAnimator=new f6(this)},_initScrollbar(){this._scrollbar=new S1(R("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:i=>i===!0?"onScroll":i===!1?"never":i,_scrollStep(i){const e=this._location;this._location+=i,this._suppressBounce(),this._move(),!(Math.abs(e-this._location)<1)&&q.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation(i){return i=i!==void 0?i:this._location,Math.max(Math.min(i,this._maxOffset),this._minOffset)},_move(i){this._location=i!==void 0?i*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent(){const i=this._location;this._$container[this._scrollProp](-i/this._getScaleRatio()),this._moveContentByTranslator(i)},_getScaleRatio(){if(qe()&&!this._scaleRatio){const i=this._$element.get(0),e=this._getRealDimension(i,this._dimension),t=this._getBaseDimension(i,this._dimension);this._scaleRatio=Math.round(e/t*100)/100}return this._scaleRatio||1},_getRealDimension:(i,e)=>Math.round(yi(i)[e]),_getBaseDimension(i,e){const t=`offset${ml(e)}`;return i[t]},_moveContentByTranslator(i){let e;const t=-this._maxScrollPropValue;if(i>0?e=i:i<=t?e=i-t:e=i%1,this._translateOffset===e)return;const n={};if(n[this._prop]=e,this._translateOffset=e,e===0){Zl(this._$content);return}Bi(this._$content,n)},_moveScrollbar(){this._scrollbar.moveTo(this._location)},_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce(){const e=(this._bounceLocation=this._boundLocation())-this._location;this._velocity=e/p6},_inBounds(i){return i=i!==void 0?i:this._location,this._boundLocation(i)===i},_crossBoundOnNextStep(){const i=this._location,e=i+this._velocity;return i<this._minOffset&&e>=this._minOffset||i>this._maxOffset&&e<=this._maxOffset},_initHandler(i){this._stopScrolling(),this._prepareThumbScrolling(i)},_stopScrolling:ra(function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}),_prepareThumbScrolling(i){if(an(i.originalEvent))return;const e=R(i.originalEvent.target),t=this._isScrollbar(e);t&&this._moveToMouseLocation(i),this._thumbScrolling=t||this._isThumb(e),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(e),this._thumbScrolling&&this._scrollbar.feedbackOn()},_isThumbScrollingHandler(i){return this._isThumb(i)},_moveToMouseLocation(i){const e=i[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],t=this._location+e/this._containerToContentRatio()-st(this._$container)/2;this._scrollStep(-Math.round(t))},_startHandler(){this._showScrollbar()},_moveHandler(i){this._crossThumbScrolling||(this._thumbScrolling&&(i[this._axis]=-Math.round(i[this._axis]/this._containerToContentRatio())),this._scrollBy(i))},_scrollBy(i){i=i[this._axis],this._inBounds()||(i*=.5),this._scrollStep(i)},_scrollByHandler(i){this._scrollBy(i),this._scrollComplete()},_containerToContentRatio(){return this._scrollbar.containerToContentRatio()},_endHandler(i){return this._completeDeferred=ae(),this._velocity=i[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)},_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler(){this._update(),this._moveToBounds()},_update(){return this._stopScrolling(),rn(()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),Di(()=>{this._moveScrollbar(),this._scrollbar.update()})})},_resetScaleRatio(){this._scaleRatio=null},_updateLocation(){this._location=(Hn(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:()=>0,_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:l_(function(){const i=this._containerSize(),e=this._contentSize(),t=this._getBaseDimension(this._$container.get(0),this._dimension),n=this._getBaseDimension(this._$content.get(0),this._dimension);Di(()=>{this._scrollbar.option({containerSize:i,contentSize:e,baseContainerSize:t,baseContentSize:n,scaleRatio:this._getScaleRatio()})})}),_moveToBounds:ra(l_(ra(function(){const i=this._boundLocation(),e=i!==this._location;this._location=i,this._move(),e&&this._scrollAction()}))),_createActionsHandler(i){this._scrollAction=i.scroll,this._bounceAction=i.bounce},_showScrollbar(){this._scrollbar.option("visible",!0)},_hideScrollbar(){this._scrollbar.option("visible",!1)},_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize(){const i=this._$content.css(`overflow${this._axis.toUpperCase()}`)==="hidden";let e=this._getRealDimension(this._$content.get(0),this._dimension);if(!i){const t=this._$content[0][`scroll${ml(this._dimension)}`]*this._getScaleRatio();e=Math.max(t,e)}return e},_validateEvent(i){const e=R(i.originalEvent.target);return this._isThumb(e)||this._isScrollbar(e)},_isThumb(i){return this._scrollByThumb&&this._scrollbar.isThumb(i)},_isScrollbar(i){return this._scrollByThumb&&i&&i.is(this._$scrollbar)},_reachedMin(){return Math.round(this._location-this._minOffset)<=0},_reachedMax(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler(){this._scrollbar.cursorLeave()},dispose:ue});let Zn,Hr;const A1=Lt.inherit({ctor(i){this._init(i)},_init(i){this._component=i,this._$element=i.$element(),this._$container=R(i.container()),this._$wrapper=i._$wrapper,this._$content=i.$content(),this.option=i.option.bind(i),this._createActionByOption=i._createActionByOption.bind(i),this._isLocked=i._isLocked.bind(i),this._isDirection=i._isDirection.bind(i),this._allowedDirection=i._allowedDirection.bind(i),this._getMaxOffset=i._getMaxOffset.bind(i)},render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers(){this._scrollers={},this._isDirection(Ui)&&this._createScroller(Ui),this._isDirection(os)&&this._createScroller(os),this._$element.toggleClass(c6,this.option("showScrollbar")==="always")},_createScroller(i){this._scrollers[i]=new D1(this._scrollerOptions(i))},_scrollerOptions(i){return{direction:i,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio(i){for(const e in this._scrollers){const t=this._getPropByDirection(e);if(U(i[t])){const n=this._scrollers[e];i[t]*=n._getScaleRatio()}}return i},_isAnyThumbScrolling(i){let e=!1;return this._eventHandler("isThumbScrolling",i).done((t,n)=>{e=t||n}),e},handleInit(i){this._suppressDirections(i),this._eventForUserAction=i,this._eventHandler("init",i)},_suppressDirections(i){if(an(i.originalEvent)){this._prepareDirections(!0);return}this._prepareDirections(),this._eachScroller(function(e,t){const n=R(i.originalEvent.target),s=e._validateEvent(i)||this.option("scrollByContent")&&this._isContent(n);this._validDirections[t]=s})},_isContent(i){return!!i.closest(this._$element).length},_prepareDirections(i){i=i||!1,this._validDirections={},this._validDirections[Ui]=i,this._validDirections[os]=i},_eachScroller(i){i=i.bind(this),ie(this._scrollers,(e,t)=>{i(t,e)})},handleStart(i){this._eventForUserAction=i,this._eventHandler("start").done(this._startAction)},_saveActive(){Hr=this},_resetActive(){Hr===this&&(Hr=null)},handleMove(i){if(this._isLocked()){i.cancel=!0,this._resetActive();return}this._saveActive(),i.preventDefault&&i.preventDefault(),this._adjustDistance(i,i.delta),this._eventForUserAction=i,this._eventHandler("move",i.delta)},_adjustDistance(i,e){e.x*=this._validDirections[Ui],e.y*=this._validDirections[os];const t=this._tryGetDevicePixelRatio();t&&an(i.originalEvent)&&(e.x=Math.round(e.x/t*100)/100,e.y=Math.round(e.y/t*100)/100)},_tryGetDevicePixelRatio(){if(qe())return Je().devicePixelRatio},handleEnd(i){return this._resetActive(),this._refreshCursorState(i.originalEvent&&i.originalEvent.target),this._adjustDistance(i,i.velocity),this._eventForUserAction=i,this._eventHandler("end",i.velocity).done(this._endAction)},handleCancel(i){return this._resetActive(),this._eventForUserAction=i,this._eventHandler("end",{x:0,y:0})},handleStop(){this._resetActive(),this._eventHandler("stop")},handleScroll(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler(){q.off(this._$element,`.${Oh}`),!this.option("disabled")&&this.option("useKeyboard")&&q.on(this._$element,be("keydown",Oh),this._keyDownHandler.bind(this))},_keyDownHandler(i){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout(()=>{oi(i)===Ds.TAB&&this._eachScroller(t=>{t._updateHandler()})}),!this._$container.is(_e.getActiveElement(this._$container.get(0))))return;let e=!0;switch(oi(i)){case Ds.DOWN:this._scrollByLine({y:1});break;case Ds.UP:this._scrollByLine({y:-1});break;case Ds.RIGHT:this._scrollByLine({x:1});break;case Ds.LEFT:this._scrollByLine({x:-1});break;case Ds.PAGE_DOWN:this._scrollByPage(1);break;case Ds.PAGE_UP:this._scrollByPage(-1);break;case Ds.HOME:this._scrollToHome();break;case Ds.END:this._scrollToEnd();break;default:e=!1}e&&(i.stopPropagation(),i.preventDefault())},_scrollByLine(i){const e=this._tryGetDevicePixelRatio();let t=40;e&&(t=Math.abs(t/e*100)/100),this.scrollBy({top:(i.y||0)*-t,left:(i.x||0)*-t})},_scrollByPage(i){const e=this._wheelProp(),t=this._dimensionByProp(e),n={},s=t==="width"?Ge:st;n[e]=i*-s(this._$container),this.scrollBy(n)},_dimensionByProp:i=>i==="left"?"width":"height",_getPropByDirection:i=>i===Ui?"left":"top",_scrollToHome(){const i=this._wheelProp(),e={};e[i]=0,this._component.scrollTo(e)},_scrollToEnd(){const i=this._wheelProp(),e=this._dimensionByProp(i),t={},n=e==="width"?Ge:st;t[i]=n(this._$content)-n(this._$container),this._component.scrollTo(t)},createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler(i){const e=this._createActionByOption(i);return()=>{e(Y(this._createActionArgs(),arguments))}},_createActionArgs(){const{horizontal:i,vertical:e}=this._scrollers,t=this._getScrollOffset();return this._scrollOffset={top:e&&t.top,left:i&&t.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:i&&i._reachedMax(),reachedRight:i&&i._reachedMin(),reachedTop:e&&e._reachedMax(),reachedBottom:e&&e._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler(i){const e=[].slice.call(arguments).slice(1),t=Ii(this._scrollers,n=>n[`_${i}Handler`].apply(n,e));return De.apply(R,t).promise()},location(){const i=Hn(this._$content);return i.top-=this._$container.scrollTop(),i.left-=this._$container.scrollLeft(),i},disabledChanged(){this._attachCursorHandlers()},_attachCursorHandlers(){q.off(this._$element,`.${Pd}`),!this.option("disabled")&&this._isHoverMode()&&(q.on(this._$element,be("mouseenter",Pd),this._cursorEnterHandler.bind(this)),q.on(this._$element,be("mouseleave",Pd),this._cursorLeaveHandler.bind(this)))},_isHoverMode(){return this.option("showScrollbar")==="onHover"},_cursorEnterHandler(i){i=i||{},i.originalEvent=i.originalEvent||{},!(Hr||i.originalEvent._hoverHandled)&&(Zn&&Zn._cursorLeaveHandler(),Zn=this,this._eventHandler("cursorEnter"),i.originalEvent._hoverHandled=!0)},_cursorLeaveHandler(i){Zn!==this||Hr===Zn||(this._eventHandler("cursorLeave"),Zn=null,this._refreshCursorState(i&&i.relatedTarget))},_refreshCursorState(i){if(!this._isHoverMode()&&(!i||Hr))return;const t=R(i).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),n=t.length&&t.data(d6);Zn&&Zn!==n&&Zn._cursorLeaveHandler(),n&&n._cursorEnterHandler()},update(){const i=this._eventHandler("update").done(this._updateAction);return De(i,rn(()=>{const e=this._allowedDirections();return Di(()=>{let t=e.vertical?"pan-x":"";t=e.horizontal?"pan-y":t,t=e.vertical&&e.horizontal?"none":t,this._$container.css("touchAction",t)}),De().promise()}))},_allowedDirections(){const i=this.option("bounceEnabled"),e=this._scrollers[os],t=this._scrollers[Ui];return{vertical:e&&(e._minOffset<0||i),horizontal:t&&(t._minOffset<0||i)}},_updateBounds(){this._scrollers[Ui]&&this._scrollers[Ui]._updateBounds()},_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==os},updateRtlPosition(i){if(i&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let e=this._getMaxOffset().left-this._rtlConfig.scrollRight;e<=0&&(e=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==e&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:e}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:i,scrollLeft:e}=this._$container.get(0),t=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===t&&this._rtlConfig.clientWidth===i&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-e),this._rtlConfig.clientWidth=i,this._rtlConfig.windowPixelRatio=t}},_getWindowDevicePixelRatio:()=>qe()?Je().devicePixelRatio:1,scrollBy(i){const e=this._scrollers[os],t=this._scrollers[Ui];e&&(i.top=e._boundLocation(i.top+e._location)-e._location),t&&(i.left=t._boundLocation(i.left+t._location)-t._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:i.left,y:i.top}),this._endAction(),this._updateRtlConfig()},validate(i){return an(i)&&ki(i)||this.option("disabled")?!1:this.option("bounceEnabled")?!0:an(i)?this._validateWheel(i):this._validateMove(i)},_validateWheel(i){const e=this._scrollers[this._wheelDirection(i)],t=e._reachedMin(),n=e._reachedMax(),s=!t||!n,o=!t&&!n,r=t&&i.delta>0,a=n&&i.delta<0;let l=s&&(o||r||a);return l=l||this._validateWheelTimer!==void 0,l&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout(()=>{this._validateWheelTimer=void 0},500)),l},_validateMove(i){return!this.option("scrollByContent")&&!R(i.target).closest(".dx-scrollable-scrollbar").length?!1:this._allowedDirection()},getDirection(i){return an(i)?this._wheelDirection(i):this._allowedDirection()},_wheelProp(){return this._wheelDirection()===Ui?"left":"top"},_wheelDirection(i){switch(this.option("direction")){case Ui:return Ui;case os:return os;default:return i&&i.shiftKey?Ui:os}},dispose(){this._resetActive(),Zn===this&&(Zn=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers(){q.off(this._$element,`.${Pd}`),q.off(this._$container,`.${Oh}`)}}),ds="dxScrollable",m6="dxScrollableStrategy",rs="vertical",As="horizontal",Rh="both",vn=Ss.inherit({_getDefaultOptions(){return Y(this.callBase(),{disabled:!1,onScroll:null,direction:rs,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:ue})},_defaultOptionsRules(){return this.callBase().concat(w1(),[{device:()=>fr&&Re.real().platform==="android"&&!Zt.mozilla,options:{useSimulatedScrollbar:!0}}])},_initOptions(i){this.callBase(i),"useSimulatedScrollbar"in i||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged(i){i?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset,this.option("_onVisibilityChanged")(this)):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup(){const i=this.$element().addClass("dx-scrollable"),e=this._$container=R("<div>").addClass("dx-scrollable-container"),t=this._$wrapper=R("<div>").addClass("dx-scrollable-wrapper");(this._$content=R("<div>").addClass("dx-scrollable-content")).append(i.contents()).appendTo(e),e.appendTo(t),t.appendTo(i)},_dimensionChanged(){this.update(),this._updateRtlPosition()},_initMarkup(){this.callBase(),this._renderDirection()},_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition(i){this._strategy.updateRtlPosition(i)},_getMaxOffset(){const{scrollWidth:i,clientWidth:e,scrollHeight:t,clientHeight:n}=R(this.container()).get(0);return{left:i-e,top:t-n}},_attachEventHandlers(){const i=this._strategy,e={getDirection:i.getDirection.bind(i),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};q.off(this._$wrapper,`.${ds}`),q.on(this._$wrapper,be($r.init,ds),e,this._initHandler.bind(this)),q.on(this._$wrapper,be($r.start,ds),i.handleStart.bind(i)),q.on(this._$wrapper,be($r.move,ds),i.handleMove.bind(i)),q.on(this._$wrapper,be($r.end,ds),i.handleEnd.bind(i)),q.on(this._$wrapper,be($r.cancel,ds),i.handleCancel.bind(i)),q.on(this._$wrapper,be($r.stop,ds),i.handleStop.bind(i)),q.off(this._$container,`.${ds}`),q.on(this._$container,be("scroll",ds),i.handleScroll.bind(i))},_validate(i){return this._isLocked()?!1:(this._updateIfNeed(),this._moveIsAllowed(i))},_moveIsAllowed(i){return this._strategy.validate(i)},handleMove(i){this._strategy.handleMove(i)},_prepareDirections(i){this._strategy._prepareDirections(i)},_initHandler(){const i=this._strategy;i.handleInit.apply(i,arguments)},_renderDisabledState(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection(){this.$element().removeClass(`dx-scrollable-${As}`).removeClass(`dx-scrollable-${rs}`).removeClass(`dx-scrollable-${Rh}`).addClass(`dx-scrollable-${this.option("direction")}`)},_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data(m6,this._strategy)},_createStrategy(){this._strategy=this.option("useNative")?new Hm(this):new A1(this)},_createActions(){this._strategy&&this._strategy.createActions()},_clean(){this._strategy&&this._strategy.dispose()},_optionChanged(i){switch(i.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":this.callBase(i),this._updateRtlPosition();break;default:this.callBase(i)}},_resetInactiveDirection(){const i=this._getInactiveProp();if(!i||!qe())return;const e=this.scrollOffset();e[i]=0,this.scrollTo(e)},_getInactiveProp(){const i=this.option("direction");if(i===rs)return"left";if(i===As)return"top"},_location(){return this._strategy.location()},_normalizeLocation(i){if(ht(i)){const t=ci(i.left,i.x),n=ci(i.top,i.y);return{left:U(t)?-t:void 0,top:U(n)?-n:void 0}}const e=this.option("direction");return{left:e!==rs?-i:void 0,top:e!==As?-i:void 0}},_isLocked(){return this._locked},_lock(){this._locked=!0},_unlock(){this.option("disabled")||(this._locked=!1)},_isDirection(i){const e=this.option("direction");return i===rs?e!==As:i===As?e!==rs:e===i},_updateAllowedDirection(){const i=this._strategy._allowedDirections();this._isDirection(Rh)&&i.vertical&&i.horizontal?this._allowedDirectionValue=Rh:this._isDirection(As)&&i.horizontal?this._allowedDirectionValue=As:this._isDirection(rs)&&i.vertical?this._allowedDirectionValue=rs:this._allowedDirectionValue=null},_allowedDirection(){return this._allowedDirectionValue},$content(){return this._$content},content(){return ze(this._$content)},container(){return ze(this._$container)},scrollOffset(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy(){const{useNative:i,rtlEnabled:e}=this.option();return i&&e},scrollTop(){return this.scrollOffset().top},scrollLeft(){return this.scrollOffset().left},clientHeight(){return st(this._$container)},scrollHeight(){return rt(this.$content())},clientWidth(){return Ge(this._$container)},scrollWidth(){return St(this.$content())},update(){if(this._strategy)return De(this._strategy.update()).done(()=>{this._updateAllowedDirection()})},scrollBy(i){i=this._normalizeLocation(i),!(!i.top&&!i.left)&&(this._updateIfNeed(),this._strategy.scrollBy(i))},scrollTo(i){i=this._normalizeLocation(i),this._updateIfNeed();let e=this._location();this.option("useNative")||(i=this._strategy._applyScaleRatio(i),e=this._strategy._applyScaleRatio(e)),this._isRtlNativeStrategy()&&(e.left-=this._getMaxOffset().left);const t=this._normalizeLocation({left:e.left-ci(i.left,e.left),top:e.top-ci(i.top,e.top)});!t.top&&!t.left||this._strategy.scrollBy(t)},scrollToElement(i,e){const t=R(i),n=this.$content().find(i).length,s=t.parents(".dx-scrollable").length-t.parents(".dx-scrollable-content").length===0;if(!n||!s)return;const o={top:0,left:0},r=this.option("direction");r!==rs&&(o.left=this.getScrollElementPosition(t,As,e)),r!==As&&(o.top=this.getScrollElementPosition(t,rs,e)),this.scrollTo(o)},getScrollElementPosition(i,e,t){const n=this.scrollOffset();return s6(i.get(0),e,R(this.container()).get(0),n,t)},_updateIfNeed(){this.option("updateManually")||this.update()},_useTemplates:()=>!1,isRenovated:()=>!!vn.IS_RENOVATED_WIDGET});wt(ds,vn);const Bd="dx-freespace-row",Cb="dx-last-row-border";function xb(i){return i?Math.round(i.scrollWidth()-i.clientWidth()):0}function wb(i){let{rowType:e,column:t}=i;return e==="group"&&U(t.groupIndex)&&!t.showWhenGrouped&&!t.command}function Sb(i){let{element:e,watch:t,getter:n,callBack:s}=i;if(t){const o=t(n,s);q.on(e,Rn,o)}}const g6=function(i,e){const t=rc(e.text)&&e.rowType==="data",{text:n}=e,s=i.get(0);t?Ce.setEmptyText(i):e.column.encodeHtml?s.textContent=n:s.innerHTML=n},_6=function(i){const e=i.getScrollable();return e?Math.ceil(parseFloat(R(e.content()).css("paddingBottom"))):0};class b6 extends Ql{init(){super.init(),this._editingController=this.getController("editing"),this._resizingController=this.getController("resizing"),this._columnsResizerController=this.getController("columnsResizer"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._validatingController=this.getController("validating"),this._errorHandlingController=this.getController("errorHandling"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowHeight=0,this._scrollTop=0,this._scrollLeft=-1,this._scrollRight=0,this._hasHeight=void 0,this._contentChanges=[],this._dataController.loadingChanged.add((e,t)=>{this.setLoading(e,t)}),this._dataController.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_getDefaultTemplate(e){return e.command==="empty"?function(t){t.html("&nbsp;")}:g6}renderFocusState(e){}_getDefaultGroupTemplate(e){const t=this.option("summary.texts");return function(n,s){const{data:o}=s;let r=`${s.column.caption}: ${s.text}`;const a=n.get(0);s.summaryItems&&s.summaryItems.length&&(r+=` ${Ce.getGroupRowSummaryText(s.summaryItems,t)}`),o&&(s.groupContinuedMessage&&s.groupContinuesMessage?r+=` (${s.groupContinuedMessage}. ${s.groupContinuesMessage})`:s.groupContinuesMessage?r+=` (${s.groupContinuesMessage})`:s.groupContinuedMessage&&(r+=` (${s.groupContinuedMessage})`)),e.encodeHtml?a.textContent=r:a.innerHTML=r}}_update(e){}_updateCell(e,t){wb(t)&&e.addClass("dx-group-cell"),super._updateCell.apply(this,arguments)}_getCellTemplate(e){const t=this,{column:n}=e;let s;return wb(e)?s=n.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:t._getDefaultGroupTemplate(n)}:(e.rowType==="data"||n.command)&&n.cellTemplate?s=n.cellTemplate:s={allowRenderToDetachedContainer:!0,render:t._getDefaultTemplate(n)},s}_createRow(e,t){const n=super._createRow.apply(this,arguments);if(e){const s=e.rowType==="group",o=e.rowType==="data";o&&n.addClass("dx-data-row"),o&&this.option("showRowLines")&&n.addClass("dx-row-lines"),this.option("showColumnLines")&&n.addClass("dx-column-lines"),e.visible===!1&&n.hide(),s&&(n.addClass("dx-group-row"),this.setAriaExpandedAttribute(n,e))}return n}_rowPrepared(e,t,n){t.rowType==="data"&&(this.option("rowAlternationEnabled")&&(this._isAltRow(n)&&e.addClass("dx-row-alt"),Sb({element:e.get(0),watch:t.watch,getter:()=>this._isAltRow(n),callBack:s=>{e.toggleClass("dx-row-alt",s)}})),this._setAriaRowIndex(t,e),Sb({element:e.get(0),watch:t.watch,getter:()=>t.rowIndex,callBack:()=>this._setAriaRowIndex(t,e)})),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,t){if(!t.is("tr"))return;const{component:n}=this,s=n.option("scrolling.mode")==="standard"&&!Ce.isVirtualRowRendering(n);let o=e.rowIndex+1;s?o=n.pageIndex()*n.pageSize()+o:o+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",o,t)}setAriaExpandedAttribute(e,t){const n=t.isExpanded?this.localize("dxDataGrid-ariaExpandedRow"):this.localize("dxDataGrid-ariaCollapsedRow");this.setAria("roledescription",n,e)}_afterRowPrepared(e){const t=e.args[0],n=this._dataController,s=n.getVisibleRows()[t.rowIndex],o=this.option("integrationOptions.watchMethod");if(!t.data||t.rowType!=="data"||t.isNewRow||!this.option("twoWayBindingEnabled")||!o||!s)return;const r=o(()=>n.generateDataValues(t.data,t.columns),()=>{n.repaintRows([s.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});q.on(t.rowElement,Rn,r)}_renderScrollable(e){const t=this,n=t.element();if(n.children().length||n.append("<div>"),(e||!t._loadPanel)&&t._renderLoadPanel(n,n.parent(),t._dataController.isLocalStore()),(e||!t.getScrollable())&&t._dataController.isLoaded()){const s=t.getColumns();let o=!0;for(let r=0;r<s.length;r++)if(!s[r].width&&!s[r].minWidth){o=!1;break}(t.option("columnAutoWidth")||t._hasHeight||o||t._columnsController._isColumnFixing())&&t._renderScrollableCore(n)}}_handleScroll(e){const t=this.option("rtlEnabled"),n=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;let s=e.scrollOffset.left;t&&(this._scrollRight=xb(e.component)-this._scrollLeft,n&&(s=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire(ve({},e.scrollOffset,{left:s}),this.name)}_renderScrollableCore(e){const t=this._createScrollableOptions(),n=this._handleScroll.bind(this);t.onScroll=n,this._scrollable=this._createComponent(e,vn,t),this._scrollableContainer=this._scrollable&&R(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ce.renderLoadPanel.apply(this,arguments)}_renderContent(e,t,n){return e.empty().append(t),this._findContentElement()}_updateContent(e,t,n){return this._contentChanges.push({newTableElement:e,change:t,isFixedTableRendering:n}),this.waitAsyncTemplates().done(()=>{const s=this._contentChanges;this._contentChanges=[],s.forEach(o=>{let{newTableElement:r,change:a,isFixedTableRendering:l}=o;const d=this.getTableElement(l),c=this._findContentElement(l),h=a==null?void 0:a.changeType,u=[],p=this.option("highlightChanges"),f=this.addWidgetPrefix("row-inserted-animation");h==="update"?(ie(a.rowIndices,(g,m)=>{var b;const _=this._getRowElements(r).eq(g),w=(b=a.changeTypes)===null||b===void 0?void 0:b[g],E=a.items&&a.items[g];u.push(()=>{const D=this._getRowElements(d),B=D.eq(m);switch(w){case"update":if(E){var $;const F=($=a.columnIndices)===null||$===void 0?void 0:$[g];U(E.visible)&&E.visible!==B.is(":visible")?B.toggle(E.visible):F?this._updateCells(B,_,F):B.replaceWith(_)}break;case"insert":if(D.length)B.length?_.insertBefore(B):_.insertAfter(D.last());else if(d){const F=_.is("tbody")?d:d.children("tbody");_.prependTo(F)}p&&a.isLiveUpdate&&_.addClass(f);break;case"remove":B.remove()}})}),ie(u,function(){this()}),r.remove()):(this.setTableElement(r,l),c.addClass(this.addWidgetPrefix("content")),this._setGridRole(c),this._renderContent(c,r,l))})}).fail(()=>{this._contentChanges=[]})}_getGridRoleName(){return"grid"}_setGridRole(e){var t;const n=!((t=this._dataController)!==null&&t!==void 0&&t.isEmpty()),s=this._getGridRoleName();e!=null&&e.length&&n&&this.setAria("role",s,e)}_createEmptyRow(e,t,n){const s=this;let o;const r=s._createRow(),a=t?this.getFixedColumns():this.getColumns();r.addClass(e).toggleClass("dx-column-lines",s.option("showColumnLines"));for(let l=0;l<a.length;l++)o=s._createCell({column:a[l],rowType:"freeSpace",columnIndex:l,columns:a}),Wt(n)&&o.css("height",n),r.append(o);return s.setAria("role","presentation",r),r}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,t,n){const s=this._getBodies(e),o=!s.length||t.is("tbody"),r=o?e:s;if(n==="top"){if(r.first().prepend(t),o){const a=r.children("colgroup");r.prepend(a)}}else r.last().append(t)}_renderFreeSpaceRow(e,t){let n=this._createEmptyRow(Bd);n=this._wrapRowIfNeed(e,n,(t==null?void 0:t.changeType)==="refresh"),this._appendEmptyRow(e,n)}_checkRowKeys(e){const t=this,n=t._getRows(e),s=t._dataController.store()&&t._dataController.store().key();s&&n.some(o=>{if(o.rowType==="data"&&o.key===void 0)return t._dataController.fireError("E1046",s),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){return e=e||this._tableElement,e.children("tbody").children().not(".dx-virtual-row").not(`.${Bd}`).toArray().reduce((n,s)=>n+yi(s).height,0)}_updateRowHeight(){const e=this,t=e.getTableElement(),n=e._dataController.items().length;if(t&&e._needUpdateRowHeight(n)){const s=e._getRowsHeight(t);e._rowHeight=s/n}}_findContentElement(e){let t=this.element();const n=this.getScrollable();if(t)return n&&(t=R(n.content())),t.children().first()}_getRowElements(e){const t=super._getRowElements(e);return t&&t.not(`.${Bd}`)}_getFreeSpaceRowElements(e){const t=e||this.getTableElements();return t&&t.children("tbody").children(`.${Bd}`)}_getNoDataText(){return this.option("noDataText")}_rowClick(e){const t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",Y({evaluate(n){return Nt(n)(t.data)}},e,t))}_rowDblClick(e){const t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",Y({},e,t))}_getColumnsCountBeforeGroups(e){for(let t=0;t<e.length;t++)if(e[t].type==="groupExpand")return t;return 0}_getGroupCellOptions(e){const t=this._getColumnsCountBeforeGroups(e.columns),n=(e.row.groupIndex||0)+t;return{columnIndex:n,colspan:e.columns.length-n-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,t){t.row.rowType==="group"?this._renderGroupedCells(e,t):t.row.values&&super._renderCells(e,t)}_renderGroupedCells(e,t){const{row:n}=t;let s;const{columns:o}=t,{rowIndex:r}=n;let a;const l=this._getGroupCellOptions(t);for(let h=0;h<=l.columnIndex;h++)h===l.columnIndex&&o[h].allowCollapsing&&t.scrollingMode!=="infinite"?(a=!!n.isExpanded,s=o[h]):(a=null,s={command:"expand",cssClass:o[h].cssClass}),this._needRenderCell(h,t.columnIndices)&&this._renderCell(e,{value:a,row:n,rowIndex:r,column:s,columnIndex:h,columnIndices:t.columnIndices,change:t.change});const d=Po(this.option("rtlEnabled")),c=Y({},o[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:d});l.colspan>1&&(c.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,t.columnIndices)&&this._renderCell(e,{value:n.values[n.groupIndex],row:n,rowIndex:r,column:c,columnIndex:l.columnIndex+1,columnIndices:t.columnIndices,change:t.change})}_renderRows(e,t){const n=this,s=n.option("scrolling.mode");super._renderRows(e,Y({scrollingMode:s},t)),n._checkRowKeys(t.change),n._renderFreeSpaceRow(e,t.change),n._hasHeight||n.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,t,n){const{row:s}=t,o=Y({columns:t.columns},s),r=this._createRow(s,"tbody");r.appendTo(e),this.renderTemplate(r,n,o,!0,t.change),this._rowPrepared(r,o,t.row)}_renderRow(e,t){const{row:n}=t,{rowTemplate:s}=this.option(),o=this.option("dataRowTemplate");n.rowType==="data"&&o?this._renderDataRowByTemplate(e,t,o):(n.rowType==="data"||n.rowType==="group")&&!U(n.groupIndex)&&s?this.renderTemplate(e,s,Y({columns:t.columns},n),!0):super._renderRow(e,t)}_renderTable(e){const t=this,n=super._renderTable(e),s=function(){const o=t.getScrollable();o&&t.element().closest(Je().document).length&&(t.resizeCompleted.remove(s),o._visibilityChanged(!0))};return U(t.getTableElement())?t._renderScrollable():(t.setTableElement(n),t._renderScrollable(!0),t.resizeCompleted.add(s)),n}_createTable(){const e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){const t=this.element();t.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),t.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",t);const n=this._renderTable({change:e}),s=this._updateContent(n,e);return super._renderCore(e),this._lastColumnWidths=null,s}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){const t=this,{column:n}=e,{row:s}=e,{data:o}=s,r=s&&s.summaryCells,{value:a}=e,l=Ce.getDisplayValue(n,a,o,s.rowType),d=super._getCellOptions(e);if(d.value=a,d.oldValue=e.oldValue,d.displayValue=l,d.row=s,d.key=s.key,d.data=o,d.rowType=s.rowType,d.values=s.values,d.text=n.command?"":Ce.formatValue(l,n),d.rowIndex=s.rowIndex,d.summaryItems=r&&r[e.columnIndex],d.resized=n.resizedCallbacks,U(n.groupIndex)&&!n.command){const c=t.option("grouping.texts"),h=t.option("scrolling.mode");h!=="virtual"&&h!=="infinite"&&(d.groupContinuesMessage=o&&o.isContinuationOnNextPage&&c&&c.groupContinuesMessage,d.groupContinuedMessage=o&&o.isContinuation&&c&&c.groupContinuedMessage)}return d}_setRowsOpacityCore(e,t,n,s){const o=this._columnsController,r=o.getColumns(),a=r&&r[n],l=a&&a.isBand&&a.index;ie(e,(d,c)=>{if(!R(c).hasClass("dx-group-row"))for(let h=0;h<t.length&&!((Wt(l)&&o.isParentBandColumn(t[h].index,l)||t[h].index===n)&&(e.eq(d).children().eq(h).css({opacity:s}),!Wt(l)));h++);})}_getDevicePixelRatio(){return Je().devicePixelRatio}renderNoDataText(){return Ce.renderNoDataText.apply(this,arguments)}getCellOptions(e,t){const n=this._dataController.items()[e];let s,o;return n&&(Ke(t)?o=this._columnsController.columnOption(t):o=this._columnsController.getVisibleColumns()[t],o&&(s=this._getCellOptions({value:o.calculateCellValue(n.data),rowIndex:n.rowIndex,row:n,column:o}))),s}getRow(e){if(e>=0){const t=this._getRowElements();if(t.length>e)return R(t[e])}}updateFreeSpaceRowHeight(e){const t=this._dataController,n=t.items(!0).length,s=this._findContentElement(),o=this._getFreeSpaceRowElements(e);if(o&&s&&t.totalCount()>=0){let r=!1;if(n>0)if(this._hasHeight)o.hide(),rn(()=>{const a=this.getScrollbarWidth(!0),l=st(this.element())-a,d=rt(s),c=l-d>0,h=this._getRowsHeight(s.children().first()),u=e||this.getTableElements(),p=Math.ceil(parseFloat(u.css("borderTopWidth"))),f=this._getHeightCorrection(),g=l-h-p-f;c&&Di(()=>{o.css("height",g),r=!0,o.show()}),Di(()=>this._updateLastRowBorder(r))});else{const a=t.pageSize()-n,l=this.option("scrolling.mode");a>0&&t.pageCount()>1&&l!=="virtual"&&l!=="infinite"&&(Zu(o,a*this._rowHeight),r=!0),!r&&e?Zu(o,0):o.toggle(r),this._updateLastRowBorder(r)}else o.css("height",0),o.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){const e=Zt.webkit&&this._getDevicePixelRatio()>=2,t=Zt.chrome&&Zt.version>=91,n=Zt.mozilla&&Zt.version>=70&&!this.option("showRowLines");return e||n||t?1:0}_columnOptionChanged(e){const{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}_handleDataChanged(e){const t=this;switch(e.changeType){case"refresh":case"prepend":case"append":case"update":t.render(null,e);break;default:t._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return Ge(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){const t=this._scrollableContainer&&this._scrollableContainer.get(0);let n=0;return t&&(e?(n=t.clientHeight?t.offsetHeight-t.clientHeight:0,n+=_6(this)):n=t.clientWidth?t.offsetWidth-t.clientWidth:0),n>0?n:0}_fireColumnResizedCallbacks(){const e=this._lastColumnWidths||[],t=[],n=this.getColumns();for(let s=0;s<n.length;s++)t[s]=n[s].visibleWidth,n[s].resizedCallbacks&&!U(n[s].groupIndex)&&e[s]!==t[s]&&n[s].resizedCallbacks.fire(t[s]);this._lastColumnWidths=t}_updateLastRowBorder(e){this.option("showBorders")&&!e?this.element().addClass(Cb):this.element().removeClass(Cb)}_updateScrollable(){const e=vn.getInstance(this.element());e&&(e.update(),(e.option("useNative")||!(e!=null&&e.isRenovated()))&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){const e=this.getScrollable(),t=e&&e.scrollOffset().left;if(this.option("rtlEnabled")){const s=xb(e);s-t!==this._scrollRight&&(this._scrollLeft=s-this._scrollRight)}this._scrollLeft>=0&&t!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){const e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),Di(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),rn(()=>{e._updateScrollable()})})}scrollTo(e){const t=this.element(),n=t&&vn.getInstance(t);n&&n.scrollTo(e)}height(e){const t=this,n=this.element();if(arguments.length===0)return n?rt(n,!0):0;U(e)&&n&&(t.hasHeight(e!=="auto"),Zu(n,e))}hasHeight(e){if(arguments.length===0)return!!this._hasHeight;this._hasHeight=e}setLoading(e,t){const n=this;let s=n._loadPanel;const o=n._dataController,r=n.option("loadPanel")||{},a=o.isLoaded()?r.animation:null,l=n.element();if(qe()&&(!s&&t!==void 0&&o.isLocalStore()&&r.enabled==="auto"&&l&&(n._renderLoadPanel(l,l.parent()),s=n._loadPanel),s)){const d={message:t||r.text,animation:a,visible:e};e&&(d.position=Ce.calculateLoadPanelPosition(l)),clearTimeout(n._hideLoadingTimeoutID),s.option("visible")&&!e?n._hideLoadingTimeoutID=setTimeout(()=>{s.option(d)},200):s.option(d)}}setRowsOpacity(e,t){const n=this._getRowElements().not(".dx-group-row")||[];this._setRowsOpacityCore(n,this.getColumns(),e,t)}_getCellElementsCore(e){const t=super._getCellElementsCore.apply(this,arguments);if(t){const n=t.filter(".dx-group-cell").index();if(n>=0&&t.length>n+1)return t.slice(0,n+1)}return t}_getBoundaryVisibleItemIndex(e,t){const n=this;let s=0,o=0,r=0,a=n._scrollTop;const l=n._findContentElement(),d=l&&l.offset().top,c=this._dataController.items(),h=n.getTableElement();if(c.length&&h){const u=n._getRowElements(h).filter(":visible");if(!e){const p=rt(this._hasHeight?this.element():Je());a+=p}for(s=0;s<c.length;s++){o=r;const p=R(u).eq(s);if(p.length&&(r=p.offset(),r=(e?r.top:r.top+rt(p))-d,r>a)){s&&(t||2*a<Math.round(r+o))&&s--;break}}s&&s===c.length&&s--}return s}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){const e=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[e])return t[e].data}_scrollToElement(e,t){const n=this.getScrollable();n&&n.scrollToElement(e,t)}optionChanged(e){const t=this;switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":t._invalidate(!0,!0),e.handled=!0;break;case"scrolling":t._rowHeight=null,t._tableElement=null,e.handled=!0;break;case"rtlEnabled":t._rowHeight=null,t._tableElement=null;break;case"loadPanel":t._tableElement=null,t._invalidate(!0,e.fullName!=="loadPanel.enabled"),e.handled=!0;break;case"noDataText":t.renderNoDataText(),e.handled=!0}}setAriaOwns(e,t,n){const s=this._findContentElement(),o=this.getTableElement();o!=null&&o.length&&this.setAria("owns",`${e??""} ${o.attr("id")??""} ${t??""}`.trim(),s)}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(e,t){}getFixedContentElement(){var e;const t=this.addWidgetPrefix("content-fixed");return(e=this.element())===null||e===void 0?void 0:e.children(`.${t}`)}_restoreErrorRow(e){}isElementInside(e){return e.closest(`.${this.addWidgetPrefix("rowsview")}`).is(this.element())}}const k1={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:re.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:re.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:b6}};k1.views.rowsView;He.registerModule("rows",k1);const Eb=Math.abs,v6=vu.inherit({start:function(i){this._startEventData=pi(i),this._startTimer(i)},_startTimer:function(i){const e="timeout"in this?this.timeout:750;this._holdTimer=setTimeout((function(){this._requestAccept(i),this._fireEvent("dxhold",i,{target:i.target}),this._forgetAccept()}).bind(this),e)},move:function(i){this._touchWasMoved(i)&&this._cancel(i)},_touchWasMoved:function(i){const e=Jo(this._startEventData,pi(i));return Eb(e.x)>5||Eb(e.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});xa({emitter:v6,bubble:!0,events:["dxhold"]});const Ao={name:"dxhold"},y6=be("contextmenu","dxContexMenu"),C6=be(Ao.name,"dxContexMenu"),x6=Lt.inherit({setup:function(i){const e=R(i);q.on(e,y6,this._contextMenuHandler.bind(this)),(pr||Re.isSimulator())&&q.on(e,C6,this._holdHandler.bind(this))},_holdHandler:function(i){ur(i)&&!Re.isSimulator()||this._fireContextMenu(i)},_contextMenuHandler:function(i){this._fireContextMenu(i)},_fireContextMenu:function(i){return Mo({type:"dxcontextmenu",originalEvent:i})},teardown:function(i){q.off(i,".dxContexMenu")}});Yn("dxcontextmenu",new x6);const O1="dxcontextmenu",R1="dx-inkripple-showing",M1="dx-inkripple-hiding",P1=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{useHoldAnimation:e,waveSizeCoefficient:t,isCentered:n,wavesNumber:s}=i;return{waveSizeCoefficient:t||2,isCentered:n||!1,wavesNumber:s||1,durations:I6(e??!0)}},zm=function(i){const e=P1(i);return{showWave:F1.bind(this,e),hideWave:N1.bind(this,e)}},w6=function(i){let e=i.children(".dx-inkripple");return e.length===0&&(e=R("<div>").addClass("dx-inkripple").appendTo(i)),e},B1=function(i,e){const t=w6(R(i)),n=t.children(".dx-inkripple-wave").toArray();for(let s=n.length;s<e;s++){const o=R("<div>").appendTo(t).addClass("dx-inkripple-wave");n.push(o[0])}return R(n)},S6=function(i,e){const t=R(e.element),n=St(t),s=rt(t),o=parseInt(Math.sqrt(n*n+s*s)),r=Math.min(4e3,parseInt(o*i.waveSizeCoefficient));let a,l;if(i.isCentered)a=(n-r)/2,l=(s-r)/2;else{const d=e.event,c=t.offset(),h=d.pageX-c.left,u=d.pageY-c.top;a=h-r/2,l=u-r/2}return{left:a,top:l,height:r,width:r}};function F1(i,e){const t=B1(e.element,i.wavesNumber).eq(e.wave||0);i.hidingTimeout&&clearTimeout(i.hidingTimeout),V1(t),t.css(S6(i,e)),i.showingTimeout=setTimeout(E6.bind(this,i,t),0)}function E6(i,e){const t=i.durations.showingScale+"ms";e.addClass(R1).css("transitionDuration",t)}function I6(i){return{showingScale:i?1e3:300,hidingScale:300,hidingOpacity:300}}function V1(i){i.removeClass(M1).css("transitionDuration","")}function N1(i,e){i.showingTimeout&&clearTimeout(i.showingTimeout);const t=B1(e.element,e.wavesNumber).eq(e.wave||0),n=i.durations,s=n.hidingScale+"ms, "+n.hidingOpacity+"ms";t.addClass(M1).removeClass(R1).css("transitionDuration",s);const o=Math.max(n.hidingScale,n.hidingOpacity);i.hidingTimeout=setTimeout(V1.bind(this,t),o)}const T6=function(i,e,t,n,s){let o;const r=((a,l,d)=>l(()=>a,d))(i,e,function(a){if(o&&o(),Qa(a)){s(a);return}o=function(l,d,c,h,u){const p={},f=c.slice(),g=c.map(function(m){const b=h[m];return d(b?()=>b(l):()=>l[m],function(_){if(p[m]=_,f.length){const w=f.indexOf(m);w>=0&&f.splice(w,1)}f.length||u(p)})});return function(){g.forEach(m=>m())}}(a,e,t,n,s)});return function(){o&&o(),r&&r()}};class Ir extends Sr{constructor(e,t,n,s){super(),this._render=e,this._fields=t,this._fieldsMap=s||{},this._watchMethod=n}_renderCore(e){const t=R(e.container),n=T6(e.model,this._watchMethod,this._fields,this._fieldsMap,s=>{t.empty(),this._render(t,s,e.model)});return q.on(t,Rn,n),t.contents()}}const ed=i=>!i||typeof i!="string"?!1:/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(i)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(i)?"image":/^[\w-_]+$/.test(i)?"dxIcon":/^\s?([\w-_:]\s?)+$/.test(i)?"fontIcon":!1,Ys=i=>{switch(ed(i)){case"image":return R("<img>").attr("src",i).addClass("dx-icon");case"fontIcon":return R("<i>").addClass(`dx-icon ${i}`);case"dxIcon":return R("<i>").addClass(`dx-icon dx-icon-${i}`);case"svg":return R("<i>").addClass("dx-icon dx-svg-icon").append(i);default:return null}};class L1{constructor(e){this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,t){this.options[e]=t}onSelectionChanged(){const{addedItemKeys:e}=this.options,{removedItemKeys:t}=this.options,{addedItems:n}=this.options,{removedItems:s}=this.options,{selectedItems:o}=this.options,{selectedItemKeys:r}=this.options,a=this.options.onSelectionChanged||ue;this._clearItemKeys(),a({selectedItems:o,selectedItemKeys:r,addedItemKeys:e,removedItemKeys:t,addedItems:n,removedItems:s})}equalKeys(e,t){return this.options.equalByReference&&We(e)&&We(t)?e===t:zt(e,t)}getSelectableItems(e){return e.filter(t=>!(t!=null&&t.disabled))}_clearSelection(e,t,n,s){return e=e||[],e=Array.isArray(e)?e:[e],this.validate(),this.selectedItemKeys(e,t,n,s)}_removeTemplateProperty(e){return Array.isArray(e)?e.map(t=>this._removeTemplateProperty(t)):(We(e)&&delete e.template,e)}_loadFilteredData(e,t,n,s){const o=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,r=this.options.maxFilterLengthInRequest&&o>this.options.maxFilterLengthInRequest,a=ae(),l={filter:r?void 0:e,select:r?this.options.dataFields():n||this.options.dataFields()};return e&&e.length===0?a.resolve([]):this.options.load(l).done(d=>{let c=ht(d)?d.data:d;t&&!s?c=c.filter(t):r&&(c=dn(c).filter(e).toArray()),a.resolve(c)}).fail(a.reject.bind(a)),a}updateSelectedItemKeyHash(e){for(let t=0;t<e.length;t++){const n=ys(e[t]);We(n)||(this.options.keyHashIndices[n]=this.options.keyHashIndices[n]||[],this.options.keyHashIndices[n].push(t))}}_isAnyItemSelected(e){for(let t=0;t<e.length;t++)if(this.options.isItemSelected(e[t]))return;return!1}_getFullSelectAllState(){const e=this.options.plainItems(),t=this.options.filter();let n=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter(r=>!(r!=null&&r.disabled));t&&(n=dn(n).filter(t).toArray());const s=n.length,o=e.length-this.getSelectableItems(e).length;if(!s)return this._isAnyItemSelected(e);if(s>=this.options.totalCount()-o)return!0}_getVisibleSelectAllState(){const e=this.getSelectableItems(this.options.plainItems());let t=!1,n=!1;for(let s=0;s<e.length;s++){const o=e[s],r=this.options.getItemData(o),a=this.options.keyOf(r);this.options.isSelectableItem(o)&&(this.isItemKeySelected(a)?t=!0:n=!0)}return t?n?void 0:!0:!1}}class D6 extends L1{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const e=ae(),t=this,n=this.options.key(),s=Ke(n)?[n]:n;return this._loadFilteredData(this.options.selectionFilter,null,s).done(o=>{const r=o.map(a=>t.options.keyOf(a));e.resolve(r)}).fail(e.reject),e.promise()}selectedItemKeys(e,t,n,s){if(s){const o=this.options.filter();!o||JSON.stringify(o)===JSON.stringify(this.options.selectionFilter)&&n?this._setOption("selectionFilter",n?[]:null):this._addSelectionFilter(n,o,s)}else{t||this._setOption("selectionFilter",[]);for(let o=0;o<e.length;o++)n?this.removeSelectedItem(e[o]):this.addSelectedItem(e[o],s,!t)}return this.onSelectionChanged(),ae().resolve()}setSelectedItems(e){this._setOption("selectionFilter",null);for(let t=0;t<e.length;t++)this.addSelectedItem(e[t])}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){const{selectionFilter:t,sensitivity:n}=this.options;return t?!!dn([e],{langParams:{collatorOptions:{sensitivity:n}}}).filter(t).toArray().length:!0}_getKeyExpr(){const e=this.options.key();return Array.isArray(e)&&e.length===1?e[0]:e}_normalizeKey(e){const t=this.options.key();return Array.isArray(t)&&t.length===1?e[t[0]]:e}_getFilterByKey(e){const t=this._getKeyExpr();let n=[t,"=",this._normalizeKey(e)];if(Array.isArray(t)){n=[];for(let s=0;s<t.length;s++)n.push([t[s],"=",e[t[s]]]),s!==t.length-1&&n.push("and")}return n}addSelectedItem(e,t,n){const s=this._getFilterByKey(e);this._addSelectionFilter(!1,s,t,n)}removeSelectedItem(e){const t=this._getFilterByKey(e);this._addSelectionFilter(!0,t)}validate(){const{key:e}=this.options;if(e&&e()===void 0)throw mt.Error("E1042","Deferred selection")}_findSubFilter(e,t){if(!e)return-1;const n=JSON.stringify(t);for(let s=0;s<e.length;s++){const o=e[s];if(o&&JSON.stringify(o)===n)return s}return-1}_isLastSubFilter(e,t){return e&&t?this._findSubFilter(e,t)===e.length-1||this._findSubFilter([e],t)===0:!1}_addFilterOperator(e,t){return e.length>1&&Ke(e[1])&&e[1]!==t&&(e=[e]),e.length&&e.push(t),e}_denormalizeFilter(e){return e&&Ke(e[0])&&(e=[e]),e}_isOnlyNegativeFiltersLeft(e){return e.every((t,n)=>n%2===0?Array.isArray(t)&&t[0]==="!":t==="and")}_addSelectionFilter(e,t,n,s){var o;const r=this,a=e?["!",t]:t,l=e?"and":"or";let d=!0,c=r.options.selectionFilter||[];if(c=r._denormalizeFilter(c),(o=c)!==null&&o!==void 0&&o.length&&!s){const h=r._removeSameFilter(c,t,e,n),u=r._removeSameFilter(c,t,!e);e&&(h!==-1||u!==-1)&&this._isOnlyNegativeFiltersLeft(c)&&(c=[]);const f=this._isKeyFilter(t)&&this._hasKeyFiltersOnlyStartingFromIndex(c,u);d=t.length&&!f}d&&(c=r._addFilterOperator(c,l),c.push(a)),c=r._normalizeFilter(c),r._setOption("selectionFilter",!e&&!c.length?null:c)}_normalizeFilter(e){return e&&e.length===1&&(e=e[0]),e}_removeFilterByIndex(e,t,n){const s=e[1];t>0?e.splice(t-1,2):e.splice(t,2),n&&s==="and"&&e.splice(0,e.length)}_isSimpleKeyFilter(e,t){return e.length===3&&e[0]===t&&e[1]==="="}_isKeyFilter(e){if(e.length===2&&e[0]==="!")return this._isKeyFilter(e[1]);const t=this._getKeyExpr();if(Array.isArray(t)){if(e.length!==2*t.length-1)return!1;for(let n=0;n<t.length;n++)if(n>0&&e[2*n-1]!=="and"||!this._isSimpleKeyFilter(e[2*n],t[n]))return!1;return!0}return this._isSimpleKeyFilter(e,t)}_hasKeyFiltersOnlyStartingFromIndex(e,t){if(t>=0){for(let n=t;n<e.length;n++)if(typeof e[n]!="string"&&!this._isKeyFilter(e[n]))return!1;return!0}return!1}_removeSameFilter(e,t,n,s){if(t=n?["!",t]:t,JSON.stringify(t)===JSON.stringify(e))return e.splice(0,e.length),0;const o=this._findSubFilter(e,t);if(o>=0)return this._removeFilterByIndex(e,o,s),o;for(let r=0;r<e.length;r++)if(Array.isArray(e[r])&&e[r].length>2){const a=this._removeSameFilter(e[r],t,!1,s);if(a>=0)return e[r].length?e[r].length===1&&(e[r]=e[r][0]):this._removeFilterByIndex(e,r,s),a}return-1}getSelectAllState(){const e=this.options.filter();let{selectionFilter:t}=this.options;if(!t)return!0;if(!t.length)return!1;if(!(!e||!e.length)){if(t=this._denormalizeFilter(t),this._isLastSubFilter(t,e))return!0;if(this._isLastSubFilter(t,["!",e]))return!1}}loadSelectedItemsWithFilter(){const e=this.options.filter(),{selectionFilter:t}=this.options,n=e?[e,"and",t]:t;return this._loadFilteredData(n)}}const Ib=function(i,e){this.getLocalFilter=function(a,l,d,c){return l=l===void 0?zt:l,o.bind(this,l,a,d,c)},this.getExpr=function(a){if(!a)return;let l;return i.forEach(function(d,c){l=l||[];let h;c>0&&l.push(e?"and":"or"),Ke(a)?h=r(a,d):h=function(u,p){const f=[];for(let g=0,m=u.length;g<m;g++){const b=u[g],_=Nt(b),w=p&&_(p),E=r(b,w);if(!E)break;g>0&&f.push(e?"or":"and"),f.push(E)}return f}(a,d),l.push(h)}),l&&l.length===1&&(l=l[0]),l},this.getCombinedFilter=function(a,l){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const c=this.getExpr(a);let h=c;return(d||e)&&l&&(c?(h=[],h.push(c),h.push(l)):h=l),h};let t;const n=function(a,l){if(!t){t={};const d=s(i,a,l);for(let c=0;c<d.length;c++)t[ys(d[c])]=!0}return t},s=function(a,l,d){return Array.isArray(d)?a.map(c=>l(c)):a};function o(a,l,d,c,h){const u=l(h);let p,f;if(!d&&(p=ys(u),!We(p)))return n(l,c)[p]?!e:!!e;for(f=0;f<i.length;f++)if(a(i[f],u))return!e;return!!e}function r(a,l){if(l!==void 0)return[a,e?"<>":"=",l]}};class A6 extends L1{constructor(e){super(e),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,t){const{keyOf:n}=this.options;let s,o,r;if(!n)return;const a=t&&e.length>1&&!this.options.equalByReference;for(a&&(s={}),r=0;r<e.length;r++){const l=e[r],d=n(l);t?(o=this.removeSelectedItem(d,s,l==null?void 0:l.disabled),s&&o>=0&&(s[o]=!0)):this.addSelectedItem(d,l)}a&&this._batchRemoveSelectedItems(s)}_batchRemoveSelectedItems(e){const t=this.options.selectedItemKeys.slice(0),n=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let s=0;s<t.length;s++)e[s]||(this.options.selectedItemKeys.push(t[s]),this.options.selectedItems.push(n[s]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,t,n,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r=ae();const a=this.options.key();if(!e.length&&!n)return r.resolve([]),r;if(n&&t&&!s)return r.resolve(this.getSelectedItems()),r;const l=new Ib(e,n),d=l.getCombinedFilter(a,s,o);let c=[];if(t){const{selectedItems:p}=this.options;c=d&&e.length!==p.length?dn(p).filter(d).toArray():p.slice(0)}let h=c.length?c:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const u=l.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,a);return h=h.filter(u),c.length||!n&&h.length===e.length?r.resolve(h):r=this._loadFilteredData(d,u,null,n),r}_replaceSelectionUpdate(e){const t=[],{keyOf:n}=this.options;if(n){for(let s=0;s<e.length;s++){const o=e[s],r=n(o);t.push(r)}this.setSelectedItems(t,e)}}_warnOnIncorrectKeys(e){const{allowNullValue:t}=this.options;for(let n=0;n<e.length;n++){const s=e[n];(!t||s!==null)&&!this.isItemKeySelected(s)&&mt.log("W1002",s)}}_isMultiSelectEnabled(){const{mode:e}=this.options;return e==="all"||e==="multiple"}_requestInProgress(){var e;return((e=this._lastLoadDeferred)===null||e===void 0?void 0:e.state())==="pending"}_concatRequestsItems(e,t,n,s){let o;const r=t?e:[];return s?o=s:o=x0(e,this.options.selectedItemKeys),{addedItems:n.added.concat(o),removedItems:n.removed.concat(r),keys:e}}_collectLastRequestData(e,t,n,s){const o=t&&n,r={added:[],removed:[]},a=this._isMultiSelectEnabled();let l=a?this._lastRequestData:{};return a&&(this._shouldMergeWithLastRequest&&(o?(this._lastLoadDeferred.reject(),l={}):zM(e,this.options.selectedItemKeys)||(r.added=l.addedItems,r.removed=l.removedItems,t||this._lastLoadDeferred.reject())),l=this._concatRequestsItems(e,t,r,this._shouldMergeWithLastRequest?void 0:s)),l}_updateKeysByLastRequestData(e,t,n){let s=e;if(this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!t&&!n){var o,r;s=x0(e.concat((o=this._lastRequestData)===null||o===void 0?void 0:o.addedItems),(r=this._lastRequestData)===null||r===void 0?void 0:r.removedItems),s=ZR(s)}return s}_loadSelectedItems(e,t,n,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const r=this,a=ae(),l=r.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,t,n,s),De(r._lastLoadDeferred).always(()=>{const d=r._updateKeysByLastRequestData(e,t,n);r._shouldMergeWithLastRequest=!1,r._loadSelectedItemsCore(d,t,n,l,o).done(a.resolve).fail(a.reject)}),r._lastLoadDeferred=a,a}selectedItemKeys(e,t,n,s,o){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;const a=this,l=a._loadSelectedItems(e,n,s,o,r);return l.done(d=>{t?a._preserveSelectionUpdate(d,n):a._replaceSelectionUpdate(d),a.onSelectionChanged()}),l}addSelectedItem(e,t){if(U(t)&&!this.options.ignoreDisabledItems&&t.disabled){this.options.disabledItemKeys.indexOf(e)===-1&&this.options.disabledItemKeys.push(e);return}const n=this._getKeyHash(e);this._indexOfSelectedItemKey(n)===-1&&(!We(n)&&this.options.keyHashIndices&&(this.options.keyHashIndices[n]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(t),this.options.selectedItems.push(t))}_getSelectedIndexByKey(e,t){const{selectedItemKeys:n}=this.options;for(let s=0;s<n.length;s++)if((!t||!t[s])&&this.equalKeys(n[s],e))return s;return-1}_getSelectedIndexByHash(e,t){let n=this.options.keyHashIndices[e];return n&&n.length>1&&t&&(n=n.filter(s=>!t[s])),n&&n[0]>=0?n[0]:-1}_indexOfSelectedItemKey(e,t){let n;return this.options.equalByReference?n=this.options.selectedItemKeys.indexOf(e):We(e)?n=this._getSelectedIndexByKey(e,t):n=this._getSelectedIndexByHash(e,t),n}_shiftSelectedKeyIndices(e){for(let t=e;t<this.options.selectedItemKeys.length;t++){const n=this.options.selectedItemKeys[t],s=ys(n),o=this.options.keyHashIndices[s];if(o)for(let r=0;r<o.length;r++)o[r]>e&&o[r]--}}removeSelectedItem(e,t,n){if(!this.options.ignoreDisabledItems&&n)return;const s=this._getKeyHash(e),o=!!t,r=this._indexOfSelectedItemKey(s,t);if(r<0||(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[r]),o)||(this.options.selectedItemKeys.splice(r,1),this.options.selectedItems.splice(r,1),We(s)||!this.options.keyHashIndices))return r;const a=this.options.keyHashIndices[s];return a&&(a.shift(),a.length||delete this.options.keyHashIndices[s],this._shiftSelectedKeyIndices(r)),r}_updateAddedItemKeys(e,t){for(let n=0;n<e.length;n++)this.isItemKeySelected(e[n])||(this.options.addedItemKeys.push(e[n]),this.options.addedItems.push(t[n]))}_updateRemovedItemKeys(e,t,n){for(let s=0;s<t.length;s++)this.isItemKeySelected(t[s])||(this.options.removedItemKeys.push(t[s]),this.options.removedItems.push(n[s]))}_isItemSelectionInProgress(e,t){return t&&this._lastRequestData&&this._requestInProgress()?(this._lastRequestData.addedItems??[]).includes(e):!1}_getKeyHash(e){return this.options.equalByReference?e:ys(e)}setSelectedItems(e,t){this._updateAddedItemKeys(e,t);const n=this.options.selectedItemKeys,s=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._updateRemovedItemKeys(e,n,s)}isItemDataSelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.options.keyOf(e);return this.isItemKeySelected(n,t)}isItemKeySelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this._isItemSelectionInProgress(e,t.checkPending);if(!n){const s=this._getKeyHash(e);n=this._indexOfSelectedItemKey(s)!==-1}return n}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const e=this.options.key(),t=this.getSelectedItemKeys(),n=this.options.filter();if(!t.length)return ae().resolve([]);const o=new Ib(t).getCombinedFilter(e,n,!0);return this._loadFilteredData(o)}}class $1{constructor(e){this.options=Y(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new D6(this.options):new A6(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:ue,key:ue,keyOf:e=>e,load:()=>ae().resolve([]),totalCount:()=>-1,isSelectableItem:()=>!0,isItemSelected:()=>!1,getItemData:e=>e,dataFields:ue,filter:ue}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(e===void 0)return this.options.selectionFilter;const t=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,t&&this.onSelectionChanged()}setSelection(e,t){return this.selectedItemKeys(e,!1,!1,!1,t)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,t,n,s,o){return e=e??[],e=Array.isArray(e)?e:[e],this.validate(),this._selectionStrategy.selectedItemKeys(e,t,n,s,o)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,t){this._selectionStrategy.addSelectedItem(t,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,t){this._selectionStrategy.setSelectedItems(e,t)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e,t,n){var s,o;let r;const a=this.options.plainItems(),l=a[e];let d;const{isVirtualPaging:c}=this.options,h=(s=(o=this.options).allowLoadByRange)===null||s===void 0?void 0:s.call(o),{alwaysSelectByShift:u}=this.options;let p,f=!1,g=!1;const m=E=>E>=0&&!a.filter(D=>D.loadIndex===E).length;if(c&&U(l)&&(h&&(p=l.loadIndex-e,e=l.loadIndex),f=m(this._focusedItemIndex),U(this._shiftFocusedItemIndex)&&(g=m(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(l))return!1;const b=this.options.getItemData(l),_=this.options.keyOf(b);t=t||{};let w=t.shift;if(u===!1&&w&&(w=h!==!1||!f&&!g),w&&this.options.mode==="multiple"&&this._focusedItemIndex>=0)h&&(f||g)?(r=e!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,r&&(d=this.changeItemSelectionWhenShiftKeyInVirtualPaging(e))):r=this.changeItemSelectionWhenShiftKeyPressed(e,a,p);else if(t.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!n){const E=this._selectionStrategy.isItemDataSelected(b);this.options.mode==="single"&&this.clearSelectedItems(),E?this._removeSelectedItem(_):this._addSelectedItem(b,_)}r=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const E=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],_);(this.options.selectedItemKeys.length!==1||!E)&&(this._setSelectedItems([_],[b]),r=!0)}if(r)return De(d).done(()=>{this._focusedItemIndex=e,!n&&this.onSelectionChanged()}),!0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return this.options.mode==="single"||this.options.mode==="multiple"}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e,t){return this._selectionStrategy.isItemKeySelected(e,t)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){const t=this.options.getLoadOptions(e,this._focusedItemIndex,this._shiftFocusedItemIndex),n=ae(),s=t.skip;return this.options.load(t).done(o=>{this.changeItemSelectionWhenShiftKeyPressed(e,o,s),n.resolve()}),n.promise()}changeItemSelectionWhenShiftKeyPressed(e,t,n){let s=!1,o;const r=U(n);let a=r?this._focusedItemIndex-n:this._focusedItemIndex;const{keyOf:l}=this.options,d=t[a],c=this.options.getItemData(d),h=l(c),u=d&&this.isItemDataSelected(c);U(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex);let p,f,g,m;if(this._shiftFocusedItemIndex!==this._focusedItemIndex)for(o=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,g=r?this._focusedItemIndex-n:this._focusedItemIndex,m=r?this._shiftFocusedItemIndex-n:this._shiftFocusedItemIndex,a=g;a!==m;a+=o)(r||this.isDataItem(t[a]))&&(f=l(this.options.getItemData(t[a])),this._removeSelectedItem(f),s=!0);if(e!==this._shiftFocusedItemIndex)for(o=e<this._shiftFocusedItemIndex?1:-1,g=r?e-n:e,m=r?this._shiftFocusedItemIndex-n:this._shiftFocusedItemIndex,a=g;a!==m;a+=o)(r||this.isDataItem(t[a]))&&(p=this.options.getItemData(t[a]),f=l(p),this._addSelectedItem(p,f),s=!0);return(r||this.isDataItem(d))&&!u&&(this._addSelectedItem(c,h),s=!0),s}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(e){const t=this._selectionStrategy.getSelectableItems(this.options.plainItems());for(let n=0;n<t.length;n++){const s=t[n];if(this.isDataItem(s)){const o=this.options.getItemData(s),r=this.options.keyOf(o),a=this.isItemSelected(r);!a&&!e&&this._addSelectedItem(o,r),a&&e&&this._removeSelectedItem(r)}}return this.onSelectionChanged(),ae().resolve()}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}const Tb="_dataSourceChangedHandler",Db="_getSpecificDataSourceOption",Ab="_normalizeDataSource",H1={postCtor:function(){this.on("disposing",(function(){this._disposeDataSource()}).bind(this))},_refreshDataSource:function(){this._initDataSource(),this._loadDataSource()},_initDataSource:function(){let i=Db in this?this[Db]():this.option("dataSource"),e,t;this._disposeDataSource(),i&&(i instanceof Dn?(this._isSharedDataSource=!0,this._dataSource=i):(e="_dataSourceOptions"in this?this._dataSourceOptions():{},t=this._dataSourceType?this._dataSourceType():Dn,i=Bo(i,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new t(Y(!0,{},e,i))),Ab in this&&(this._dataSource=this[Ab](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())},_initDataController:function(){var i;const e=(i=this.option)===null||i===void 0?void 0:i.call(this,"_dataController"),t=this._dataSource;e?this._dataController=e:this._dataController=new h1(t)},_addDataSourceHandlers:function(){Tb in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher:function(){this.readyWatcher=(function(i){this._ready&&this._ready(!i)}).bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)},_addDataSourceChangeHandler:function(){const i=this._dataSource;this._proxiedDataSourceChangedHandler=(function(e){this[Tb](i.items(),e)}).bind(this),i.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler:function(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler:function(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource:function(){const i=this._dataSource;i&&(i.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():i.load())},_loadSingle:function(i,e){return i=i==="this"?this._dataSource.key()||"this":i,this._dataSource.loadSingle(i,e)},_isLastPage:function(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading:function(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource:function(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource:function(){return this._dataSource||null}},k6=function(i,e,t){const n=function(){let s;return function(o){s!==o&&(t(o,s),s=o)}}();return{dispose:i(e,n),force(){n(e())}}},Tr=Lt.inherit({ctor(i,e,t){this._$element=i,this._options=e,this._rawData=t,cw(i,this,this._dispose),this._render()},_render(){const i=R("<div>").addClass("dx-item-content-placeholder");this._$element.append(i),this._watchers=[],this._renderWatchers()},_renderWatchers(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher(i,e){const t=this._rawData,n=this._options.fieldGetter(i),s=k6(this._options.watchMethod(),()=>n(t),(o,r)=>{this._dirty=!0,e(o,r)});this._watchers.push(s)},setDataField(){if(this._dirty=!1,ie(this._watchers,(i,e)=>{e.force()}),this._dirty)return!0},_renderDisabled(i,e){this._$element.toggleClass("dx-state-disabled",!!i),this._$element.attr("aria-disabled",!!i),this._updateOwnerFocus(i)},_updateOwnerFocus(i){const e=this._options.owner;e&&i&&e._resetItemFocus(this._$element)},_renderVisible(i,e){this._$element.toggleClass("dx-state-invisible",i!==void 0&&!i)},_dispose(){ie(this._watchers,(i,e)=>{e.dispose()})}});Tr.getInstance=function(i){return uw(i,this)};const Fd="dx-item",O6="dx-empty-collection",R6=/^([^.]+\[\d+\]\.)+([\w.]+)$/,z1=Hi.inherit({_activeStateUnit:`.${Fd}`,_supportedKeys(){const i=function(e,t){ki(t)||(t.preventDefault(),t.stopPropagation(),this._moveFocus(e,t))};return Y(this.callBase(),{space:function(e){e.preventDefault(),this._enterKeyHandler(e)},enter:this._enterKeyHandler,leftArrow:i.bind(this,"left"),rightArrow:i.bind(this,"right"),upArrow:i.bind(this,"up"),downArrow:i.bind(this,"down"),pageUp:i.bind(this,"up"),pageDown:i.bind(this,"down"),home:i.bind(this,"first"),end:i.bind(this,"last")})},_enterKeyHandler(i){const e=R(this.option("focusedElement"));if(!e.length)return;const t=this._getItemData(e);t!=null&&t.onClick&&this._itemEventHandlerByHandler(e,t.onClick,{event:i}),this._itemClickHandler(Y({},i,{target:e.get(0),currentTarget:e.get(0)}))},_getDefaultOptions(){return Y(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:re.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:i=>i?i.disabled:void 0,visibleExpr:i=>i?i.visible:void 0})},_init(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter(){const i=this.option("displayExpr");this._displayGetter=i?Nt(this.option("displayExpr")):void 0},_initTemplates(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:()=>"item",_initDefaultItemTemplate(){const i=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new Ir((e,t)=>{ht(t)?this._prepareDefaultItemTemplate(t,e):(i&&Ee(i.text)&&(t=i.text(t)),e.text(String(ci(t,""))))},this._getBindableFields(),this.option("integrationOptions.watchMethod"),i)})},_getBindableFields:()=>["text","html"],_getFieldsMap(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate(i,e){U(i.text)&&e.text(i.text),U(i.html)&&e.html(i.html)},_initItemsFromMarkup(){const i=Cw(this.$element(),"dxItem");if(!i.length||this.option("items").length)return;const e=i.map(t=>{let{element:n,options:s}=t;return/\S/.test(n.innerHTML)&&!s.template?s.template=this._prepareItemTemplate(n):R(n).remove(),s});this.option("items",e)},_prepareItemTemplate(i){const e="tmpl-"+new hi,t=R(i).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(e,t),e},_dataSourceOptions:()=>({paginate:!1}),_cleanRenderedItems(){this._renderedItemsCount=0},_focusTarget(){return this.$element()},_focusInHandler(i){if(this.callBase.apply(this,arguments),!this._isFocusTarget(i.target))return;const e=R(this.option("focusedElement"));if(e.length)this._setFocusedItem(e);else{const t=this._getActiveItem();t.length&&this.option("focusedElement",ze(t))}},_focusOutHandler(){this.callBase.apply(this,arguments);const i=R(this.option("focusedElement"));this._updateFocusedItemState(i,!1)},_findActiveTarget(i){return i.find(this._activeStateUnit)},_getActiveItem(i){const e=R(this.option("focusedElement"));if(e.length)return e;let t=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0;const n=this._getActiveElement(),s=n.length-1;return t<0&&(t=i?s:0),n.eq(t)},_moveFocus(i){const e=this._getAvailableItems();let t;switch(i){case"pageup":case"up":t=this._prevItem(e);break;case"pagedown":case"down":t=this._nextItem(e);break;case"right":t=this.option("rtlEnabled")?this._prevItem(e):this._nextItem(e);break;case"left":t=this.option("rtlEnabled")?this._nextItem(e):this._prevItem(e);break;case"first":t=e.first();break;case"last":t=e.last();break;default:return!1}t.length!==0&&this.option("focusedElement",ze(t))},_getVisibleItems(i){return i=i||this._itemElements(),i.filter(":visible")},_getAvailableItems(i){return this._getVisibleItems(i)},_prevItem(i){const e=this._getActiveItem(),t=i.index(e),n=i.last();let s=R(i[t-1]);const o=this.option("loopItemFocus");return s.length===0&&o&&(s=n),s},_nextItem(i){const e=this._getActiveItem(!0),t=i.index(e),n=i.first();let s=R(i[t+1]);const o=this.option("loopItemFocus");return s.length===0&&o&&(s=n),s},_selectFocusedItem(i){this.selectItem(i)},_updateFocusedItemState(i,e,t){const n=R(i);n.length&&(this._refreshActiveDescendant(),this._refreshItemId(n,t),this._toggleFocusClass(e,n)),this._updateParentActiveDescendant()},_refreshActiveDescendant(i){this.setAria("activedescendant",U(this.option("focusedElement"))?this.getFocusedItemId():null,i)},_refreshItemId(i,e){!e&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),i):this.setAria("id",null,i)},_isDisabled:i=>i&&R(i).attr("aria-disabled")==="true",_setFocusedItem(i){if(!i||!i.length)return;this._updateFocusedItemState(i,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:e}=this.option(),t=this._isDisabled(i);e&&!t&&this._selectFocusedItem(i)},_findItemElementByItem(i){let e=R();const t=this;return this.itemElements().each(function(){const n=R(this);if(n.data(t._itemDataKey())===i)return e=n,!1}),e},_getIndexByItem(i){return this.option("items").indexOf(i)},_itemOptionChanged(i,e,t,n){const s=this._findItemElementByItem(i);if(!s.length)return;this.constructor.ItemClass.getInstance(s).setDataField(e,t)||this._refreshItem(s,i),e==="disabled"&&t&&this._resetItemFocus(s)},_resetItemFocus(i){i.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem(i){const e=this._getItemData(i),t=i.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+t,e,null,i)},_updateParentActiveDescendant:ue,_optionChanged(i){if(i.name==="items"){const e=i.fullName.match(R6);if(e&&e.length){const t=e[e.length-1],n=i.fullName.replace(`.${t}`,""),s=this.option(n);this._itemOptionChanged(s,t,i.value,i.previousValue);return}}switch(i.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(i.previousValue,!1,!0),this._setFocusedItem(R(i.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(i)}},_invalidate(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading(){this._startIndexForAppendedItems=0},_expectLastItemLoading(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler(i){const e=this.option("items");this._initialized&&e&&this._shouldAppendItems()?(this._renderedItemsCount=e.length,(!this._isLastPage()||this._startIndexForAppendedItems!==-1)&&(this.option().items=e.concat(i.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",i.slice())},_refreshContent(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems(){return this._startIndexForAppendedItems!=null&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:()=>!1,_clean(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer(){R(this._itemContainer()).empty()},_dispose(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer(){return this.$element()},_itemClass:()=>Fd,_itemContentClass(){return this._itemClass()+"-content"},_selectedItemClass:()=>"dx-item-selected",_itemResponseWaitClass:()=>"dx-item-response-wait",_itemSelector(){return`.${this._itemClass()}`},_itemDataKey:()=>"dxItemData",_itemIndexKey:()=>"dxItemIndex",_itemElements(){return this._itemContainer().find(this._itemSelector())},_initMarkup(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:ra(function(){this._renderContentImpl()}),_renderContent(){this._fireContentReadyAction()},_render(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>Ct.down,_attachClickEvent(){const i=this._itemSelector(),e=this._getPointerEvent(),t=be(kt,this.NAME),n=be(e,this.NAME),s=new bn(o=>{const{event:r}=o;this._itemPointerDownHandler(r)});q.off(this._itemContainer(),t,i),q.off(this._itemContainer(),n,i),q.on(this._itemContainer(),t,i,o=>this._itemClickHandler(o)),q.on(this._itemContainer(),n,i,o=>{s.execute({element:R(o.target),event:o})})},_itemClickHandler(i,e,t){this._itemDXEventHandler(i,"onItemClick",e,t)},_itemPointerDownHandler(i){this.option("focusStateEnabled")&&(this._itemFocusHandler=(function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,i.isDefaultPrevented())return;const e=R(i.target),t=e.closest(this._itemElements()),n=this._closestFocusable(e);t.length&&this._isFocusTarget(n==null?void 0:n.get(0))&&this.option("focusedElement",ze(t))}).bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable(i){if(i.is(Pp))return i;for(i=i.parent();i.length&&!_e.isDocument(i.get(0))&&!_e.isDocumentFragment(i.get(0));){if(i.is(Pp))return i;i=i.parent()}},_forcePointerDownFocus(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent(){const i=this._itemContainer(),e=this._itemSelector(),t=be(Ao.name,this.NAME);q.off(i,t,e),q.on(i,t,e,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler(i){this._shouldFireHoldEvent()?this._itemDXEventHandler(i,"onItemHold"):i.cancel=!0},_attachContextMenuEvent(){const i=this._itemContainer(),e=this._itemSelector(),t=be(O1,this.NAME);q.off(i,t,e),q.on(i,t,e,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler(i){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(i,"onItemContextMenu"):i.cancel=!0},_renderContentImpl(){const i=this.option("items")||[];this._renderedItemsCount?this._renderItems(i.slice(this._renderedItemsCount)):this._renderItems(i)},_renderItems(i){i.length&&ie(i,(e,t)=>{this._renderItem(this._renderedItemsCount+e,t)}),this._renderEmptyMessage()},_getItemsContainer(){return this._itemContainer()},_setAttributes(i){const e=ve({},this.option("_itemAttributes")),{class:t}=e;if(t){const n=i.get(0).className;e.class=[n,t].join(" ")}i.attr(e)},_renderItem(i,e,t,n){const s=(i==null?void 0:i.item)??i;t=t||this._getItemsContainer();const o=this._renderItemFrame(s,e,t,n);this._setElementData(o,e,s),this._setAttributes(o),this._attachItemClickEvent(e,o);const r=this._getItemContent(o),a=this._renderItemContent({index:s,itemData:e,container:ze(r),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),l=this;return De(a).done(d=>{l._postprocessRenderItem({itemElement:o,itemContent:d,itemData:e,itemIndex:s}),l._executeItemRenderAction(i,e,ze(o))}),o},_getItemContent(i){const e=i.find(".dx-item-content-placeholder");return e.removeClass("dx-item-content-placeholder"),e},_attachItemClickEvent(i,e){!i||!i.onClick||q.on(e,kt,t=>{this._itemEventHandlerByHandler(e,i.onClick,{event:t})})},_renderItemContent(i){const e=this._getItemTemplateName(i),t=this._getTemplate(e);this._addItemContentClasses(i);const n=R(this._createItemByTemplate(t,i));return n.hasClass("dx-template-wrapper")?this._renderItemContentByNode(i,n):i.container},_renderItemContentByNode(i,e){return R(i.container).replaceWith(e),i.container=ze(e),this._addItemContentClasses(i),e},_addItemContentClasses(i){const e=[Fd+"-content",i.contentClass];R(i.container).addClass(e.join(" "))},_appendItemToContainer(i,e,t){e.appendTo(i)},_renderItemFrame(i,e,t,n){const s=R("<div>");if(new this.constructor.ItemClass(s,this._itemOptions(),e||{}),n&&n.length?n.replaceWith(s):this._appendItemToContainer.call(this,t,s,i),this.option("useItemTextAsTitle")){const o=this._displayGetter?this._displayGetter(e):e;s.attr("title",o)}return s},_itemOptions(){const i=this;return{watchMethod:()=>i.option("integrationOptions.watchMethod"),owner:i,fieldGetter(e){const t=i.option(`${e}Expr`);return Nt(t)}}},_postprocessRenderItem:ue,_executeItemRenderAction(i,e,t){this._getItemRenderAction()({itemElement:t,itemIndex:i,itemData:e})},_setElementData(i,e,t){i.addClass([Fd,this._itemClass()].join(" ")).data(this._itemDataKey(),e).data(this._itemIndexKey(),t)},_createItemRenderAction(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName(i){const e=i.itemData,t=i.templateProperty||this.option("itemTemplateProperty");return e&&e[t]||i.defaultTemplateName},_createItemByTemplate(i,e){return i.render({model:e.itemData,container:e.container,index:e.index,onRendered:this._onItemTemplateRendered(i,e)})},_onItemTemplateRendered:()=>ue,_emptyMessageContainer(){return this._itemContainer()},_renderEmptyMessage(i){i=i||this.option("items");const e=this.option("noDataText"),t=!e||i&&i.length||this._dataController.isLoading();t&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),t||(this._$noData=this._$noData||R("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(e):this._$noData.html(e)),this.$element().toggleClass(O6,!t)},_itemDXEventHandler(i,e,t,n){this._itemEventHandler(i.target,e,Y(t,{event:i}),n)},_itemEventHandler(i,e,t,n){const s=this._createActionByOption(e,Y({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(i,s,t)},_itemEventHandlerByHandler(i,e,t,n){const s=this._createAction(e,Y({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(i,s,t)},_itemEventHandlerImpl(i,e,t){const n=this._closestItemElement(R(i)),s=Y({},t);return e(Y(t,this._extendActionArgs(n),s))},_extendActionArgs(i){return{itemElement:ze(i),itemIndex:this._itemElements().index(i),itemData:this._getItemData(i)}},_closestItemElement(i){return R(i).closest(this._itemSelector())},_getItemData(i){return R(i).data(this._itemDataKey())},_getSummaryItemsSize(i,e,t){let n=0;return e&&ie(e,(s,o)=>{i==="width"?n+=St(o,t||!1):i==="height"&&(n+=rt(o,t||!1))}),n},getFocusedItemId(){return this._focusedItemId||(this._focusedItemId=`dx-${new hi}`),this._focusedItemId},itemElements(){return this._itemElements()},itemsContainer(){return this._itemContainer()}}).include(H1);z1.ItemClass=Tr;const{abstract:fn}=Lt,M6=Lt.inherit({ctor(i){this._collectionWidget=i},getIndexByItemData:fn,getItemDataByIndex:fn,getKeysByItems:fn,getItemsByKeys:fn,itemsGetter:fn,getKeyByIndex(i){const e=this._denormalizeItemIndex(i);return this.getKeysByItems([this.getItemDataByIndex(e)])[0]},_equalKeys(i,e){return this._collectionWidget._isKeySpecified()?zt(i,e):i===e},beginCache(){this._cache={}},endCache(){this._cache=null},getIndexByKey:fn,getNormalizedIndex(i){return this._isNormalizedItemIndex(i)?i:this._isItemIndex(i)?this._normalizeItemIndex(i):this._isNode(i)?this._getNormalizedItemIndex(i):this._normalizeItemIndex(this.getIndexByItemData(i))},getIndex(i){return this._isNormalizedItemIndex(i)?this._denormalizeItemIndex(i):this._isItemIndex(i)?i:this._isNode(i)?this._denormalizeItemIndex(this._getNormalizedItemIndex(i)):this.getIndexByItemData(i)},getItemElement(i){if(this._isNormalizedItemIndex(i))return this._getItemByNormalizedIndex(i);if(this._isItemIndex(i))return this._getItemByNormalizedIndex(this._normalizeItemIndex(i));if(this._isNode(i))return R(i);const e=this._normalizeItemIndex(this.getIndexByItemData(i));return this._getItemByNormalizedIndex(e)},_isNode:i=>_e.isNode(i&&Cn(i)?i.get(0):i),deleteItemAtIndex:fn,itemPlacementFunc(i,e){return this._itemsFromSameParent(i,e)&&i<e?"after":"before"},moveItemAtIndexToIndex:fn,_isNormalizedItemIndex:i=>typeof i=="number"&&Math.round(i)===i,_isItemIndex:fn,_getNormalizedItemIndex:fn,_normalizeItemIndex:fn,_denormalizeItemIndex:fn,_getItemByNormalizedIndex:fn,_itemsFromSameParent:fn}),Wm=M6.inherit({_getPlainItems(){return this._collectionWidget.option("items")||[]},getIndexByItemData(i){const e=this._collectionWidget.keyOf.bind(this._collectionWidget);return e?this.getIndexByKey(e(i)):this._getPlainItems().indexOf(i)},getItemDataByIndex(i){return this._getPlainItems()[i]},deleteItemAtIndex(i){this._getPlainItems().splice(i,1)},itemsGetter(){return this._getPlainItems()},getKeysByItems(i){const e=this._collectionWidget.keyOf.bind(this._collectionWidget);let t=i;if(e){t=[];for(let n=0;n<i.length;n++)t.push(e(i[n]))}return t},getIndexByKey(i){const e=this._cache,t=e&&e.keys||this.getKeysByItems(this._getPlainItems());if(e&&!e.keys&&(e.keys=t),typeof i=="object"){for(let n=0,{length:s}=t;n<s;n++)if(this._equalKeys(i,t[n]))return n}else return t.indexOf(i);return-1},getItemsByKeys:(i,e)=>(e||i).slice(),moveItemAtIndexToIndex(i,e){const t=this._getPlainItems(),n=t[i];t.splice(i,1),t.splice(e,0,n)},_isItemIndex:i=>typeof i=="number"&&Math.round(i)===i,_getNormalizedItemIndex(i){return this._collectionWidget._itemElements().index(i)},_normalizeItemIndex:i=>i,_denormalizeItemIndex:i=>i,_getItemByNormalizedIndex(i){return i>-1?this._collectionWidget._itemElements().eq(i):null},_itemsFromSameParent:()=>!0}),Jn=function(i){return i!==-1},Dr=z1.inherit({_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions(){return Y(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor(i,e){this._userOptions=e||{},this.callBase(i,e)},_init(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter(){this._keyGetter=Nt(this.option("keyExpr"))},_getKeysByItems(i){return this._editStrategy.getKeysByItems(i)},_getItemsByKeys(i,e){return this._editStrategy.getItemsByKeys(i,e)},_getKeyByIndex(i){return this._editStrategy.getKeyByIndex(i)},_getIndexByKey(i){return this._editStrategy.getIndexByKey(i)},_getIndexByItemData(i){return this._editStrategy.getIndexByItemData(i)},_isKeySpecified(){return!!this._dataController.key()},_getCombinedFilter(){return this._dataController.filter()},key(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf(i){let e=i;return this.option("keyExpr")?e=this._keyGetter(i):this._dataController.store()&&(e=this._dataController.keyOf(i)),e},_nullValueSelectionSupported:()=>!1,_initSelectionModule(){const i=this,{itemsGetter:e}=i._editStrategy;this._selection=new $1({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged(t){(t.addedItemKeys.length||t.removedItemKeys.length)&&(i.option("selectedItems",i._getItemsByKeys(t.selectedItemKeys,t.selectedItems)),i._updateSelectedItems(t))},filter:i._getCombinedFilter.bind(i),totalCount(){const t=i.option("items"),n=i._dataController.totalCount();return n>=0?n:i._getItemsCount(t)},key:i.key.bind(i),keyOf:i.keyOf.bind(i),load(t){var n;const s=i._dataController;return t.customQueryParams=(n=s.loadOptions())===null||n===void 0?void 0:n.customQueryParams,t.userData=s.userData(),s.store()?s.loadFromStore(t).done(o=>{if(i._disposed)return;const r=Nx(o).data;s.applyMapFunction(r)}):ae().resolve(this.plainItems())},dataFields:()=>i._dataController.select(),plainItems:e.bind(i._editStrategy)})},_getItemsCount(i){return i.reduce((e,t)=>e+(t.items?this._getItemsCount(t.items):1),0)},_initEditStrategy(){const i=Wm;this._editStrategy=new i(this)},_getSelectedItemIndices(i){const e=this,t=[];return i=i||this._selection.getSelectedItemKeys(),e._editStrategy.beginCache(),ie(i,(n,s)=>{const o=e._getIndexByKey(s);Jn(o)&&t.push(o)}),e._editStrategy.endCache(),t},_initMarkup(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done(()=>this._normalizeSelectedItems()),this.callBase()},_render(){this.callBase(),this._rendering=!1},_fireContentReadyAction(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions(i){i=i||this._chooseSelectOption();let e,t,n,s;switch(i){case"selectedIndex":e=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),U(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedItem",e),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(s=this.option("selectedItems")||[],t=s.length?this._editStrategy.getIndexByItemData(s[0]):-1,this.option("selectionRequired")&&!Jn(t))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",s[0]),this._setOptionWithoutOptionChange("selectedIndex",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(s));break;case"selectedItem":if(e=this.option("selectedItem"),t=this._editStrategy.getIndexByItemData(e),this.option("selectionRequired")&&!Jn(t))return this._syncSelectionOptions("selectedIndex");U(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedIndex",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(n=this.option("selectedItemKeys"),this.option("selectionRequired")){const o=this._getIndexByKey(n[0]);if(!Jn(o))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(n)}return ae().resolve().promise()},_chooseSelectOption(){let i="selectedIndex";const e=(function(t){const n=this.option(t);return U(n)&&n.length||t in this._userOptions}).bind(this);return e("selectedItems")?i="selectedItems":e("selectedItem")?i="selectedItem":e("selectedItemKeys")&&(i="selectedItemKeys"),i},_compareKeys(i,e){if(i.length!==e.length)return!1;for(let t=0;t<e.length;t++)if(i[t]!==e[t])return!1;return!0},_normalizeSelectedItems(){if(this.option("selectionMode")==="none")this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if(this.option("selectionMode")==="single"){const i=this.option("selectedItems");if(i.length>1||!i.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){const e=this._selection.getSelectedItems();let t=i[0]===void 0?e[0]:i[0];return t===void 0&&(t=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&t&&t.items&&(t.items=[t.items[0]]),this._selection.setSelection(this._getKeysByItems([t])),this._setOptionWithoutOptionChange("selectedItems",[t]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(i))}else{const i=this._getKeysByItems(this.option("selectedItems")),e=this._selection.getSelectedItemKeys();this._compareKeys(e,i)||this._selection.setSelection(i)}return ae().resolve().promise()},_itemClickHandler(i){let e=ae().resolve();const{callBase:t}=this;this._createAction(n=>{e=this._itemSelectHandler(n.event)??e},{validatingTargetName:"itemElement"})({itemElement:R(i.currentTarget),event:i}),e.always(()=>{t.apply(this,arguments)})},_itemSelectHandler(i){var e;let t;if(!this.option("selectByClick"))return;const n=i.currentTarget;return this.isItemSelected(n)?this.unselectItem(i.currentTarget):t=this.selectItem(i.currentTarget),(e=t)===null||e===void 0?void 0:e.promise()},_selectedItemElement(i){return this._itemElements().eq(i)},_postprocessRenderItem(i){if(this.option("selectionMode")!=="none"){const e=R(i.itemElement),t=this._editStrategy.getNormalizedIndex(e),n=this._isItemSelected(t);this._processSelectableItem(e,n)}},_processSelectableItem(i,e){i.toggleClass(this._selectedItemClass(),e),this._setAriaSelectionAttribute(i,String(e))},_updateSelectedItems(i){const e=this,{addedItemKeys:t}=i,{removedItemKeys:n}=i;if(e._rendered&&(t.length||n.length)){const s=e._selectionChangePromise;if(!e._rendering){const o=[];let r;const a=[];e._editStrategy.beginCache();for(let l=0;l<t.length;l++)r=e._getIndexByKey(t[l]),o.push(r),e._addSelection(r);for(let l=0;l<n.length;l++)r=e._getIndexByKey(n[l]),a.push(r),e._removeSelection(r);e._editStrategy.endCache(),e._updateSelection(o,a)}De(s).done(()=>{e._fireSelectionChangeEvent(i.addedItems,i.removedItems)})}},_fireSelectionChangeEvent(i,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:i,removedItems:e})},_updateSelection:ue,_setAriaSelectionAttribute(i,e){this.setAria("selected",e,i)},_removeSelection(i){const e=this._editStrategy.getItemElement(i);Jn(i)&&(this._processSelectableItem(e,!1),q.triggerHandler(e,"stateChanged",!1))},_addSelection(i){const e=this._editStrategy.getItemElement(i);Jn(i)&&(this._processSelectableItem(e,!0),q.triggerHandler(e,"stateChanged",!0))},_isItemSelected(i){const e=this._getKeyByIndex(i);return this._selection.isItemSelected(e,{checkPending:!0})},_optionChanged(i){switch(i.name){case"selectionMode":this._invalidate();break;case"dataSource":(!i.value||Array.isArray(i.value)&&!i.value.length)&&this.option("selectedItemKeys",[]),this.callBase(i);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(i.name).done(()=>this._normalizeSelectedItems());break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(i)}},_clearSelectedItems(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare(i){if(i.data("dxItemDeleting"))return ae().resolve().promise();i.data("dxItemDeleting",!0);const e=ae(),t={cancel:!1},n=this._itemEventHandler(i,"onItemDeleting",t,{excludeValidators:["disabled","readOnly"]});return De(n).always(function(s){const o=!n,r=!o&&n.state()==="resolved",a=!!arguments.length,l=o||r&&!a||r&&s;De(Pi(t.cancel)).always(()=>{i.data("dxItemDeleting",!1)}).done(d=>{l&&!d?e.resolve():e.reject()}).fail(e.reject)}),e.promise()},_deleteItemFromDS(i){const e=this._dataController,t=ae(),n=this.option("disabled"),s=e.store();if(!s)return ae().resolve().promise();if(!s.remove)throw mt.Error("E1011");return this.option("disabled",!0),s.remove(e.keyOf(this._getItemData(i))).done(o=>{o!==void 0?t.resolve():t.reject()}).fail(()=>{t.reject()}),t.always(()=>{this.option("disabled",n)}),t},_tryRefreshLastPage(){const i=ae();return this._isLastPage()||this.option("grouped")?i.resolve():this._refreshLastPage().done(()=>{i.resolve()}),i.promise()},_refreshLastPage(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete(i){const e=this._getKeyByIndex(i);this._selection.deselect([e])},_updateIndicesAfterIndex(i){const e=this._itemElements();for(let t=i+1;t<e.length;t++)R(e[t]).data(this._itemIndexKey(),t-1)},_simulateOptionChange(i){const e=this.option(i);e instanceof Dn||this._optionChangedAction({name:i,fullName:i,value:e})},isItemSelected(i){return this._isItemSelected(this._editStrategy.getNormalizedIndex(i))},selectItem(i){if(this.option("selectionMode")==="none")return;const e=this._editStrategy.getNormalizedIndex(i);if(!Jn(e))return;const t=this._getKeyByIndex(e);if(this._selection.isItemSelected(t))return;if(this.option("selectionMode")==="single")return this._selection.setSelection([t]);const n=this.option("selectedItemKeys")||[];return this._selection.setSelection([...n,t],[t])},unselectItem(i){const e=this._editStrategy.getNormalizedIndex(i);if(!Jn(e))return;const t=this._selection.getSelectedItemKeys();if(this.option("selectionRequired")&&t.length<=1)return;const n=this._getKeyByIndex(e);this._selection.isItemSelected(n,{checkPending:!0})&&this._selection.deselect([n])},_deleteItemElementByIndex(i){this._updateSelectionAfterDelete(i),this._updateIndicesAfterIndex(i),this._editStrategy.deleteItemAtIndex(i)},_afterItemElementDeleted(i,e){const t=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(t),this._itemEventHandler(i,"onItemDeleted",e,{beforeExecute(){i.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem(i){const e=this,t=ae(),n=this._editStrategy.getItemElement(i),s=this._editStrategy.getNormalizedIndex(i),o=this._itemResponseWaitClass();return Jn(s)?this._waitDeletingPrepare(n).done(()=>{n.addClass(o);const r=e._extendActionArgs(n);e._deleteItemFromDS(n).done(()=>{e._deleteItemElementByIndex(s),e._afterItemElementDeleted(n,r),e._tryRefreshLastPage().done(()=>{t.resolveWith(e)})}).fail(()=>{n.removeClass(o),t.rejectWith(e)})}).fail(()=>{t.rejectWith(e)}):t.rejectWith(e),t.promise()},reorderItem(i,e){const t=ae(),n=this,s=this._editStrategy,o=s.getItemElement(i),r=s.getItemElement(e),a=s.getNormalizedIndex(i),l=s.getNormalizedIndex(e),d=this._dataController.getDataSource()?"dataSource":"items";return Jn(a)&&Jn(l)&&a!==l?t.resolveWith(this):t.rejectWith(this),t.promise().done(function(){r[s.itemPlacementFunc(a,l)](o),s.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),n.option("selectedItems",n._getItemsByKeys(n._selection.getSelectedItemKeys(),n._selection.getSelectedItems())),d==="items"&&n._simulateOptionChange(d),n._itemEventHandler(o,"onItemReordered",{fromIndex:s.getIndex(a),toIndex:s.getIndex(l)},{excludeValidators:["disabled","readOnly"]})})}}),kb=Je(),P6={observe:ue,unobserve:ue,disconnect:ue};class B6{constructor(){if(!qe()||!kb.ResizeObserver)return P6;this._callbacksMap=new Map,this._observer=new kb.ResizeObserver(e=>{e.forEach(t=>{var n;(n=this._callbacksMap.get(t.target))===null||n===void 0||n(t)})})}observe(e,t){this._callbacksMap.set(e,t),this._observer.observe(e)}unobserve(e){this._callbacksMap.delete(e),this._observer.unobserve(e)}disconnect(){this._callbacksMap.clear(),this._observer.disconnect()}}const ar=new B6,F6=/^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i,wi={valid:"valid",invalid:"invalid",pending:"pending"};class Fo{constructor(){this.NAME="base"}defaultMessage(e){return re.getFormatter(`validation-${this.NAME}`)(e)}defaultFormattedMessage(e){return re.getFormatter(`validation-${this.NAME}-formatted`)(e)}_isValueEmpty(e){return!td.required.validate(e,{})}validate(e,t){const n=Array.isArray(e)?e:[e];let s=!0;return n.length?n.every(o=>(s=this._validate(o,t),s)):s=this._validate(null,t),s}}class V6 extends Fo{constructor(){super(),this.NAME="required"}_validate(e,t){return!U(e)||e===!1?!1:(e=String(e),(t.trim||!U(t.trim))&&(e=e.trim()),e!=="")}}class N6 extends Fo{constructor(){super(),this.NAME="numeric"}_validate(e,t){return t.ignoreEmptyValue!==!1&&this._isValueEmpty(e)?!0:t.useCultureSettings&&Ke(e)?!isNaN(Gt.parse(e)):Wt(e)}}class L6 extends Fo{constructor(){super(),this.NAME="range"}_validate(e,t){if(t.ignoreEmptyValue!==!1&&this._isValueEmpty(e))return!0;const n=td.numeric.validate(e,t),s=U(e)&&e!=="",o=n?parseFloat(e):s&&e.valueOf(),{min:r}=t,{max:a}=t;if(!(n||yn(e))&&!s)return!1;if(U(r))return U(a)?o>=r&&o<=a:o>=r;if(U(a))return o<=a;throw Pt.Error("E0101")}}class $6 extends Fo{constructor(){super(),this.NAME="stringLength"}_validate(e,t){return e=String(e??""),(t.trim||!U(t.trim))&&(e=e.trim()),t.ignoreEmptyValue&&this._isValueEmpty(e)?!0:td.range.validate(e.length,Y({},t))}}class W1 extends Fo{constructor(){super(),this.NAME="custom"}validate(e,t){if(t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const{validator:n}=t,s=n&&Ee(n.option)&&n.option("dataGetter"),o=Ee(s)&&s(),r={value:e,validator:n,rule:t};return o&&Y(r,o),t.validationCallback(r)}}class H6 extends W1{constructor(){super(),this.NAME="async"}validate(e,t){if(U(t.reevaluate)||Y(t,{reevaluate:!0}),t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const{validator:n}=t,s=n&&Ee(n.option)&&n.option("dataGetter"),o=Ee(s)&&s(),r={value:e,validator:n,rule:t};o&&Y(r,o);const a=t.validationCallback(r);if(!ba(a))throw Pt.Error("E0103");return this._getWrappedPromise(Pi(a).promise())}_getWrappedPromise(e){const t=ae();return e.then(n=>{t.resolve(n)},n=>{const s={isValid:!1};U(n)&&(Ke(n)?s.message=n:We(n)&&U(n.message)&&Ke(n.message)&&(s.message=n.message)),t.resolve(s)}),t.promise()}}class z6 extends Fo{constructor(){super(),this.NAME="compare"}_validate(e,t){if(!t.comparisonTarget)throw Pt.Error("E0102");if(t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;Y(t,{reevaluate:!0});const n=t.comparisonTarget();switch(t.comparisonType||"=="){case"==":return e==n;case"!=":return e!=n;case"===":return e===n;case"!==":return e!==n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n}}}class W6 extends Fo{constructor(){super(),this.NAME="pattern"}_validate(e,t){if(t.ignoreEmptyValue!==!1&&this._isValueEmpty(e))return!0;let{pattern:n}=t;return Ke(n)&&(n=new RegExp(n)),n.test(e)}}class j6 extends Fo{constructor(){super(),this.NAME="email"}_validate(e,t){return t.ignoreEmptyValue!==!1&&this._isValueEmpty(e)?!0:td.pattern.validate(e,Y({},t,{pattern:F6}))}}const td={required:new V6,numeric:new N6,range:new L6,stringLength:new $6,custom:new W1,async:new H6,compare:new z6,pattern:new W6,email:new j6},K6=Lt.inherit({ctor(i,e){this.group=i,this.validators=[],this._isRemovable=e,this._pendingValidators=[],this._onValidatorStatusChanged=this._onValidatorStatusChanged.bind(this),this._resetValidationInfo(),this._eventsStrategy=new wr(this)},validate(){const i={isValid:!0,brokenRules:[],validators:[],status:wi.valid,complete:null};return this._unsubscribeFromAllChangeEvents(),this._pendingValidators=[],this._resetValidationInfo(),ie(this.validators,(e,t)=>{const n=t.validate();i.isValid=i.isValid&&n.isValid,n.brokenRules&&(i.brokenRules=i.brokenRules.concat(n.brokenRules)),i.validators.push(t),n.status===wi.pending&&this._addPendingValidator(t),this._subscribeToChangeEvents(t)}),this._pendingValidators.length?i.status=wi.pending:(i.status=i.isValid?wi.valid:wi.invalid,this._unsubscribeFromAllChangeEvents(),this._raiseValidatedEvent(i)),this._updateValidationInfo(i),Y({},this._validationInfo.result)},_subscribeToChangeEvents(i){i.on("validating",this._onValidatorStatusChanged),i.on("validated",this._onValidatorStatusChanged)},_unsubscribeFromChangeEvents(i){i.off("validating",this._onValidatorStatusChanged),i.off("validated",this._onValidatorStatusChanged)},_unsubscribeFromAllChangeEvents(){ie(this.validators,(i,e)=>{this._unsubscribeFromChangeEvents(e)})},_updateValidationInfo(i){this._validationInfo.result=i,i.status===wi.pending&&(this._validationInfo.deferred||(this._validationInfo.deferred=ae(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()))},_addPendingValidator(i){ln(this._pendingValidators,t=>t===i)[0]||this._pendingValidators.push(i)},_removePendingValidator(i){const e=this._pendingValidators.indexOf(i);e>=0&&this._pendingValidators.splice(e,1)},_orderBrokenRules(i){let e=[];return ie(this.validators,(t,n)=>{const s=ln(i,o=>o.validator===n);s.length&&(e=e.concat(s))}),e},_updateBrokenRules(i){if(!this._validationInfo.result)return;let{brokenRules:e}=this._validationInfo.result;const t=ln(e,n=>n.validator!==i.validator);i.brokenRules&&(e=t.concat(i.brokenRules)),this._validationInfo.result.brokenRules=this._orderBrokenRules(e)},_onValidatorStatusChanged(i){if(i.status===wi.pending){this._addPendingValidator(i.validator);return}this._resolveIfComplete(i)},_resolveIfComplete(i){if(this._removePendingValidator(i.validator),this._updateBrokenRules(i),!this._pendingValidators.length){if(this._unsubscribeFromAllChangeEvents(),!this._validationInfo.result)return;this._validationInfo.result.status=this._validationInfo.result.brokenRules.length===0?wi.valid:wi.invalid,this._validationInfo.result.isValid=this._validationInfo.result.status===wi.valid;const e=Y({},this._validationInfo.result,{complete:null}),{deferred:t}=this._validationInfo;this._validationInfo.deferred=null,this._raiseValidatedEvent(e),t&&setTimeout(()=>{t.resolve(e)})}},_raiseValidatedEvent(i){this._eventsStrategy.fireEvent("validated",[i])},_resetValidationInfo(){this._validationInfo={result:null,deferred:null}},_synchronizeValidationInfo(){this._validationInfo.result&&(this._validationInfo.result.validators=this.validators)},removeRegisteredValidator(i){const e=this.validators.indexOf(i);e>-1&&(this.validators.splice(e,1),this._synchronizeValidationInfo(),this._resolveIfComplete({validator:i}))},registerValidator(i){this.validators.includes(i)||(this.validators.push(i),this._synchronizeValidationInfo())},reset(){ie(this.validators,(i,e)=>{e.reset()}),this._pendingValidators=[],this._resetValidationInfo()},on(i,e){return this._eventsStrategy.on(i,e),this},off(i,e){return this._eventsStrategy.off(i,e),this}}),Ft={groups:[],getGroupConfig(i){const e=ln(this.groups,t=>t.group===i);if(e.length)return e[0]},findGroup(i,e){var t;const s=((t=i.data())===null||t===void 0||(t=t.dxComponents)===null||t===void 0?void 0:t.includes("dxValidationGroup"))&&i.dxValidationGroup("instance");if(s)return s;const o=i.parents(".dx-validationgroup").first();return o.length?o.dxValidationGroup("instance"):e},initGroups(){this.groups=[],this.addGroup(void 0,!1)},addGroup(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.getGroupConfig(i);return t||(t=new K6(i,e),this.groups.push(t)),t},removeGroup(i){const e=this.getGroupConfig(i),t=this.groups.indexOf(e);return t>-1&&this.groups.splice(t,1),e},_setDefaultMessage(i){const{rule:e,validator:t,name:n}=i;U(e.message)||(t.defaultFormattedMessage&&U(n)?e.message=t.defaultFormattedMessage(n):e.message=t.defaultMessage())},_addBrokenRule(i){const{result:e,rule:t}=i;e.brokenRule||(e.brokenRule=t),e.brokenRules||(e.brokenRules=[]),e.brokenRules.push(t)},validate(i,e,t){var n;let s={name:t,value:i,brokenRule:null,brokenRules:null,isValid:!0,validationRules:e,pendingRules:null,status:wi.valid,complete:null};const o=e==null||(n=e[0])===null||n===void 0?void 0:n.validator,r=[];return ie(e||[],(a,l)=>{const d=td[l.type];let c;if(d){if(U(l.isValid)&&l.value===i&&!l.reevaluate)return l.isValid?!0:(s.isValid=!1,this._addBrokenRule({result:s,rule:l}),!1);if(l.value=i,l.type==="async")return r.push({rule:l,ruleValidator:d}),!0;if(c=d.validate(i,l),l.isValid=c,c||(s.isValid=!1,this._setDefaultMessage({rule:l,validator:d,name:t}),this._addBrokenRule({result:s,rule:l})),!l.isValid)return!1}else throw Pt.Error("E0100")}),s.isValid&&!s.brokenRules&&r.length&&(s=this._validateAsyncRules({value:i,items:r,result:s,name:t})),this._synchronizeGroupValidationInfo(o,s),s.status=s.pendingRules?wi.pending:s.isValid?wi.valid:wi.invalid,s},_synchronizeGroupValidationInfo(i,e){if(!i)return;const t=Ft.getGroupConfig(i._validationGroup);t._updateBrokenRules.call(t,{validator:i,brokenRules:e.brokenRules??[]})},_validateAsyncRules(i){let{result:e,value:t,items:n,name:s}=i;const o=[];return ie(n,(r,a)=>{const l=a.ruleValidator.validate(t,a.rule);if(!ba(l))this._updateRuleConfig({rule:a.rule,ruleResult:this._getPatchedRuleResult(l),validator:a.ruleValidator,name:s});else{e.pendingRules||(e.pendingRules=[]),e.pendingRules.push(a.rule);const d=l.then(c=>{const h=this._getPatchedRuleResult(c);return this._updateRuleConfig({rule:a.rule,ruleResult:h,validator:a.ruleValidator,name:s}),h});o.push(d)}}),o.length&&(e.complete=Promise.all(o).then(r=>this._getAsyncRulesResult({result:e,values:r}))),e},_updateRuleConfig(i){let{rule:e,ruleResult:t,validator:n,name:s}=i;e.isValid=t.isValid,t.isValid||(U(t.message)&&Ke(t.message)&&t.message.length?e.message=t.message:this._setDefaultMessage({rule:e,validator:n,name:s}))},_getPatchedRuleResult(i){let e;return We(i)?(e=Y({},i),U(e.isValid)||(e.isValid=!0)):e={isValid:hl(i)?i:!0},e},_getAsyncRulesResult(i){let{values:e,result:t}=i;return ie(e,(n,s)=>{if(s.isValid===!1){t.isValid=s.isValid;const o=t.pendingRules[n];this._addBrokenRule({result:t,rule:o})}}),t.pendingRules=null,t.complete=null,t.status=t.isValid?wi.valid:wi.invalid,t},registerValidatorInGroup(i,e){const t=Ft.addGroup(i);t.registerValidator.call(t,e)},removeRegisteredValidator(i,e){const t=Ft.getGroupConfig(i);if(t){t.removeRegisteredValidator.call(t,e);const n=t.validators,s=t._isRemovable;n.length===0&&s&&this.removeGroup(i)}},initValidationOptions(i){const e={};return i&&["isValid","validationStatus","validationError","validationErrors"].forEach(n=>{n in i&&Y(e,this.synchronizeValidationOptions({name:n,value:i[n]},i))}),e},synchronizeValidationOptions(i,e){let{name:t,value:n}=i;switch(t){case"validationStatus":{const s=n===wi.valid||n===wi.pending;return e.isValid!==s?{isValid:s}:{}}case"isValid":{const{validationStatus:s}=e;let o=s;return n&&s===wi.invalid?o=wi.valid:!n&&s!==wi.invalid&&(o=wi.invalid),o!==s?{validationStatus:o}:{}}case"validationErrors":{const s=!n||!n.length?null:n[0];return e.validationError!==s?{validationError:s}:{}}case"validationError":{const{validationErrors:s}=e;if(!n&&s)return{validationErrors:null};if(n&&!s)return{validationErrors:[n]};if(n&&s&&n!==s[0])return s[0]=n,{validationErrors:s.slice()}}}return{}},validateGroup(i){const e=Ft.getGroupConfig(i);if(!e)throw Pt.Error("E0110");return e.validate()},resetGroup(i){const e=Ft.getGroupConfig(i);if(!e)throw Pt.Error("E0110");return e.reset()}};Ft.initGroups();const Vd="dx-invalid-message",G6="dx-invalid-message-auto",U6="dx-invalid-message-always",q6="dx-invalid-message-content",jm=is.inherit({_getDefaultOptions(){return Y(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,preventScrollEvents:!1,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget(){const{target:i}=this.option();this.option("position.of",i)},_ensureMessageNotEmpty(){this._textMarkup=this._getTextMarkup();const i=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(i)},_toggleVisibilityClasses(i){i?(this.$element().addClass(Vd),this.$wrapper().addClass(Vd)):(this.$element().removeClass(Vd),this.$wrapper().removeClass(Vd))},_updateContentId(){const{container:i,contentId:e}=this.option(),t=e??R(i).attr("aria-describedby");this.$content().addClass(q6).attr("id",t)},_renderInnerHtml(i){const e=i&&R(i);e==null||e.html(this._textMarkup)},_getTextMarkup(){const i=this.option("validationErrors")??[];let e="";return i.forEach(t=>{e+=(e?"<br />":"")+mC((t==null?void 0:t.message)??"")}),e},_toggleModeClass(){const i=this.option("mode");this.$wrapper().toggleClass(G6,i==="auto").toggleClass(U6,i==="always")},updateMaxWidth(){const i=this.option("target"),e=St(i);let t="100%";e&&(t=Math.max(e,100)),this.option({maxWidth:t})},_getPositionsArray(i,e){switch(i){case"top":return[`${e} bottom`,`${e} top`];case"left":return["right","left"];case"right":return["left","right"];default:return[`${e} top`,`${e} bottom`]}},_updatePosition(){const{positionSide:i,rtlEnabled:e,offset:t,boundary:n}=this.option(),s=Po(e),o=this._getPositionsArray(i,s),r=ve({},t);this.$element().addClass(`dx-invalid-message-${i}`),e&&i!=="left"&&i!=="right"&&(r.h=-r.h),i==="top"&&(r.v=-r.v),i==="left"&&(r.h=-r.h),this.option("position",{offset:r,boundary:n,my:o[0],at:o[1],collision:"none flip"})},_optionChanged(i){const{name:e,value:t,previousValue:n}=i;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(i);break;case"boundary":this.option("position.boundary",t);break;case"mode":this._toggleModeClass(t);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass(`dx-invalid-message-${n}`),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(i);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(i)}}});wt("dxValidationMessage",jm);const Ob="dx-invalid-message-auto",Y6="dx-show-invalid-badge",Rb="dx-validation-target",X6=["outlined","filled","underlined"],Mb={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},ns=Hi.inherit({ctor(){this.showValidationMessageTimeout=null,this.validationRequest=Tt(),this.callBase.apply(this,arguments)},_createElement(i){this.callBase(i);const e=this.$element();e&&di(e[0],Rb,this)},_initOptions(i){this.callBase.apply(this,arguments),this.option(Ft.initValidationOptions(i))},_init(){this._initialValue=this.option("value"),this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass(Y6)},_getDefaultOptions(){return Y(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0,isDirty:!1})},_attachKeyboardEvents(){this.option("readOnly")||this.callBase()},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{validationError:!0})},_createValueChangeAction(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction(){this._valueChangeActionSuppressed=!1},_initMarkup(){var i;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),(i=this.option("_onMarkupRendered"))===null||i===void 0||i()},_raiseValueChangeAction(i,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(i,e))},_valueChangeArgs(i,e){return{value:i,previousValue:e,event:this._valueChangeEventInstance}},_saveValueChangeEvent(i){this._valueChangeEventInstance=i},_focusInHandler(i){const e=this.option("validationMessageMode")==="auto";if(this._canValueBeChangedByClick()&&e){var t;const n=(t=this._validationMessage)===null||t===void 0?void 0:t.$wrapper();n==null||n.removeClass(Ob),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>n==null?void 0:n.addClass(Ob),150)}return this.callBase(i)},_canValueBeChangedByClick:()=>!1,_getStylingModePrefix:()=>"dx-editor-",_renderStylingMode(){const i=this.option("stylingMode"),e=this._getStylingModePrefix(),t=X6.map(s=>e+s);t.forEach(s=>this.$element().removeClass(s));let n=e+i;if(!t.includes(n)){const s=this._getDefaultOptions().stylingMode,o=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;n=e+(o||s)}this.$element().addClass(n)},_getValidationErrors(){let i=this.option("validationErrors");return!i&&this.option("validationError")&&(i=[this.option("validationError")]),i},_disposeValidationMessage(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses(i){this.$element().toggleClass("dx-invalid",i),this.setAria("invalid",i||void 0)},_renderValidationState(){const i=this.option("isValid")&&this.option("validationStatus")!=="invalid",e=this._getValidationErrors(),t=this.$element();if(this._toggleValidationClasses(!i),!(!qe()||this.option("_showValidationMessage")===!1)&&(this._disposeValidationMessage(),!i&&e)){const{validationMessageMode:n,validationMessageOffset:s,validationBoundary:o,rtlEnabled:r}=this.option();this._$validationMessage=R("<div>").appendTo(t);const a=`dx-${new hi}`;this.setAria("describedby",a),this._validationMessage=new jm(this._$validationMessage,Y({validationErrors:e,rtlEnabled:r,target:this._getValidationMessageTarget(),visualContainer:t,mode:n,positionSide:this._getValidationMessagePosition(),offset:s,boundary:o,contentId:a},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessagePosition(){return this.option("validationMessagePosition")},_getValidationMessageTarget(){return this.$element()},_toggleReadOnlyState(){const i=this.option("readOnly");this._toggleBackspaceHandler(i),this.$element().toggleClass("dx-state-readonly",!!i),this._setAriaReadonly(i)},_setAriaReadonly(i){this.setAria("readonly",i||void 0)},_toggleBackspaceHandler(i){const e=this._keyboardEventBindingTarget(),t=be("keydown","editorReadOnly");q.off(e,t),i&&q.on(e,t,n=>{oi(n)==="backspace"&&n.preventDefault()})},_dispose(){const i=this.$element()[0];di(i,Rb,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName(i){const e=this._getSubmitElement();e&&(i.length>0?e.attr("name",i):e.removeAttr("name"))},_getSubmitElement:()=>null,_setValidationMessageOption(i){var e;let{name:t,value:n}=i;const s=Mb[t]?Mb[t]:t;(e=this._validationMessage)===null||e===void 0||e.option(s,n)},_hasActiveElement:ue,_optionChanged(i){var e;switch(i.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":i.value!=i.previousValue&&(this.option("isDirty",this._initialValue!==i.value),this.validationRequest.fire({value:i.value,editor:this})),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(i.value,i.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(i),(e=this._validationMessage)===null||e===void 0||e.updateMaxWidth();break;case"name":this._setSubmitElementName(i.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Ft.synchronizeValidationOptions(i,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(i);break;case"rtlEnabled":this._setValidationMessageOption(i),this.callBase(i);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,i);break;case"_showValidationMessage":case"isDirty":break;default:this.callBase(i)}},_resetToInitialValue(){this.option("value",this._initialValue)},blur(){this._hasActiveElement()&&Ca()},clear(){const i=this._getDefaultOptions();this.option("value",i.value)},reset(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=i),this._resetToInitialValue(),this.option("isDirty",!1),this.option("isValid",!0)}});ns.isEditor=i=>i instanceof ns;class ku{constructor(e,t,n){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=t,this.name=e,this.options=n||{}}_addPlaceMarker(e){this.$placeMarker=R("<div>").appendTo(e)}_addToContainer(e){const{$placeMarker:t,$container:n}=this;t?t.replaceWith(e):e.appendTo(n)}_attachEvents(e,t){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:e,options:t}=this;return t.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:e,$placeMarker:t}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),t&&t.remove()}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){const{instance:t,$element:n}=this._create();this.instance=t,this._attachEvents(t,n)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}const Z6=Ct.down;class J6 extends ku{_create(){const e=R("<span>").addClass("dx-clear-button-area").append(R("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){const{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,t){const{editor:n}=this,s=n.NAME;q.on(t,be(Z6,s),o=>{o.preventDefault(),o.pointerType!=="mouse"&&n._clearValueHandler(o)}),q.on(t,be(kt,s),o=>n._clearValueHandler(o))}_legacyRender(e,t){e.toggleClass("dx-show-clear-button",t)}update(){!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&super.update();const{editor:t,instance:n}=this,s=t.$element(),o=this._isVisible();n&&n.toggleClass("dx-state-invisible",!o),this._legacyRender(s,o)}}class Q6{constructor(e){this.NAME="dxLabel",this._props=e,this._id=`dx-texteditor-label-${new hi}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=R("<div>").addClass("dx-label-before"),this._$labelSpan=R("<span>"),this._$label=R("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=R("<div>").addClass("dx-label-after"),this._$root=R("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const e=be(kt,this.NAME),t=be(ql,this.NAME),n=be(U4,this.NAME);q.off(this._$labelSpan,e),q.off(this._$labelSpan,t),q.off(this._$labelSpan,n),this._isVisible()&&this._isOutsideMode()&&(q.on(this._$labelSpan,e,s=>{Je().getSelection().toString()===""&&(this._props.onClickHandler(),s.preventDefault())}),q.on(this._$labelSpan,t,s=>{this._props.onHoverHandler(s)}),q.on(this._$labelSpan,n,s=>{this._props.onActiveHandler(s)}))}_updateEditorLabelClass(e){if(this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),e){const t=this._props.mode==="floating"?"dx-texteditor-with-floating-label":"dx-texteditor-with-label";this._props.$editor.addClass(t),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside")}}_isOutsideMode(){return this._props.mode==="outside"}_updateEditorBeforeButtonsClass(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),e){const t=this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"";this._props.$editor.addClass(t)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const e=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:e}),this._updateLabelTransform()}}_updateLabelTransform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const n=(this._props.rtlEnabled?1:-1)*(Ge(this._$before)+e);this._$labelSpan.css("transform",`translateX(${n}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const e=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:e})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}var Sl=Array.isArray;function Uc(i){var e=typeof i;return e==="string"||e==="number"}function Vt(i){return i==null}function El(i){return i===null||i===!1||i===!0||i===void 0}function fi(i){return typeof i=="function"}function Il(i){return typeof i=="string"}function eP(i){return typeof i=="number"}function hn(i){return i===null}function tP(i){return i===void 0}function Vo(i,e){var t={};if(i)for(var n in i)t[n]=i[n];if(e)for(var s in e)t[s]=e[s];return t}function Km(i){return!hn(i)&&typeof i=="object"}var Fi={},iP="$F";function Gm(i){return i.substr(2).toLowerCase()}function j1(i,e){i.appendChild(e)}function Um(i,e,t){hn(t)?j1(i,e):i.insertBefore(e,t)}function nP(i,e){return e?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)}function sP(i,e,t){i.replaceChild(e,t)}function K1(i,e){i.removeChild(e)}function G1(i){for(var e=0;e<i.length;e++)i[e]()}function oP(i,e,t){var n=i.children;return t&4?n.$LI:t&8192?i.childFlags===2?n:n[e?0:n.length-1]:n}function Wn(i,e){for(var t;i;){if(t=i.flags,t&2033)return i.dom;i=oP(i,e,t)}return null}function id(i,e){do{var t=i.flags;if(t&2033){K1(e,i.dom);return}var n=i.children;if(t&4&&(i=n.$LI),t&8&&(i=n),t&8192)if(i.childFlags===2)i=n;else{for(var s=0,o=n.length;s<o;++s)id(n[s],e);return}}while(i)}function U1(i,e,t){do{var n=i.flags;if(n&2033){Um(e,i.dom,t);return}var s=i.children;if(n&4&&(i=s.$LI),n&8&&(i=s),n&8192)if(i.childFlags===2)i=s;else{for(var o=0,r=s.length;o<r;++o)U1(s[o],e,t);return}}while(i)}function q1(i,e,t){return i.constructor.getDerivedStateFromProps?Vo(t,i.constructor.getDerivedStateFromProps(e,t)):t}var Tl={v:!1},Pb={componentComparator:null,createVNode:null,renderComplete:null};function ol(i,e){i.textContent=e}function Y1(i,e){return Km(i)&&i.event===e.event&&i.data===e.data}function X1(i,e){for(var t in e)tP(i[t])&&(i[t]=e[t]);return i}function qm(i,e){return!!fi(i)&&(i(e),!0)}var rl="$";function Ou(i,e,t,n,s,o,r,a){this.childFlags=i,this.children=e,this.className=t,this.dom=null,this.flags=n,this.key=s===void 0?null:s,this.props=o===void 0?null:o,this.ref=r===void 0?null:r,this.type=a}function bi(i,e,t,n,s,o,r,a){var l=s===void 0?1:s,d=new Ou(l,n,t,i,r,o,a,e);return l===0&&J1(d,d.children),d}function rP(i,e,t){if(i&4)return t;var n=(i&32768?e.render:e).defaultHooks;return Vt(n)?t:Vt(t)?n:X1(t,n)}function aP(i,e,t){var n=(i&32768?e.render:e).defaultProps;return Vt(n)?t:Vt(t)?Vo(n,null):X1(t,n)}function lP(i,e){return i&12?i:e.prototype&&e.prototype.render?4:e.render?32776:8}function Jt(i,e,t,n,s){i=lP(i,e);var o=new Ou(1,null,null,i,n,aP(i,e,t),rP(i,e,s),e);return o}function nd(i,e){return new Ou(1,Vt(i)||i===!0||i===!1?"":i,null,16,e,null,null,null)}function eo(i,e,t){var n=bi(8192,8192,null,i,e,null,t,null);switch(n.childFlags){case 1:n.children=Ru(),n.childFlags=2;break;case 16:n.children=[nd(i)],n.childFlags=4;break}return n}function xn(i){var e=i.props;if(e){var t=i.flags;t&481&&(e.children!==void 0&&Vt(i.children)&&J1(i,e.children),e.className!==void 0&&(Vt(i.className)&&(i.className=e.className||null),e.className=void 0)),e.key!==void 0&&(i.key=e.key,e.key=void 0),e.ref!==void 0&&(t&8?i.ref=Vo(i.ref,e.ref):i.ref=e.ref,e.ref=void 0)}return i}function dP(i){var e=i.children,t=i.childFlags;return eo(t===2?Vi(e):e.map(Vi),t,i.key)}function Vi(i){var e=i.flags&-16385,t=i.props;if(e&14&&!hn(t)){var n=t;t={};for(var s in n)t[s]=n[s]}return e&8192?dP(i):new Ou(i.childFlags,i.children,i.className,e,i.key,t,i.ref,i.type)}function Ru(){return nd("",null)}function Z1(i,e,t,n){for(var s=i.length;t<s;t++){var o=i[t];if(!El(o)){var r=n+rl+t;if(Sl(o))Z1(o,e,0,r);else{if(Uc(o))o=nd(o,r);else{var a=o.key,l=Il(a)&&a[0]===rl;(o.flags&81920||l)&&(o=Vi(o)),o.flags|=65536,l?a.substring(0,n.length)!==n&&(o.key=n+a):hn(a)?o.key=r:o.key=n+a}e.push(o)}}}}function cP(i){switch(i){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case iP:return 8192;default:return 1}}function J1(i,e){var t,n=1;if(El(e))t=e;else if(Uc(e))n=16,t=e;else if(Sl(e)){for(var s=e.length,o=0;o<s;++o){var r=e[o];if(El(r)||Sl(r)){t=t||e.slice(0,o),Z1(e,t,o,"");break}else if(Uc(r))t=t||e.slice(0,o),t.push(nd(r,rl+o));else{var a=r.key,l=(r.flags&81920)>0,d=hn(a),c=Il(a)&&a[0]===rl;l||d||c?(t=t||e.slice(0,o),(l||c)&&(r=Vi(r)),(d||c)&&(r.key=rl+o),t.push(r)):t&&t.push(r),r.flags|=65536}}t=t||e,t.length===0?n=1:n=8}else t=e,t.flags|=65536,e.flags&81920&&(t=Vi(e)),n=2;return i.children=t,i.childFlags=n,i}function Mu(i){return El(i)||Uc(i)?nd(i,null):Sl(i)?eo(i,0,null):i.flags&16384?Vi(i):i}var Ho="http://www.w3.org/1999/xlink",Mh="http://www.w3.org/XML/1998/namespace",Bb={"xlink:actuate":Ho,"xlink:arcrole":Ho,"xlink:href":Ho,"xlink:role":Ho,"xlink:show":Ho,"xlink:title":Ho,"xlink:type":Ho,"xml:base":Mh,"xml:lang":Mh,"xml:space":Mh};function Pu(i){return{onClick:i,onDblClick:i,onFocusIn:i,onFocusOut:i,onKeyDown:i,onKeyPress:i,onKeyUp:i,onMouseDown:i,onMouseMove:i,onMouseUp:i,onTouchEnd:i,onTouchMove:i,onTouchStart:i}}var Q1=Pu(0),bf=Pu(null),eS=Pu(!0);function Fb(i,e){var t=e.$EV;return t||(t=e.$EV=Pu(null)),t[i]||++Q1[i]===1&&(bf[i]=bP(i)),t}function tS(i,e){var t=e.$EV;t&&t[i]&&(--Q1[i]===0&&(document.removeEventListener(Gm(i),bf[i]),bf[i]=null),t[i]=null)}function uP(i,e,t,n){if(fi(t))Fb(i,n)[i]=t;else if(Km(t)){if(Y1(e,t))return;Fb(i,n)[i]=t}else tS(i,n)}function hP(i){return fi(i.composedPath)?i.composedPath()[0]:i.target}function iS(i,e,t,n){var s=hP(i);do{if(e&&s.disabled)return;var o=s.$EV;if(o){var r=o[t];if(r&&(n.dom=s,r.event?r.event(r.data,i):r(i),i.cancelBubble))return}s=s.parentNode}while(!hn(s))}function pP(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function fP(){return this.defaultPrevented}function mP(){return this.cancelBubble}function nS(i){var e={dom:document};return i.isDefaultPrevented=fP,i.isPropagationStopped=mP,i.stopPropagation=pP,Object.defineProperty(i,"currentTarget",{configurable:!0,get:function(){return e.dom}}),e}function gP(i){return function(e){if(e.button!==0){e.stopPropagation();return}iS(e,!0,i,nS(e))}}function _P(i){return function(e){iS(e,!1,i,nS(e))}}function bP(i){var e=i==="onClick"||i==="onDblClick"?gP(i):_P(i);return document.addEventListener(Gm(i),e),e}function vP(i,e){var t=document.createElement("i");return t.innerHTML=e,t.innerHTML===i.innerHTML}function Vb(i,e,t){if(i[e]){var n=i[e];n.event?n.event(n.data,t):n(t)}else{var s=e.toLowerCase();i[s]&&i[s](t)}}function sd(i,e){var t=function(n){var s=this.$V;if(s){var o=s.props||Fi,r=s.dom;if(Il(i))Vb(o,i,n);else for(var a=0;a<i.length;++a)Vb(o,i[a],n);if(fi(e)){var l=this.$V,d=l.props||Fi;e(d,r,!1,l)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function lr(i,e,t){var n="$"+e,s=i[n];if(s){if(s[1].wrapped)return;i.removeEventListener(s[0],s[1]),i[n]=null}fi(t)&&(i.addEventListener(e,t),i[n]=[e,t])}function Ym(i){return i==="checkbox"||i==="radio"}var yP=sd("onInput",Xm),CP=sd(["onClick","onChange"],Xm);function sS(i){i.stopPropagation()}sS.wrapped=!0;function xP(i,e){Ym(e.type)?(lr(i,"change",CP),lr(i,"click",sS)):lr(i,"input",yP)}function Xm(i,e){var t=i.type,n=i.value,s=i.checked,o=i.multiple,r=i.defaultValue,a=!Vt(n);t&&t!==e.type&&e.setAttribute("type",t),!Vt(o)&&o!==e.multiple&&(e.multiple=o),!Vt(r)&&!a&&(e.defaultValue=r+""),Ym(t)?(a&&(e.value=n),Vt(s)||(e.checked=s)):a&&e.value!==n?(e.defaultValue=n,e.value=n):Vt(s)||(e.checked=s)}function qa(i,e){if(i.type==="option")wP(i,e);else{var t=i.children,n=i.flags;if(n&4)qa(t.$LI,e);else if(n&8)qa(t,e);else if(i.childFlags===2)qa(t,e);else if(i.childFlags&12)for(var s=0,o=t.length;s<o;++s)qa(t[s],e)}}function wP(i,e){var t=i.props||Fi,n=i.dom;n.value=t.value,t.value===e||Sl(e)&&e.indexOf(t.value)!==-1?n.selected=!0:(!Vt(e)||!Vt(t.selected))&&(n.selected=t.selected||!1)}var SP=sd("onChange",oS);function EP(i){lr(i,"change",SP)}function oS(i,e,t,n){var s=!!i.multiple;!Vt(i.multiple)&&s!==e.multiple&&(e.multiple=s);var o=i.selectedIndex;o===-1&&(e.selectedIndex=-1);var r=n.childFlags;if(r!==1){var a=i.value;eP(o)&&o>-1&&e.options[o]&&(a=e.options[o].value),t&&Vt(a)&&(a=i.defaultValue),qa(n,a)}}var IP=sd("onInput",rS),TP=sd("onChange");function DP(i,e){lr(i,"input",IP),e.onChange&&lr(i,"change",TP)}function rS(i,e,t){var n=i.value,s=e.value;if(Vt(n)){if(t){var o=i.defaultValue;!Vt(o)&&o!==s&&(e.defaultValue=o,e.value=o)}}else s!==n&&(e.defaultValue=n,e.value=n)}function aS(i,e,t,n,s,o){i&64?Xm(n,t):i&256?oS(n,t,s,e):i&128&&rS(n,t,s),o&&(t.$V=e)}function AP(i,e,t){i&64?xP(e,t):i&256?EP(e):i&128&&DP(e,t)}function lS(i){return i.type&&Ym(i.type)?!Vt(i.checked):!Vt(i.value)}function Ni(){return{current:null}}function qc(i){i&&!qm(i,null)&&i.current&&(i.current=null)}function od(i,e,t){i&&(fi(i)||i.current!==void 0)&&t.push(function(){!qm(i,e)&&i.current!==void 0&&(i.current=e)})}function ts(i,e){js(i),id(i,e)}function js(i){var e=i.flags,t=i.children,n;if(e&481){n=i.ref;var s=i.props;qc(n);var o=i.childFlags;if(!hn(s))for(var r=Object.keys(s),a=0,l=r.length;a<l;a++){var d=r[a];eS[d]&&tS(d,i.dom)}o&12?Dl(t):o===2&&js(t)}else t&&(e&4?(fi(t.componentWillUnmount)&&t.componentWillUnmount(),qc(i.ref),t.$UN=!0,js(t.$LI)):e&8?(n=i.ref,!Vt(n)&&fi(n.onComponentWillUnmount)&&n.onComponentWillUnmount(Wn(i,!0),i.props||Fi),js(t)):e&1024?ts(t,i.ref):e&8192&&i.childFlags&12&&Dl(t))}function Dl(i){for(var e=0,t=i.length;e<t;++e)js(i[e])}function fc(i){i.textContent=""}function mc(i,e,t){Dl(t),e.flags&8192?id(e,i):fc(i)}function kP(i){var e=i.event;return function(t){e(i.data,t)}}function OP(i,e,t,n){if(Km(t)){if(Y1(e,t))return;t=kP(t)}lr(n,Gm(i),t)}function RP(i,e,t){if(Vt(e)){t.removeAttribute("style");return}var n=t.style,s,o;if(Il(e)){n.cssText=e;return}if(!Vt(i)&&!Il(i)){for(s in e)o=e[s],o!==i[s]&&n.setProperty(s,o);for(s in i)Vt(e[s])&&n.removeProperty(s)}else for(s in e)o=e[s],n.setProperty(s,o)}function MP(i,e,t,n){var s=i&&i.__html||"",o=e&&e.__html||"";s!==o&&!Vt(o)&&!vP(n,o)&&(hn(t)||(t.childFlags&12?Dl(t.children):t.childFlags===2&&js(t.children),t.children=null,t.childFlags=1),n.innerHTML=o)}function vf(i,e,t,n,s,o,r){switch(i){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":n.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":n[i]=!!t;break;case"defaultChecked":case"value":case"volume":if(o&&i==="value")break;var a=Vt(t)?"":t;n[i]!==a&&(n[i]=a);break;case"style":RP(e,t,n);break;case"dangerouslySetInnerHTML":MP(e,t,r,n);break;default:eS[i]?uP(i,e,t,n):i.charCodeAt(0)===111&&i.charCodeAt(1)===110?OP(i,e,t,n):Vt(t)?n.removeAttribute(i):s&&Bb[i]?n.setAttributeNS(Bb[i],i,t):n.setAttribute(i,t);break}}function dS(i,e,t,n,s){var o=!1,r=(e&448)>0;r&&(o=lS(t),o&&AP(e,n,t));for(var a in t)vf(a,null,t[a],n,s,o,null);r&&aS(e,i,n,t,!0,o)}function cS(i,e,t){var n=Mu(i.render(e,i.state,t)),s=t;return fi(i.getChildContext)&&(s=Vo(t,i.getChildContext())),i.$CX=s,n}function uS(i,e,t,n,s,o){var r=new e(t,n),a=r.$N=!!(e.getDerivedStateFromProps||r.getSnapshotBeforeUpdate);if(r.$SVG=s,r.$L=o,i.children=r,r.$BS=!1,r.context=n,r.props===Fi&&(r.props=t),a)r.state=q1(r,t,r.state);else if(fi(r.componentWillMount)){r.$BR=!0,r.componentWillMount();var l=r.$PS;if(!hn(l)){var d=r.state;if(hn(d))r.state=l;else for(var c in l)d[c]=l[c];r.$PS=null}r.$BR=!1}return r.$LI=cS(r,t,n),r}function Zm(i,e){var t=i.props||Fi;return i.flags&32768?i.type.render(t,i.ref,e):i.type(t,e)}function Li(i,e,t,n,s,o){var r=i.flags|=16384;r&481?pS(i,e,t,n,s,o):r&4?FP(i,e,t,n,s,o):r&8?(VP(i,e,t,n,s,o),mS(i,o)):r&512||r&16?hS(i,e,s):r&8192?BP(i,t,e,n,s,o):r&1024&&PP(i,t,e,s,o)}function PP(i,e,t,n,s){Li(i.children,i.ref,e,!1,null,s);var o=Ru();hS(o,t,n),i.dom=o.dom}function BP(i,e,t,n,s,o){var r=i.children,a=i.childFlags;a&12&&r.length===0&&(a=i.childFlags=2,r=i.children=Ru()),a===2?Li(r,t,e,n,s,o):dr(r,t,e,n,s,o)}function hS(i,e,t){var n=i.dom=document.createTextNode(i.children);hn(e)||Um(e,n,t)}function pS(i,e,t,n,s,o){var r=i.flags,a=i.props,l=i.className,d=i.childFlags,c=i.dom=nP(i.type,n=n||(r&32)>0),h=i.children;if(!Vt(l)&&l!==""&&(n?c.setAttribute("class",l):c.className=l),d===16)ol(c,h);else if(d!==1){var u=n&&i.type!=="foreignObject";d===2?(h.flags&16384&&(i.children=h=Vi(h)),Li(h,c,t,u,null,o)):(d===8||d===4)&&dr(h,c,t,u,null,o)}hn(e)||Um(e,c,s),hn(a)||dS(i,r,a,c,n),od(i.ref,c,o)}function dr(i,e,t,n,s,o){for(var r=0;r<i.length;++r){var a=i[r];a.flags&16384&&(i[r]=a=Vi(a)),Li(a,e,t,n,s,o)}}function FP(i,e,t,n,s,o){var r=uS(i,i.type,i.props||Fi,t,n,o);Li(r.$LI,e,r.$CX,n,s,o),fS(i.ref,r,o)}function VP(i,e,t,n,s,o){Li(i.children=Mu(Zm(i,t)),e,t,n,s,o)}function NP(i){return function(){i.componentDidMount()}}function fS(i,e,t){od(i,e,t),fi(e.componentDidMount)&&t.push(NP(e))}function LP(i,e){return function(){i.onComponentDidMount(Wn(e,!0),e.props||Fi)}}function mS(i,e){var t=i.ref;Vt(t)||(qm(t.onComponentWillMount,i.props||Fi),fi(t.onComponentDidMount)&&e.push(LP(t,i)))}function $P(i,e,t,n,s,o){js(i),e.flags&i.flags&2033?(Li(e,null,n,s,null,o),sP(t,e.dom,i.dom)):(Li(e,t,n,s,Wn(i,!0),o),id(i,t))}function Xs(i,e,t,n,s,o,r){var a=e.flags|=16384;i.flags!==a||i.type!==e.type||i.key!==e.key||a&2048?i.flags&16384?$P(i,e,t,n,s,r):Li(e,t,n,s,o,r):a&481?KP(i,e,n,s,a,r):a&4?qP(i,e,t,n,s,o,r):a&8?YP(i,e,t,n,s,o,r):a&16?XP(i,e):a&512?e.dom=i.dom:a&8192?WP(i,e,t,n,s,r):jP(i,e,n,r)}function HP(i,e,t){i!==e&&(i!==""?t.firstChild.nodeValue=e:ol(t,e))}function zP(i,e){i.textContent!==e&&(i.textContent=e)}function WP(i,e,t,n,s,o){var r=i.children,a=e.children,l=i.childFlags,d=e.childFlags,c=null;d&12&&a.length===0&&(d=e.childFlags=2,a=e.children=Ru());var h=(d&2)!==0;if(l&12){var u=r.length;(l&8&&d&8||h||!h&&a.length>u)&&(c=Wn(r[u-1],!1).nextSibling)}Jm(l,d,r,a,t,n,s,c,i,o)}function jP(i,e,t,n){var s=i.ref,o=e.ref,r=e.children;if(Jm(i.childFlags,e.childFlags,i.children,r,s,t,!1,null,i,n),e.dom=i.dom,s!==o&&!El(r)){var a=r.dom;K1(s,a),j1(o,a)}}function KP(i,e,t,n,s,o){var r=e.dom=i.dom,a=i.props,l=e.props,d=!1,c=!1,h;if(n=n||(s&32)>0,a!==l){var u=a||Fi;if(h=l||Fi,h!==Fi){d=(s&448)>0,d&&(c=lS(h));for(var p in h){var f=u[p],g=h[p];f!==g&&vf(p,f,g,r,n,c,i)}}if(u!==Fi)for(var m in u)Vt(h[m])&&!Vt(u[m])&&vf(m,u[m],null,r,n,c,i)}var b=e.children,_=e.className;i.className!==_&&(Vt(_)?r.removeAttribute("class"):n?r.setAttribute("class",_):r.className=_),s&4096?zP(r,b):Jm(i.childFlags,e.childFlags,i.children,b,r,t,n&&e.type!=="foreignObject",null,i,o),d&&aS(s,e,r,h,!1,c);var w=e.ref,E=i.ref;E!==w&&(qc(E),od(w,r,o))}function GP(i,e,t,n,s,o){js(i),dr(e,t,n,s,Wn(i,!0),o),id(i,t)}function Jm(i,e,t,n,s,o,r,a,l,d){switch(i){case 2:switch(e){case 2:Xs(t,n,s,o,r,a,d);break;case 1:ts(t,s);break;case 16:js(t),ol(s,n);break;default:GP(t,n,s,o,r,d);break}break;case 1:switch(e){case 2:Li(n,s,o,r,a,d);break;case 1:break;case 16:ol(s,n);break;default:dr(n,s,o,r,a,d);break}break;case 16:switch(e){case 16:HP(t,n,s);break;case 2:fc(s),Li(n,s,o,r,a,d);break;case 1:fc(s);break;default:fc(s),dr(n,s,o,r,a,d);break}break;default:switch(e){case 16:Dl(t),ol(s,n);break;case 2:mc(s,l,t),Li(n,s,o,r,a,d);break;case 1:mc(s,l,t);break;default:var c=t.length|0,h=n.length|0;c===0?h>0&&dr(n,s,o,r,a,d):h===0?mc(s,l,t):e===8&&i===8?JP(t,n,s,o,r,c,h,a,l,d):ZP(t,n,s,o,r,c,h,a,d);break}break}}function UP(i,e,t,n,s){s.push(function(){i.componentDidUpdate(e,t,n)})}function gS(i,e,t,n,s,o,r,a,l){var d=i.state,c=i.props,h=!!i.$N,u=fi(i.shouldComponentUpdate);if(h&&(e=q1(i,t,e!==d?Vo(d,e):e)),r||!u||u&&i.shouldComponentUpdate(t,e,s)){!h&&fi(i.componentWillUpdate)&&i.componentWillUpdate(t,e,s),i.props=t,i.state=e,i.context=s;var p=null,f=cS(i,t,s);h&&fi(i.getSnapshotBeforeUpdate)&&(p=i.getSnapshotBeforeUpdate(c,d)),Xs(i.$LI,f,n,i.$CX,o,a,l),i.$LI=f,fi(i.componentDidUpdate)&&UP(i,c,d,p,l)}else i.props=t,i.state=e,i.context=s}function qP(i,e,t,n,s,o,r){var a=e.children=i.children;if(!hn(a)){a.$L=r;var l=e.props||Fi,d=e.ref,c=i.ref,h=a.state;if(!a.$N){if(fi(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(l,n),a.$UN)return;a.$BR=!1}hn(a.$PS)||(h=Vo(h,a.$PS),a.$PS=null)}gS(a,h,l,t,n,s,!1,o,r),c!==d&&(qc(c),od(d,a,r))}}function YP(i,e,t,n,s,o,r){var a=!0,l=e.props||Fi,d=e.ref,c=i.props,h=!Vt(d),u=i.children;if(h&&fi(d.onComponentShouldUpdate)&&(a=d.onComponentShouldUpdate(c,l)),a!==!1){h&&fi(d.onComponentWillUpdate)&&d.onComponentWillUpdate(c,l);var p=Mu(Zm(e,n));Xs(u,p,t,n,s,o,r),e.children=p,h&&fi(d.onComponentDidUpdate)&&d.onComponentDidUpdate(c,l)}else e.children=u}function XP(i,e){var t=e.children,n=e.dom=i.dom;t!==i.children&&(n.nodeValue=t)}function ZP(i,e,t,n,s,o,r,a,l){for(var d=o>r?r:o,c=0,h,u;c<d;++c)h=e[c],u=i[c],h.flags&16384&&(h=e[c]=Vi(h)),Xs(u,h,t,n,s,a,l),i[c]=h;if(o<r)for(c=d;c<r;++c)h=e[c],h.flags&16384&&(h=e[c]=Vi(h)),Li(h,t,n,s,a,l);else if(o>r)for(c=d;c<o;++c)ts(i[c],t)}function JP(i,e,t,n,s,o,r,a,l,d){var c=o-1,h=r-1,u=0,p=i[u],f=e[u],g,m;e:{for(;p.key===f.key;){if(f.flags&16384&&(e[u]=f=Vi(f)),Xs(p,f,t,n,s,a,d),i[u]=f,++u,u>c||u>h)break e;p=i[u],f=e[u]}for(p=i[c],f=e[h];p.key===f.key;){if(f.flags&16384&&(e[h]=f=Vi(f)),Xs(p,f,t,n,s,a,d),i[c]=f,c--,h--,u>c||u>h)break e;p=i[c],f=e[h]}}if(u>c){if(u<=h)for(g=h+1,m=g<r?Wn(e[g],!0):a;u<=h;)f=e[u],f.flags&16384&&(e[u]=f=Vi(f)),++u,Li(f,t,n,s,m,d)}else if(u>h)for(;u<=c;)ts(i[u++],t);else QP(i,e,n,o,r,c,h,u,t,s,a,l,d)}function QP(i,e,t,n,s,o,r,a,l,d,c,h,u){var p,f,g,m=0,b=a,_=a,w=o-a+1,E=r-a+1,D=new Int32Array(E+1),B=w===n,$=!1,F=0,N=0;if(s<4||(w|E)<32)for(m=b;m<=o;++m)if(p=i[m],N<E){for(a=_;a<=r;a++)if(f=e[a],p.key===f.key){if(D[a-_]=m+1,B)for(B=!1;b<m;)ts(i[b++],l);F>a?$=!0:F=a,f.flags&16384&&(e[a]=f=Vi(f)),Xs(p,f,l,t,d,c,u),++N;break}!B&&a>r&&ts(p,l)}else B||ts(p,l);else{var L={};for(m=_;m<=r;++m)L[e[m].key]=m;for(m=b;m<=o;++m)if(p=i[m],N<E)if(a=L[p.key],a!==void 0){if(B)for(B=!1;m>b;)ts(i[b++],l);D[a-_]=m+1,F>a?$=!0:F=a,f=e[a],f.flags&16384&&(e[a]=f=Vi(f)),Xs(p,f,l,t,d,c,u),++N}else B||ts(p,l);else B||ts(p,l)}if(B)mc(l,h,i),dr(e,l,t,d,c,u);else if($){var j=eB(D);for(a=j.length-1,m=E-1;m>=0;m--)D[m]===0?(F=m+_,f=e[F],f.flags&16384&&(e[F]=f=Vi(f)),g=F+1,Li(f,l,t,d,g<s?Wn(e[g],!0):c,u)):a<0||m!==j[a]?(F=m+_,f=e[F],g=F+1,U1(f,l,g<s?Wn(e[g],!0):c)):a--}else if(N!==E)for(m=E-1;m>=0;m--)D[m]===0&&(F=m+_,f=e[F],f.flags&16384&&(e[F]=f=Vi(f)),g=F+1,Li(f,l,t,d,g<s?Wn(e[g],!0):c,u))}var ks,Nd,Nb=0;function eB(i){var e=0,t=0,n=0,s=0,o=0,r=0,a=0,l=i.length;for(l>Nb&&(Nb=l,ks=new Int32Array(l),Nd=new Int32Array(l));t<l;++t)if(e=i[t],e!==0){if(n=ks[s],i[n]<e){Nd[t]=n,ks[++s]=t;continue}for(o=0,r=s;o<r;)a=o+r>>1,i[ks[a]]<e?o=a+1:r=a;e<i[ks[o]]&&(o>0&&(Nd[t]=ks[o-1]),ks[o]=t)}o=s+1;var d=new Int32Array(o);for(r=ks[o-1];o-- >0;)d[o]=r,r=Nd[r],ks[o]=0;return d}var tB=typeof document<"u";tB&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);function iB(i,e,t,n){var s=[],o=e.$V;Tl.v=!0,Vt(o)?Vt(i)||(i.flags&16384&&(i=Vi(i)),Li(i,e,n,!1,null,s),e.$V=i,o=i):Vt(i)?(ts(o,e),e.$V=null):(i.flags&16384&&(i=Vi(i)),Xs(o,i,e,n,!1,null,s),o=e.$V=i),G1(s),Tl.v=!1,fi(t)&&t(),fi(Pb.renderComplete)&&Pb.renderComplete(o,e)}function Bu(i,e,t,n){t===void 0&&(t=null),n===void 0&&(n=Fi),iB(i,e,t,n)}var gc=[],nB=typeof Promise<"u"?Promise.resolve().then.bind(Promise.resolve()):function(i){window.setTimeout(i,0)},yf=!1;function _S(i,e,t,n){var s=i.$PS;if(fi(e)&&(e=e(s?Vo(i.state,s):i.state,i.props,i.context)),Vt(s))i.$PS=e;else for(var o in e)s[o]=e[o];if(i.$BR)fi(t)&&i.$L.push(t.bind(i));else{if(!Tl.v&&gc.length===0){vS(i,n),fi(t)&&t.call(i);return}if(gc.indexOf(i)===-1&&gc.push(i),n&&(i.$F=!0),yf||(yf=!0,nB(bS)),fi(t)){var r=i.$QU;r||(r=i.$QU=[]),r.push(t)}}}function sB(i){for(var e=i.$QU,t=0;t<e.length;++t)e[t].call(i);i.$QU=null}function bS(){var i;for(yf=!1;i=gc.shift();)if(!i.$UN){var e=i.$F;i.$F=!1,vS(i,e),i.$QU&&sB(i)}}function vS(i,e){if(e||!i.$BR){var t=i.$PS;i.$PS=null;var n=[];Tl.v=!0,gS(i,Vo(i.state,t),i.props,Wn(i.$LI,!0).parentNode,i.context,i.$SVG,e,null,n),G1(n),Tl.v=!1}else i.state=i.$PS,i.$PS=null}var rd=function(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=e||Fi,this.context=t||Fi};rd.prototype.forceUpdate=function(e){this.$UN||_S(this,{},e,!0)};rd.prototype.setState=function(e,t){this.$UN||this.$BS||_S(this,e,t,!1)};rd.prototype.render=function(e,t,n){return null};const ho={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(this.lockCount===0){const i=this.callbacks;this.callbacks=[],i.forEach(e=>e())}}},Ph=(i,e)=>{if(!(i instanceof Object&&e instanceof Object))return i===e;const n=Object.keys(i),s=Object.keys(e);return n.length!==s.length?!1:!n.some(r=>i[r]!==e[r])};class Mn extends rd{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(e,t){this._pendingContext=t??{}}shouldComponentUpdate(e,t){return!Ph(this.props,e)||!Ph(this.state,t)||!Ph(this.context,this._pendingContext)}}class to extends Mn{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){ho.lock()}componentWillUpdate(e,t,n){ho.lock()}componentDidMount(){ho.callbacks.push(()=>{this._effects=this.createEffects()}),ho.callEffects()}componentDidUpdate(){ho.callbacks.push(()=>this.updateEffects()),ho.callEffects()}destroyEffects(){this._effects.forEach(e=>e.dispose())}componentWillUnmount(){this.destroyEffects()}}class ad extends to{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){const e=this.vDomElement,t=e.className.length?e.className.split(" "):[],n=t.filter(o=>e.dxClasses.previous.indexOf(o)<0),s=e.dxClasses.previous.filter(o=>t.indexOf(o)<0);n.forEach(o=>{const r=e.dxClasses.removed.indexOf(o);r>-1?e.dxClasses.removed.splice(r,1):e.dxClasses.added.includes(o)||e.dxClasses.added.push(o)}),s.forEach(o=>{const r=e.dxClasses.added.indexOf(o);r>-1?e.dxClasses.added.splice(r,1):e.dxClasses.removed.includes(o)||e.dxClasses.removed.push(o)})}componentDidMount(){const e=Wn(this.$LI,!0);this.vDomElement=e,super.componentDidMount(),e.dxClasses=e.dxClasses||{removed:[],added:[],previous:[]},e.dxClasses.previous=e!=null&&e.className.length?e.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const e=this.vDomElement;e!==null&&(e.dxClasses.added.forEach(t=>e.classList.add(t)),e.dxClasses.removed.forEach(t=>e.classList.remove(t)),e.dxClasses.previous=e.className.length?e.className.split(" "):[])}shouldComponentUpdate(e,t){const n=super.shouldComponentUpdate(e,t);return n&&this.vDomUpdateClasses(),n}}let oB=0;const yS=function(i){const e=oB++;return{id:e,defaultValue:i,Provider:class extends rd{getChildContext(){return Object.assign(Object.assign({},this.context),{[e]:this.props.value||i})}render(){return this.props.children}}}};class ai{constructor(e,t){this.dependency=t,this.effect=e,this.destroy=e()}update(e){const t=this.dependency;e&&(this.dependency=e),(!e||e.some((n,s)=>t[s]!==n))&&(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const ld=()=>new ai(()=>{bS()},[]),rB="a runtime error occured! Use Inferno in development environment to find the error.";function aB(i){return i==null}function lB(i){return i===null||i===!1||i===!0||i===void 0}function dB(i){return typeof i=="function"}function oa(i){return i===null}function cB(i){throw i||(i=rB),new Error(`Inferno Error: ${i}`)}function uB(i,e){const t=document.createElement("i");return t.innerHTML=e,t.innerHTML===i.innerHTML}function hB(i){let e,t;for(;i;){if(e=i.flags,e&2033)return i.dom;t=i.children,e&8192?i=i.childFlags===2?t:t[t.length-1]:e&4?i=t.$LI:i=t}return null}function pB(i,e){return!!(e&&e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html&&uB(i,e.dangerouslySetInnerHTML.__html))}function fB(i,e,t,n,s,o,r){const a=i.type,l=i.ref,d=i.props||Fi;let c;if(o){const h=uS(i,a,d,n,s,r),u=h.$LI;c=Al(u,e,t,h.$CX,s,r),fS(l,h,r)}else{const h=Mu(Zm(i,n));c=Al(h,e,t,n,s,r),i.children=h,mS(i,r)}return c}function CS(i,e,t,n,s,o){const r=i.childFlags,a=i.children,l=i.props,d=i.flags;if(r!==1){if(r===2)oa(t)?Li(a,e,n,s,null,o):(t=Al(a,e,t,n,s,o),t=t?t.nextSibling:null);else if(r===16)oa(t)?e.appendChild(document.createTextNode(a)):e.childNodes.length!==1||t.nodeType!==3?e.textContent=a:t.nodeValue!==a&&(t.nodeValue=a),t=null;else if(r&12){let c=!1;for(let h=0,u=a.length;h<u;++h){const p=a[h];oa(t)||c&&(p.flags&16)>0?Li(p,e,n,s,t,o):(t=Al(p,e,t,n,s,o),t=t?t.nextSibling:null),c=(p.flags&16)>0}}if(!(d&8192)){let c=null;for(;t;)c=t.nextSibling,e.removeChild(t),t=c}}else!oa(e.firstChild)&&!pB(e,l)&&(e.textContent="",d&448&&(e.defaultValue=""))}function mB(i,e,t,n,s,o){const r=i.props,a=i.className,l=i.flags,d=i.ref;return s=s||(l&32)>0,t.nodeType!==1?(pS(i,null,n,s,null,o),e.replaceChild(i.dom,t)):(i.dom=t,CS(i,t,t.firstChild,n,s,o),oa(r)||dS(i,l,r,t,s),aB(a)?t.className!==""&&t.removeAttribute("class"):s?t.setAttribute("class",a):t.className=a,od(d,t,o)),i.dom}function xS(i,e,t){if(t.nodeType!==3)e.replaceChild(i.dom=document.createTextNode(i.children),t);else{const n=i.children;t.nodeValue!==n&&(t.nodeValue=n),i.dom=t}return i.dom}function gB(i,e,t,n,s,o){const r=i.children;return i.childFlags===2?(xS(r,e,t),r.dom):(CS(i,e,t,n,s,o),hB(r[r.length-1]))}function Al(i,e,t,n,s,o){const r=i.flags|=16384;return r&14?fB(i,e,t,n,s,(r&4)>0,o):r&481?mB(i,e,t,n,s,o):r&16?xS(i,e,t):r&512?i.dom=t:r&8192?gB(i,e,t,n,s,o):(cB(),null)}function _B(i,e,t){let n=e.firstChild;if(oa(n))Bu(i,e,t);else{const s=[];for(lB(i)||(n=Al(i,e,n,{},!1,s));n&&(n=n.nextSibling);)e.removeChild(n);if(s.length>0){let o;for(;(o=s.shift())!==void 0;)o()}}e.$V=i,dB(t)&&t()}function Lb(i){return i==null}function bB(i){return typeof i=="string"}function $b(i){return i===void 0}var vB={onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function _c(i,e,t){var n=arguments,s,o=null,r=null,a=null,l=0,d,c=arguments.length-2;if(c===1)s=t;else if(c>1)for(s=[];c-- >0;)s[c]=n[c+2];if(bB(i)){if(l=cP(i),!Lb(e)){d={};for(var h in e)h==="className"||h==="class"?a=e[h]:h==="key"?r=e.key:h==="children"&&$b(s)?s=e.children:h==="ref"?o=e.ref:(h==="contenteditable"&&(l|=4096),d[h]=e[h])}}else{if(l=2,$b(s)||(e||(e={}),e.children=s),!Lb(e)){d={};for(var u in e)u==="key"?r=e.key:u==="ref"?o=e.ref:vB[u]===1?(o||(o={}),o[u]=e[u]):d[u]=e[u]}return Jt(l,i,d,r,o)}return l&8192?eo(c===1?[s]:s,0,r):bi(l,i,a,s,0,d,r,o)}const yB=i=>{var e,t;return((e=i.container)===null||e===void 0?void 0:e.get(0))||((t=i.item)===null||t===void 0?void 0:t.get(0))};function CB(i,e,t){setTimeout(()=>{Bu(_c(i,e),yB(e))},0)}const xB=(i,e,t)=>{const n=e[i];return!!n&&typeof n!="string"},wB=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),SB=i=>typeof i=="number"?!0:!Number.isNaN(Number(i)),EB=(i,e)=>wB.has(i)?e:`${e}px`,IB=/[A-Z]/g,TB=i=>i.replace(IB,"-$&").toLowerCase();function Qm(i){if(i instanceof Object)return Object.entries(i).reduce((e,[t,n])=>(e[TB(t)]=SB(n)?EB(t,n):n,e),{})}const Hb=i=>{const{parentNode:e}=i;if(e){const t=i.nextSibling;Bl(i),e.$V=i.$V,Bu(null,e),e.insertBefore(i,t),i.innerHTML="",delete e.$V}delete i.$V},zr=qn({createElement:(i,e)=>_c(i,e),remove:Hb,onAfterRender:()=>{ho.callEffects()},onPreRender:()=>{ho.lock()},render:(i,e,t,n)=>{if(n)Bu(_c(i,e),t);else{const{parentNode:s}=t,o=t==null?void 0:t.nextSibling,r=_e.createElement("div");r.appendChild(t);const a=_e.createDocumentFragment().appendChild(r);!!t.$V&&Hb(t),_B(_c(i,e),a),t.$V=a.$V,s&&s.insertBefore(t,o)}}}),DB=(i,e)=>Object.keys(i).length!==Object.keys(e).length?!1:Object.keys(i).every(t=>i[t]===e[t]),AB=["isEqual"];function kB(i){return!!i.toArray}function OB(i,e){const t={template:e,model:ve({},i)},n=i.data??{},{isEqual:s}=n,o=ei(n,AB);return s&&(t.model.data=o,t.isEqual=s),t}function RB(i,e){const{data:t,index:n}=i.model??{data:{}};t&&Object.keys(t).forEach(o=>{t[o]&&_e.isNode(t[o])&&(t[o]=ze(R(t[o])))});const s=i.template.render(ve({container:e,transclude:i.transclude},{renovated:i.renovated},i.transclude?{}:{model:t},!i.transclude&&Number.isFinite(n)?{index:n}:{}));return s===void 0?[]:kB(s)?s.toArray():[R(s).get(0)]}function MB(i,e){e.forEach(t=>{!!!i.find(s=>t===s)&&t.parentNode&&R(t).remove()})}class zb extends to{constructor(e){super(e),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const e=Wn(this.$LI,!0);if(!(e!=null&&e.parentNode))return()=>{};const t=e.parentNode,n=R(t),s=n.contents().toArray(),o=RB(this.props,ze(n));return uA(R(e),R(o)),()=>{const r=R(t).contents().toArray();MB(s,r),t.appendChild(e)}}shouldComponentUpdate(e){const{model:t,template:n}=this.props,{isEqual:s,model:o,template:r}=e,a=s??DB;if(n!==r)return!0;if(!U(t)||!U(o))return t!==o;const{data:l,index:d}=t,{data:c,index:h}=o;return d!==h?!0:!a(l,c)}createEffects(){return[new ai(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}}function Bh(i){return Array.isArray(i)?[...i]:ve({},i)}function wS(i,e,t){const n=t.length>0&&e&&i!==e?Bh(e):Bh(i),s=t[0];return t.length>1?n[s]=wS(i[s],e==null?void 0:e[s],t.slice(1)):s&&(ht(i[s])?n[s]=Bh(i[s]):n[s]=i[s]),n}function PB(i,e,t,n){const s=e[t],o=i[t],r=i;ht(s)||t!==n&&Array.isArray(s)?r[t]=wS(s,o,Cr(n).slice(1)):r[t]=s}const Fh=(i,e)=>t=>{Object.prototype.hasOwnProperty.call(i,t)&&i[t]===void 0&&(i[t]=e(t))};class dd extends Ss{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(e,t){super(e,t),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const t=this.getSupportedKeyNames().length>0,n=typeof this._viewComponent.prototype.keyDown=="function";if(t&&!n)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var e;return(e=this._viewRef)===null||e===void 0?void 0:e.current}_checkContentReadyOption(e){const t=this._getContentReadyOptions().reduce((n,s)=>(n[s]=!0,n),{});return this._checkContentReadyOption=n=>!!t[n],this._checkContentReadyOption(e)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const e=this._getViewComponentDefaultProps();return Y(!0,super._getDefaultOptions(),e,this._propsInfo.twoWay.reduce((t,n)=>{let[s,o,r]=n;return ve({},t,{[s]:e[o],[r]:a=>this.option(s,a)})},{}),this._propsInfo.templates.reduce((t,n)=>ve({},t,{[n]:null}),{}))}_getUnwrappedOption(){const e={};return Object.keys(this.option()).forEach(t=>{e[t]=this.option(t)}),e}_initializeComponent(){var e;super._initializeComponent(),(e=this._templateManager)===null||e===void 0||e.addDefaultTemplates(this.getDefaultTemplates());const t=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(t),this._propsInfo.templates.forEach(n=>{this._componentTemplates[n]=this._createTemplateComponent(this._props[n])}),Object.keys(this._getActionConfigsFull()).forEach(n=>this._addAction(n)),this._viewRef=Ni(),this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const e=this.getProps();this._renderWrapper(e)}_renderWrapper(e){const t=this.$element()[0];this._isNodeReplaced||zr.onPreRender(),zr.render(this._viewComponent,e,t,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,zr.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(e,t){this._options.silent(e,t)}_render(){}_removeWidget(){zr.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const e=this.$element()[0];if(!this._elementAttr){const{attributes:s}=e,o=Array.from(s).filter(r=>{var a;return!this._propsInfo.templates.includes(r.name)&&((a=s[r.name])===null||a===void 0?void 0:a.specified)}).reduce((r,a)=>{let{name:l,value:d}=a;const c=r,h=l in e;return c[l]=d===""&&h?e[l]:d,c},{});this._elementAttr=o,this._storedClasses=e.getAttribute("class")||""}const t=e.style,n={};for(let s=0;s<t.length;s+=1)n[t[s]]=t.getPropertyValue(t[s]);return this._elementAttr.style=n,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(e){const{allowNull:t,elements:n,props:s,twoWay:o}=this._propsInfo,r=this._getViewComponentDefaultProps(),a=Object.keys(r),l=this._getDefaultOptions(),{children:d,onKeyboardHandled:c,ref:h}=e,p={ref:h,children:d,onKeyDown:c?(f,g)=>{c(g)}:void 0};return[...s,...this._getAdditionalProps()].forEach(f=>{Object.prototype.hasOwnProperty.call(e,f)&&(p[f]=e[f])}),t.forEach(Fh(p,()=>null)),a.forEach(Fh(p,f=>l[f])),o.forEach(f=>{let[g,m]=f;Fh(p,()=>l[m])(g)}),n.forEach(f=>{if(f in p){const g=p[f];Cn(g)&&(p[f]=this._patchElementParam(g))}}),p}getSupportedKeyNames(){return[]}prepareStyleProp(e){return typeof e.style=="string"?ve({},e,{style:{},cssText:e.style}):e}getProps(){const{elementAttr:e}=this.option(),t=this._patchOptionValues(ve({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach(n=>{t[n]=this._componentTemplates[n]}),this.prepareStyleProp(ve({},t,this.elementAttr,e,{className:[...(this.elementAttr.class??"").split(" "),...((e==null?void 0:e.class)??"").split(" ")].filter((n,s,o)=>n&&o.indexOf(n)===s).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return ve({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const e=Object.values(this._templatesInfo),t={};return e.forEach(n=>{t[n]="dx-renovation-template-mock"}),t}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(e){const t=Object.entries(this._templatesInfo).reduce((n,s)=>{let[o,r]=s;return ve({},n,{[o]:e[o]??r})},{});return ve({},e,t)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const e={};return this.getSupportedKeyNames().forEach(n=>{e[n]=s=>this.viewRef.keyDown(Om.createKeyDownOptions(s))}),e}_addAction(e,t){let n=t;if(!n){const s=this._createActionByOption(e,this._getActionConfigsFull()[e]);n=o=>(Object.keys(o).forEach(r=>{U(o[r])&&_e.isNode(o[r])&&(o[r]=ze(R(o[r])))}),s(o))}this._actionsMap[e]=n}_optionChanged(e){const{fullName:t,name:n,previousValue:s,value:o}=e;PB(this._props,this.option(),n,t),this._propsInfo.templates.includes(n)&&o!==s&&(this._componentTemplates[n]=this._createTemplateComponent(o)),n&&this._getActionConfigsFull()[n]&&this._addAction(n),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(t),super._optionChanged(e),this._invalidate()}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?zr.createElement(zb,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(e){if(!e)return;const t=this._getTemplate(e);if(!(Ke(t)&&t==="dx-renovation-template-mock"))return n=>zr.createElement(zb,OB(n,t))}_wrapKeyDownHandler(e){return t=>{const{keyName:n,originalEvent:s,which:o}=t,r=this.customKeyHandlers,a=r[n]||r[o];return a!==void 0&&!a.bind(this)(s,t)?(s.cancel=!0,s):e==null?void 0:e(s,t)}}_toPublicElement(e){return ze(R(e))}_patchElementParam(e){try{const t=R(e),n=t==null?void 0:t.get(0);return n!=null&&n.nodeType?n:e}catch{return e}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return ve({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(e,t){this.customKeyHandlers[e]=t}setAria(e,t){this._aria[e]=t,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}dd.IS_RENOVATED_WIDGET=!1;dd.IS_RENOVATED_WIDGET=!0;class BB extends dd{get _validationGroupConfig(){return Ft.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const e=super.getProps();return e.onClick=n=>{let{event:s}=n;this._clickAction({event:s,validationGroup:this._validationGroupConfig})},ed(e.icon)==="svg"&&(e.iconTemplate=this._createTemplateComponent(()=>e.icon)),e}get _templatesInfo(){return{template:"content"}}_toggleActiveState(e,t){const n=this.viewRef;t?n.activate():n.deactivate()}_getSubmitAction(){let e=!0,t="valid";return this._createAction(n=>{let{event:s,submitInput:o}=n;if(e){const r=this._validationGroupConfig;if(r!==void 0&&r!==""){const a=r.validate();t=a.status,a.status==="pending"&&(e=!1,this.option("disabled",!0),a.complete.then(l=>{let{status:d}=l;this.option("disabled",!1),t=d,t==="valid"&&o.click(),e=!0}))}}t!=="valid"&&s.preventDefault(),s.stopPropagation()})}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const e=this.$element().find(".dx-button-content").first(),t=e.children().filter(".dx-template-wrapper"),n=e.children().filter(".dx-button-submit-input");t.length&&(t.addClass("dx-button-content"),t.append(n),e.replaceWith(t))}_patchOptionValues(e){return super._patchOptionValues(ve({},e,{templateData:e._templateData}))}_findGroup(){const e=this.$element(),t=this.option("validationGroup");return t!==void 0&&t!==""?t:Ft.findGroup(e,this._modelByElement(e))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(e){e.name==="onClick"&&(this._clickAction=this._createClickAction()),super._optionChanged(e)}}function zn(i){return Object.keys(i).filter(e=>i[e]).join(" ")}const FB=["iconTemplate","position","source"],VB=i=>{let{iconClassName:e,props:{iconTemplate:t,source:n},sourceType:s}=i;return eo([s==="dxIcon"&&bi(1,"i",e),s==="fontIcon"&&bi(1,"i",e),s==="image"&&bi(1,"img",e,null,1,{alt:"",src:n}),t&&bi(1,"i",e,t({}),0)],0)},NB={position:"left",source:""},LB=i=>i&&(i.defaultProps?e=>xn(Jt(2,i,ve({},e))):i);class SS extends Mn{constructor(e){super(e),this.state={}}get sourceType(){return ed(this.props.source)}get cssClass(){return this.props.position!=="left"?"dx-icon-right":""}get iconClassName(){const e={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:t}=this.props;return this.sourceType==="dxIcon"?zn(ve({},e,{[`dx-icon-${t}`]:!0})):this.sourceType==="fontIcon"?zn(ve({},e,{[String(t)]:!!t})):this.sourceType==="image"?zn(e):this.sourceType==="svg"?zn(ve({},e,{"dx-svg-icon":!0})):""}get restAttributes(){const e=this.props;return ei(e,FB)}render(){const e=this.props;return VB({props:ve({},e,{iconTemplate:LB(e.iconTemplate)}),sourceType:this.sourceType,cssClass:this.cssClass,iconClassName:this.iconClassName,restAttributes:this.restAttributes})}}SS.defaultProps=NB;const $B=["config"],HB=i=>xn(bi(1,"div","dx-inkripple",null,1,ve({},i.restAttributes))),zB={config:Object.freeze({})};class ES extends Mn{constructor(e){super(e),this.state={},this.__getterCache={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return this.__getterCache.getConfig!==void 0?this.__getterCache.getConfig:this.__getterCache.getConfig=(()=>{const{config:e}=this.props;return P1(e)})()}get restAttributes(){const e=this.props;return ei(e,$B)}hideWave(e){N1(this.getConfig,e)}showWave(e){F1(this.getConfig,e)}componentWillUpdate(e,t,n){this.props.config!==e.config&&(this.__getterCache.getConfig=void 0)}render(){const e=this.props;return HB({props:ve({},e),getConfig:this.getConfig,restAttributes:this.restAttributes})}}ES.defaultProps=zB;function Ar(i){return(e,t,n,s)=>{const o=s?be(i,s):i;if(t)return q.on(e,o,n,t),()=>{q.off(e,o,t)}}}const WB=Ar(kt),jB=Ar("dxactive"),KB=Ar("dxinactive"),GB=Ar("dxhoverstart"),UB=Ar("dxhoverend"),qB=Ar("focusin"),YB=Ar("focusout"),Fu={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},ji=yS(void 0),XB=["children","rtlEnabled"],ZB=i=>i.props.children,JB={};class IS extends Mn{constructor(e){super(e),this.state={},this.__getterCache={}}getChildContext(){return ve({},this.context,{[ji.id]:this.config||ji.defaultValue})}get config(){return this.__getterCache.config!==void 0?this.__getterCache.config:this.__getterCache.config=(()=>({rtlEnabled:this.props.rtlEnabled}))()}get restAttributes(){const e=this.props;return ei(e,XB)}componentWillUpdate(e,t,n){this.props.rtlEnabled!==e.rtlEnabled&&(this.__getterCache.config=void 0)}render(){const e=this.props;return ZB({props:ve({},e),config:this.config,restAttributes:this.restAttributes})}}IS.defaultProps=JB;function QB(i,e){return i!==void 0?i:(e==null?void 0:e.rtlEnabled)!==void 0?e.rtlEnabled:$t().rtlEnabled}function eF(i,e){const t=U(i),n=U($t().rtlEnabled)&&!t&&!U(e==null?void 0:e.rtlEnabled);return t&&i!==(e==null?void 0:e.rtlEnabled)||n}const tF=["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"],iF=i=>Object.keys(i).reduce((e,t)=>i[t]?ve({},e,{[t==="role"||t==="id"?t:`aria-${t}`]:String(i[t])}):e,{}),nF=i=>{const e=xn(bi(1,"div",i.cssClasses,i.props.children,0,ve({},i.attributes,{tabIndex:i.tabIndex,title:i.props.hint,style:Qm(i.styles)}),null,i.widgetElementRef));return i.shouldRenderConfigProvider?Jt(2,IS,{rtlEnabled:i.rtlEnabled,children:e}):e},Yc=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Fu),Object.getOwnPropertyDescriptors({_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:Object.freeze({}),classes:"",name:"",addWidgetClass:!0})));class Vu extends ad{get config(){return this.context[ji.id]?this.context[ji.id]:ji.defaultValue}constructor(e){super(e),this.widgetElementRef=Ni(),this.state={active:!1,focused:!1,hovered:!1},this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}createEffects(){return[new ai(this.setRootElementRef,[]),new ai(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new ai(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new ai(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new ai(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new ai(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new ai(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new ai(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new ai(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new ai(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new ai(this.windowResizeEffect,[this.props.onDimensionChanged]),new ai(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new ai(this.checkDeprecation,[this.props.height,this.props.width]),new ai(this.applyCssTextEffect,[this.props.cssText]),ld()]}updateEffects(){var e,t,n,s,o,r,a,l,d,c,h,u,p;(e=this._effects[1])===null||e===void 0||e.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),(t=this._effects[2])===null||t===void 0||t.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),(n=this._effects[3])===null||n===void 0||n.update([this.props.disabled,this.props.name,this.props.onClick]),(s=this._effects[4])===null||s===void 0||s.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),(o=this._effects[5])===null||o===void 0||o.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),(r=this._effects[6])===null||r===void 0||r.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),(a=this._effects[7])===null||a===void 0||a.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),(l=this._effects[8])===null||l===void 0||l.update([this.props.focusStateEnabled,this.props.onKeyDown]),(d=this._effects[9])===null||d===void 0||d.update([this.props.name,this.props.onDimensionChanged]),(c=this._effects[10])===null||c===void 0||c.update([this.props.onDimensionChanged]),(h=this._effects[11])===null||h===void 0||h.update([this.props.name,this.props.onVisibilityChange]),(u=this._effects[12])===null||u===void 0||u.update([this.props.height,this.props.width]),(p=this._effects[13])===null||p===void 0||p.update([this.props.cssText])}setRootElementRef(){const{onRootElementRendered:e,rootElementRef:t}=this.props;t&&(t.current=this.widgetElementRef.current),e==null||e(this.widgetElementRef.current)}activeEffect(){const{_feedbackShowTimeout:e,activeStateEnabled:t,activeStateUnit:n,disabled:s,onActive:o}=this.props,r=n;if(t&&!s)return jB(this.widgetElementRef.current,a=>{this.setState(l=>({active:!0})),o==null||o(a)},{timeout:e,selector:r},"UIFeedback")}inactiveEffect(){const{_feedbackHideTimeout:e,activeStateEnabled:t,activeStateUnit:n,onInactive:s}=this.props,o=n;if(t)return KB(this.widgetElementRef.current,r=>{this.state.active&&(this.setState(a=>({active:!1})),s==null||s(r))},{timeout:e,selector:o},"UIFeedback")}clickEffect(){const{disabled:e,name:t,onClick:n}=this.props,s=t;if(n&&!e)return D0.on(this.widgetElementRef.current,n,{namespace:s}),()=>D0.off(this.widgetElementRef.current,{namespace:s})}focusInEffect(){const{disabled:e,focusStateEnabled:t,name:n,onFocusIn:s}=this.props,o=`${n}Focus`;if(t&&!e)return qB(this.widgetElementRef.current,r=>{r.isDefaultPrevented()||(this.setState(a=>({focused:!0})),s==null||s(r))},null,o)}focusOutEffect(){const{focusStateEnabled:e,name:t,onFocusOut:n}=this.props,s=`${t}Focus`;if(e)return YB(this.widgetElementRef.current,o=>{!o.isDefaultPrevented()&&this.state.focused&&(this.setState(r=>({focused:!1})),n==null||n(o))},null,s)}hoverStartEffect(){const{activeStateUnit:e,disabled:t,hoverStateEnabled:n,onHoverStart:s}=this.props,o=e;if(n&&!t)return GB(this.widgetElementRef.current,r=>{!this.state.active&&this.setState(a=>({hovered:!0})),s==null||s(r)},{selector:o},"UIFeedback")}hoverEndEffect(){const{activeStateUnit:e,hoverStateEnabled:t,onHoverEnd:n}=this.props,s=e;if(t)return UB(this.widgetElementRef.current,o=>{this.state.hovered&&(this.setState(r=>({hovered:!1})),n==null||n(o))},{selector:s},"UIFeedback")}keyboardEffect(){const{focusStateEnabled:e,onKeyDown:t}=this.props;if(e&&t){const n=wo.on(this.widgetElementRef.current,this.widgetElementRef.current,s=>t(s));return()=>wo.off(n)}}resizeEffect(){const e=`${this.props.name}VisibilityChange`,{onDimensionChanged:t}=this.props;if(t)return Nc.on(this.widgetElementRef.current,t,{namespace:e}),()=>Nc.off(this.widgetElementRef.current,{namespace:e})}windowResizeEffect(){const{onDimensionChanged:e}=this.props;if(e)return hr.add(e),()=>{hr.remove(e)}}visibilityEffect(){const{name:e,onVisibilityChange:t}=this.props,n=`${e}VisibilityChange`;if(t)return Lc.on(this.widgetElementRef.current,()=>t(!0),()=>t(!1),{namespace:n}),()=>Lc.off(this.widgetElementRef.current,{namespace:n})}checkDeprecation(){const{height:e,width:t}=this.props;Ee(t)&&Pt.log("W0017","width"),Ee(e)&&Pt.log("W0017","height")}applyCssTextEffect(){const{cssText:e}=this.props;e!==""&&(this.widgetElementRef.current.style.cssText=e)}get shouldRenderConfigProvider(){const{rtlEnabled:e}=this.props;return eF(e,this.config)}get rtlEnabled(){const{rtlEnabled:e}=this.props;return QB(e,this.config)}get attributes(){const{aria:e,disabled:t,focusStateEnabled:n,visible:s}=this.props,o=n&&!t&&this.props.accessKey;return ve({},Y({},o&&{accessKey:o}),iF(ve({},e,{disabled:t,hidden:!s})),Y({},this.restAttributes))}get styles(){const{height:e,width:t}=this.props,n=this.restAttributes.style||{},s=gl("width",Ee(t)?t():t),o=gl("height",Ee(e)?e():e);return ve({},n,{height:o??n.height,width:s??n.width})}get cssClasses(){const{activeStateEnabled:e,addWidgetClass:t,className:n,classes:s,disabled:o,focusStateEnabled:r,hoverStateEnabled:a,onVisibilityChange:l,visible:d}=this.props,c=!!r&&!o,h=!!a&&!o,u=!!e&&!o,p={"dx-widget":!!t,[String(s)]:!!s,[String(n)]:!!n,"dx-state-disabled":!!o,"dx-state-invisible":!d,"dx-state-focused":!!this.state.focused&&c,"dx-state-active":!!this.state.active&&u,"dx-state-hover":!!this.state.hovered&&h&&!this.state.active,"dx-rtl":!!this.rtlEnabled,"dx-visibility-change-handler":!!l};return zn(p)}get tabIndex(){const{disabled:e,focusStateEnabled:t,tabIndex:n}=this.props;return t&&!e?n:void 0}get restAttributes(){const e=this.props;return ei(e,tF)}focus(){cc.trigger(this.widgetElementRef.current)}blur(){const e=_e.getActiveElement(this.widgetElementRef.current);this.widgetElementRef.current===e&&e.blur()}activate(){this.setState(e=>({active:!0}))}deactivate(){this.setState(e=>({active:!1}))}render(){const e=this.props;return nF({props:ve({},e),active:this.state.active,focused:this.state.focused,hovered:this.state.hovered,widgetElementRef:this.widgetElementRef,config:this.config,shouldRenderConfigProvider:this.shouldRenderConfigProvider,rtlEnabled:this.rtlEnabled,attributes:this.attributes,styles:this.styles,cssClasses:this.cssClasses,tabIndex:this.tabIndex,restAttributes:this.restAttributes})}}Vu.defaultProps=Yc;const sF=["accessKey","activeStateEnabled","children","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],oF=["outlined","text","contained"],rF=i=>{const{icon:e,iconPosition:t,stylingMode:n,text:s,type:o}=i,a={"dx-button":!0,[`dx-button-mode-${n&&oF.includes(n)?n:"contained"}`]:!0,[`dx-button-${o??"normal"}`]:!0,"dx-button-has-text":!!s,"dx-button-has-icon":!!e,"dx-button-icon-right":t!=="left"};return zn(a)},aF=i=>{const{children:e,iconPosition:t,iconTemplate:n,template:s,text:o}=i.props,r=!i.props.template&&!e&&o!=="",a=t==="left",l=!i.props.template&&!e&&(i.iconSource||i.props.iconTemplate)&&Jt(2,SS,{source:i.iconSource,position:t,iconTemplate:n});return xn(Jt(2,Vu,ve({accessKey:i.props.accessKey,activeStateEnabled:i.props.activeStateEnabled,aria:i.aria,className:i.props.className,classes:i.cssClasses,disabled:i.props.disabled,focusStateEnabled:i.props.focusStateEnabled,height:i.props.height,hint:i.props.hint,hoverStateEnabled:i.props.hoverStateEnabled,onActive:i.onActive,onClick:i.onWidgetClick,onInactive:i.onInactive,onKeyDown:i.keyDown,rtlEnabled:i.props.rtlEnabled,tabIndex:i.props.tabIndex,visible:i.props.visible,width:i.props.width},i.restAttributes,{children:bi(1,"div","dx-button-content",[i.props.template&&s({data:i.buttonTemplateData}),!i.props.template&&e,a&&l,r&&bi(1,"span","dx-button-text",o,0),!a&&l,i.props.useSubmitBehavior&&bi(64,"input","dx-button-submit-input",null,1,{type:"submit",tabIndex:-1},null,i.submitInputRef),i.props.useInkRipple&&Jt(2,ES,{config:i.inkRippleConfig},null,i.inkRippleRef)],0,null,null,i.contentRef)}),null,i.widgetRef))},lF=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Fu),Object.getOwnPropertyDescriptors({activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:Object.freeze({})}))),TS=LR([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>tn(un()),options:{useInkRipple:!0}}]),Wb=i=>i&&(i.defaultProps?e=>xn(Jt(2,i,ve({},e))):i);let Xc=class extends ad{constructor(e){super(e),this.state={},this.contentRef=Ni(),this.inkRippleRef=Ni(),this.submitInputRef=Ni(),this.widgetRef=Ni(),this.__getterCache={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this),this.emitClickEvent=this.emitClickEvent.bind(this)}createEffects(){return[new ai(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),ld()]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:e,useSubmitBehavior:t}=this.props;if(t&&e)return A0.on(this.submitInputRef.current,n=>e({event:n,submitInput:this.submitInputRef.current}),{namespace:"UIFeedback"}),()=>A0.off(this.submitInputRef.current,{namespace:"UIFeedback"})}onActive(e){const{useInkRipple:t}=this.props;t&&this.inkRippleRef.current.showWave({element:this.contentRef.current,event:e})}onInactive(e){const{useInkRipple:t}=this.props;t&&this.inkRippleRef.current.hideWave({element:this.contentRef.current,event:e})}onWidgetClick(e){const{onClick:t,useSubmitBehavior:n}=this.props;t==null||t({event:e}),n&&this.submitInputRef.current.click()}keyDown(e){const{onKeyDown:t}=this.props,{keyName:n,originalEvent:s,which:o}=e,r=t==null?void 0:t(e);if(r!=null&&r.cancel)return r;(n==="space"||o==="space"||n==="enter"||o==="enter")&&(s.preventDefault(),this.emitClickEvent())}emitClickEvent(){this.contentRef.current.click()}get aria(){const{icon:e,text:t}=this.props;let n=t??"";if(!t&&e)switch(ed(e)){case"image":{const r=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;n=!e.includes("base64")&&r.test(e)?e.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":n=re.format(fl(e,!0))||e;break;case"fontIcon":n=e;break;case"svg":{var s;n=((s=/<title>(.*?)<\/title>/.exec(e))===null||s===void 0?void 0:s[1])??"";break}}return ve({role:"button"},n?{label:n}:{})}get cssClasses(){return rF(this.props)}get iconSource(){const{icon:e}=this.props;return e??""}get inkRippleConfig(){return this.__getterCache.inkRippleConfig!==void 0?this.__getterCache.inkRippleConfig:this.__getterCache.inkRippleConfig=(()=>{const{icon:e,text:t}=this.props;return!t&&e?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}})()}get buttonTemplateData(){const{icon:e,templateData:t,text:n}=this.props;return ve({icon:e,text:n},t)}get restAttributes(){const e=this.props;return ei(e,sF)}focus(){this.widgetRef.current.focus()}activate(){this.widgetRef.current.activate()}deactivate(){this.widgetRef.current.deactivate()}componentWillUpdate(e,t,n){super.componentWillUpdate(),(this.props.icon!==e.icon||this.props.text!==e.text)&&(this.__getterCache.inkRippleConfig=void 0)}render(){const e=this.props;return aF({props:ve({},e,{template:Wb(e.template),iconTemplate:Wb(e.iconTemplate)}),contentRef:this.contentRef,submitInputRef:this.submitInputRef,inkRippleRef:this.inkRippleRef,widgetRef:this.widgetRef,onActive:this.onActive,onInactive:this.onInactive,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,emitClickEvent:this.emitClickEvent,aria:this.aria,cssClasses:this.cssClasses,iconSource:this.iconSource,inkRippleConfig:this.inkRippleConfig,buttonTemplateData:this.buttonTemplateData,restAttributes:this.restAttributes})}};Xc.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(lF),Object.getOwnPropertyDescriptors(ve({},pa(TS)))));const jb=[];function dF(i){jb.push(i),Xc.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Xc.defaultProps),Object.getOwnPropertyDescriptors(pa(TS)),Object.getOwnPropertyDescriptors(pa(jb))))}class $i extends BB{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.focus(...arguments)}activate(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.activate(...arguments)}deactivate(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.deactivate(...arguments)}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:["activeStateEnabled","hoverStateEnabled","icon","iconPosition","onClick","onSubmit","pressed","stylingMode","template","iconTemplate","text","type","useInkRipple","useSubmitBehavior","templateData","className","accessKey","disabled","focusStateEnabled","height","hint","onKeyDown","rtlEnabled","tabIndex","visible","width"]}}get _viewComponent(){return Xc}}wt("dxButton",$i);$i.defaultOptions=dF;class cF extends ku{_attachEvents(e,t){const{editor:n}=this;q.on(t,ql,()=>{n.$element().addClass("dx-custom-button-hovered")}),q.on(t,Yl,()=>{n.$element().removeClass("dx-custom-button-hovered")}),q.on(t,kt,s=>{s.stopPropagation()})}_create(){const{editor:e}=this,t=R("<div>");this._addToContainer(t);const n=e._createComponent(t,$i,Y({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:t,instance:n}}_prepareIntegrationOptions(e){return Y({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){const e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){const{editor:e}=this;return e.option("visible")}_isDisabled(){return this.options.disabled!==void 0?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}function uF(i){(()=>{if(!i||typeof i!="object"||Array.isArray(i))throw mt.Error("E1053")})(),(()=>{if(!("name"in i))throw mt.Error("E1054")})(),(()=>{const{name:e}=i;if(typeof e!="string")throw mt.Error("E1055")})(),(()=>{const{location:e}=i;"location"in i&&e!=="after"&&e!=="before"&&(i.location="after")})()}function Kb(i,e){if(i.indexOf(e)!==-1)throw mt.Error("E1055",e);i.push(e)}function hF(i,e){return!!e.find(t=>t.name===i)}class pF{constructor(e,t){this.buttons=[],this.defaultButtonsInfo=t,this.editor=e}_compileButtonInfo(e){const t=[];return e.map(n=>{const s=typeof n=="string";if(s||uF(n),s||hF(n.name,this.defaultButtonsInfo)){const a=this.defaultButtonsInfo.find(l=>{let{name:d}=l;return d===n||d===n.name});if(!a)throw mt.Error("E1056",this.editor.NAME,n);return Kb(t,n),a}const{name:r}=n;return Kb(t,r),Y(n,{Ctor:cF})})}_createButton(e){const{Ctor:t,options:n,name:s}=e,o=new t(s,this.editor,n);return this.buttons.push(o),o}_renderButtons(e,t,n){let s=null;return(e?this._compileButtonInfo(e):this.defaultButtonsInfo).forEach(r=>{const{location:a="after"}=r;a===n&&this._createButton(r).render((()=>(s=s??R("<div>").addClass("dx-texteditor-buttons-container"),n==="before"?t.prepend(s):t.append(s),s))())}),s}clean(){this.buttons.forEach(e=>e.dispose()),this.buttons=[]}getButton(e){const t=this.buttons.find(n=>{let{name:s}=n;return s===e});return t&&t.instance}renderAfterButtons(e,t){return this._renderButtons(e,t,"after")}renderBeforeButtons(e,t){return this._renderButtons(e,t,"before")}updateButtons(e){this.buttons.forEach(t=>{(!e||e.indexOf(t.name)!==-1)&&t.update()})}}const Ld=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],fF=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];let mF=Q6;function Gb(i){if(U(i)&&!Array.isArray(i))throw mt.Error("E1053")}const gF=ns.inherit({ctor(i,e){e&&Gb(e.buttons),this._buttonCollection=new pF(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions(){return Y(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:i=>U(i)&&i!==!1?i:"",stylingMode:$t().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules(){return this.callBase().concat([{device(){const i=un();return tn(i)},options:{labelMode:"floating",stylingMode:$t().editorStylingMode||"filled"}},{device(){const i=un();return nn(i)},options:{labelMode:"outside"}}])},_getDefaultButtons:()=>[{name:"clear",Ctor:J6}],_isClearButtonVisible(){return this.option("showClearButton")&&!this.option("readOnly")},_input(){return this.$element().find(".dx-texteditor-input").first()},_isFocused(){return To(this._input())||this.callBase()},_inputWrapper(){return this.$element()},_buttonsContainer(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)},_isControlKey:i=>fF.includes(i),_renderStylingMode(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render(){this.callBase(),this._refreshValueChangeEvent(),this._refreshEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput(){this._$textEditorContainer=R("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=R("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator(){this.$element().addClass("dx-validation-pending");const i=this._getInputContainer(),e=R("<div>").addClass("dx-pending-indicator").appendTo(i);this._pendingIndicator=this._createComponent(e,An)},_disposePendingIndicator(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))},_renderValidationState(){this.callBase(),this.option("validationStatus")==="pending"?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()},_getButtonsContainer(){return this._$textEditorContainer},_renderButtonContainers(){const i=this.option("buttons"),e=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(i,e),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(i,e)},_cleanButtonContainers(){var i,e;(i=this._$beforeButtonsContainer)===null||i===void 0||i.remove(),(e=this._$afterButtonsContainer)===null||e===void 0||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this.callBase()},_createInput(){const i=R("<input>");return this._applyInputAttributes(i,this.option("inputAttr")),i},_setSubmitElementName(i){const e=this.option("inputAttr.name");return this.callBase(i||e||"")},_applyInputAttributes(i,e){const t=Y(this._getDefaultAttributes(),e);i.attr(t).addClass("dx-texteditor-input"),this._setInputMinHeight(i)},_setInputMinHeight(i){i.css("minHeight",this.option("height")?"0":"")},_getPlaceholderAttr(){const{ios:i,mac:e}=Re.real(),{placeholder:t}=this.option();return t||(i||e?" ":null)},_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}},_updateButtons(i){this._buttonCollection.updateButtons(i)},_updateButtonsStyling(i){ie(this.option("buttons"),(e,t)=>{let{options:n,name:s}=t;if(n&&!n.stylingMode&&this.option("visible")){const o=this.getButton(s);o.option&&o.option("stylingMode",i==="underlined"?"text":"contained")}})},_renderValue(){return this._renderInputValue().promise()},_renderInputValue(i){i=i??this.option("value");let e=this.option("text");const t=this.option("displayValue"),n=this.option("displayValueFormatter");return t!==void 0&&i!==null?e=n(t):U(e)||(e=n(i)),this.option("text",e),this._input().val()!==(U(e)?e:"")?this._renderDisplayText(e):this._toggleEmptinessEventHandler(),ae().resolve()},_renderDisplayText(i){this._input().val(i),this._toggleEmptinessEventHandler()},_isValueValid(){if(this._input().length){const{validity:i}=this._input().get(0);if(i)return i.valid}return!0},_toggleEmptiness(i){this.$element().toggleClass("dx-texteditor-empty",i),this._togglePlaceholder(i)},_togglePlaceholder(i){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!i)},_renderProps(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState(i){this.callBase.apply(this,arguments),this._input().prop("disabled",i)},_toggleTabIndex(){const i=this._input(),e=this.option("disabled"),t=this.option("focusStateEnabled");e||!t?i.attr("tabIndex",-1):i.removeAttr("tabIndex")},_toggleReadOnlyState(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue(){return this.option("readOnly")},_toggleSpellcheckState(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize(){this._labelContainerElement&&(ar.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer(){return this._input()},_getLabelContainerWidth(){return Ge(this._getLabelContainer())},_getLabelBeforeWidth(){return(this._$beforeButtonsContainer&&Ge(this._$beforeButtonsContainer))??0},_updateLabelWidth(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_getFieldElement(){return this._getLabelContainer()},_setFieldAria(i){var e;const t=this.option("inputAttr"),n=t==null?void 0:t["aria-label"],s=(e=this._label)===null||e===void 0?void 0:e.getId(),o=n?void 0:s;if(o||i){const r={labelledby:o,label:n};this.setAria(r,this._getFieldElement())}},_renderLabel(){this._unobserveLabelContainerResize(),this._labelContainerElement=R(this._getLabelContainer()).get(0);const{label:i,labelMode:e,labelMark:t,rtlEnabled:n}=this.option(),s={onClickHandler:()=>{this.focus()},onHoverHandler:o=>{o.stopPropagation()},onActiveHandler:o=>{o.stopPropagation()},$editor:this.$element(),text:i,mark:t,mode:e,rtlEnabled:n,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new mF(s),this._setFieldAria(),this._labelContainerElement&&ar.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const i=this._input(),e=this.option("placeholder"),t={id:e?`dx-${new hi}`:void 0,"data-dx_placeholder":e},n=this._$placeholder=R("<div>").attr(t);n.insertAfter(i),n.addClass("dx-placeholder")},_attachPlaceholderEvents(){const i=be(Ct.up,this.NAME);q.on(this._$placeholder,i,()=>{q.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder(){return this._$placeholder||R()},_clearValueHandler(i){const e=this._input();i.stopPropagation(),this._saveValueChangeEvent(i),this._clearValue(),!this._isFocused()&&q.trigger(e,"focus"),q.trigger(e,"input")},_clearValue(){this.clear()},_renderEvents(){const i=this._input();ie(Ld,(e,t)=>{if(this.hasActionSubscription(`on${t}`)){const n=this._createActionByOption(`on${t}`,{excludeValidators:["readOnly"]});q.on(i,be(t.toLowerCase(),this.NAME),s=>{this._disposed||n({event:s})})}})},_refreshEvents(){const i=this._input();ie(Ld,(e,t)=>{q.off(i,be(t.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler(){this.option("text",this._input().val())},_keyDownHandler(i){const e=this._input(),t=i.ctrlKey&&oi(i)==="enter",n=e.val()!==this.option("value");t&&n&&q.trigger(e,"change")},_getValueChangeEventOptionName:()=>"valueChangeEvent",_renderValueChangeEvent(){const i=be(this._renderValueEventName(),`${this.NAME}TextChange`),e=be(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),t=be("keydown",`${this.NAME}TextChange`),n=this._input();q.on(n,i,this._keyPressHandler.bind(this)),q.on(n,e,this._valueChangeEventHandler.bind(this)),q.on(n,t,this._keyDownHandler.bind(this))},_cleanValueChangeEvent(){const i=`.${this.NAME}ValueChange`,e=`.${this.NAME}TextChange`;q.off(this._input(),i),q.off(this._input(),e)},_refreshValueChangeEvent(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:()=>"input change keypress",_focusTarget(){return this._input()},_focusEventTarget(){return this.element()},_isInput(i){return i===this._input().get(0)},_preventNestedFocusEvent(i){if(i.isDefaultPrevented())return!0;let e=this._isNestedTarget(i.relatedTarget);return i.type==="focusin"?e=e&&this._isNestedTarget(i.target)&&!this._isInput(i.target):e||this._toggleFocusClass(!1,this.$element()),e&&i.preventDefault(),e},_isNestedTarget(i){return!!this.$element().find(i).length},_focusClassTarget(){return this.$element()},_focusInHandler(i){this._preventNestedFocusEvent(i),this.callBase.apply(this,arguments)},_focusOutHandler(i){this._preventNestedFocusEvent(i),this.callBase.apply(this,arguments)},_toggleFocusClass(i,e){this.callBase(i,this._focusClassTarget(e))},_hasFocusClass(i){return this.callBase(R(i||this.$element()))},_renderEmptinessEvent(){const i=this._input();q.on(i,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler(){const i=this._input().val(),e=(i===""||i===null)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler(i,e){this.option("readOnly")||(this._saveValueChangeEvent(i),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),q.off(this._input(),"keyup.onEnterKey.dxTextEditor"),q.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp(i){this._disposed||oi(i)==="enter"&&this._enterKeyAction({event:i})},_updateValue(){this._options.silent("text",null),this._renderValue()},_dispose(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement(){return this._input()},_hasActiveElement(){return this._input().is(_e.getActiveElement(this._input()[0]))},_optionChanged(i){const{name:e,fullName:t,value:n}=i,s=e.replace("on","");if(Ld.includes(s)){this._refreshEvents();return}switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(i),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(n),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setFieldAria();break;case"width":this.callBase(i),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(i);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),this.callBase(i);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":t===e&&Gb(n),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(i),n&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;default:this.callBase(i)}},_renderInputType(){this._setInputType(this.option("mode"))},_setInputType(i){const e=this._input();i==="search"&&(i="text");try{e.prop("type",i)}catch{e.prop("type","text")}},getButton(i){return this._buttonCollection.getButton(i)},focus(){q.trigger(this._input(),"focus")},clear(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const i=this._getDefaultOptions();this.option("value")===i.value?(this._options.silent("text",""),this._renderValue()):this.option("value",i.value)},_resetToInitialValue(){this.option("value")===this._initialValue?(this._options.silent("text",this._initialValue),this._renderValue()):this.callBase(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()},_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)},reset(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length?this.callBase(i):this.callBase()},on(i,e){const t=this.callBase(i,e),n=i.charAt(0).toUpperCase()+i.substr(1);return Ld.includes(n)&&this._refreshEvents(),t}});class DS{constructor(e){this._value=" ",Y(this,e)}next(e){if(!arguments.length)return this._next;this._next=e}_prepareHandlingArgs(e,t){t=t||{};const n=Object.prototype.hasOwnProperty.call(e,"value")?"value":"text";return e[n]=t.str??e[n],e.start=t.start??e.start,e.length=t.length??e.length,e.index+=1,e}first(e){return e=e||0,this.next().first(e+1)}isAccepted(e){return!1}adjustedCaret(e,t,n){return t?this._adjustedForward(e,0,n):this._adjustedBackward(e,0,n)}_adjustedForward(e,t,n){}_adjustedBackward(e,t,n){}isValid(e){}reset(){}clear(e){}text(){}value(){}rawValue(){}handle(e){}}class _F extends DS{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class AS extends DS{text(){return(this._value!==" "?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value")?e.value:e.text;if(!t||!t.length||!e.length)return 0;if(e.start)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start-1}));const n=t[0],s=t.substring(1);return this._tryAcceptChar(n,e),this._accepted()?this.next().handle(this._prepareHandlingArgs(e,{str:s,length:e.length-1}))+1:this.handle(this._prepareHandlingArgs(e,{str:s,length:e.length-1}))}clear(e){this._tryAcceptChar(" ",e),this.next().clear(this._prepareHandlingArgs(e))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(e,t){if(this._accepted(!1),!this._isAllowed(e,t))return;const n=e===" "?this.maskChar:e;t.fullText=t.fullText.substring(0,t.index)+n+t.fullText.substring(t.index+1),this._accepted(!0),this._value=e}_accepted(e){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!e}first(e){return this._value===" "?e||0:super.first(e)}_isAllowed(e,t){return e===" "?!0:this._isValid(e,t)}_isValid(e,t){const{allowedChars:n}=this;return n instanceof RegExp?n.test(e):Ee(n)?n(e,t.index,t.fullText):Array.isArray(n)?n.includes(e):n===e}isAccepted(e){return e===0?this._accepted():this.next().isAccepted(e-1)}_adjustedForward(e,t,n){return t>=e?t:this.next()._adjustedForward(e,t+1,n)||t+1}_adjustedBackward(e,t){return t>=e-1?e:this.next()._adjustedBackward(e,t+1)||t+1}isValid(e){return this._isValid(this._value,e)&&this.next().isValid(this._prepareHandlingArgs(e))}}class Ub extends AS{value(){return this.next().value()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value"),n=t?e.value:e.text;if(!n.length||!e.length)return 0;if(e.start||t)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start&&e.start-1}));const s=n[0],o=n.substring(1);this._tryAcceptChar(s);const r=this._isAllowed(s)?this._prepareHandlingArgs(e,{str:o,length:e.length-1}):e;return this.next().handle(r)+1}clear(e){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(e))}_tryAcceptChar(e){this._accepted(this._isValid(e))}_isValid(e){return e===this.maskChar}first(e){return e=e||0,this.next().first(e+1)}_adjustedForward(e,t,n){return t>=e&&n===this.maskChar?t:e===t+1&&this._accepted()?e:this.next()._adjustedForward(e,t+1,n)}_adjustedBackward(e,t){return t>=e-1?0:this.next()._adjustedBackward(e,t+1)}isValid(e){return this.next().isValid(this._prepareHandlingArgs(e))}}const bF="blur beforedeactivate",vF=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],yF=["historyUndo","historyRedo"],CF=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function xF(i){return" ".repeat(i)}class wF{constructor(e){this.editor=e}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const e=this._editorInput(),t=be(bF,"dxMask");q.on(e,t,n=>{this.editor._changeHandler(n)})}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(e){const{originalEvent:t}=e;if(!t)return;const{inputType:n}=t;if(yF.includes(n))this._handleHistoryInputEvent();else if(vF.includes(n))this._handleBackwardDeleteInputEvent();else{const s=this._editorCaret();if(!s.end)return;this._clearSelectedText(),this._autoFillHandler(t),this._editorCaret(s),this._handleInsertTextInputEvent(t.data)}this._editorOption("text")===this._previousText&&e.stopImmediatePropagation()}_handleHistoryInputEvent(){const e=this._editorCaret();this._updateEditorMask({start:e.start,length:e.end-e.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText();const e=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==e.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(){var e,t;const n=((e=this._prevCaret)===null||e===void 0?void 0:e.end)-((t=this._prevCaret)===null||t===void 0?void 0:t.start)||1,s=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:s.start,length:n,text:xF(n)}))}_handleInsertTextInputEvent(e){var t;const n=e??"";this.editor.setForwardDirection(),this._updateEditorMask({start:((t=this._prevCaret)===null||t===void 0?void 0:t.start)??0,length:n.length||1,text:n})||this._editorCaret(this._prevCaret)}_updateEditorMask(e){const t=e.text.length,n=this.editor._handleChain(e);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:s,end:o}=this._editorCaret(),r=n-t;n>1&&t===1&&this._editorCaret({start:s+r,end:o+r}),this.editor._adjustCaret()}return!!n}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(()=>{this._editorCaret({start:e,end:e})},0)}}_focusOutHandler(e){this.editor._changeHandler(e),this._editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(e){const{editor:t}=this;t._maskKeyHandler(e,()=>{t._hasSelection()||t._handleKey(" ")})}_cutHandler(e){const t=this._editorCaret(),n=this._editorInput().val().substring(t.start,t.end);this.editor._maskKeyHandler(e,()=>Lp(e,n))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(()=>{const e=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",e)})}_pasteHandler(e){const{editor:t}=this;if(this._editorOption("disabled"))return;const n=this._editorCaret();t._maskKeyHandler(e,()=>{const s=Lp(e),o=t._maskRulesChain.text().substring(n.end),r=t._handleChain({text:s,start:n.start,length:s.length}),a=n.start+r;t._handleChain({text:o,start:a,length:o.length}),t._caret({start:a,end:a})})}_autoFillHandler(e){const{editor:t}=this,n=this._editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._isAutoFill()&&(t._maskKeyHandler(e,()=>{t._handleChain({text:n,start:0,length:n.length})}),t._validateMask())})}_isAutoFill(){const e=this._editorInput();if(Zt.webkit){const t=e.get(0);return(t==null?void 0:t.matches(":-webkit-autofill"))??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(e){return t=>{var n;(n=this[`_${e}Handler`])===null||n===void 0||n.call(this,t)}}attachEvents(){const e=this._editorInput();CF.forEach(t=>{const n=be(t.toLowerCase(),"dxMask");q.on(e,n,this.getHandler(t))}),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),q.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const{ios:SF,mac:EF}=Re.real(),IF=SF||EF,TF=function(i){let e;try{e={start:i.selectionStart,end:i.selectionEnd}}catch{e={start:0,end:0}}return e},DF=function(i,e){const t=_e.getBody();if(!(!t.contains(i)&&!t.contains(i.getRootNode().host)))try{i.selectionStart=e.start,i.selectionEnd=e.end}catch{}},AF=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i=R(i).get(0),!U(e))return TF(i);!t&&IF&&_e.getActiveElement(i)!==i||DF(i,e)},qb=AF,kF={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:i=>$d(i),l:i=>$d(i)||Xb(i),C:/\S/,c:/./,A:i=>$d(i)||Yb(i),a:i=>$d(i)||Yb(i)||Xb(i)};function Yb(i){return/[0-9]/.test(i)}function $d(i){const e=i.charCodeAt();return e>64&&e<91||e>96&&e<123||e>127}function Xb(i){return i===" "}const eg=gF.inherit({_getDefaultOptions(){return Y(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:re.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys(){const i=this,e={del:i._maskStrategy.getHandler("del"),enter:i._changeHandler},t=i.callBase();return ie(e,(n,s)=>{const o=t[n];t[n]=function(r){i.option("mask")&&s.call(i,r),o&&o(r)}}),t},_getSubmitElement(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy(){this._maskStrategy=new wF(this)},_initMarkup(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers(){if(!(this._onMouseWheel!==ue))return;const e=this._input(),t=be(Ll,this.NAME),n=this._createAction(s=>{const{event:o}=s;To(e)&&!ki(o)&&(this._onMouseWheel(o),o.preventDefault(),o.stopPropagation())});q.off(e,t),q.on(e,t,s=>{n({event:s})})},_onMouseWheel:ue,_useMaskBehavior(){return!!this.option("mask")},_attachDropEventHandler(){if(!this._useMaskBehavior())return;const e=be("drop",this.NAME),t=this._input();q.off(t,e),q.on(t,e,n=>n.preventDefault())},_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),this.callBase(),this._attachDropEventHandler()},_renderHiddenElement(){this.option("mask")&&(this._$hiddenElement=R("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_changeHandler(i){const e=this._input(),t=e.val();if(t===this._changedValue)return;this._changedValue=t;const n=bo(i,{type:"change"});q.trigger(e,n)},_parseMask(){this._maskRules=Y({},kF,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule(i){const e=this.option("mask");if(i>=e.length)return new _F;const t=e[i],n=t==="\\",s=n?new Ub({maskChar:e[i+1]}):this._getMaskRule(t);return s.next(this._parseMaskRule(i+1+n)),s},_getMaskRule(i){let e;return ie(this._maskRules,(t,n)=>{if(t===i)return e={pattern:t,allowedChars:n},!1}),U(e)?new AS(Y({maskChar:this.option("maskChar")||" "},e)):new Ub({maskChar:i})},_renderMaskedValue(){if(!this._maskRulesChain)return;const i=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const e={length:i.length};e[this._isMaskedValueMode()?"text":"value"]=i,this._handleChain(e),this._displayMask()},_replaceSelectedText(i,e,t){if(t===void 0)return i;const n=i.slice(0,e.start),s=i.slice(e.end);return n+t+s},_isMaskedValueMode(){return this.option("useMaskedValue")},_displayMask(i){i=i||this._caret(),this._renderValue(),this._caret(i)},_isValueEmpty(){return rc(this._value)},_shouldShowMask(){return this.option("showMaskMode")==="onFocus"?To(this._input())||!this._isValueEmpty():!0},_showMaskPlaceholder(){if(this._shouldShowMask()){const i=this._maskRulesChain.text();this.option("text",i),this.option("showMaskMode")==="onFocus"&&this._renderDisplayText(i)}},_renderValue(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const i=this._maskRulesChain.value(),e=rc(i)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler(i){if(!this._maskRulesChain){this.callBase.apply(this,arguments);return}this._saveValueChangeEvent(i),this.option("value",this._getPreparedValue())},_isControlKeyFired(i){return this._isControlKey(oi(i))||ki(i)},_handleChain(i){const e=this._maskRulesChain.handle(this._normalizeChainArguments(i));return this._updateMaskInfo(),e},_normalizeChainArguments(i){return i=i||{},i.index=0,i.fullText=this._maskRulesChain.text(),i},_convertToValue(i){return this._isMaskedValueMode()?i=this._replaceMaskCharWithEmpty(i||this._textValue||""):i=i||this._value||"",i},_replaceMaskCharWithEmpty(i){return i.replace(new RegExp(this.option("maskChar"),"g")," ")},_maskKeyHandler(i,e){if(this.option("readOnly"))return;this.setForwardDirection(),i.preventDefault(),this._handleSelection();const t=this._input().val(),n=()=>{t!==this._input().val()&&q.trigger(this._input(),"input")},s=e();s?s.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())},_handleKey(i,e){this._direction(e||"forward"),this._adjustCaret(i),this._handleKeyChain(i),this._moveCaret()},_handleSelection(){if(!this._hasSelection())return;const i=this._caret(),e=new Array(i.end-i.start+1).join(" ");this._handleKeyChain(e)},_handleKeyChain(i){const e=this._caret(),t=this.isForwardDirection()?e.start:e.start-1,n=this.isForwardDirection()?e.end:e.end-1,s=t===n?1:n-t;this._handleChain({text:i,start:t,length:s})},_tryMoveCaretBackward(){this.setBackwardDirection();const i=this._caret().start;return this._adjustCaret(),!i||i!==this._caret().start},_adjustCaret(i){const e=this._caret().start,t=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(e,t,i);this._caret({start:n,end:n})},_moveCaret(){const i=this._caret().start,e=i+(this.isForwardDirection()?0:-1),t=this._maskRulesChain.isAccepted(e)?i+(this.isForwardDirection()?1:-1):i;this._caret({start:t,end:t})},_caret(i,e){const t=this._input();if(t.length){if(!arguments.length)return qb(t);qb(t,i,e)}},_hasSelection(){const i=this._caret();return i.start!==i.end},_direction(i){if(!arguments.length)return this._typingDirection;this._typingDirection=i},setForwardDirection(){this._direction("forward")},setBackwardDirection(){this._direction("backward")},isForwardDirection(){return this._direction()==="forward"},_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()},_clean(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask(){if(!this._maskRulesChain)return;const i=rc(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})},_updateHiddenElement(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()},_processEmptyMask(i){if(i)return;const e=this.option("value");this.option({text:e,isValid:!0,validationError:null}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()},_optionChanged(i){switch(i.name){case"mask":this._updateMaskOption(),this._processEmptyMask(i.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(i),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(i)}},clear(){const{value:i}=this._getDefaultOptions();this.option("value")===i&&this._renderMaskedValue(),this.callBase()}});wt("dxTextEditor",eg);const OF=Je(),RF=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],cd=eg.inherit({ctor(i,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions(){return Y(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderInputType(){this.callBase(),this._renderSearchMode()},_useTemplates:()=>!1,_renderProps(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp(){const i=this._getMaxLength();i&&i>0?this._input().attr("maxLength",i):this._input().removeAttr("maxLength")},_renderSearchMode(){const i=this._$element;this.option("mode")==="search"?(i.addClass("dx-searchbox"),this._renderSearchIcon(),this._showClearButton===void 0&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(i.removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon(){const i=R("<div>").addClass("dx-icon").addClass("dx-icon-search");i.prependTo(this._input().parent()),this._$searchIcon=i},_getLabelContainerWidth(){if(this._$searchIcon){const i=this._input().parent();return Ge(i)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth(){let i=this.callBase();return this._$searchIcon&&(i+=St(this._$searchIcon)),i},_optionChanged(i){switch(i.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(i),this._updateLabelWidth();break;case"mask":this.callBase(i),this._toggleMaxLengthProp();break;default:this.callBase(i)}},_onKeyDownCutOffHandler(i){const e=this._getMaxLength();if(e&&!i.ctrlKey&&!this._hasSelection()){const t=R(i.target),n=oi(i);return this._cutOffExtraChar(t),t.val().length<e||RF.includes(n)||OF.getSelection().toString()!==""}return!0},_onChangeCutOffHandler(i){const e=R(i.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar(i){const e=this._getMaxLength(),t=i.val();e&&t.length>e&&i.val(t.substr(0,e))},_getMaxLength(){return!!this.option("mask")?null:this.option("maxLength")}});wt("dxTextBox",cd);function MF(i){return class{constructor(){throw new Error(`Module '${i}' not found`)}static getInstance(){}}}let Zb=MF("TextBox");const gr={_getDefaultOptions:function(){return Y(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){const i=this.$element(),e=this.option("searchEnabled"),t=this._addWidgetPrefix("search"),n=this._addWidgetPrefix("with-search");if(!e){i.removeClass(n),this._removeSearchBox();return}const s=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(s):(i.addClass(n),this._$searchEditorElement=R("<div>").addClass(t).prependTo(i),this._searchEditor=this._createComponent(this._$searchEditorElement,Zb,s))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){const i=this,e=i.option("searchEditorOptions"),t=re.format("Search");return Y({mode:"search",placeholder:t,tabIndex:i.option("tabIndex"),value:i.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":t},onValueChanged:function(n){const s=i.option("searchTimeout");i._valueChangeDeferred=new ae,clearTimeout(i._valueChangeTimeout),i._valueChangeDeferred.done((function(){this.option("searchValue",n.value)}).bind(i)),n.event&&n.event.type==="input"&&s?i._valueChangeTimeout=setTimeout(function(){i._valueChangeDeferred.resolve()},s):i._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(i,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(i,e)},getOperationBySearchMode:function(i){return i==="equals"?"=":i},_optionChanged:function(i){switch(i.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource){mt.log("W1009");return}i.name==="searchMode"?this._dataSource.searchOperation(this.getOperationBySearchMode(i.value)):this._dataSource[i.name](i.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(i)}},focus:function(){if(!this.option("focusedElement")&&this.option("searchEnabled")){this._searchEditor&&this._searchEditor.focus();return}this.callBase()},_cleanAria:function(){const i=this.$element();this.setAria({role:null,activedescendant:null},i),i.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(i){Zb=i}},PF=Lt.inherit({ctor(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes(i,e){const t=this;ie(i,(n,s)=>{const o=U(e)?e:t._getParentId(s),r=t._convertItemToNode(s,o);t._dataStructure.push(r),t._checkForDuplicateId(r.internalFields.key),t._indexByKey[r.internalFields.key]=t._dataStructure.length-1,t._itemHasChildren(s)&&t._convertItemsToNodes(t._dataAccessors.getters.items(s),r.internalFields.key)})},_checkForDuplicateId(i){if(U(this._indexByKey[i]))throw mt.Error("E1040",i)},_getParentId(i){return this._dataType==="plain"?this._dataAccessors.getters.parentKey(i):void 0},_itemHasChildren(i){if(this._dataType==="plain")return;const e=this._dataAccessors.getters.items(i);return e&&e.length},_getUniqueKey(i){const e=this._dataAccessors.getters.key,t=e(i);return e&&(t||t===0)&&Qa(t)?t:this.getItemsCount()},_convertItemToNode(i,e){this._itemsCount++,i.visible!==!1&&this._visibleItemsCount++;const t={internalFields:{disabled:this._dataAccessors.getters.disabled(i,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(i,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(i,{defaultValue:!1}),key:this._getUniqueKey(i),parentKey:U(e)?e:this._rootValue,item:this._makeObjectFromPrimitive(i),childrenKeys:[]}};return Y(t,i),delete t.items,t},setChildrenKeys(){const i=this;ie(this._dataStructure,(e,t)=>{if(t.internalFields.parentKey===i._rootValue)return;const n=i.getParentNode(t);n&&n.internalFields.childrenKeys.push(t.internalFields.key)})},_makeObjectFromPrimitive(i){if(Qa(i)){const e=i;i={},this._dataAccessors.setters.key(i,e)}return i},_convertToPublicNode(i,e){if(!i)return null;const t={text:this._dataAccessors.getters.display(i),key:i.internalFields.key,selected:i.internalFields.selected,expanded:i.internalFields.expanded,disabled:i.internalFields.disabled,parent:e||null,itemData:i.internalFields.item,children:[],items:[]};return t.parent&&(t.parent.children.push(t),t.parent.items.push(t)),t},convertToPublicNodes(i,e){if(!i.length)return[];const t=this,n=[];return ie(i,(s,o)=>{o=Qa(o)?t._getByKey(o):o;const r=t._convertToPublicNode(o,e);r.children=t.convertToPublicNodes(o.internalFields.childrenKeys,r),n.push(r),o.internalFields.publicNode=r}),n},setDataAccessors(i){this._dataAccessors=i},_getByKey(i){return this._dataStructure[this.getIndexByKey(i)]||null},getParentNode(i){return this._getByKey(i.internalFields.parentKey)},getByKey(i,e){if(e==null)return null;let t=null;const n=this;return function(s,o){return ie(s,(r,a)=>{if((a.internalFields&&a.internalFields.key||n._dataAccessors.getters.key(a)).toString()===o.toString())return t=a,!1}),t}(i,e)},getItemsCount(){return this._itemsCount},getVisibleItemsCount(){return this._visibleItemsCount},updateIndexByKey(){const i=this;this._indexByKey={},ie(this._dataStructure,(e,t)=>{i._checkForDuplicateId(t.internalFields.key),i._indexByKey[t.internalFields.key]=e})},updateChildrenKeys(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys(){this._indexByKey={},ie(this._dataStructure,(i,e)=>{e.internalFields.childrenKeys=[]})},getIndexByKey(i){return this._indexByKey[i]},createPlainStructure(i,e,t){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=e,this._dataType=t,this._indexByKey={},this._convertItemsToNodes(i),this.setChildrenKeys(),this._dataStructure}}),Wr="expanded",zo="selected",BF="disabled";gr.setEditorClass(cd);const FF=Lt.inherit({ctor(i){this.options={},Y(this.options,this._defaultOptions(),i),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption(i,e){this.options[i]=e,i==="recursiveSelection"&&this._updateSelection()},_defaultOptions:()=>({dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new PF,onNodeChanged:ue,sort:null}),_createInternalDataStructure(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(zo)},_updateExpansion(i){this.options.recursiveExpansion&&(i?this._updateOneBranch(i):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(Wr)},_updateNodesKeysArray(i){const e=this;let t=[];return ie(e._getDataBySelectionMode(),(n,s)=>{e._isNodeVisible(s)&&s.internalFields[i]&&(i===Wr||e.options.multipleSelection?t.push(s.internalFields.key):(t.length&&e.toggleSelection(t[0],!1,!0),t=[s.internalFields.key]))}),t},_getDataBySelectionMode(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:i=>i.internalFields.item.visible!==!1,_getByKey(i,e){return i===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(i,e)},_setChildrenSelection(){const i=this;ie(this._dataStructure,(e,t)=>{if(!t.internalFields.childrenKeys.length)return;const n=t.internalFields.selected;n===!0&&i._toggleChildrenSelection(t,n)})},_setParentSelection(){const i=this;ie(this._dataStructure,(e,t)=>{i.options.dataConverter.getParentNode(t)&&t.internalFields.parentKey!==i.options.rootValue&&i._iterateParents(t,s=>{const o=i._calculateSelectedState(s);i._setFieldState(s,zo,o)})})},_setParentExpansion(){const i=this;ie(this._dataStructure,(e,t)=>{t.internalFields.expanded&&i._updateOneBranch(t.internalFields.key)})},_updateOneBranch(i){const e=this,t=this.getNodeByKey(i);e._iterateParents(t,n=>{e._setFieldState(n,Wr,!0)})},_iterateChildren(i,e,t,n){if(!Ee(t))return;const s=this,o=i.internalFields.key;n=n||[],n.indexOf(o)===-1&&(n.push(o),ie(i.internalFields.childrenKeys,(r,a)=>{const l=s.getNodeByKey(a);t(l),l.internalFields.childrenKeys.length&&e&&s._iterateChildren(l,e,t,n)}))},_iterateParents(i,e,t){if(i.internalFields.parentKey===this.options.rootValue||!Ee(e))return;t=t||[];const{key:n}=i.internalFields;if(t.indexOf(n)===-1){t.push(n);const s=this.options.dataConverter.getParentNode(i);s&&(e(s),s.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(s,e,t))}},_calculateSelectedState(i){const e=i.internalFields.childrenKeys.length;let t=0,n=0,s=!1;for(let o=0;o<=e-1;o++){const r=this.getNodeByKey(i.internalFields.childrenKeys[o]),a=r.internalFields.item.visible===!1,l=r.internalFields.selected;if(a){n++;continue}l?t++:l===void 0&&(t+=.5)}return t&&(s=t===e-n?!0:void 0),s},_toggleChildrenSelection(i,e){const t=this;this._iterateChildren(i,!0,n=>{t._isNodeVisible(n)&&t._setFieldState(n,zo,e)})},_setFieldState(i,e,t){i.internalFields[e]!==t&&(i.internalFields[e]=t,i.internalFields.publicNode&&(i.internalFields.publicNode[e]=t),this.options.dataAccessors.setters[e](i.internalFields.item,t),this.options.onNodeChanged(i))},_markChildren(i){const e=this;ie(i,(t,n)=>{const s=e.getIndexByKey(n),o=e.getNodeByKey(n);e._dataStructure[s]=0,o.internalFields.childrenKeys.length&&e._markChildren(o.internalFields.childrenKeys)})},_removeNode(i){const e=this.getNodeByKey(i);this._dataStructure[this.getIndexByKey(i)]=0,this._markChildren(e.internalFields.childrenKeys);const t=this;let n=0;const s=Y([],this._dataStructure);ie(s,(o,r)=>{r||(t._dataStructure.splice(o-n,1),n++)})},_addNode(i){const{dataConverter:e}=this.options,t=e._convertItemToNode(i,this.options.dataAccessors.getters.parentKey(i));this._dataStructure=this._dataStructure.concat(t),this._initialDataStructure=this._initialDataStructure.concat(t),e._dataStructure=e._dataStructure.concat(t)},_updateFields(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys(){return this._selectedNodesKeys},getExpandedNodesKeys(){return this._expandedNodesKeys},getData(){return this._dataStructure},getFullData(){return this._initialDataStructure},getNodeByItem(i){let e=null;return ie(this._dataStructure,(t,n)=>{if(n.internalFields.item===i)return e=n,!1}),e},getNodesByItems(i){const e=this,t=[];return ie(i,(n,s)=>{const o=e.getNodeByItem(s);o&&t.push(o)}),t},getNodeByKey(i,e){return this._getByKey(e||this._getDataBySelectionMode(),i)},getTreeNodes(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:i=>i.internalFields.publicNode,getRootNodes(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes(i){return dn(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",i]).toArray()},getIndexByKey(i){return this.options.dataConverter.getIndexByKey(i)},addItem(i){this._addNode(i),this._updateFields()},removeItem(i){this._removeNode(i),this._updateFields()},toggleSelection(i,e,t){const n=this._isSingleModeUnselect(e),s=this._getByKey(t||n?this._initialDataStructure:this._dataStructure,i);this._setFieldState(s,zo,e),this.options.recursiveSelection&&!t&&(e?this._setChildrenSelection():this._toggleChildrenSelection(s,e),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(zo)},_isSingleModeUnselect(i){return!this.options.multipleSelection&&!i},toggleNodeDisabledState(i,e){const t=this.getNodeByKey(i);this._setFieldState(t,BF,e)},toggleSelectAll(i){if(!U(i))return;const e=this,t=e._selectedNodesKeys[e._selectedNodesKeys.length-1],n=e._isSingleModeUnselect(i)?this._initialDataStructure:this._dataStructure;ie(n,(s,o)=>{e._isNodeVisible(o)&&e._setFieldState(o,zo,i)}),e._selectedNodesKeys=e._updateNodesKeysArray(zo),!i&&e.options.selectionRequired&&e.toggleSelection(t,!0)},isAllSelected(){return this.getSelectedNodesKeys().length?this.getSelectedNodesKeys().length===this.getVisibleItemsCount()?!0:void 0:!1},toggleExpansion(i,e){const t=this.getNodeByKey(i);this._setFieldState(t,Wr,e),e&&this._updateExpansion(i),this._expandedNodesKeys=this._updateNodesKeysArray(Wr)},isFiltered(i){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[i]).length},_createCriteria(i,e,t){const n=[];return Array.isArray(i)?(ie(i,(s,o)=>{n.push([o,t,e],"or")}),n.pop(),n):[i,t,e]},_filterDataStructure(i,e){const t=this.options.searchExpr||this.options.dataAccessors.getters.display,n=gr.getOperationBySearchMode(this.options.searchMode),s=this._createCriteria(t,i,n);return e=e||this._initialDataStructure,dn(e,{langParams:this.options.langParams}).filter(s).toArray()},search(i){const e=this;let t=this._filterDataStructure(i);const{dataConverter:n}=this.options;return function s(o,r){const{length:a}=o;for(;r<a;){const l=o[r];if(l.internalFields.parentKey===e.options.rootValue){r++;continue}const d=n.getParentNode(l);if(!d){mt.log("W1007",l.internalFields.parentKey,l.internalFields.key),r++;continue}if(d.internalFields.expanded||e._setFieldState(d,Wr,!0),o.includes(d)){r++;continue}o.splice(r,0,d),s(o,r)}}(t,0),this.options.sort&&(t=qs.queryByOptions(dn(t),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),n._indexByKey={},ie(t,(s,o)=>{o.internalFields.childrenKeys=[],n._indexByKey[o.internalFields.key]=s}),n._dataStructure=t,n.setChildrenKeys(),n._dataStructure}}),kS=Dr.inherit({_getDefaultOptions(){return Y(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter(){const i=this._createDataAdapterAccessors();this._dataAdapter=new FF(Y({dataAccessors:{getters:i.getters,setters:i.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:ue,_getItemExtraPropNames:ue,_initDynamicTemplates(){const i=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new Ir(this._addContent.bind(this),i,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent(i,e){i.html(e.html).append(this._getIconContainer(e)).append(this._getTextContainer(e))},_getLinkContainer(i,e,t){let{linkAttr:n,url:s}=t;const o=We(n)?n:{};return R("<a>").addClass("dx-item-url").attr(ve({},o,{href:s})).append(i).append(e)},_getIconContainer(i){if(!i.icon)return;const e=Ys(i.icon);if(e.is("img")){const t=this.NAME.startsWith("dxPrivateComponent")?"":`${this.NAME} `;e.attr("alt",`${t}item icon`)}return e},_getTextContainer:i=>R("<span>").text(i.text),_initAccessors(){const i=this;ie(this._getAccessors(),(e,t)=>{i._compileAccessor(t)}),this._compileDisplayGetter()},_getAccessors:()=>["key","selected","items","disabled","parentId","expanded"],_getChildNodes(i){const e=this,t=[];return ie(i.internalFields.childrenKeys,(n,s)=>{const o=e._dataAdapter.getNodeByKey(s);t.push(o)}),t},_hasChildren:i=>i&&i.internalFields.childrenKeys.length,_compileAccessor(i){const e=`_${i}Getter`,t=`_${i}Setter`,n=this.option(`${i}Expr`);if(!n){this[e]=ue,this[t]=ue;return}if(Ee(n)){this[t]=function(s,o){s[n()]=o},this[e]=function(s){return s[n()]};return}this[e]=Nt(n),this[t]=Uf(n)},_createDataAdapterAccessors(){const i=this,e={getters:{},setters:{}};return ie(this._getAccessors(),(t,n)=>{const s=`_${n}Getter`,o=`_${n}Setter`,r=n==="parentId"?"parentKey":n;e.getters[r]=i[s],e.setters[r]=i[o]}),e.getters.display=this._displayGetter?this._displayGetter:t=>t.text,e},_initMarkup(){this.callBase(),this._addWidgetClass()},_addWidgetClass(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:ue,_renderItemFrame(i,e){const t=this.callBase.apply(this,arguments);return t.toggleClass("dx-state-disabled",!!this._disabledGetter(e)),t},_optionChanged(i){switch(i.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(i);break;default:this.callBase(i)}}}),OS=Hi,VF=kS;class NF extends Wm{_getPlainItems(){return Ii(this._collectionWidget.option("items"),function e(t){return t.items?[t].concat(Ii(t.items,e)):t})}_stringifyItem(e){return JSON.stringify(e,(t,n)=>t==="template"?this._getTemplateString(n):n)}_getTemplateString(e){let t;return typeof e=="object"?t=R(e).text():t=e.toString(),t}}const jn="dx-menu-item",LF=`${jn}-content`,Vh=`${jn}-selected`,Jb=`${jn}-wrapper`,$F=`${jn}-expanded`,HF=`${jn}-has-text`,zF=`${jn}-has-icon`,WF=`${jn}-has-submenu`,RS=`${jn}-popout`,jF=`${RS}-container`,MS=`${jn}-text`,KF={show:50,hide:300},GF=`${MS}-with-url`;class tg extends VF{_getDefaultOptions(){return Y(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return jn}_setAriaSelectionAttribute(e,t){}_selectedItemClass(){return Vh}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return Y(super._supportedKeys(),{space:()=>{const e=R(this.option("focusedElement"));!e.length||!this._isSelectionEnabled()||this.selectItem(e[0])},pageUp:ue,pageDown:ue})}_isSelectionEnabled(){return this.option("selectionMode")==="single"}_init(){this._activeStateUnit=`.${jn}`,super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(e,t,n){const{linkAttr:s,url:o}=n;return e==null||e.addClass("dx-icon-with-url"),t==null||t.addClass(GF),super._getLinkContainer(e,t,{linkAttr:s,url:o})}_addContent(e,t){const{html:n,url:s}=t;if(s){e.html(n);const o=this._getLinkContainer(this._getIconContainer(t),this._getTextContainer(t),t);e.append(o)}else super._addContent(e,t);e.append(this._getPopoutContainer(t)),this._addContentClasses(t,e.parent())}_getTextContainer(e){const{text:t}=e;if(!t)return;const n=R("<span>").addClass(MS),s=ht(e)?t:String(e);return n.text(s)}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(e){const{items:t}=e;let n;if(t&&t.length){const s=R("<div>").addClass(RS);n=R("<span>").addClass(jF).append(s)}return n}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(e){if(!e)return;const t=this._dataAdapter.getNodeByItem(e);this._dataAdapter.toggleSelection(t.internalFields.key,!0)}_renderSelectedItem(){const e=this._dataAdapter.getSelectedNodesKeys(),t=e.length&&e[0],n=this.option("selectedItem");if(!t){this._selectByItem(n);return}const s=this._dataAdapter.getNodeByKey(t);if(s.selectable!==!1){if(!n){this.option("selectedItem",s.internalFields.item);return}n!==s.internalFields.item&&(this._dataAdapter.toggleSelection(t,!1),this._selectByItem(n))}}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=zm()}_toggleActiveState(e,t,n){if(super._toggleActiveState.apply(this,arguments),!this._inkRipple)return;const s={element:e,event:n};t?this._inkRipple.showWave(s):this._inkRipple.hideWave(s)}_getShowSubmenuMode(){let e=this.option("showSubmenuMode");return e=We(e)?e.name:e,this._isDesktopDevice()?e:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return Re.real().deviceType==="desktop"}_initEditStrategy(){const e=NF;this._editStrategy=new e(this)}_addCustomCssClass(e){e.addClass(this.option("cssClass"))}_itemWrapperSelector(){return`.${Jb}`}_hoverStartHandler(e){const t=this._getItemElementByEventArgs(e);!t||this._isItemDisabled(t)||(e.stopPropagation(),this._getShowSubmenuMode()==="onHover"&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,t),this._getSubmenuDelay("show"))))}_getAvailableItems(e){return super._getAvailableItems(e).filter(function(){return R(this).css("visibility")!=="hidden"})}_isItemDisabled(e){return this._disabledGetter(e.data(this._itemDataKey()))}_showSubmenu(e){this._addExpandedClass(e)}_addExpandedClass(e){R(e).addClass($F)}_getSubmenuDelay(e){const{delay:t}=this.option("showSubmenuMode");return U(t)?We(t)?t[e]:t:KF[e]}_getItemElementByEventArgs(e){let t=R(e.target);if(t.hasClass(this._itemClass())||t.get(0)===e.currentTarget)return t;for(;!t.hasClass(this._itemClass());)if(t=t.parent(),t.hasClass("dx-submenu"))return null;return t}_hoverEndHandler(e){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(e){return e&&e.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(e,t){if(!e.length)return;this.hasIcons=!1;const n=this._renderContainer(this.$element(),t);let s=-1,o=-1;ie(e,(r,a)=>{const l=a.visible!==!1;l&&s<0&&(s=r),s<r&&(a.beginGroup||r===o)&&(o=l?r:r+1),r===o&&s<r&&this._renderSeparator(n),this._renderItem(r,a,n)}),this.hasIcons||n.addClass("dx-menu-no-icons")}_renderContainer(e,t){const n=R("<ul>");return this.setAria("role","none",n),n.appendTo(e).addClass("dx-menu-items-container")}_createDOMElement(e){const t=R("<li>");return this.setAria("role","none",t),t.appendTo(e).addClass(Jb)}_renderItem(e,t,n,s){const{items:o=[]}=this.option(),r=s??this._createDOMElement(n);o[e+1]&&o[e+1].beginGroup&&r.addClass("dx-menu-last-group-item");const a=super._renderItem(e,t.internalFields.item,r);t.internalFields.item===this.option("selectedItem")&&a.addClass(Vh),a.attr("tabIndex",-1),this._hasSubmenu(t)&&this.setAria("haspopup","true",a)}_renderItemFrame(e,t,n){const s=n.children(`.${jn}`);return s.length?s:super._renderItemFrame.apply(this,arguments)}_refreshItem(e,t){const n=this._dataAdapter.getNodeByItem(t),s=e.data(this._itemIndexKey()),o=e.closest("ul"),r=e.closest("li");this._renderItem(s,n,o,r)}_addContentClasses(e,t){const n=e.text?!!e.text.length:!1,s=!!e.icon,o=e.items?!!e.items.length:!1;t.toggleClass(HF,n),t.toggleClass(zF,s),this.hasIcons||(this.hasIcons=s),t.toggleClass(WF,o)}_getItemContent(e){let t=super._getItemContent(e);return t.length||(t=e.children(`.${LF}`)),t}_postprocessRenderItem(e){const t=R(e.itemElement),n=this._dataAdapter.getSelectedNodesKeys();if(!n.length||!this._selectedGetter(e.itemData)||!this._isItemSelectable(e.itemData)){this._setAriaSelectionAttribute(t,"false");return}this._dataAdapter.getNodeByItem(e.itemData).internalFields.key===n[0]?(t.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(t,"true")):this._setAriaSelectionAttribute(t,"false")}_isItemSelectable(e){return e.selectable!==!1}_renderSeparator(e){R("<li>").appendTo(e).addClass("dx-menu-separator")}_itemClickHandler(e){if(e._skipHandling)return;const t=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(e,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:t.bind(this)}),e._skipHandling=!0}_itemClick(e){const{event:t,itemData:n}=e.args[0],s=this._getItemElementByEventArgs(t),o=s&&s.find(".dx-item-url").get(0);n.url&&o&&o.click()}_updateSubmenuVisibilityOnClick(e){this._updateSelectedItemOnClick(e),this._getShowSubmenuMode()==="onClick"&&this._addExpandedClass(e.args[0].itemElement)}_updateSelectedItemOnClick(e){const t=e.args?e.args[0]:e;if(!this._isItemSelectAllowed(t.itemData))return;const n=this._dataAdapter.getSelectedNodesKeys(),s=n.length&&this._dataAdapter.getNodeByKey(n[0]);s&&this._toggleItemSelection(s,!1),!s||s.internalFields.item!==t.itemData?this.selectItem(t.itemData):(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null))}_isItemSelectAllowed(e){const t=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&t&&this._isItemSelectable(e)&&!this._itemsGetter(e)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return wC()}_optionChanged(e){switch(e.name){case"showSubmenuMode":break;case"selectedItem":{const t=this._dataAdapter.getNodeByItem(e.value),n=this._dataAdapter.getSelectedNodesKeys()[0];if(t&&t.internalFields.key!==n){if(t.selectable===!1)break;n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(t,!0),this._updateSelectedItems()}break}case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(e)}}_toggleItemSelection(e,t){const n=this._getElementByItem(e.internalFields.item);n&&R(n).toggleClass(Vh),this._dataAdapter.toggleSelection(e.internalFields.key,t)}_getElementByItem(e){let t;return ie(this._itemElements(),(n,s)=>R(s).data(this._itemDataKey())!==e?!0:(t=s,!1)),t}_updateSelectedItems(e,t){(e||t)&&this._fireSelectionChangeEvent(t,e)}_fireSelectionChangeEvent(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[e],removedItems:[t]})}selectItem(e){const t=e.nodeType?this._getItemData(e):e,n=this._dataAdapter.getSelectedNodesKeys()[0],s=this.option("selectedItem"),o=this._dataAdapter.getNodeByItem(t);o.internalFields.key!==n&&(n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(o,!0),this._updateSelectedItems(s,t),this._setOptionWithoutOptionChange("selectedItem",t))}unselectItem(e){const t=e.nodeType?this._getItemData(e):e,n=this._dataAdapter.getNodeByItem(t),s=this.option("selectedItem");n.internalFields.selected&&(this._toggleItemSelection(n,!1),this._updateSelectedItems(s,null),this._setOptionWithoutOptionChange("selectedItem",null))}}tg.ItemClass=Tr;const UF="dx-menu-phone-overlay",Qb=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],qF=["up","down","first","last"],ev=Je();class ig extends tg{getShowEvent(e){if(We(e)){if(e.name!==null)return e.name??"dxcontextmenu"}else return e;return null}getShowDelay(e){return We(e)&&e.delay}_getDefaultOptions(){return Y(super._getDefaultOptions(),{showEvent:"dxcontextmenu",hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!qe(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),Y(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},ie(Qb,(e,t)=>{this._actions[t]=this._createActionByOption(t)||ue})}_setOptionsByReference(){super._setOptionsByReference(),Y(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():R()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return Y(super._supportedKeys(),{space:()=>{const e=R(this.option("focusedElement"));this.hide(),!(!e.length||!this._isSelectionEnabled())&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(e){const t=this._getAvailableItems(),n=t.filter(".dx-state-focused"),s=t.filter(".dx-state-hover");return s.closest(".dx-menu-items-container").find(".dx-menu-item").index(n)>=0?n:s.length?s:super._getActiveItem()}_moveFocus(e){const t=this._getItemsByLocation(e),n=this._getActiveItem(!0),s=this.itemsContainer().find(".dx-state-hover"),r=!!(R(this.option("focusedElement")).length||s.length);let a;switch(e){case"up":a=r?this._prevItem(t):n,this._setFocusedElement(a),n.is(t.first())&&this._actions.onLeftFirstItem(n);break;case"down":a=r?this._nextItem(t):n,this._setFocusedElement(a),n.is(t.last())&&this._actions.onLeftLastItem(n);break;case"right":a=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(t,e),this._setFocusedElement(a);break;case"left":a=this.option("rtlEnabled")?this._expandSubmenuHandler(t,e):this._hideSubmenuHandler(),this._setFocusedElement(a);break;case"first":a=t.first(),this._setFocusedElement(a);break;case"last":a=t.last(),this._setFocusedElement(a);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&e.length!==0&&(this.option("focusedElement",ze(e)),this._scrollToElement(e))}_scrollToElement(e){const n=e.closest(".dx-scrollable").dxScrollable("instance");n==null||n.scrollToElement(e)}_getItemsByLocation(e){const t=this._getActiveItem(!0);let n;return qF.includes(e)&&(n=t.closest(".dx-menu-items-container").children().children()),n=this._getAvailableItems(n),n}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if(U(this._overlay)){const e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){const e=this._getActiveItem(!0),t=e.parents(".dx-menu-item-expanded").first();if(t.length)return this._hideSubmenusOnSameLevel(t),this._hideSubmenu(e.closest(".dx-submenu")),t;this._actions.onCloseRootSubmenu(e)}_expandSubmenuHandler(e,t){const n=this._getActiveItem(!0),s=this._getItemData(n),o=this._dataAdapter.getNodeByItem(s),r=this._hasSubmenu(o),a=n.children(".dx-submenu");if(r&&!n.hasClass("dx-state-disabled"))return(!a.length||a.css("visibility")==="hidden")&&this._showSubmenu(n),this._nextItem(this._getItemsByLocation(t));this._actions.onExpandLastSubmenu(n)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_isTargetOutOfComponent(e){return!(R(e).closest(".dx-context-menu").length!==0)}_focusOutHandler(e){const{relatedTarget:t}=e;t&&this._isTargetOutOfComponent(t)&&this.hide(),super._focusOutHandler(e)}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(this._overlay)return;const e=this._getOverlayOptions();this._overlay=this._createComponent(R("<div>").appendTo(this._$element),is,e);const t=this._overlay.$content();t.addClass("dx-context-menu"),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this._attachContextMenuEvent()}preventShowingDefaultContextMenuAboveOverlay(){const e=this._itemContainer(),t=be(O1,this.NAME);q.off(e,t,".dx-submenu"),q.on(e,t,".dx-submenu",n=>{n.stopPropagation(),n.preventDefault(),q.off(e,t,".dx-submenu")})}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){Re.current().phone&&e.addClass(UF)}_detachShowContextMenuEvents(e){const t=this.getShowEvent(this.option("showEvent"));if(!t)return;const n=be(t,this.NAME);this._showContextMenuEventHandler?q.off(_e.getDocument(),n,e,this._showContextMenuEventHandler):q.off(R(e),n)}_attachShowContextMenuEvents(){const e=this._getTarget(),t=this.getShowEvent(this.option("showEvent"));if(!t)return;const n=be(t,this.NAME);let s=this._createAction(r=>{const a=this.getShowDelay(this.option("showEvent"));a?setTimeout(()=>this._show(r.event),a):this._show(r.event)},{validatingTargetName:"target"});const o=r=>s({event:r,target:R(r.currentTarget)});s=this._createAction(s),Cn(e)||e.nodeType||gi(e)?(this._showContextMenuEventHandler=void 0,q.on(e,n,o)):(this._showContextMenuEventHandler=o,q.on(_e.getDocument(),n,e,this._showContextMenuEventHandler))}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,t){const n=t||this._itemContainer();e=R("<div>"),e.appendTo(n).addClass("dx-submenu").css("visibility",t?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);const s=super._renderContainer(e);return t?s:this.option("width")?s.css("minWidth",this.option("width")):this.option("height")?s.css("minHeight",this.option("height")):s}_renderSubmenuItems(e,t){this._renderItems(this._getChildNodes(e),t);const n=t.children(".dx-submenu");this._actions.onSubmenuCreated({itemElement:ze(t),itemData:e.internalFields.item,submenuElement:ze(n)}),this._initScrollable(n),this.setAria({role:"menu"},n)}_getOverlayOptions(){const e=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:n=>this._hideOnOutsideClickHandler(n),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:ev}}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){const{closeOnOutsideClick:t,hideOnOutsideClick:n}=this.option();return Ee(n)?n(e):Ee(t)?t(e):n||t}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(_e.isDocument(e.target))return!0;const t=this._getActiveItemsContainer(e.target),n=this._getItemsContainers(),s=this._searchActiveItem(e.target),o=this.$element().parents(".dx-menu-item"),r=s[0]===o[0]&&s.length&&o.length;return this._isIncludeOverlay(t,n)&&s.length||r?(this._getShowSubmenuMode()==="onClick"&&this._hideAllShownChildSubmenus(s),!1):!0}_getActiveItemsContainer(e){return R(e).closest(".dx-menu-items-container")}_getItemsContainers(){return this._overlay.$content().find(".dx-menu-items-container")}_searchActiveItem(e){return R(e).closest(".dx-menu-item").eq(0)}_isIncludeOverlay(e,t){let n=!1;return ie(t,(s,o)=>{e.is(o)&&!n&&(n=!0)}),n}_hideAllShownChildSubmenus(e){const t=e.find(".dx-submenu"),n=Y([],this._shownSubmenus);t.length>0&&ie(n,(s,o)=>{const r=this._searchActiveItem(o.context).parent();r.parent().is(e.parent().parent())&&!r.is(e.parent())&&this._hideSubmenu(o)})}_initScrollable(e){this._createComponent(e,vn,{useKeyboard:!1,_onVisibilityChanged:t=>{t.scrollTo(0)}})}_setSubMenuHeight(e,t,n){const s=e.find(".dx-menu-items-container"),o=rt(s),r=this._getMaxHeight(t,!n),a=Math.min(o,r);e.css("height",n?a:"100%")}_getMaxHeight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=rt(ev),s=Cn(e),o=_e.getDocument(),r=e.length&&e[0]===o;if(!s||r)return n;const a=e[0].getBoundingClientRect().top,l=rt(e);return(t?Math.max(a,n-a-l):Math.max(a+l,n-a))-10}_dimensionChanged(){this._shownSubmenus&&this._shownSubmenus.forEach(e=>{const t=e.closest(".dx-menu-item");this._setSubMenuHeight(e,t,!0),this._scrollToElement(t);const n=this._getSubmenuPosition(t);Un.setup(e,n)})}_getSubmenuBorderWidth(){return On(un())?0:1}_showSubmenu(e){const t=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),!this._hasSubmenu(t))return;let n=e.children(".dx-submenu");const s=n.length;super._showSubmenu(e),s||(this._renderSubmenuItems(t,e),n=e.children(".dx-submenu")),this._setSubMenuHeight(n,e,!0),this._isSubmenuVisible(n)||this._drawSubmenu(e)}_hideSubmenusOnSameLevel(e){const t=e.parent(".dx-menu-item-wrapper").siblings().find(".dx-menu-item-expanded");t.length&&(t.removeClass("dx-menu-item-expanded"),this._hideSubmenu(t.find(".dx-submenu")))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return e.css("visibility")==="visible"}_drawSubmenu(e){const t=this.option("animation")?this.option("animation").show:{},n=e.children(".dx-submenu"),s=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&(U(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(n)||this._shownSubmenus.push(n),t&&li.stop(n),Un.setup(n,s),t&&(ht(t.to)&&(t.to.position=s),this._animate(n,t)),n.css("visibility","visible"))}_animate(e,t){li.animate(e,t)}_getSubmenuPosition(e){const t=this.option("submenuDirection").toLowerCase(),s={collision:"flip",of:e.parent(".dx-menu-item-wrapper"),offset:{h:0,v:-1}};switch(t){case"left":s.at="left top",s.my="right top";break;case"right":s.at="right top",s.my="left top";break;default:this.option("rtlEnabled")?(s.at="left top",s.my="right top"):(s.at="right top",s.my="left top")}return s}_updateSubmenuVisibilityOnClick(e){if(!e.args.length)return;const{itemData:t}=e.args[0],n=this._dataAdapter.getNodeByItem(t);if(!n)return;const s=R(e.args[0].itemElement);let o=s.find(".dx-submenu");if(this._hasSubmenu(n)&&!o.length&&(this._renderSubmenuItems(n,s),o=s.find(".dx-submenu")),s.context===o.context&&o.css("visibility")==="visible")return;this._updateSelectedItemOnClick(e);const a=t&&t.closeMenuOnClick===!1;if(!(!t||t.disabled||a))if(o.length===0){const l=R(s.parents(".dx-submenu")[0]);this._hideSubmenu(l),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(o)&&this._hideSubmenu(o),this._showSubmenu(s)}_hideSubmenu(e){const t=Y([],this._shownSubmenus);ie(t,(n,s)=>{(e.is(s)||ms(e[0],s[0]))&&(s.parent().removeClass("dx-menu-item-expanded"),this._hideSubmenuCore(s))})}_hideSubmenuCore(e){const t=this._shownSubmenus.indexOf(e),n=this.option("animation")?this.option("animation").hide:null;t>=0&&this._shownSubmenus.splice(t,1),this._stopAnimate(e),n&&this._animate(e,n),e.css("visibility","hidden"),e.dxScrollable("instance").scrollTo(0),this.option("focusedElement",null)}_stopAnimate(e){li.stop(e,!0)}_hideAllShownSubmenus(){const e=Y([],this._shownSubmenus);this._overlay.$content().find(".dx-menu-item-expanded").removeClass("dx-menu-item-expanded"),ie(e,(n,s)=>{this._hideSubmenu(s)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(Qb.includes(e.name)){this._initActions();return}switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){const t={jQEvent:e};let n=ae().reject().promise();if(this._actions.onShowing(t),t.cancel)return n;const s=this._positionContextMenu(e);if(s){var o;this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes()));const r=R(this._overlay.content()).children(".dx-submenu");this._setOptionWithoutOptionChange("visible",!0),this._overlay.option({height:()=>this._getMaxHeight(s.of),maxHeight:()=>{const a=r.find(".dx-menu-items-container"),l=this._getSubmenuBorderWidth();return rt(a)+2*l},position:s}),r.length&&this._setSubMenuHeight(r,s.of,!1),n=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(e==null||(o=e.originalEvent)===null||o===void 0?void 0:o.type)===Ao.name&&this.preventShowingDefaultContextMenuAboveOverlay()}return n}_renderItems(e,t){super._renderItems(e,t);const n=R(this._overlay.content()).children(".dx-submenu");n.length&&this._initScrollable(n)}_setAriaAttributes(){this._overlayContentId=`dx-${new hi}`,this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||R(_e.getDocument())}_getContextMenuPosition(){return Y({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){let t=this._getContextMenuPosition();const n=this._isInitialOptionValue("position"),s=this._createActionByOption("onPositioning");e&&e.preventDefault&&n&&(t.of=e);const o={position:t,event:e};return s(o),o.cancel?t=null:o.event&&(o.event.cancel=!0,e.preventDefault()),t}_refresh(){if(!qe())super._refresh();else if(this._overlay){const e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh()}_hide(){let e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||ae().reject().promise()}toggle(e){const t=this.option("visible");return e=e===void 0?!t:e,this._renderVisibility(e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}wt("dxContextMenu",ig);const YF="dx-context-menu",XF={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},ZF=["columnHeadersView","rowsView","footerView","headerPanel"];class JF extends Yt.ViewController{init(){this.createAction("onContextMenuPreparing")}getContextMenuItems(e){if(!e)return!1;const t=this,n=R(e.target);let s,o,r,a;return ie(ZF,function(){const l=t.getView(this);if(s=l&&l.element(),s&&(s.is(n)||s.find(n).length)){var d;r=n.closest(".dx-row > td, .dx-row > tr"),o=r.parent();const c=l.getRowIndex(o),h=r[0]&&r[0].cellIndex,u=o.data("options"),p={event:e,targetElement:ze(n),target:XF[this],rowIndex:c,row:l._getRows()[c],columnIndex:h,column:u==null||(d=u.cells)===null||d===void 0||(d=d[h])===null||d===void 0?void 0:d.column};if(p.items=l.getContextMenuItems&&l.getContextMenuItems(p),t.executeAction("onContextMenuPreparing",p),t._contextMenuPrepared(p),a=p.items,a)return!1}}),a}_contextMenuPrepared(e){}}class QF extends Yt.View{init(){super.init(),this._contextMenuController=this.getController("contextMenu")}_renderCore(){const e=this.element().addClass(YF);this.setAria("role","presentation",e),this._createComponent(e,ig,{onPositioning:t=>{const{event:n}=t,s=t.component,o=this._contextMenuController.getContextMenuItems(n);o?(s.option("items",o),n.stopPropagation()):t.cancel=!0},onItemClick(t){var n,s;(n=t.itemData)===null||n===void 0||(s=n.onItemClick)===null||s===void 0||s.call(n,t)},cssClass:this.getWidgetContainerClass(),target:this.component.$element()})}}const e5={defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:JF},views:{contextMenuView:QF}};He.registerModule("contextMenu",e5);class t5 extends Yt.ViewController{init(){this._resizingController=this.getController("resizing"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")}_createErrorRow(e,t){let n,s;const o=this._renderErrorMessage(e);return t?(n=R("<tr>").attr("role","row").addClass("dx-error-row"),s=R("<div>").addClass("dx-closebutton").addClass(this.addWidgetPrefix("action")),q.on(s,kt,this.createAction(r=>{var a,l;const d=r.event;let c;const h=R(d.currentTarget).closest(".dx-error-row").index();d.stopPropagation(),ie(t,(u,p)=>{c=R(p).children("tbody").children("tr").eq(h),this.removeErrorRow(c)}),(a=this._resizingController)===null||a===void 0||(l=a.fireContentReadyAction)===null||l===void 0||l.call(a)})),R("<td>").attr({colSpan:this._columnsController.getVisibleColumns().length,role:"gridcell"}).prepend(s).append(o).appendTo(n),n):o}_renderErrorMessage(e){const t=e.url?e.message.replace(e.url,""):e.message||e,n=R("<div>").attr("role","alert").attr("aria-roledescription",re.format("dxDataGrid-ariaError")).addClass("dx-error-message").text(t);return e.url&&R("<a>").attr("href",e.url).text(e.url).appendTo(n),n}renderErrorRow(e,t,n){var s,o;const r=this;let a,l;if(n)return n.find(".dx-error-message").remove(),a=r._createErrorRow(e),n.prepend(a),a;const d=t>=0||!r._columnHeadersView.isVisible()?r._rowsView:r._columnHeadersView,c=d.getTableElements();return ie(c,(h,u)=>{if(a=r._createErrorRow(e,c),l=l||a,t>=0){const p=d._getRowElements(R(u)).eq(t);r.removeErrorRow(p.next()),a.insertAfter(p)}else{const p=R(u).children("tbody"),f=p.children("tr");r._columnHeadersView.isVisible()?(r.removeErrorRow(f.last()),R(u).append(a)):(r.removeErrorRow(f.first()),p.first().prepend(a))}}),(s=this._resizingController)===null||s===void 0||(o=s.fireContentReadyAction)===null||o===void 0||o.call(s),l}removeErrorRow(e){if(!e){const t=this._columnHeadersView&&this._columnHeadersView.element();if(e=t&&t.find(".dx-error-row"),!e||!e.length){const n=this._rowsView.element();e=n&&n.find(".dx-error-row")}}e&&e.hasClass("dx-error-row")&&e.remove()}optionChanged(e){e.name==="errorRowEnabled"?e.handled=!0:super.optionChanged(e)}}const i5=i=>class extends i{init(){super.init(),this.dataErrorOccurred.add((e,t)=>{this.option("errorRowEnabled")&&this._errorHandlingController.renderErrorRow(e,void 0,t)}),this.changed.add(e=>{if(!(e&&e.changeType==="loadError")&&this._editingController&&!this._editingController.hasChanges()){var t,n;(t=this._errorHandlingController)===null||t===void 0||(n=t.removeErrorRow)===null||n===void 0||n.call(t)}})}},n5={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:t5},extenders:{controllers:{data:i5}}};He.registerModule("errorHandling",n5);const s5={container:"dx-gridbase-a11y-status-container"},o5=i=>{let{statusText:e}=i;return R("<div>").text(e??"").addClass(s5.container).attr("role","status")},ng=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],r5={a11yStatusContainer:"e2e-a11y-general-status-container"},Ba=function(i){return Ke(i)&&i.endsWith("%")},a5=function(i){return Ke(i)&&i.endsWith("px")},PS=function(i,e){const t=i._rowsView.contentWidth(),n=i._getTotalWidth(e,t);return t-n},l5=function(i,e,t,n){return PS(i,n.map((s,o)=>o===e?t:s))},d5=function(i,e){zD(i,!0),Ce.setSelectionRange(i,e)};class c5 extends Yt.ViewController{init(){this._prevContentMinHeight=null,this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editorFactoryController=this.getController("editorFactory"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView"),this._gridView=this.getView("gridView")}_initPostRenderHandlers(){this._refreshSizesHandler||(this._refreshSizesHandler=e=>{let t=new ae().resolve(null);const n=e==null?void 0:e.changeType,s=e==null?void 0:e.isDelayed,o=n&&n!=="updateSelection"&&n!=="updateFocusedRow"&&n!=="pageIndex"&&!s;this._dataController.changed.remove(this._refreshSizesHandler),this._checkSize()&&(t=this._refreshSizes(e)),o&&De(t).done(()=>{this._setAriaLabel(),this.fireContentReadyAction()})},this._dataController.changed.add(()=>{this._dataController.changed.add(this._refreshSizesHandler)}))}_refreshSizes(e){let t=new ae().resolve(null);const n=e==null?void 0:e.changeType,s=e==null?void 0:e.isDelayed,o=this._dataController.items();if(!e||n==="refresh"||n==="prepend"||n==="append")s||(t=this.resize());else if(n==="update"){var r;if(((r=e.changeTypes)===null||r===void 0?void 0:r.length)===0)return t;(o.length>1||e.changeTypes[0]!=="insert")&&!(o.length===0&&e.changeTypes[0]==="remove")&&!e.needUpdateDimensions?(t=new ae,this._waitAsyncTemplates().done(()=>{rn(()=>Di(()=>rn(()=>{this._setScrollerSpacing(),this._rowsView.resize(),t.resolve()})))}).fail(t.reject)):t=this.resize()}return t}fireContentReadyAction(){this.component._fireContentReadyAction()}_getWidgetAriaLabel(){return"dxDataGrid-ariaDataGrid"}_setAriaLabel(){var e;const t=((e=this._columnsController)===null||e===void 0||(e=e._columns)===null||e===void 0?void 0:e.filter(a=>{let{visible:l}=a;return!!l}).length)??0,n=Math.max(0,this._dataController.totalItemsCount()),s=this._getWidgetAriaLabel(),o=re.format(s,n,t),r=this.component.$element().children(".dx-gridbase-container");this.component.setAria("label",o,r),this._gridView.setWidgetA11yStatusText(o)}_getBestFitWidths(){var e;const t=this._rowsView,n=this._columnHeadersView;let s=t.getColumnWidths();if(!((e=s)!==null&&e!==void 0&&e.length)){var o;const r=n.getTableElement();n.setTableElement((o=t.getTableElement())===null||o===void 0?void 0:o.children(".dx-header")),s=n.getColumnWidths(),n.setTableElement(r)}return s}_setVisibleWidths(e,t){const n=this._columnsController;n.beginUpdate(),ie(e,(s,o)=>{const r=n.getColumnId(o);n.columnOption(r,"visibleWidth",t[s])}),n.endUpdate()}_toggleBestFitModeForView(e,t,n){if(!e||!e.isVisible())return;const s=this._rowsView.getTableElements(),o=e.getTableElements();ie(s,(r,a)=>{let l;const d=R(a),c=o.eq(r);c&&c.length&&(n?l=c.children("tbody").appendTo(d):l=d.children(`.${t}`).appendTo(c),l.toggleClass(t,n),l.toggleClass(this.addWidgetPrefix("best-fit"),n))})}_toggleBestFitMode(e){const t=this._rowsView.getTableElement(),n=this._rowsView.getTableElements().eq(1);t&&(t.css("tableLayout",e?"auto":"fixed"),t.children("colgroup").css("display",e?"none":""),ie(n.find("tr.dx-group-row"),(s,o)=>{R(o).css("display",e?"none":"")}),n.toggleClass(this.addWidgetPrefix("table-fixed"),!e),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",e),this._toggleBestFitModeForView(this._footerView,"dx-footer",e),this._needStretch()&&(t.get(0).style.width=e?"auto":""))}_toggleContentMinHeight(e){const t=this._rowsView.getScrollable(),n=this._rowsView._findContentElement();(t==null?void 0:t.option("useNative"))===!1&&(e===!0&&(this._prevContentMinHeight=n.get(0).style.minHeight),U(this._prevContentMinHeight)&&n.css({minHeight:e?Ce.getContentHeightLimit(Zt):this._prevContentMinHeight}))}_synchronizeColumns(){const e=this._columnsController,t=e.getVisibleColumns(),n=this.option("columnAutoWidth"),s=this.option("wordWrapEnabled"),o=t.some(f=>!U(f.width));let r=this._needBestFit(),a=!1,l,d=!1,c=[],h,u;!r&&ie(t,(f,g)=>{if(g.width==="auto")return r=!0,!1}),ie(t,(f,g)=>{if(g.minWidth)return a=!0,!1}),this._setVisibleWidths(t,[]);const p=this.component.$element();r&&(h=_e.getActiveElement(p.get(0)),u=Ce.getSelectionRange(h),this._toggleBestFitMode(!0),l=!0),this._toggleContentMinHeight(s),p&&p.get(0)&&this._maxWidth&&(delete this._maxWidth,p[0].style.maxWidth=""),rn(()=>{r?(c=this._getBestFitWidths(),ie(t,(f,g)=>{const m=e.getColumnId(g);e.columnOption(m,"bestFitWidth",c[f],!0)})):a&&(c=this._getBestFitWidths()),ie(t,function(f){const{width:g}=this;g!=="auto"&&(U(g)?c[f]=Wt(g)||a5(g)?parseFloat(g):g:n||(c[f]=void 0))}),l&&(this._toggleBestFitMode(!1),l=!1,h&&h!==_e.getActiveElement()&&(yi(h).bottom<0||d5(h,u))),d=this._correctColumnWidths(c,t),n&&(function(){let f;ie(t,(g,m)=>{m.type==="groupExpand"&&(f=c[g])}),ie(t,(g,m)=>{m.type==="groupExpand"&&f&&(c[g]=f)})}(),this._needStretch()&&this._processStretch(c,t)),Di(()=>{(r||d||o)&&this._setVisibleWidths(t,c),s&&this._toggleContentMinHeight(!1)})})}_needBestFit(){return this.option("columnAutoWidth")}_needStretch(){return this._columnsController.getVisibleColumns().some(e=>e.width==="auto"&&!e.command)}_getAverageColumnsWidth(e){const t=PS(this,e),n=e.filter(s=>s===void 0).length;return t/n}_correctColumnWidths(e,t){const n=this;let s,o=!1,r=!1,a=!1;const l=n.component.$element(),d=n._hasWidth;for(s=0;s<t.length;s++){const c=s,h=t[c],u=e[c]==="adaptiveHidden";let p=e[c];const{minWidth:f}=h;f&&(p===void 0?p=n._getAverageColumnsWidth(e):Ba(p)&&l5(n,c,f,e)<0&&(p=-1));const g=n._getRealColumnWidth(c,e.map((m,b)=>c===b?p:m));f&&!u&&g<f&&(e[c]=f,a=!0,s=-1),U(h.width)||(r=!0),Ba(h.width)&&(o=!0)}if(!r&&e.length){const c=n._rowsView.element(),h=n._rowsView.contentWidth(),u=n._rowsView.getScrollbarWidth(),p=n._getTotalWidth(e,h);if(p<h){const f=Ce.getLastResizableColumnIndex(t,e);if(f>=0&&(e[f]="auto",a=!0,d===!1&&!o)){const g=n.option("showBorders")?Math.ceil(St(c)-Ap(c)):0;n._maxWidth=p+u+g,l.css("maxWidth",n._maxWidth)}}}return a}_processStretch(e,t){const n=this._rowsView.contentWidth(),s=this._getTotalWidth(e,n),o={length:0};if(!e.length)return;ie(t,function(d){(this.width||e[d]==="adaptiveHidden")&&(o[d]=!0,o.length++)});const r=n-s,a=Math.floor(r/(e.length-o.length));let l=r-a*(e.length-o.length);if(r>=0)for(let d=0;d<e.length;d++)o[d]||(e[d]+=a,l>0&&(l<1?(e[d]+=l,l=0):(e[d]++,l--)))}_getRealColumnWidth(e,t,n){let s=1;const o=t[e];if(!Ba(o))return parseFloat(o);const r=t.reduce((c,h,u)=>Ba(h)?c+parseFloat(h):c,0),a=t.reduce((c,h)=>!h||h==="adaptiveHidden"||Ba(h)?c:c+parseFloat(h),0);n=n||this._rowsView.contentWidth();const l=n-a,d=r*n/100;return a>0&&d+a>=n&&(s=d>l?l/d:1),parseFloat(o)*n*s/100}_getTotalWidth(e,t){let n=0;for(let s=0;s<e.length;s++){const o=e[s];o&&o!=="adaptiveHidden"&&(n+=this._getRealColumnWidth(s,e,t))}return Math.ceil(n)}_getGroupElement(){return this.component.$element().children().get(0)}updateSize(e){const t=this,n=R(e),s=t.addWidgetPrefix("important-margin");if(t._hasHeight===void 0&&n&&n.is(":visible")&&Ge(n)){const o=n.children(`.${t.getWidgetContainerClass()}`);o.length&&o.detach(),t._hasHeight=!!st(n);const r=Ge(n);n.addClass(s),t._hasWidth=Ge(n)===r,n.removeClass(s),o.length&&o.appendTo(n)}}publicMethods(){return["resize","updateDimensions"]}_waitAsyncTemplates(){var e,t,n;return De((e=this._columnHeadersView)===null||e===void 0?void 0:e.waitAsyncTemplates(!0),(t=this._rowsView)===null||t===void 0?void 0:t.waitAsyncTemplates(!0),(n=this._footerView)===null||n===void 0?void 0:n.waitAsyncTemplates(!0))}resize(){if(this.component._requireResize)return new ae().resolve();const e=new ae;return this._waitAsyncTemplates().done(()=>{De(this.updateDimensions()).done(e.resolve).fail(e.reject)}).fail(e.reject),e.promise()}updateDimensions(e){const t=this;if(t._initPostRenderHandlers(),!t._checkSize(e))return;const n=t._resizeDeferred,s=t._resizeDeferred=new ae;return De(n).always(()=>{Di(()=>{t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),rn(()=>{Di(()=>{rn(()=>{t._updateDimensionsCore()})})})}).done(s.resolve).fail(s.reject)}),s.promise()}_resetGroupElementHeight(){const e=this._getGroupElement(),t=this._rowsView.getScrollable();e&&e.style.height&&(!t||!t.scrollTop())&&(e.style.height="")}_checkSize(e){const t=this.component.$element(),n=t.is(":visible"),s=this._lastWidth!==Ge(t)||this._lastHeight!==st(t)||this._devicePixelRatio!==Je().devicePixelRatio;return n&&(!e||s)}_setScrollerSpacingCore(){const e=this,t=e._rowsView.getScrollbarWidth(),n=e._rowsView.getScrollbarWidth(!0);Di(()=>{e._columnHeadersView&&e._columnHeadersView.setScrollerSpacing(t),e._footerView&&e._footerView.setScrollerSpacing(t),e._rowsView.setScrollerSpacing(t,n)})}_setScrollerSpacing(){const e=this._rowsView.getScrollable(),t=this.option("scrolling.useNative")===!0;!e||t?Di(()=>{rn(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()}_setAriaOwns(){var e,t,n;const s=(e=this._columnHeadersView)===null||e===void 0?void 0:e.getTableElement(),o=(t=this._footerView)===null||t===void 0?void 0:t.getTableElement();(n=this._rowsView)===null||n===void 0||n.setAriaOwns(s==null?void 0:s.attr("id"),o==null?void 0:o.attr("id"))}_updateDimensionsCore(){const e=this,t=e._dataController,n=e._rowsView,s=e.component.$element(),o=this._getGroupElement(),r=st(s),a=e.option("height")??s.get(0).style.height,l=!!a&&a!=="auto",d=parseInt(s.css("maxHeight")),c=d&&r>=d,h=o&&o.scrollHeight===o.offsetHeight;e.updateSize(s),Di(()=>{const u=e._hasHeight||!!d||l;if(n.hasHeight(u),this._setAriaOwns(),c&&!h&&R(o).css("height",d),!t.isLoaded()){n.setLoading(t.isLoading());return}rn(()=>{e._updateLastSizes(s),e._setScrollerSpacing(),ie(ng,(p,f)=>{const g=e.getView(f);g&&g.resize()}),this._editorFactoryController&&this._editorFactoryController.resize()})})}_updateLastSizes(e){this._lastWidth=Ge(e),this._lastHeight=st(e),this._devicePixelRatio=Je().devicePixelRatio}optionChanged(e){switch(e.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":e.handled=!0;return;default:super.optionChanged(e)}}}class u5 extends Yt.ViewController{_scrollChangedHandler(e,t,n){for(let s=0;s<e.length;s++)e[s]&&e[s].name!==n&&e[s].scrollTo({left:t.left,top:t.top})}init(){const e=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")];for(let t=0;t<e.length;t++){const n=e[t];n&&n.scrollChanged.add(this._scrollChangedHandler.bind(this,e))}}}class h5 extends Yt.View{init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")}_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())}getView(e){return this.component._views[e]}element(){return this._groupElement}optionChanged(e){const t=this;U(t._groupElement)&&e.name==="showBorders"?(t._groupElement.toggleClass(t.addWidgetPrefix("borders"),!!e.value),e.handled=!0):super.optionChanged(e)}_renderViews(e){const t=this;ie(ng,(n,s)=>{const o=t.getView(s);o&&o.render(e)})}_getTableRoleName(){return"group"}render(e){const t=!this._groupElement,n=this._groupElement||R("<div>").addClass(this.getWidgetContainerClass());n.addClass("dx-gridbase-container"),n.toggleClass(this.addWidgetPrefix("borders"),!!this.option("showBorders")),this.setAria("role","presentation",e),this.component.setAria("role",this._getTableRoleName(),n),this._rootElement=e||this._rootElement,t&&(this._groupElement=n,qe()&&this._resizingController.updateSize(e),n.appendTo(e)),this._a11yGeneralStatusElement||(this._a11yGeneralStatusElement=o5({}),this._a11yGeneralStatusElement.attr(r5.a11yStatusContainer,"true"),n.append(this._a11yGeneralStatusElement)),this._renderViews(n)}update(){const e=this,t=e._rootElement,n=e._groupElement;t&&n&&(this._resizingController.resize(),e._dataController.isLoaded()&&e._resizingController.fireContentReadyAction())}setWidgetA11yStatusText(e){var t;(t=this._a11yGeneralStatusElement)===null||t===void 0||t.text(e)}}const p5={defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:c5,synchronizeScrolling:u5},views:{gridView:h5},VIEW_NAMES:ng};He.registerModule("gridView",p5);const f5=Dr.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(i){const e=ae(),t=ae();this._deferredItems[i.index]=t;const n=this.callBase.call(this,i);return t.done(()=>{e.resolve(n)}),e.promise()},_onItemTemplateRendered(i,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:ue,_renderItemsAsync(){const i=ae();return De.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),i.resolve()}),i.promise()},_clean(){this.callBase(),this._deferredItems=[]}}),m5=f5,BS="dx-toolbar",g5="dxToolbarItemDataKey";class FS extends m5{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>e!=="disabled")}_initTemplates(){super._initTemplates();const e=new Ir((t,n,s)=>{if(ht(n)){const{text:o,html:r,widget:a}=n;o&&t.text(o).wrapInner("<div>"),r&&t.html(r),a==="dxDropDownButton"&&(n.options=n.options??{},U(n.options.stylingMode)||(n.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),a==="dxButton"&&(this.option("useFlatButtons")&&(n.options=n.options??{},n.options.stylingMode=n.options.stylingMode??"text"),this.option("useDefaultButtons")&&(n.options=n.options??{},n.options.type=n.options.type??"default"))}else t.text(String(n));this._getTemplate("dx-polymorph-widget").render({container:t,model:s,parent:this})},["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return ve({},super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>On(),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return g5}_dimensionChanged(e){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(BS),this._$toolbarItemsContainer=R("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const e=this._$toolbarItemsContainer;ie(["before","center","after"],(t,n)=>{const s=`dx-toolbar-${n}`;e.find(`.${s}`).length||(this[`_$${n}Section`]=R("<div>").addClass(s).attr("role","presentation").appendTo(e))})}_arrangeItems(e){var t,n;const s=e??Ge(this.$element());this._$centerSection.css({margin:"0 auto",float:"none"});const o=yi((t=this._$beforeSection)===null||t===void 0?void 0:t.get(0)),r=yi((n=this._$afterSection)===null||n===void 0?void 0:n.get(0));this._alignCenterSection(o,r,s);const a=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),l=a.parent();if(!a.length)return;const d=o.width?o.width:a.position().left,c=l.hasClass("dx-toolbar-before")?0:d,h=l.hasClass("dx-toolbar-after")?0:r.width;let u=0;l.children().not(".dx-toolbar-label").each((g,m)=>{u+=St(m)});const p=s-u,f=Math.max(p-c-h,0);if(l.hasClass("dx-toolbar-before"))this._alignSection(this._$beforeSection,f);else{const g=St(a)-Ge(a);a.css("maxWidth",f-g)}}_alignCenterSection(e,t,n){var s;this._alignSection(this._$centerSection,n-e.width-t.width);const o=this.option("rtlEnabled"),r=o?t:e,a=o?e:t,l=yi((s=this._$centerSection)===null||s===void 0?void 0:s.get(0));(r.right>l.left||l.right>a.left)&&this._$centerSection.css({marginLeft:r.width,marginRight:a.width,float:r.width>a.width?"none":"right"})}_alignSection(e,t){let s=e.find(".dx-toolbar-label").toArray();t-=this._getCurrentLabelsPaddings(s);const o=this._getCurrentLabelsWidth(s),r=Math.abs(o-t);t<o?(s=s.reverse(),this._alignSectionLabels(s,r,!1)):this._alignSectionLabels(s,r,!0)}_alignSectionLabels(e,t,n){const s=function(o){return yi(o).width};for(let o=0;o<e.length;o++){const r=R(e[o]),a=Math.ceil(s(e[o]));let l;n&&r.css("maxWidth","inherit");const d=Math.ceil(n?s(e[o]):a);if(d<t)l=n?d:0,t-=d;else{l=n?a+t:a-t,r.css("maxWidth",l);break}r.css("maxWidth",l)}}_applyCompactMode(){const e=R(this.element());e.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>Ge(e)&&e.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(e){let t=0;return e.forEach(n=>{t+=St(n)}),t}_getCurrentLabelsPaddings(e){let t=0;return e.forEach(n=>{t+=St(n)-Ge(n)}),t}_renderItem(e,t,n,s){const o=t.location??"center",r=n??this[`_$${o}Section`],a=!!(t.text??t.html),l=super._renderItem(e,t,r,s);return l.toggleClass("dx-toolbar-button",!a).toggleClass("dx-toolbar-label",a).addClass(t.cssClass),l}_renderGroupedItems(){ie(this.option("items"),(e,t)=>{const n=t.items,s=R("<div>").addClass("dx-toolbar-group"),o=t.location??"center";!n||!n.length||(ie(n,(r,a)=>{this._renderItem(r,a,s,null)}),this._$toolbarItemsContainer.find(`.dx-toolbar-${o}`).append(s))})}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){return this.option("items")??[]}_renderContentImpl(){const e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",e.length===0),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return Ge(this.$element())>0&&st(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,t,n,s){super._itemOptionChanged(e,t,n,s),this._arrangeItems()}_optionChanged(e){const{name:t}=e;switch(t){case"width":super._optionChanged(e),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(e)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if(tn()){const e=()=>new Promise(n=>{const s=()=>{let r=!0;return this.$element().parents().each((a,l)=>{if(li.isAnimating(R(l)))return r=!1,!1}),r&&n(),r},o=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>s()||o(),15)};o()}),t=()=>{const n=this.$element().find(".dx-toolbar-label"),s=[];return n.each((o,r)=>{const a=R(r).text(),l=R(r).css("fontWeight");s.push(MR(a,l))}),Promise.all(s)};Promise.all([e(),t()]).then(()=>{this._dimensionChanged()})}}}wt("dxToolbarBase",FS);const _5=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"],b5=function(i){const e=i.data&&i.data(),t=e&&e.dxComponents,n=t&&t[0];return n&&e[n]};function Zc(i,e){var t;if(!i)return;const n=i._findItemElementByItem(e);if(!n.length)return;const s=i._getItemData(n),o=!!((t=s.options)!==null&&t!==void 0&&t.disabled||s.disabled||i.option("disabled")),{widget:r}=s;if(r&&_5.includes(r)){const d=n.find(r.toLowerCase().replace("dx",".dx-"));if(d.length){var a,l;const c=b5(d);if(!c)return;let h=(a=c._focusTarget)===null||a===void 0?void 0:a.call(c);r==="dxDropDownButton"?h=h&&h.find(".dx-buttongroup"):h=h??R(c.element());const u=(l=s.options)===null||l===void 0?void 0:l.tabIndex;o?h.attr("tabIndex",-1):h.attr("tabIndex",u??0)}}}class v5{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){return this._toolbar.option("items")??[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar._itemElements(),!0)}_arrangeItems(){const e=this._toolbar._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0);if(!e.length)return;const t=Ge(this._toolbar.$element()),n=St(e)-Ge(e);e.css("maxWidth",t-n)}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}const Nu="dxResizable",y5=be(xl,Nu),C5=be(ma,Nu),x5=be(wl,Nu),w5={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},VS=Ss.inherit({_getDefaultOptions(){return Y(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup(){this.callBase(),this._renderHandles()},_render(){this.callBase(),this._renderActions()},_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles(){this._handles=[];const i=this.option("handles");if(i==="none"||!i)return;const e=i==="all"?["top","bottom","left","right"]:i.split(" "),t={};ie(e,(n,s)=>{t[s]=!0,this._renderHandle(s)}),t.bottom&&t.right&&this._renderHandle("corner-bottom-right"),t.bottom&&t.left&&this._renderHandle("corner-bottom-left"),t.top&&t.right&&this._renderHandle("corner-top-right"),t.top&&t.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()},_renderHandle(i){const e=R("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${i}`).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers(){if(this.option("disabled"))return;const i={};i[y5]=this._dragStartHandler.bind(this),i[C5]=this._dragHandler.bind(this),i[x5]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{q.on(e,i,{direction:"both",immediate:!0})})},_detachEventHandlers(){this._handles.forEach(i=>{q.off(i)})},_toggleEventHandlers(i){i?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize(){const i=this.$element();return i.css("boxSizing")==="border-box"?{width:St(i),height:rt(i)}:{width:Ge(i),height:st(i)}},_dragStartHandler(i){const e=this.$element();if(e.is(".dx-state-disabled, .dx-state-disabled *")){i.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(i),this._elementLocation=Hn(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(i),this._resizeStartAction({event:i,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),i.targetElements=null},_toggleResizingClass(i){this.$element().toggleClass("dx-resizable-resizing",i)},_renderDragOffsets(i){const e=this._getArea();if(!e)return;const t=R(i.target).closest(".dx-resizable-handle"),n=St(t),s=rt(t),o=t.offset(),r=e.offset,a=this._getAreaScrollOffset();i.maxLeftOffset=this._leftMaxOffset=o.left-r.left-a.scrollX,i.maxRightOffset=this._rightMaxOffset=r.left+e.width-o.left-n+a.scrollX,i.maxTopOffset=this._topMaxOffset=o.top-r.top-a.scrollY,i.maxBottomOffset=this._bottomMaxOffset=r.top+e.height-o.top-s+a.scrollY},_getBorderWidth(i,e){if(gi(i.get(0)))return 0;const t=i.css(w5[e]);return parseInt(t)||0},_proportionate(i,e){const t=this._elementSize,n=i==="x"?t.width/t.height:t.height/t.width;return e*n},_getProportionalDelta(i){let{x:e,y:t}=i;const n=this._proportionate("y",e);if(n>=t)return{x:e,y:n};const s=this._proportionate("x",t);return s>=e?{x:s,y:t}:{x:0,y:0}},_getDirectionName(i){const e=this._movingSides;return i==="x"?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea(i,e){const t=this._getDirectionName(i);return Math.min(e,this[`_${t}MaxOffset`]??1/0)},_fitDeltaProportionally(i){let e=ve({},i);const t=this._elementSize,{minWidth:n,minHeight:s,maxWidth:o,maxHeight:r}=this.option(),a=()=>t.width+e.x,l=()=>t.height+e.y,d=u=>e[u]===this._fitIntoArea(u,e[u]),c=()=>$s(a(),n,o)&&d("x"),h=()=>$s(l(),s,r)&&d("y");if(!c()){const u=this._fitIntoArea("x",Yi(a(),n,o)-t.width);e={x:u,y:this._proportionate("y",u)}}if(!h()){const u=this._fitIntoArea("y",Yi(l(),s,r)-t.height);e={x:this._proportionate("x",u),y:u}}return c()&&h()?e:{x:0,y:0}},_fitDelta(i){let{x:e,y:t}=i;const n=this._elementSize,{minWidth:s,minHeight:o,maxWidth:r,maxHeight:a}=this.option();return{x:Yi(n.width+e,s,r)-n.width,y:Yi(n.height+t,o,a)-n.height}},_getDeltaByOffset(i){const e=this._movingSides,t=this._isCornerHandler(e)&&this.option("keepAspectRatio");let n={x:i.x*(e.left?-1:1),y:i.y*(e.top?-1:1)};if(t){const s=this._getProportionalDelta(n);n=this._fitDeltaProportionally(s)}else{const s=this._fitDelta(n);n=this._roundByStep(s)}return n},_updatePosition(i,e){let{width:t,height:n}=e;const s=this._elementLocation,o=this._movingSides,r=this.$element(),a=this._getElementSize(),l=i.y*(o.top?-1:1)-((a.height||n)-n),d=i.x*(o.left?-1:1)-((a.width||t)-t);Bi(r,{top:s.top+(o.top?l:0),left:s.left+(o.left?d:0)})},_dragHandler(i){const e=this._getOffset(i),t=this._getDeltaByOffset(e),n=this._updateDimensions(t);this._updatePosition(t,n),this._triggerResizeAction(i,n)},_updateDimensions(i){const e=d=>d.substring(d.length-2)==="px",t=this.option("stepPrecision")==="strict",n=this._elementSize,s=n.width+i.x,o=n.height+i.y,r=this.$element().get(0).style,a=i.x||t||e(r.width),l=i.y||t||e(r.height);return a&&this.option({width:s}),l&&this.option({height:o}),{width:a?s:n.width,height:l?o:n.height}},_triggerResizeAction(i,e){let{width:t,height:n}=e;this._resizeAction({event:i,width:this.option("width")||t,height:this.option("height")||n,handles:this._movingSides}),ps(this.$element())},_isCornerHandler:i=>Object.values(i).reduce((e,t)=>e^t,0)===0,_getOffset(i){const{offset:e}=i,t=this._movingSides;return!t.left&&!t.right&&(e.x=0),!t.top&&!t.bottom&&(e.y=0),e},_roundByStep(i){return this.option("stepPrecision")==="strict"?this._roundStrict(i):this._roundNotStrict(i)},_getSteps(){return xC(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict(i){const e=this._getSteps();return{x:i.x-i.x%e.h,y:i.y-i.y%e.v}},_roundStrict(i){const e=this._movingSides,t={x:i.x*(e.left?-1:1),y:i.y*(e.top?-1:1)},n=this._getSteps(),s=this._elementLocation,o=this._elementSize,r=e.left?s.left:s.left+o.width,a=e.top?s.top:s.top+o.height,l=(r+t.x)%n.h,d=(a+t.y)%n.v,c=Math.sign||(b=>(b=+b,b===0||isNaN(b)?b:b>0?1:-1)),h=(b,_)=>(1+.2*c(_))%1*b,u=(b,_)=>Math.abs(b)<.2*_;let p=t.x-l,f=t.y-d;l>h(n.h,t.x)&&(p+=n.h),d>h(n.v,t.y)&&(f+=n.v);const g=(e.left||e.right)&&!u(t.x,n.h)?p:0,m=(e.top||e.bottom)&&!u(t.y,n.v)?f:0;return{x:g*(e.left?-1:1),y:m*(e.top?-1:1)}},_getMovingSides(i){const e=R(i.target),t=e.hasClass("dx-resizable-handle-corner-top-left"),n=e.hasClass("dx-resizable-handle-corner-top-right"),s=e.hasClass("dx-resizable-handle-corner-bottom-left"),o=e.hasClass("dx-resizable-handle-corner-bottom-right");return{top:e.hasClass("dx-resizable-handle-top")||t||n,left:e.hasClass("dx-resizable-handle-left")||t||s,bottom:e.hasClass("dx-resizable-handle-bottom")||s||o,right:e.hasClass("dx-resizable-handle-right")||n||o}},_getArea(){let i=this.option("area");return Ee(i)&&(i=i.call(this)),ht(i)?this._getAreaFromObject(i):this._getAreaFromElement(i)},_getAreaScrollOffset(){const i=this.option("area"),e=!Ee(i)&&!ht(i),t={scrollY:0,scrollX:0};if(e){const n=R(i)[0];gi(n)&&(t.scrollX=n.pageXOffset,t.scrollY=n.pageYOffset)}return t},_getAreaFromObject(i){const e={width:i.right-i.left,height:i.bottom-i.top,offset:{left:i.left,top:i.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement(i){const e=R(i);let t;return e.length&&(t={width:Ap(e),height:Oc(e),offset:Y({top:0,left:0},gi(e[0])?{}:e.offset())},this._correctAreaGeometry(t,e)),t},_correctAreaGeometry(i,e){const t=e?this._getBorderWidth(e,"left"):0,n=e?this._getBorderWidth(e,"top"):0;i.offset.left+=t+this._getBorderWidth(this.$element(),"left"),i.offset.top+=n+this._getBorderWidth(this.$element(),"top"),i.width-=St(this.$element())-Ap(this.$element()),i.height-=rt(this.$element())-Oc(this.$element())},_dragEndHandler(i){const e=this.$element();this._resizeEndAction({event:i,width:St(e),height:rt(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth(i){this.option("width",Yi(i,this.option("minWidth"),this.option("maxWidth")))},_renderHeight(i){this.option("height",Yi(i,this.option("minHeight"),this.option("maxHeight")))},_optionChanged(i){switch(i.name){case"disabled":this._toggleEventHandlers(!i.value),this.callBase(i);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":qe()&&this._renderWidth(St(this.$element()));break;case"minHeight":case"maxHeight":qe()&&this._renderHeight(rt(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(i)}},_clean(){this.$element().find(".dx-resizable-handle").remove()},_useTemplates:()=>!1});wt(Nu,VS);class S5{constructor(e){this.init(e)}init(e){let{dragEnabled:t,handle:n,draggableElement:s,positionController:o}=e;this._positionController=o,this._draggableElement=s,this._handle=n,this._dragEnabled=t,this.unsubscribe(),t&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){const e=this._getEventNames();q.on(this._handle,e.startEventName,t=>{this._dragStartHandler(t)}),q.on(this._handle,e.updateEventName,t=>{this._dragUpdateHandler(t)}),q.on(this._handle,e.endEventName,t=>{this._dragEndHandler(t)})}unsubscribe(){const e=this._getEventNames();q.off(this._handle,e.startEventName),q.off(this._handle,e.updateEventName),q.off(this._handle,e.endEventName)}_getEventNames(){const e=be(xl,"overlayDrag"),t=be(ma,"overlayDrag"),n=be(wl,"overlayDrag");return{startEventName:e,updateEventName:t,endEventName:n}}_dragStartHandler(e){const t=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=t.top,e.maxBottomOffset=t.bottom,e.maxLeftOffset=t.left,e.maxRightOffset=t.right}_dragUpdateHandler(e){const t={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(t),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,t,n){if(!this._dragEnabled)return;n.preventDefault(),n.stopPropagation();const s=this._fitOffsetIntoAllowedRange(e,t);this._moveByOffset(s),this._dragEndHandler(n)}_fitOffsetIntoAllowedRange(e,t){const n=this._getAllowedOffsets();return{top:Yi(e,-n.top,n.bottom),left:Yi(t,-n.left,n.right)}}_getContainerDimensions(){const e=_e.getDocument(),t=this._positionController.$dragResizeContainer.get(0);let n=St(t),s=rt(t);return gi(t)&&(s=Math.max(e.body.clientHeight,s),n=Math.max(e.body.clientWidth,n)),{width:n,height:s}}_getContainerPosition(){const e=this._positionController.$dragResizeContainer.get(0);return gi(e)?{top:0,left:0}:Op(e)}_getElementPosition(){return Op(this._draggableElement)}_getInnerDelta(){const e=this._getContainerDimensions(),t=this._getElementDimensions();return{x:e.width-t.width,y:e.height-t.height}}_getOuterDelta(){const{width:e,height:t}=this._getElementDimensions(),{outsideDragFactor:n}=this._positionController;return{x:e*n,y:t*n}}_getFullDelta(){const e=this._getInnerDelta(),t=this._getOuterDelta();return{x:e.x+t.x,y:e.y+t.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};const n=this._getElementPosition(),s=this._getContainerPosition(),o=this._getOuterDelta();return{top:n.top-s.top+o.y,bottom:-n.top+s.top+e.y,left:n.left-s.left+o.x,right:-n.left+s.left+e.x}}_moveByOffset(e){const t=Hn(this._draggableElement),n={left:t.left+e.left,top:t.top+e.top};Bi(this._draggableElement,n)}}const E5={setOverflow:ue,restoreOverflow:ue},I5=()=>{if(!qe())return E5;const i=Je(),{documentElement:e}=_e.getDocument(),t=_e.getBody(),n=Re.real().platform==="ios",s={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:n?()=>{if(U(s.position)||t.style.position==="fixed")return;const{scrollY:o,scrollX:r}=i;s.position=t.style.position,s.top=t.style.top,s.left=t.style.left,t.style.setProperty("position","fixed"),t.style.setProperty("top",-o+"px"),t.style.setProperty("left",-r+"px")}:()=>{(()=>{const o=i.innerWidth-e.clientWidth;if(s.paddingRight||o<=0)return;const r=i.getComputedStyle(t).getPropertyValue("padding-right"),a=parseInt(r,10);s.paddingRight=a,t.style.setProperty("padding-right",`${a+o}px`)})(),!(s.overflow||t.style.overflow==="hidden")&&(s.overflow=t.style.overflow,s.overflowX=t.style.overflowX,s.overflowY=t.style.overflowY,t.style.setProperty("overflow","hidden"))},restoreOverflow:n?()=>{if(!U(s.position))return;const o=-parseInt(t.style.top,10),r=-parseInt(t.style.left,10);["position","top","left"].forEach(a=>{s[a]?t.style.setProperty(a,s[a]):t.style.removeProperty(a)}),i.scrollTo(r,o),s.position=null}:()=>{U(s.paddingRight)&&(s.paddingRight?t.style.setProperty("padding-right",`${s.paddingRight}px`):t.style.removeProperty("padding-right"),s.paddingRight=null),["overflow","overflowX","overflowY"].forEach(o=>{if(!U(s[o]))return;const r=o.replace(/(X)|(Y)/,a=>`-${a.toLowerCase()}`);s[o]?t.style.setProperty(r,s[o]):t.style.removeProperty(r),s[o]=null})}}},T5=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],Nh=Je();class D5 extends Kw{constructor(e){let{fullScreen:t,forceApplyBindings:n,dragOutsideBoundary:s,dragAndResizeArea:o,outsideDragFactor:r}=e,a=ei(e,T5);super(a),this._props=ve({},this._props,{fullScreen:t,forceApplyBindings:n,dragOutsideBoundary:s,dragAndResizeArea:o,outsideDragFactor:r}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer()}set outsideDragFactor(e){this._props.outsideDragFactor=e}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._props.fullScreen)Bi(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,t;(e=(t=this._props).forceApplyBindings)===null||e===void 0||e.call(t),super.positionContent()}}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?R(Nh):this._props.dragAndResizeArea?R(this._props.dragAndResizeArea):nx().get(0)||this._props.container?this._$markupContainer:R(Nh)}_getVisualContainer(){return this._props.fullScreen?R(Nh):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const A5=Je(),tv=["cancel","clear","done"],k5=Zt.safari&&Ow(Zt.version,[11])<0,lo={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},O5=i=>{const e=Re.current(),{platform:t}=e;let n="bottom",s="before";if(t==="ios")switch(i){case"cancel":n="top";break;case"clear":n="top",s="after";break;case"done":s="after"}else if(t==="android")switch(i){case"cancel":case"done":s="after"}return{toolbar:n,location:s}},io=is.inherit({_supportedKeys(){return Y(this.callBase(),{upArrow:i=>{var e;(e=this._drag)===null||e===void 0||e.moveUp(i)},downArrow:i=>{var e;(e=this._drag)===null||e===void 0||e.moveDown(i)},leftArrow:i=>{var e;(e=this._drag)===null||e===void 0||e.moveLeft(i)},rightArrow:i=>{var e;(e=this._drag)===null||e===void 0||e.moveRight(i)}})},_getDefaultOptions(){return Y(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:i=>Re.real().deviceType==="desktop"&&i.platform==="generic",options:{dragEnabled:!0}},{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>On(),options:{useFlatToolbarButtons:!0}},{device:()=>tn(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init(){const i=this.option("_wrapperClassExternal"),e=i?`dx-popup-wrapper ${i}`:"dx-popup-wrapper";this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner(R("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render(){const i=this.option("fullScreen");this._toggleFullScreenClass(i),this.callBase()},_createBodyOverflowManager(){this._bodyOverflowManager=I5()},_toggleFullScreenClass(i){this.$overlayContent().toggleClass("dx-popup-fullscreen",i).toggleClass("dx-popup-normal",!i)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new or,bottom:new or})},_getActionsList(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler(i){this._shouldSkipContentResize(i)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions(){const i=this.option("animation");return["to","from"].some(e=>{var t;const n=i==null||(t=i.show)===null||t===void 0?void 0:t[e];return We(n)&&("width"in n||"height"in n)})},_updateResizeCallbackSkipCondition(){const i=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>i&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize(i){if(!this.option("useResizeObserver"))return;const e=this._$content.get(0);i?ar.observe(e,t=>{this._contentResizeHandler(t)}):ar.unobserve(e)},_areContentDimensionsRendered(i){var e,t,n;const s=(e=i.contentBoxSize)===null||e===void 0?void 0:e[0];if(s){var o,r;return parseInt(s.inlineSize,10)===((o=this._renderedDimensions)===null||o===void 0?void 0:o.width)&&parseInt(s.blockSize,10)===((r=this._renderedDimensions)===null||r===void 0?void 0:r.height)}const{contentRect:a}=i;return parseInt(a.width,10)===((t=this._renderedDimensions)===null||t===void 0?void 0:t.width)&&parseInt(a.height,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle(){const i=this._getToolbarItems("top"),{title:e,showTitle:t}=this.option();if(t&&e&&i.unshift({location:Re.current().ios?"center":"before",text:e}),t||i.length>0){this._$title&&this._$title.remove();const n=R("<div>").addClass("dx-popup-title").insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",i,n).addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var i;const{title:e,showTitle:t}=this.option(),s=t&&!!e?new hi:null;(i=this._$title)===null||i===void 0||i.find(".dx-toolbar-label").eq(0).attr("id",s),this.$overlayContent().attr("aria-labelledby",s)},_renderTemplateByType(i,e,t,n){const{rtlEnabled:s,useDefaultToolbarButtons:o,useFlatToolbarButtons:r,disabled:a}=this.option(),l=this._getTemplateByOption(i);if(l instanceof or){const h=Y({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),u=Y(n,{items:e,rtlEnabled:s,useDefaultButtons:o,useFlatButtons:r,disabled:a,integrationOptions:h});this._getTemplate("dx-polymorph-widget").render({container:t,model:{widget:this._getToolbarName(),options:u}});const p=t.children("div");return t.replaceWith(p),p}const c=R(l.render({container:ze(t)}));return c.hasClass("dx-template-wrapper")&&(t.replaceWith(c),t=c),t},_getToolbarName:()=>"dxToolbarBase",_renderVisibilityAnimate(i){return this.callBase(i)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction(i){this._getTitleRenderAction()({titleElement:ze(i)})},_getTitleRenderAction(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer(){return(i,e,t)=>{const n=R("<div>").addClass("dx-closebutton");this._createComponent(n,$i,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),R(t).append(n)}},_getToolbarItems(i){const e=this.option("toolbarItems"),t=[];this._toolbarItemClasses=[];const n=Re.current().platform;let s=0;return ie(e,(o,r)=>{const a=U(r.shortcut),l=a?O5(r.shortcut):r;if(a&&n==="ios"&&s<2&&(l.toolbar="top",s++),l.toolbar=r.toolbar||l.toolbar||"top",l&&l.toolbar===i){a&&Y(l,{location:r.location},this._getToolbarItemByAlias(r));const d=n==="generic";r.shortcut==="done"&&d||r.shortcut==="cancel"&&!d?t.unshift(l):t.push(l)}}),i==="top"&&this._hasCloseButton()&&t.push(this._getCloseButton()),t},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:i=>i.toLowerCase()==="done"?"OK":fl(i,!0),_getToolbarButtonStylingMode(i){return nn()?i==="done"?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"},_getToolbarButtonType(i){return nn()&&i==="done"||this.option("useDefaultToolbarButtons")?"default":"normal"},_getToolbarItemByAlias(i){const e=this,t=i.shortcut;if(!tv.includes(t))return!1;const n=Y({text:re.format(this._getLocalizationKey(t)),onClick:this._createToolbarItemAction(i.onClick),integrationOptions:{},type:this._getToolbarButtonType(t),stylingMode:this._getToolbarButtonStylingMode(t)},i.options||{}),s=`dx-popup-${t}`;return this._toolbarItemClasses.push(s),{template(o,r,a){const l=R("<div>").addClass(s).appendTo(a);e._createComponent(l,$i,n)}}},_createToolbarItemAction(i){return this._createAction(i,{afterExecute(e){e.component.hide()}})},_renderBottom(){const i=this._getToolbarItems("bottom");if(i.length){this._$bottom&&this._$bottom.remove();const e=R("<div>").addClass("dx-popup-bottom").insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",i,e,{compactMode:!0}).addClass("dx-popup-bottom"),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState(i){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",!!i)},_toggleClasses(){ie(tv,(e,t)=>{const n=`dx-popup-${t}`;this._toolbarItemClasses.includes(n)?(this.$wrapper().addClass(`${n}-visible`),this._$bottom.addClass(n)):(this.$wrapper().removeClass(`${n}-visible`),this._$bottom.removeClass(n))})},_toggleFocusClass(i,e){if(this.callBase(i,e),i&&!U3(this._zIndex)){const t=Gw(this._zIndexInitValue());hf(this._zIndex),this._zIndex=t,this._$wrapper.css("zIndex",t),this._$content.css("zIndex",t)}},_toggleContentScrollClass(){const i=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",i)},_getPositionControllerConfig(){const{fullScreen:i,forceApplyBindings:e,dragOutsideBoundary:t,dragAndResizeArea:n,outsideDragFactor:s}=this.option();return Y({},this.callBase(),{fullScreen:i,forceApplyBindings:e,dragOutsideBoundary:t,dragAndResizeArea:n,outsideDragFactor:s})},_initPositionController(){this._positionController=new D5(this._getPositionControllerConfig())},_getDragTarget(){return this.topToolbar()},_renderGeometry(i){const{visible:e,useResizeObserver:t}=this.option();if(e&&qe()){const s=this._showAnimationProcessing&&!(i!=null&&i.forceStopAnimation)&&t;this._isAnimationPaused=s||void 0,this._stopAnimation(),i!=null&&i.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(i==null?void 0:i.isDimensionChange),s&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(Ge(this._$content),10),height:parseInt(st(this._$content),10)})},_renderGeometryImpl(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight(){this._getOptionValue("height")==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag(){const i=this._getDragTarget(),e=this.option("dragEnabled");if(!i)return;const t={dragEnabled:e,handle:i.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(t):this._drag=new S5(t),this.$overlayContent().toggleClass("dx-popup-draggable",e)},_renderResize(){this._resizable=this._createComponent(this._$content,VS,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:i=>{this._resizeEndHandler(i),this._observeContentResize(!0)},onResize:i=>{this._setContentHeight(),this._actions.onResize(i)},onResizeStart:i=>{this._observeContentResize(!1),this._actions.onResizeStart(i)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler(i){const e=this._resizable.option("width"),t=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),t&&this._setOptionWithoutOptionChange("height",t),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(i.event),this._actions.onResizeEnd(i)},_setContentHeight(){(this.option("forceApplyBindings")||ue)();const i=this.$overlayContent().get(0),e=this._chooseHeightStrategy(i);this.$content().css(this._getHeightCssStyles(e,i)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:(i,e)=>i===lo.flex?-e:0,_chooseHeightStrategy(i){const e=i.style.width==="auto"||i.style.width==="";let t=lo.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(e||k5?t=lo.inherit:t=lo.flex),t},_getHeightCssStyles(i,e){let t={};const n=this._getOptionValue("maxHeight",e),s=this._getOptionValue("minHeight",e),o=this._splitPopupHeight(),r=o.header+o.footer+o.contentVerticalOffsets+o.popupVerticalOffsets+this._heightStrategyChangeOffset(i,o.popupVerticalPaddings);if(i===lo.static){if(!this._isAutoHeight()||n||s){const l=(this.option("fullScreen")?Math.min(yi(e).height,Je().innerHeight):yi(e).height)-r;t={height:Math.max(0,l),minHeight:"auto",maxHeight:"auto"}}}else{const a=R(this._positionController.$visualContainer).get(0),l=vD(n,-r,a);t={height:"auto",minHeight:yD(s,-r,a),maxHeight:l}}return t},_setHeightClasses(i,e){let t="";for(const n in lo)lo[n]!==e&&(t+=` ${lo[n]}`);i.removeClass(t).addClass(e)},_isAutoHeight(){return this.$overlayContent().get(0).style.height==="auto"},_splitPopupHeight(){const i=this.topToolbar(),e=this.bottomToolbar();return{header:__(i&&i.get(0)),footer:__(e&&e.get(0)),contentVerticalOffsets:Qu(this.$overlayContent().get(0),!0),popupVerticalOffsets:Qu(this.$content().get(0),!0),popupVerticalPaddings:Qu(this.$content().get(0),!1)}},_isAllWindowCovered(){return this.callBase()||this.option("fullScreen")},_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),qe()&&this._renderFullscreenWidthClass()},_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})},_clean(){this.callBase(),this._observeContentResize(!1)},_dispose(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",St(this.$overlayContent())===Ge(A5))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll(i){if(!this._bodyOverflowManager)return;const{setOverflow:e,restoreOverflow:t}=this._bodyOverflowManager;i?t():e()},refreshPosition(){this._renderPosition()},_optionChanged(i){var e;const{value:t,name:n}=i;switch(n){case"disabled":this.callBase(i),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(t);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),ps(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),ps(this.$overlayContent());break;case"container":if(this.callBase(i),this.option("resizeEnabled")){var s;(s=this._resizable)===null||s===void 0||s.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":this.callBase(i),(e=this._resizable)===null||e===void 0||e.option(n,t);break;case"onTitleRendered":this._createTitleRenderAction(t);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":{const o=!i.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),o&&(this._renderGeometry(),ps(this.$overlayContent()));break}case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=t,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=t,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=t;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),ps(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=t,this._toggleFullScreenClass(t),this._toggleSafariScrolling(),this._renderGeometry(),ps(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(i),this._toggleContentScrollClass();break;default:this.callBase(i)}},bottomToolbar(){return this._$bottom},topToolbar(){return this._$title},$content(){return this._$popupContent},content(){return ze(this.$content())},$overlayContent(){return this._$content},getFocusableElements(){return this.$wrapper().find("[tabindex]").filter((i,e)=>e.getAttribute("tabindex")>=0)}});wt("dxPopup",io);const NS="dxswipestart",LS="dxswipe",sg="dxswipeend",R5={defaultItemSizeFunc:function(){return Ge(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(i){return(pi(i).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,i)},isFastSwipe:function(i){const e=pi(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},M5={defaultItemSizeFunc:function(){return st(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(i){return(pi(i).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,i)},isFastSwipe:function(i){const e=pi(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},P5={horizontal:R5,vertical:M5},B5=Jl.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(i){this.callBase(i),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return P5[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(i){this._tickData=pi(i)},_start:function(i){this._savedEventData=pi(i),i=this._fireEvent("dxswipestart",i),i.cancel||(this._maxLeftOffset=i.maxLeftOffset,this._maxRightOffset=i.maxRightOffset,this._maxTopOffset=i.maxTopOffset,this._maxBottomOffset=i.maxBottomOffset)},_move:function(i){const e=this._getStrategy(),t=pi(i);let n=e.calcOffsetRatio.call(this,i);n=this._fitOffset(n,this.elastic),t.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=t),this._fireEvent("dxswipe",i,{offset:n}),i.cancelable!==!1&&i.preventDefault()},_end:function(i){const e=this._getStrategy(),t=e.calcOffsetRatio.call(this,i),n=e.isFastSwipe.call(this,i);let s=t,o=this._calcTargetOffset(t,n);s=this._fitOffset(s,this.elastic),o=this._fitOffset(o,!1),this._fireEvent("dxswipeend",i,{offset:s,targetOffset:o})},_fitOffset:function(i,e){const n=this._getStrategy().getBounds.call(this);return i<-n[0]?e?(-2*n[0]+i)/3:-n[0]:i>n[1]?e?(2*n[1]+i)/3:n[1]:i},_calcTargetOffset:function(i,e){let t;return e?(t=Math.ceil(Math.abs(i)),i<0&&(t=-t)):t=Math.round(i),t}});xa({emitter:B5,events:["dxswipestart","dxswipe","dxswipeend"]});function $S(i){return i?Number(i.replace("px","")):0}function F5(i){var e,t;return i&&qe()?(e=(t=Je()).getComputedStyle)===null||e===void 0?void 0:e.call(t,i):null}function V5(i,e){const t=F5(i);return t?$S(t[`margin${ml(e)}`]):0}const N5="__dx_key__",og=Dr.inherit({_getDefaultOptions(){return Y(this.callBase(),{repaintChangesOnly:!1})},ctor(){var i;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},(i=this._dataController)===null||i===void 0||i.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload(){this._correctionIndex=0},_init(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey(i){let e=R();const t=this.key();return this.itemElements().each((n,s)=>{const o=R(s),r=this._getItemData(o);if(t?Hl(t,this.keyOf(r),i):this._isItemEquals(r,i))return e=o,!1}),e},_dataSourceChangedHandler(i,e){e!=null&&e.changes?this._modifyByChanges(e.changes):(this.callBase(i,e),this._refreshItemsCache())},_isItemEquals(i,e){i&&i.__dx_key__&&(i=i.data);try{return JSON.stringify(i)===JSON.stringify(e)}catch{return i===e}},_isItemStrictEquals(i,e){return this._isItemEquals(i,e)},_shouldAddNewGroup(i,e){let t=!1;return this.option("grouped")&&(i.length||(t=!0),ie(i,(n,s)=>{s.type==="insert"&&(t=!0,ie(e,(o,r)=>{if(s.data.key!==void 0&&s.data.key===r.key)return t=!1,!1}))})),t},_partialRefresh(){if(this.option("repaintChangesOnly")){const i=t=>t&&t.__dx_key__!==void 0?t.__dx_key__:this.keyOf(t),e=u1(this._itemsCache,this._editStrategy.itemsGetter(),i,this._isItemStrictEquals.bind(this));if(e&&this._itemsCache.length&&!this._shouldAddNewGroup(e,this._itemsCache))return this._modifyByChanges(e,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache(){if(this.option("repaintChangesOnly")){const i=this._editStrategy.itemsGetter();try{this._itemsCache=Y(!0,[],i),this.key()||(this._itemsCache=this._itemsCache.map((e,t)=>({[N5]:i[t],data:e})))}catch{this._itemsCache=Y([],i)}}},_dispose(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange(i,e,t,n){if(n)this._renderItem(t.index,t.data,null,this._findItemElementByKey(t.key));else{const s=e[mr(i,e,t.key)];s&&vm(i,e,t.key,t.data).done(()=>{this._renderItem(e.indexOf(s),s,null,this._findItemElementByKey(t.key))})}},_insertByChange(i,e,t,n){De(n||ym(i,e,t.data,t.index)).done(()=>{this._beforeItemElementInserted(t),this._renderItem(t.index??e.length,t.data),this._afterItemElementInserted(),this._correctionIndex++})},_updateSelectionAfterRemoveByChange(i){const e=this.option("selectedIndex");e>i?this.option("selectedIndex",e-1):e===i&&this.option("selectedItems").length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted(i){const e=this.option("selectedIndex");i.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:ue,_removeByChange(i,e,t,n){const s=n?t.index:mr(i,e,t.key);if(n?t.oldItem:e[s]){const r=this._findItemElementByKey(t.key),a=this._extendActionArgs(r);this._waitDeletingPrepare(r).done(()=>{n?(this._updateIndicesAfterIndex(s-1),this._afterItemElementDeleted(r,a),this._updateSelectionAfterRemoveByChange(s)):(this._deleteItemElementByIndex(s),this._afterItemElementDeleted(r,a))}),this._correctionIndex--}},_modifyByChanges(i,e){const t=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},s=this._dataController,o=s.paginate(),r=s.group();(o||r)&&(i=i.filter(a=>a.type!=="insert"||a.index!==void 0)),i.forEach(a=>this[`_${a.type}ByChange`](n,t,a,e)),this._renderedItemsCount=t.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer(i,e,t){const n=i.children(this._itemSelector()).get(t);_e.insertElement(i.get(0),e.get(0),n)},_optionChanged(i){switch(i.name){case"items":{this._partialRefresh(i.value)||this.callBase(i);break}case"dataSource":(!this.option("repaintChangesOnly")||!i.value)&&this.option("items",[]),this.callBase(i);break;case"repaintChangesOnly":break;default:this.callBase(i)}}}),L5=Hm.inherit({_init(i){this.callBase(i),this._$topPocket=i._$topPocket,this._$pullDown=i._$pullDown,this._$refreshingText=i._$refreshingText,this._$scrollViewContent=R(i.content()),this._$container=R(i.container()),this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=Tt(),this.releaseCallbacks=Tt(),this.reachBottomCallbacks=Tt()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const i=R("<div>").addClass("dx-scrollview-pull-down-image"),e=R("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new An(R("<div>")).$element(),n=this._$pullDownText=R("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=R("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=R("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=R("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(i).append(e.append(t)).append(n)},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const i=this,e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];ie(e,(t,n)=>{const s=i._state===n.visibleState?"addClass":"removeClass";n.element[s]("dx-scrollview-pull-down-text-visible")})},update(){this.callBase(),this._setTopPocketOffset()},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const i=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(i.clientHeight-e.clientHeight,0)},_allowedDirections(){const i=this.callBase();return i.vertical=i.vertical||this._pullDownEnabled,i},_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd(){this.callBase(),this._complete()},handleStop(){this.callBase(),this._complete()},_complete(){this._state===1&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(()=>{this._pullDownRefreshing()},400))},_setPullDownOffset(i){Bi(this._$topPocket,{top:i}),Bi(this._$scrollViewContent,{top:i})},handleScroll(i){if(this.callBase(i),this._state===2)return;const e=this.location().top,t=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this._state!==3&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady(){this._state!==1&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())},_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable(i){i&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=i},reachBottomEnable(i){this._reachBottomEnabled=i},pendingRelease(){this._state=1},release(){const i=ae();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._state===3&&(this._state=0),this._releaseTimeout=setTimeout(()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),i.resolve()},400),i.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),$5=Hm.inherit({_init(i){this.callBase(i),this._$topPocket=i._$topPocket,this._$pullDown=i._$pullDown,this._$scrollViewContent=R(i.content()),this._$container=R(i.container()),this._initCallbacks(),this._location=0},_initCallbacks(){this.pullDownCallbacks=Tt(),this.releaseCallbacks=Tt(),this.reachBottomCallbacks=Tt()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const i=R("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new An(R("<div>")).$element();this._$icon=R("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(i.append(e))},_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown(){this._$pullDown.css({opacity:0})},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const i=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(i.clientHeight-e.clientHeight,0)},_allowedDirections(){const i=this.callBase();return i.vertical=i.vertical||this._pullDownEnabled,i},handleInit(i){this.callBase(i),this._state===0&&this._location===0&&(this._startClientY=pi(i.originalEvent).y,this._state=4)},handleMove(i){this.callBase(i),this._deltaY=pi(i.originalEvent).y-this._startClientY,this._state===4&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),this._state===5&&(i.preventDefault(),this._movePullDown())},_movePullDown(){const i=this._getPullDownHeight(),e=Math.min(3*i,this._deltaY+this._getPullDownStartPosition()),t=180*e/i/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<i),Bi(this._$pullDown,{top:e}),this._$icon.css({transform:`rotate(${t}deg)`})},_isPullDown(){return this._pullDownEnabled&&this._state===5&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight(){return Math.round(.05*rt(this._$element))},_getPullDownStartPosition(){return-Math.round(1.5*rt(this._$pullDown))},handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop(){this._complete()},_complete(){(this._state===4||this._state===5)&&this._releaseState()},handleScroll(i){if(this.callBase(i),this._state===2)return;const e=this.location().top,t=this._location-e;this._location=e,t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this.reachBottomCallbacks.fire()},_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())},_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),Bi(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable(i){this._$topPocket.toggle(i),this._pullDownEnabled=i},reachBottomEnable(i){this._reachBottomEnabled=i},pendingRelease(){this._state=1},release(){const i=ae();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),i.resolve()},800),i.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),H5=Math,z5=D1.inherit({ctor(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const i=this,e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];ie(e,(t,n)=>{const s=i._state===n.visibleState?"addClass":"removeClass";n.element[s]("dx-scrollview-pull-down-text-visible")})},_initCallbacks(){this.pullDownCallbacks=Tt(),this.releaseCallbacks=Tt(),this.reachBottomCallbacks=Tt()},_updateBounds(){if(this._direction!=="horizontal"){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const e=this._$container.get(0),t=this._$content.get(0);this._bottomBoundary=Math.max(t.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():this._state!==0&&this._stateReleased()},_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown(){return this._pullDownEnabled&&this._location>=0},_isReachBottom(){const i=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(i.scrollTop))<=1},_scrollComplete(){this._inBounds()&&this._state===1?this._pullDownRefreshing():this._inBounds()&&this._state===3?this._reachBottomLoading():this.callBase()},_reachBottomReady(){this._state!==3&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset(){return-this._topPocketSize},_getMinOffset(){return H5.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading(){this.reachBottomCallbacks.fire()},_pullDownReady(){this._state!==1&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){this._state!==0&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())},_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler(){return this._state===0&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=qf(this._release.bind(this)),this._releaseTask.promise},_release(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler(i){this._reachBottomEnabled!==i&&(this._reachBottomEnabled=i,this._updateBounds())},_pullDownEnablingHandler(i){this._pullDownEnabled!==i&&(this._pullDownEnabled=i,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange(){this._location-=st(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler(){this._state=1},dispose(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),W5=A1.inherit({_init(i){this.callBase(i),this._$pullDown=i._$pullDown,this._$topPocket=i._$topPocket,this._$bottomPocket=i._$bottomPocket,this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=Tt(),this.releaseCallbacks=Tt(),this.reachBottomCallbacks=Tt()},render(){this._renderPullDown(),this.callBase()},_renderPullDown(){const i=R("<div>").addClass("dx-scrollview-pull-down-image"),e=R("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new An(R("<div>")).$element(),n=this._$pullDownText=R("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=R("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=R("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=R("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(i).append(e.append(t)).append(n)},pullDownEnable(i){this._eventHandler("pullDownEnabling",i)},reachBottomEnable(i){this._eventHandler("reachBottomEnabling",i)},_createScroller(i){const e=this,t=e._scrollers[i]=new z5(e._scrollerOptions(i));t.pullDownCallbacks.add(()=>{e.pullDownCallbacks.fire()}),t.releaseCallbacks.add(()=>{e.releaseCallbacks.fire()}),t.reachBottomCallbacks.add(()=>{e.reachBottomCallbacks.fire()})},_scrollerOptions(i){return Y(this.callBase(i),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease(){this._eventHandler("pendingRelease")},release(){return this._eventHandler("release").done(this._updateAction)},location(){const i=this.callBase();return i.top+=st(this._$topPocket),i},dispose(){ie(this._scrollers,function(){this.dispose()}),this.callBase()}}),j5="dx-scrollview-loadpanel",K5={pullDown:L5,swipeDown:$5,simulated:W5},G5=!qe(),U5={finishLoading:ue,release:ue,refresh:ue,scrollOffset:()=>({top:0,left:0}),_optionChanged(i){if(i.name!=="onUpdated")return this.callBase.apply(this,arguments)}},rg=vn.inherit(G5?U5:{_getDefaultOptions(){return Y(this.callBase(),{pullingDownText:re.format("dxScrollView-pullingDownText"),pulledDownText:re.format("dxScrollView-pulledDownText"),refreshingText:re.format("dxScrollView-refreshingText"),reachBottomText:re.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules(){return this.callBase().concat([{device(){return Re.real().platform==="android"},options:{refreshStrategy:"swipeDown"}},{device:()=>On(),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup(){this.callBase(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent(){const i=R("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(i)},_initTopPocket(){const i=this._$topPocket=R("<div>").addClass("dx-scrollview-top-pocket"),e=this._$pullDown=R("<div>").addClass("dx-scrollview-pull-down");i.append(e),this._$content.prepend(i)},_initBottomPocket(){const i=this._$bottomPocket=R("<div>").addClass("dx-scrollview-bottom-pocket"),e=this._$reachBottom=R("<div>").addClass("dx-scrollview-scrollbottom"),t=R("<div>").addClass("dx-scrollview-scrollbottom-indicator"),n=new An(R("<div>")).$element(),s=this._$reachBottomText=R("<div>").addClass("dx-scrollview-scrollbottom-text");this._updateReachBottomText(),e.append(t.append(n)).append(s),i.append(e),this._$content.append(i)},_initLoadPanel(){const i=R("<div>").addClass(j5).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(i,Lm,e)},_updateReachBottomText(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy(){const i=this.option("useNative")?this.option("refreshStrategy"):"simulated",e=K5[i];this._strategy=new e(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on(i){const e=this.callBase.apply(this,arguments);return(i==="pullDown"||i==="reachBottom")&&this._tryRefreshPocketState(),e},_pullDownEnable(i){if(arguments.length===0)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(i),this._strategy.pullDownEnable(i),this._pullDownEnabled=i)},_reachBottomEnable(i){if(arguments.length===0)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(i),this._strategy.reachBottomEnable(i),this._reachBottomEnabled=i)},_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator(i){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=i},_pullDownLoading(){this.startLoading(),this._pullDownAction()},_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading(){this.startLoading(),this._reachBottomAction()},_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged(i){switch(i.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(i)}},content(){return ze(this._$content.children().eq(1))},release(i){return i!==void 0&&this.toggleLoading(!i),this._strategy.release()},toggleLoading(i){this._reachBottomEnable(i)},refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading(){this._loadPanel.hide(),this._unlock()},_dispose(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});wt("dxScrollView",rg);const q5=i=>Array.isArray(i)&&i.every(e=>{const t=Object.keys(e).length===2,n="key"in e&&"items"in e;return t&&n&&Array.isArray(e.items)}),HS={_getSpecificDataSourceOption(){let i=this.option("dataSource"),e=!1,t={};return this._getGroupedOption()&&q5(i)&&(t=i.reduce((n,s)=>{const o=s.items.map(r=>(We(r)||(r={text:r},e=!0),"key"in r||(r.key=s.key),r));return n.concat(o)},[]),i={store:{type:"array",data:t},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(i.searchExpr="text")),i}},Y5=Tr.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge(i){if(this._$element.children(".dx-list-item-badge-container").remove(),!i)return;const e=R("<div>").addClass("dx-list-item-badge-container").append(R("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(i)),t=this._$element.children(".dx-list-item-chevron-container").first();t.length>0?e.insertBefore(t):e.appendTo(this._$element)},_renderShowChevron(i){if(this._$element.children(".dx-list-item-chevron-container").remove(),!i)return;const e=R("<div>").addClass("dx-list-item-chevron-container"),t=R("<div>").addClass("dx-list-item-chevron");e.append(t).appendTo(this._$element)}}),X5=".dx-list-item",Z5=".dx-list-select-all",J5=Nt("items"),ag=og.inherit({_activeStateUnit:[X5,Z5].join(","),_supportedKeys(){const i=this,e=function(n){let s=t(n);s.is(i.option("focusedElement"))&&(function(r,a){let l=r.position().top;a==="prev"&&(l=r.position().top-st(i.$element())+rt(r)),i.scrollTo(l)}(s,n),s=t(n)),i.option("focusedElement",ze(s)),i.scrollToItem(s)};function t(n){const s=i.scrollTop(),o=st(i.$element());let r=R(i.option("focusedElement")),a=!0;if(!r.length)return R();for(;a;){const l=r[n]();if(!l.length)break;const d=l.position().top+rt(l)/2;a=d<o+s&&d>s,a&&(r=l)}return r}return Y(this.callBase(),{leftArrow:ue,rightArrow:ue,pageUp(){return e("prev"),!1},pageDown(){return e("next"),!1}})},_getDefaultOptions(){return Y(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:re.format("dxList-pullingDownText"),pulledDownText:re.format("dxList-pulledDownText"),refreshingText:re.format("dxList-refreshingText"),pageLoadingText:re.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:re.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:i=>i?i.showChevron:void 0,badgeExpr:i=>i?i.badge:void 0})},_defaultOptionsRules(){const i=un();return this.callBase().concat(w1(),[{device:()=>!fr,options:{useNativeScrolling:!1}},{device:e=>!fr&&!Re.isSimulator()&&Re.real().deviceType==="desktop"&&e.platform==="generic",options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>tn(i),options:{useInkRipple:!0}},{device:()=>On(i),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged(i){i&&this._updateLoadingState(!0)},_itemClass:()=>"dx-list-item",_itemDataKey:()=>"dxListItemData",_itemContainer(){return this._$container},_getItemsContainer(){return this._$listContainer},_cleanItemContainer(){this.callBase();const i=this._getItemsContainer();R(i).empty(),i.appendTo(this._$container)},_saveSelectionChangeEvent(i){this._selectionChangeEventInstance=i},_getSelectionChangeEvent(){return this._selectionChangeEventInstance},_refreshItemElements(){this.option("grouped")?this._itemElementsCache=this._getItemsContainer().children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._itemElementsCache=this._getItemsContainer().children(this._itemSelector())},_modifyByChanges(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem(i,e){return this.callBase(i,e).done(function(){this._refreshItemElements()})},deleteItem(i){return this.callBase(i).done(function(){this._refreshItemElements()})},_itemElements(){return this._itemElementsCache},_itemSelectHandler(i){if(!(this.option("selectionMode")==="single"&&this.isItemSelected(i.currentTarget)))return this.callBase(i)},_allowDynamicItemsAppend:()=>!0,_init(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=R("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode(){return this.option("pageLoadMode")==="scrollBottom"},_nextButtonMode(){return this.option("pageLoadMode")==="nextButton"},_dataSourceOptions(){const i=this._scrollBottomMode(),e=this._nextButtonMode();return Y(this.callBase(),{paginate:ci(i||e,!0)})},_getGroupedOption(){return this.option("grouped")},_getGroupContainerByIndex(i){return this._getItemsContainer().find(".dx-list-group").eq(i).find(".dx-list-group-body")},_dataSourceFromUrlLoadMode:()=>"raw",_initScrollView(){const i=this.option("scrollingEnabled"),e=i&&this.option("pullRefreshEnabled"),t=i&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),Q5(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!i,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:t?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=R(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText(i){this._$listContainer.toggleClass("dx-wrap-item-text",i)},_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler(i){this._scrollAction&&this._scrollAction(i)},_initTemplates(){this._templateManager.addDefaultTemplates({group:new Ir((i,e)=>{ht(e)?e.key&&i.text(e.key):i.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate(i,e){if(this.callBase(i,e),i.icon){const t=Ys(i.icon).addClass("dx-list-item-icon"),n=R("<div>").addClass("dx-list-item-icon-container");n.append(t),e.prepend(n)}},_getBindableFields:()=>["text","html","icon"],_updateLoadingState(i){const e=this._dataController,t=this._scrollBottomMode()&&i&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(t)?this._infiniteDataLoading():(this._scrollView.release(!t&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted(i){return U(i)&&(this._isFirstLoadCompleted=i),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler(i){this._loadIndicationSuppressed()||(i&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(()=>{if(!!this._itemElements().length||this._isDataSourceFirstLoadCompleted()){var n;(n=this._scrollView)===null||n===void 0||n.startLoading()}}):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),i||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler(){!this._shouldAppendItems()&&qe()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed(i){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=i},_scrollViewIsFull(){const i=this._scrollView;return!i||st(i.content())>st(i.container())},_pullDownHandler(i){this._pullRefreshAction(i);const e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading(i){var e;const t=st(this._scrollView.content())-st(this._scrollView.container())<(((e=this._scrollView.scrollOffset())===null||e===void 0?void 0:e.top)??0);return i&&(!this._scrollViewIsFull()||t)},_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler(i){this._pageLoadingAction(i),!this._dataController.isLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()},_renderItems(i){this.option("grouped")?(ie(i,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),tn()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent(){const i=be(kt,this.NAME),e=this.$element(),t=this.option("collapsibleGroups");e.toggleClass("dx-list-collapsible-groups",t),q.off(e,i,".dx-list-group-header"),t&&q.on(e,i,".dx-list-group-header",n=>{this._createAction(s=>{const o=R(s.event.currentTarget).parent();this._collapseGroupHandler(o),this.option("focusStateEnabled")&&this.option("focusedElement",ze(o.find(".dx-list-item").eq(0)))},{validatingTargetName:"element"})({event:n})})},_collapseGroupHandler(i,e){const t=ae();if(i.hasClass("dx-list-group-collapsed")===e)return t.resolve();const n=i.children(".dx-list-group-body"),s=rt(n);let o=0;return s===0&&(Io(n,"auto"),o=rt(n)),i.toggleClass("dx-list-group-collapsed",e),li.animate(n,{type:"custom",from:{height:s},to:{height:o},duration:200,complete:(function(){this.updateDimensions(),this._updateLoadingState(!0),t.resolve()}).bind(this)}),t.promise()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup(){this._itemElementsCache=R(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()},_setListAria(){const{items:i,allowItemDeleting:e}=this.option(),t=e?re.format("dxList-listAriaLabel-deletable"):re.format("dxList-listAriaLabel"),n=i!=null&&i.length?{role:"listbox",label:t}:{role:void 0,label:void 0};this.setAria(n,this._$listContainer)},_focusTarget(){return this._itemContainer()},_renderInkRipple(){this._inkRipple=zm()},_toggleActiveState(i,e,t){this.callBase.apply(this,arguments);const n=this;if(!this._inkRipple)return;const s={element:i,event:t};e?tn()?this._inkRippleTimer=setTimeout(()=>{n._inkRipple.showWave(s)},35):n._inkRipple.showWave(s):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(s))},_postprocessRenderItem(i){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent(R(i.itemElement))},_attachSwipeEvent(i){const e=be(sg,this.NAME);q.on(i,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler(i){this._itemDXEventHandler(i,"onItemSwipe",{direction:i.offset<0?"left":"right"})},_nextButtonHandler(i){this._pageLoadingAction(i);const e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup(i,e){const t=R("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),n=`dx-${new hi().toString()}`,s={role:"group",labelledby:n};this.setAria(s,t);const o=R("<div>").addClass("dx-list-group-header").attr("id",n).appendTo(t),r=this.option("groupTemplate"),a=this._getTemplate(e.template||r,e,i,o),l={index:i,itemData:e,container:ze(o)};this._createItemByTemplate(a,l),R("<div>").addClass("dx-list-group-header-indicator").prependTo(o),this._renderingGroupIndex=i;const d=R("<div>").addClass("dx-list-group-body").appendTo(t);ie(J5(e)||[],(c,h)=>{this._renderItem({group:i,item:c},h,d)}),this._groupRenderAction({groupElement:ze(t),groupIndex:i,groupData:e})},downInkRippleHandler(i){this._toggleActiveState(R(i.currentTarget),!0,i)},upInkRippleHandler(i){this._toggleActiveState(R(i.currentTarget),!1)},attachGroupHeaderInkRippleEvents(){const i=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);const e=[i,"dxpointerdown",".dx-list-group-header",this._downInkRippleHandler],t=[i,"dxpointerup dxpointerout",".dx-list-group-header",this._upInkRippleHandler];q.off(...e),q.on(...e),q.off(...t),q.on(...t)},_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState(i){this.callBase(i),this._scrollView.option("disabled",i||!this.option("scrollingEnabled"))},_toggleNextButton(i){const e=this._dataController,t=this._getNextButton();this.$element().toggleClass("dx-has-next",i),i&&e.isLoaded()&&t.appendTo(this._itemContainer()),i||t.detach()},_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton(){const i=R("<div>").addClass("dx-list-next-button"),e=R("<div>").appendTo(i);return this._createComponent(e,$i,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:On()?"default":void 0,integrationOptions:{}}),i},_moveFocus(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh(){if(!qe())this.callBase();else{const i=this._scrollView.scrollTop();this.callBase(),i&&this._scrollView.scrollTo(i)}},_optionChanged(i){switch(i.name){case"pageLoadMode":this._toggleNextButton(i.value),this._initScrollView();break;case"dataSource":this.callBase(i),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(i),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(i.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(i),this._scrollView.option(i.name,i.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(i),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(i);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(i)}},_extendActionArgs(i){if(!this.option("grouped"))return this.callBase(i);const e=i.closest(".dx-list-group"),t=e.find(".dx-list-item");return Y(this.callBase(i),{itemIndex:{group:e.index(),item:t.index(i)}})},expandGroup(i){const e=ae(),t=this._getItemsContainer().find(".dx-list-group").eq(i);return this._collapseGroupHandler(t,!1).done(()=>{e.resolveWith(this)}),e.promise()},collapseGroup(i){const e=ae(),t=this._getItemsContainer().find(".dx-list-group").eq(i);return this._collapseGroupHandler(t,!0).done(()=>{e.resolveWith(this)}),e},updateDimensions(){const i=this,e=ae();return i._scrollView?i._scrollView.update().done(()=>{!i._scrollViewIsFull()&&i._updateLoadingState(!0),e.resolveWith(i)}):e.resolveWith(i),e.promise()},reload(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint(){this.scrollTo(0),this.callBase()},scrollTop(){return this._scrollView.scrollOffset().top},clientHeight(){return this._scrollView.clientHeight()},scrollHeight(){return this._scrollView.scrollHeight()},scrollBy(i){this._scrollView.scrollBy(i)},scrollTo(i){this._scrollView.scrollTo(i)},scrollToItem(i){const e=this._editStrategy.getItemElement(i),t=e==null?void 0:e.get(0);this._scrollView.scrollToElement(t,{bottom:V5(t,"bottom")})},_dimensionChanged(){this.updateDimensions()}}).include(HS);ag.ItemClass=Y5;function Q5(){return rg}class e8 extends ag{_init(){super._init(),this._activeStateUnit=".dx-toolbar-menu-action:not(.dx-toolbar-hidden-button-group)"}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){const e=this._itemContainer();ie(["before","center","after","menu"],(t,n)=>{const s=`_$${n}Section`;this[s]||(this[s]=R("<div>").addClass("dx-toolbar-menu-section")),this[s].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".dx-scrollview-content").attr("role","menu")}_updateSections(){const e=this.$element().find(".dx-toolbar-menu-section");e.removeClass("dx-toolbar-menu-last-section"),e.not(":empty").eq(-1).addClass("dx-toolbar-menu-last-section")}_renderItem(e,t,n,s){const o=t.location??"menu",r=this[`_$${o}Section`],a=super._renderItem(e,t,r,s);return this._getItemTemplateName({itemData:t})&&a.addClass("dx-toolbar-menu-custom"),(o==="menu"||t.widget==="dxButton"||t.widget==="dxButtonGroup"||t.isAction)&&a.addClass("dx-toolbar-menu-action"),t.widget==="dxButton"&&a.addClass("dx-toolbar-hidden-button"),t.widget==="dxButtonGroup"&&a.addClass("dx-toolbar-hidden-button-group"),a.addClass(t.cssClass),a}_getItemTemplateName(e){const t=super._getItemTemplateName(e),n=e.itemData;return n&&n.menuItemTemplate||t}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,t,n){R(e.target).closest(".dx-toolbar-menu-action").length&&super._itemClickHandler(e,t,n)}_clean(){this._getSections().empty(),super._clean()}}class t8 extends OS{_supportedKeys(){var e;let t={};return(!this.option("opened")||!((e=this._list)!==null&&e!==void 0&&e.option("focusedElement")))&&(t=this._button._supportedKeys()),Y(super._supportedKeys(),t,{tab(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return ve({},super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>On(),options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new km("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){const e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,$i,{icon:"overflow",template:"content",stylingMode:nn()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:t=>{this.option("opened",!this.option("opened")),this._buttonClickAction(t)}})}_toggleActiveState(e,t,n){this._button._toggleActiveState(e,t,n)}_toggleMenuVisibility(e){var t,n;const s=e??!((t=this._popup)!==null&&t!==void 0&&t.option("visible"));e&&this._renderPopup(),(n=this._popup)===null||n===void 0||n.toggle(s),this.setAria("expanded",s)}_renderPopup(){if(this._$popup)return;this._$popup=R("<div>").appendTo(this.$element());const{rtlEnabled:e,container:t,animation:n}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(s){let{component:o}=s;o.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,preventScrollEvents:!1,contentTemplate:s=>this._renderList(s),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top "+(e?"left":"right"),at:"bottom "+(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:n,onOptionChanged:s=>{let{name:o,value:r}=s;o==="visible"&&this.option("opened",r)},container:t,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:s=>this._closeOutsideDropDownHandler(s),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}_getMaxHeight(){const e=this.$element(),t=e.offset().top,n=rt(Je()),s=Math.max(t,n-t-rt(e));return Math.min(n,s-3-10)}_closeOutsideDropDownHandler(e){return!R(e.target).closest(this.$element()).length}_renderList(e){const t=R(e);t.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(t,e8,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:n=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(n)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,t,n){var s;(s=this._list)===null||s===void 0||s._itemOptionChanged(e,t,n),Zc(this._list,e)}_getListDataSource(){return this.option("dataSource")??this.option("items")}_setListDataSource(){var e;(e=this._list)===null||e===void 0||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){var t;super._toggleVisibility(e),(t=this._button)===null||t===void 0||t.option("visible",e)}_optionChanged(e){var t,n,s;const{name:o,value:r}=e;switch(o){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":(t=this._list)===null||t===void 0||t.option(o,this._getTemplate(r));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":(n=this._list)===null||n===void 0||n.option(o,r),super._optionChanged(e);break;case"onItemRendered":(s=this._list)===null||s===void 0||s.option(o,r);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(r),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(o,r);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>Zc(this._list,e))}}const Lh="dx-toolbar-item-invisible";class i8{constructor(e){this._toolbar=e}_initMarkup(){Di(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(!this._hasVisibleMenuItems())return;this._renderMenuButtonContainer();const e=R("<div>").appendTo(this._overflowMenuContainer()),t=this._toolbar._createActionByOption("onItemClick"),n=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,t8,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>n,onItemClick:s=>{t(s)},container:this._toolbar.option("menuContainer"),onOptionChanged:s=>{let{name:o,value:r}=s;o==="opened"&&this._toolbar.option("overflowMenuVisible",r),o==="items"&&this._updateMenuVisibility(r)}})}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=R("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){const t=e??this._getMenuItems(),n=t.length&&this._hasVisibleMenuItems(t);this._toggleMenuVisibility(n)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass("dx-state-invisible",!e)}_renderMenuItems(){Di(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){return ln(this._toolbar.option("items")??[],e=>!this._toolbar._isMenuItem(e))}_getHiddenItems(){return this._toolbar._itemContainer().children(`.dx-toolbar-item-auto-hide.${Lh}`).not(".dx-state-invisible")}_getMenuItems(){const e=ln(this._toolbar.option("items")??[],s=>this._toolbar._isMenuItem(s)),t=this._getHiddenItems();return this._restoreItems=this._restoreItems??[],[...[].slice.call(t).map(s=>{const o=this._toolbar._getItemData(s),r=R(s),a=r.children();return Y({menuItemTemplate:()=>(this._restoreItems.push({container:r,item:a}),R("<div>").addClass("dx-toolbar-item-auto-hide").append(a))},o)}),...e]}_hasVisibleMenuItems(e){const t=e??this._toolbar.option("items");let n=!1;const s=Nt("visible"),o=Nt("locateInMenu");return ie(t,(r,a)=>{const l=s(a,{functionsAsIs:!0}),d=o(a,{functionsAsIs:!0});(l!==!1&&(d==="auto"||d==="always")||a.location==="menu")&&(n=!0)}),n}_arrangeItems(){this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),ie(this._restoreItems??[],(t,n)=>{R(n.container).append(n.item)}),this._restoreItems=[];const e=Ge(this._toolbar.$element());return this._hideOverflowItems(e),e}_hideOverflowItems(e){const t=this._toolbar.$element().find(".dx-toolbar-item-auto-hide");if(!t.length)return;const n=e??Ge(this._toolbar.$element());R(t).removeClass(Lh);let s=this._getItemsWidth();for(;t.length&&n<s;)t.eq(-1).addClass(Lh),s=this._getItemsWidth(),t.splice(-1,1)}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,t,n){if((t==="disabled"||t==="options.disabled")&&this._toolbar._isMenuItem(e)){var s;(s=this._menu)===null||s===void 0||s._itemOptionChanged(e,t,n);return}this.renderMenuItems()}_renderItem(e,t){e.locateInMenu==="auto"&&t.addClass("dx-toolbar-item-auto-hide")}_optionChanged(e,t){var n,s,o,r,a;switch(e){case"disabled":(n=this._menu)===null||n===void 0||n.option(e,t);break;case"overflowMenuVisible":(s=this._menu)===null||s===void 0||s.option("opened",t);break;case"onItemClick":(o=this._menu)===null||o===void 0||o.option(e,t);break;case"menuContainer":(r=this._menu)===null||r===void 0||r.option("container",t);break;case"menuItemTemplate":(a=this._menu)===null||a===void 0||a.option("itemTemplate",t)}}}class zS extends FS{_getDefaultOptions(){return ve({},super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){e!=="height"&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new v5(this):new i8(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,t,n,s){const o=super._renderItem(e,t,n,s);this._layoutStrategy._renderItem(t,o);const{widget:r,showText:a}=t;return r==="dxButton"&&a==="inMenu"&&o.toggleClass("dx-toolbar-text-auto-hide"),o}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(this.$element().is(":hidden"))return;const e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}_itemOptionChanged(e,t,n,s){this._isMenuItem(e)||super._itemOptionChanged(e,t,n,s),this._layoutStrategy._itemOptionChanged(e,t,n),(t==="disabled"||t==="options.disabled")&&Zc(this,e),t==="location"&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>Zc(this,e))}_isMenuItem(e){return e.location==="menu"||e.locateInMenu==="always"}_isToolbarItem(e){return e.location===void 0||e.locateInMenu==="never"}_optionChanged(e){const{name:t,value:n}=e;switch(this._layoutStrategy._optionChanged(t,n),t){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged(e),this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}updateDimensions(){this._dimensionChanged()}}wt("dxToolbar",zS);const iv=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"];class n8 extends Ql{init(){super.init(),this._editingController=this.getController("editing"),this._headerFilterController=this.getController("headerFilter"),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})}_getToolbarItems(){return[]}_getButtonContainer(){return R("<div>").addClass(this.addWidgetPrefix("toolbar-button"))}_getToolbarButtonClass(e){const t=e?` ${e}`:"";return this.addWidgetPrefix("toolbar-button")+t}_getToolbarOptions(){const e=this.option("toolbar"),t={toolbarOptions:{items:this._getToolbarItems(),visible:e==null?void 0:e.visible,disabled:e==null?void 0:e.disabled,onItemRendered(s){const o=s.itemData.onItemRendered;o&&o(s)}}},n=e==null?void 0:e.items;if(t.toolbarOptions.items=this._normalizeToolbarItems(t.toolbarOptions.items,n),this.executeAction("onToolbarPreparing",t),t.toolbarOptions&&!U(t.toolbarOptions.visible)){const s=t.toolbarOptions.items;t.toolbarOptions.visible=!!(s!=null&&s.length)}return t.toolbarOptions}_normalizeToolbarItems(e,t){e.forEach(a=>{if(!iv.includes(a.name))throw new Error(`Default toolbar item '${a.name}' is not added to DEFAULT_TOOLBAR_ITEM_NAMES`)});const n={location:"after"},s=Array.isArray(t);if(!U(t))return e;s||(t=[t]);const o={};e.forEach(a=>{o[a.name]=a});const r=t.map(a=>(Ke(a)&&(a={name:a}),U(a.name)&&(U(o[a.name])?a=Y(!0,{},o[a.name],a):iv.includes(a.name)&&(a=ve({},a,{visible:!1}))),Y(!0,{},n,a)));return s?r:r[0]}_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{const e=this.element();e.addClass(this.addWidgetPrefix("header-panel"));const t=re.format(this.component.NAME+"-ariaToolbar"),n=R("<div>").attr("aria-label",t).appendTo(e);this._toolbar=this._createComponent(n,zS,this._toolbarOptions)}}_columnOptionChanged(){}_handleDataChanged(){this._requireReady&&this.render()}_isDisabledDefinedByUser(e){var t;const n=(t=this.option("toolbar"))===null||t===void 0?void 0:t.items,s=n==null?void 0:n.find(o=>(o==null?void 0:o.name)===e);return U(s==null?void 0:s.disabled)}render(){this._toolbarOptions=this._getToolbarOptions(),super.render.apply(this,arguments)}setToolbarItemDisabled(e,t){const n=this._toolbar,s=this._isDisabledDefinedByUser(e);if(!n||s)return;const r=(n.option("items")??[]).findIndex(l=>l.name===e);if(r<0)return;const a=n.option(`items[${r}]`);n.option(`items[${r}].disabled`,t),a.options&&n.option(`items[${r}].options.disabled`,t)}updateToolbarDimensions(){var e;(e=this._toolbar)===null||e===void 0||e.updateDimensions()}getHeaderPanel(){return this.element()}getHeight(){return this.getElementHeight()}optionChanged(e){if(e.name==="onToolbarPreparing"&&(this._invalidate(),e.handled=!0),e.name==="toolbar"){const r=Cr(e.fullName),a=e.fullName.replace(/^toolbar\./,"");if(r.length===1||r[1]==="visible")this._invalidate();else if(r[1]==="items"){if(r.length===2){var t;const l=this._getToolbarOptions();(t=this._toolbar)===null||t===void 0||t.option("items",l.items)}else if(r.length===3){var n;const l=this._normalizeToolbarItems(this._getToolbarItems(),e.value);(n=this._toolbar)===null||n===void 0||n.option(a,l)}else if(r.length>=4){var s;(s=this._toolbar)===null||s===void 0||s.option(a,e.value)}}else{var o;(o=this._toolbar)===null||o===void 0||o.option(a,e.value)}e.handled=!0}super.optionChanged(e)}isVisible(){return!!(this._toolbarOptions&&this._toolbarOptions.visible)}allowDragging(){}hasGroupedColumns(){}}const s8=i=>class extends i{_updateDimensionsCore(){super._updateDimensionsCore.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}},WS={defaultOptions:()=>({}),views:{headerPanel:n8},extenders:{controllers:{resizing:s8}}};WS.views.headerPanel;He.registerModule("headerPanel",WS);class o8 extends Hi{_getDefaultOptions(){const e=super._getDefaultOptions();return ie(this.getGridCoreHelper().modules,function(){Ee(this.defaultOptions)&&Y(!0,e,this.defaultOptions())}),e}_init(){this._activeStateUnit=".dx-row",super._init()}_setDeprecatedOptions(){super._setDeprecatedOptions(),Y(this._deprecatedOptions,{"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})}_clean(){}_optionChanged(e){this.getGridCoreHelper().callModuleItemsMethod(this,"optionChanged",[e]),e.handled||super._optionChanged(e)}_dimensionChanged(){this.updateDimensions(!0)}_visibilityChanged(e){e&&this.updateDimensions()}_renderContentImpl(){this.getView("gridView").update()}_renderContent(){const e=this;Di(()=>{e._renderContentImpl()})}_dispose(){super._dispose(),this.getGridCoreHelper().callModuleItemsMethod(this,"dispose")}isReady(){return this.getController("data").isReady()}getController(e){return this._controllers[e]}getView(e){return this._views[e]}getGridCoreHelper(){}beginUpdate(){super.beginUpdate(),this.getGridCoreHelper().callModuleItemsMethod(this,"beginUpdate")}endUpdate(){this.getGridCoreHelper().callModuleItemsMethod(this,"endUpdate"),super.endUpdate()}}const r8="Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.";He.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);class jS extends o8{_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>On(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>Zt.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:e=>e.deviceType!=="desktop",options:{grouping:{expandMode:"rowClick"}}}])}_init(){super._init(),Ce.logHeaderFilterDeprecatedWarningIfNeed(this),He.processModules(this,He),He.callModuleItemsMethod(this,"init")}_initMarkup(){super._initMarkup.apply(this,arguments),this.getView("gridView").render(this.$element())}_setDeprecatedOptions(){super._setDeprecatedOptions(),Y(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'}})}static registerModule(e,t){He.registerModule(e,t)}getGridCoreHelper(){return He}_getTemplate(e){let t=e;return Ke(t)&&t.startsWith("#")&&(t=R(e),uu.warn(r8)),super._getTemplate(t)}focus(e){this.getController("keyboardNavigation").focus(e)}}wt("dxDataGrid",jS);const a8=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,KS=function(i){i&&ie(i,(e,t)=>{if(ht(t)||Array.isArray(t))KS(t);else if(typeof t=="string"){const n=a8.exec(t);n&&(i[e]=new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])))}})},nv=function(i){const e=i.type==="sessionStorage"?tx():Je().localStorage;if(!e)throw new Error("E1007");return e},sv=function(i){return U(i.storageKey)?i.storageKey:"storage"};class l8 extends Yt.ViewController{getDataController(){return this.getController("data")}getExportController(){return this.getController("export")}getColumnsController(){return this.getController("columns")}init(){return this._state={},this._isLoaded=!1,this._isLoading=!1,this._windowUnloadHandler=()=>{this._savingTimeoutID!==void 0&&this._saveState(this.state())},q.on(Je(),"visibilitychange",this._windowUnloadHandler),this}optionChanged(e){const t=this;e.name==="stateStoring"?(t.isEnabled()&&!t.isLoading()&&t.load(),e.handled=!0):super.optionChanged(e)}dispose(){clearTimeout(this._savingTimeoutID),q.off(Je(),"visibilitychange",this._windowUnloadHandler)}_loadState(){const e=this.option("stateStoring");if(e.type==="custom")return e.customLoad&&e.customLoad();try{return JSON.parse(nv(e).getItem(sv(e)))}catch(t){mt.log("W1022","State storing",t.message)}}_saveState(e){const t=this.option("stateStoring");if(t.type==="custom"){t.customSave&&t.customSave(e);return}try{nv(t).setItem(sv(t),JSON.stringify(e))}catch(n){mt.log(n.message)}}publicMethods(){return["state"]}isEnabled(){return this.option("stateStoring.enabled")}isLoaded(){return this._isLoaded}isLoading(){return this._isLoading}load(){this._isLoading=!0;const e=Pi(this._loadState());return e.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(t=>{t!==null&&!cn(t)&&this.state(t)}),e}state(e){const t=this;if(!arguments.length)return Y(!0,{},t._state);t._state=Y({},e),KS(t._state)}save(){const e=this;clearTimeout(e._savingTimeoutID),e._savingTimeoutID=setTimeout(()=>{e._saveState(e.state()),e._savingTimeoutID=void 0},e.option("stateStoring.savingTimeout"))}}const d8=i=>{const e=i.getView("pagerView"),t=i.getController("data"),n={allowedPageSizes:e?e.getPageSizes():void 0,filterPanel:{filterEnabled:i.option("filterPanel.filterEnabled")},filterValue:i.option("filterValue"),focusedRowKey:i.option("focusedRowEnabled")?i.option("focusedRowKey"):void 0};return Y(n,t.getUserState())},c8=i=>{const e=i.getController("columns"),t=i.getController("selection"),n=i.getController("export"),s=i.getController("data");e&&e.columnsChanged.add(()=>{i.updateState({columns:e.getUserState()})}),t&&t.selectionChanged.add(o=>{i.updateState({selectedRowKeys:o.selectedRowKeys,selectionFilter:o.selectionFilter})}),s&&(i._initialPageSize=i.option("paging.pageSize"),i._initialFilterValue=i.option("filterValue"),s.changed.add(()=>{const o=d8(i);i.updateState(o)})),n&&n.selectionOnlyChanged.add(()=>{i.updateState({exportSelectionOnly:n.selectionOnly()})})},u8=(i,e)=>{const t=i.getController("filterSync"),n=i.getController("columns"),s=e.columns||e.filterValue!==void 0;return t?s?e.filterValue||t.getFilterValueFromColumns(e.columns):i._initialFilterValue||t.getFilterValueFromColumns(n.getColumns()):null},h8=i=>class extends i{init(){super.init(),this._dataController.stateLoaded.add(()=>{if(this._dataController.isLoaded()&&!this._dataController.getDataSource()){this.setLoading(!1),this.renderNoDataText();const e=this.component.getView("columnHeadersView");e&&e.render(),this.component._fireContentReadyAction()}})}},p8=i=>class extends i{init(){return super.init.apply(this,arguments),c8(this),this}isLoading(){return super.isLoading()||this.getDataController().isStateLoading()}state(e){const t=super.state.apply(this,arguments);return e!==void 0&&this.applyState(Y(!0,{},e)),t}updateState(e){if(this.isEnabled()){const t=this.state(),n=Y({},t,e),s=ys(t),o=ys(n);zt(s,o)||(e=Y(!0,{},e),Y(this._state,e),this.save())}else Y(this._state,e)}applyState(e){var t;const{allowedPageSizes:n}=e,{searchText:s}=e,{selectedRowKeys:o}=e,{selectionFilter:r}=e,a=this.option("scrolling.mode"),l=a==="virtual"||a==="infinite",d=this.option("pager.visible")===!0&&this.option("pager.showPageSizeSelector"),c=(t=this.getView("rowsView"))===null||t===void 0?void 0:t.hasHeight();this.component.beginUpdate(),this.getColumnsController()&&this.getColumnsController().setUserState(e.columns),this.getExportController()&&this.getExportController().selectionOnly(e.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",o||[]),this.option("selectionFilter",r),n&&this.option("pager.allowedPageSizes")==="auto"&&(this.option("pager").allowedPageSizes=n),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",e.focusedRowKey??null)),this.component.endUpdate(),this.option("searchPanel.text",s||""),this.option("filterValue",u8(this,e)),this.option("filterPanel.filterEnabled",e.filterPanel?e.filterPanel.filterEnabled:!0),this.option("paging.pageIndex",(!l||c)&&e.pageIndex||0),this.option("paging.pageSize",(!l||d)&&U(e.pageSize)?e.pageSize:this._initialPageSize),this.getDataController()&&this.getDataController().reset()}},f8=i=>class extends i{_shouldReturnVisibleColumns(){return super._shouldReturnVisibleColumns.apply(this,arguments)&&(!this._stateStoringController.isEnabled()||this._stateStoringController.isLoaded())}},m8=i=>class extends i{dispose(){clearTimeout(this._restoreStateTimeoutID),super.dispose()}callbackNames(){return super.callbackNames().concat(["stateLoaded"])}_refreshDataSource(){if(this._stateStoringController.isEnabled()&&!this._stateStoringController.isLoaded()){clearTimeout(this._restoreStateTimeoutID);const e=new ae;return this._restoreStateTimeoutID=setTimeout(()=>{this._stateStoringController.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{super._refreshDataSource(),this.stateLoaded.fire(),e.resolve()}).fail(t=>{this.stateLoaded.fire(),this._handleLoadError(t||"Unknown error"),e.reject()})}),e.promise()}this.isStateLoading()||super._refreshDataSource()}isLoading(){return super.isLoading()||this._stateStoringController.isLoading()}isStateLoading(){return U(this._restoreStateTimeoutID)}isLoaded(){return super.isLoaded()&&!this.isStateLoading()}},g8=i=>class extends i{_fireSelectionChanged(e){const t=this.option("selection.deferred");this._stateStoringController.isLoading()&&t||super._fireSelectionChanged.apply(this,arguments)}},_8={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:l8},extenders:{views:{rowsView:h8},controllers:{stateStoring:p8,columns:f8,data:m8,selection:g8}}};He.registerModule("stateStoring",_8);const b8="dx-select-checkboxes-hidden",fs="selection.showCheckBoxesMode",al="selection.mode",GS=function(i,e){const t=i.getView("rowsView"),n=i.getController("selection"),s=R(e.target).closest(".dx-data-row"),o=t.getRowIndex(s);o<0||(i.option(fs)==="onLongTap"?n.isSelectionWithCheckboxes()?n.stopSelectionWithCheckboxes():n.startSelectionWithCheckboxes():(i.option(fs)==="onClick"&&n.startSelectionWithCheckboxes(),i.option(fs)!=="always"&&n.changeItemSelection(o,{control:!0})))},v8=function(i,e){let t=0;const n=i._dataController.store(),s=n&&n.key(),o=Array.isArray(s);if(!e.length)return!1;if(o&&Array.isArray(e[0])&&e[1]==="and"){for(let r=0;r<e.length;r++)if(Array.isArray(e[r])){if(e[r][0]!==s[t]||e[r][1]!=="=")return!0;t++}return!1}return s!==e[0]},y8=(i,e)=>{const{component:t}=e,n=t.getView("rowsView");t.option("renderAsync")&&!t.option("selection.deferred")&&(e.value=t.isRowSelected(e.row.key)),n.renderSelectCheckBoxContainer(R(i),e)},C8=(i,e)=>{const{column:t}=e,n=R(i),s=e.component.getView("columnHeadersView");n.addClass("dx-editor-cell"),s._renderSelectAllCheckBox(n,t),s._attachSelectAllCheckBoxClickEvent(n)};class x8 extends Yt.Controller{init(){const{deferred:e,selectAllMode:t,mode:n}=this.option("selection")??{};this.option("scrolling.mode")==="infinite"&&!e&&n==="multiple"&&t==="allPages"&&mt.log("W1018"),this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._stateStoringController=this.getController("stateStoring"),this._selectionMode=n,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){const t=this.option("selection.deferred");let n=e.filter(s=>s.type==="remove").map(s=>s.key);if(t){const s=this._dataController.items().filter(o=>o.isSelected).map(o=>o.key);n=n.filter(o=>s.find(r=>zt(r,o)))}n.length&&this.deselectRows(n)}_updateSelectedOnPush(e){if(this.option("selection.deferred"))return;const n=e.filter(o=>o.type==="update"),s=this.getSelectedRowsData();nr({keyInfo:this._selection.options,data:s,changes:n})}_getSelectionConfig(){const e=this._dataController,t=this._columnsController,n=this.option("selection")??{},{deferred:s}=n,o=this.option("scrolling.mode"),r=o==="virtual"||o==="infinite",a=this.option("selection.allowSelectAll"),l=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:s,alwaysSelectByShift:n.alwaysSelectByShift,maxFilterLengthInRequest:n.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,isVirtualPaging:r,sensitivity:this.option("selection.sensitivity"),allowLoadByRange(){const d=t.getGroupColumns().length>0;return r&&!l&&!d&&a&&!s},key:()=>e==null?void 0:e.key(),keyOf:d=>e==null?void 0:e.keyOf(d),dataFields(){var d;return(d=e.dataSource())===null||d===void 0?void 0:d.select()},load(d){var c;return((c=e.dataSource())===null||c===void 0?void 0:c.load(d))||new ae().resolve([])},plainItems:d=>e.items(!0),isItemSelected:d=>d.selected,isSelectableItem:d=>(d==null?void 0:d.rowType)==="data"&&!d.isNewRow,getItemData:d=>U(d==null?void 0:d.rowType)?(d==null?void 0:d.oldData)||(d==null?void 0:d.data):d,filter:()=>e.getCombinedFilter(s),totalCount:()=>e.totalCount(),getLoadOptions(d,c,h){var u;const{sort:p,filter:f}=((u=e.dataSource())===null||u===void 0?void 0:u.lastLoadOptions())??{};let g=Math.min(d,c),m=Math.max(d,c);U(h)&&(g=Math.min(h,g),m=Math.max(h,m));const b=m-g+1;return{skip:g,take:b,filter:f,sort:p}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){const e=this._columnsController,t=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:t,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:"dx-command-select",width:"auto",cellTemplate:y8,headerCellTemplate:C8}),e.columnOption("command:select","visible",t)}_createSelection(){const e=this._getSelectionConfig();return new $1(e)}_fireSelectionChanged(e){const t=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(t),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){const{isDeferredMode:t}=e,{selectionFilter:n}=e,{selectedItemKeys:s}=e,{removedItemKeys:o}=e;this.option(fs)==="onClick"&&((t?n&&v8(this,n):s.length>1)?this.startSelectionWithCheckboxes():(t?n&&!n.length:s.length===0&&o.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){const t=this;let n;const s=t.option("selection.deferred"),o=t._selection.selectionFilter(),r=t._dataController,a=r.items(!0),l=r.items();if(!a)return;const d=t.isSelectionWithCheckboxes(),c=t.getChangedItemIndexes(a),h=t.getChangedItemIndexes(l);t._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:o,isDeferredMode:s}),(c.length||d!==t.isSelectionWithCheckboxes())&&r.updateItems({changeType:"updateSelection",itemIndexes:h}),s?(t.option("selectionFilter",o),n={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(t._selectedItemsInternalChange=!0,t.option("selectedRowKeys",e.selectedItemKeys.slice(0)),t._selectedItemsInternalChange=!1,n={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),t._fireSelectionChanged(n)}getChangedItemIndexes(e){const t=this,n=[],s=this.option("selection.deferred");for(let o=0,{length:r}=e;o<r;o++){const a=e[o],l=t.isRowSelected(s?a.data:a.key);t._selection.isDataItem(a)&&a.isSelected!==l&&n.push(o)}return n}callbackNames(){return["selectionChanged"]}optionChanged(e){var t;super.optionChanged(e);const n=!!((t=this._selection)!==null&&t!==void 0&&t.options);switch(e.name){case"selection":{const s=this._selectionMode;if(this.init(),n&&e.fullName==="selection.sensitivity"&&(this._selection.options.sensitivity=e.value),e.fullName!=="selection.showCheckBoxesMode"){const o=this._selectionMode;let r=this.option("selectedRowKeys");s!==o&&(o==="single"?r.length>1&&(r=[r[0]]):o!=="multiple"&&(r=[])),this.selectRows(r).always(()=>{this._fireSelectionChanged()})}this._columnsController.updateColumns(),e.handled=!0;break}case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":{const s=e.value||[];Array.isArray(s)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!s.length)&&this.selectRows(s),e.handled=!0;break}}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return this.option(al)==="multiple"&&(this.option(fs)==="always"||this.option(fs)==="onClick"||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return this.option("selection.selectAllMode")==="page"}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return this.option(fs)==="onClick"&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){const e=this.option("selectedRowKeys")??[];return!this.option("selection.deferred")&&e.length?this.selectedItemKeys(e):new ae().resolve().promise()}selectedItemKeys(e,t,n,s){return this._selection.selectedItemKeys(e,t,n,s)}getSelectedRowKeys(e){return this._selection.getSelectedItemKeys()}selectRows(e,t){return this.selectedItemKeys(e,t)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){const t=this._dataController.items(),n=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),ie(e,function(){const s=t[this];s&&s.rowType==="data"&&n.push(s.key)}),this.selectRows(n)}getSelectedRowsData(e){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,t,n){t=t||{},this.isSelectionWithCheckboxes()&&(t.control=!0);const s=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(s,t,n)}focusedItemIndex(e){const t=this;if(U(e))t._selection._focusedItemIndex=e;else return t._selection._focusedItemIndex}isSelectionWithCheckboxes(){return this.option(al)==="multiple"&&(this.option(fs)==="always"||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){const e=this;return e.option(al)==="multiple"&&!e.isSelectionWithCheckboxes()?(e._isSelectionWithCheckboxes=!0,e._updateSelectColumn(),!0):!1}stopSelectionWithCheckboxes(){const e=this;return e._isSelectionWithCheckboxes?(e._isSelectionWithCheckboxes=!1,e._updateSelectColumn(),!0):!1}}const w8=i=>class extends i{init(){const e=this.option("selection.deferred");super.init.apply(this,arguments),e&&this._selectionController._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})}_loadDataSource(){const e=this;return super._loadDataSource().always(()=>{e._selectionController.refresh()})}_processDataItem(e,t){const n=this._selectionController.isSelectColumnVisible(),s=t.isDeferredSelection=t.isDeferredSelection===void 0?this.option("selection.deferred"):t.isDeferredSelection,o=super._processDataItem.apply(this,arguments);if(o.isSelected=this._selectionController.isRowSelected(s?o.data:o.key),n&&o.values){for(let r=0;r<t.visibleColumns.length;r++)if(t.visibleColumns[r].command==="select"){o.values[r]=o.isSelected;break}}return o}refresh(e){const t=this,n=new ae;return super.refresh.apply(this,arguments).done(()=>{!e||e.selection?t._selectionController.refresh().done(n.resolve).fail(n.reject):n.resolve()}).fail(n.reject),n.promise()}_handleDataChanged(e){const t=this.hasLoadOperation();super._handleDataChanged.apply(this,arguments),t&&!this._repaintChangesOnly&&this._selectionController.focusedItemIndex(-1)}_applyChange(e){if(e&&e.changeType==="updateSelection"){e.items.forEach((t,n)=>{const s=this._items[n];s&&(s.isSelected=t.isSelected,s.values=t.values)});return}return super._applyChange.apply(this,arguments)}_endUpdateCore(){const e=this._changes;if(e.length>1&&e.every(n=>n.changeType==="updateSelection")){const n=e.map(s=>s.itemIndexes||[]).reduce((s,o)=>s.concat(o));this._changes=[{changeType:"updateSelection",itemIndexes:n}]}super._endUpdateCore.apply(this,arguments)}},S8=i=>class extends i{_contextMenuPrepared(e){const t=e.event;t.originalEvent&&t.originalEvent.type!=="dxhold"||e.items&&e.items.length>0||GS(this,t)}},E8=i=>class extends i{init(){super.init(),this._selectionController.selectionChanged.add(this._updateSelectAllValue.bind(this))}_updateSelectAllValue(){const e=this,t=e.element(),n=t&&t.find(".dx-select-checkbox");if(t&&n.length&&e.option("selection.mode")==="multiple"){const s=e._selectionController.isSelectAll(),o=s!==!1,r=e.option("selection.allowSelectAll")?!e._dataController.isEmpty():o;n.dxCheckBox("instance").option({visible:r,value:s})}}_handleDataChanged(e){super._handleDataChanged(e),(!e||e.changeType==="refresh"||e.repaintChangesOnly&&e.changeType==="update")&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})}_renderSelectAllCheckBox(e,t){const n=this,s=n._dataController.isEmpty(),o=R("<div>").appendTo(e).addClass("dx-select-checkbox");return n.setAria("label",re.format("dxDataGrid-ariaSelectAll"),o),n._editorFactoryController.createEditor(o,Y({},t,{parentType:"headerRow",dataType:"boolean",value:this._selectionController.isSelectAll(),editorOptions:{visible:!s&&(n.option("selection.allowSelectAll")||this._selectionController.isSelectAll()!==!1)},tabIndex:n.option("useLegacyKeyboardNavigation")?-1:n.option("tabIndex")||0,setValue:(r,a)=>{const l=n.option("selection.allowSelectAll");a.component.option("visible",l||a.component.option("value")!==!1),!(!a.event||this._selectionController.isSelectAll()===r)&&(a.value&&!l?a.component.option("value",!1):a.value?this._selectionController.selectAll():this._selectionController.deselectAll(),a.event.preventDefault())}})),o}_attachSelectAllCheckBoxClickEvent(e){q.on(e,kt,this.createAction(t=>{const{event:n}=t;R(n.target).closest(".dx-select-checkbox").length||q.trigger(R(n.currentTarget).children(".dx-select-checkbox"),kt),n.preventDefault()}))}},I8=i=>class extends i{renderSelectCheckBoxContainer(e,t){t.rowType==="data"&&!t.row.isNewRow?(e.addClass("dx-editor-cell"),this._attachCheckBoxClickEvent(e),this._renderSelectCheckBox(e,t)):Ce.setEmptyText(e)}_renderSelectCheckBox(e,t){const n=R("<div>").addClass("dx-select-checkbox").appendTo(e);return this.setAria("label",re.format("dxDataGrid-ariaSelectRow"),n),this._editorFactoryController.createEditor(n,Y({},t.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:t.value,setValue(s,o){var r;(o==null||(r=o.event)===null||r===void 0?void 0:r.type)==="keydown"&&q.trigger(o.element,kt,o)},row:t.row})),n}_attachCheckBoxClickEvent(e){q.on(e,kt,this.createAction(function(t){const{event:n}=t,s=this.getRowIndex(R(n.currentTarget).closest(".dx-row"));s>=0&&(this._selectionController.startSelectionWithCheckboxes(),this._selectionController.changeItemSelection(s,{shift:n.shiftKey}),R(n.target).closest(".dx-select-checkbox").length&&this._dataController.updateItems({changeType:"updateSelection",itemIndexes:[s]}))}))}_update(e){const t=this,n=t.getTableElements();e.changeType==="updateSelection"?n.length>0&&(ie(n,(s,o)=>{ie(e.itemIndexes||[],(r,a)=>{let l;if(e.items[a]&&(l=t._getRowElements(R(o)).eq(a),l.length)){const{isSelected:d}=e.items[a];l.toggleClass("dx-selection",d===void 0?!1:d).find(".dx-select-checkbox").dxCheckBox("option","value",d),t.setAria("selected",d,l)}})}),t._updateCheckboxesClass()):super._update(e)}_createTable(){const e=this,t=e.option("selection.mode"),n=super._createTable.apply(e,arguments);return t!=="none"&&((e.option(fs)==="onLongTap"||!pr)&&q.on(n,be(Ao.name,"dxDataGridRowsView"),".dx-data-row",e.createAction(s=>{GS(e.component,s.event),s.event.stopPropagation()})),q.on(n,"mousedown selectstart",e.createAction(s=>{const{event:o}=s;o.shiftKey&&o.preventDefault()}))),n}_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const{isSelected:n}=e;n&&t.addClass("dx-selection"),this.option(al)!=="none"&&this.setAria("selected",n,t)}return t}_rowClickForTreeList(e){super._rowClick(e)}_rowClick(e){const t=this,n=e.event,s=R(n.target).closest(".dx-selection-disabled").length;t.isClickableElement(R(n.target))||(!s&&(t.option(al)!=="multiple"||t.option(fs)!=="always")&&t._selectionController.changeItemSelection(e.rowIndex,{control:ki(n),shift:n.shiftKey})&&(n.preventDefault(),e.handled=!0),super._rowClick(e))}isClickableElement(e){return!!e.closest(".dx-command-select").length}_renderCore(e){const t=super._renderCore(e);return this._updateCheckboxesClass(),t}_updateCheckboxesClass(){const e=this.getTableElements(),t=this._selectionController.isSelectColumnVisible()&&!this._selectionController.isSelectionWithCheckboxes();ie(e,(n,s)=>{R(s).toggleClass(b8,t)})}},T8={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",deferred:!1,maxFilterLengthInRequest:1500,alwaysSelectByShift:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:x8},extenders:{controllers:{data:w8,contextMenu:S8},views:{columnHeadersView:E8,rowsView:I8}}};He.registerModule("selection",T8);function D8(i,e){var t;return(((t=i.getRootNode)===null||t===void 0?void 0:t.call(i))??document).querySelector(e)}const ov="dx-invalid-message-auto",rv="dx-validation-target";let lg=class extends dd{getProps(){const e=super.getProps();return e.onFocusIn=()=>{if(this.option("validationMessageMode")==="auto"){const n=R(D8(this.element(),".dx-invalid-message.dx-overlay-wrapper"));n==null||n.removeClass(ov);const s=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{n==null||n.addClass(ov)},s)}},e.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=Tt(),di(this.$element()[0],rv,this)}_render(){var e;(e=this.option("_onMarkupRendered"))===null||e===void 0||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(Ft.initValidationOptions(e))}_getDefaultOptions(){return Y(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,t){const n=Y({},e.option()),s=()=>this._silent(t,n);s(),e.on("optionChanged",s)}_raiseValidation(e,t){const n=!U(e)&&!U(t);e!==t&&!n&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,t){var n;(n=this._valueChangeAction)===null||n===void 0||n.call(this,{element:this.$element(),previousValue:t,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){const{name:t,previousValue:n,value:s}=e;switch(t&&this._getActionConfigs()[t]!==void 0&&this._addAction(t),t){case"value":this._raiseValidation(s,n),this.option("isDirty",this._initialValue!==s),this._raiseValueChangeAction(s,n);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Ft.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){const{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=e),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),di(this.element(),rv,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}};const A8=ns.isEditor,US=i=>A8(i)||i instanceof lg;lg.isEditor=US;ns.isEditor=US;let k8=class extends lg{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const e=super.getProps();return e.value!==null&&(e.value=!!e.value),e}};const O8=["dataSource","selectedRowKeys"],R8={integrationOptions:!0};function Fa(i,e,t){return{path:i,value:e,previousValue:t}}function av(i,e,t,n,s,o){if(R8[n])return;const r=kn(e),a=kn(t);if(e!==t)if(r!==a)i.push(Fa(n,t,e));else if(r==="object")if(!ht(t))i.push(Fa(n,t,e));else{const l=lv(e,t,s,o);i.push(...l.map(d=>ve({},d,{path:`${n}.${d.path}`})))}else if(r==="array")if(o.some(d=>s.includes(d))&&e!==t)i.push(Fa(n,t,e));else if(e.length!==t.length)i.push(Fa(n,t,e));else{const d=lv(e,t,s,o);[].push.apply(i,d.map(c=>ve({},c,{path:`${n}${c.path}`})))}else i.push(Fa(n,t,e))}const qS=i=>(e,t,n,s)=>{const o=[],r=Array.isArray(e)?a=>{av(o,e[a],t[a],`[${a}]`,`${n}.${a}`,s)}:a=>{av(o,e[a],t[a],a,`${n}.${a}`,s)};return i(e).forEach(r),Object.keys(t).filter(a=>!Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==t[a]).forEach(a=>{o.push({path:a,value:t[a],previousValue:e[a]})}),o},lv=qS(i=>Object.keys(i)),M8={key:!0,ref:!0,children:!0,style:!0},P8=qS(i=>Object.keys(i).filter(e=>!M8[e]));function B8(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O8;return P8(i,e,"",t)}const F8=["valueChange"],V8=["componentProps","componentType","templateNames"],YS=i=>Object.keys(i).reduce((e,t)=>(i[t]!==void 0&&(e[t]=i[t]),e),{}),N8=i=>{let{props:{componentProps:{className:e}},restAttributes:t,widgetRef:n}=i;return YS(bi(1,"div",e,null,1,ve({},t),null,n))},L8={};class Lu extends to{get config(){return this.context[ji.id]?this.context[ji.id]:ji.defaultValue}constructor(e){super(e),this.state={},this.widgetRef=Ni(),this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}createEffects(){return[new ai(this.setupWidget,[]),new ai(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var e;(e=this._effects[1])===null||e===void 0||e.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){const e=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=e,()=>{e.dispose(),this.instance=null}}updateWidget(){const e=this.getInstance();if(!e)return;const t=B8(this.prevProps||{},this.properties);t.length&&(e.beginUpdate(),t.forEach(n=>{let{path:s,value:o}=n;e.option(s,o)}),e.endUpdate()),this.prevProps=this.properties}get properties(){var e;const t=YS(this.props.componentProps),{valueChange:n}=t,s=ei(t,F8),o=ve({rtlEnabled:!!((e=this.config)!==null&&e!==void 0&&e.rtlEnabled),isRenovated:!0},s);return n&&(o.onValueChanged=a=>{let{value:l}=a;return n(l)}),this.props.templateNames.forEach(a=>{xB(a,o)&&(o[a]=(l,d,c)=>{CB(this.props.componentProps[a],{item:l,index:d,container:c})})}),o}get restAttributes(){const e=this.props;return ei(e,V8)}getInstance(){return this.instance}render(){const e=this.props;return N8({props:ve({},e),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}Lu.defaultProps=L8;const $8=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],H8=i=>{let{componentProps:e,restAttributes:t}=i;return xn(Jt(2,Lu,ve({componentType:jm,componentProps:e,templateNames:[]},t)))},z8=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Fu),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));class XS extends Mn{constructor(e){super(e),this.state={}}get componentProps(){return this.props}get restAttributes(){const e=this.props;return ei(e,$8)}render(){const e=this.props;return H8({props:ve({},e),componentProps:this.componentProps,restAttributes:this.restAttributes})}}XS.defaultProps=z8;const W8=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],j8=i=>{const{classes:e,isValid:t,readOnly:n}=i,s={"dx-state-readonly":!!n,"dx-invalid":!t,[String(e)]:!!e};return zn(s)},K8=i=>{const{aria:e,cssClasses:t,isValidationMessageVisible:n,onFocusIn:s,props:{accessKey:o,activeStateEnabled:r,children:a,className:l,disabled:d,focusStateEnabled:c,height:h,hint:u,hoverStateEnabled:p,onClick:f,onKeyDown:g,rtlEnabled:m,tabIndex:b,validationMessageMode:_,validationMessagePosition:w,visible:E,width:D},restAttributes:B,rootElementRef:$,validationErrors:F,validationMessageGuid:N,validationMessageTarget:L,widgetRef:j}=i;return xn(Jt(2,Vu,ve({rootElementRef:$,aria:e,classes:t,activeStateEnabled:r,focusStateEnabled:c,hoverStateEnabled:p,accessKey:o,className:l,rtlEnabled:m,hint:u,disabled:d,height:h,width:D,onFocusIn:s,onClick:f,onKeyDown:g,tabIndex:b,visible:E},B,{children:eo([a,n&&Jt(2,XS,{validationErrors:F,mode:_,positionSide:w,rtlEnabled:m,target:L,boundary:L,visualContainer:L,contentId:N})],0)}),null,j))},xi=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Fu),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),G8={get readOnly(){return xi.readOnly},get name(){return xi.name},get validationError(){return xi.validationError},get validationErrors(){return xi.validationErrors},get validationMessageMode(){return xi.validationMessageMode},get validationMessagePosition(){return xi.validationMessagePosition},get validationStatus(){return xi.validationStatus},get isValid(){return xi.isValid},get isDirty(){return xi.isDirty},get inputAttr(){return xi.inputAttr},get defaultValue(){return xi.defaultValue},get valueChange(){return xi.valueChange},get className(){return xi.className},get activeStateEnabled(){return xi.activeStateEnabled},get disabled(){return xi.disabled},get focusStateEnabled(){return xi.focusStateEnabled},get hoverStateEnabled(){return xi.hoverStateEnabled},get tabIndex(){return xi.tabIndex},get visible(){return xi.visible},get aria(){return Yc.aria},get classes(){return Yc.classes}};class ZS extends ad{constructor(e){super(e),this.widgetRef=Ni(),this.rootElementRef=Ni(),this.__getterCache={},this.state={validationMessageGuid:`dx-${new hi}`,isValidationMessageVisible:!1,value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new ai(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),ld()]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(e=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(e){const{onFocusIn:t}=this.props;t==null||t(e)}get cssClasses(){return`${j8(ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:e,validationStatus:t}=this.props,n=this.validationErrors??[];return!(e&&t!=="invalid")&&n.length>0}get aria(){const{isValid:e,readOnly:t}=this.props,n={readonly:t?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(n.describedBy=this.state.validationMessageGuid),ve({},n,this.props.aria)}get validationErrors(){return this.__getterCache.validationErrors!==void 0?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:e,validationErrors:t}=this.props;let n=t&&[...t];return!n&&e&&(n=[ve({},e)]),n})()}get validationMessageTarget(){var e;return(e=this.rootElementRef)===null||e===void 0?void 0:e.current}get restAttributes(){const e=ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value});return ei(e,W8)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e,t,n){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){const e=this.props;return K8({props:ve({},e,{value:this.props.value!==void 0?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}ZS.defaultProps=G8;const U8=["size"],q8=i=>{const{cssStyles:e,elementRef:t}=i;return bi(1,"span","dx-checkbox-icon",null,1,{style:Qm(e)},null,t)},Y8={};class JS extends Mn{constructor(e){super(e),this.state={},this.elementRef=Ni(),this.__getterCache={}}get cssStyles(){return this.__getterCache.cssStyles!==void 0?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:e}=this.props;return{fontSize:gl("fontSize",e)}})()}get restAttributes(){const e=this.props;return ei(e,U8)}componentWillUpdate(e,t,n){this.props.size!==e.size&&(this.__getterCache.cssStyles=void 0)}render(){const e=this.props;return q8({props:ve({},e),elementRef:this.elementRef,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}JS.defaultProps=Y8;const X8=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Z8=i=>{const{text:e,value:t}=i,n=t;return zn({"dx-checkbox":!0,"dx-checkbox-checked":n===!0,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":n===null})},J8=i=>{const{aria:e,cssClasses:t,editorRef:n,keyDown:s,onWidgetClick:o,props:{accessKey:r,activeStateEnabled:a,className:l,disabled:d,focusStateEnabled:c,height:h,hint:u,hoverStateEnabled:p,iconSize:f,isValid:g,name:m,onFocusIn:b,readOnly:_,rtlEnabled:w,tabIndex:E,text:D,validationError:B,validationErrors:$,validationMessageMode:F,validationMessagePosition:N,validationStatus:L,value:j,visible:H,width:I},restAttributes:k}=i;return xn(Jt(2,ZS,ve({aria:e,classes:t,onClick:o,onKeyDown:s,accessKey:r,activeStateEnabled:a,focusStateEnabled:c,hoverStateEnabled:p,className:l,disabled:d,readOnly:_,hint:u,height:h,width:I,rtlEnabled:w,tabIndex:E,visible:H,validationError:B,validationErrors:$,validationMessageMode:F,validationMessagePosition:N,validationStatus:L,isValid:g,onFocusIn:b},k,{children:eo([xn(bi(64,"input",null,null,1,ve({type:"hidden",value:`${j}`},m&&{name:m}))),bi(1,"div","dx-checkbox-container",[Jt(2,JS,{size:f,isChecked:j===!0}),D&&bi(1,"span","dx-checkbox-text",D,0)],0)],4)}),null,n))},Ti=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(xi),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return Re.real().deviceType==="desktop"&&!Re.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),Q8={get text(){return Ti.text},get enableThreeStateBehavior(){return Ti.enableThreeStateBehavior},get activeStateEnabled(){return Ti.activeStateEnabled},get hoverStateEnabled(){return Ti.hoverStateEnabled},get focusStateEnabled(){return Ti.focusStateEnabled},get defaultValue(){return Ti.defaultValue},get valueChange(){return Ti.valueChange},get readOnly(){return Ti.readOnly},get name(){return Ti.name},get validationError(){return Ti.validationError},get validationErrors(){return Ti.validationErrors},get validationMessageMode(){return Ti.validationMessageMode},get validationMessagePosition(){return Ti.validationMessagePosition},get validationStatus(){return Ti.validationStatus},get isValid(){return Ti.isValid},get isDirty(){return Ti.isDirty},get inputAttr(){return Ti.inputAttr},get className(){return Ti.className},get disabled(){return Ti.disabled},get tabIndex(){return Ti.tabIndex},get visible(){return Ti.visible},get aria(){return Yc.aria}};let Jc=class extends ad{constructor(e){super(e),this.editorRef=Ni(),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[ld()]}onWidgetClick(e){const{enableThreeStateBehavior:t,readOnly:n,saveValueChangeEvent:s}=this.props;if(!n)if(s==null||s(e),t){let o;this.setState(r=>(o=(this.props.value!==void 0?this.props.value:r.value)===null||((this.props.value!==void 0?this.props.value:r.value)?!1:null),{value:o})),this.props.valueChange(o)}else{let o;this.setState(r=>(o=!((this.props.value!==void 0?this.props.value:r.value)??!1),{value:o})),this.props.valueChange(o)}}keyDown(e){const{onKeyDown:t}=this.props,{keyName:n,originalEvent:s,which:o}=e,r=t==null?void 0:t(e);if(r!=null&&r.cancel)return r;(n==="space"||o==="space")&&(s.preventDefault(),this.onWidgetClick(s))}get cssClasses(){return Z8(ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}get aria(){const e=(this.props.value!==void 0?this.props.value:this.state.value)===!0,n={role:"checkbox",checked:(this.props.value!==void 0?this.props.value:this.state.value)===null?"mixed":`${e}`};return ve({},n,this.props.aria)}get restAttributes(){const e=ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value});return ei(e,X8)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){const e=this.props;return J8({props:ve({},e,{value:this.props.value!==void 0?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}};function eV(i){const e=["value"];return Object.keys(i).reduce((t,n)=>{const s=i[n],o=e.some(r=>r===n)?"default"+n.charAt(0).toUpperCase()+n.slice(1):n;return t[o]=s,t},{})}Jc.defaultProps=Q8;const dv=[];function tV(i){dv.push(i),Jc.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Jc.defaultProps),Object.getOwnPropertyDescriptors(eV(pa(dv)))))}class _r extends k8{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.focus(...arguments)}blur(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Jc}}wt("dxCheckBox",_r);_r.defaultOptions=tV;const Pn="dx-treeview",on=`${Pn}-node`,Os=`${on}-container`,$h=`${on}-loadindicator`,co=`${on}-container-opened`,Va=`${on}-is-leaf`,qi=`${Pn}-item`,iV=`${qi}-with-checkbox`,nV=`${qi}-with-custom-expander-icon`,sV=`${Pn}-custom-expander-icon-item-container`,oV=`${qi}-without-checkbox`,rV=`${qi}-data`,Na=`${Pn}-toggle-item-visibility`,Hh=`${Pn}-custom-collapse-icon`,zh=`${Pn}-custom-expand-icon`,aV=`${Pn}-loadindicator`,lV=`${Pn}-loadindicator-wrapper`,cv=`${Pn}-toggle-item-visibility-opened`,Hd=`${Pn}-select-all-item`,zd="data-item-id",dV=`${Pn}-root-node`,cV=`${Pn}-expander-icon-stub`,uV=kS.inherit({_supportedKeys(i){const e=s=>{const o=R(this.option("focusedElement"));if(!o.length)return;s.target=o,s.currentTarget=o,this._itemClickHandler(s,o.children(`.${qi}`)),this._getEventNameByOption(this.option("expandEvent"))===be(kt,"dxTreeView_expand")&&this._expandEventHandler(s)},t=s=>{s.preventDefault();const o=R(this.option("focusedElement")),r=this._getCheckBoxInstance(o);if(!r.option("disabled")){const a=r.option("value");this._updateItemSelection(!a,o.find(`.${qi}`).get(0),!0)}},n=function(s,o){if(!this.option("expandAllEnabled"))return;o.preventDefault();const r=R(this.option("focusedElement"));if(!r.length)return;const a=this._getItemData(r.find(`.${qi}`));this._toggleExpandedNestedItems([a],s)};return Y(this.callBase(),{enter:this._showCheckboxes()?t:e,space:this._showCheckboxes()?t:e,asterisk:n.bind(this,!0),minus:n.bind(this,!1)})},_toggleExpandedNestedItems(i,e){if(i)for(let t=0,n=i.length;t<n;t++){const s=i[t],o=this._dataAdapter.getNodeByItem(s);this._toggleExpandedState(o,e),this._toggleExpandedNestedItems(s.items,e)}},_getNodeElement(i,e){const t=this._encodeString(i.internalFields.key);if(e)return e.$nodeByKey||(e.$nodeByKey={},this.$element().find(`.${on}`).each(function(){const s=R(this),o=s.attr(zd);e.$nodeByKey[o]=s})),e.$nodeByKey[t]||R();const n=this.$element().get(0).querySelector(`[${zd}="${t}"]`);return R(n)},_activeStateUnit:`.${qi}`,_widgetClass:()=>Pn,_getDefaultOptions(){const i=Y(this.callBase(),{animationEnabled:!0,dataStructure:"tree",deferRendering:!0,expandAllEnabled:!1,hasItemsExpr:"hasItems",selectNodesRecursive:!0,expandNodesRecursive:!0,showCheckBoxesMode:"none",expandIcon:null,collapseIcon:null,selectAllText:re.format("dxList-selectAll"),onItemSelectionChanged:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",useNativeScrolling:!0,virtualModeEnabled:!1,rootValue:0,focusStateEnabled:!1,selectionMode:"multiple",expandEvent:"dblclick",selectByClick:!1,createChildren:null,onSelectAllValueChanged:null,_supportItemUrl:!1});return Y(!0,i,{integrationOptions:{useDeferUpdateForTemplates:!1}})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>!fr,options:{useNativeScrolling:!1}}])},_initSelectedItems:ue,_syncSelectionOptions:wC,_fireSelectionChanged(){const i=this._selectionChangePromise;De(i).done(()=>{this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()})},_createSelectAllValueChangedAction(){this._selectAllValueChangedAction=this._createActionByOption("onSelectAllValueChanged",{excludeValidators:["disabled","readOnly"]})},_fireSelectAllValueChanged(i){this._selectAllValueChangedAction({value:i})},_checkBoxModeChange(i,e){const t=this.option("searchEnabled"),n=this._selectAllEnabled(e),s=this._itemContainer(t,n);if(this._detachClickEvent(s),this._detachExpandEvent(s),e==="none"||i==="none")return;const o=this._$selectAllItem&&this._$selectAllItem.length;switch(i){case"selectAll":o||(this._createSelectAllValueChangedAction(),this._renderSelectAllItem());break;case"normal":o&&(this._$selectAllItem.remove(),delete this._$selectAllItem)}},_removeSelection(){const i=this;ie(this._dataAdapter.getFullData(),(e,t)=>{i._hasChildren(t)&&i._dataAdapter.toggleSelection(t.internalFields.key,!1,!0)})},_optionChanged(i){const{name:e,value:t,previousValue:n}=i;switch(e){case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",t);break;case"showCheckBoxesMode":this._checkBoxModeChange(t,n),this._invalidate();break;case"scrollDirection":this.getScrollable().option("direction",t);break;case"useNativeScrolling":this.getScrollable().option("useNative",t);break;case"items":delete this._$selectAllItem,this.callBase(i);break;case"dataSource":this.callBase(i),this._initDataAdapter(),this._filter={};break;case"hasItemsExpr":this._initAccessors(),this.repaint();break;case"expandEvent":this._attachExpandEvent();break;case"deferRendering":case"dataStructure":case"rootValue":case"createChildren":case"expandNodesRecursive":case"onItemSelectionChanged":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":case"animationEnabled":case"virtualModeEnabled":case"selectByClick":case"_supportItemUrl":break;case"selectionMode":this._initDataAdapter(),this.callBase(i);break;case"onSelectAllValueChanged":this._createSelectAllValueChangedAction();break;case"selectNodesRecursive":this._dataAdapter.setOption("recursiveSelection",i.value),this.repaint();break;case"expandIcon":case"collapseIcon":this.repaint();break;default:this.callBase(i)}},_initDataSource(){this._useCustomChildrenLoader()?this._loadChildrenByCustomLoader(null).done(i=>{i&&i.length&&this.option("items",i)}):(this.callBase(),this._isVirtualMode()&&this._initVirtualMode())},_initVirtualMode(){const i=this._filter;i.custom||(i.custom=this._dataSource.filter()),i.internal||(i.internal=[this.option("parentIdExpr"),this.option("rootValue")])},_useCustomChildrenLoader(){return Ee(this.option("createChildren"))&&this._isDataStructurePlain()},_loadChildrenByCustomLoader(i){const e=this.option("createChildren").call(this,i);return Array.isArray(e)?ae().resolve(e).promise():e&&Ee(e.then)?Pi(e):ae().resolve([]).promise()},_combineFilter(){return!this._filter.custom||!this._filter.custom.length?this._filter.internal:[this._filter.custom,this._filter.internal]},_dataSourceLoadErrorHandler(){this._renderEmptyMessage()},_init(){this._filter={},this.callBase(),this._initStoreChangeHandlers()},_dataSourceChangedHandler(i){const e=this.option("items");this._initialized&&this._isVirtualMode()&&e.length||this.option("items",i)},_removeTreeViewLoadIndicator(){this._treeViewLoadIndicator&&(this._treeViewLoadIndicator.remove(),this._treeViewLoadIndicator=null)},_createTreeViewLoadIndicator(){return this._treeViewLoadIndicator=R("<div>").addClass(aV),this._createComponent(this._treeViewLoadIndicator,An,{}),this._treeViewLoadIndicator},_dataSourceLoadingChangedHandler(i){let e;if(this._isVirtualMode()&&(e=this._combineFilter(),this._dataSource.filter(e)),i&&!this._dataSource.isLoaded()){this.option("items",[]);const t=R("<div>").addClass(lV);this._createTreeViewLoadIndicator().appendTo(t),this.itemsContainer().append(t),this._isVirtualMode()&&this._dataSource.filter()!==e&&this._dataSource.filter([])}else this._removeTreeViewLoadIndicator()},_initStoreChangeHandlers(){this.option("dataStructure")==="plain"&&this._dataSource&&this._dataSource.store().on("inserted",i=>{this.option().items=this.option("items").concat(i),this._dataAdapter.addItem(i),this._dataAdapter.isFiltered(i)&&this._updateLevel(this._parentIdGetter(i))}).on("removed",i=>{const e=this._dataAdapter.getNodeByKey(i);U(e)&&(this.option("items")[this._dataAdapter.getIndexByKey(e.internalFields.key)]=0,this._markChildrenItemsToRemove(e),this._removeItems(),this._dataAdapter.removeItem(i),this._updateLevel(this._parentIdGetter(e)))})},_markChildrenItemsToRemove(i){const e=i.internalFields.childrenKeys;ie(e,(t,n)=>{this.option("items")[this._dataAdapter.getIndexByKey(n)]=0,this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(n))})},_removeItems(){const i=Y(!0,[],this.option("items"));let e=0;ie(i,(t,n)=>{n||(this.option("items").splice(t-e,1),e++)})},_updateLevel(i){const e=this._getContainerByParentKey(i);this._renderItems(e,this._dataAdapter.getChildrenNodes(i))},_getOldContainer(i){if(i.length)return i.children(`.${Os}`);const e=this.getScrollable();return e?R(e.content()).children():R()},_getContainerByParentKey(i){const e=this._dataAdapter.getNodeByKey(i),t=e?this._getNodeElement(e):[];this._getOldContainer(t).remove();const n=this._renderNodeContainer(t);if(this._isRootLevel(i)){const s=this.getScrollable();s||this._renderScrollableContainer(),R(s.content()).append(n)}return n},_isRootLevel(i){return i===this.option("rootValue")},_getAccessors(){const i=this.callBase();return i.push("hasItems"),i},_getDataAdapterOptions(){var i,e;return{rootValue:this.option("rootValue"),multipleSelection:!this._isSingleSelection(),recursiveSelection:this._isRecursiveSelection(),recursiveExpansion:this.option("expandNodesRecursive"),selectionRequired:this.option("selectionRequired"),dataType:this.option("dataStructure"),sort:this._dataSource&&this._dataSource.sort(),langParams:(i=this._dataSource)===null||i===void 0||(e=i.loadOptions)===null||e===void 0||(e=e.call(i))===null||e===void 0?void 0:e.langParams}},_initMarkup(){this._renderScrollableContainer(),this._renderEmptyMessage(this._dataAdapter.getRootNodes()),this.callBase(),this._setAriaRole()},_setAriaRole(){const{items:i}=this.option();i!=null&&i.length&&this.setAria({role:"tree"})},_renderContentImpl(){const i=this._renderNodeContainer();R(this.getScrollable().content()).append(i),!(!this.option("items")||!this.option("items").length)&&(this._renderItems(i,this._dataAdapter.getRootNodes()),this._attachExpandEvent(),this._selectAllEnabled()&&(this._createSelectAllValueChangedAction(),this._renderSelectAllItem(i)))},_isVirtualMode(){return this.option("virtualModeEnabled")&&this._isDataStructurePlain()&&!!this.option("dataSource")},_isDataStructurePlain(){return this.option("dataStructure")==="plain"},_fireContentReadyAction(){const i=this.getDataSource(),e=i&&!i.isLoaded()||this._skipContentReadyAndItemExpanded,t=this.getScrollable();t&&qe()&&t.update(),e||this.callBase(),t&&qe()&&t.update()},_renderScrollableContainer(){this._scrollable=this._createComponent(R("<div>").appendTo(this.$element()),vn,{useNative:this.option("useNativeScrolling"),direction:this.option("scrollDirection"),useKeyboard:!1})},_renderNodeContainer(i){const e=R("<ul>").addClass(Os);if(this.setAria("role","group",e),i&&i.length){const t=this._getItemData(i.children(`.${qi}`));this._expandedGetter(t)&&e.addClass(co),e.appendTo(i)}return e},_createDOMElement(i,e){var t;const n=R("<li>").addClass(on).attr(zd,this._encodeString(e.internalFields.key)).prependTo(i),s={role:"treeitem",label:this._displayGetter(e.internalFields.item)||"",level:this._getLevel(i)};return!!(e!=null&&(t=e.internalFields)!==null&&t!==void 0&&(t=t.childrenKeys)!==null&&t!==void 0&&t.length)&&(s.expanded=e.internalFields.expanded||!1),this.setAria(s,n),n},_getLevel(i){const e=i.parent();return e.hasClass("dx-scrollable-content")?1:parseInt(e.attr("aria-level"))+1},_showCheckboxes(){return this.option("showCheckBoxesMode")!=="none"},_hasCustomExpanderIcons(){return this.option("expandIcon")||this.option("collapseIcon")},_selectAllEnabled(i){return(i??this.option("showCheckBoxesMode"))==="selectAll"&&!this._isSingleSelection()},_renderItems(i,e){const t=e.length-1;for(let n=t;n>=0;n--)this._renderItem(n,e[n],i);this._renderedItemsCount+=e.length},_renderItem(i,e,t){const n=this._createDOMElement(t,e),s=e.internalFields,o=this._showCheckboxes();n.addClass(o?iV:oV),n.toggleClass("dx-state-invisible",s.item.visible===!1),this._hasCustomExpanderIcons()&&(n.addClass(nV),t.addClass(sV)),this.setAria("selected",s.selected,n),this._toggleSelectedClass(n,s.selected),s.disabled&&this.setAria("disabled",s.disabled,n),this.callBase(this._renderedItemsCount+i,s.item,n),this._getNode(e.internalFields.parentKey)||n.addClass(dV),s.item.visible!==!1&&this._renderChildren(n,e)},_setAriaSelectionAttribute:ue,_renderChildren(i,e){if(!this._hasChildren(e)){this._addLeafClass(i),R("<div>").addClass(cV).appendTo(this._getItem(i));return}this._hasCustomExpanderIcons()?this._renderCustomExpanderIcons(i,e):this._renderDefaultExpanderIcons(i,e),this._shouldRenderSublevel(e.internalFields.expanded)&&this._loadSublevel(e).done(t=>{this._renderSublevel(i,this._getActualNode(e),t)})},_shouldRenderSublevel(i){return i||!this.option("deferRendering")},_getActualNode(i){return this._dataAdapter.getNodeByKey(i.internalFields.key)},_hasChildren(i){return this._isVirtualMode()||this._useCustomChildrenLoader()?this._hasItemsGetter(i.internalFields.item)!==!1:this.callBase(i)},_loadSublevel(i){const e=ae(),t=this._getChildNodes(i);return t.length?e.resolve(t):this._loadNestedItems(i).done(n=>{e.resolve(this._dataAdapter.getNodesByItems(n))}),e.promise()},_getItemExtraPropNames:()=>["url","linkAttr"],_addContent(i,e){const{html:t,url:n}=e;if(this.option("_supportItemUrl")&&n){i.html(t);const s=this._getLinkContainer(this._getIconContainer(e),this._getTextContainer(e),e);i.append(s)}else this.callBase(i,e)},_postprocessRenderItem(i){const{itemData:e,itemElement:t}=i;this._showCheckboxes()&&this._renderCheckBox(t,this._getNode(e)),this.callBase(i)},_renderSublevel(i,e,t){const n=this._renderNodeContainer(i,e),s=t.filter(o=>e.internalFields.childrenKeys.indexOf(o.internalFields.key)!==-1);if(this._renderItems(n,s),s.length&&!e.internalFields.selected){const o=s[0];this._updateParentsState(o,this._getNodeElement(o))}this._normalizeIconState(i,s.length),e.internalFields.expanded&&n.addClass(co)},_executeItemRenderAction(i,e,t){const n=this._getNode(t);this._getItemRenderAction()({itemElement:t,itemIndex:i,itemData:e,node:this._dataAdapter.getPublicNode(n)})},_addLeafClass(i){i.addClass(Va)},_expandEventHandler(i){R(i.currentTarget.parentNode).hasClass(Va)||this._toggleExpandedState(i.currentTarget,void 0,i)},_attachExpandEvent(){const i=this._getEventNameByOption(this.option("expandEvent")),e=this._itemContainer();this._detachExpandEvent(e),q.on(e,i,this._itemSelector(),this._expandEventHandler.bind(this))},_detachExpandEvent(i){q.off(i,".dxTreeView_expand",this._itemSelector())},_getEventNameByOption(i){return be(i==="click"?kt:$l,"dxTreeView_expand")},_getNode(i){if(!U(i))return null;if(i.internalFields)return i;if(Qa(i))return this._dataAdapter.getNodeByKey(i);const e=R(i).get(0);return e?_e.isElementNode(e)?this._getNodeByElement(e):this._dataAdapter.getNodeByItem(e):null},_getNodeByElement(i){const e=R(i).closest(`.${on}`),t=this._decodeString(e.attr(zd));return this._dataAdapter.getNodeByKey(t)},_toggleExpandedState(i,e,t){const n=this._getNode(i);if(!n||n.internalFields.disabled)return ae().reject().promise();const s=n.internalFields.expanded;if(s===e)return ae().resolve().promise();if(this._hasChildren(n)){const o=this._getNodeElement(n);if(o.find(`.${$h}:not(.dx-state-invisible)`).length)return ae().reject().promise();!s&&!this._nodeHasRenderedChildren(o)&&this._createLoadIndicator(o)}return U(e)||(e=!s),this._dataAdapter.toggleExpansion(n.internalFields.key,e),this._updateExpandedItemsUI(n,e,t)},_nodeHasRenderedChildren(i){return i.children(`.${Os}`).not(":empty").length},_getItem:i=>i.children(`.${qi}`).eq(0),_createLoadIndicator(i){const e=this._getItem(i);this._createComponent(R("<div>").addClass($h),An,{}).$element().appendTo(e),e.children(`.${Na},.${zh}`).hide()},_renderExpanderIcon(i,e,t,n){t.appendTo(this._getItem(i)),t.addClass(n),e.internalFields.disabled&&t.addClass("dx-state-disabled"),this._renderToggleItemVisibilityIconClick(t,e)},_renderDefaultExpanderIcons(i,e){const t=this._getItem(i),n=R("<div>").addClass(Na).appendTo(t);e.internalFields.expanded&&(n.addClass(cv),i.parent().addClass(co)),e.internalFields.disabled&&n.addClass("dx-state-disabled"),this._renderToggleItemVisibilityIconClick(n,e)},_renderCustomExpanderIcons(i,e){const{expandIcon:t,collapseIcon:n}=this.option(),s=Ys(t??n),o=Ys(n??t);this._renderExpanderIcon(i,e,s,zh),this._renderExpanderIcon(i,e,o,Hh);const r=e.internalFields.expanded;r&&i.parent().addClass(co),this._toggleCustomExpanderIcons(s,o,r)},_renderToggleItemVisibilityIconClick(i,e){const t=be(kt,this.NAME);q.off(i,t),q.on(i,t,n=>(this._toggleExpandedState(e.internalFields.key,void 0,n),!1))},_toggleCustomExpanderIcons(i,e,t){e.toggle(t),i.toggle(!t)},_updateExpandedItemsUI(i,e,t){const n=this._getNodeElement(i),s=!n.length||e&&n.is(":hidden");if(this.option("expandNodesRecursive")&&s){const l=this._getNode(i.internalFields.parentKey);l&&this._updateExpandedItemsUI(l,e,t)}if(!this._hasCustomExpanderIcons())this._getItem(n).children(`.${Na}`).toggleClass(cv,e);else if(this._nodeHasRenderedChildren(n)){const l=this._getItem(n),d=l.children(`.${zh}`),c=l.children(`.${Hh}`);this._toggleCustomExpanderIcons(d,c,e)}const o=n.children(`.${Os}`),r=o.length>0,a=ae();return!e||r&&!o.is(":empty")?(this._animateNodeContainer(i,e,t,a),a.promise()):i.internalFields.childrenKeys.length===0&&(this._isVirtualMode()||this._useCustomChildrenLoader())?(this._loadNestedItemsWithUpdate(i,e,t,a),a.promise()):(this._renderSublevel(n,i,this._getChildNodes(i)),this._fireContentReadyAction(),this._animateNodeContainer(i,e,t,a),a.promise())},_loadNestedItemsWithUpdate(i,e,t,n){const s=this._getNodeElement(i);this._loadNestedItems(i).done(o=>{const r=this._getActualNode(i);if(this._renderSublevel(s,r,this._dataAdapter.getNodesByItems(o)),!o||!o.length){n.resolve();return}this._fireContentReadyAction(),this._animateNodeContainer(r,e,t,n)})},_loadNestedItems(i){if(this._useCustomChildrenLoader()){const e=this._dataAdapter.getPublicNode(i);return this._loadChildrenByCustomLoader(e).done(t=>{this._areNodesExists(t)||this._appendItems(t)})}return this._isVirtualMode()?(this._filter.internal=[this.option("parentIdExpr"),i.internalFields.key],this._dataSource.filter(this._combineFilter()),this._dataSource.load().done(e=>{this._areNodesExists(e)||this._appendItems(e)})):ae().resolve([]).promise()},_areNodesExists(i,e){const t=this.keyOf(i[0]),n=this._dataAdapter.getFullData();return!!this._dataAdapter.getNodeByKey(t,n)},_appendItems(i){this.option().items=this.option("items").concat(i),this._initDataAdapter()},_animateNodeContainer(i,e,t,n){const s=this._getNodeElement(i),o=s.children(`.${Os}`);i&&n&&o.length===0&&n.resolve(),o.addClass(co);const r=st(o);li.stop(o,!0),li.animate(o,{type:"custom",duration:this.option("animationEnabled")?400:0,from:{maxHeight:e?0:r},to:{maxHeight:e?r:0},complete:(function(){o.css("maxHeight","none"),o.toggleClass(co,e),this.setAria("expanded",e,s),this.getScrollable().update(),this._fireExpandedStateUpdatedEvent(e,i,t),n&&n.resolve()}).bind(this)})},_fireExpandedStateUpdatedEvent(i,e,t){if(!this._hasChildren(e)||this._skipContentReadyAndItemExpanded)return;const n=i?"onItemExpanded":"onItemCollapsed";if(U(t))this._itemDXEventHandler(t,n,{node:this._dataAdapter.getPublicNode(e)});else{const s=this._getNodeElement(e);this._itemEventHandler(s,n,{event:t,node:this._dataAdapter.getPublicNode(e)})}},_normalizeIconState(i,e){const t=i.find(`.${$h}`);if(t.length){var n;(n=An.getInstance(t))===null||n===void 0||n.option("visible",!1)}const o=this._getItem(i).children(`.${Hh},.${Na}`);if(e){o.show();return}o.removeClass(Na),i.addClass(Va)},_emptyMessageContainer(){const i=this.getScrollable();return i?R(i.content()):this.callBase()},_renderContent(){const i=this.option("items");i&&i.length&&(this._contentAlreadyRendered=!0),this.callBase()},_renderSelectAllItem(i){const{selectAllText:e,focusStateEnabled:t}=this.option();i=i||this.$element().find(`.${Os}`).first(),this._$selectAllItem=R("<div>").addClass(Hd);const n=this._dataAdapter.isAllSelected();this._createComponent(this._$selectAllItem,_r,{value:n,elementAttr:{"aria-label":"Select All"},text:e,focusStateEnabled:t,onValueChanged:this._onSelectAllCheckboxValueChanged.bind(this),onInitialized:s=>{let{component:o}=s;o.registerKeyHandler("enter",()=>{o.option("value",!o.option("value"))})}}),this._toggleSelectedClass(this._$selectAllItem,n),i.before(this._$selectAllItem)},_onSelectAllCheckboxValueChanged(i){this._toggleSelectAll(i),this._fireSelectAllValueChanged(i.value)},_toggleSelectAll(i){this._dataAdapter.toggleSelectAll(i.value),this._updateItemsUI(),this._fireSelectionChanged()},_renderCheckBox(i,e){const t=R("<div>").appendTo(i);this._createComponent(t,_r,{value:e.internalFields.selected,onValueChanged:this._changeCheckboxValue.bind(this),focusStateEnabled:!1,elementAttr:{"aria-label":re.format("CheckState")},disabled:this._disabledGetter(e)})},_toggleSelectedClass(i,e){i.toggleClass("dx-state-selected",!!e)},_toggleNodeDisabledState(i,e){const t=this._getNodeElement(i),n=t.find(`.${qi}`).eq(0);this._dataAdapter.toggleNodeDisabledState(i.internalFields.key,e),n.toggleClass("dx-state-disabled",!!e),this._showCheckboxes()&&this._getCheckBoxInstance(t).option("disabled",!!e)},_itemOptionChanged(i,e,t){const n=this._dataAdapter.getNodeByItem(i);e===this.option("disabledExpr")&&this._toggleNodeDisabledState(n,t)},_changeCheckboxValue(i){const e=R(i.element).closest(`.${on}`),t=this._getItem(e),n=this._getItemData(t),s=this._getNodeByElement(t),{value:o}=i;s&&s.internalFields.selected===o||this._updateItemSelection(o,n,i.event)},_isSingleSelection(){return this.option("selectionMode")==="single"},_isRecursiveSelection(){return this.option("selectNodesRecursive")&&this.option("selectionMode")!=="single"},_isLastSelectedBranch(i,e,t){const n=e.indexOf(i.key);return n>=0&&e.splice(n,1),t&&ie(i.children,(s,o)=>{this._isLastSelectedBranch(o,e,!0)}),i.parent&&this._isLastSelectedBranch(i.parent,e),e.length===0},_isLastRequired(i){const e=this.option("selectionRequired"),t=this._isSingleSelection(),n=this.getSelectedNodeKeys();if(e)return t?n.length===1:this._isLastSelectedBranch(i.internalFields.publicNode,n.slice(),!0)},_updateItemSelection(i,e,t){const n=this._getNode(e);if(!n||n.visible===!1)return!1;if(n.internalFields.selected===i)return!0;if(!i&&this._isLastRequired(n)){if(this._showCheckboxes()){const r=this._getNodeElement(n);this._getCheckBoxInstance(r).option("value",!0)}return!1}if(i&&this._isSingleSelection()){const r=this.getSelectedNodeKeys();ie(r,(a,l)=>{this._dataAdapter.toggleSelection(l,!1),this._updateItemsUI(),this._fireItemSelectionChanged(this._getNode(l))})}this._dataAdapter.toggleSelection(n.internalFields.key,i);const s=this._dataAdapter.isAllSelected(),o=this._selectAllEnabled()&&this._$selectAllItem.dxCheckBox("instance").option("value")!==s;return this._updateItemsUI(),this._fireItemSelectionChanged(n,t),this._fireSelectionChanged(),o&&this._fireSelectAllValueChanged(s),!0},_fireItemSelectionChanged(i,e){const t=e||this._findItemElementByItem(i.internalFields.item);(e?this._itemDXEventHandler:this._itemEventHandler).call(this,t,"onItemSelectionChanged",{node:this._dataAdapter.getPublicNode(i),itemData:i.internalFields.item})},_getCheckBoxInstance(i){return this._getItem(i).children(".dx-checkbox").dxCheckBox("instance")},_updateItemsUI(){const i={};if(ie(this._dataAdapter.getData(),(e,t)=>{const n=this._getNodeElement(t,i),s=t.internalFields.selected;n.length&&(this._toggleSelectedClass(n,s),this.setAria("selected",s,n),this._showCheckboxes()&&this._getCheckBoxInstance(n).option("value",s))}),this._selectAllEnabled()){const e=this._$selectAllItem.dxCheckBox("instance");e.option("onValueChanged",void 0),e.option("value",this._dataAdapter.isAllSelected()),e.option("onValueChanged",this._onSelectAllCheckboxValueChanged.bind(this))}},_updateParentsState(i,e){if(!e)return;const t=this._dataAdapter.getNodeByKey(i.internalFields.parentKey),n=R(e.parents(`.${on}`)[0]);if(this._showCheckboxes()){const s=t.internalFields.selected;this._getCheckBoxInstance(n).option("value",s),this._toggleSelectedClass(n,s)}t.internalFields.parentKey!==this.option("rootValue")&&this._updateParentsState(t,n)},_itemEventHandlerImpl(i,e,t){const n=R(i).closest(`.${on}`).children(`.${qi}`);return e(Y(this._extendActionArgs(n),t))},_itemContextMenuHandler(i){this._createEventHandler("onItemContextMenu",i)},_itemHoldHandler(i){this._createEventHandler("onItemHold",i)},_createEventHandler(i,e){const t=this._getNodeByElement(e.currentTarget);this._itemDXEventHandler(e,i,{node:this._dataAdapter.getPublicNode(t)})},_itemClass:()=>qi,_itemDataKey:()=>rV,_attachClickEvent(){const i=this._itemContainer();this._detachClickEvent(i);const{clickEventNamespace:e,itemSelector:t,pointerDownEventNamespace:n,nodeSelector:s}=this._getItemClickEventData();q.on(i,e,t,o=>{R(o.target).hasClass("dx-checkbox-icon")||R(o.target).hasClass("dx-checkbox")||this._itemClickHandler(o,R(o.currentTarget))}),q.on(i,n,s,o=>{this._itemPointerDownHandler(o)})},_detachClickEvent(i){const{clickEventNamespace:e,itemSelector:t,pointerDownEventNamespace:n,nodeSelector:s}=this._getItemClickEventData();q.off(i,e,t),q.off(i,n,s)},_getItemClickEventData(){const i=`.${this._itemClass()}`,e=`.${on}, .${Hd}`,t=be(kt,this.NAME),n=be(Ct.down,this.NAME);return{clickEventNamespace:t,itemSelector:i,pointerDownEventNamespace:n,nodeSelector:e}},_itemClick(i){const e=i.args[0],n=(e.event.target[0]||e.event.target).getElementsByClassName("dx-item-url")[0];e.itemData.url&&n&&n.click()},_itemClickHandler(i,e){const t=this._getItemData(e),n=this._getNodeByElement(e);this._itemDXEventHandler(i,"onItemClick",{node:this._dataAdapter.getPublicNode(n)},{beforeExecute:this._itemClick}),this.option("selectByClick")&&!i.isDefaultPrevented()&&this._updateItemSelection(!n.internalFields.selected,t,i)},_updateSelectionToFirstItem(i,e){let t=e;for(;t>=0;){const n=R(i[t]);this._updateItemSelection(!0,n.find(`.${qi}`).get(0)),t--}},_updateSelectionToLastItem(i,e){const{length:t}=i;let n=e;for(;n<t;){const s=R(i[n]);this._updateItemSelection(!0,s.find(`.${qi}`).get(0)),n++}},focus(){if(this._selectAllEnabled()){q.trigger(this._$selectAllItem,"focus");return}this.callBase()},_focusInHandler(i){this._updateFocusState(i,!0);const e=R(i.target).hasClass(Hd);if(e||this.option("focusedElement")){clearTimeout(this._setFocusedItemTimeout),this._setFocusedItemTimeout=setTimeout(()=>{const n=e?ze(this._$selectAllItem):R(this.option("focusedElement"));this._setFocusedItem(n)});return}const t=this._getActiveItem();this.option("focusedElement",ze(t.closest(`.${on}`)))},_itemPointerDownHandler(i){if(!this.option("focusStateEnabled"))return;const e=R(i.target).closest(`.${on}, .${Hd}`);if(!e.length)return;const t=e.hasClass("dx-state-disabled")?null:e;this.option("focusedElement",ze(t))},_findNonDisabledNodes:i=>i.not(function(){return R(this).children(`.${qi}`).hasClass("dx-state-disabled")}),_moveFocus(i,e){const t=this.option("rtlEnabled")?"right":"left",n=this.option("rtlEnabled")?"left":"right";this.$element().find(`.${Os}`).each(function(){li.stop(this,!0)});const s=this._nodeElements();if(!(!s||!s.length))switch(i){case"up":{const o=this._prevItem(s);this.option("focusedElement",ze(o));const r=this._getNodeItemElement(o);this.getScrollable().scrollToElement(r),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,r);break}case"down":{const o=this._nextItem(s);this.option("focusedElement",ze(o));const r=this._getNodeItemElement(o);this.getScrollable().scrollToElement(r),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,r);break}case"first":{const o=s.first();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToFirstItem(s,s.index(this._prevItem(s))),this.option("focusedElement",ze(o)),this.getScrollable().scrollToElement(this._getNodeItemElement(o));break}case"last":{const o=s.last();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToLastItem(s,s.index(this._nextItem(s))),this.option("focusedElement",ze(o)),this.getScrollable().scrollToElement(this._getNodeItemElement(o));break}case n:this._expandFocusedContainer();break;case t:this._collapseFocusedContainer();break;default:this.callBase.apply(this,arguments)}},_getNodeItemElement:i=>i.find(`.${qi}`).get(0),_nodeElements(){return this.$element().find(`.${on}`).not(":hidden")},_expandFocusedContainer(){const i=R(this.option("focusedElement"));if(!i.length||i.hasClass(Va))return;if(i.find(`.${Os}`).eq(0).hasClass(co)){const n=this._nextItem(this._findNonDisabledNodes(this._nodeElements()));this.option("focusedElement",ze(n)),this.getScrollable().scrollToElement(this._getNodeItemElement(n));return}const t=this._getNodeByElement(this._getItem(i));this._toggleExpandedState(t,!0)},_getClosestNonDisabledNode(i){do i=i.parent().closest(`.${on}`);while(i.children(".dx-treeview-item.dx-state-disabled").length);return i},_collapseFocusedContainer(){const i=R(this.option("focusedElement"));if(!i.length)return;const e=i.find(`.${Os}`).eq(0);if(!i.hasClass(Va)&&e.hasClass(co)){const t=this._getNodeByElement(this._getItem(i));this._toggleExpandedState(t,!1)}else{const t=this._getClosestNonDisabledNode(i);t.length&&this.option("focusedElement",ze(t)),this.getScrollable().scrollToElement(this._getNodeItemElement(t))}},_encodeString:i=>Ke(i)?encodeURI(i):i,_decodeString:i=>Ke(i)?decodeURI(i):i,getScrollable(){return this._scrollable},updateDimensions(){const i=ae(),e=this.getScrollable();return e?e.update().done(()=>{i.resolveWith(this)}):i.resolveWith(this),i.promise()},selectItem(i){return this._updateItemSelection(!0,i)},unselectItem(i){return this._updateItemSelection(!1,i)},expandItem(i){return this._toggleExpandedState(i,!0)},collapseItem(i){return this._toggleExpandedState(i,!1)},getNodes(){return this._dataAdapter.getTreeNodes()},getSelectedNodes(){return this.getSelectedNodeKeys().map(i=>{const e=this._dataAdapter.getNodeByKey(i);return this._dataAdapter.getPublicNode(e)})},getSelectedNodeKeys(){return this._dataAdapter.getSelectedNodesKeys()},selectAll(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!0):this._toggleSelectAll({value:!0})},unselectAll(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!1):this._toggleSelectAll({value:!1})},_allItemsExpandedHandler(){this._skipContentReadyAndItemExpanded=!1,this._fireContentReadyAction()},expandAll(){const i=this._dataAdapter.getData(),e=[];this._skipContentReadyAndItemExpanded=!0,i.forEach(t=>e.push(this._toggleExpandedState(t.internalFields.key,!0))),Promise.allSettled(e).then(()=>{var t;return(t=this._allItemsExpandedHandler)===null||t===void 0?void 0:t.call(this)})},collapseAll(){ie(this._dataAdapter.getExpandedNodesKeys(),(i,e)=>{this._toggleExpandedState(e,!1)})},scrollToItem(i){const e=this._getNode(i);if(!e)return ae().reject().promise();const t=[];let n=e.internalFields.publicNode.parent;for(;n!=null;)n.expanded||t.push(n.key),n=n.parent;const s=ae();return this._expandNodes(t.reverse()).always(()=>{const o=this._getNodeElement(e);o&&o.length?(this.scrollToElementTopLeft(o.get(0)),s.resolve()):s.reject()}),s.promise()},scrollToElementTopLeft(i){const e=this.getScrollable(),{scrollDirection:t,rtlEnabled:n}=this.option(),s={top:0,left:0},o=y1(x1,i);if(t!==Gc){const r=R(e.container()).get(0);s.left=n?o.left+i.offsetWidth-r.clientWidth:o.left}t!==C1&&(s.top=o.top),e.scrollTo(s)},_expandNodes(i){if(!i||i.length===0)return ae().resolve().promise();const e=ae(),t=i.map(n=>this.expandItem(n));return De.apply(R,t).done(()=>e.resolve()).fail(()=>e.reject()),e.promise()},_dispose(){this.callBase(),clearTimeout(this._setFocusedItemTimeout),this._allItemsExpandedHandler=null}});gr.setEditorClass(cd);const QS="dx-treeview",hV=`${QS}-node-container`,ud=uV.inherit(gr).inherit({_addWidgetPrefix:i=>`${QS}-${i}`,_optionChanged(i){switch(i.name){case"searchValue":this._showCheckboxes()&&this._isRecursiveSelection()&&this._removeSelection(),this._initDataAdapter(),this._updateSearch(),this._repaintContainer(),this.option("focusedElement",null);break;case"searchExpr":this._initDataAdapter(),this.repaint();break;case"searchMode":this.option("expandNodesRecursive")?this._updateDataAdapter():this._initDataAdapter(),this.repaint();break;default:this.callBase(i)}},_updateDataAdapter(){this._setOptionWithoutOptionChange("expandNodesRecursive",!1),this._initDataAdapter(),this._setOptionWithoutOptionChange("expandNodesRecursive",!0)},_getDataAdapterOptions(){return Y(this.callBase(),{searchValue:this.option("searchValue"),searchMode:this.option("searchMode")||"contains",searchExpr:this.option("searchExpr")})},_getNodeContainer(){return this.$element().find(`.${hV}`).first()},_updateSearch(){if(this._searchEditor){const i=this._getSearchEditorOptions();this._searchEditor.option(i)}},_repaintContainer(){const i=this._getNodeContainer();let e;i.length&&(i.empty(),e=this._dataAdapter.getRootNodes(),this._renderEmptyMessage(e),this._renderItems(i,e),this._fireContentReadyAction())},_focusTarget(){return this._itemContainer(this.option("searchEnabled"))},_cleanItemContainer(){this.$element().empty()},_itemContainer(i,e){return e??(e=this._selectAllEnabled()),e?this._getNodeContainer():this._scrollable&&i?R(this._scrollable.content()):this.callBase()},_addWidgetClass(){this.$element().addClass(this._widgetClass())},_clean(){this.callBase(),this._removeSearchBox()}});wt("dxTreeView",ud);const pV="column-chooser-mode-drag",fV="column-chooser-mode-select",mV=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],gV=function(i,e){const t=[],n=i.isSelectMode(),s=i.option("columnChooser.selection.recursive");return e.length&&ie(e,(o,r)=>{const a={text:r.caption,cssClass:r.cssClass,allowHiding:r.allowHiding,expanded:!0,id:r.index,disabled:r.allowHiding===!1,parentId:U(r.ownerBand)?r.ownerBand:null},l=s&&r.hasColumns;n&&!l&&(a.selected=r.visible),t.push(a)}),t};class _V extends Yt.ViewController{init(){super.init(),this._rowsView=this.getView("rowsView")}renderShowColumnChooserButton(e){const t=this,n=t.addWidgetPrefix("column-chooser-button"),s=t.option("columnChooser.enabled"),o=e.find(`.${n}`);let r;s?o.length?o.show():(r=R("<div>").addClass(n).appendTo(e),t._createComponent(r,$i,{icon:"column-chooser",onClick(){t.getView("columnChooserView").showColumnChooser()},hint:t.option("columnChooser.title"),integrationOptions:{}})):o.hide()}getPosition(){const e=this.option("columnChooser.position");return U(e)?e:{my:"right bottom",at:"right bottom",of:this._rowsView&&this._rowsView.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}}class bV extends Ql{optionChanged(e){e.name==="columnChooser"?(this._initializePopupContainer(),this.render(null,"full")):super.optionChanged(e)}publicMethods(){return["showColumnChooser","hideColumnChooser"]}_resizeCore(){}_isWinDevice(){return!!Re.real().win}_initializePopupContainer(){const e=this,t=e.addWidgetPrefix("column-chooser"),n=e.element().addClass(t),s=e.option("columnChooser"),o=this._columnChooserController.getPosition(),r=un(),a=bw(r),l=tn(r),d={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:t},toolbarItems:[{text:s.title,toolbar:"top",location:a||l?"before":"center"}],position:o,width:s.width,height:s.height,rtlEnabled:e.option("rtlEnabled"),onHidden(){e._isWinDevice()&&R("body").removeClass(e.addWidgetPrefix("notouch-action"))},container:s.container};a||l?Y(d,{showCloseButton:!0}):d.toolbarItems[d.toolbarItems.length]={shortcut:"cancel"},U(this._popupContainer)?this._popupContainer.option(d):(e._popupContainer=e._createComponent(n,io,d),e._popupContainer.on("optionChanged",c=>{c.name==="visible"&&e.renderCompleted.fire()})),this.setPopupAttributes()}setPopupAttributes(){const e=this.isSelectMode(),t=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:re.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix(pV),!e).toggleClass(this.addWidgetPrefix(fV),e),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),e&&!t&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))}_renderCore(e){if(this._popupContainer){const t=!this.isSelectMode();!this._columnChooserList||e==="full"?this._renderTreeView():t&&this._updateItems()}}_renderTreeView(){var e,t,n;const s=this,o=this._popupContainer.$content(),r=this.option("columnChooser"),a=this.isSelectMode(),l=U(r.allowSearch)?r.allowSearch:(e=r.search)===null||e===void 0?void 0:e.enabled,d=U(r.searchTimeout)?r.searchTimeout:(t=r.search)===null||t===void 0?void 0:t.timeout,c={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:l,searchTimeout:d,searchEditorOptions:(n=r.search)===null||n===void 0?void 0:n.editorOptions};if(this._isWinDevice()&&(c.useNativeScrolling=!1),Y(c,a?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)c.searchEnabled||(c.searchValue=""),this._columnChooserList.option(c),this._updateItems();else{this._columnChooserList=this._createComponent(o,ud,c),this._updateItems();let h=0;this._columnChooserList.on("optionChanged",u=>{h=u.component.getScrollable().scrollTop()}),this._columnChooserList.on("contentReady",u=>{rn(()=>{u.component.getScrollable().scrollTo({y:h}),s.renderCompleted.fire()})})}}_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(t,n,s){R(s).text(t.text).parent().addClass(t.cssClass).addClass("dx-column-chooser-item")}}}_prepareSelectModeConfig(){const e=this,t=this.option("columnChooser.selection")??{};let n=!1;return{selectByClick:t.selectByClick,selectNodesRecursive:t.recursive,showCheckBoxesMode:t.allowSelectAll?"selectAll":"normal",onSelectionChanged:s=>{if(n)return;const o=(r=>{const a=(l,d)=>l.reduce((c,h)=>(c.push(h),h.children.length&&a(h.children,c),c),d);return a(r,[])})(s.component.getNodes());s.component.beginUpdate(),n=!0,((r,a)=>{a.filter(l=>l.itemData.allowHiding===!1).forEach(l=>r.component.selectItem(l.key))})(s,o),s.component.endUpdate(),n=!1,e.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(r=>{r.forEach(a=>{const l=a.itemData.id,d=a.selected!==!1;e._columnsController.columnOption(l,"visible",d)})})(o),e.component.endUpdate(),this._isUpdatingColumnVisibility=!1}}}_updateItems(){const e=this.isSelectMode(),t=this._columnsController.getChooserColumns(e),n=gV(this,t);this._columnChooserList.option("items",n)}_updateItemsSelection(e){const t=e==null?void 0:e.map(n=>this._columnsController.columnOption(n));this._columnChooserList.beginUpdate(),t==null||t.forEach(n=>{let{visible:s,index:o}=n;s?this._columnChooserList.selectItem(o):this._columnChooserList.unselectItem(o)}),this._columnChooserList.endUpdate()}_columnOptionChanged(e){if(super._columnOptionChanged(e),this.isSelectMode()&&this._columnChooserList&&!this._isUpdatingColumnVisibility){const{optionNames:n}=e,s=n.visible&&n.length===1,o=U(e.columnIndex)?[e.columnIndex]:e.columnIndices;(mV.some(a=>n[a])||e.changeTypes.columns&&n.all)&&(this._updateItemsSelection(o),s||this._updateItems())}}getColumnElements(){const e=[],t=this.isSelectMode(),n=this._columnsController.getChooserColumns(t),s=this._popupContainer&&this._popupContainer.$content(),o=s&&s.find(".dx-treeview-node");return o&&n.forEach(r=>{const a=o.filter(`[data-item-id = '${r.index}']`),l=a.length?a.children(".dx-column-chooser-item").get(0):null;e.push(l)}),R(e)}getName(){return"columnChooser"}getColumns(){return this._columnsController.getChooserColumns()}allowDragging(e){const t=this._columnsController.isParentColumnVisible(e.index),n=!e.visible&&e.allowHiding;return this.isColumnChooserVisible()&&t&&n}allowColumnHeaderDragging(e){return!this.isSelectMode()&&this.isColumnChooserVisible()&&e.allowHiding}getBoundingRect(){const e=this._popupContainer&&this._popupContainer.$overlayContent();if(e&&e.is(":visible")){const t=e.offset();return{left:t.left,top:t.top,right:t.left+St(e),bottom:t.top+rt(e)}}return null}showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&R("body").addClass(this.addWidgetPrefix("notouch-action"))}hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()}isColumnChooserVisible(){const e=this._popupContainer;return e&&e.option("visible")}isSelectMode(){return this.option("columnChooser.mode")==="select"}hasHiddenColumns(){const e=this.option("columnChooser.enabled"),t=this.getColumns().filter(n=>!n.visible);return e&&t.length}}const vV=i=>class extends i{_getToolbarItems(){const e=super._getToolbarItems();return this._appendColumnChooserItem(e)}_appendColumnChooserItem(e){const t=this;if(t.option("columnChooser.enabled")){const s=function(){t.component.getView("columnChooserView").showColumnChooser()},o=function(l){R(l.element).addClass(t._getToolbarButtonClass(t.addWidgetPrefix("column-chooser-button")))},r=t.option("columnChooser.title"),a={widget:"dxButton",options:{icon:"column-chooser",onClick:s,hint:r,text:r,onInitialized:o,elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40};e.push(a)}return e}optionChanged(e){e.name==="columnChooser"?(this._invalidate(),e.handled=!0):super.optionChanged(e)}isVisible(){const e=this.option("columnChooser.enabled");return super.isVisible()||e}},yV=i=>class extends i{allowMoveColumn(e,t,n,s){return this.option("columnChooser.mode")==="select"&&s==="columnChooser"?!1:super.allowMoveColumn(e,t,n,s)}},CV=i=>class extends i{allowDragging(e){const t=!this._columnChooserView.isSelectMode(),n=this._columnChooserView.isColumnChooserVisible();return t&&n&&e.allowHiding||super.allowDragging(e)}},dg={defaultOptions:()=>({columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,mode:"dragAndDrop",width:250,height:260,title:re.format("dxDataGrid-columnChooserTitle"),emptyPanelText:re.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:_V},views:{columnChooserView:bV},extenders:{views:{headerPanel:vV,columnHeadersView:CV},controllers:{columns:yV}}};dg.controllers.columnChooser;dg.views.columnChooserView;He.registerModule("columnChooser",dg);function br(i,e){const t=Us(e.group),n=[];for(let s=0;s<i.length;s++)n.push([t[s].selector,"=",i[s]]);return e.filter&&n.push(e.filter),Ce.combineFilters(n)}function eE(i,e,t){const n=Us(e.group);let s=[];for(let o=t?i.length-1:0;o<i.length;o++){const r=[];for(let a=0;a<=o;a++){const{selector:l}=n[a];if(o===a&&(i[a]===null||i[a]===!1||i[a]===!0))i[a]===!1?r.push([l,"=",n[a].desc?!0:null]):(i[a]?!n[a].desc:n[a].desc)?r.push([l,"<>",i[a]]):(r.push([l,"<>",null]),r.push([l,"=",null]));else{const d=[l,o===a?n[a].desc?">":"<":"=",i[a]];d[1]==="<"?r.push([d,"or",[l,"=",null]]):r.push(d)}}s.push(He.combineFilters(r))}return s=He.combineFilters(s,"or"),He.combineFilters([s,e.filter])}const uv=function(i,e){const{hash:t}=i;return t&&t[JSON.stringify(e)]},xV=function(i,e){let t=0,n=i.length-1;if(!i.length)return 0;do{const o=n+t>>1;i[o].offset>e?n=o:t=o}while(n-t>1);let s;for(s=t;s<=n&&!(i[s].offset>e);s++);return s},tE=function(i,e,t){for(let n=0;n<i.length;n++)e+1>=t?i[n].children=[]:tE(i[n].children,e+1,t)},iE=function(i,e,t){let n=0;if(e)if(!t)n=e.length;else for(let s=0;s<e.length;s++)i.isGroupItemCountable(e[s])&&n++,n+=iE(i,e[s].items,t-1);return n};let nE=class{constructor(e){this._dataSource=e,this.reset()}reset(){this._groupsInfo=[],this._totalCountCorrection=0}totalCountCorrection(){return this._totalCountCorrection}updateTotalItemsCount(e){this._totalCountCorrection=e||0}isGroupItemCountable(e){return!this._isVirtualPaging()||!e.isContinuation}_isVirtualPaging(){const e=this._dataSource.option("scrolling.mode");return e==="virtual"||e==="infinite"}itemsCount(){const t=this._dataSource._dataSource,n=He.normalizeSortingInfo(t.group()||[]).length;return iE(this,t.items(),n)}foreachGroups(e,t,n,s,o){const r=this;return function a(l,d,c,h){const u=[];function p(g,m,b,_){const w=m&&g(m,b);return w&&_.push(w),w}for(let g=0;g<l.length;g++){if(h.push(l[g].data),!c&&p(d,l[g].data,h,u)===!1)return!1;if(!l[g].data||l[g].data.isExpanded||n){const{children:m}=l[g],b=m.length&&a(m,d,c,h);if(b&&u.push(b),b===!1)return!1}if(c&&p(d,l[g].data,h,u)===!1)return!1;(!l[g].data||l[g].data.offset!==l[g].offset)&&(s=!0),h.pop()}const f=o&&h.slice(0);return s&&De.apply(R,u).always(()=>{r._updateGroupInfoOffsets(l,f)})}(r._groupsInfo,e,t,[])}_updateGroupInfoOffsets(e,t){t=t||[];for(let n=0;n<e.length;n++){const s=e[n];if(s.data&&s.data.offset!==s.offset){s.offset=s.data.offset;for(let o=0;o<t.length;o++)t[o].offset=s.offset}}e.sort((n,s)=>n.offset-s.offset)}findGroupInfo(e){let t,n=this._groupsInfo;for(let s=0;n&&s<e.length;s++)t=uv(n,e[s]),n=t&&t.children;return t&&t.data}addGroupInfo(e){const t=this;let n;const{path:s}=e;let o=t._groupsInfo;for(let r=0;r<s.length;r++){if(n=uv(o,s[r]),!n){n={key:s[r],offset:e.offset,data:{offset:e.offset,isExpanded:!0,path:s.slice(0,r+1)},children:[]};const a=xV(o,e.offset);o.splice(a,0,n),o.hash=o.hash||{},o.hash[JSON.stringify(n.key)]=n}r===s.length-1&&(n.data=e,n.offset!==e.offset&&t._updateGroupInfoOffsets(o)),o=n.children}}allowCollapseAll(){return!0}refresh(e){const t=this,{storeLoadOptions:n}=e,s=Us(n.group||[]),o="_group"in t?Us(t._group||[]):s;let r=Math.min(o.length,s.length);t._group=n.group;for(let a=0;a<r;a++)if(o[a].selector!==s[a].selector){r=a;break}r?tE(t._groupsInfo,0,r):t.reset()}handleDataLoading(){}handleDataLoaded(e,t){t(e)}handleDataLoadedCore(e,t){t(e)}};function Cf(i,e,t,n){if(n=n||0,e>1&&t>0){let s=i-Math.floor(i/e)*e||e;return s+=t-n-2,s<0&&(s+=e),Math.floor(s/(e-n-1))}return 0}const La=function(i,e,t){return i.foreachGroups((n,s)=>{if(n.isExpanded)return e(n,s)},!0,!1,t,t)},cg=function(i,e,t,n,s,o,r){let a;if(n.items=n.items||[],n.paths=n.paths||[],n.count=n.count||0,n.lastCount=n.lastCount||0,!!t)for(let l=0;l<e.length;l++){const d=e[l];if(d.items!==void 0){if(s.push(d.key),o)a=!0;else{const c=i.findGroupInfo(s);a=c&&c.isExpanded}a?d.items?cg(i,d.items,t-1,n,s,o,r):t===1&&d.count&&(!o||r)&&(n.items.push(d),n.paths.push(s.slice(0)),n.count+=n.lastCount,n.lastCount=d.count):(d.collapsedItems=d.items,d.items=null),s.pop()}}},wV=function(i,e,t,n,s){const o=i.findGroupInfo(n);let r;o?(t?o.count=e.count>0?e.count:e.items&&e.items.length||0:e.count=o.count||e.count,o.offset=s):(t&&(r=e.count>0?e.count:e.items.length),i.addGroupInfo({isExpanded:i._isGroupExpanded(n.length-1),path:n.slice(0),offset:s,count:r||0}))},ug=function(i,e,t,n,s,o,r){const l=(e.group?e.group.length:0)===n,d=e.remoteOperations.paging;let c=0,h=0,u;if(s=s||0,o=o||[],d&&!r&&(c=s===0?e.skip||0:e.skips[s-1]||0),s>=n)return t.length;for(let p=0;p<t.length;p++){const f=t[p];if(f){if(o.push(f.key),!f.count&&!f.items||f.items===void 0||(wV(i,f,l,o,c+p),u=f.items?ug(i,e,f.items,n,s+1,o,p):f.count||-1,u<0))return-1;h+=u,o.pop()}}return h},Wh=function(i,e){return i&&i.length&&i[e]&&!!i[e].isExpanded},hv=function(i,e,t){let n,s=t;for(let o=0;o<i.length;o++)n=i[o].offset+1,o>0&&(n+=i[o-1].childrenTotalCount,e&&(n+=Cf(s,e,n,o-1)*o)),s+=n;return s};function sE(i,e,t,n){const s=e.items[n],o=i.skips&&i.skips[t],r=i.takes&&i.takes[t],a=n===e.items.length-1,l=n===0,d=l&&o||0,c=s.count>r+d;l&&o!==void 0&&(s.isContinuation=!0),a&&r!==void 0&&c&&(s.isContinuationOnNextPage=!0)}function SV(i,e,t){const n=t-1,s=i.group?i.group.length:0;e.skip=i.skips&&i.skips[n],i.takes&&i.takes[n]!==void 0&&(s===t?e.take=e.count?e.count-(e.skip||0):0:e.take=0,e.take+=i.takes[n])}function oE(i){return!Array.isArray(i)}function pv(i){oE(i.data)||(i.data=new ae)}function rE(i,e,t,n,s,o){e.isCustomLoading||(n={},cg(i,o,t,n,[]),SV(e,n,t));const r=e.group?e.group.length:0;n.paths.length&&r-t>0?(pv(e),EV(i,e,n,t,s,o)):n.paths.length&&e.storeLoadOptions.group?(pv(e),IV(i,e,n,o)):oE(e.data)&&e.data.resolve(o)}function EV(i,e,t,n,s,o){const r=e.group||[],a=r[s+1],l=[];ie(t.paths,d=>{var c;const h={requireTotalCount:!1,requireGroupCount:!0,group:[a],groupSummary:e.storeLoadOptions.groupSummary,filter:br(t.paths[d],{filter:e.storeLoadOptions.filter,group:r}),select:e.storeLoadOptions.select,langParams:(c=e.storeLoadOptions)===null||c===void 0?void 0:c.langParams};d===0&&(h.skip=t.skip||0),d===t.paths.length-1&&(h.take=t.take);const u=h.take===0?[]:i._dataSource.loadFromStore(h);De(u).done(p=>{const f=t.items[d];sE(e,t,s,d),f.items=p}),l.push(u)}),De.apply(null,l).done(()=>{ug(i,e,o,n+1),rE(i,e,n+1,t,s+1,o)})}function IV(i,e,t,n){const s=[],o=e.group||[];ie(t.paths,(d,c)=>{s.push(br(c,{group:e.isCustomLoading?e.storeLoadOptions.group:o}))});let{filter:r}=e.storeLoadOptions;e.storeLoadOptions.isLoadingAll||(r=He.combineFilters([r,He.combineFilters(s,"or")]));const a=Y({},e.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:o.concat(He.normalizeSortingInfo(e.storeLoadOptions.sort||[])),filter:r}),l=i._dataSource.isLastLevelGroupItemsPagingLocal();l||(a.skip=t.skip,a.take=t.take),De(t.take===0?[]:i._dataSource.loadFromStore(a)).done(d=>{l&&(d=i._dataSource.sortLastLevelGroupItems(d,o,t.paths),d=t.skip?d.slice(t.skip):d,d=t.take?d.slice(0,t.take):d),ie(t.items,(c,h)=>{const u=h.count-(c===0&&t.skip||0),p=d.splice(0,u);sE(e,t,o.length-1,c),h.items=p}),e.data.resolve(n)}).fail(e.data.reject)}const jh=function(i,e){const t=new ae,n=!!(e.group&&e.group.length),s=Y({skip:0,take:1,requireGroupCount:n,requireTotalCount:!n},e,{group:n?e.group:null});return i.load(s).done((o,r)=>{const a=r&&(n?r.groupCount:r.totalCount);if(!isFinite(a)){t.reject(Ei.Error(n?"E4022":"E4021"));return}t.resolve(a)}).fail(t.reject.bind(t)),t};let fv=class extends nE{updateTotalItemsCount(e){let t=0;const n=e.extra&&e.extra.totalCount||0,s=e.extra&&e.extra.groupCount||0,o=this._dataSource.pageSize(),r=this._isVirtualPaging();La(this,a=>{a.childrenTotalCount=0}),La(this,(a,l)=>{const d=hv(l,r?0:o,t);let c=a.count+a.childrenTotalCount;r||(c+=Cf(d,o,c,l.length-1)),l[l.length-2]?l[l.length-2].childrenTotalCount+=c:t+=c}),super.updateTotalItemsCount(t-n+s)}_isGroupExpanded(e){const t=this._dataSource.group();return Wh(t,e)}_updatePagingOptions(e,t){const n=this,s=n._isVirtualPaging(),o=n._dataSource.pageSize(),r=[],a=[];let l=0,d=0;e.take&&(La(this,c=>{c.childrenTotalCount=0,c.skipChildrenTotalCount=0}),La(n,(c,h)=>{let u,p=0,f=0;const g=hv(h,s?0:o,d);let m=0,b=0,_=c.count+c.childrenTotalCount,w=_;t&&t(c,g);const E=e.skip-g;g<=e.skip+e.take&&_&&(u=e.take,s||(m=Cf(g,o,_,h.length-1),_+=m*h.length,w+=m,o&&E>=0&&(p=h.length,f=h.length-1,b=Math.floor(E/o))),E>=0?(g+_>e.skip&&r.unshift(E-b*p-c.skipChildrenTotalCount),g+_>=e.skip+u&&a.unshift(u-p-c.childrenTotalCount+c.skipChildrenTotalCount)):g+_>=e.skip+u&&a.unshift(u+E-c.childrenTotalCount)),g<=e.skip&&(h[h.length-2]?h[h.length-2].skipChildrenTotalCount+=Math.min(w,E+1-b*f):l+=Math.min(w,E+1)),g<=e.skip+u&&(_=Math.min(w,E+u-(b+1)*f),h[h.length-2]?h[h.length-2].childrenTotalCount+=_:d+=_)}),e.skip-=l,e.take-=d-l),e.skips=r,e.takes=a}changeRowExpand(e){const t=this.findGroupInfo(e),n=this._dataSource,s=n.remoteOperations().groupPaging,o=He.normalizeSortingInfo(n.group());return t?(t.isExpanded=!t.isExpanded,s&&t.isExpanded&&e.length<o.length?jh(n,{filter:br(e,{filter:n.lastLoadOptions().filter,group:n.group()}),group:[o[e.length]],select:n.select()}).done(r=>{t.count=r}):new ae().resolve()):new ae().reject()}handleDataLoading(e){const t=this,{storeLoadOptions:n}=e,s=He.normalizeSortingInfo(n.group||e.loadOptions.group);if(!(e.isCustomLoading||!s.length)){if(e.remoteOperations.grouping){const o=t._dataSource.remoteOperations().paging;n.group=He.normalizeSortingInfo(n.group),n.group.forEach((r,a)=>{const l=a===n.group.length-1;r.isExpanded=!o||!l})}e.group=e.group||s,e.remoteOperations.paging?(e.skip=n.skip,e.take=n.take,n.requireGroupCount=!0,n.group=s.slice(0,1),t._updatePagingOptions(e),n.skip=e.skip,n.take=e.take):(e.skip=e.loadOptions.skip,e.take=e.loadOptions.take,t._updatePagingOptions(e))}}handleDataLoadedCore(e,t){const n=this,s=He.normalizeSortingInfo(e.storeLoadOptions.group||e.loadOptions.group).length,o=e.group?e.group.length:0;let r;const a={};if(e.isCustomLoading)t(e),cg(n,e.data,s,a,[],e.isCustomLoading,e.storeLoadOptions.isLoadingAll);else{if(e.remoteOperations.paging||n.foreachGroups(l=>{l.count=0}),r=ug(n,e,e.data,s),r<0){e.data=new ae().reject(mt.Error("E1037"));return}if(e.remoteOperations.paging||s&&e.extra&&e.loadOptions.requireTotalCount&&(e.extra.totalCount=r,e.extra.groupCount=e.data.length),o&&e.storeLoadOptions.requireGroupCount&&!isFinite(e.extra.groupCount)){e.data=new ae().reject(Ei.Error("E4022"));return}n.updateTotalItemsCount(e),e.remoteOperations.paging||(n._updatePagingOptions(e),e.lastLoadOptions.skips=e.skips,e.lastLoadOptions.takes=e.takes),t(e),e.remoteOperations.paging||n._processPaging(e,s)}rE(n,e,s,a,0,e.data)}_processSkips(e,t,n){if(!n)return;const s=e[0],o=t[0],r=s&&s.items;o!==void 0&&(s.isContinuation=!0,r&&(s.items=r.slice(o),this._processSkips(s.items,t.slice(1),n-1)))}_processTakes(e,t,n,s,o){if(!s||!e)return;o=o||[];const r=e[e.length-1];let a=r&&r.items;const l=n[0],d=t[0];if(r){const c=r.count-(r.isContinuation&&d||0)||a.length;l!==void 0&&c>l&&(r.isContinuationOnNextPage=!0,o.forEach(h=>{h.isContinuationOnNextPage=!0}),a&&(a=a.slice(0,l),r.items=a)),o.push(r),this._processTakes(a,t.slice(1),n.slice(1),s-1,o)}}_processPaging(e,t){this._processSkips(e.data,e.skips,t),this._processTakes(e.data,e.skips,e.takes,t)}isLastLevelGroupItemsPagingLocal(){return!1}sortLastLevelGroupItems(e){return e}refresh(e,t){const n=this,s=n._dataSource,{storeLoadOptions:o}=e,r=e.group||e.storeLoadOptions.group,a=He.normalizeSortingInfo(n._group);let l,d;function c(h,u){u.length===d+1&&(h.isExpanded=l)}for(d=0;d<a.length;d++)l=Wh(r,d),Wh(n._group,d)!==l&&n.foreachGroups(c);if(super.refresh.apply(this,arguments),r&&e.remoteOperations.paging&&t.reload)return La(n,h=>{const u=jh(s,{filter:br(h.path,{filter:o.filter,group:r}),group:r.slice(h.path.length),select:o.select}),p=jh(s,{filter:eE(h.path,{filter:o.filter,group:r},!0),group:r.slice(h.path.length-1,h.path.length),select:o.select});return De(p,u).done((f,g)=>{f=parseInt(f.length?f[0]:f),g=parseInt(g.length?g[0]:g),h.offset=f,h.count!==g&&(h.count=g,n.updateTotalItemsCount(e))})},!0)}};const Kh=function(i,e){const t=new ae,n=Y({skip:0,take:1,requireTotalCount:!0},e);return i.load(n).done((s,o)=>{t.resolve(o&&o.totalCount)}).fail(t.reject.bind(t)),t},bc=function(i,e,t){return i.foreachGroups(n=>{if(!n.isExpanded)return e(n)},!1,!1,t,!0)},mv=function(i,e){let t=0,n=e||0;return e&&(bc(i,s=>{if(s.offset-t>=e)return!1;t+=s.count-1}),n+=t),n},aE=function(i,e,t,n,s,o){let r=0,a=!1;for(let l=0;l<e.length;l++){const d=e[l];if(d.items!==void 0){t.push(d.key);const c=i.findGroupInfo(t);if(c&&!c.isExpanded)d.collapsedItems=d.items,d.items=null,n+=c.count,o--,o<0&&r++,s&&(a=!0);else if(d.items){const h=aE(i,d.items,t,n,s,o);s&&(h.offset-n>1?d.isContinuation=!0:a=!0),n=h.offset,o=h.take,o<0&&(d.items.length?d.isContinuationOnNextPage=!0:r++)}t.pop()}else s&&(a=!0),n++,o--,o<0&&r++;s=!1}return a&&e.splice(0,1),r&&e.splice(-r,r),{offset:n,take:o}},TV=function(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!Hl(null,i[t],e[t]))return!1;return!0},xf=function(i,e,t,n,s){if(e){for(let o=0;o<e.length;o++){const r=e[o];if("key"in r&&r.items!==void 0){t.push(r.key),s&&TV(s.path,t)&&!r.isContinuation&&(s.offset=n);const a=i.findGroupInfo(t);a&&!r.isContinuation&&(a.offset=n),a&&!a.isExpanded?n+=a.count:n=xf(i,r.items,t,n,s),t.pop()}else n++}return n}},DV=function(i,e){if(e.group){const t=He.normalizeSortingInfo(e.group),n=He.normalizeSortingInfo(i.sort);i.sort=qs.arrangeSortingInfo(t,n),delete e.group}},AV=function(i,e,t){const n=He.normalizeSortingInfo(t||e.group);let s=[];for(let o=0;o<i.length;o++){const r=[];for(let a=0;a<=o;a++)r.push([n[a].selector,o===a?"<>":"=",i[a]]);s.push(He.combineFilters(r))}return s=He.combineFilters(s,"or"),He.combineFilters([s,e.filter])},lE=function(i,e){let t=i.count||i.items.length;if(!i.count&&e>1){t=0;for(let n=0;n<i.items.length;n++)t+=lE(i.items[n],e-1)}return t};class gv extends nE{handleDataLoading(e){const{storeLoadOptions:t}=e,n=[];let s=0,o=!1,r;const{group:a}=e.loadOptions;let l=0;if(DV(t,e.loadOptions),e.group=e.group||a,e.isCustomLoading)return;const d=Y({},t);d.skip=mv(this,t.skip),d.skip&&d.take&&a&&(d.skip--,d.take++,o=!0),d.take&&a&&(r=d.take,d.take++),bc(this,c=>{if(c.offset>=d.skip+d.take+l)return!1;c.offset>=d.skip+l&&c.count&&(l+=c.count-1,n.push(c),s+=c.count)}),ie(n,function(){d.filter=AV(this.path,d,a)}),e.storeLoadOptions=d,e.collapsedGroups=n,e.collapsedItemsCount=s,e.skip=d.skip||0,e.skipFirstItem=o,e.take=r}handleDataLoaded(e,t){const n=this,{collapsedGroups:s}=e,o=He.normalizeSortingInfo(e.group),r=o.length;function a(l,d,c,h,u){if(!l||!d.length||!c.length)return;let p,f;const g=Ki(d[0],!0);for(f=0;f<l.length&&(p=Ki(l[f].key,!0),!(u>=h.offset||g===p));f++)u+=lE(l[f],c.length);(!l.length||g!==p)&&l.splice(f,0,{key:d[0],items:[],count:d.length===1?h.count:void 0}),a(l[f].items,d.slice(1),c.slice(1),h,u)}if(e.collapsedItemsCount&&e.extra&&e.extra.totalCount>=0&&(e.extra._totalCountWasIncreasedByCollapsedItems||(e.extra.totalCount+=e.collapsedItemsCount,e.extra._totalCountWasIncreasedByCollapsedItems=!0)),t(e),r){let{data:l}=e;const d=dn(l);if(qs.multiLevelGroup(d,o).enumerate().done(c=>{l=c}),s)for(let c=0;c<s.length;c++)a(l,s[c].path,o,s[c],e.skip);e.isCustomLoading||aE(n,l,[],e.skip,e.skipFirstItem,e.take),e.data=l}}isGroupItemCountable(e){return e.items===null}updateTotalItemsCount(){let e=0;bc(this,t=>{t.count&&(e-=t.count-1)}),super.updateTotalItemsCount(e)}changeRowExpand(e){const t=this,n=t._dataSource,s=n.beginPageIndex?n.beginPageIndex():n.pageIndex(),o=n.items(),r=mv(t,s*n.pageSize());let a=t.findGroupInfo(e),l;return a&&!a.isExpanded?l=new ae().resolve(a.count):l=Kh(n,{filter:br(e,{filter:n.filter(),group:n.group()})}),De(l).done(d=>{d=parseInt(d.length?d[0]:d),a?(xf(t,o,[],r),a.isExpanded=!a.isExpanded,a.count=d):(a={offset:-1,count:d,path:e,isExpanded:!1},xf(t,o,[],r,a),a.offset>=0&&t.addGroupInfo(a)),t.updateTotalItemsCount()}).fail(function(){n._eventsStrategy.fireEvent("loadError",arguments)})}allowCollapseAll(){return!1}refresh(e,t){const n=this,{storeLoadOptions:s}=e,o=n._dataSource;if(super.refresh.apply(this,arguments),t.reload)return bc(n,r=>{const a=Kh(o,{filter:br(r.path,s)}),l=Kh(o,{filter:eE(r.path,s)});return De(l,a).done((d,c)=>{d=parseInt(d.length?d[0]:d),c=parseInt(c.length?c[0]:c),r.offset=d,r.count!==c&&(r.count=c,n.updateTotalItemsCount())})},!0)}}const kV=i=>class extends i{init(){super.init.apply(this,arguments),this._initGroupingHelper()}_initGroupingHelper(e){const t=this._grouping,n=this.option("grouping.autoExpandAll"),s=this.option("focusedRowEnabled"),o=e?e.remoteOperations:this.remoteOperations();o.filtering&&o.sorting&&o.paging&&!o.grouping&&(n||!s)?(!t||t instanceof fv)&&(this._grouping=new gv(this)):(!t||t instanceof gv)&&(this._grouping=new fv(this))}totalItemsCount(){const e=super.totalItemsCount();return e>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?e+this._grouping.totalCountCorrection():e}itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:super.itemsCount.apply(this,arguments)}allowCollapseAll(){return this._grouping.allowCollapseAll()}isGroupItemCountable(e){return this._grouping.isGroupItemCountable(e)}isRowExpanded(e){const t=this._grouping.findGroupInfo(e);return t?t.isExpanded:!this._grouping.allowCollapseAll()}collapseAll(e){return this._collapseExpandAll(e,!1)}expandAll(e){return this._collapseExpandAll(e,!0)}_collapseExpandAll(e,t){const n=this,s=n._dataSource,o=s.group(),r=He.normalizeSortingInfo(o||[]);if(r.length){for(let a=0;a<r.length;a++)e===void 0||e===a?r[a].isExpanded=t:o&&o[a]&&(r[a].isExpanded=o[a].isExpanded);s.group(r),n._grouping.foreachGroups((a,l)=>{(e===void 0||e===l.length-1)&&(a.isExpanded=t)},!1,!0),n.resetPagesCache()}return!0}refresh(){return super.refresh.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)}changeRowExpand(e){const t=this,n=t._dataSource;if(n.group())return n.beginLoading(),t._lastLoadOptions&&(t._lastLoadOptions.groupExpand=!0),t._changeRowExpandCore(e).always(()=>{n.endLoading()})}_changeRowExpandCore(e){return this._grouping.changeRowExpand(e)}_hasGroupLevelsExpandState(e,t){if(e&&Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n].isExpanded===t)return!0}}_customizeRemoteOperations(e,t){const{remoteOperations:n}=e;e.storeLoadOptions.group?(n.grouping&&!e.isCustomLoading&&(!n.groupPaging||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!0))&&(n.paging=!1),!n.grouping&&(!n.sorting||!n.filtering||e.isCustomLoading||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!1))&&(n.paging=!1)):!e.isCustomLoading&&n.paging&&t.grouping&&this.resetCache(),super._customizeRemoteOperations.apply(this,arguments)}_handleDataLoading(e){return super._handleDataLoading(e),this._initGroupingHelper(e),this._grouping.handleDataLoading(e)}_handleDataLoaded(e){return this._grouping.handleDataLoaded(e,super._handleDataLoaded.bind(this))}_handleDataLoadedCore(e){return this._grouping.handleDataLoadedCore(e,super._handleDataLoadedCore.bind(this))}};Au.extend(kV);const OV=i=>class extends i{init(){super.init(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")}_beforeProcessItems(e){const t=this._columnsController.getGroupColumns();return e=super._beforeProcessItems(e),e.length&&t.length&&(e=this._processGroupItems(e,t.length)),e}_processItem(e,t){return U(e.groupIndex)&&Ke(e.rowType)&&e.rowType.indexOf("group")===0?(e=this._processGroupItem(e,t),t.dataIndex=0):e=super._processItem.apply(this,arguments),e}_processGroupItem(e,t){return e}_processGroupItems(e,t,n){const s=this,o=s._columnsController.getGroupColumns(),r=o[o.length-t];if(!n){const l=s.option("scrolling.mode");n={collectContinuationItems:l!=="virtual"&&l!=="infinite",resultItems:[],path:[],values:[]}}const{resultItems:a}=n;if(n.data&&(n.collectContinuationItems||!n.data.isContinuation)&&a.push({rowType:"group",data:n.data,groupIndex:n.path.length-1,isExpanded:!!n.data.items,key:n.path.slice(0),values:n.values.slice(0)}),e)if(t===0)a.push.apply(a,e);else for(let l=0;l<e.length;l++){const d=e[l];d&&"items"in d?(n.data=d,n.path.push(d.key),n.values.push(r&&r.deserializeValue&&!r.calculateDisplayValue?r.deserializeValue(d.key):d.key),s._processGroupItems(d.items,t-1,n),n.data=void 0,n.path.pop(),n.values.pop()):a.push(d)}return a}publicMethods(){return super.publicMethods().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])}collapseAll(e){const t=this._dataSource;t&&t.collapseAll(e)&&(t.pageIndex(0),t.reload())}expandAll(e){const t=this._dataSource;t&&t.expandAll(e)&&(t.pageIndex(0),t.reload())}changeRowExpand(e){const t=this,n=t.isRowExpanded(e),s={key:e,expanded:n};return t.executeAction(n?"onRowCollapsing":"onRowExpanding",s),s.cancel?new ae().resolve():De(t._changeRowExpandCore(e)).done(()=>{s.expanded=!n,t.executeAction(n?"onRowCollapsed":"onRowExpanded",s)})}_changeRowExpandCore(e){const t=this,n=this._dataSource,s=new ae;return n?De(n.changeRowExpand(e)).done(()=>{t.load().done(s.resolve).fail(s.reject)}).fail(s.reject):s.resolve(),s}isRowExpanded(e){const t=this._dataSource;return t&&t.isRowExpanded(e)}expandRow(e){return this.isRowExpanded(e)?new ae().resolve():this.changeRowExpand(e)}collapseRow(e){return this.isRowExpanded(e)?this.changeRowExpand(e):new ae().resolve()}optionChanged(e){e.name==="grouping"&&(e.name="dataSource"),super.optionChanged(e)}},hg=function(i,e){const t=this._columnsController;switch(e.itemData.value){case"group":{const n=t._dataSource.group()||[];t.columnOption(i.dataField,"groupIndex",n.length);break}case"ungroup":t.columnOption(i.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},dE=i=>{const e=i==null?void 0:i.visible;return e==="auto"?Re.current().deviceType==="desktop":!!e},cE=(i,e)=>{const t=dE(i),n=(i==null?void 0:i.allowColumnDragging)&&e.allowGrouping;return t&&!!n},RV=i=>class extends i{_getToolbarItems(){const e=super._getToolbarItems();return this._appendGroupingItem(e)}_appendGroupingItem(e){if(this._isGroupPanelVisible()){let t=!1;const n={template:()=>{const s=R("<div>").addClass("dx-datagrid-group-panel");return this._updateGroupPanelContent(s),el("groupPanel",this,s,void 0,this._handleActionKeyDown.bind(this)),s},name:"groupPanel",onItemRendered:()=>{t&&this.renderCompleted.fire(),t=!0},location:"before",locateInMenu:"never",sortIndex:1};e.push(n),this.updateToolbarDimensions()}return e}_handleActionKeyDown(e){const{event:t}=e,n=R(t.target),s=n.closest(".dx-group-panel-item").index(),o=this._columnsController.getGroupColumns()[s],r=o&&o.index;n.is(".dx-header-filter")?this._headerFilterController.showHeaderFilterMenu(r,!0):this._processGroupItemAction(r),t.preventDefault()}_isGroupPanelVisible(){return dE(this.option("groupPanel"))}_renderGroupPanelItems(e,t){const n=this;e.empty(),ie(t,(s,o)=>{n._createGroupPanelItem(e,o)}),cm(this)}_createGroupPanelItem(e,t){const n=R("<div>").addClass(t.cssClass).addClass("dx-group-panel-item").data("columnData",t).appendTo(e).text(t.caption);return WD(this,n),n}_columnOptionChanged(e){if(!this._requireReady&&!He.checkChanges(e.optionNames,["width","visibleWidth"])){const t=this.element(),n=t&&t.find(".dx-datagrid-group-panel");n&&n.length&&(this._updateGroupPanelContent(n),this.updateToolbarDimensions(),this.renderCompleted.fire())}super._columnOptionChanged()}_updateGroupPanelContent(e){const t=this.getColumns(),n=this.option("groupPanel");this._renderGroupPanelItems(e,t),n.allowColumnDragging&&!t.length&&(R("<div>").addClass("dx-group-panel-message").text(n.emptyPanelText).appendTo(e),e.closest(".dx-toolbar-item").addClass("dx-toolbar-label"),e.closest(".dx-toolbar-label").css("maxWidth","none"))}allowDragging(e){const t=this.option("groupPanel");return cE(t,e)}getColumnElements(){const e=this.element();return e&&e.find(".dx-group-panel-item")}getColumns(){return this._columnsController.getGroupColumns()}getBoundingRect(){const e=this.element();if(e&&e.find(".dx-datagrid-group-panel").length){const t=e.offset();return{top:t.top,bottom:t.top+st(e)}}return null}getName(){return"group"}getContextMenuItems(e){const t=this,n=t.option("grouping.contextMenuEnabled"),s=R(e.targetElement).closest(".dx-group-panel-item");let o;if(s.length&&(e.column=s.data("columnData")),n&&e.column){const{column:r}=e;if(U(r.allowGrouping)?r.allowGrouping:!0){const l=U(r.groupIndex)&&r.groupIndex>-1,d=t.option("grouping.texts"),c=hg.bind(t,r);o=[{text:d.ungroup,value:"ungroup",disabled:!l,onItemClick:c},{text:d.ungroupAll,value:"ungroupAll",onItemClick:c}]}}return o}isVisible(){return super.isVisible()||this._isGroupPanelVisible()}hasGroupedColumns(){return this._isGroupPanelVisible()&&!!this.getColumns().length}optionChanged(e){e.name==="groupPanel"?(this._invalidate(),e.handled=!0):super.optionChanged(e)}},MV=i=>class extends i{getContextMenuItems(e){const t=this,n=t.option("grouping.contextMenuEnabled");let s;if(n&&e.row&&e.row.rowType==="group"){const r=t._columnsController.columnOption(`groupIndex:${e.row.groupIndex}`);if(r&&r.allowGrouping){const a=t.option("grouping.texts"),l=hg.bind(t,r);s=[],s.push({text:a.ungroup,value:"ungroup",onItemClick:l},{text:a.ungroupAll,value:"ungroupAll",onItemClick:l})}}return s}_rowClick(e){const t=this,n=t.option("grouping.expandMode"),o=t.option("scrolling.mode")!=="infinite"&&n==="rowClick"&&R(e.event.target).closest(".dx-group-row").length,r=R(e.event.target).closest(".dx-datagrid-expand").length;(o||r)&&t._changeGroupRowState(e),super._rowClick(e)}_changeGroupRowState(e){const t=this._dataController.items()[e.rowIndex],n=this._columnsController.columnOption(`groupIndex:${t.groupIndex}`,"allowCollapsing");(t.rowType==="data"||t.rowType==="group"&&n!==!1)&&(this._dataController.changeRowExpand(t.key,!0),e.event.preventDefault(),e.handled=!0)}},PV=i=>class extends i{getContextMenuItems(e){const t=this,n=t.option("grouping.contextMenuEnabled");let s=super.getContextMenuItems(e);if(n&&e.row&&(e.row.rowType==="header"||e.row.rowType==="detailAdaptive")){const{column:o}=e;if(!o.command&&(!U(o.allowGrouping)||o.allowGrouping)){const r=t.option("grouping.texts"),a=U(o.groupIndex)&&o.groupIndex>-1,l=hg.bind(t,o);s=s||[],s.push({text:r.groupByThisColumn,value:"group",beginGroup:!0,disabled:a,onItemClick:l}),o.showWhenGrouped&&s.push({text:r.ungroup,value:"ungroup",disabled:!a,onItemClick:l}),s.push({text:r.ungroupAll,value:"ungroupAll",onItemClick:l})}}return s}allowDragging(e){const t=this.option("groupPanel");return cE(t,e)||super.allowDragging(e)}};He.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:re.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:re.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:re.format("dxDataGrid-groupHeaderText"),ungroup:re.format("dxDataGrid-ungroupHeaderText"),ungroupAll:re.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:re.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:OV,columns:i=>class extends i{_getExpandColumnOptions(){const e=super._getExpandColumnOptions.apply(this,arguments);return e.cellTemplate=He.getExpandCellTemplate(),e}},editing:i=>class extends i{_isProcessedItem(e){return U(e.groupIndex)&&Ke(e.rowType)&&e.rowType.indexOf("group")===0}}},views:{headerPanel:RV,rowsView:MV,columnHeadersView:PV}}});const BV=i=>class extends i{_getExpandColumnsCore(){const e=super._getExpandColumnsCore();return this.option("masterDetail.enabled")&&e.push({type:"detailExpand",cellTemplate:Ce.getExpandCellTemplate()}),e}},Gh=function(i){i._expandedItems=[],i._isExpandAll=i.option("masterDetail.autoExpandAll")},FV=i=>class extends i{init(){Gh(this),super.init()}expandAll(e){const t=this;e<0?(t._isExpandAll=!0,t._expandedItems=[],t.updateItems()):super.expandAll.apply(t,arguments)}collapseAll(e){const t=this;e<0?(t._isExpandAll=!1,t._expandedItems=[],t.updateItems()):super.collapseAll.apply(t,arguments)}isRowExpandedHack(){return super.isRowExpanded.apply(this,arguments)}isRowExpanded(e){const t=this,n=Ce.getIndexByKey(e,t._expandedItems);return Array.isArray(e)?super.isRowExpanded.apply(t,arguments):!!(t._isExpandAll^(n>=0&&t._expandedItems[n].visible))}_getRowIndicesForExpand(e){const t=this.getRowIndexByKey(e);return[t,t+1]}_changeRowExpandCore(e){const t=this;let n;if(Array.isArray(e))n=super._changeRowExpandCore.apply(t,arguments);else{const s=Ce.getIndexByKey(e,t._expandedItems);if(s>=0){const{visible:o}=t._expandedItems[s];t._expandedItems[s].visible=!o}else t._expandedItems.push({key:e,visible:!0});t.updateItems({changeType:"update",rowIndices:t._getRowIndicesForExpand(e)}),n=new ae().resolve()}return n}_processDataItemHack(){return super._processDataItem.apply(this,arguments)}_processDataItem(e,t){const n=super._processDataItem.apply(this,arguments);return n.isExpanded=this.isRowExpanded(n.key),t.detailColumnIndex===void 0&&(t.detailColumnIndex=-1,ie(t.visibleColumns,(s,o)=>{if(o.command==="expand"&&!U(o.groupIndex))return t.detailColumnIndex=s,!1})),t.detailColumnIndex>=0&&(n.values[t.detailColumnIndex]=n.isExpanded),n}_processItemsHack(){return super._processItems.apply(this,arguments)}_processItems(e,t){const n=this,{changeType:s}=t,o=[];return e=super._processItems.apply(n,arguments),s==="loadingAll"?e:(s==="refresh"&&(n._expandedItems=ln(n._expandedItems,r=>r.visible)),ie(e,(r,a)=>{o.push(a);const l=Ce.getIndexByKey(a.key,n._expandedItems);a.rowType==="data"&&(a.isExpanded||l>=0)&&!a.isNewRow&&o.push({visible:a.isExpanded,rowType:"detail",key:a.key,data:a.data,values:[]})}),o)}optionChanged(e){const t=this;let n,s;if(e.name==="masterDetail"){switch(e.name="dataSource",e.fullName){case"masterDetail":{const o=e.value||{},r=e.previousValue||{};n=o.enabled!==r.enabled,s=o.autoExpandAll!==r.autoExpandAll;break}case"masterDetail.template":Gh(t);break;case"masterDetail.enabled":n=!0;break;case"masterDetail.autoExpandAll":s=!0}(n||s)&&Gh(t)}super.optionChanged(e)}},VV=i=>class extends i{fireContentReadyAction(){super.fireContentReadyAction.apply(this,arguments),this._updateParentDataGrids(this.component.$element())}_updateParentDataGrids(e){const t=e.closest(".dx-master-detail-row");t.length&&De(this._updateMasterDataGrid(t,e)).done(()=>{this._updateParentDataGrids(t.parent())})}_updateMasterDataGrid(e,t){const n=R(e).data("options"),s=R(e).closest(`.${this.getWidgetContainerClass()}`).parent().data("dxDataGrid");if(n&&s)return this._updateMasterDataGridCore(s,n)}_updateMasterDataGridCore(e,t){const n=ae();if(e.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(e,t.rowIndex,R(t.rowElement)).done(n.resolve);else{if(e.option("scrolling.useNative")===!0){e.updateDimensions().done(()=>n.resolve(!0));return}const s=e.getScrollable();s?s==null||s.update().done(()=>n.resolve()):n.resolve()}return n.promise()}_updateFixedMasterDetailGrids(e,t,n){const s=ae(),o=R(e.getRowElement(t)),r=R(e.getView("rowsView").getTableElements()),a=(o==null?void 0:o.length)===2&&st(o.eq(0))!==st(o.eq(1)),l=(r==null?void 0:r.length)===2&&st(r.eq(0))!==st(r.eq(1));if(a||l){const d=Ge(n);return e.updateDimensions().done(()=>{const c=this.option("columnAutoWidth")&&e.option("scrolling.useNative")===!0,h=c&&d!==Ge(n);c&&h?this.updateDimensions().done(()=>s.resolve(!0)):s.resolve(!0)}),s.promise()}return ae().resolve()}_toggleBestFitMode(e){if(super._toggleBestFitMode.apply(this,arguments),this.option("masterDetail.template")){const t=this._rowsView.getTableElement();t&&t.find(".dx-master-detail-cell").css("maxWidth",e?0:"")}}},NV=i=>class extends i{_getCellTemplate(e){const t=this,{column:n}=e,s=this._editingController,o=s&&s.isEditRow(e.rowIndex);let r;return n.command==="detail"&&!o?r=t.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:t._getDefaultTemplate(n)}:r=super._getCellTemplate.apply(t,arguments),r}_isDetailRow(e){return e&&e.rowType&&e.rowType.indexOf("detail")===0}_createRow(e){const t=super._createRow.apply(this,arguments);return e&&this._isDetailRow(e)&&(this.option("showRowLines")&&t.addClass("dx-row-lines"),t.addClass("dx-master-detail-row"),U(e.visible)&&t.toggle(e.visible)),t}_renderCells(e,t){const{row:n}=t;let s;const o=this._columnsController.getVisibleColumns();n.rowType&&this._isDetailRow(n)?this._needRenderCell(0,t.columnIndices)&&(s=this._renderCell(e,{value:null,row:n,rowIndex:n.rowIndex,column:{command:"detail"},columnIndex:0,change:t.change}),s.addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",o.length),n.isEditing||s.attr("aria-roledescription",re.format("dxDataGrid-masterDetail"))):super._renderCells.apply(this,arguments)}},LV={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:BV,data:FV,resizing:VV},views:{rowsView:NV}}};He.registerModule("masterDetail",LV);const $V="dx-numberbox-spin",HV="dx-numberbox-spin-button",uE="dxNumberBox",_v=be(Ct.up,uE),bv=be(Ct.cancel,uE),jr=Hi.inherit({_getDefaultOptions(){return Y(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup(){this.callBase();const i=`${$V}-${this.option("direction")}`;this.$element().addClass(HV).addClass(i),this._spinIcon=R("<div>").addClass(`${i}-icon`).appendTo(this.$element())},_render(){this.callBase();const i=be(Ct.down,this.NAME),e=this.$element();q.off(e,i),q.on(e,i,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler(i){i.preventDefault(),this._clearTimer(),q.on(this.$element(),Ao.name,()=>{this._feedBackDeferred=ae(),q4(this._feedBackDeferred),this._spinChangeHandler({event:i}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:i})});const e=_e.getDocument();q.on(e,_v,this._clearTimer.bind(this)),q.on(e,bv,this._clearTimer.bind(this)),this._spinChangeHandler({event:i})},_dispose(){this._clearTimer(),this.callBase()},_clearTimer(){q.off(this.$element(),Ao.name);const i=_e.getDocument();q.off(i,_v),q.off(i,bv),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged(i){switch(i.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(i)}}}),zV="dx-numberbox-spin",WV="dx-numberbox-spin-container",jV="dx-numberbox-spin-touch-friendly";class KV extends ku{_attachEvents(e,t){const{editor:n}=this,s=be(Ct.down,n.NAME),o=t.children(),r=n._createAction(a=>n._spinButtonsPointerDownHandler(a));q.off(t,s),q.on(t,s,a=>r({event:a})),jr.getInstance(o.eq(0)).option("onChange",a=>n._spinUpChangeHandler(a)),jr.getInstance(o.eq(1)).option("onChange",a=>n._spinDownChangeHandler(a))}_create(){const{editor:e}=this,t=R("<div>").addClass(WV),n=R("<div>").appendTo(t),s=R("<div>").appendTo(t),o=this._getOptions();return this._addToContainer(t),e._createComponent(n,jr,Y({direction:"up"},o)),e._createComponent(s,jr,Y({direction:"down"},o)),this._legacyRender(e.$element(),this._isTouchFriendly(),o.visible),{instance:t,$element:t}}_getOptions(){const{editor:e}=this,t=this._isVisible(),n=e.option("disabled");return{visible:t,disabled:n}}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){const{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,t,n){e.toggleClass(jV,t),e.toggleClass(zV,n)}update(){if(super.update()){const{editor:t,instance:n}=this,s=t.$element(),o=this._isVisible(),r=this._isTouchFriendly(),a=n.children(),l=jr.getInstance(a.eq(0)),d=jr.getInstance(a.eq(1)),c=this._getOptions();l.option(c),d.option(c),this._legacyRender(s,r,o)}}}const GV=Math,UV="dx-numberbox",qV=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],YV=eg.inherit({_supportedKeys(){return Y(this.callBase(),{upArrow(i){ki(i)||(i.preventDefault(),i.stopPropagation(),this._spinUpChangeHandler(i))},downArrow(i){ki(i)||(i.preventDefault(),i.stopPropagation(),this._spinDownChangeHandler(i))},enter(){}})},_getDefaultOptions(){return Y(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:re.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:()=>!1,_getDefaultButtons(){return this.callBase().concat([{name:"spins",Ctor:KV}])},_isSupportInputMode(){const i=parseFloat(Zt.version);return Zt.chrome&&i>=66||Zt.safari&&i>=12},_defaultOptionsRules(){return this.callBase().concat([{device:()=>Re.real().generic&&!Re.isSimulator(),options:{useLargeSpinButtons:!1}},{device:(function(){return Re.real().deviceType!=="desktop"&&!this._isSupportInputMode()}).bind(this),options:{mode:"number"}}])},_initMarkup(){this._renderSubmitElement(),this.$element().addClass(UV),this.callBase()},_getDefaultAttributes(){const i=this.callBase();return i.inputmode="decimal",i},_renderContentImpl(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement(){this._$submitElement=R("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(i){this._getSubmitElement().val(N2(i))},_getSubmitElement(){return this._$submitElement},_keyPressHandler(i){this.callBase(i);const e=Bp(i);if(!/[\d.,eE\-+]/.test(e)){const n=oi(i);return ki(i)||n&&qV.includes(n)?void 0:(i.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel(i){i.delta>0?this._spinValueChange(1,i):this._spinValueChange(-1,i)},_renderValue(){const i=this._input().val(),e=this.option("value");(!i.length||Number(i)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());const t=U(e)?null:re.format("dxNumberBox-noDataText");return this.setAria({valuenow:ci(e,""),valuetext:t}),this.option("text",this._input().val()),this._updateButtons(),ae().resolve()},_forceValueRender(){const i=this.option("value"),e=Number(i),t=isNaN(e)?"":this._applyDisplayValueFormatter(i);this._renderDisplayText(t)},_applyDisplayValueFormatter(i){return this.option("displayValueFormatter")(i)},_renderProps(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:ci(this.option("min"),""),valuemax:ci(this.option("max"),"")})},_spinButtonsPointerDownHandler(){const i=this._input();!this.option("useLargeSpinButtons")&&_e.getActiveElement()!==i[0]&&q.trigger(i,"focus")},_spinUpChangeHandler(i){this.option("readOnly")||this._spinValueChange(1,i.event||i)},_spinDownChangeHandler(i){this.option("readOnly")||this._spinValueChange(-1,i.event||i)},_spinValueChange(i,e){const t=parseFloat(this.option("step"));if(t===0)return;let n=parseFloat(this._normalizeInputValue())||0;n=this._correctRounding(n,t*i);const s=this.option("min"),o=this.option("max");U(s)&&(n=Math.max(s,n)),U(o)&&(n=Math.min(o,n)),this._saveValueChangeEvent(e),this.option("value",n)},_correctRounding(i,e){const t=/[,.](.*)/,n=t.test(i),s=t.test(e);if(n||s){const o=n?t.exec(i)[0].length:0,r=s?t.exec(e)[0].length:0,a=GV.max(o,r);return i=this._round(i+e,a),i}return i+e},_round(i,e){e=e||0;const t=10**e;return i*=t,i=Math.round(i)/t,i},_renderValueChangeEvent(){this.callBase();const i=be("focusout","NumberBoxForceValueChange");q.off(this.element(),i),q.on(this.element(),i,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue(){if(this.option("mode")==="number")return;const i=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));i.val(null),i.val(e)},_valueChangeEventHandler(i){const e=this._input(),t=this._normalizeText(),n=this._parseValue(t),s=t!=="."&&t!=="-";if(this._isValueValid()&&!this._validateValue(n)){e.val(this._applyDisplayValueFormatter(n));return}s&&this.callBase(i,isNaN(n)?null:n),this._applyValueBoundaries(t,n),this.validationRequest.fire({value:n,editor:this})},_applyValueBoundaries(i,e){const t=this._isValueIncomplete(i),n=this._isValueInRange(i);!t&&!n&&e!==null&&Number(i)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:i=>i.replace(",","."),_inputIsInvalid(){const i=this.option("mode")==="number",e=this._input().get(0).validity;return i&&e&&e.badInput},_renderDisplayText(i){this._inputIsInvalid()||this.callBase(i)},_isValueIncomplete:i=>/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(i),_isValueInRange(i){return $s(i,this.option("min"),this.option("max"))},_isNumber(i){return this._parseValue(i)!==null},_validateValue(i){const e=this._normalizeText(),t=this._isValueValid();let n=!0;const s=this._isNumber(e);return isNaN(Number(i))&&(n=!1),!i&&t?n=!0:!s&&!t&&(n=!1),this.option({isValid:n,validationError:n?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),n},_normalizeInputValue(){return this._parseValue(this._normalizeText())},_normalizeText(){const i=this._input().val().trim();return this._replaceCommaWithPoint(i)},_parseValue(i){const e=parseFloat(i);return isNaN(e)?null:Yi(e,this.option("min"),this.option("max"))},_clearValue(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear(){this.option("value")===null?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged(i){switch(i.name){case"value":this._validateValue(i.value),this._setSubmitValue(i.value),this.callBase(i),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(i)}}}),vc=function(i){let e=0,t=0;for(let n=0;n<i.length;++n)if(i[n]==="'"&&e++,i[n]==="."&&(++t,e%2===0))return{occurrence:t,index:n};return{occurrence:1,index:-1}},wf=function(i,e,t){let n=-1;for(;t--&&n++<i.length;)n=i.indexOf(e,n);return n},Sf=function(i,e){return e===-1?[i]:[i.slice(0,e),i.slice(e+1)]},XV=function(i,e){return i&&$x(i/100,e)},Qc=function(i,e){if(typeof e=="string"){const t=e.split(";"),n=Gt.getSign(i,e);t[1]=t[1]||`-${t[0]}`,e=t[n<0?1:0],e=(a=>a.replace(/'([^']*)'/g,l=>l.split("").map(()=>" ").join("").substr(2)))(e);const o=/^[^#0.,]*/.exec(e)[0].length,r=/[^#0.,]*$/.exec(e)[0].length;return{start:o,end:i.length-r}}return{start:0,end:i.length}},vv=function(i,e){const t=Gt.getDecimalSeparator(),n=new RegExp(`[^0-9${Co(t)}]`,"g");return e.slice(0,i).replace(n,"").length},yv=function(i){return i.split("").reverse().join("")},Cv=function(i,e){if(!i)return-1;const t=/[0-9]/g;let n=1,s=null,o=t.exec(e);for(;o;){if(s=o.index,n>=i)return s;n++,o=t.exec(e)}return s===null?e.length:s},ZV=function(i){return i.replace(/[^0-9e]+$/,"")},er=function(i,e){return i.start===void 0&&(i={start:i,end:i}),{start:i.start+e,end:i.end+e}},JV=function(i,e,t,n){t=er(t,0);const s=Gt.getDecimalSeparator(),o=QV(i),r=vc(n).occurrence,a=o?0:wf(i,s,r),l=wf(e,s,r),d=Sf(i,a),c=Sf(e,l);if(a!==-1&&t.start>a){const b=t.start-a-1,_=vv(b,d[1]),w=c[1]?l+1+Cv(_,c[1])+1:e.length;return go(w,e,n)}const u=ZV(c[0]),p=d[0].length-t.start,f=vv(p,yv(d[0])),g=Cv(f,yv(u)),m=u.length-(g+1);return go(m,e,n)};function QV(i){return i.length===1&&!!i.match(/^[,.][0-9]*$/g)}const eN=function(i,e,t){i=er(i,0);const n=go(i,e,t);return i.start>=n.start&&i.end<=n.end};function go(i,e,t){i=er(i,0);const n=Qc(e,t);return{start:Yi(i.start,n.start,n.end),end:Yi(i.end,n.start,n.end)}}const tN=function(i,e,t){const n=Qc(i,t);return Qc(e,t).start-n.start},eu=YV.inherit({_getDefaultOptions(){return Y(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:i=>i==="del",_supportedKeys(){return this._useMaskBehavior()?Y(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex(i){const e=Gt.getDecimalSeparator(),t=vc(this.option("format")).occurrence;return wf(i,e,t)},_focusInHandler(i){this._preventNestedFocusEvent(i)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0;const e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){const t=this._getInputVal(),n=this._getTextSeparatorIndex(t);n>=0?this._caret({start:n,end:n}):this._moveCaretToBoundaryEventHandler(-1,i)}},0)),this.callBase(i)},_focusOutHandler(i){const e=!this._preventNestedFocusEvent(i);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(i),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(i){const e=this._getFormatPattern(),t=this.option("value");return(this._format(t,e)||"")!==i},_updateFormattedValue(){const i=this._getInputVal();this._hasValueBeenChanged(i)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&q.trigger(this._input(),"change"))},_arrowHandler(i,e){if(!this._useMaskBehavior())return;const t=this._getInputVal(),n=this._getFormatPattern();let s=er(this._caret(),i);eN(s,t,n)||(s=i===1?s.end:s.start,e.preventDefault(),this._caret(go(s,t,n)))},_moveCaretToBoundary(i){const e=Qc(this._getInputVal(),this._getFormatPattern()),t=er(i===1?e.start:e.end,0);this._caret(t)},_moveCaretToBoundaryEventHandler(i,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(i),e&&e.preventDefault())},_shouldMoveCaret(i,e){const t=Gt.getDecimalSeparator(),n=i.charAt(e.end)===t;return(this._lastKey===t||this._lastKey==="."||this._lastKey===",")&&n},_getInputVal(){return Gt.convertDigits(this._input().val(),!0)},_keyboardHandler(i){if(this.clearCaretTimeout(),this._lastKey=Gt.convertDigits(Bp(i),!0),this._lastKeyName=oi(i),!this._shouldHandleKey(i.originalEvent))return this.callBase(i);const e=this._getInputVal(),t=this._caret();let n;this._lastKeyName==="minus"?n="":n=i.which===110?Gt.getDecimalSeparator():this._lastKey;const s=this._tryParse(e,t,n);return this._shouldMoveCaret(e,t)&&(this._moveCaret(1),i.originalEvent.preventDefault()),s===void 0?this._lastKeyName!=="minus"&&i.originalEvent.preventDefault():this._parsedValue=s,this.callBase(i)},_keyPressHandler(i){this._useMaskBehavior()||this.callBase(i)},_removeHandler(i){const e=this._caret(),t=this._getInputVal();let{start:n}=e,{end:s}=e;this._lastKey=Bp(i),this._lastKeyName=oi(i);const o=this._isDeleteKey(this._lastKeyName),r=!o;if(n===s){const c=n;if(r&&c>0||o&&c<t.length)o&&s++,r&&n--;else{i.preventDefault();return}}const a=t.slice(n,s);if(this._isStub(a)){this._moveCaret(o?1:-1),(this._parsedValue<0||1/this._parsedValue===-1/0)&&(this._revertSign(i),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&q.trigger(this._input(),"input")),i.preventDefault();return}const l=Gt.getDecimalSeparator();if(a===l){const c=t.indexOf(l);this._isNonStubAfter(c+1)&&(this._moveCaret(o?1:-1),i.preventDefault());return}if(s-n<t.length&&this._replaceSelectedText(t,{start:n,end:s},"").search(/[0-9]/)<0&&this._isValueInRange(0)){this._parsedValue=this._parsedValue<0||1/this._parsedValue===-1/0?-0:0;return}const d=this._tryParse(t,{start:n,end:s},"");d===void 0?i.preventDefault():this._parsedValue=d},_isPercentFormat(){return this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")!==-1},_parse(i,e){const t=this.option("format"),n=Ee(t.parser),s=n?t.parser:Gt.parse;let o=0;if(!n){const r=vc(e).index,a=this._getTextSeparatorIndex(i),l=r!==-1?r:e.length,d=a!==-1?a:i.length;d>l&&e.indexOf("#")===-1&&(o=d-l)}return i=i.substr(o),s(i,e)},_format(i,e){const t=this.option("format"),n=(t==null?void 0:t.formatter)||t,s=Ee(n)?n:Gt.format;return i===null?"":s(i,e)},_getFormatPattern(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat(){const i=this.option("format"),e=Ee(i==null?void 0:i.parser),t=Ke(i)&&(i.includes("0")||i.includes("#")),n=i==="exponential"||(i==null?void 0:i.type)==="exponential",s=e||t||n;this._currentFormat=s?i:RO(o=>{const r=this._format(o,i);return Gt.convertDigits(r,!0)})},_getFormatForSign(i){const e=this._getFormatPattern();if(Ke(e)){const n=e.split(";"),s=Gt.getSign(i,e);return n[1]=n[1]||`-${n[0]}`,s<0?n[1]:n[0]}return Gt.getSign(i)<0?"-":""},_removeStubs(i,e){const t=this._getFormatForSign(i),n=Gt.getThousandsSeparator(),s=this._getStubs(t);let o=i;if(s.length){const r=s[0],a=new RegExp(`(${Co(s[1]||"")})$`,"g"),l=new RegExp(`[-${Co(e?"":n)}]`,"g");o=o.replace(r,"").replace(a,"").replace(l,"")}return o},_getStubs(i){const e=/[^']([#0.,]+)/g.exec(i),t=e&&e[0].trim();return i.split(t).map(n=>n.replace(/'/g,""))},_truncateToPrecision(i,e){if(U(i)){const t=i.toString(),n=t.indexOf(".");if(t&&n>-1){const s=parseFloat(t.substr(0,n+e+1));return isNaN(s)?i:s}}return i},_tryParse(i,e,t){const n=e.start!==e.end,s=n&&e.start===0&&e.end===i.length,o=Gt.getDecimalSeparator();if(s&&t===o)return 0;const r=this._replaceSelectedText(i,e,t),a=this._getFormatPattern();let l=this._getParsedValue(r,a);const d=!a.parser&&this._getPrecisionLimits(r).max,c=l!==this._parsedValue,h=t===o&&d===0,u=!n&&!c&&t!=="-"&&this._isStub(t);if(h||u||(this._removeStubs(r)===""&&(l=Math.abs(0*this._parsedValue)),isNaN(l)))return;const p=l===null?this._parsedValue:l;return l=d?this._truncateToPrecision(p,d):l,!a.parser&&this._isPercentFormat()?XV(l,d):l},_getParsedValue(i,e){const t=Gt.getSign(i,(e==null?void 0:e.formatter)||e),n=this._removeStubs(i,!0),s=this._parse(n,e),o=s<0?-1:1;return Wt(s)&&t!==o?t*s:s},_isValueIncomplete(i){if(!this._useMaskBehavior())return this.callBase(i);const e=this._caret(),t=Gt.getDecimalSeparator(),n=this._getTextSeparatorIndex(i),s=n>=0&&n<e.start,o=this._removeStubs(i,!0).split(t);if(!s||o.length!==2)return!1;const r=o[1].length,l=!!this._getFormatPattern().parser,d=!l&&this._getPrecisionLimits(this._getFormatPattern(),i),c=l?!0:$s(r,d.min,d.max),h=o[1].charAt(r-1)==="0";return c&&(h||!r)},_isValueInRange(i){const e=ci(this.option("min"),-1/0),t=ci(this.option("max"),1/0);return $s(i,e,t)},_setInputText(i){const e=Gt.convertDigits(i,!0),t=JV(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(i),this._toggleEmptinessEventHandler(),this._formattedValue=i,this._focusOutOccurs||this._caret(t)},_useMaskBehavior(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType(){const i=this.option("mode")==="number",e=Re.real().deviceType==="desktop";this._useMaskBehavior()&&i?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:i=>Ke(i)&&i.length===1,_moveCaret(i){if(!i)return;const e=er(this._caret(),i),t=go(e,this._getInputVal(),this._getFormatPattern());this._caret(t)},_shouldHandleKey(i){const e=oi(i),t=ki(i)||i.altKey||i.shiftKey||!this._isChar(e),n=e==="minus";return this._useMaskBehavior()&&!t&&!n},_renderInput(){this.callBase(),this._renderFormatter()},_renderFormatter(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents(){q.off(this._input(),".dxNumberFormatter")},_isInputFromPaste(i){const e=i.originalEvent&&i.originalEvent.inputType;return U(e)?e==="insertFromPaste":this._isValuePasted},_attachFormatterEvents(){const i=this._input();q.on(i,be("input","dxNumberFormatter"),e=>{this._formatValue(e),this._isValuePasted=!1}),q.on(i,be("dxclick","dxNumberFormatter"),()=>{this._caretTimeout||(this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0,this._caret(go(this._caret(),this._getInputVal(),this._getFormatPattern()))},0))}),q.on(i,$l,()=>{this.clearCaretTimeout()})},clearCaretTimeout(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter(i){const e=this._getInputVal().slice(i);return e&&!this._isStub(e,!0)},_isStub(i,e){const n=`^[^0-9${Co(Gt.getDecimalSeparator())}]+$`;return new RegExp(n,"g").test(i)&&(e||this._isChar(i))},_parseValue(i){return this._useMaskBehavior()?this._parsedValue:this.callBase(i)},_getPrecisionLimits(i){const e=this._getFormatForSign(i),t=vc(e).index,n=(Sf(e,t)[1]||"").replace(/[^#0]/g,""),s=n.replace(/^(0*)#*/,"$1").length,o=n.length;return{min:s,max:o}},_revertSign(i){if(!this._useMaskBehavior())return;const e=this._caret();if(e.start!==e.end){if(oi(i)==="minus"){this._applyRevertedSign(i,e,!0);return}this._caret(go(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(i,e)},_applyRevertedSign(i,e,t){const n=-1*ci(this._parsedValue,null);if((this._isValueInRange(n)||n===0)&&(this._parsedValue=n,t)){const s=this._getFormatPattern(),o=this._getInputVal();this._setTextByParsedValue(),i.preventDefault();const r=this._getInputVal(),a=tN(o,r,s);e=er(e,a);const l=go(e,r,s);this._caret(l)}},_removeMinusFromText(i,e){return this._lastKeyName==="minus"&&i.charAt(e.start-1)==="-"?this._replaceSelectedText(i,{start:e.start-1,end:e.start},""):i},_setTextByParsedValue(){const i=this._getFormatPattern(),e=this._parseValue(),t=this._format(e,i)||"";this._setInputText(t)},_formatValue(i){let e=this._getInputVal();const t=this._caret(),n=this._removeMinusFromText(e,t),s=n!==e;if(e=n,!this._isInputFromPaste(i)&&this._isValueIncomplete(n)){this._formattedValue=e,s&&this._setTextByParsedValue();return}if(Gt.convertDigits(this._formattedValue,!0)!==e){const r=this._tryParse(e,t,"");U(r)&&(this._parsedValue=r)}this._setTextByParsedValue()},_renderDisplayText(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue(){const i=this._getInputVal();this._parsedValue=this._tryParse(i,this._caret())},_adjustParsedValue(){if(!this._useMaskBehavior())return;const e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!Wt(e)){this._parsedValue=e;return}this._parsedValue=Yi(e,this.option("min"),this.option("max"))},_valueChangeEventHandler(i){if(!this._useMaskBehavior())return this.callBase(i);const e=this._caret();this._saveValueChangeEvent(i),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged(i){switch(i.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(i);break;default:this.callBase(i)}},_clearCache(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean(){this._clearCache(),this.callBase()}});wt("dxNumberBox",eu);const hE=ns.inherit({_supportedKeys(){return Y(this.callBase(),{space:function(i){i.preventDefault(),this._clickAction({event:i})}})},_getDefaultOptions(){return Y(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:()=>!0,_defaultOptionsRules(){return this.callBase().concat([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon(){this._$icon=R("<div>").addClass("dx-radiobutton-icon"),R("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState(i){this.$element().toggleClass("dx-radiobutton-checked",i).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",i),this.setAria("checked",i)},_renderClick(){const i=be(kt,this.NAME);this._clickAction=this._createAction(e=>{this._clickHandler(e.event)}),q.off(this.$element(),i),q.on(this.$element(),i,e=>{this._clickAction({event:e})})},_clickHandler(i){this._saveValueChangeEvent(i),this.option("value",!0)},_optionChanged(i){i.name==="value"?(this._renderCheckedState(i.value),this.callBase(i)):this.callBase(i)}});wt("dxRadioButton",hE);const pg="dxListEditDecorator",iN=be(NS,pg),nN=be(LS,pg),sN=be(sg,pg),oN=Lt.inherit({ctor(i){this._list=i,this._init()},_init:ue,_shouldHandleSwipe:!1,_attachSwipeEvent(i){const e={itemSizeFunc:(function(){return this._clearSwipeCache&&(this._itemWidthCache=Ge(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}).bind(this)};q.on(i.$itemElement,iN,e,this._itemSwipeStartHandler.bind(this)),q.on(i.$itemElement,nN,this._itemSwipeUpdateHandler.bind(this)),q.on(i.$itemElement,sN,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler(i){const e=R(i.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *")){i.cancel=!0;return}clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,i)},_itemSwipeUpdateHandler(i){const e=R(i.currentTarget);this._swipeUpdateHandler(e,i)},_itemSwipeEndHandler(i){const e=R(i.currentTarget);this._swipeEndHandler(e,i),this._clearSwipeCache=!0},beforeBag:ue,afterBag:ue,_commonOptions(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement(i){this._shouldHandleSwipe&&(this._attachSwipeEvent(i),this._clearSwipeCache=!0)},afterRender:ue,handleClick:ue,handleKeyboardEvents:ue,handleEnterPressing:ue,handleContextMenu:ue,_swipeStartHandler:ue,_swipeUpdateHandler:ue,_swipeEndHandler:ue,visibilityChange:ue,getExcludedSelectors:ue,dispose:ue}),pE={};function rN(i,e,t){const n=pE,s={};s[i]=n[i]?n[i]:{},s[i][e]=t,Y(n,s)}const xv="dx-list-select-decorator-enabled",aN="dx-list-select-checkbox-container",lN="dx-list-select-checkbox",dN="dx-list-select-radiobutton-container",cN="dx-list-select-radiobutton",wv=be(kt,"dxListEditDecorator");rN("selection","default",oN.inherit({_init(){this.callBase.apply(this,arguments);const i=this._list.option("selectionMode");this._singleStrategy=i==="single",this._containerClass=this._singleStrategy?dN:aN,this._controlClass=this._singleStrategy?cN:lN,this._controlWidget=this._singleStrategy?hE:_r,this._list.$element().addClass(xv)},beforeBag(i){const{$itemElement:e}=i,t=i.$container.addClass(this._containerClass),n=R("<div>").addClass(this._controlClass).appendTo(t);new this._controlWidget(n,Y(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":re.format("CheckState")},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:(function(s){s.event&&this._list._saveSelectionChangeEvent(s.event),this._processCheckedState(e,s.value),s.event&&s.event.stopPropagation()}).bind(this)}))},modifyElement(i){this.callBase.apply(this,arguments);const{$itemElement:e}=i,t=this._controlWidget.getInstance(e.find(`.${this._controlClass}`));q.on(e,"stateChanged",(n,s)=>{t.option("value",s)})},_updateSelectAllState(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender(){this._list.option("selectionMode")==="all"&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents(i,e){const t=!e,n=this._list,s=this._$selectAll,o=n._getLastItemIndex();return!!s&&(e&&i===0||t&&i===o)?(n.option("focusedElement",s),n.scrollToItem(n.option("focusedElement")),!0):!1},handleEnterPressing(i){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return i.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(i),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll(){this._$selectAll=R("<div>").addClass("dx-list-select-all");const i=this._list._supportedKeys().downArrow.bind(this._list),e=R("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(e,_r,{elementAttr:{"aria-label":re.format("dxList-selectAll")},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",i),R("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()},_attachSelectAllHandler(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),q.off(this._$selectAll,wv),q.on(this._$selectAll,wv,this._selectAllClickHandler.bind(this))},_updateSelectAllAriaLabel(){if(!this._$selectAll)return;const{value:i}=this._selectAllCheckBox.option(),t=i===void 0?"indeterminate":i?"checked":"notChecked",n=`${re.format("dxList-selectAll")}, ${re.format(`dxList-selectAll-${t}`)}`;this._$selectAll.attr({"aria-label":n})},_selectAllHandler(i){i.event&&i.event.stopPropagation(),i.event&&this._list._saveSelectionChangeEvent(i.event);const{value:e}=this._selectAllCheckBox.option();e?this._selectAllItems():e===!1&&this._unselectAllItems(),this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability(){const i=this._list,e=i._dataController;return i.option("selectAllMode")==="allPages"&&i.option("grouped")&&!e.group()?(mt.log("W1010"),!1):!0},_selectAllItems(){this._checkSelectAllCapability()&&this._list._selection.selectAll(this._list.option("selectAllMode")==="page")},_unselectAllItems(){this._checkSelectAllCapability()&&this._list._selection.deselectAll(this._list.option("selectAllMode")==="page")},_selectAllClickHandler(i){this._list._saveSelectionChangeEvent(i),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected(i){return this._list.isItemSelected(i)},_processCheckedState(i,e){e?this._list.selectItem(i):this._list.unselectItem(i)},dispose(){this._disposeSelectAll(),this._list.$element().removeClass(xv),this.callBase.apply(this,arguments)},_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));const Sv=Y({},H1,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new Dn({store:new jl(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=Nt(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=Nt(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(i){const e=ae();return i=this._unwrappedValue(i),U(i)?(this._loadSingle(this._valueGetterExpr(),i).done(t=>{this._isValueEquals(this._valueGetter(t),i)?e.resolve(t):e.reject()}).fail(()=>{e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading(){var i;(i=this._loadValueDeferred)===null||i===void 0||i.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(i){return i=i??this._getCurrentValue(),i&&this._dataSource&&this._valueGetterExpr()==="this"&&(i=this._getItemKey(i)),Qi.unwrap(i)},_getItemKey(i){const e=this._dataSource.key();if(Array.isArray(e)){const t={};for(let n=0,s=e.length;n<s;n++)t[e[n]]=i[e[n]];return t}return e&&typeof i=="object"&&(i=i[e]),i},_isValueEquals(i,e){const t=this._dataSource&&this._dataSource.key();let n=this._compareValues(i,e);return!n&&t&&U(i)&&U(e)&&(Array.isArray(t)?n=this._compareByCompositeKey(i,e,t):n=this._compareByKey(i,e,t)),n},_compareByCompositeKey(i,e,t){const n=We;if(!n(i)||!n(e))return!1;for(let s=0,o=t.length;s<o;s++)if(i[t[s]]!==e[t[s]])return!1;return!0},_compareByKey(i,e,t){const n=Qi.unwrap,s=ci(n(i[t]),i),o=ci(n(e[t]),e);return this._compareValues(s,o)},_compareValues:(i,e)=>Ki(i,!0)===Ki(e,!0),_initDynamicTemplates:ue,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const i=this.option("valueExpr");return Ke(i)&&i!=="this"||Ee(i)?i:null},_dataExpressionOptionChanged(i){switch(i.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),fE=[],$u=function(i,e,t){fE.push({enabled:i,decoratorType:e,decoratorSubType:t})};$u(function(){return this.option("menuItems").length},()=>"menu",function(){return this.option("menuMode")});$u(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){const i=this.option("itemDeleteMode");return i==="toggle"||i==="slideButton"||i==="swipe"||i==="static"?"delete":"menu"},function(){let i=this.option("itemDeleteMode");return i==="slideItem"&&(i="slide"),i});$u(function(){return this.option("selectionMode")!=="none"&&this.option("showSelectionControls")},()=>"selection",()=>"default");$u(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},()=>"reorder",()=>"default");const uN=Lt.inherit({ctor(i){this._list=i,this._fetchRequiredDecorators()},dispose(){this._decorators&&this._decorators.length&&ie(this._decorators,(i,e)=>{e.dispose()})},_fetchRequiredDecorators(){this._decorators=[],ie(fE,(i,e)=>{if(e.enabled.call(this._list)){const n=e.decoratorType.call(this._list),s=e.decoratorSubType.call(this._list),o=this._createDecorator(n,s);this._decorators.push(o)}})},_createDecorator(i,e){const t=this._findDecorator(i,e);return new t(this._list)},_findDecorator(i,e){var t;const n=(t=pE[i])===null||t===void 0?void 0:t[e];if(!n)throw mt.Error("E1012",i,e);return n},modifyItemElement(i){const e=R(i.itemElement),t={$itemElement:e};this._prependBeforeBags(e,t),this._appendAfterBags(e,t),this._applyDecorators("modifyElement",t)},afterItemsRendered(){this._applyDecorators("afterRender")},_prependBeforeBags(i,e){const t=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");i.prepend(t)},_appendAfterBags(i,e){const t=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");i.append(t)},_collectDecoratorsMarkup(i,e,t){const n=R("<div>");return ie(this._decorators,function(){const s=R("<div>").addClass(t);this[i](Y({$container:s},e)),s.children().length&&n.append(s)}),n.children()},_applyDecorators(i,e){ie(this._decorators,function(){this[i](e)})},_handlerExists(i){if(!this._decorators)return!1;const e=this._decorators,{length:t}=e;for(let n=0;n<t;n++)if(e[n][i]!==ue)return!0;return!1},_eventHandler(i,e,t){if(!this._decorators)return!1;let n=!1;const s=this._decorators,{length:o}=s;for(let r=0;r<o&&(n=s[r][i](e,t),!n);r++);return n},handleClick(i,e){return this._eventHandler("handleClick",i,e)},handleKeyboardEvents(i,e){return this._eventHandler("handleKeyboardEvents",i,e)},handleEnterPressing(i){return this._eventHandler("handleEnterPressing",i)},contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")},handleContextMenu(i,e){return this._eventHandler("handleContextMenu",i,e)},getExcludedItemSelectors(){const i=[];return this._applyDecorators("getExcludedSelectors",i),i.join(",")}}),Ev=function(i){return(i.group<<20)+i.item},Wo=function(i){return{group:i>>20,item:1048575&i}},hN=Wm.inherit({_groupElements(){return this._collectionWidget._itemContainer().find(".dx-list-group")},_groupItemElements:i=>i.find(".dx-list-item"),getIndexByItemData(i){const e=this._collectionWidget.option("items");let t=!1;return i?(i.items&&i.items.length&&(i=i.items[0]),ie(e,(n,s)=>{if(!s.items||(ie(s.items,(o,r)=>r!==i?!0:(t={group:n,item:o},!1)),t))return!1}),t):!1},getItemDataByIndex(i){const e=this._collectionWidget.option("items");return Wt(i)?this.itemsGetter()[i]:i&&e[i.group]&&e[i.group].items[i.item]||null},itemsGetter(){let i=[];const e=this._collectionWidget.option("items");for(let t=0;t<e.length;t++)e[t]&&e[t].items?i=i.concat(e[t].items):i.push(e[t]);return i},deleteItemAtIndex(i){const e=Wo(i);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems(i){let e=[],t;for(t=0;t<i.length;t++)i[t]&&i[t].items?e=e.concat(i[t].items):e.push(i[t]);const n=[];for(t=0;t<e.length;t++)n.push(this._collectionWidget.keyOf(e[t]));return n},getIndexByKey(i,e){const t=e||this._collectionWidget.option("items");let n=-1;const s=this;return ie(t,(o,r)=>{if(r.items&&(ie(r.items,(a,l)=>{const d=s._collectionWidget.keyOf(l);if(s._equalKeys(d,i))return n={group:o,item:a},!1}),n!==-1))return!1}),n},_getGroups(i){const t=this._collectionWidget._dataController.group();return t?qs.queryByOptions(dn(i),{group:t}).toArray():this._collectionWidget.option("items")},getItemsByKeys(i,e){const t=[],n=this._getGroups(e),s={},o=r=>{const a=this.getIndexByKey(r,n),l=a&&n[a.group];if(l)return{groupKey:l.key,item:l.items[a.item]}};return ie(i,(r,a)=>{const l=o(a);if(!l)return;const{groupKey:d}=l,{item:c}=l;let h=s[d];h||(h={key:d,items:[]},s[d]=h,t.push(h)),h.items.push(c)}),t},moveItemAtIndexToIndex(i,e){const t=this._collectionWidget.option("items"),n=Wo(i),s=Wo(e),o=t[n.group].items,r=t[s.group].items,a=o[n.item];o.splice(n.item,1),r.splice(s.item,0,a)},_isItemIndex:i=>i&&Wt(i.group)&&Wt(i.item),_getNormalizedItemIndex(i){const e=R(i),t=e.closest(".dx-list-group");return t.length?Ev({group:this._groupElements().index(t),item:this._groupItemElements(t).index(e)}):-1},_normalizeItemIndex:i=>Ev(i),_denormalizeItemIndex:i=>Wo(i),_getItemByNormalizedIndex(i){const e=Wo(i),t=this._groupElements().eq(e.group);return this._groupItemElements(t).eq(e.item)},_itemsFromSameParent:(i,e)=>Wo(i).group===Wo(e).group}),pN=ag.inherit({_supportedKeys(){const i=this,e=this.callBase(),t=(n,s)=>{const o=this._editStrategy,r=this.option("focusedElement"),a=o.getNormalizedIndex(r);if(!(a===this._getLastItemIndex()&&this._dataController.isLoading()))if(n.shiftKey&&i.option("itemDragging.allowReordering")){const d=a+(s?-1:1),c=o.getItemElement(d);this.reorderItem(r,c),this.scrollToItem(r),n.preventDefault()}else this._editProvider.handleKeyboardEvents(a,s)||(s?e.upArrow(n):e.downArrow(n))};return Y({},e,{del:n=>{i.option("allowItemDeleting")&&(n.preventDefault(),i.deleteItem(i.option("focusedElement")))},upArrow:n=>t(n,!0),downArrow:n=>t(n),enter:function(n){this._editProvider.handleEnterPressing(n)||e.enter.apply(this,arguments)},space:function(n){this._editProvider.handleEnterPressing(n)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();const i=this._editProvider.getExcludedItemSelectors();i.length&&(this._itemElementsCache=this._itemElementsCache.not(i))},_isItemStrictEquals(i,e){const t=i&&i.__dx_key__;return t&&!this.key()&&this._selection.isItemSelected(t)?!1:this.callBase(i,e)},_getDefaultOptions(){return Y(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:re.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:i=>i.platform==="ios",options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return this.option("selectAllMode")==="page"},_initEditProvider(){this._editProvider=new uN(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new hN(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(i){const e=R(i.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,i)||(this._saveSelectionChangeEvent(i),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(i){const e=R(i.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *"))return;if(Vl(i)&&this._editProvider.handleContextMenu(e,i)){i.handledByEditProvider=!0;return}this.callBase(...arguments)},_getItemContainer(i){if(this.option("grouped")){var e;const t=(e=this._editStrategy.getIndexByItemData(i))===null||e===void 0?void 0:e.group;return this._getGroupContainerByIndex(t)}return this.callBase(i)},_itemContextMenuHandler(i){const e=R(i.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *"))return;if(!i.handledByEditProvider&&this._editProvider.handleContextMenu(e,i)){i.preventDefault();return}this.callBase(...arguments)},_postprocessRenderItem(i){this.callBase(...arguments),this._editProvider.modifyItemElement(i)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(i){const e=this._editStrategy.getItemElement(i);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(i){switch(i.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(i);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(i)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(i){return this._itemElements().index(i)},getItemElementByFlatIndex(i){const e=this._itemElements();return i<0||i>=e.length?R():e.eq(i)},getItemByIndex(i){return this._editStrategy.getItemDataByIndex(i)},deleteItem(i){const e=this._editStrategy,t=e.getNormalizedIndex(i),n=this.option("focusedElement"),s=this.option("focusStateEnabled"),o=n?e.getNormalizedIndex(n):t,a=o===this._getLastItemIndex()||t<o?o-1:o;return this.callBase(i).done(function(){s&&this.focusListItem(a)})}}),wa=pN.inherit(gr).inherit({_addWidgetPrefix:i=>`dx-list-${i}`,_getCombinedFilter(){const i=this._dataController,e={filter:i.filter()};i.addSearchFilter(e);const{filter:t}=e;return t},_initDataSource(){const i=this.option("searchValue"),e=this.option("searchExpr"),t=this.option("searchMode");this.callBase();const n=this._dataController;i&&i.length&&n.searchValue(i),t.length&&n.searchOperation(gr.getOperationBySearchMode(t)),e&&n.searchExpr(e)}});wt("dxList",wa);const fN="dx-dropdowneditor-button-visible",mN="dxDropDownEditor-selectLabel";let gN=class extends ku{constructor(e,t,n){super(e,t,n),this.currentTemplate=null}_attachEvents(e){const{editor:t}=this;e.option("onClick",n=>{var s;if((s=t._shouldCallOpenHandler)!==null&&s!==void 0&&s.call(t)){t._openHandler(n);return}!t.option("openOnFieldClick")&&t._openHandler(n)}),q.on(e.$element(),"mousedown",n=>{t.$element().is(".dx-state-focused")&&n.preventDefault()})}_create(){const{editor:e}=this,t=R("<div>"),n=this._getOptions();this._addToContainer(t);const s=e._createComponent(t,$i,Y({},n,{elementAttr:{"aria-label":re.format(mN)}}));return this._legacyRender(e.$element(),t,n.visible),{$element:t,instance:s}}_getOptions(){const{editor:e}=this,t=this._isVisible(),s={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(s),s}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,n){e.toggleClass(fN,n),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:t,instance:n}=this,s=t.$element(),o=this._getOptions();n==null||n.option(o),this._legacyRender(s,n==null?void 0:n.$element(),o.visible)}}};const tu=function(i){if(qe())return St(i)},fg=function(i){return i===null&&(i=void 0),typeof i=="function"&&(i=i()),i},Iv="dx-dropdowneditor-input-wrapper",Wd="dx-dropdowneditor-overlay",_N="dx-dropdowneditor-overlay-flipped",bN="dx-dropdowneditor-active",vN="dx-dropdowneditor-field-clickable",yN="dx-dropdowneditor-field-template-wrapper",Tv=Re.current().platform==="ios",mg=cd.inherit({_supportedKeys(){return Y({},this.callBase(),{tab(i){if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length){this.close();return}const e=i.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(q.trigger(e,"focus"),e.select()),i.preventDefault()},escape(i){return this.option("opened")&&i.preventDefault(),this.close(),!0},upArrow(i){return!ki(i)&&(i.preventDefault(),i.stopPropagation(),i.altKey)?(this.close(),!1):!0},downArrow(i){return!ki(i)&&(i.preventDefault(),i.stopPropagation(),i.altKey)?(this._validatedOpening(),!1):!0},enter(i){return this.option("opened")&&(i.preventDefault(),this._valueChangeEventHandler(i)),!0}})},_getDefaultButtons(){return this.callBase().concat([{name:"dropDown",Ctor:gN}])},_getDefaultOptions(){return Y(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:re.format("OK"),cancelButtonText:re.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:()=>!0,_getDefaultPopupPosition(i){const e=Po(i);return{offset:{h:0,v:-1},my:`${e} top`,at:`${e} bottom`,collision:"flip flip"}},_defaultOptionsRules(){return this.callBase().concat([{device(i){return i.platform==="generic"},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper(){return this.$element().find(`.${Iv}`).first()},_init(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition(i){const{my:e,at:t}=this._getDefaultPopupPosition(i),n=this.option("popupPosition");this.option("popupPosition",Y({},n,{my:e,at:t}))},_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())},_render(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl(){this.option("deferRendering")||this._createPopup()},_renderInput(){this.callBase(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()},_wrapInput(){this._$container=this.$element().wrapInner(R("<div>").addClass(Iv)).children().eq(0)},_getAriaHasPopup:()=>"true",_getAriaAutocomplete:()=>"none",_getAriaRole:()=>"combobox",_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})},_readOnlyPropValue(){return!this._isEditable()||this.callBase()},_cleanFocusState(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask(){this.option("fieldTemplate")||this.callBase()},_renderField(){const i=this._getFieldTemplate();i&&this._renderTemplatedField(i,this._fieldRenderData())},_renderPlaceholder(){!!this._getFieldTemplate()||this.callBase()},_renderValue(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer},_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=R("<div>").addClass(yN).prependTo(this.$element())))},_renderTemplatedField(i,e){const t=To(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove(),this._$templateWrapper.empty();const n=this._$templateWrapper,s=Symbol("renderContext");this._activeRenderContext=s,i.render({model:e,container:ze(n),onRendered:()=>{if(this._activeRenderContext!==s||!!!this.$element().find(n).length)return;const r=this._input();if(!r.length)throw mt.Error("E1010");this._integrateInput(),t&&q.trigger(r,"focus")}})},_integrateInput(){var i;const{isValid:e}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!e),(i=this.option("_onMarkupRendered"))===null||i===void 0||i()},_refreshEmptinessEvent(){q.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData(){return this.option("value")},_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new fa(i=>{const e=R("<div>").addClass("dx-dropdowneditor-icon");R(i.container).append(e)})}),this.callBase()},_renderOpenHandler(){const i=this._inputWrapper(),e=be(kt,this.NAME),t=this.option("openOnFieldClick");q.off(i,e),q.on(i,e,this._getInputClickHandler(t)),this.$element().toggleClass(vN,t),t&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler(){Tv&&(this._detachFocusOutEvents(),q.on(this._inputWrapper(),be("focusout",this.NAME),i=>{const e=i.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()}))},_isTargetOutOfComponent(i){const e=this.content?R(this.content()).closest(`.${Wd}`):this._$popup;return R(i).closest(`.${Wd}`,e).length===0},_detachFocusOutEvents(){Tv&&q.off(this._inputWrapper(),be("focusout",this.NAME))},_getInputClickHandler(i){return i?e=>{this._executeOpenAction(e)}:()=>{this._focusInput()}},_openHandler(){this._toggleOpenState()},_executeOpenAction(i){this._openOnFieldClickAction({event:i})},_keyboardEventBindingTarget(){return this._input()},_focusInput(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!To(this._input())&&(this._resetCaretPosition(),q.trigger(this._input(),"focus")),!0)},_resetCaretPosition(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const e=this._input().get(0);if(e){const{value:t}=e,n=U(t)&&(i||this._isEditable())?t.length:0;this._caret({start:n,end:n},!0)}},_isEditable(){return this.option("acceptCustomValue")},_toggleOpenState(i){this._focusInput()&&(this.option("readOnly")||(i=arguments.length?i:!this.option("opened"),this.option("opened",i)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState(){const i=this.option("opened");i&&this._createPopup(),this.$element().toggleClass(bN,i),this._setPopupOption("visible",i);const e={expanded:i,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",i?this._popupContentId:void 0,this.$element())},_createPopup(){this._$popup||(this._$popup=R("<div>").addClass(Wd).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())},_setPopupAriaLabel(){const i=this._popup.$overlayContent();this.setAria("label","Dropdown",i)},_renderPopupContent:ue,_renderPopup(){const i=Y(this._popupConfig(),this._options.cache("dropDownOptions"));delete i.closeOnOutsideClick,this._popup=this._createComponent(this._$popup,io,i),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){q.on(this._popup.$overlayContent(),be("keydown",this.NAME),i=>this._popupKeyHandler(i))},_popupKeyHandler(i){switch(oi(i)){case"tab":this._popupTabHandler(i);break;case"escape":this._popupEscHandler(i)}},_popupTabHandler(i){const e=R(i.target),t=i.shiftKey&&e.is(this._getFirstPopupElement());(!i.shiftKey&&e.is(this._getLastPopupElement())||t)&&(q.trigger(this.field(),"focus"),i.preventDefault())},_popupEscHandler(){q.trigger(this._input(),"focus"),this.close()},_setPopupContentId(i){this._popupContentId=`dx-${new hi}`,this.setAria("id",this._popupContentId,i)},_contentReadyHandler:ue,_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:Y(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>tu(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:i=>this._closeOutsideDropDownHandler(i),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:Wd,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:ue,_getPopupInitializedHandler(){const i=this.option("onPopupInitialized");return e=>{this._popupInitializedHandler(e),i&&this._popupInitializedAction({popup:e.component})}},_dimensionChanged(){if(qe()&&!this.$element().is(":visible")){this.close();return}this._updatePopupWidth()},_updatePopupWidth(){fg(this.option("dropDownOptions.width"))===void 0&&this._setPopupOption("width",()=>tu(this.$element()))},_popupPositionedHandler(i){var e;const{labelMode:t,stylingMode:n}=this.option();if(!this._popup)return;const s=this._popup.$overlayContent(),o=(e=i.position)===null||e===void 0||(e=e.v)===null||e===void 0?void 0:e.flip,r=t!=="hidden"&&t!=="outside"&&n==="outlined";if(i.position&&s.toggleClass(_N,o),o&&r&&this._label.isVisible()){const a=this._label.$element();Bi(s,{top:Hn(s).top-parseInt(a.css("fontSize"))})}},_popupShowingHandler:ue,_popupHidingHandler(){this.option("opened",!1)},_popupShownHandler(){var i;this._openAction(),(i=this._validationMessage)===null||i===void 0||i.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler(){var i;this._closeAction(),(i=this._validationMessage)===null||i===void 0||i.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide(){const i=this.option("validationMessagePosition");if(i!=="auto")return i;let e="bottom";if(this._popup&&this._popup.option("visible")){const{top:t}=Un.setup(this.$element()),{top:n}=Un.setup(this._popup.$content());e=t+this.option("popupPosition").offset.v>n?"bottom":"top"}return e},_closeOutsideDropDownHandler(i){let{target:e}=i;const t=R(e),n=this.getButton("dropDown"),s=n&&n.$element(),o=!!t.closest(this.$element()).length,r=!!t.closest(s).length;return!o&&!r},_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption(i,e){this._setWidgetOption("_popup",arguments)},_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems(){return this.option("applyValueMode")==="useButtons"?this._popupToolbarItemsConfig():[]},_getFirstPopupElement(){return R(this._popup.getFocusableElements()).first()},_getLastPopupElement(){return R(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig(){const i=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(i)},_applyButtonsLocation(i){const e=this.option("buttonsLocation"),t=i;if(e!=="default"){const n=va(e);ie(t,(s,o)=>{Y(o,{toolbar:n[0],location:n[1]})})}return t},_applyButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged(i){const e=Hi.getOptionsFromContainer(i);this._setPopupOption(e);const t=Object.keys(e);(t.includes("width")||t.includes("height"))&&this._dimensionChanged()},_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=R("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose(){this._detachFocusOutEvents(),this.callBase()},_optionChanged(i){var e;switch(i.name){case"width":case"height":this.callBase(i),(e=this._popup)===null||e===void 0||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(i),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":qe()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(i.value),this.callBase(i);break;default:this.callBase(i)}},open(){this.option("opened",!0)},close(){this.option("opened",!1)},field(){return ze(this._input())},content(){return this._popup?this._popup.content():null}});wt("dxDropDownEditor",mg);const Dv=Je(),CN=["startswith","contains","endwith","notcontains"],Av=Re.real().platform!=="android",mE=mg.inherit({_supportedKeys(){const i=this.callBase();return Y({},i,{tab(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);const t=R(this._list.option("focusedElement"));t.length&&this._setSelectedElement(t)}i.tab.apply(this,arguments)},space:ue,home:ue,end:ue})},_allowSelectItemByTab(){return this.option("opened")&&this.option("applyValueMode")==="instantly"},_setSelectedElement(i){const e=this._valueGetter(this._list._getItemData(i));this._setValue(e)},_setValue(i){this.option("value",i)},_getDefaultOptions(){return Y(this.callBase(),Y(Sv._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:re.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:ue,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems(){const{items:i}=this.option();i&&!i.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new km("item")})},_isEditable(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget(){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange(i,e,t){return i>t?e:i<e?t:i},_items(){const i=this._getPlainItems(!this._list&&this._dataSource.items());return new dn(i).filter("disabled","<>",!0).toArray()},_calcNextItem(i){const e=this._items(),t=this._fitIntoRange(this._getSelectedIndex()+i,0,e.length-1);return e[t]},_getSelectedIndex(){const i=this._items(),e=this.option("selectedItem");let t=-1;return ie(i,(n,s)=>{if(this._isValueEquals(s,e))return t=n,!1}),t},_createPopup(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const i=this._popup.$content();q.off(i,"mouseup"),q.on(i,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer(){const i=this.option("dropDownOptions.container"),e=i&&R(i);if(e&&e.length&&!gi(e.get(0))){const t=[].slice.call(e.parents());t.unshift(e.get(0)),ie(t,(n,s)=>{if(s===R("body").get(0))return!1;if(Dv.getComputedStyle(s).overflowY==="hidden")return this._$customBoundaryContainer=R(s),!1})}},_popupWrapperClass:()=>"dx-dropdownlist-popup-wrapper",_renderInputValue(){const i=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(i,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,i))},_loadInputValue(i,e){return this._loadItem(i).always(e)},_getItemFromPlain(i,e){let t,n;return e&&typeof i!="object"&&(e.itemByValue||(e.itemByValue={},t=this._getPlainItems(),t.forEach(function(s){e.itemByValue[this._valueGetter(s)]=s},this)),n=e.itemByValue[i]),n||(t=this._getPlainItems(),n=ln(t,s=>this._isValueEquals(this._valueGetter(s),i))[0]),n},_loadItem(i,e){const t=this._getItemFromPlain(i,e);return t!==void 0?ae().resolve(t).promise():this._loadValue(i)},_getPlainItems(i){let e=[];i=i||this.option("items")||this._dataSource.items()||[];for(let t=0;t<i.length;t++)i[t]&&i[t].items?e=e.concat(i[t].items):e.push(i[t]);return e},_updateActiveDescendant(i){var e;const t=this.option("opened"),n=(e=this._list)===null||e===void 0?void 0:e.getFocusedItemId(),s=R(`#${n}`).length>0,o=t&&s&&n;this.setAria({activedescendant:o||null},i)},_setSelectedItem(i){const e=this._displayValue(i);this.option("selectedItem",ci(i,null)),this.option("displayValue",e)},_displayValue(i){return this._displayGetter(i)},_refreshSelected(){const i={};this._listItemElements().each((e,t)=>{const n=R(t),s=this._valueGetter(n.data("dxListItemData"));this._isSelectedValue(s,i)?this._list.selectItem(n):this._list.unselectItem(n)})},_popupShownHandler(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue(i){return this._isValueEquals(i,this.option("value"))},_validateSearchMode(){const i=this.option("searchMode"),e=i.toLowerCase();if(!CN.includes(e))throw mt.Error("E1019",i)},_clearSelectedItem(){this.option("selectedItem",null)},_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(()=>{this._isCustomValueAllowed()||this._clearSelectedItem()})},_isCustomValueAllowed(){return this.option("displayCustomValue")},clear(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):R()},_popupConfig(){return Y(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent(){this.callBase(),this._renderList()},_getKeyboardListeners(){const i=this._canListHaveFocus();return this.callBase().concat([!i&&this._list])},_renderList(){this._listId=`dx-${new hi()._value}`;const i=R("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=i,this._list=this._createComponent(i,wa,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick(){const i=be("mousedown","dxDropDownList");q.off(this._$list,i),q.on(this._$list,i,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_getAriaHasPopup:()=>"listbox",_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:()=>Re.real().deviceType==="desktop",_listConfig(){const i={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?this.option("hoverStateEnabled"):!1,focusStateEnabled:this._isDesktopDevice()?this.option("focusStateEnabled"):!1};return this._canListHaveFocus()||(i.tabIndex=null),i},_canListHaveFocus:()=>!1,_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:()=>({paginate:!1}),_getGroupedOption(){return this.option("grouped")},_dataSourceFromUrlLoadMode:()=>"raw",_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption(i,e){this._setWidgetOption("_list",arguments)},_listItemClickAction(i){this._listItemClickHandler(i),this._itemClickAction(i)},_listItemClickHandler:ue,_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()},_canKeepDataSource(){const i=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!i&&!this._isLastMinSearchLengthExceeded},_searchValue(){return this._input().val()||""},_getSearchEvent(){return be("input",`${this.NAME}Search`)},_getCompositionStartEvent(){return be("compositionstart",`${this.NAME}CompositionStart`)},_getCompositionEndEvent(){return be("compositionend",`${this.NAME}CompositionEnd`)},_getSetFocusPolicyEvent(){return be("input",`${this.NAME}FocusPolicy`)},_renderEvents(){this.callBase(),q.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(q.on(this._input(),this._getSearchEvent(),i=>{this._searchHandler(i)}),Av&&(q.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),q.on(this._input(),this._getCompositionEndEvent(),i=>{this._isTextCompositionInProgress(void 0),this._searchHandler(i,this._searchValue())})))},_shouldRenderSearchEvent(){return this.option("searchEnabled")},_refreshEvents(){q.off(this._input(),this._getSearchEvent()),q.off(this._input(),this._getSetFocusPolicyEvent()),Av&&(q.off(this._input(),this._getCompositionStartEvent()),q.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress(i){if(arguments.length)this._isTextComposition=i;else return this._isTextComposition},_searchHandler(i,e){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}const t=this.option("searchTimeout");t?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},t)):this._searchDataSource(e)},_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(i)},_filterDataSource(i){this._clearSearchTimer();const e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(i),e.load().done(this._dataSourceFiltered.bind(this,i))},_clearFilter(){const i=this._dataController;i.searchValue()&&i.searchValue(null)},_dataSourceFiltered(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup(){return this._hasItemsToShow()},_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const i=this._shouldOpenPopup();i&&!this._isFocused()||(this.option("opened",i),i&&(this._updatePopupWidth(),this._updateListDimensions()))},_dataSourceChangedHandler(i){this._dataController.pageIndex()===0?this.option().items=i:this.option().items=this.option().items.concat(i)},_hasItemsToShow(){const t=(this._dataController.items()||[]).length;return!!(this._needPassDataSourceToList()&&t)},_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged(){this.callBase(),this._updateListDimensions()},_needPopupRepaint(){const i=this._dataController,e=i.pageIndex(),t=U(this._pageIndex)&&e<=this._pageIndex||i.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,t},_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight(){const i=this.$element(),e=this._$customBoundaryContainer,t=i.offset().top-(e?e.offset().top:0),n=rt(Dv),s=e?Math.min(rt(e),n):n,o=Math.max(t,s-t-rt(i));return Math.min(.5*s,o)},_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)},_setSubmitValue(){const i=this.option("value"),e=this._shouldUseDisplayValue(i)?this._displayGetter(i):i;this._getSubmitElement().val(e)},_shouldUseDisplayValue(i){return this.option("valueExpr")==="this"&&We(i)},_optionChanged(i){switch(this._dataExpressionOptionChanged(i),i.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(i.name,i.value),this.callBase(i);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(i.name);break;case"displayValue":this.option("text",i.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":i.previousValue!==i.value&&this._selectionChangedAction({selectedItem:i.value});break;default:this.callBase(i)}}}).include(Sv,HS);wt("dxDropDownList",mE);const gg=mE.inherit({_supportedKeys(){const i=this,e=this.callBase(),t=function(s){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(s.preventDefault(),this.clear()),this._savedTextRemoveEvent=s,this._preventSubstitution=!0},n=function(){i.option("searchEnabled")&&i._valueSubstituted()&&i._searchHandler()};return Y({},e,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(s){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},downArrow(s){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},leftArrow(){var s;n(),(s=e.leftArrow)===null||s===void 0||s.apply(this,arguments)},rightArrow(){n(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home(){n(),e.home&&e.home.apply(this,arguments)},end(){n(),e.end&&e.end.apply(this,arguments)},escape(){const s=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),s??!0},enter(s){const o=this.option("opened"),r=this._input().val().trim(),a=r&&this._list&&!this._list.option("focusedElement");if(!r&&U(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(s),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return s.preventDefault(),a&&(o&&this._toggleOpenState(),this._valueChangeEventHandler(s)),o;if(e.enter&&e.enter.apply(this,arguments))return o}},space(s){const o=this.option("opened"),r=this.option("searchEnabled"),a=this.option("acceptCustomValue");if(!(!o||r||a))return s.preventDefault(),this._valueChangeEventHandler(s),!0},backspace:t,del:t})},_getDefaultOptions(){return Y(this.callBase(),{placeholder:re.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(i){U(i.customItem)||(i.customItem=i.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return`${this.callBase()} dx-selectbox-popup-wrapper`},_setDeprecatedOptions(){this.callBase(),Y(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){if(!this._searchValue()){this._focusListElement(null);return}const{items:e,selectedItem:t}=this.option(),n=this._list._itemElements(),s=(e==null?void 0:e.indexOf(t))??-1,o=s!==-1&&!this._isCustomItemSelected()?n.eq(s):null;this._focusListElement(o)},_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue")){this._focusListElement(null);return}const t=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(t)},_focusListElement(i){this._preventInputValueRender=!0,this._list.option("focusedElement",ze(i)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),!(this._dataController.paginate()&&this._needPopupRepaint())&&this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),ae().resolve()},_renderInputValue(){return this.callBase().always(()=>{this._renderInputValueAsync()})},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})},_renderInputValueImpl(){return this._renderField(),ae().resolve()},_setNextItem(i){const e=this._calcNextItem(i),t=this._valueGetter(e);this._setValue(t)},_setNextValue(i){(this._dataController.isLoaded()?ae().resolve():this._dataController.load()).done(()=>{const t=this._getSelectedIndex(),n=this._dataController.pageSize(),s=this._dataController.isLastPage(),o=t===this._items().length-1;this._saveValueChangeEvent(i);const r=oi(i)==="downArrow"?1:-1;n&&!s&&o&&r>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,r))):this._setNextItem(r)})},_setSelectedItem(i){const e=!this._isCustomValueAllowed()&&i===void 0;this.callBase(e?null:i),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(i){return i=!U(i)&&this._isCustomValueAllowed()?this.option("value"):i,this.callBase(i)},_listConfig(){const i=Y(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&Y(i,{showSelectionControls:!0,selectByClick:!0}),i},_listFocusedItemChangeHandler(i){if(this._preventInputValueRender)return;const e=i.component,t=R(e.option("focusedElement")),n=e._getItemData(t);this._updateField(n)},_updateField(i){if(!(this._getTemplateByOption("fieldTemplate")&&this.option("fieldTemplate"))){const t=this._displayGetter(i);this.option("text",t),this._renderDisplayText(t);return}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):ue},_selectionChangeHandler(i){ie(i.addedItems||[],(e,t)=>{this._setValue(this._valueGetter(t))})},_getActualSearchValue(){return this._dataController.searchValue()},_isInlineAutocompleteEnabled(){return this.option("searchEnabled")&&!this.option("acceptCustomValue")&&this.option("searchMode")==="startswith"},_getAriaAutocomplete(){const{disabled:i,readOnly:e,searchEnabled:t}=this.option();return t&&!(e||i)?this._isInlineAutocompleteEnabled()?"both":"list":"none"},_toggleOpenState(i){if(!this.option("disabled")){if(i=arguments.length?i:!this.option("opened"),!i&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&i)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const t=this._getActualSearchValue();t&&this._wasSearch(!0),this._filterDataSource(t||null)}else this._setListOption("items",[]);i&&this._scrollToSelectedItem(),this.callBase(i)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){const i=this.option("selectedItem");if(i===null)return!1;const e=this._displayGetter(i),t=e?String(e):"",n=this._searchValue();return t===n},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(i){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(()=>{const{acceptCustomValue:e,text:t,selectedItem:n}=this.option();if(e){!i&&!this._isValueChanging&&(this._updateField(n??this._createCustomItem(t)),this._clearFilter());return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always(s=>{const o=ci(s,n);this._setSelectedItem(o),this._updateField(o),this._clearFilter()})})},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(i){return this._preventNestedFocusEvent(i)||this._valueChangeEventIncludesBlur()},_focusOutHandler(i){this._isPreventedFocusOutEvent(i)||(this._isOverlayNestedTarget(i.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(i)),i.target=this._input().get(0),this.callBase(i)},_cancelSearchIfNeed(i){const{searchEnabled:e}=this.option(),t=this._isOverlayNestedTarget(i==null?void 0:i.relatedTarget);if(this._wasSearch()&&e&&!t){var s;const o=(s=this._popup)===null||s===void 0?void 0:s._hideAnimationProcessing;this._clearSearchTimer(),o?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(i){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=i},_isOverlayNestedTarget:i=>!!R(i).closest(".dx-selectbox-popup-wrapper").length,_clearTextValue(){const i=this.option("selectedItem"),e=this._displayGetter(i);i&&e!==""&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){const i=_e.getActiveElement(this.element());return this.callBase()&&R(i).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){const i=this._list&&this.option("opened")&&R(this._list.option("focusedElement"));return i&&i.length?this._list._getItemData(i):this.option("selectedItem")},_isSelectedValue(i){return this._isValueEquals(i,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&this.option("selectionMode")!=="single")},_listItemClickHandler(i){const e=this._getCurrentValue();this._focusListElement(R(i.itemElement)),this._saveValueChangeEvent(i.event),this._completeSelection(this._valueGetter(i.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(i.itemData)&&this._updateField(i.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(i){this._setValue(i)},_loadItem(i,e){const t=this,n=ae();return this.callBase(i,e).done(s=>{n.resolve(s)}).fail(s=>{if(s!=null&&s.shouldSkipCallback)return;const o=t.option("selectedItem");t.option("acceptCustomValue")&&i===t._valueGetter(o)?n.resolve(o):n.reject()}),n.promise()},_loadInputValue(i,e){return this._loadItemDeferred=this._loadItem(i).always(e),this._loadItemDeferred},_isCustomItemSelected(){const i=this.option("selectedItem"),e=this._searchValue(),t=this._displayGetter(i);return!t||e!==t.toString()},_valueChangeEventHandler(i){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(i))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(i){const e={text:i},t=this._customItemCreatingAction(e),n=ci(t,e.customItem);return U(t)&&Pt.log("W0015","onCustomItemCreating","customItem"),n},_customItemAddedHandler(i){const e=this._searchValue(),t=this._createCustomItem(e);if(this._saveValueChangeEvent(i),t===void 0)throw this._renderValue(),Pt.Error("E0121");ba(t)?Pi(t).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(t)},_setCustomItem(i){this._disposed||(i=i||null,this.option("selectedItem",i),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(i)),this._renderDisplayText(this._displayGetter(i)),this._isValueChanging=!1)},_clearValueHandler(i){return this._preventFiltering=!0,this.callBase(i),this._searchCanceled(),!1},_wasSearch(i){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=i},_searchHandler(){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments)},_dataSourceFiltered(i){this.callBase(),i!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){const i=this._input().get(0),e=this._searchValue().length,t=i.selectionStart===0&&i.selectionEnd===e,n=i.selectionStart!==i.selectionEnd,s=e===i.selectionEnd;return this._wasSearch()&&n&&!t&&s&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()},_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}const i=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!i)return;const e=this._input(),t=e.val().length;if(t===0)return;const n=e.get(0),s=this._displayGetter(i).toString();n.value=s,this._caret({start:t,end:s.length})},_dispose(){this._renderInputValueAsync=ue,delete this._loadItemDeferred,this.callBase()},_optionChanged(i){switch(i.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":this.callBase(i),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(i)}}});wt("dxSelectBox",gg);const xN="dxSwipeable",wN={onStart:NS,onUpdated:LS,onEnd:sg,onCancel:"dxswipecancel"},iu=Ss.inherit({_getDefaultOptions:function(){return Y(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),this.option("disabled"))return;const i=this.NAME;this._createEventData(),ie(wN,(function(e,t){const n=this._createActionByOption(e,{context:this});t=be(t,i),q.on(this.$element(),t,this._eventData,function(s){return n({event:s})})}).bind(this))},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){q.off(this.$element(),".dxSwipeable")},_optionChanged:function(i){switch(i.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(i)}},_useTemplates:function(){return!1}});Ul(iu,xN);class _g{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,t){this.calendar._dateValue(e,t)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,t){this.calendar._updateAriaSelected(e,t),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,t){var n,s;U(e)&&!Array.isArray(e)&&(e=[e]),U(t)&&!Array.isArray(t)&&(t=[t]),e=((n=e)===null||n===void 0?void 0:n.map(o=>this._convertToDate(o)))||[],t=((s=t)===null||s===void 0?void 0:s.map(o=>this._convertToDate(o)))||[],this._updateViewsValue(e),this.updateAriaSelected(e,t),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){const t=this.calendar._dateOption("min"),n=this.calendar._dateOption("max"),s=U(t)&&e<t&&!Ae.sameDate(t,e),o=U(n)&&e>n&&!Ae.sameDate(n,e);return this.calendar._view.isDateDisabled(e)||s||o}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,t){this.calendar._updateViewsOption(e,t)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){const{selectionMode:e,selectWeekOnClick:t}=this.calendar.option();return t&&e!=="single"}}class SN extends _g{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multiple",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){const n=[...this.dateOption("value")],s=n.findIndex(o=>(o==null?void 0:o.toDateString())===e.toDateString());s>-1?n.splice(s,1):n.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(n,t)}updateAriaSelected(e,t){e??(e=this.dateOption("value")),t??(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){const e=this.dateOption("value").filter(t=>t);return this._getLowestDateInArray(e)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){let{rowDates:t,event:n}=e;const s=t.filter(o=>!this._isDateDisabled(o));this.dateValue(s,n)}}class EN extends OS{_getDefaultOptions(){return ve({},super._getDefaultOptions(),{onClick:void 0,onCaptionClick:void 0,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>tn(),options:{type:"default",stylingMode:"text"}},{device:()=>nn(),options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),R(this.element()).addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){const{rtlEnabled:e,type:t,stylingMode:n,focusStateEnabled:s}=this.option();this._prevButton=this._createComponent(R("<div>"),$i,{focusStateEnabled:s,icon:e?"chevronright":"chevronleft",onClick:l=>{this._clickAction({direction:-1,event:l})},type:t,stylingMode:n,integrationOptions:{}});const o=R(this._prevButton.element()).addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent(R("<div>"),$i,{focusStateEnabled:s,icon:e?"chevronleft":"chevronright",onClick:l=>{this._clickAction({direction:1,event:l})},type:t,stylingMode:n,integrationOptions:{}});const r=R(this._nextButton.element()).addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent(R("<div>").addClass("dx-calendar-caption-button"),$i,{focusStateEnabled:s,onClick:l=>{this._captionClickAction({event:l})},type:t,stylingMode:n,template:(l,d)=>{const{text:c}=this.option();c.split(" - ").forEach(u=>{R(d).append(R("<span>").addClass("dx-button-text").text(u))})},integrationOptions:{}});const a=this._caption.$element();this.$element().append(o,a,r)}_renderCaption(){var e;(e=this._caption)===null||e===void 0||e.option("text",this.option("text"))}toggleButton(e,t){const n=`_${e}Button`,s=this[n];s&&(s.option("disabled",t),s.$element().toggleClass("dx-calendar-disabled-navigator-link",t))}_optionChanged(e){e.name==="text"?this._renderCaption():super._optionChanged(e)}}class IN extends _g{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){const e=this._getValue(),t=this._getDaysInRange(e[0],e[1]);return{value:e,range:t,selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){const[n,s]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.calendar.option("_allowChangeSelectionOrder")===!0?(this.calendar._valueSelected=!0,this.calendar.option("_currentSelection")==="startDate"?this.calendar._convertToDate(e)>this.calendar._convertToDate(s)?this.dateValue([e,null],t):this.dateValue([e,s],t):this.calendar._convertToDate(e)>=this.calendar._convertToDate(n)?this.dateValue([n,e],t):this.dateValue([e,null],t)):!n||s?this.dateValue([e,null],t):this.dateValue(n<e?[n,e]:[e,n],t)}updateAriaSelected(e,t){e??(e=this._getValue()),t??(t=[]),super.updateAriaSelected(e,t)}processValueChanged(e,t){super.processValueChanged(e,t);const n=this._getRange();this._updateViewsOption("range",n)}getDefaultCurrentDate(){const{_allowChangeSelectionOrder:e,_currentSelection:t}=this.calendar.option(),n=this.dateOption("value");if(e){if(t==="startDate"&&n[0])return n[0];if(t==="endDate"&&n[1])return n[1]}const s=n.filter(o=>o);return this._getLowestDateInArray(s)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){const e=this.dateOption("value");if(!e.length)return e;let[t,n]=e;return t&&n&&t>n&&([t,n]=[n,t]),[t,n]}_getRange(){const[e,t]=this._getValue();return this._getDaysInRange(e,t)}_getDaysInRange(e,t){if(!e||!t)return[];const{currentDate:n,viewsCount:s}=this.calendar.option(),o=this.calendar._isAdditionalViewDate(n),r=Ae.getFirstMonthDate(Ae.addDateInterval(n,"month",o?-2:-1)),a=Ae.getLastMonthDate(Ae.addDateInterval(n,"month",o?1:s)),l=new Date(Math.max(r,e)),d=new Date(Math.min(a,t));return[...Ae.getDatesOfInterval(l,d,864e5),d]}_cellHoverHandler(e){const t=this._isMaxZoomLevel(),[n,s]=this._getValue(),{_allowChangeSelectionOrder:o,_currentSelection:r}=this.calendar.option();if(t){if(n&&!s&&!(o&&r==="startDate")){if(e.value>n){this._updateViewsOption("hoveredRange",this._getDaysInRange(n,e.value));return}}else if(!n&&s&&!(o&&r==="endDate")){if(e.value<s){this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,s));return}}else if(n&&s){if(r==="startDate"&&e.value<n){this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,n));return}if(r==="endDate"&&e.value>s){this._updateViewsOption("hoveredRange",this._getDaysInRange(s,e.value));return}}this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){let{rowDates:t,event:n}=e;const s=t.filter(r=>!this._isDateDisabled(r)),o=s.length?[s[0],s[s.length-1]]:[null,null];this.dateValue(o,n)}}class TN extends _g{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,t){this.skipNavigate(),this.dateValue(e,t)}updateAriaSelected(e,t){e??(e=[this.dateOption("value")]),t??(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}}const{abstract:as}=Hi,kv="td:not(.dx-calendar-week-number-cell)",Uh=be(kt,"dxCalendar"),Ov=be(ql,"dxCalendar"),DN={month:re.format("dxCalendar-currentDay"),year:re.format("dxCalendar-currentMonth"),decade:re.format("dxCalendar-currentYear"),century:re.format("dxCalendar-currentYearRange")},jo={single:"single",multiple:"multiple",range:"range"},jd=Hi.inherit({_getViewName:()=>"base",_getDefaultOptions(){return Y(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup(){this.callBase(),this._renderImpl()},_renderImpl(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents(),this._updateTableAriaLabel()},_getLocalizedWidgetName(){return re.format("dxCalendar-ariaWidgetName")},_getSingleModeAriaLabel(){const{value:i}=this.option(),e=this._getLocalizedWidgetName(),t=ct.format(i,"date"),n=re.format("dxCalendar-selectedDate",t);return`${e}. ${n}`},_getRangeModeAriaLabel(){const{value:i}=this.option(),e=this._getLocalizedWidgetName(),[t,n]=i,s=ct.format(t,"date"),o=ct.format(n,"date"),r=t&&n?re.format("dxCalendar-selectedDateRange",s,o):re.format("dxCalendar-selectedDate",s??o);return`${e}. ${r}`},_getMultipleModeAriaLabel(){return this._getLocalizedWidgetName()},_getTableAriaLabel(){const{value:i,selectionMode:e}=this.option();if(!i||Array.isArray(i)&&!i.filter(Boolean).length)return this._getLocalizedWidgetName();switch(e){case jo.single:return this._getSingleModeAriaLabel();case jo.range:return this._getRangeModeAriaLabel();case jo.multiple:return this._getMultipleModeAriaLabel()}},_updateTableAriaLabel(){const i=this._getTableAriaLabel();this.setAria({label:i},this._$table)},_createTable(){return this._$table=R("<table>"),this.setAria({role:"grid"},this._$table),this._$table},_renderBody(){this.$body=R("<tbody>").appendTo(this._$table);const i={cellDate:this._getFirstCellData(),prevCellDate:null};for(let e=0,t=this.option("rowCount");e<t;e++){i.row=this._createRow();for(let n=0,s=this.option("colCount");n<s;n++)this._renderCell(i,n);this._renderWeekNumberCell(i)}},_createRow(){const i=_e.createElement("tr");return this.setAria("role","row",R(i)),this.$body.get(0).appendChild(i),i},_createCell(i,e){const t=_e.createElement("td"),n=R(t);return t.className=this._getClassNameByDate(i,e),t.setAttribute("data-value",vi.serializeDate(i,Ae.getShortDateFormat())),di(t,"dxDateValueKey",i),this.setAria({role:"gridcell",selected:!1,label:this.getCellAriaLabel(i)},n),{cell:t,$cell:n}},_renderCell(i,e){const{cellDate:t,prevCellDate:n,row:s}=i;n&&Ae.fixTimezoneGap(n,t),i.prevCellDate=t;const{cell:o,$cell:r}=this._createCell(t,e),a=this.option("cellTemplate");R(s).append(o),a?a.render(this._prepareCellTemplateData(t,e,r)):o.innerHTML=this._getCellText(t),i.cellDate=this._getNextCellData(t)},_getClassNameByDate(i,e){let t="dx-calendar-cell";return this._isTodayCell(i)&&(t+=" dx-calendar-today"),(this._isDateOutOfRange(i)||this.isDateDisabled(i))&&(t+=" dx-calendar-empty-cell"),this._isOtherView(i)&&(t+=" dx-calendar-other-view"),this.option("selectionMode")===jo.range&&(e===0&&(t+=" dx-calendar-cell-start-in-row"),e===this.option("colCount")-1&&(t+=" dx-calendar-cell-end-in-row"),this._isStartDayOfMonth(i)&&(t+=" dx-calendar-cell-start"),this._isEndDayOfMonth(i)&&(t+=" dx-calendar-cell-end")),t},_prepareCellTemplateData(i,e,t){const n=i instanceof Date,s=n?this._getCellText(i):i,o=n?i:void 0,r=this._getViewName();return{model:{text:s,date:o,view:r},container:ze(t),index:e}},_renderEvents(){this._createCellClickAction(),q.off(this._$table,Uh),q.on(this._$table,Uh,kv,e=>{R(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellClickAction({event:e,value:R(e.currentTarget).data("dxDateValueKey")})});const{selectionMode:i}=this.option();q.off(this._$table,Ov),i===jo.range&&(this._createCellHoverAction(),q.on(this._$table,Ov,kv,e=>{R(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellHoverAction({event:e,value:R(e.currentTarget).data("dxDateValueKey")})})),i!==jo.single&&(this._createWeekNumberCellClickAction(),q.on(this._$table,Uh,".dx-calendar-week-number-cell",e=>{const t=R(e.currentTarget).closest("tr"),n=t.find(".dx-calendar-cell").first().data("dxDateValueKey"),s=t.find(".dx-calendar-cell").last().data("dxDateValueKey"),o=[...Ae.getDatesOfInterval(n,s,864e5),s];this._weekNumberCellClickAction({event:e,rowDates:o})}))},_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler(){const i=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(i)?this._getDefaultDisabledDatesHandler(i):i||ue},_getDefaultDisabledDatesHandler:()=>ue,_isTodayCell:as,_isDateOutOfRange:as,isDateDisabled(i){const e={date:i,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:as,_isStartDayOfMonth:as,_isEndDayOfMonth:as,_getCellText:as,_getFirstCellData:as,_getNextCellData:as,_renderContouredDate(i){if(!this.option("focusStateEnabled"))return;i=i||this.option("contouredDate");const e=this._getContouredCell(),t=this._getCellByDate(i);e.removeClass("dx-calendar-contoured-date"),i&&t.addClass("dx-calendar-contoured-date")},_getContouredCell(){return this._$table.find(".dx-calendar-contoured-date")},_renderValue(){if(!this.option("allowValueSelection"))return;let i=this.option("value");Array.isArray(i)||(i=[i]),this._updateSelectedClass(i)},_updateSelectedClass(i){var e;this._isRangeMode()&&!this._isMonthView()||((e=this._$selectedCells)===null||e===void 0||e.forEach(t=>{t.removeClass("dx-calendar-selected-date")}),this._$selectedCells=i.map(t=>this._getCellByDate(t)),this._$selectedCells.forEach(t=>{t.addClass("dx-calendar-selected-date")}))},_renderRange(){var i,e,t,n,s,o,r,a;const{allowValueSelection:l,value:d,range:c}=this.option();!l||!this._isRangeMode()||!this._isMonthView()||((i=this._$rangeCells)===null||i===void 0||i.forEach(h=>{h.removeClass("dx-calendar-cell-in-range")}),(e=this._$hoveredRangeCells)===null||e===void 0||e.forEach(h=>{h.removeClass("dx-calendar-cell-range-hover")}),(t=this._$rangeStartHoverCell)===null||t===void 0||t.removeClass("dx-calendar-cell-range-hover-start"),(n=this._$rangeEndHoverCell)===null||n===void 0||n.removeClass("dx-calendar-cell-range-hover-end"),(s=this._$rangeStartDateCell)===null||s===void 0||s.removeClass("dx-calendar-range-start-date"),(o=this._$rangeEndDateCell)===null||o===void 0||o.removeClass("dx-calendar-range-end-date"),this._$rangeCells=c.map(h=>this._getCellByDate(h)),this._$rangeStartDateCell=this._getCellByDate(d[0]),this._$rangeEndDateCell=this._getCellByDate(d[1]),this._$rangeCells.forEach(h=>{h.addClass("dx-calendar-cell-in-range")}),(r=this._$rangeStartDateCell)===null||r===void 0||r.addClass("dx-calendar-range-start-date"),(a=this._$rangeEndDateCell)===null||a===void 0||a.addClass("dx-calendar-range-end-date"))},_renderHoveredRange(){var i,e,t,n,s;const{allowValueSelection:o,hoveredRange:r}=this.option();!o||!this._isRangeMode()||!this._isMonthView()||((i=this._$hoveredRangeCells)===null||i===void 0||i.forEach(a=>{a.removeClass("dx-calendar-cell-range-hover")}),(e=this._$rangeStartHoverCell)===null||e===void 0||e.removeClass("dx-calendar-cell-range-hover-start"),(t=this._$rangeEndHoverCell)===null||t===void 0||t.removeClass("dx-calendar-cell-range-hover-end"),this._$hoveredRangeCells=r.map(a=>this._getCellByDate(a)),this._$rangeStartHoverCell=this._getCellByDate(r[0]),this._$rangeEndHoverCell=this._getCellByDate(r[r.length-1]),this._$hoveredRangeCells.forEach(a=>{a.addClass("dx-calendar-cell-range-hover")}),(n=this._$rangeStartHoverCell)===null||n===void 0||n.addClass("dx-calendar-cell-range-hover-start"),(s=this._$rangeEndHoverCell)===null||s===void 0||s.addClass("dx-calendar-cell-range-hover-end"))},_isMonthView(){return this.option("zoomLevel")==="month"},_isRangeMode(){return this.option("selectionMode")===jo.range},_getCurrentDateFormat:()=>null,getCellAriaLabel(i){const e=this._getViewName(),t=this._isTodayCell(i),n=this._getCurrentDateFormat(),s=n?ct.format(i,n):this._getCellText(i);return t?`${s}. ${DN[e]}`:s},_getFirstAvailableDate(){let i=this.option("date");const e=this.option("min");return i=Ae.getViewFirstCellDate(this._getViewName(),i),new Date(e&&i<e?e:i)},_getCellByDate:as,isBoundary:as,_optionChanged(i){const{name:e,value:t}=i;switch(e){case"value":this._renderValue(),this._updateTableAriaLabel();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(t);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(i)}}}),AN={month:jd.inherit({_getViewName:()=>"month",_getCurrentDateFormat:()=>"longdate",_getDefaultOptions(){return Y(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl(){this.callBase(),this._renderHeader()},_renderBody(){this.callBase(),this._$table.find(".dx-calendar-other-view").addClass("dx-calendar-other-month")},_renderFocusTarget:ue,_renderHeader(){const i=R("<tr>"),e=R("<thead>").append(i);this._$table.prepend(e);for(let t=0,n=this.option("colCount");t<n;t++)this._renderHeaderCell(t,i);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(i)},_renderHeaderCell(i,e){const{firstDayOfWeek:t}=this.option(),{full:n,abbreviated:s}=this._getDayCaption(t+i),o=R("<th>").attr({scope:"col",abbr:n}).text(s);e.append(o)},_renderWeekHeaderCell(i){const e=R("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});i.prepend(e)},_renderWeekNumberCell(i){const{showWeekNumbers:e,cellTemplate:t,selectionMode:n,selectWeekOnClick:s}=this.option();if(!e)return;const o=this._getWeekNumber(i.prevCellDate),r=_e.createElement("td"),a=R(r);r.className="dx-calendar-week-number-cell",n!=="single"&&s&&a.addClass("dx-calendar-week-selection"),t?t.render(this._prepareCellTemplateData(o,-1,a)):r.innerHTML=o,i.row.prepend(r),this.setAria({role:"gridcell",label:`Week ${o}`},a)},_getWeekNumber(i){const{weekNumberRule:e,firstDayOfWeek:t}=this.option();return e==="auto"?Ae.getWeekNumber(i,t,t===1?"firstFourDays":"firstDay"):Ae.getWeekNumber(i,t,e)},getNavigatorCaption(){return ct.format(this.option("date"),"monthandyear")},_isTodayCell(i){const e=this.option("_todayDate")();return Ae.sameDate(i,e)},_isDateOutOfRange(i){const e=this.option("min"),t=this.option("max");return!Ae.dateInRange(i,e,t,"date")},_isOtherView(i){return i.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth(i){return Ae.sameDate(i,Ae.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth(i){return Ae.sameDate(i,Ae.getLastMonthDate(this.option("date")))},_getCellText:i=>ct.format(i,"d"),_getDayCaption(i){const e=this.option("colCount"),t=i%e;return{full:ct.getDayNames()[t],abbreviated:ct.getDayNames("abbreviated")[t]}},_getFirstCellData(){const{firstDayOfWeek:i}=this.option(),e=Ae.getFirstMonthDate(this.option("date"));let t=i-e.getDay();const n=this.option("colCount");return t>=0&&(t-=n),e.setDate(e.getDate()+t),e},_getNextCellData(i){return i=new Date(i),i.setDate(i.getDate()+1),i},_getCellByDate(i){return this._$table.find(`td[data-value='${vi.serializeDate(i,Ae.getShortDateFormat())}']`)},isBoundary(i){return Ae.sameMonthAndYear(i,this.option("min"))||Ae.sameMonthAndYear(i,this.option("max"))},_getDefaultDisabledDatesHandler:i=>function(e){if(i.some(n=>Ae.sameDate(n,e.date)))return!0}}),year:jd.inherit({_getViewName:()=>"year",_getCurrentDateFormat:()=>"monthandyear",_isTodayCell(i){const e=this.option("_todayDate")();return Ae.sameMonthAndYear(i,e)},_isDateOutOfRange(i){return!Ae.dateInRange(i,Ae.getFirstMonthDate(this.option("min")),Ae.getLastMonthDate(this.option("max")))},_isOtherView:()=>!1,_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:i=>ct.getMonthNames("abbreviated")[i.getMonth()],_getFirstCellData(){const i=this.option("date"),e=new Date(i);return e.setDate(1),e.setMonth(0),e},_getNextCellData(i){return i=new Date(i),i.setMonth(i.getMonth()+1),i},_getCellByDate(i){const e=new Date(i);return e.setDate(1),this._$table.find(`td[data-value='${vi.serializeDate(e,Ae.getShortDateFormat())}']`)},getNavigatorCaption(){return ct.format(this.option("date"),"yyyy")},isBoundary(i){return Ae.sameYear(i,this.option("min"))||Ae.sameYear(i,this.option("max"))},_renderWeekNumberCell:ue}),decade:jd.inherit({_getViewName:()=>"decade",_isTodayCell(i){const e=this.option("_todayDate")();return Ae.sameYear(i,e)},_isDateOutOfRange(i){const e=this.option("min"),t=this.option("max");return!Ae.dateInRange(i.getFullYear(),e&&e.getFullYear(),t&&t.getFullYear())},_isOtherView(i){const e=new Date(i);return e.setMonth(1),!Ae.sameDecade(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:i=>ct.format(i,"yyyy"),_getFirstCellData(){const i=Ae.getFirstYearInDecade(this.option("date"))-1;return Ae.createDateWithFullYear(i,0,1)},_getNextCellData(i){return i=new Date(i),i.setFullYear(i.getFullYear()+1),i},getNavigatorCaption(){const i=this.option("date"),e=Ae.getFirstYearInDecade(i),t=new Date(i),n=new Date(i);return t.setFullYear(e),n.setFullYear(e+9),`${ct.format(t,"yyyy")}-${ct.format(n,"yyyy")}`},_isValueOnCurrentView:(i,e)=>Ae.sameDecade(i,e),_getCellByDate(i){const e=new Date(i);return e.setDate(1),e.setMonth(0),this._$table.find(`td[data-value='${vi.serializeDate(e,Ae.getShortDateFormat())}']`)},isBoundary(i){return Ae.sameDecade(i,this.option("min"))||Ae.sameDecade(i,this.option("max"))},_renderWeekNumberCell:ue}),century:jd.inherit({_getViewName:()=>"century",_isTodayCell(i){const e=this.option("_todayDate")();return Ae.sameDecade(i,e)},_isDateOutOfRange(i){const e=Ae.getFirstYearInDecade(i),t=Ae.getFirstYearInDecade(this.option("min")),n=Ae.getFirstYearInDecade(this.option("max"));return!Ae.dateInRange(e,t,n)},_isOtherView(i){const e=new Date(i);return e.setMonth(1),!Ae.sameCentury(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText(i){const e=ct.format(i,"yyyy"),t=new Date(i);return t.setFullYear(t.getFullYear()+9),`${e} - ${ct.format(t,"yyyy")}`},_getFirstCellData(){const i=Ae.getFirstDecadeInCentury(this.option("date"))-10;return Ae.createDateWithFullYear(i,0,1)},_getNextCellData(i){return i=new Date(i),i.setFullYear(i.getFullYear()+10),i},_getCellByDate(i){const e=new Date(i);return e.setDate(1),e.setMonth(0),e.setFullYear(Ae.getFirstYearInDecade(e)),this._$table.find(`td[data-value='${vi.serializeDate(e,Ae.getShortDateFormat())}']`)},getNavigatorCaption(){const i=this.option("date"),e=Ae.getFirstDecadeInCentury(i),t=new Date(i),n=new Date(i);return t.setFullYear(e),n.setFullYear(e+99),`${ct.format(t,"yyyy")}-${ct.format(n,"yyyy")}`},isBoundary(i){return Ae.sameCentury(i,this.option("min"))||Ae.sameCentury(i,this.option("max"))},_renderWeekNumberCell:ue})},Rv=be(Yl,"dxCalendar"),Kr={month:3,year:2,decade:1,century:0},Wi={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"},kN={SingleSelection:TN,MultipleSelection:SN,RangeSelection:IN},gE=ns.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions(){return Y(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:Wi.MONTH,maxZoomLevel:Wi.MONTH,minZoomLevel:Wi.CENTURY,selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}}])},_supportedKeys(){return Y(this.callBase(),{rightArrow(i){i.preventDefault(),ki(i)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow(i){i.preventDefault(),ki(i)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow(i){if(i.preventDefault(),ki(i))this._navigateUp();else{if(li.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow(i){if(i.preventDefault(),ki(i))this._navigateDown();else{if(li.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home(i){i.preventDefault();const e=this.option("zoomLevel"),t=this.option("currentDate"),n=this._dateOption("min");if(this._view.isDateDisabled(t))return;const s=Ae.sameView(e,t,n)?n:Ae.getViewFirstCellDate(e,t);this._moveToClosestAvailableDate(s)},end(i){i.preventDefault();const e=this.option("zoomLevel"),t=this.option("currentDate"),n=this._dateOption("max");if(this._view.isDateDisabled(t))return;const s=Ae.sameView(e,t,n)?n:Ae.getViewLastCellDate(e,t);this._moveToClosestAvailableDate(s)},pageUp(i){i.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown(i){i.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:ue,enter:this._enterKeyHandler})},_enterKeyHandler(i){if(!this._isMaxZoomLevel())this._navigateDown();else if(!this._view.isDateDisabled(this.option("currentDate"))){const e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,i)}},_getSerializationFormat(i){const e=this.option(i||"value");if(this.option("dateSerializationFormat"))return this.option("dateSerializationFormat");if(Wt(e))return"number";if(Ke(e))return vi.getDateSerializationFormat(e)},_convertToDate:i=>vi.deserializeDate(i),_dateValue(i,e){if(e){if(e.type==="keydown"){const t=this._view._getContouredCell().get(0);e.target=t}this._saveValueChangeEvent(e)}this._dateOption("value",i)},_dateOption(i,e){const t=i==="value"&&!this._isSingleMode(),n=this.option("value");if(arguments.length===1)return t?(n??[]).map(r=>this._convertToDate(r)):this._convertToDate(this.option(i));const s=this._getSerializationFormat(i),o=t?(e==null?void 0:e.map(r=>vi.serializeDate(r,s)))||[]:vi.serializeDate(e,s);this.option(i,o)},_isSingleMode(){return this.option("selectionMode")==="single"},_shiftDate(i,e,t,n){switch(i){case Wi.MONTH:e.setDate(e.getDate()+t*n);break;case Wi.YEAR:e.setMonth(e.getMonth()+t*n);break;case Wi.DECADE:e.setFullYear(e.getFullYear()+t*n);break;case Wi.CENTURY:e.setFullYear(e.getFullYear()+10*t*n)}},_moveCurrentDateByOffset(i){const e=this.option("currentDate");let t=new Date(e);const n=this.option("zoomLevel");this._shiftDate(n,t,i,1);const s=this._getMaxDate(),o=this._getMinDate();let r=this._areDatesInNeighborView(n,t,e),a=$s(t,o,s)&&r;const l=new Date(t);for(;a;){if(!this._view.isDateDisabled(l)){t=l;break}this._shiftDate(n,l,i,1),r=this._areDatesInNeighborView(n,l,e),a=$s(l,o,s)&&r}if(this._view.isDateDisabled(e)||this._view.isDateDisabled(t)){const d=i>0?1:-1;(d===1?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(t):this._waitRenderView(d)}else this._skipNavigate=!0,this.option("currentDate",t)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(i,e,t){switch(i){case Wi.MONTH:return e.getMonth()===t.getMonth();case Wi.YEAR:return e.getYear()===t.getYear();case Wi.DECADE:return parseInt(e.getYear()/10)===parseInt(t.getYear()/10);case Wi.CENTURY:return parseInt(e.getYear()/100)===parseInt(t.getYear()/100)}},_areDatesInNeighborView(i,e,t){switch(i){case Wi.MONTH:return((n,s)=>{const o=Math.abs(n-s);return Math.min(o,12-o)})(e.getMonth(),t.getMonth())<=1;case Wi.YEAR:return Math.abs(e.getYear()-t.getYear())<=1;case Wi.DECADE:return Math.abs(e.getYear()-t.getYear())<=10;case Wi.CENTURY:return Math.abs(e.getYear()-t.getYear())<=100}},_moveToClosestAvailableDate(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.option("currentDate"),e=new Date(i);const t=this.option("zoomLevel"),n=!this._isDateNotAvailable(e);let s=n,o=n,r,a;const l=new Date(e),d=new Date(e);do{if(s){e=l;break}if(o){e=d;break}this._shiftDate(t,l,1,1),this._shiftDate(t,d,1,-1),r=this._areDatesInSameView(t,l,i),a=this._areDatesInSameView(t,d,i),s=r&&!this._isDateNotAvailable(l),o=a&&!this._isDateNotAvailable(d)}while(r||a);this.option("currentDate",e)},_isDateNotAvailable(i){const e=this._getMaxDate(),t=this._getMinDate();return!$s(i,t,e)||this._view.isDateDisabled(i)},_init(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy(){const i=this._getSelectionStrategyName(),e=kN[i];(!this._selectionStrategy||this._selectionStrategy.NAME!==i)&&(this._selectionStrategy=new e(this))},_refreshSelectionStrategy(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel(){const i=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),t=this.option("zoomLevel");Kr[e]<Kr[i]||(Kr[t]>Kr[e]?this.option("zoomLevel",e):Kr[t]<Kr[i]&&this.option("zoomLevel",i))},_initCurrentDate(){const i=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate())??this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",i)},_getNormalizedDate(i){return i=Ae.normalizeDate(i,this._getMinDate(),this._getMaxDate()),U(i)?this._getDate(i):i},_initActions(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates(){this._templateManager.addDefaultTemplates({cell:new fa(i=>{const e=i.model;R(i.container).append(R("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate(i){li.isAnimating(this._$viewsWrapper)&&li.stop(this._$viewsWrapper,!0);const e=this._getMinDate(),t=this._getMaxDate();if(e>t){this.option("currentDate",new Date);return}const n=this._getNormalizedDate(i);if(i.getTime()!==n.getTime()){this.option("currentDate",new Date(n));return}let s=this._getViewsOffset(this._view.option("date"),n);s!==0&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(s=0),this._view&&s!==0&&!this._suppressNavigation?this._additionalView?s>2||s<-1?(this._refreshViews(),this._setViewContoured(n),this._updateAriaId(n),this._renderNavigator()):s===1&&this._skipNavigate?(this._setViewContoured(n),this._updateAriaId(n)):this._navigate(s,n):this._navigate(s,n):(this._renderNavigator(),this._setViewContoured(n),this._updateAriaId(n)),this._skipNavigate=!1},_isAdditionalViewDate(i){return this._additionalView?i>=this._additionalView._getFirstAvailableDate():!1},_getActiveView(i){return this._isAdditionalViewDate(i)?this._additionalView:this._view},_setViewContoured(i){if(this.option("skipFocusCheck")||R(this._$viewsWrapper).is(":focus")){var e;this._view.option("contouredDate",null),(e=this._additionalView)===null||e===void 0||e.option("contouredDate",null),(this._isAdditionalViewDate(i)?this._additionalView:this._view).option("contouredDate",i)}},_getMinDate(){const i=this.option("_rangeMin");return i||(this.min?this.min:(this.min=this._dateOption("min")||new Date(1e3,0),this.min))},_getMaxDate(){const i=this.option("_rangeMax");return i||(this.max?this.max:(this.max=this._dateOption("max")||new Date(3e3,0),this.max))},_getViewsOffset(i,e){const t=this.option("zoomLevel");if(t===Wi.MONTH)return this._getMonthsOffset(i,e);let n;switch(t){case Wi.CENTURY:n=100;break;case Wi.DECADE:n=10;break;default:n=1}return parseInt(e.getFullYear()/n)-parseInt(i.getFullYear()/n)},_getMonthsOffset(i,e){const t=e.getFullYear()-i.getFullYear(),n=e.getMonth()-i.getMonth();return 12*t+n},_waitRenderView(i){if(this._alreadyViewRender)return;this._alreadyViewRender=!0;const e=this._getDateByOffset(i*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})},_getRtlCorrection(){return this.option("rtlEnabled")?-1:1},_getDateByOffset(i,e){e=this._getDate(e??this.option("currentDate"));const t=e.getDate(),n=Ae.getDifferenceInMonth(this.option("zoomLevel"))*i;e.setDate(1),e.setMonth(e.getMonth()+n);const s=Ae.getLastMonthDate(e).getDate();return e.setDate(t>s?s:t),e},_focusTarget(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup(){this._renderSubmitElement();const i=this.$element();i.addClass("dx-calendar"),i.toggleClass("dx-calendar-range",this.option("selectionMode")==="range"),this._renderBody(),i.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),i.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody(){this._$viewsWrapper||(this.$body=R("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=R("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_setAriaReadonly:ue,_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews(){this.$element().addClass(`dx-calendar-view-${this.option("zoomLevel")}`);const{currentDate:i,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(i),qe()){const t=this._getDateByOffset(-1,i);this._beforeView=this._isViewAvailable(t)?this._renderSpecificView(t):null;const n=this._getDateByOffset(e,i);n.setDate(1),this._afterView=this._isViewAvailable(n)?this._renderSpecificView(n):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,i))),this._translateViews()},_renderSpecificView(i){const{zoomLevel:e}=this.option(),t=AN[e],n=R("<div>").appendTo(this._$viewsWrapper),s=this._viewConfig(i);return this._createComponent(n,t,s)},_viewConfig(i){let e=this.option("disabledDates");return e=Ee(e)?this._injectComponent(e.bind(this)):e,ve({},this._selectionStrategy.getViewOptions(),{date:i,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:this.option("firstDayOfWeek")??ct.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:e,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){q.off(this._$viewsWrapper,Rv),this.option("selectionMode")==="range"&&q.on(this._$viewsWrapper,Rv,null,()=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent(i){const e=this;return function(t){return Y(t,{component:e}),i(t)}},_isViewAvailable(i){const e=this.option("zoomLevel"),t=Ae.getViewMinBoundaryDate(e,this._getMinDate()),n=Ae.getViewMaxBoundaryDate(e,this._getMaxDate());return Ae.dateInRange(i,t,n)},_translateViews(){const{viewsCount:i}=this.option();Bi(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,i),this._moveViewElement(this._additionalView,1)},_moveViewElement(i,e){i&&Bi(i.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition(i){const e=this.option("rtlEnabled")?-1:1;return 100*i*e+"%"},_cellClickHandler(i){const e=this.option("zoomLevel"),t=Ae.getViewDown(e),n=this._isMaxZoomLevel();if(t&&!n)this._navigateDown(i.event.currentTarget);else{const s=this._updateTimeComponent(i.value);this._selectionStrategy.selectValue(s,i.event),this._cellClickAction(i)}},_updateTimeComponent(i){const e=new Date(i),t=this._dateOption("value");return t&&this._isSingleMode()&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())),e},_isMaxZoomLevel(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown(i){const e=this.option("zoomLevel");if(this._isMaxZoomLevel())return;const t=Ae.getViewDown(e);if(!t)return;let n=this._view.option("contouredDate")||this._view.option("date");i&&(n=R(i).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",n),this.option("zoomLevel",t),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))},_renderNavigator(){this._navigator||(this._navigator=new EN(R("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig(){const{focusStateEnabled:i,rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:i,rtlEnabled:e,tabIndex:void 0}},_navigatorClickHandler(i){const{currentDate:e,viewsCount:t}=this.option();let n=i.direction;if(t>1){const o=this._isAdditionalViewDate(e);(o&&n<0||!o&&n>0)&&(n*=2)}const s=this._getDateByOffset(n,e);this._moveToClosestAvailableDate(s)},_navigateUp(){const i=this.option("zoomLevel"),e=Ae.getViewUp(i);!e||this._isMinZoomLevel(i)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel(i){const e=this._getMinDate(),t=this._getMaxDate();return Ae.sameView(i,e,t)||this.option("minZoomLevel")===i},_updateButtonsVisibility(){this._navigator.toggleButton("next",!U(this._afterView)),this._navigator.toggleButton("prev",!U(this._beforeView))},_renderSwipeable(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),iu,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler(i){li.stop(this._$viewsWrapper,!0);const{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),i.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,i.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor(i){R(".dx-gesture-cover").css("cursor",i)},_getRequiredView(i){let e;const t=this.option("rtlEnabled");return i==="next"?e=t?this._beforeView:this._afterView:i==="prev"&&(e=t?this._afterView:this._beforeView),e},_swipeUpdateHandler(i){const{offset:e}=i.event;Bi(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler(i){this._toggleGestureCoverCursor("auto");const{currentDate:e,rtlEnabled:t}=this.option(),{targetOffset:n}=i.event,s=n?n/Math.abs(n):0,r=this._isAdditionalViewDate(e)&&(t?s===-1:s===1);if(s===0){this._animateWrapper(0,250);return}const a=-s*this._getRtlCorrection()*(r?2:1);let l=this._getDateByOffset(a);this._isDateInInvalidRange(l)&&(s>=0?l=new Date(this._getMinDate()):l=new Date(this._getMaxDate())),this.option("currentDate",l)},_viewWidth(){return this._viewWidthValue||(this._viewWidthValue=Ge(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption(i){i*=this._getRtlCorrection();const e=this.option("viewsCount")>1;let t,n;i>.5&&this._beforeView?(t=this._beforeView,n=e&&this._view):i<-.5&&this._afterView?(t=e?this._additionalView:this._afterView,n=e?this._afterView:null):(t=this._view,n=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(t,n))},_getViewsCaption(i,e){let t=i.getNavigatorCaption();const{viewsCount:n}=this.option();if(n>1&&e){const s=e.getNavigatorCaption();t=`${t} - ${s}`}return t},_isDateInInvalidRange(i){if(this._view.isBoundary(i))return;const e=this._getMinDate(),t=this._getMaxDate(),n=Ae.normalizeDate(i,e,t);return n===e||n===t},_renderFooter(){const i=this.option("showTodayButton");if(i){const e=this._createComponent(R("<div>"),$i,{focusStateEnabled:this.option("focusStateEnabled"),text:re.format("dxCalendar-todayButtonText"),onClick:t=>{this._toTodayView(t)},type:nn()?"normal":"default",stylingMode:nn()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=R("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",i)},_renderSubmitElement(){this._$submitElement=R("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(i){const e=this._convertToDate(i);this._getSubmitElement().val(vi.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement(){return this._$submitElement},_animateShowView(){li.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(li.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:(i,e,t,n)=>li.animate(i.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:t,opacity:t},duration:n}),_navigate(i,e){if(i!==0&&Math.abs(i)!==1&&this._isViewAvailable(e)){const r=this._renderSpecificView(e);i>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=r):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=r),this._translateViews()}const t=this._getRtlCorrection(),n=i>0?1:i<0?-1:0,s=-t*n*this._viewWidth();this._$viewsWrapper.position().left!==s&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(i,e):this._animateWrapper(s,250).done(this._wrapperAnimationEndHandler.bind(this,i,e)))},_animateWrapper(i,e){return li.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:i},duration:e})},_getDate:i=>new Date(i),_toTodayView(i){const e=new Date;if(this._isMaxZoomLevel()){this._selectionStrategy.selectValue(e,i.event);return}this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,i.event),this._animateShowView(),this._preventViewChangeAnimation=!1},_wrapperAnimationEndHandler(i,e){this._rearrangeViews(i),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews(i){var e;if(i===0)return;const{viewsCount:t}=this.option();let n,s,o,r,a;if(i<0?(n=1,s="_beforeView",o="_afterView",r="_view",a=t===1?"_view":"_additionalView"):(n=-1,s="_afterView",o="_beforeView",r=t===1?"_view":"_additionalView",a="_view"),!this[s])return;const l=this[s].option("date");(e=this[o])===null||e===void 0||e.$element().remove(),this[o]=this._renderSpecificView(this._getDateByOffset(n*t,l)),this[a].$element().remove(),t===1?this[a]=this[s]:(this[a]=this[r],this[r]=this[s]);const d=this._getDateByOffset(-n,l);this[s]=this._isViewAvailable(d)?this._renderSpecificView(d):null},_resetLocation(){Bi(this._$viewsWrapper,{left:0,top:0})},_clean(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache(){delete this._viewWidthValue},_disposeViews(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged(){this._translateViews()},_shouldSkipFocusEvent(i){const{target:e,relatedTarget:t}=i;return R(e).parents(".dx-calendar").length&&R(t).parents(".dx-calendar").length},_focusInHandler(i){R(i.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),!this._shouldSkipFocusEvent(i)&&(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler(i){if(R(i.target).is(this._$viewsWrapper)){var e;this._view.option("contouredDate",null),(e=this._additionalView)===null||e===void 0||e.option("contouredDate",null)}this._shouldSkipFocusEvent(i)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption(i,e){var t,n,s;this._view.option(i,e),(t=this._additionalView)===null||t===void 0||t.option(i,e),(n=this._beforeView)===null||n===void 0||n.option(i,e),(s=this._afterView)===null||s===void 0||s.option(i,e)},_setViewsMinOption(i){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(i)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption(i){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(i)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels(){let i=this.option("zoomLevel");i=i.charAt(0).toUpperCase()+i.slice(1);const e=this._navigator._caption.option("text"),t=re.format(`dxCalendar-previous${i}ButtonLabel`),n=re.format(`dxCalendar-caption${i}Label`),s=re.format(`dxCalendar-next${i}ButtonLabel`);this.setAria("label",t,this._navigator._prevButton.$element()),this.setAria("label",`${e}. ${n}`,this._navigator._caption.$element()),this.setAria("label",s,this._navigator._nextButton.$element())},_updateAriaSelected(i,e){e.forEach(t=>{this.setAria("selected",!1,this._view._getCellByDate(t))}),i.forEach(t=>{this.setAria("selected",!0,this._view._getCellByDate(t))}),this.option("viewsCount")>1&&(e.forEach(t=>{this.setAria("selected",!1,this._additionalView._getCellByDate(t))}),i.forEach(t=>{this.setAria("selected",!0,this._additionalView._getCellByDate(t))}))},_updateAriaId(i){i=i??this.option("currentDate");const e=`dx-${new hi}`,n=this._getActiveView(i)._getCellByDate(i);this.setAria("id",e,n),this.setAria("activedescendant",e),this._onContouredChanged(e)},_suppressingNavigation(i,e){this._suppressNavigation=!0,i.apply(this,e),delete this._suppressNavigation},_optionChanged(i){const{value:e,previousValue:t}=i;switch(i.name){case"width":this.callBase(i),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(t)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(`dx-calendar-view-${t}`),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(e,t),this._setSubmitValue(e),this.callBase(i);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(i)}},getContouredDate(){return this._view.option("contouredDate")}});wt("dxCalendar",gE);const{abstract:Kd}=Lt,Hu=Lt.inherit({ctor(i){this.dateBox=i},widgetOption(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget(i){i=i||R("<div>"),this._widget=this._createWidget(i),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget(i){const e=this._getWidgetName(),t=this._getWidgetOptions();return this.dateBox._createComponent(i,e,t)},_getWidgetOptions:Kd,_getWidgetName:Kd,getDefaultOptions:()=>({mode:"text"}),getDisplayFormat:Kd,supportedKeys:ue,getKeyboardListener:ue,customizeButtons:ue,getParsedText(i,e){return ct.parse(i,e)||ct.parse(i)},renderInputMinMax:ue,renderOpenedState(){this._updateValue()},popupConfig:Kd,_dimensionChanged(){var i;(i=this._getPopup())===null||i===void 0||i.repaint()},renderPopupContent(){const i=this._getPopup();this._renderWidget();const e=i.$content().parent();q.off(e,"mousedown"),q.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup(i){i.preventDefault()},_getWidgetContainer(){return this._getPopup().$content()},_getPopup(){return this.dateBox._popup},popupShowingHandler:ue,popupHiddenHandler:ue,_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:ue,getDefaultDate:()=>new Date,textChangedHandler:ue,renderValue(){this.dateBox.option("opened")&&this._updateValue()},getValue(){return this._widget.option("value")},isAdaptivityChanged:()=>!1,dispose(){const i=this._getPopup();i&&i.$content().empty()},dateBoxValue(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}),_E=Hu.inherit({NAME:"Calendar",getDefaultOptions(){return Y(this.callBase(),{todayButtonText:re.format("dxCalendar-todayButtonText")})},supportedKeys(){const i=function(e){return this.option("opened")?(e.preventDefault(),!0):!1};return{rightArrow(){if(this.option("opened"))return!0},leftArrow(){if(this.option("opened"))return!0},enter:(function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){const t=this._getContouredValue(),n=this._lastActionElement,s=this._closeDropDownByEnter();return s&&t&&n==="calendar"&&this.dateBoxValue(t,e),s&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!s}return!0}this.dateBox._valueChangeEventHandler(e)}).bind(this),home:i,end:i}},getDisplayFormat:i=>i||"shortdate",_closeDropDownByEnter:()=>!0,_getWidgetName:()=>gE,_getContouredValue(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions(){const i=this.dateBox.option("disabledDates");return Y(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:Ee(i)?this._injectComponent(i.bind(this.dateBox)):i,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent(i){const e=this;return function(t){return Y(t,{component:e.dateBox}),i(t)}},_refreshActiveDescendant(i){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",i.actionValue)},_getTodayButtonConfig(){const i=this.dateBox.option("buttonsLocation"),t=i==="default"?["bottom","center"]:va(i),n=tn()?"text":"outlined";return{widget:"dxButton",toolbar:t[0],location:t[1]==="after"?"before":t[1],options:{onClick:s=>{this._widget._toTodayView(s)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:n}}},_isCalendarVisible(){const{calendarOptions:i}=this.dateBox.option();return cn(i)||i.visible!==!1},_getPopupToolbarItems(i){return this.dateBox.option("applyValueMode")==="useButtons"&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...i]:i},popupConfig:i=>Y(!0,i,{position:{collision:"flipfit flip"},width:"auto"}),_valueChangedHandler(i){const{value:e}=i,t=i.previousValue;Ae.sameDate(e,t)&&Ae.sameHoursAndMinutes(e,t)||this.dateBox.option("applyValueMode")==="instantly"&&this.dateBoxValue(this.getValue(),i.event)},_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler(i){const{dateBox:e}=this;e.option("applyValueMode")==="instantly"&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),i.event))}}),ON={row:"minWidth",col:"minHeight"},RN={row:"maxWidth",col:"maxHeight"},Mv={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},Pv={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},MN={row:"row",col:"column"},Gr=(i,e,t)=>{if(t=gl(e,t),i.style[xr(e)]=t,!qe()){if(t===""||!U(t))return;const s=`${om(e)}: ${t};`;FC(i,s,!1)}};class PN extends Tr{_renderVisible(e,t){super._renderVisible(e),U(t)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:t})}}class BN{constructor(e,t){this._$element=e,this._option=t}renderBox(){this._$element.css({display:`${ac("flexDirection")}flex`}),Gr(this._$element.get(0),"flexDirection",MN[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){const e=this._option("align");return e in Mv?Mv[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){const e=this._option("crossAlign");return e in Pv?Pv[e]:e}renderItems(e){const t=ac("flexDirection"),n=this._option("direction");ie(e,function(){const s=R(this),o=s.data("dxBoxItemData");s.css({display:`${t}flex`}).css(RN[n],o.maxSize||"none").css(ON[n],o.minSize||"0"),Gr(s.get(0),"flexBasis",o.baseSize||0),Gr(s.get(0),"flexGrow",o.ratio),Gr(s.get(0),"flexShrink",U(o.shrink)?o.shrink:1),s.children().each((r,a)=>{R(a).css({width:"auto",height:"auto",display:`${ac("flexDirection")}flex`,flexBasis:0}),Gr(a,"flexGrow",1),Gr(a,"flexDirection",R(a)[0].style.flexDirection||"column")})})}}class ko extends Dr{_getDefaultOptions(){return Y(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new BN(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return this.option("_queue")?!1:!!this._queue.length}_pushItemToQueue(e,t){this._queue.push({$item:e,config:t})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(e){for(super._renderItems(e);this._queueIsNotEmpty();){const t=this._shiftItemFromQueue();this._createComponent(t.$item,ko,Y({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},t.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(e){const t=e.itemData&&e.itemData.node;return t?this._renderItemContentByNode(e,t):super._renderItemContent(e)}_postprocessRenderItem(e){const t=e.itemData.box;t&&this._pushItemToQueue(e.itemContent,t)}_createItemByTemplate(e,t){return t.itemData.box?e.source?e.source():R():super._createItemByTemplate(e,t)}_itemOptionChanged(e,t,n,s){t==="visible"&&this._onItemStateChanged({name:t,state:n,oldState:s!==!1}),super._itemOptionChanged(e,t,n)}_optionChanged(e){switch(e.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(e)}}_itemOptions(){const e=super._itemOptions();return e.fireItemStateChangedAction=t=>{this._onItemStateChanged(t)},e}}ko.ItemClass=PN;wt("dxBox",ko);const qh=["year","day","month","day"],Bv=["hours","minutes","seconds","milliseconds"],FN=864e5,VN=31536e6,NN=function(i){const e=typeof i;return e==="string"?"format":e==="object"&&i.type!==void 0?i.type:null},Mt={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:FN,ONE_YEAR:VN,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){const i=new Date;return new Date(i.getFullYear()+50,i.getMonth(),i.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:()=>"yyyy-MM-dd",components:qh},time:{getStandardPattern:()=>"HH:mm",components:Bv},datetime:{getStandardPattern(){let i;return function(){const e=R("<input>").attr("type","datetime");e.val("2000-01-01T01:01Z"),e.val()&&(i="yyyy-MM-ddTHH:mmZ")}(),i||(i="yyyy-MM-ddTHH:mm:ssZ"),Mt.FORMATS_INFO.datetime.getStandardPattern=function(){return i},i},components:[...qh,...Bv]},"datetime-local":{getStandardPattern:()=>"yyyy-MM-ddTHH:mm:ss",components:[...qh,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat(i,e){const t=Mt.FORMATS_INFO[e].getStandardPattern();return vi.serializeDate(i,t)},fromStandardDateFormat(i){const e=vi.dateParser(i);return yn(e)?e:void 0},getMaxMonthDay:(i,e)=>new Date(i,e+1,0).getDate(),mergeDates(i,e,t){if(!e)return e||null;if(!i||isNaN(i.getTime())){const o=new Date(null);i=new Date(o.getFullYear(),o.getMonth(),o.getDate())}const n=new Date(i.valueOf()),s=Mt.FORMATS_INFO[t];return ie(s.components,function(){const o=Mt.DATE_COMPONENTS_INFO[this];n[o.setter](e[o.getter]())}),n},getLongestCaptionIndex(i){let e=0,t=0,n;for(n=0;n<i.length;++n)i[n].length>t&&(e=n,t=i[n].length);return e},formatUsesMonthName:i=>ct.formatUsesMonthName(i),formatUsesDayName:i=>ct.formatUsesDayName(i),getLongestDate(i,e,t){const n=NN(i);let s=9;(!n||Mt.formatUsesMonthName(n))&&(s=Mt.getLongestCaptionIndex(e));const o=new Date(1888,s,21,23,59,59,999);if(!n||Mt.formatUsesDayName(n)){const r=o.getDate()-o.getDay()+Mt.getLongestCaptionIndex(t);o.setDate(r)}return o},normalizeTime(i){i.setSeconds(0),i.setMilliseconds(0)}};Mt.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter(i,e){const t=new Date(e.getTime());return t.setFullYear(i),ct.format(t,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter(i,e){const t=new Date(e.getTime());return t.setDate(i),ct.format(t,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:i=>ct.getMonthNames()[i],startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:i=>ct.format(new Date(0,0,0,i),"hour"),startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:i=>ct.format(new Date(0,0,0,0,i),"minute"),startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:i=>ct.format(new Date(0,0,0,0,0,i),"second"),startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:i=>ct.format(new Date(0,0,0,0,0,0,i),"millisecond"),startValue:0,endValue:999}};const Fv=function(i,e,t){LN(i,e,t)},LN=function(i,e,t){i.css("transform",`rotate(${e}deg) translate(0,${t}px)`)},bE=ns.inherit({_getDefaultOptions(){return Y(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue(){return this.option("value")||new Date},_init(){this.callBase(),this.$element().addClass("dx-timeview")},_render(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox(){const i=R("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(i,ko,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock(i,e,t){this._$hourArrow=R("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=R("<div>").addClass("dx-timeview-minutearrow");const n=R(t);n.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",n)},_updateClock(){const i=this._getValue(),e=i.getHours()/12*360+i.getMinutes()/60*30,t=i.getMinutes()/60*360;Fv(this._$hourArrow,e,this.option("_arrowOffset")),Fv(this._$minuteArrow,t,this.option("_arrowOffset"))},_getBoxItems(i){const e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:R("<div>").addClass("dx-timeview-time-separator").text(ct.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return i&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField(){const i=!this.option("use24HourFormat");return this._createHourBox(i),this._createMinuteBox(),i&&this._createFormat12Box(),this._createComponent(R("<div>").addClass("dx-timeview-field"),ko,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(i)}).$element()},_createHourBox(i){(this._hourBox=this._createComponent(R("<div>"),eu,Y({min:-1,max:i?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:t=>this._keyboardHandler(t)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM(){return!this.option("use24HourFormat")&&this._format12.option("value")===1},_onHourBoxValueChanged(i){let{value:e,component:t}=i;const n=this._getValue(),s=new Date(n);let o=this._convertMaxHourToMin(e);t.option("value",o),this._isPM()&&(o+=12),s.setHours(o),Mt.normalizeTime(s),this.option("value",s)},_convertMaxHourToMin(i){const e=this.option("use24HourFormat")?24:12;return(e+i)%e},_createMinuteBox(){(this._minuteBox=this._createComponent(R("<div>"),eu,Y({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{let{value:t,component:n}=e;const s=(60+t)%60;n.option("value",s);const o=new Date(this._getValue());o.setMinutes(s),Mt.normalizeTime(o),this.option("value",o)}},this._getNumberBoxConfig()))).setAria("label","minutes")},_createFormat12Box(){const i=ct.getPeriodNames();(this._format12=this._createComponent(R("<div>").addClass("dx-timeview-format12"),gg,{items:[{value:-1,text:i[0]},{value:1,text:i[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{let{value:n}=t;const s=this._getValue().getHours(),o=new Date(this._getValue()),r=(s+12*n)%24;o.setHours(r),this.option("value",o)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12(){if(this.option("use24HourFormat"))return;const n=this._getValue().getHours()>=12?1:-1;this._silentEditorValueUpdate(this._format12,n)},_silentEditorValueUpdate(i,e){i&&(i._suppressValueChangeAction(),i.option("value",e),i._resumeValueChangeAction())},_getNumberBoxConfig(){return{showSpinButtons:!0,displayValueFormatter:i=>(i<10?"0":"")+i,stylingMode:this.option("stylingMode")}},_normalizeHours(i){return this.option("use24HourFormat")?i:i%12||12},_updateField(){const i=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,i),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged(i){i&&this._updateTime()},_optionChanged(i){switch(i.name){case"value":this._updateTime(),this.callBase(i);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(i)}}});wt("dxTimeView",bE);const $N=Je(),Vv="dx-datebox-datetime-time-side",HN=_E.inherit({NAME:"CalendarWithTime",getDefaultOptions(){return Y(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter(){return Ae.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:i=>i||"shortdateshorttime",_is24HourFormat(){return ct.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue(){const i=this.callBase();return this._updateDateTime(i)},_renderWidget(){this.callBase(),this._timeView=this.dateBox._createComponent(R("<div>"),bE,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState(){this.callBase();const i=this._getPopup();i&&i.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(()=>{this._getPopup()&&this._getPopup().repaint()},0)},isAdaptivityChanged(){const i=this._isShrinkView(),e=this._currentAdaptiveMode;return i!==e?(this._currentAdaptiveMode=i,e!==void 0):this.callBase()},_updateValue(i){let e=this.dateBoxValue();!e&&!i&&(e=new Date,Mt.normalizeTime(e)),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:()=>Ge($N)<=573,_isShrinkView(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems(){const i=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||i.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),i},renderPopupContent(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();const i=this._getPopup().$content();this._box=this.dateBox._createComponent(R("<div>").appendTo(i),ko,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:(function(e,t,n){const s=R("<div>");switch(e.name){case"calendar":s.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(Vv),s.append(this._timeView.$element()));break;case"time":s.append(this._timeView.$element()),R(n).addClass(Vv)}return s}).bind(this)})},popupConfig(i){const e=this.callBase(i);return Y(e,{width:"auto"})},_preventFocusOnPopup(i){R(i.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime(i){const e=this._timeView.option("value");return i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i},getValue(){let i=this._widget.option("value")??this._widget.getContouredDate();return i=i?new Date(i):new Date,this._updateDateTime(i)},dispose(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});class zN{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??Gc}get isHorizontal(){return this.direction===C1||this.direction===kh}get isVertical(){return this.direction===Gc||this.direction===kh}get isBoth(){return this.direction===kh}}function WN(i,e){if(ht(i)){const s=ci(i.left,i.x),o=ci(i.top,i.y);return{left:U(s)?s:void 0,top:U(o)?o:void 0}}const{isHorizontal:t,isVertical:n}=new zN(e);return{left:t&&U(i)?i:void 0,top:n&&U(i)?i:void 0}}class vE extends vn{_getDefaultOptions(){return Y(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){q.on(R(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(!this.option("showOnClick"))return;const e=be(kt,this.NAME),t=this._createActionByOption("onClick");q.off(R(this.container()),e),q.on(R(this.container()),e,n=>{t({event:n})})}_renderItems(){const e=this.option("items")||[];let t=R();R(this.content()).empty(),e.forEach(n=>{t=t.add(R("<div>").addClass("dx-dateview-item").append(n))}),R(this.content()).append(t),this._$items=t,this.update()}_renderSelectedItemFrame(){R("<div>").addClass("dx-dateview-item-selected-frame").append(R("<div>").addClass("dx-dateview-item-selected-border")).appendTo(R(this.container()))}_renderSelectedValue(e){const t=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(t)}),this._renderActiveStateItem()}_fitIndex(e){const n=(this.option("items")||[]).length;return e>=n?n-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){const e=this._getItemSelector(),t=be(kt,this.NAME);q.off(this.$element(),t,e),q.on(this.$element(),t,e,this._itemClickHandler.bind(this))}_getItemSelector(){return".dx-dateview-item"}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){const e=this.option("selectedIndex");ie(this._$items,function(t){R(this).toggleClass("dx-dateview-item-selected",e===t)})}_shouldScrollToNeighborItem(){return Re.real().deviceType==="desktop"&&this._isWheelScrolled}_moveTo(e){const{top:t,left:n}=WN(e),s=this.scrollOffset(),o={x:s.left-n,y:s.top-t};if(this._isVisible()&&(o.x||o.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){const r=this;li.stop(R(this.content())),li.animate(R(this.content()),{duration:200,type:"slide",to:{top:Math.floor(o.y)},complete(){Zl(R(r.content())),r.handleMove({delta:o})}}),delete this._animation}else this.handleMove({delta:o})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){const t=this.option("items").length;return Math.max(Math.min(e,t-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){const t=this.scrollOffset().top,n=e*this._itemHeight(),s=t-n;if(this._isInNullNeighborhood(s))return e;const o=s>0?1:-1;return this._fitSelectedIndexInRange(e+o)}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;const t=this.scrollOffset().top/this._itemHeight();return Math.round(t)}_endActionHandler(){const e=this.option("selectedIndex"),t=this._getNewSelectedIndex(e);t===e?this._renderSelectedValue(t):this.option("selectedIndex",t),this._isWheelScrolled=!1}_itemHeight(){const e=this._$items.first();return st(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return R(this.container()).is(":visible")}_fireSelectedIndexChanged(e,t){this._selectedIndexChanged({value:e,previousValue:t,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){const e=this.option("selectedIndex"),t=this._fitIndex(e);t===e?this._renderActiveStateItem():this.option("selectedIndex",t)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}wt("dxDateViewRoller",vE);const Nv={date:"date",datetime:"datetime",time:"time"},mn={year:"year",month:"month",day:"day",hours:"hours"},yE=ns.inherit({_valueOption(){const i=this.option("value"),e=new Date(i);return!i||isNaN(e)?this._getDefaultDate():e},_getDefaultDate(){const i=new Date;return this.option("type")===Nv.date?new Date(i.getFullYear(),i.getMonth(),i.getDate()):i},_getDefaultOptions(){return Y(this.callBase(),{minDate:Mt.MIN_DATEVIEW_DEFAULT_DATE,maxDate:Mt.MAX_DATEVIEW_DEFAULT_DATE,type:Nv.date,value:new Date,applyCompactClass:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:i=>i.deviceType!=="desktop",options:{applyCompactClass:!0}}])},_render(){this.callBase(),this.$element().addClass("dx-dateview"),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses(i,e){this.$element().addClass(`dx-dateview-${i}`),e&&this.$element().removeClass(`dx-dateview-${e}`)},_toggleCompactClass(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper(){return this._$wrapper},_renderContentImpl(){this._$wrapper=R("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers(){this._$rollersContainer||(this._$rollersContainer=R("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};const i=this;ie(i._rollerConfigs,e=>{const t=R("<div>").appendTo(i._$rollersContainer).addClass(`dx-dateviewroller-${i._rollerConfigs[e].type}`);i._rollers[i._rollerConfigs[e].type]=i._createComponent(t,vE,{items:i._rollerConfigs[e].displayItems,selectedIndex:i._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart(n){const s=n.component;s._toggleActive(!0),i._setActiveRoller(i._rollerConfigs[e],s.option("selectedIndex"))},onEnd(n){n.component._toggleActive(!1)},onClick(n){const s=n.component;s._toggleActive(!0),i._setActiveRoller(i._rollerConfigs[e],s.option("selectedIndex")),i._setRollerState(i._rollerConfigs[e],s.option("selectedIndex")),s._toggleActive(!1)},onSelectedIndexChanged(n){const s=n.component;i._setRollerState(i._rollerConfigs[e],s.option("selectedIndex"))}})}),i._$rollersContainer.appendTo(i._wrapper())},_createRollerConfigs(i){const e=this;i=i||e.option("type"),e._rollerConfigs={},ct.getFormatParts(Mt.FORMATS_MAP[i]).forEach(t=>{e._createRollerConfig(t)})},_createRollerConfig(i){const e=Mt.DATE_COMPONENTS_INFO[i],t=this._calculateRollerConfigValueRange(i),{startValue:n}=t,{endValue:s}=t,{formatter:o}=e,r=this._getCurrentDate(),a={type:i,setValue:e.setter,valueItems:[],displayItems:[],getIndex:l=>l[e.getter]()-n};for(let l=n;l<=s;l++)a.valueItems.push(l),a.displayItems.push(o(l,r));a.selectedIndex=a.getIndex(r),this._rollerConfigs[i]=a},_setActiveRoller(i){const e=i&&this._rollers[i.type];ie(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition(){const i=this;ie(this._rollers,function(e){const t=i._rollerConfigs[e].getIndex(i._getCurrentDate());this.option("selectedIndex",t)})},_setRollerState(i,e){if(e!==i.selectedIndex){const t=i.valueItems[e],{setValue:n}=i;let s=new Date(this._getCurrentDate()),o=s.getDate();const r=this.option("minDate"),a=this.option("maxDate");i.type===mn.month?o=Math.min(o,Mt.getMaxMonthDay(s.getFullYear(),t)):i.type===mn.year&&(o=Math.min(o,Mt.getMaxMonthDay(t,s.getMonth()))),s.setDate(o),s[n](t);const l=Ae.normalizeDate(s,r,a);s=Mt.mergeDates(l,s,"time"),s=Ae.normalizeDate(s,r,a),this.option("value",s),i.selectedIndex=e}i.type===mn.year&&this._refreshRollers(),i.type===mn.month&&(this._refreshRoller(mn.day),this._refreshRoller(mn.hours))},_refreshRoller(i){const e=this._rollers[i];if(e){this._createRollerConfig(i);const t=this._rollerConfigs[i];(i===mn.day||t.displayItems.toString()!==e.option("items").toString())&&e.option({items:t.displayItems,selectedIndex:t.selectedIndex})}},_getCurrentDate(){const i=this._valueOption(),e=this.option("minDate"),t=this.option("maxDate");return Ae.normalizeDate(i,e,t)},_calculateRollerConfigValueRange(i){const e=this._getCurrentDate(),t=this.option("minDate"),n=this.option("maxDate"),s=Ae.sameYear(e,t),o=s&&e.getMonth()===t.getMonth(),r=Ae.sameYear(e,n),a=r&&e.getMonth()===n.getMonth(),l=o&&e.getDate()===t.getDate(),d=a&&e.getDate()===n.getDate(),c=Mt.DATE_COMPONENTS_INFO[i];let{startValue:h}=c,{endValue:u}=c;return i===mn.year&&(h=t.getFullYear(),u=n.getFullYear()),i===mn.month&&(s&&(h=t.getMonth()),r&&(u=n.getMonth())),i===mn.day&&(u=Mt.getMaxMonthDay(e.getFullYear(),e.getMonth()),s&&o&&(h=t.getDate()),r&&a&&(u=n.getDate())),i===mn.hours&&(h=l?t.getHours():h,u=d?n.getHours():u),{startValue:h,endValue:u}},_refreshRollers(){this._refreshRoller(mn.month),this._refreshRoller(mn.day),this._refreshRoller(mn.hours)},_optionChanged(i){switch(i.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(i.value,i.previousValue);break;case"visible":this.callBase(i),i.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(i)}},_clean(){this.callBase(),delete this._$rollersContainer}});wt("dxDateView",yE);const jN=Je(),KN=Hu.inherit({NAME:"DateView",getDefaultOptions(){return Y(this.callBase(),{openOnFieldClick:!0,applyButtonText:re.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat(i){return i||Mt.FORMATS_MAP[this.dateBox.option("type")]},popupConfig(i){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:i.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device(e){const{platform:t}=e;return t==="generic"||t==="ios"},options:{width:"auto",height:"auto"}},{device(e){const{platform:t}=e,{phone:n}=e;return t==="generic"&&n},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:jN}}}]}},_renderWidget(){if(mu(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly")){this._widget&&(this._widget.$element().remove(),this._widget=null);return}const i=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{const e=R("<div>").appendTo(i.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())},_getWidgetName:()=>yE,renderOpenedState(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*Mt.ONE_YEAR),onDisposing:(function(){this._widget=null}).bind(this)}}}),GN=Je(),UN={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},qN=Hu.inherit({NAME:"List",supportedKeys:()=>({space:ue,home:ue,end:ue}),getDefaultOptions(){return Y(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:i=>i||"shorttime",popupConfig:i=>i,getValue(){const i=this._widget.option("selectedIndex");if(i===-1)return this.dateBox.option("value");const e=this._widgetItems[i];return this._getDateByItemData(e)},useCurrentDateByDefault:()=>!0,getDefaultDate:()=>new Date(null),popupShowingHandler(){this.dateBox._dimensionChanged()},_renderWidget(){this.callBase(),this._refreshItems()},_getWidgetName:()=>wa,_getWidgetOptions(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant(i){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",i.actionValue)},_refreshItems(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue(){const i=this.dateBoxValue(),e=this._getDateIndex(i);e===-1?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex(i){let e=-1;for(let t=0,n=this._widgetItems.length;t<n;t++)if(this._areDatesEqual(i,this._widgetItems[t])){e=t;break}return e},_areDatesEqual:(i,e)=>yn(i)&&yn(e)&&i.getHours()===e.getHours()&&i.getMinutes()===e.getMinutes(),_getTimeListItems(){let i=this.dateBox.dateOption("min")||this._getBoundaryDate("min");const e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),t=this.dateBox.dateOption("value")||null;let n=e-i;const s=i.getMinutes()%this.dateBox.option("interval");return n<0?[]:(n>Mt.ONE_DAY&&(n=Mt.ONE_DAY),t-i<Mt.ONE_DAY?this._getRangeItems(i,new Date(i),n):(i=this._getBoundaryDate("min"),i.setMinutes(s),t&&Math.abs(t-e)<Mt.ONE_DAY&&(n=(60*e.getHours()+Math.abs(e.getMinutes()-s))*Mt.ONE_MINUTE),this._getRangeItems(i,new Date(i),n)))},_getRangeItems(i,e,t){const n=[],s=this.dateBox.option("interval");for(;e-i<=t;)n.push(new Date(e)),e.setMinutes(e.getMinutes()+s);return n},_getBoundaryDate(i){const e=UN[i],t=new Date(ci(this.dateBox.dateOption("value"),0));return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate(i){const e=this.dateBox.option("displayFormat");return ct.format(i,this.getDisplayFormat(e))},_listItemClickHandler(i){if(this.dateBox.option("applyValueMode")==="useButtons")return;const e=this._getDateByItemData(i.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,i.event)},_getDateByItemData(i){let e=this.dateBox.option("value");const t=i.getHours(),n=i.getMinutes(),s=i.getSeconds(),o=i.getFullYear(),r=i.getMonth(),a=i.getDate();return e?(this.dateBox.option("dateSerializationFormat")?e=vi.deserializeDate(e):e=new Date(e),e.setHours(t),e.setMinutes(n),e.setSeconds(s),e.setFullYear(o),e.setMonth(r),e.setDate(a)):e=new Date(o,r,a,t,n,0,0),e},getKeyboardListener(){return this._widget},_updatePopupHeight(){const i=fg(this.dateBox.option("dropDownOptions.height"));if(i===void 0||i==="auto"){this.dateBox._setPopupOption("height","auto");const e=rt(this._widget.$element()),t=.45*st(GN);this.dateBox._setPopupOption("height",Math.min(e,t))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText(i,e){let t=this.callBase(i,e);return t&&(t=Mt.mergeDates(t,new Date(null),"date")),t}}),YN=Hu.inherit({NAME:"Native",popupConfig:i=>Y({},i,{width:"auto"}),getParsedText(i){return i?this.dateBox.option("type")==="datetime"?new Date(i.replace(/-/g,"/").replace("T"," ").split(".")[0]):Mt.fromStandardDateFormat(i):null},renderPopupContent:ue,_getWidgetName:ue,_getWidgetOptions:ue,_getDateBoxType(){let i=this.dateBox.option("type");return Mt.SUPPORTED_FORMATS.includes(i)?i==="datetime"&&!mu(i)&&(i="datetime-local"):i="date",i},customizeButtons(){const i=this.dateBox.getButton("dropDown");Re.real().android&&i&&i.on("click",()=>{this.dateBox._input().get(0).click()})},getDefaultOptions(){return{mode:this._getDateBoxType()}},getDisplayFormat(i){const e=this._getDateBoxType();return i||Mt.FORMATS_MAP[e]},renderInputMinMax(i){i.attr({min:vi.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:vi.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}}),$a=Je(),XN="dx-show-invalid-badge",ZN="dx-clear-button-area",Vn={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Nn={date:"date",datetime:"datetime",time:"time"},Ha={calendar:"Calendar",dateView:"DateView",native:"Native",calendarWithTime:"CalendarWithTime",list:"List"},JN={Calendar:_E,DateView:KN,Native:YN,CalendarWithTime:HN,List:qN},QN=mg.inherit({_supportedKeys(){return Y(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions(){return Y(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:Vn.calendar,invalidDateMessage:re.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:re.format("validation-range"),applyButtonText:re.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device(){const i=Re.real(),{platform:e}=i;return e==="ios"||e==="android"},options:{pickerType:Vn.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions(i){this._userOptions=Y({},i),this.callBase(i),this._updatePickerOptions()},_updatePickerOptions(){let i=this.option("pickerType");const e=this.option("type");i===Vn.list&&(e===Nn.datetime||e===Nn.date)&&(i=Vn.calendar),e===Nn.time&&i===Vn.calendar&&(i=Vn.list),this._pickerType=i,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){const{platform:i}=Re.real(),e=i==="android"&&Zt.mozilla,t=this._isNativeType();let n=i!=="generic"||!t;t&&e&&(n=!1),this.option({showDropDownButton:n})},_init(){this._initStrategy(),this.option(Y({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:i=>i.charAt(0).toLowerCase()+i.substr(1),_initStrategy(){const i=this._getStrategyName(this._getFormatType()),e=JN[i];this._strategy&&this._strategy.NAME===i||(this._strategy=new e(this))},_getFormatType(){const i=this.option("type"),e=/h|m|s/g.test(i),t=/d|M|Y/g.test(i);let n="";return t&&(n+=Nn.date),e&&(n+=Nn.time),n},_getStrategyName(i){const e=this._pickerType;return e===Vn.rollers?Ha.dateView:e===Vn.native?Ha.native:i===Nn.date?Ha.calendar:i===Nn.datetime?Ha.calendarWithTime:Ha.list},_initMarkup(){this.$element().addClass("dx-datebox"),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render(){this.callBase(),this._formatValidationIcon()},_renderDimensions(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight(){if(this._popup){var i,e;(i=(e=this._strategy)._updatePopupHeight)===null||i===void 0||i.call(e)}},_refreshFormatClass(){const i=this.$element();ie(Nn,(e,t)=>{i.removeClass(`dx-datebox-${t}`)}),i.addClass(`dx-datebox-${this.option("type")}`)},_refreshPickerTypeClass(){const i=this.$element();ie(Vn,(e,t)=>{i.removeClass(`dx-datebox-${t}`)}),i.addClass(`dx-datebox-${this._pickerType}`)},_formatValidationIcon(){if(!qe())return;const i=this._input().get(0),e=this.option("rtlEnabled"),t=this._getClearButtonWidth(),n=this._getLongestElementDimensions(),s=parseFloat($a.getComputedStyle(i).width)-t,o=n.width>s,{style:r}=i;this.$element().toggleClass(XN,!o&&this.option("_showValidationIcon")),o?(this._storedPadding===void 0&&(this._storedPadding=e?n.leftPadding:n.rightPadding),e?r.paddingLeft=0:r.paddingRight=0):e?r.paddingLeft=`${this._storedPadding}px`:r.paddingRight=`${this._storedPadding}px`},_getClearButtonWidth(){let i=0;if(this._isClearButtonVisible()&&this._input().val()===""){const e=this.$element().find(`.${ZN}`).get(0);i=parseFloat($a.getComputedStyle(e).width)}return i},_getLongestElementDimensions(){const i=this._strategy.getDisplayFormat(this.option("displayFormat")),e=ct.format(Mt.getLongestDate(i,ct.getMonthNames(),ct.getDayNames()),i),t=this._input(),n=t.get(0),s=dA(t,e),r=this._storedPadding!==void 0?this._storedPadding:0;s.appendTo(this.$element());const a=parseFloat($a.getComputedStyle(s.get(0)).width),l=parseFloat($a.getComputedStyle(n).paddingRight),d=parseFloat($a.getComputedStyle(n).paddingLeft),c=a+d+l+r;return s.remove(),{width:c,leftPadding:d,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup(){this.callBase(),this._popup.$wrapper().addClass("dx-datebox-wrapper"),this._renderPopupWrapper()},_getPopupToolbarItems(){var i,e;const t=this.callBase();return((i=(e=this._strategy)._getPopupToolbarItems)===null||i===void 0?void 0:i.call(e,t))??t},_popupConfig(){const i=this.callBase();return Y(this._strategy.popupConfig(i),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper(){if(!this._popup)return;const i=this.$element(),e=Y({},Nn,Vn);ie(e,(t,n)=>{i.removeClass(`dx-datebox-wrapper-${n}`)}),this._popup.$wrapper().addClass(`dx-datebox-wrapper-${this.option("type")}`).addClass(`dx-datebox-wrapper-${this._pickerType}`).addClass("dx-dropdowneditor-overlay")},_renderPopupContent(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged(i){i&&this._formatValidationIcon()},_clearValueHandler(i){this.option("text",""),this.callBase(i)},_readOnlyPropValue(){if(this._pickerType===Vn.rollers)return!0;const{platform:i}=Re.real();return this._isNativeType()&&(i==="ios"||i==="android")?this.option("readOnly"):this.callBase()},_isClearButtonVisible(){return this.callBase()&&!this._isNativeType()},_renderValue(){const i=this.dateOption("value");return this.option("text",this._getDisplayedText(i)),this._strategy.renderValue(),this.callBase()},_setSubmitValue(){const i=this.dateOption("value"),e=this.option("dateSerializationFormat"),t=Mt.SUBMIT_FORMATS_MAP[this.option("type")],n=e?vi.serializeDate(i,e):Mt.toStandardDateFormat(i,t);this._getSubmitElement().val(n)},_getDisplayedText(i){const e=this.option("mode");let t;if(e==="text"){const n=this._strategy.getDisplayFormat(this.option("displayFormat"));t=ct.format(i,n)}else{const n=this._getFormatByMode(e);n?t=ct.format(i,n):t=Mt.toStandardDateFormat(i,e)}return t},_getFormatByMode:i=>mu(i)?null:Mt.FORMATS_MAP[i],_valueChangeEventHandler(i){const{text:e,type:t,validationError:n}=this.option(),s=this.dateOption("value");if(e===this._getDisplayedText(s)){this._recallInternalValidation(s,n);return}const o=this._getParsedDate(e),r=s??this._getDateByDefault(),a=Mt.mergeDates(r,o,t),l=o&&t==="time"?a:o;if(this._applyInternalValidation(l).isValid){const d=this._getDisplayedText(a);r&&a&&r.getTime()===a.getTime()&&d!==e?this._renderValue():this.dateValue(a,i)}},_recallInternalValidation(i,e){(!e||e.editorSpecific)&&(this._applyInternalValidation(i),this._applyCustomValidation(i))},_getDateByDefault(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate(i){const e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(i,e)??void 0},_applyInternalValidation(i){const t=!!this.option("text")&&i!==null,n=!!i&&yn(i)&&!isNaN(i.getTime()),s=n&&Ae.dateInRange(i,this.dateOption("min"),this.dateOption("max"),this.option("type")),o=!t&&!i||s;let r="";return n?s||(r=this.option("dateOutOfRangeMessage")):r=this.option("invalidDateMessage"),this._updateInternalValidationState(o,r),{isValid:o,isDate:n}},_updateInternalValidationState(i,e){this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:e}})},_applyCustomValidation(i){this.validationRequest.fire({editor:this,value:this._serializeDate(i)})},_isValueChanged(i){const e=this.dateOption("value"),t=e&&e.getTime(),n=i&&i.getTime();return t!==n},_isTextChanged(i){const e=this.option("text"),t=i&&this._getDisplayedText(i)||"";return e!==t},_renderProps(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle(){const i=this.option("placeholder");if(i)return i;const e=this.option("type");return e===Nn.time?re.format("dxDateBox-simulatedDataPickerTitleTime"):e===Nn.date||e===Nn.datetime?re.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler(i){const e=this._strategy.getValue();this.dateValue(e,i.event),this.callBase()},_dispose(){var i;this.callBase(),(i=this._strategy)===null||i===void 0||i.dispose()},_isNativeType(){return this._pickerType===Vn.native},_updatePopupTitle(){var i;(i=this._popup)===null||i===void 0||i.option("title",this._getPopupTitle())},_optionChanged(i){switch(i.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:i.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:i.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":{const e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break}case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(i.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat(){const i=this.option("value");if(this.option("dateSerializationFormat")&&$t().forceIsoDateParsing)return this.option("dateSerializationFormat");if(Wt(i))return"number";if(Ke(i))return vi.getDateSerializationFormat(i)},_updateValue(i){this.callBase(),this._applyInternalValidation(i??this.dateOption("value"))},dateValue(i,e){const t=this._isValueChanged(i);return t&&e&&this._saveValueChangeEvent(e),t||(this._isTextChanged(i)?this._updateValue(i):this.option("text")===""&&this._applyCustomValidation(i)),this.dateOption("value",i)},dateOption(i,e){if(arguments.length===1)return vi.deserializeDate(this.option(i));this.option(i,this._serializeDate(e))},_serializeDate(i){const e=this._getSerializationFormat();return vi.serializeDate(i,e)},_clearValue(){const i=this.option("value");this.callBase(),i===null&&this._applyCustomValidation(null)},clear(){const i=this.option("value");this.callBase(),i===null&&this._applyInternalValidation(null)}}),Lv=i=>i.getMonth()+1,$v=(i,e)=>{const t=i.getDate(),n=kl("M",i),s=Yi(parseInt(e),n.min,n.max);i.setMonth(s-1,1);const{min:o,max:r}=kl("dM",i),a=Yi(t,o,r);i.setDate(a)},e9={a:i=>i.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:Lv,L:Lv,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds",x:"getTimezoneOffset"},t9=Y({},eR(),{a:(i,e)=>{const t=i.getHours();t>=12!==!!parseInt(e)&&i.setHours((t+12)%24)},d:(i,e)=>{const t=kl("dM",i).max;e>t&&i.setMonth(i.getMonth()+1),i.setDate(e)},h:(i,e)=>{const t=i.getHours()>=12;i.setHours(+e%12+(t?12:0))},M:$v,L:$v,E:(i,e)=>{e<0||i.setDate(i.getDate()-i.getDay()+parseInt(e))},y:(i,e)=>{const t=i.getFullYear(),n=String(e).length,s=String(kl("y",i).max).length,o=parseInt(String(t).substr(0,s-n)+e);i.setFullYear(o)},x:i=>i}),i9=i=>e9[i]||(()=>i),n9=(i,e)=>{const t=e.regexp.exec(i);let n=0,s=0;const o=[];for(let r=1;r<t.length;r++){n=s,s=n+t[r].length;const a=e.patterns[r-1].replace(/^'|'$/g,""),l=i9(a[0]);o.push({index:r-1,isStub:a===t[r],caret:{start:n,end:s},pattern:a,text:t[r],limits:function(){for(var d=arguments.length,c=new Array(d),h=0;h<d;h++)c[h]=arguments[h];return kl(a[0],...c)},setter:t9[a[0]]||ue,getter:l})}return o},kl=(i,e,t)=>{const n={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1},x:{min:0,max:0}};return n[t||i]||n.getAmPm},s9=(i,e)=>{for(let t=0;t<i.length;t++){const n=i[t].caret.end>=e;if(!i[t].isStub&&n)return t}return null},o9=QN.inherit({_supportedKeys(i){const e=this.callBase(i),t=s=>{const o=e[oi(s)];return o&&o.apply(this,[s])},n=(s,o)=>this._shouldUseOriginalHandler(s)?t.apply(this,[s]):o.apply(this,[s]);return Y({},e,{del:s=>n(s,o=>{this._revertPart(1),this._isAllSelected()||o.preventDefault()}),backspace:s=>n(s,o=>{this._revertPart(-1),this._isAllSelected()||o.preventDefault()}),home:s=>n(s,o=>{this._selectFirstPart(),o.preventDefault()}),end:s=>n(s,o=>{this._selectLastPart(),o.preventDefault()}),escape:s=>n(s,o=>{this._revertChanges(o)}),enter:s=>n(s,()=>{this._enterHandler()}),leftArrow:s=>n(s,o=>{this._selectNextPart(-1),o.preventDefault()}),rightArrow:s=>n(s,o=>{this._selectNextPart(1),o.preventDefault()}),upArrow:s=>n(s,o=>{this._upDownArrowHandler(1),o.preventDefault()}),downArrow:s=>n(s,o=>{this._upDownArrowHandler(-1),o.preventDefault()})})},_shouldUseOriginalHandler(i){const e=this.option("opened")&&i&&!["backspace","del"].includes(oi(i));return!this._useMaskBehavior()||e||i&&i.altKey},_upDownArrowHandler(i){this._setNewDateIfEmpty();const e=this._getActivePartValue(this._initialMaskValue),n=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._changePartValue(n+i,!0)},_changePartValue(i,e){const t=this._getActivePartProp("pattern");/^a{1,5}$/.test(t)?this._toggleAmPm():this._partIncrease(i,e)},_toggleAmPm(){const i=this._getActivePartProp("text"),t=1^ta.getPeriodNames().indexOf(i);this._setActivePartValue(t)},_getDefaultOptions(){return Y(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(i){let{originalEvent:e,alt:t}=i;const n=e.data||e.key;return typeof n=="string"&&n.length===1&&!t&&!ki(e)},_isSingleDigitKey(i){var e;const t=(e=i.originalEvent)===null||e===void 0?void 0:e.data;return(t==null?void 0:t.length)===1&&parseInt(t,10)},_useBeforeInputEvent:()=>Re.real().android,_keyInputHandler(i,e){const t=this._input().val();this._processInputKey(e),i.preventDefault(),t!==this._input().val()&&q.trigger(this._input(),"input")},_keyboardHandler(i){let{key:e}=i.originalEvent;const t=this.callBase(i);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(Zt.chrome&&i.key==="Process"&&i.code.indexOf("Digit")===0?(e=i.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(i)&&this._keyInputHandler(i.originalEvent,e)),t},_maskBeforeInputHandler(i){this._maskInputHandler=null;const{inputType:e}=i.originalEvent;e==="insertCompositionText"&&(this._maskInputHandler=()=>{this._renderSelectedPart()});const t=e==="deleteContentBackward";if(t||e==="deleteContentForward"){const o=t?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(o)}}if(!this._useMaskBehavior()||!this._isSingleCharKey(i))return;const s=i.originalEvent.data;return this._keyInputHandler(i,s),!0},_keyPressHandler(i){const{originalEvent:e}=i;(e==null?void 0:e.inputType)==="insertCompositionText"&&this._isSingleDigitKey(i)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(i),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(i){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(i))?this._searchString(i):this._searchNumber(i)},_isAllSelected(){const i=this._caret();return i.end-i.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;const i=this._strategy.getDisplayFormat(this.option("displayFormat"));return Ke(i)&&!ct._getPatternByFormat(i)?this._formatPattern=i:this._formatPattern=ow(t=>ct.format(t,i)),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){const i=this.option("type")==="time"?new Date(null):new Date;this._maskValue=i,this._initialMaskValue=i,this._renderDateParts()}},_partLimitsReached(i){const e=String(i).length,t=this._getActivePartProp("pattern").length,s=t===1?e:Math.min(t,e),o=this._searchValue.length===s,r=parseInt(`${this._searchValue}0`)>i;return o||r},_searchNumber(i){const{max:e}=this._getActivePartLimits(),t=String(e).length;this._searchValue=(this._searchValue+i).substr(-t),isNaN(this._searchValue)&&(this._searchValue=i),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(i){if(!isNaN(parseInt(this._getActivePartProp("text"))))return;const e=this._getActivePartProp("limits")(this._maskValue),t=this._searchValue+i.toLowerCase(),n=e.max-e.min;for(let s=0;s<=n;s++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(s+1),this._getActivePartProp("text").toLowerCase().indexOf(t)===0){this._searchValue=t;return}this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(i))},_clearSearchValue(){this._searchValue=""},_revertPart(i){if(!this._isAllSelected()){const e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(i)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&this.option("mode")==="text"},_prepareRegExpInfo(){this._regExpInfo=rw(this._getFormatPattern(),ct);const{regexp:i}=this._regExpInfo,{source:e}=i,{flags:t}=i,n=new RegExp(/(\{[0-9]+,?[0-9]*\})/),s=e.split(n).map(o=>n.test(o)?o:Gt.convertDigits(o,!1)).join("");this._regExpInfo.regexp=new RegExp(s,t)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(!this._useMaskBehavior())return;const i=this.option("text")||this._getDisplayedText(this._maskValue);i&&(this._dateParts=n9(i,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())},_detachMaskEvents(){q.off(this._input(),".dateBoxMask")},_attachMaskEvents(){q.on(this._input(),be("dxclick","dateBoxMask"),this._maskClickHandler.bind(this)),q.on(this._input(),be("paste","dateBoxMask"),this._maskPasteHandler.bind(this)),q.on(this._input(),be("drop","dateBoxMask"),()=>{this._renderSelectedPart()}),q.on(this._input(),be("compositionend","dateBoxMask"),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&q.on(this._input(),be("beforeinput","dateBoxMask"),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(i){this._useMaskBehavior()&&this._partIncrease(i.delta>0?1:-1,i)},_selectNextPart(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.option("text")||this._disposed)return;i&&(this._initialMaskValue=new Date(this._maskValue));let e=Yi(this._activePartIndex+i,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(e===0&&i<0||e===this._dateParts.length-1&&i>0)){this._selectNextPart(i>=0?i+1:i-1);return}e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))},_getRealLimitsPattern(){if(this._getActivePartProp("pattern")[0]==="d")return"dM"},_getActivePartLimits(i){return this._getActivePartProp("limits")(this._maskValue,i&&this._getRealLimitsPattern())},_getActivePartValue(i){i=i||this._maskValue;const e=this._getActivePartProp("getter");return Ee(e)?e(i):i[e]()},_addLeadingZeroes(i){const e=this._searchValue.match(/^0+/),t=this._getActivePartLimits(),n=String(t.max).length;return((e&&e[0]||"")+String(i)).substr(-n)},_setActivePartValue(i,e){e=e||this._maskValue;const t=this._getActivePartProp("setter"),n=this._getActivePartLimits();i=$s(i,n.min,n.max)?i:i%10,i=this._addLeadingZeroes(Yi(i,n.min,n.max)),Ee(t)?t(e,i):e[t](i),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(i){if(!(!this._dateParts||!this._dateParts[this._activePartIndex]))return this._dateParts[this._activePartIndex][i]},_loadMaskValue(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dateOption("value");this._maskValue=i&&new Date(i),this._initialMaskValue=i&&new Date(i)},_saveMaskValue(){const i=this._maskValue&&new Date(this._maskValue);i&&this.option("type")==="date"&&i.setHours(0,0,0,0),this._initialMaskValue=new Date(i),this.dateOption("value",i)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(i){this.callBase(i),this._useMaskBehavior()&&this.option("text",i)},_partIncrease(i,e){this._setNewDateIfEmpty();const{max:t,min:n}=this._getActivePartLimits(e);let s=i+this._getActivePartValue();s>t?s=this._applyLimits(s,{limitBase:n,limitClosest:t,max:t}):s<n&&(s=this._applyLimits(s,{limitBase:t,limitClosest:n,max:t})),this._setActivePartValue(s)},_applyLimits(i,e){let{limitBase:t,limitClosest:n,max:s}=e;const o=(i-n)%s;return o?t+o-1*ha(o):n},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=s9(this._dateParts,this._caret().start),this._isAllSelected()||(U(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(i){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(i){const e=this._replaceSelectedText(this.option("text"),this._caret(),Lp(i)),t=ct.parse(e,this._getFormatPattern());t&&this._isDateValid(t)&&(this._maskValue=t,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),i.preventDefault()},_isDateValid:i=>yn(i)&&!isNaN(i),_isValueDirty(){const i=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(i&&i.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&q.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(i){this._useMaskBehavior()&&!i.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(i),this._selectFirstPart(i)):this.callBase(i)},_valueChangeEventHandler(i){const e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(i),e?this._maskValue===null&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(i)},_optionChanged(i){switch(i.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(i),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(i),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(i)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});wt("dxDateBox",o9);const{isWrapped:r9}=Qi,a9="dx-editor-inline-block",hd=function(i,e){return Y(i,{readOnly:e.readOnly,placeholder:e.placeholder,inputAttr:{id:e.id,"aria-labelledby":e["aria-labelledby"]},tabIndex:e.tabIndex},e.editorOptions)},CE=function(){return Zt.mozilla||Re.real().ios},xE=function(i){const e={},t=CE(),n=i.sharedData||e;return hd({placeholder:i.placeholder,width:i.width,value:i.value,onValueChanged:function(s){const o=i.parentType==="filterRow"||i.parentType==="searchPanel",r=s.event&&(s.event.type==="input"||s.event.type==="keyup"),a=function(l,d){i&&i.setValue(l.value,d)};clearTimeout(e.valueChangeTimeout),r&&o?n.valueChangeTimeout=e.valueChangeTimeout=setTimeout(function(){a(s,e.valueChangeTimeout!==n.valueChangeTimeout)},U(i.updateValueTimeout)?i.updateValueTimeout:0):a(s)},onKeyDown:function(s){t&&oi(s.event)==="enter"&&q.trigger(R(s.component._input()),"change")},valueChangeEvent:"change"+(i.parentType==="filterRow"?" keyup input":"")},i)},Hv=function(i){i.editorName="dxDateBox",i.editorOptions=hd({value:i.value,onValueChanged:function(e){i.setValue(e.value)},onKeyDown:function(e){let{component:t,event:n}=e;const s=t.option("useMaskBehavior");(CE()||s)&&oi(n)==="enter"&&(t.blur(),t.focus())},displayFormat:i.format,type:i.dataType,dateSerializationFormat:null,width:i.parentType==="filterBuilder"?void 0:"auto"},i)},zv=function(i){const e=xE(i),t=i.parentType==="searchPanel";i.editorType&&i.editorType!=="dxTextBox"?e.value=i.value:e.value=(n=i.value,U(n)?n.toString():"");var n;e.valueChangeEvent+=t?" keyup input search":"",e.mode=e.mode||(t?"search":"text"),i.editorName="dxTextBox",i.editorOptions=e},Wv=function(i){const e=xE(i);e.value=U(i.value)?i.value:null,i.editorName="dxNumberBox",i.editorOptions=e},l9=function(i){i.parentType==="filterRow"||i.parentType==="filterBuilder"?wE(Y(i,{lookup:{displayExpr:function(e){if(e===!0)return i.trueText||"true";if(e===!1)return i.falseText||"false"},dataSource:[!0,!1]}})):SE(i)};function d9(i){if(i.row&&i.row.watch&&i.parentType==="dataRow"){const e=i.editorOptions||{};i.editorOptions=e;let t;const n=e.onInitialized;e.onInitialized=function(r){n&&n.apply(this,arguments),t=r.component,t.on("disposing",o)};let s;const o=i.row.watch(()=>(s=i.lookup.dataSource(i.row),s&&s.filter),()=>{t.option("dataSource",s)},r=>{i.row=r})}}function wE(i){const e=i.lookup;let t,n,s;const o=i.parentType==="filterRow";if(e){t=Nt(e.displayExpr),n=e.dataSource,Ee(n)&&!r9(n)&&(n=n(i.row||{}),d9(i)),(We(n)||Array.isArray(n))&&(n=Bo(n),o&&(s=n.postProcess,n.postProcess=function(a){return this.pageIndex()===0&&(a=a.slice(0),a.unshift(null)),s?s.call(this,a):a}));const r=!!(e.allowClearing&&!o);i.editorName=i.editorType??"dxSelectBox",i.editorOptions=hd({searchEnabled:!0,value:i.value,valueExpr:i.lookup.valueExpr,searchExpr:i.lookup.searchExpr||i.lookup.displayExpr,allowClearing:r,showClearButton:r,displayExpr:function(a){return a===null?i.showAllText:t(a)},dataSource:n,onValueChanged:function(a){const l=[a.value];!o&&l.push(a.component.option("text")),i.setValue.apply(this,l)}},i)}}function SE(i){i.editorName="dxCheckBox",i.editorOptions=hd({elementAttr:{id:i.id},value:U(i.value)?i.value:void 0,hoverStateEnabled:!i.readOnly,focusStateEnabled:!i.readOnly,activeStateEnabled:!1,onValueChanged:function(e){i.setValue&&i.setValue(e.value,e)}},i)}const c9=function(i,e){const t=R(e.editorElement);if(e.editorName&&e.editorOptions&&t[e.editorName]){if((e.editorName==="dxCheckBox"||e.editorName==="dxSwitch")&&(e.isOnForm||(t.addClass(i.addWidgetPrefix("checkbox-size")),t.parent().addClass(a9))),i._createComponent(t,e.editorName,e.editorOptions),e.editorName==="dxDateBox"){const n=t.dxDateBox("instance"),s=n._supportedKeys().enter;n.registerKeyHandler("enter",o=>(n.option("opened")&&s(o),!0))}e.editorName==="dxTextArea"&&t.dxTextArea("instance").registerKeyHandler("enter",function(n){oi(n)==="enter"&&!n.ctrlKey&&!n.shiftKey&&n.stopPropagation()})}},u9=i=>{i.editorName=i.editorType,i.editorOptions=hd({value:i.value,onValueChanged:function(e){i.setValue(e.value)}},i)},h9=i=>{const e={dxDateBox:Hv,dxCheckBox:SE,dxNumberBox:Wv,dxTextBox:zv};if(i.lookup)wE(i);else if(i.editorType)(e[i.editorType]??u9)(i);else switch(i.dataType){case"date":case"datetime":Hv(i);break;case"boolean":l9(i);break;case"number":Wv(i);break;default:zv(i)}},EE=i=>class extends i{createEditor(e,t){t.cancel=!1,t.editorElement=ze(e),U(t.tabIndex)||(t.tabIndex=this.option("tabIndex")),h9(t),this.executeAction("onEditorPreparing",t),!t.cancel&&(t.parentType==="dataRow"&&!t.isOnForm&&!U(t.editorOptions.showValidationMark)&&(t.editorOptions.showValidationMark=!1),c9(this,t),this.executeAction("onEditorPrepared",t))}},p9="dx-editor-inline-block",IE="dxDataGridEditorFactory",jv=be([Ct.down,"focusin",kt].join(" "),IE),Yh="dx-hidden",f9=EE(Yt.ViewController);let m9=class extends f9{init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._columnsResizerController=this.getController("columnsResizer"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsController=this.getController("columns"),this._validatingController=this.getController("validating"),this._rowsView=this.getView("rowsView"),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),q.on(this._subscribedContainerRoot,jv,this._updateFocusHandler),this._attachContainerEventHandlers()}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),q.off(this._subscribedContainerRoot,jv,this._updateFocusHandler)}_getFocusedElement(e){const n=["td[tabindex]:focus",`${this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus"}`,"input:focus","button:focus","textarea:focus","div[tabindex]:focus",".dx-lookup-field:focus",".dx-checkbox:focus",".dx-switch:focus",".dx-dropdownbutton .dx-buttongroup:focus",".dx-adaptive-item-text:focus"].join(","),s=e.find(n);return this.elementIsInsideGrid(s)&&s}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){const e=this.component&&this.component.$element();if(e){let t=this._getFocusedElement(e);if(t&&t.length){let n;if(!t.hasClass("dx-cell-focus-disabled")&&!t.hasClass("dx-row")){const s=t.closest(`${this._getFocusCellSelector()}, .dx-cell-focus-disabled`);s.get(0)!==t.get(0)&&(n=this._needHideBorder(s),t=s)}if(t.length&&!t.hasClass("dx-cell-focus-disabled")){this.focus(t,n);return}}}this.loseFocus()}_needHideBorder(e){const t=this._rowsView.element(),n=e.closest(t).length>0,s=this._editingController.isEditing();return e.hasClass(p9)||n&&!s}_updateFocus(e){const t=this,n=e&&e.event&&R(e.event.target).hasClass(t.addWidgetPrefix("focus-overlay"));t._isFocusOverlay=t._isFocusOverlay||n,clearTimeout(t._updateFocusTimeoutID),t._updateFocusTimeoutID=setTimeout(()=>{delete t._updateFocusTimeoutID,t._isFocusOverlay||t._updateFocusCore(),t._isFocusOverlay=!1})}_updateFocusOverlaySize(e,t){e.hide();const n=Un.calculate(e,Y({collision:"fit"},t));n.h.oversize>0&&b_(e,St(e)-n.h.oversize),n.v.oversize>0&&v_(e,rt(e)-n.v.oversize),e.show()}callbackNames(){return["focused"]}focus(e,t){const n=this;if(e===void 0)return n._$focusedElement;e&&(e.is(n._$focusedElement)||n._$focusedElement&&n._$focusedElement.removeClass("dx-focused"),n._$focusedElement=e,clearTimeout(n._focusTimeoutID),n._focusTimeoutID=setTimeout(()=>{delete n._focusTimeoutID,n.renderFocusOverlay(e,t),e.addClass("dx-focused"),n.focused.fire(e)}))}refocus(){const e=this.focus();this.focus(e)}renderFocusOverlay(e,t){const n=this;if(Ce.isElementInCurrentGrid(this,e)){if(n._$focusOverlay||(n._$focusOverlay=R("<div>").addClass(n.addWidgetPrefix("focus-overlay"))),t)n._$focusOverlay.addClass(Yh);else if(e.length){const s=Zt.mozilla?"right bottom":"left top",o=e.closest(`.${n.addWidgetPrefix("content")}`),r=yi(e.get(0)),a=e.hasClass(this.addWidgetPrefix("invalid")),l=e.hasClass("dx-cell-modified")&&!a;n._$focusOverlay.removeClass(Yh).toggleClass("dx-focused-cell-invalid",a).toggleClass("dx-focused-cell-modified",l).appendTo(o),v_(n._$focusOverlay,r.bottom-r.top+1),b_(n._$focusOverlay,r.right-r.left+1);const d={precise:!0,my:s,at:s,of:e,boundary:o.length&&o};n._updateFocusOverlaySize(n._$focusOverlay,d),Un.setup(n._$focusOverlay,d),n._$focusOverlay.css("visibility","visible")}}}resize(){const e=this._$focusedElement;e&&this.focus(e)}loseFocus(e){this._$focusedElement&&this._$focusedElement.removeClass("dx-focused"),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(Yh)}_getContainerRoot(){var e;const t=(e=this.component)===null||e===void 0?void 0:e.$element(),n=_e.getRootNode(t==null?void 0:t.get(0));return n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!n.host?_e.getDocument():n}_attachContainerEventHandlers(){const e=this,t=e.component&&e.component.$element();t&&q.on(t,be("keydown",IE),n=>{oi(n)==="tab"&&e._updateFocusHandler(n)})}};const g9={defaultOptions:()=>({}),controllers:{editorFactory:m9}};He.registerModule("editorFactory",g9);const Gd=Je(),_9={text:"OK",onClick:()=>!0},b9=()=>nn()?{stylingMode:"contained",type:"default"}:{},v9=()=>nn()?{stylingMode:"outlined",type:"default"}:{},y9=function(i){const e=ae();i=i||{};const t=R("<div>").addClass("dx-dialog").appendTo(Do()),n="message"in i,s="messageHtml"in i;n&&mt.log("W1013");const o=String(s?i.messageHtml:i.message),r=i.title?null:new hi,a=R("<div>").addClass("dx-dialog-message").html(o).attr("id",r),l=[],d=new io(t,Y({title:i.title??"",showTitle:ci(i.showTitle,!0),dragEnabled:ci(i.dragEnabled,!0),height:"auto",width:i.width,showCloseButton:i.showCloseButton||!1,ignoreChildEvents:!1,container:t,visualContainer:Gd,dragAndResizeArea:Gd,onContentReady(u){u.component.$content().addClass("dx-dialog-content").append(a),r&&u.component.$overlayContent().attr("aria-labelledby",r)},onShowing(u){u.component.bottomToolbar().addClass("dx-dialog-buttons").find(".dx-button").addClass("dx-dialog-button"),Ca()},onShown(u){const p=u.component.bottomToolbar().find(".dx-button").first();q.trigger(p,"focus")},onHiding(){e.reject()},onHidden(u){let{element:p}=u;R(p).remove()},animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:$t().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},i.popupOptions));(i.buttons||[_9]).forEach(u=>{const p=new bn(u.onClick,{context:d});l.push({toolbar:"bottom",location:Re.current().android?"after":"center",widget:"dxButton",options:ve({},u,{onClick(){const f=p.execute(...arguments);h(f)}})})}),d.option("toolbarItems",l),d.$wrapper().addClass("dx-dialog-wrapper"),i.position&&d.option("position",i.position),d.$wrapper().addClass("dx-dialog-root");function h(u){e.resolve(u),d.hide()}return{show:function(){if(Re.real().deviceType==="phone"){const p=st(Gd)>Ge(Gd)?"90%":"60%";d.option({width:p})}return d.show(),e.promise()},hide:h}},C9=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;const n=ht(i)?i:{title:e,messageHtml:i,showTitle:t,buttons:[ve({text:re.format("Yes"),onClick:()=>!0},b9()),ve({text:re.format("No"),onClick:()=>!1},v9())],dragEnabled:t};return y9(n).show()},zu="dx-editor-cell",po="dx-row",x9="dx-cell-modified",Kv="dx-selection",bg="edit-form",cs="insert",Ps="remove",yc="editing.popup",Xh="editing.form",En="editing.editRowKey",tr="editing.editColumnName",TE="targetComponent",vg="input:not([type='hidden'])",yg=`[tabindex]:not([disabled]), ${vg}:not([disabled])`,nu="batch",ll="row",Ef="cell",Cg="form",w9="popup",Gv="first",Ud="last",Uv="pageBottom",Zh="pageTop",qv="viewportBottom",DE="viewportTop",S9=["batch","row","cell","form","popup"],E9=["row","form","popup"],I9=["batch","cell"],T9=["batch","row","cell"],D9=["row","form"],A9="readonly",k9="dx-link",O9="dx-link-icon",R9="dx-selection",M9="dx-edit-button",P9="dx-command-edit",Yv="dx-command-edit-with-icons",uo="__DX_INSERT_INDEX__",B9="dx-row-inserted",F9="dx-row-modified",Xv="dx-cell-modified",V9="dxDataGridEditing",N9="dx-cell-focus-disabled",za="update",L9="click",$9={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},H9={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},z9={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},W9={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},j9=["edit","save","cancel","delete","undelete"],Bs="editing.changes",K9="focus-overlay",G9="addrow-button",U9="dx-dropdowneditor-overlay",q9="dx-data-row",Y9="dx-row-removed",X9="filter-row",Z9=!!vn.IS_RENOVATED_WIDGET,AE="edit-form-item",J9="edit-popup",Q9="edit-popup-form",eL=Z9?"dx-scrollable":"dx-scrollable-container",tL="dx-button",iL="form-buttons-container",Zv="dx-edit-row",qd=function(i){return function(e){const t=e instanceof Error?e:new Error(e&&String(e)||"Unknown error");i.reject(t)}},kE=function(i,e){return e.isEditing||i&&e.column.allowEditing},Jv=function(i,e){const t=!!e.column.command,n=kE(i,e),s=!t&&(n||e.column.showEditorAlways);return e.rowType==="data"&&s},nL=i=>{const e=i.component.option("editing.texts")||{};return{save:e.saveRowChanges,cancel:e.cancelRowChanges,edit:e.editRow,undelete:e.undeleteRow,delete:e.deleteRow,add:e.addRowToNode}},sL=()=>`_DX_KEY_${new hi}`,oL=i=>typeof i=="string"&&i.startsWith("_DX_KEY_")&&i.length===44,Ur=(i,e)=>{let t=-1;return i.some((n,s)=>{if(OE(n)===e)return t=s,!0}),t};function OE(i){return We(i)?i.name:i}function rL(i){return i&&(i.is("input")||i.is("textarea"))}const aL=i=>{var e;const{column:t}=i;return i.isCustomEditorType?i.editorType:(e=t.formItem)===null||e===void 0?void 0:e.editorType},RE=(i,e)=>{i.forEach(t=>{t.items||t.tabs?RE(t.items||t.tabs,e):e(t)})};class lL extends Yt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._validatingController=this.getController("validating"),this._editorFactoryController=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsResizerController=this.getController("columnsResizer"),this._errorHandlingController=this.getController("errorHandling"),this._rowsView=this.getView("rowsView"),this._headerPanelView=this.getView("headerPanel"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>{e.reject("cancel")}),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[En]=!0,this.component._optionsByReference[Bs]=!0}getEditMode(){const e=this.option("editing.mode")??ll;return S9.includes(e)?e:ll}isCellBasedEditMode(){const e=this.getEditMode();return I9.includes(e)}_getDefaultEditorTemplate(){return(e,t)=>{const n=R("<div>").appendTo(e),s=Y({},t.column,{value:t.value,setValue:t.setValue,row:t.row,parentType:"dataRow",width:null,readOnly:!t.setValue,isOnForm:t.isOnForm,id:t.id});T9.includes(this.getEditMode())&&(s["aria-labelledby"]=t.column.headerId),this._editorFactoryController.createEditor(n,s)}}_getNewRowPosition(){const e=this.option("editing.newRowPosition");if(this.option("scrolling.mode")==="virtual")switch(e){case Zh:return DE;case Uv:return qv;default:return e}return e}getChanges(){return this.option(Bs)}getInsertRowCount(){return this.option(Bs).filter(t=>t.type==="insert").length}resetChanges(){const e=this.getChanges();(e==null?void 0:e.length)&&this._silentOption(Bs,[])}_getInternalData(e){return this._internalState.filter(t=>zt(t.key,e))[0]}_addInternalData(e){const t=this._getInternalData(e.key);return t?Y(t,e):(this._internalState.push(e),e)}_getOldData(e){var t;return(t=this._getInternalData(e))===null||t===void 0?void 0:t.oldData}getUpdatedData(e){const t=this._dataController.keyOf(e),n=this.getChanges(),s=Ce.getIndexByKey(t,n);return n[s]?vo(e,n[s].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===cs).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===Ps).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if(e==="cancel")return;const t=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,t)}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,t){let n=!0;switch(e.name){case"delete":n=this.allowDeleting(t);break;case"undelete":n=!1}return n}isPopupEditMode(){return this.option("editing.mode")===w9}_isButtonVisible(e,t){const{visible:n}=e;return U(n)?Ee(n)?n.call(e,{component:t.component,row:t.row,column:t.column}):n:this._isDefaultButtonVisible(e,t)}_isButtonDisabled(e,t){const{disabled:n}=e;return Ee(n)?n.call(e,{component:t.component,row:t.row,column:t.column}):!!n}_getButtonConfig(e,t){const n=We(e)?e:{},s=OE(e),o=nL(t),r=z9[s],a=this.option("editing"),l=W9[s],d=l?a[l]:!0;return Y({name:s,text:o[s],cssClass:$9[s]},{onClick:r&&(c=>{const{event:h}=c;h.stopPropagation(),h.preventDefault(),setTimeout(()=>{t.row&&d&&this[r]&&this[r](t.row.rowIndex)})})},n)}_getEditingButtons(e){let t;const n=!!e.column.buttons;let s=(e.column.buttons||[]).slice();return n?(t=Ur(s,"edit"),t>=0&&(Ur(s,"save")<0&&s.splice(t+1,0,"save"),Ur(s,"cancel")<0&&s.splice(Ur(s,"save")+1,0,"cancel")),t=Ur(s,"delete"),t>=0&&Ur(s,"undelete")<0&&s.splice(t+1,0,"undelete")):s=j9.slice(),s.map(o=>this._getButtonConfig(o,e))}_renderEditingButtons(e,t,n,s){t.forEach(o=>{this._isButtonVisible(o,n)&&this._createButton(e,o,n,s)})}_getEditCommandCellTemplate(){return(e,t,n)=>{const s=R(e);if(t.rowType==="data"){const o=this._getEditingButtons(t);if(this._renderEditingButtons(s,o,t,n),t.watch){const r=t.watch(()=>o.map(a=>({visible:this._isButtonVisible(a,t),disabled:this._isButtonDisabled(a,t)})),()=>{s.empty(),this._renderEditingButtons(s,o,t)});q.on(s,Rn,r)}}else Ce.setEmptyText(s)}}isRowBasedEditMode(){const e=this.getEditMode();return E9.includes(e)}getFirstEditableColumnIndex(){let e;const t=this._columnsController.getVisibleColumns();return ie(t,(n,s)=>{if(s.allowEditing)return e=n,!1}),e}getFirstEditableCellInRow(e){var t;const n=this.getFirstEditableColumnIndex();return(t=this._rowsView)===null||t===void 0?void 0:t._getCellElement(e||0,n)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,t){return Ce.getIndexByKey(e,t)}hasChanges(e){const t=this.getChanges();let n=!1;for(let s=0;s<(t==null?void 0:t.length);s++)if(t[s].type&&(!U(e)||this._dataController.getRowIndexByKey(t[s].key)===e)){n=!0;break}return n}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),q.off(_e.getDocument(),Ct.up,this._pointerUpEditorHandler),q.off(_e.getDocument(),Ct.down,this._pointerDownEditorHandler),q.off(_e.getDocument(),kt,this._saveEditorHandler)}_silentOption(e,t){e==="editing.changes"&&(this._changes=In([],t)),super._silentOption(e,t)}optionChanged(e){if(e.name==="editing"){const{fullName:t}=e;t===En?this._handleEditRowKeyChange(e):t===Bs?zt(e.value,this._changes,{maxDepth:4})||(this._changes=In([],e.value),this._handleChangesChange(e)):e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){const t=this._dataController.getRowIndexByKey(e.value),n=this._getEditRowIndexCorrection(),s=this._dataController.getRowIndexByKey(e.previousValue)+n;U(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(t,s):this.cancelEditData()}_handleChangesChange(e){const t=this._dataController,n=e.value;!e.value.length&&!e.previousValue.length||(n.forEach(s=>{if(s.type==="insert")this._addInsertInfo(s);else{var o;const r=t.getCachedStoreData()||((o=t.items())===null||o===void 0?void 0:o.map(l=>l.data)),a=Ce.getIndexByKey(s.key,r,t.key());this._addInternalData({key:s.key,oldData:r[a]})}}),t.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){U(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){return U(this.option(En))}isEditRow(e){return!1}_setEditRowKey(e,t){t?this._silentOption(En,e):this.option(En,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(e,t){const n=this._dataController.getKeyByRowIndex(e);if(n===void 0){this._dataController.fireError("E1043");return}this._setEditRowKey(n,t)}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){const t=this._dataController.getKeyByRowIndex(e),n=U(t)&&zt(this.option(En),t);return n&&this._getVisibleEditRowIndex()===e}isEditCell(e,t){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===t}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,t,n){let s=-1;const o=this._dataController,r=this._getInsertAfterOrBeforeKey(t);return!U(r)&&e.length===0?s=0:U(r)&&e.some((a,l)=>{const d=n||this._isProcessedItem(a);if(We(a)&&(d||U(a[uo])?zt(a.key,r)&&(s=l):zt(o.keyOf(a),r)&&(s=l)),s>=0){const c=e[s+1];return c&&(c.rowType==="detail"||c.rowType==="detailAdaptive")&&U(t.insertAfterKey)?void 0:(U(t.insertAfterKey)&&(s+=1),!0)}}),s}_generateNewItem(e){var t;const n={key:e},s=(t=this._getInternalData(e))===null||t===void 0?void 0:t.insertInfo;return s!=null&&s[uo]&&(n[uo]=s[uo]),n}_getLoadedRowIndex(e,t,n){let s=this._getInsertRowIndex(e,t,n);const o=this._dataController;if(s<0){const r=this._getNewRowPosition(),a=o.pageIndex(),l=this._getInsertAfterOrBeforeKey(t);r!==Ud&&a===0&&!U(l)?s=0:r===Ud&&o.isLastPageLoaded()&&(s=e.length)}return s}processItems(e,t){const{changeType:n}=t;return this.update(n),this.getChanges().forEach(o=>{var r;if(!(o.type===cs))return;let{key:l}=o,d=(r=this._getInternalData(l))===null||r===void 0?void 0:r.insertInfo;(!U(l)||!U(d))&&(d=this._addInsertInfo(o),l=d.key);const c=this._getLoadedRowIndex(e,o),h=this._generateNewItem(l);c>=0&&e.splice(c,0,h)}),e}processDataItem(e,t,n){const s=t.visibleColumns,o=e.data[uo]?e.data.key:e.key,r=this.getChanges(),a=Ce.getIndexByKey(o,r);e.isEditing=!1,a>=0&&this._processDataItemCore(e,r[a],o,s,n)}_processDataItemCore(e,t,n,s,o){const{data:r,type:a}=t;switch(a){case cs:e.isNewRow=!0,e.key=n,e.data=r;break;case za:e.modified=!0,e.oldData=e.data,e.data=vo(e.data,r),e.modifiedValues=o(r,s,!0);break;case Ps:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){const t=new ae;return De(Pi(e.promise)).done(t.resolve).fail(qd(t)).fail(n=>this._fireDataErrorOccurred(n)),t}}_createInsertInfo(){const e={};return e[uo]=this._getInsertIndex(),e}_addInsertInfo(e,t){var n;let s;e.key=this.getChangeKeyValue(e);const{key:o}=e;if(s=(n=this._getInternalData(o))===null||n===void 0?void 0:n.insertInfo,!U(s)){const r=this._getInsertAfterOrBeforeKey(e);s=this._createInsertInfo(),U(r)||this._setInsertAfterOrBeforeKey(e,t)}return this._addInternalData({insertInfo:s,key:o}),{insertInfo:s,key:o}}getChangeKeyValue(e){if(U(e.key))return e.key;const t=this._dataController.key();let n;return e.data&&t&&!Array.isArray(t)&&(n=e.data[t]),U(n)||(n=sL()),n}_setInsertAfterOrBeforeKey(e,t){const n=this.getView("rowsView"),s=this._dataController,o=s.items(!0),r=this._getNewRowPosition();switch(r){case Gv:case Ud:break;case Zh:case Uv:if(o.length){const a=r===Zh?0:o.length-1;e[a===0?"insertBeforeKey":"insertAfterKey"]=o[a].key}break;default:{let l=r===qv?n==null?void 0:n.getBottomVisibleItemIndex():n==null?void 0:n.getTopVisibleItemIndex();const d=s.getVisibleRows()[l];d&&(!d.isEditing&&d.rowType==="detail"||d.rowType==="detailAdaptive")&&l++;const c=s.getKeyByRowIndex(l);U(c)&&(e.insertBeforeKey=c)}}}_getInsertIndex(){let e=0;return this.getChanges().forEach(t=>{var n;const s=(n=this._getInternalData(t.key))===null||n===void 0?void 0:n.insertInfo;U(s)&&t.type===cs&&s[uo]>e&&(e=s[uo])}),e+1}_getInsertAfterOrBeforeKey(e){return e.insertAfterKey??e.insertBeforeKey}_getPageIndexToInsertRow(){const e=this._getNewRowPosition(),t=this._dataController,n=t.pageIndex(),s=t.pageCount()-1;return e===Gv&&n!==0?0:e===Ud&&n!==s?s:-1}addRow(e){const t=this._dataController;return t.store()?this._addRow(e):(t.fireError("E1052",this.component.NAME),new ae().reject())}_addRow(e){const n=this._dataController.store(),s=n&&n.key(),o={data:{}},r=this._getVisibleEditRowIndex(),a=new ae;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(s||(o.data.__KEY__=String(new hi)),De(this._initNewRow(o,e)).done(()=>{this._allowRowAdding()?De(this._addRowCore(o.data,e,r)).done(a.resolve).fail(a.reject):a.reject("cancel")}).fail(a.reject),a.promise()):(De(this._navigateToNewRow(r)).done(a.resolve).fail(a.reject),a.promise())}_allowRowAdding(e){return!(this._getInsertIndex()>1)}_addRowCore(e,t,n){const s={data:e,type:cs},o=this._getVisibleEditRowIndex(),r=this._addInsertInfo(s,t),{key:a}=r;return this._setEditRowKey(a,!0),this._addChange(s),this._navigateToNewRow(n,s,o)}_navigateToNewRow(e,t,n){const s=new ae,o=this._dataController;if(n=n??-1,t=t??this.getChanges().filter(c=>c.type===cs)[0],!t)return s.reject("cancel").promise();const r=this._getPageIndexToInsertRow();let a=this._getLoadedRowIndex(o.items(),t,!0);const l=c=>{var h;De((h=this._focusController)===null||h===void 0?void 0:h.navigateToRow(c)).done(()=>{a=o.getRowIndexByKey(t.key),s.resolve()})},d=this._getInsertAfterOrBeforeKey(t);return r>=0?o.pageIndex(r).done(()=>{l(t.key)}).fail(s.reject):a<0&&U(d)?l(d):(o.updateItems({changeType:"update",rowIndices:[e,n,a]}),a=o.getRowIndexByKey(t.key),a<0?l(t.key):s.resolve()),s.done(()=>{var c;(c=this._rowsView)===null||c===void 0||c.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(a),this._afterInsertRow(t.key)})}),s.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var t;const n=this._dataController,s=n.getKeyByRowIndex(e),o=this.getFirstEditableCellInRow(e);(t=this._keyboardNavigationController)===null||t===void 0||t.focus(o),this.option("focusedRowKey",s),this._editCellInProgress=!0,this._delayedInputFocus(o,()=>{e=n.getRowIndexByKey(s),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(e,t){}_getVisibleEditColumnIndex(){const e=this.option(tr);return U(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,t){var n;const s=this._columnsController.getVisibleColumns();this._setEditColumnName((n=s[e])===null||n===void 0?void 0:n.name,t)}_setEditColumnName(e,t){t?this._silentOption(tr,e):this.option(tr,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){const e=this.option(tr);return this._getColumnByName(e)}_getColumnByName(e){const t=this._columnsController.getVisibleColumns();let n;return U(e)&&t.some(s=>{if(s.name===e)return n=s,!0}),n}_getVisibleEditRowIndex(e){const t=this._dataController,n=this.option(En),s=t.getRowIndexByKey(n);return s===-1?s:s+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){const t=e?this._getColumnByName(e):this._getEditColumn();return(t==null?void 0:t.visibleWidth)==="adaptiveHidden"?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){const t=this._dataController,s=t.items()[e],o={data:s&&s.data,cancel:!1},r=this._getVisibleEditRowIndex();if(s){if(e===r)return!0;if(s.key===void 0){this._dataController.fireError("E1043");return}s.isNewRow||(o.key=s.key),!this._isEditingStart(o)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=t.pageIndex(),this._addInternalData({key:s.key,oldData:s.oldData??s.data}),this._setEditRowKey(s.key))}}_editRowFromOptionChanged(e,t){const n=[t,e];this._beforeUpdateItems(n,e,t),this._editRowFromOptionChangedCore(n,e)}_editRowFromOptionChangedCore(e,t,n){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:n})}_focusEditorIfNeed(){}_showEditPopup(e,t){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){const e={text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)};return nn(un())&&(e.stylingMode="contained",e.type="default"),e}_getCancelButtonConfig(){const e={text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)};return nn(un())&&(e.stylingMode="outlined"),e}_removeInternalData(e){const t=this._getInternalData(e),n=this._internalState.indexOf(t);n>-1&&this._internalState.splice(n,1)}_updateInsertAfterOrBeforeKeys(e,t){const n=e[t];e.forEach(s=>{const o=this._getInsertAfterOrBeforeKey(s);zt(o,n.key)&&(s[U(s.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(n))})}_removeChange(e){if(e>=0){const t=[...this.getChanges()],{key:n}=t[e];this._removeInternalData(n),this._updateInsertAfterOrBeforeKeys(t,e),t.splice(e,1),this._silentOption(Bs,t),zt(this.option(En),n)&&this._resetEditIndices()}}executeOperation(e,t){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{e.state()!=="rejected"&&(t(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return De(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,t,n){!e||!e.showEditorAlways||t&&!t.showEditorAlways?(this._editCellInProgress=!0,this._needFocusEditor=!0,this._editorFactoryController.loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[n,this._getVisibleEditRowIndex()]})):e!==t&&(this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:[]}))}_delayedInputFocus(e,t,n){const s=()=>{if(t&&t(),e){const o=e.find(yg).first();Ce.focusAndSelectElement(this,o)}this._beforeFocusCallback=null};Re.real().ios||Re.real().android?s():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),n&&(this._beforeFocusCallback=t),this._inputFocusTimeoutID=setTimeout(s))}_focusEditingCell(e,t,n){const s=this._getVisibleEditColumnIndex();t=t||this._rowsView&&this._rowsView._getCellElement(this._getVisibleEditRowIndex(),s),t&&this._delayedInputFocus(t,e,n)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){const t=this.option("editing"),n=t==null?void 0:t.texts,s=t==null?void 0:t.confirmDelete,o=n==null?void 0:n.confirmDeleteMessage,r=this._dataController.items()[e],a=!this.isEditing()||r.isNewRow;if(r&&a)if(!s||!o)this._deleteRowCore(e);else{const l=n&&n.confirmDeleteTitle,d=U(l)&&l.length>0;C9(o,l,d).done(c=>{c&&this._deleteRowCore(e)})}}_deleteRowCore(e){const n=this._dataController.items()[e],s=n&&n.key,o=this._getVisibleEditRowIndex();this.refresh();const r=this.getChanges(),a=Ce.getIndexByKey(s,r);return a>=0?r[a].type===cs?this._removeChange(a):this._addChange({key:s,type:Ps}):this._addChange({key:s,oldData:n.data,type:Ps}),this._afterDeleteRow(e,o)}_afterDeleteRow(e,t){return this.saveEditData()}undeleteRow(e){const t=this._dataController,n=t.items()[e],s=this._getVisibleEditRowIndex(),o=n&&n.key,r=this.getChanges();if(n){const a=Ce.getIndexByKey(o,r);if(a>=0){const{data:l}=r[a];cn(l)?this._removeChange(a):this._addChange({key:o,type:za}),t.updateItems({changeType:"update",rowIndices:[s,e]})}}}_fireOnSaving(){const e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);const t=new ae;return De(Pi(e.promise)).done(()=>{t.resolve(e)}).fail(n=>{this._fireDataErrorOccurred(n),t.resolve({cancel:!0})}),t}_executeEditingAction(e,t,n){if(this.component._disposed)return null;const s=new ae;return this.executeAction(e,t),De(Pi(t.cancel)).done(o=>{o?setTimeout(()=>{s.resolve("cancel")}):n(t).done(s.resolve).fail(qd(s))}).fail(qd(s)),s}_processChanges(e,t,n,s){const o=this._dataController.store();ie(s,(r,a)=>{const l=this._getOldData(a.key),{data:d,type:c}=a,h=ve({},a);let u,p;if(!this._beforeSaveEditData(a,r)){switch(c){case Ps:p={data:l,key:a.key,cancel:!1},u=this._executeEditingAction("onRowRemoving",p,()=>o.remove(a.key).done(f=>{n.push({type:"remove",key:f})}));break;case cs:p={data:d,cancel:!1},u=this._executeEditingAction("onRowInserting",p,()=>o.insert(p.data).done((f,g)=>{U(g)&&(h.key=g),f&&We(f)&&f!==p.data&&(h.data=f),n.push({type:"insert",data:f,index:0})}));break;case za:p={newData:d,oldData:l,key:a.key,cancel:!1},u=this._executeEditingAction("onRowUpdating",p,()=>o.update(a.key,p.newData).done((f,g)=>{f&&We(f)&&f!==p.newData&&(h.data=f),n.push({type:"update",key:g,data:f})}))}if(s[r]=h,u){const f=new ae;u.always(g=>{t.push({key:a.key,result:g})}).always(f.resolve),e.push(f.promise())}}})}_processRemoveIfError(e,t){const n=e[t];return(n==null?void 0:n.type)===Ps&&t>=0&&e.splice(t,1),!0}_processRemove(e,t,n){const s=e[t];if(!n||!s||s.type===Ps)return this._processRemoveCore(e,t,!n||!s)}_processRemoveCore(e,t,n){return t>=0&&e.splice(t,1),!0}_processSaveEditDataResult(e){let t=!1;const n=[...this.getChanges()],s=n.length;for(let o=0;o<e.length;o++){const r=e[o].result,a=r==="cancel",l=Ce.getIndexByKey(e[o].key,n),d=n[l];if(r&&r instanceof Error){if(d&&this._addInternalData({key:d.key,error:r}),this._fireDataErrorOccurred(r),this._processRemoveIfError(n,l))break}else this._processRemove(n,l,a)&&(t=!a)}return n.length<s&&this._silentOption(Bs,n),t}_fireSaveEditDataEvents(e){ie(e,(t,n)=>{let{data:s,key:o,type:r}=n;const a=this._addInternalData({key:o}),l={key:o,data:s};switch(a.error&&(l.error=a.error),r){case Ps:this.executeAction("onRowRemoved",Y({},l,{data:a.oldData}));break;case cs:this.executeAction("onRowInserted",l);break;case za:this.executeAction("onRowUpdated",l)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){const e=new ae;return this.waitForDeferredOperations().done(()=>{if(this.isSaving()){this._resolveAfterSave(e);return}De(this._beforeSaveEditData()).done(t=>{if(t){this._resolveAfterSave(e,{cancel:t});return}this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject)}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){let{cancel:t,error:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};De(this._afterSaveEditData(t)).done(()=>{e.resolve(n)}).fail(e.reject)}_saveEditDataInner(){const e=new ae,t=[],n=[],s=[],o=this._dataController.dataSource();return De(this._fireOnSaving()).done(r=>{let{cancel:a,changes:l}=r;if(a)return e.resolve().promise();if(this._processChanges(n,t,s,l),n.length)return this._refocusEditCell=!0,o==null||o.beginLoading(),De(...n).done(()=>{this._processSaveEditDataResult(t)?this._endSaving(s,l,e):(o==null||o.endLoading(),e.resolve())}).fail(d=>{o==null||o.endLoading(),e.resolve(d)}),e.always(()=>{this._refocusEditCell=!0}).promise();this._cancelSaving(e)}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,t,n){const s=this._dataController.dataSource();this._beforeEndSaving(t),s==null||s.endLoading(),this._refreshDataAfterSave(e,t,n)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,t,n){const s=this._dataController,o=this.option("editing.refreshMode"),r=o!=="reshape"&&o!=="repaint";r||s.push(e),De(s.refresh({selection:r,reload:r,load:o==="reshape",changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(t)}).done(()=>{this._resolveAfterSave(n)}).fail(a=>{this._resolveAfterSave(n,{error:a})})}isSaving(){return this._saving}_updateEditColumn(){const e=this._isEditColumnVisible(),t=this.option("editing.useIcons"),n=P9+(t?` ${Yv}`:"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:n,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:n})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){const e=this.hasChanges();return!(U(this.option("editing.editRowKey"))||e)}_updateEditButtons(){const e=this._isEditButtonDisabled();this._headerPanelView&&(this._headerPanelView.setToolbarItemDisabled("saveButton",e),this._headerPanelView.setToolbarItemDisabled("revertButton",e))}_applyModified(e,t){e&&e.addClass(Xv)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){const e=this.getChanges(),t={cancel:!1,changes:e};this.executeAction("onEditCanceling",t),t.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){const e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){const t=this._dataController;t&&this._pageIndex!==t.pageIndex()&&(e==="refresh"&&this.refresh({isPageChanged:!0}),this._pageIndex=t.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,t){return t?[]:[e.rowIndex]}addDeferred(e){this._deferreds.includes(e)||(this._deferreds.push(e),e.always(()=>{const t=this._deferreds.indexOf(e);t>=0&&this._deferreds.splice(t,1)}))}_prepareChange(e,t,n){var s;const o={},r=(s=e.row)===null||s===void 0?void 0:s.data,a=e.key,l=new ae;return a!==void 0&&(e.value=t,Pi(e.column.setCellValue(o,t,Y(!0,{},r),n)).done(()=>{l.resolve({data:o,key:a,oldData:r,type:za})}).fail(qd(l)).fail(c=>this._fireDataErrorOccurred(c)),U(n)&&e.column.displayValueMap&&(e.column.displayValueMap[t]=n),this._updateRowValues(e),this.addDeferred(l)),l}_updateRowValues(e){if(e.values){const t=this._dataController,n=t.getRowIndexByKey(e.key),s=t.getVisibleRows()[n];s&&(e.row.values=s.values,e.values=s.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,t,n,s){const o=e.key,r=new ae;return o===void 0&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,t,n).done(a=>{De(this._applyChange(e,a,s)).always(()=>{r.resolve()})}):r.resolve(),r.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){const t=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());const n=e&&e.setCellValue!==e.defaultSetCellValue,s=t.some(o=>o.calculateCellValue!==o.defaultCalculateCellValue);return n||s}_applyChange(e,t,n){const s=ve({},e,{forceUpdateRow:n});return this._addChange(t,s),this._updateEditButtons(),this._applyChangeCore(e,s.forceUpdateRow)}_applyChangeCore(e,t){const n=e.column.setCellValue!==e.column.defaultSetCellValue,{row:s}=e;s&&(t||n?this._updateEditRow(s,t,n):s.update&&s.update())}_updateEditRowCore(e,t,n){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,t)})}_updateEditRow(e,t,n){t?this._updateRowImmediately(e,t,n):this._updateRowWithDelay(e,n)}_updateRowImmediately(e,t,n){this._updateEditRowCore(e,!t,n),this._validateEditFormAfterUpdate(e,n),t||this._focusEditingCell()}_updateRowWithDelay(e,t){const n=new ae;this.addDeferred(n),setTimeout(()=>{var s;const o=((s=this._editForm)===null||s===void 0?void 0:s.element())||this.component.$element().get(0),r=R(_e.getActiveElement(o)),a=this._rowsView.getCellIndex(r,e.rowIndex);let l=r.get(0);const d=Ce.getSelectionRange(l);if(this._updateEditRowCore(e,!1,t),this._validateEditFormAfterUpdate(e,t),a>=0){const c=this._rowsView._getCellElement(e.rowIndex,a);this._delayedInputFocus(c,()=>{setTimeout(()=>{var h;l=_e.getActiveElement((h=this.component.$element())===null||h===void 0?void 0:h.get(0)),d.selectionStart>=0&&Ce.setSelectionRange(l,d)})})}n.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,t){var n;const s=t==null?void 0:t.row,o=[...this.getChanges()];let r=Ce.getIndexByKey(e.key,o);r<0&&(r=o.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,o.push(e));const a=ve({},o[r]);return a&&(e.data&&(a.data=vo(a.data,e.data)),(!a.type||!e.data)&&e.type&&(a.type=e.type),s&&(s.oldData=this._getOldData(s.key),s.data=vo(s.data,e.data))),o[r]=a,this._silentOption(Bs,o),t&&a!==((n=this.getChanges())===null||n===void 0?void 0:n[r])&&(t.forceUpdateRow=!0),a}_getFormEditItemTemplate(e,t){return t.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){const{column:t}=e,n=e.row&&e.row.rowIndex;let s;const o=this.isRowBasedEditMode(),r=this.isEditRow(n),a=this.isEditCell(n,e.columnIndex);let l;return(t.showEditorAlways||t.setCellValue&&(r&&t.allowEditing||a))&&(e.rowType==="data"||e.rowType==="detailAdaptive")&&!t.command?(((this.allowUpdating(e)||r)&&t.allowEditing||a)&&(r||!o)&&(t.showEditorAlways&&!o&&(l={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:t},this._isEditingStart(l)),(!l||!l.cancel)&&(e.setValue=(c,h)=>{this.updateFieldValue(e,c,h)})),s=t.editCellTemplate||this._getDefaultEditorTemplate()):t.command==="detail"&&e.rowType==="detail"&&r&&(s=this===null||this===void 0?void 0:this.getEditFormTemplate(e)),s}_createButton(e,t,n,s){let o=H9[t.name];const r=this.option("editing.useIcons"),a=this.option("useLegacyColumnButtonTemplate");let l=R("<a>").attr("href","#").addClass(k9).addClass(t.cssClass);if(t.template&&a)this._rowsView.renderTemplate(e,t.template,n,!0);else{if(t.template)l=R("<span>").addClass(t.cssClass);else if(r&&o||t.icon){o=t.icon||o;const d=ed(o);d==="image"||d==="svg"?l=Ys(o).addClass(t.cssClass):l.addClass(`dx-icon${d==="dxIcon"?"-":" "}${o}`).attr("title",t.text),l.addClass(O9),e.addClass(Yv);const c=this.getButtonLocalizationNames()[t.name];c&&l.attr("aria-label",re.format(c))}else l.text(t.text);U(t.hint)&&l.attr("title",t.hint),this._isButtonDisabled(t,n)?l.addClass("dx-state-disabled"):(!t.template||t.onClick)&&q.on(l,be("click",V9),this.createAction(d=>{var c;(c=t.onClick)===null||c===void 0||c.call(t,Y({},d,{row:n.row,column:n.column})),d.event.preventDefault(),d.event.stopPropagation()})),e.append(l),t.template&&(n.renderAsync=!1,this._rowsView.renderTemplate(l,t.template,n,!0,s))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,t,n,s){const o=this.option("editing.texts")??{},r={revert:o.cancelAllChanges,save:o.saveAllChanges,addRow:o.addRow},a={revert:"cancel",save:"save",addRow:"addrow"}[t],l=r[t],d=(a==="save"||a==="cancel")&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:c=>{R(c.element).addClass(e._getToolbarButtonClass(`${M9} ${this.addWidgetPrefix(a)}-button`))},icon:`edit-button-${a}`,disabled:d,onClick:()=>{setTimeout(()=>{this[n]()})},text:l,hint:l},showText:"inMenu",name:`${t}Button`,location:"after",locateInMenu:"auto",sortIndex:s}}prepareEditButtons(e){const t=this.option("editing")??{},n=[];return t.allowAdding&&n.push(this.prepareButtonItem(e,"addRow","addRow",20)),n}highlightDataCell(e,t){this.shouldHighlightCell(t)&&e.addClass(Xv)}_afterInsertRow(e){}_beforeSaveEditData(e){if(e&&!U(e.key)&&U(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,t){let n=this.option(`editing.${e}`);return Ee(n)&&(n=n({component:this.component,row:t.row})),n}allowUpdating(e,t){const n=this.option("editing.startEditAction")??L9;return(arguments.length>1?n===t||t==="down":!0)&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var t,n;const{columnIndex:s}=e;let o=e==null||(t=e.row)===null||t===void 0||(t=t.modifiedValues)===null||t===void 0?void 0:t[s];return e!=null&&(n=e.row)!==null&&n!==void 0&&n.isNewRow&&(o=e.value),o!==void 0}isNewRowInEditMode(){const e=this._getVisibleEditRowIndex(),t=this._dataController.items();return e>=0?t[e].isNewRow:!1}_isRowDeleteAllowed(){}shouldHighlightCell(e){return this.isCellModified(e)&&e.column.setCellValue&&(this.getEditMode()!==ll||!e.row.isEditing)}}const ME=i=>class extends i{reload(e,t){return!t&&this._editingController.refresh(),super.reload.apply(this,arguments)}repaintRows(){if(!this._editingController.isSaving())return super.repaintRows.apply(this,arguments)}_updateEditRow(e){const t=this.option(En),n=Ce.getIndexByKey(t,e),s=e[n];if(s){var o;s.isEditing=!0,(o=this._updateEditItem)===null||o===void 0||o.call(this,s)}}_updateItemsCore(e){super._updateItemsCore(e),this._updateEditRow(this.items(!0))}_applyChangeUpdate(e){this._updateEditRow(e.items),super._applyChangeUpdate(e)}_applyChangesOnly(e){this._updateEditRow(e.items),super._applyChangesOnly(e)}_processItems(e,t){return e=this._editingController.processItems(e,t),super._processItems(e,t)}_processDataItem(e,t){return this._editingController.processDataItem(e,t,this.generateDataValues),super._processDataItem(e,t)}_processItem(e,t){return e=super._processItem(e,t),e.isNewRow&&(t.dataIndex--,delete e.dataIndex),e}_getChangedColumnIndices(e,t,n,s){if(!(e.isNewRow!==t.isNewRow||e.removed!==t.removed))return super._getChangedColumnIndices.apply(this,arguments)}_isCellChanged(e,t,n,s,o){const r=e.cells&&e.cells[s],a=this._editingController&&this._editingController.isEditCell(n,s);return o&&a?!1:r&&r.column&&!r.column.showEditorAlways&&r.isEditing!==a?!0:super._isCellChanged.apply(this,arguments)}needToRefreshOnDataSourceChange(e){return!(Array.isArray(e.value)&&e.value===e.previousValue&&this._editingController.isSaving())}_handleDataSourceChange(e){const t=super._handleDataSourceChange(e),n=this.option("editing.changes"),s=e.value;if(Array.isArray(s)&&n.length){const o=s.map(d=>this.keyOf(d)),r=n.filter(d=>d.type==="insert"||o.some(c=>zt(d.key,c)));r.length!==n.length&&this.option("editing.changes",r);const a=this.option("editing.editRowKey");!r.some(d=>d.type==="insert"&&zt(a,d.key))&&o.every(d=>!zt(a,d))&&this.option("editing.editRowKey",null)}return t}},dL=i=>class extends i{getCellIndex(e,t){if(!e.is("td")&&t>=0){const n=this.getCellElements(t);let s=-1;return ie(n,(o,r)=>{R(r).find(e).length&&(s=o)}),s}return super.getCellIndex.apply(this,arguments)}publicMethods(){return super.publicMethods().concat(["cellValue"])}_getCellTemplate(e){return this._editingController.getColumnTemplate(e)||super._getCellTemplate(e)}_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const n=!!e.removed,s=!!e.isNewRow,o=!!e.modified;s&&t.addClass(B9),o&&t.addClass(F9),(s||n)&&t.removeClass(R9)}return t}_getColumnIndexByElement(e){let t=e.closest("table");const n=this.getTableElements();for(;t.length&&!n.filter(t).length;)e=t.closest("td"),t=e.closest("table");return this._getColumnIndexByElementCore(e)}_getColumnIndexByElementCore(e){const t=e.closest(`.${po}> td:not(.dx-master-detail-cell)`);return this.getCellIndex(t)}_editCellByClick(e,t){const n=this._editingController,s=R(e.event.target),o=this._getColumnIndexByElement(s),r=this._dataController.items()[e.rowIndex],a=n.allowUpdating({row:r},t)||r&&r.isNewRow,l=this._columnsController.getVisibleColumns()[o],d=n.isEditCell(e.rowIndex,o),c=a&&l&&(l.allowEditing||d),h=this.option("editing.startEditAction")||"click",u=l&&l.showEditorAlways;if(d)return!0;if(t==="down")return(Re.real().ios||Re.real().android)&&Ca(),u&&c&&n.editCell(e.rowIndex,o);if(t==="click"&&h==="dblClick"&&this._pointerDownTarget===s.get(0)){const f=r==null?void 0:r.isNewRow;n.closeEditCell(!1,f)}if(c&&t===h)return n.editCell(e.rowIndex,o)||n.isEditRow(e.rowIndex)}_rowPointerDown(e){this._pointerDownTarget=e.event.target,this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(e,"down")})}_rowClickTreeListHack(e){super._rowClick.apply(this,arguments)}_rowClick(e){const t=R(e.rowElement).hasClass(this.addWidgetPrefix(bg));e.event[TE]=this.component,!this._editCellByClick(e,"click")&&!t&&super._rowClick.apply(this,arguments)}_rowDblClickTreeListHack(e){super._rowDblClick.apply(this,arguments)}_rowDblClick(e){this._editCellByClick(e,"dblClick")||super._rowDblClick.apply(this,arguments)}_cellPrepared(e,t){var n;const s=this._editingController,o=!!t.column.command,r=t.setValue,a=s.isEditRow(t.rowIndex),l=kE(a,t);if(Jv(a,t)){const{alignment:c}=t.column;e.toggleClass(this.addWidgetPrefix(A9),!r).toggleClass(N9,!r),c&&e.find(vg).first().css("textAlign",c)}l&&this._editCellPrepared(e);const d=!!((n=t.column)!==null&&n!==void 0&&n.cellTemplate);t.column&&!o&&(!d||s.shouldHighlightCell(t))&&s.highlightDataCell(e,t),super._cellPrepared.apply(this,arguments)}_getCellOptions(e){const t=super._getCellOptions(e),{columnIndex:n,row:s}=e;return t.isEditing=this._editingController.isEditCell(t.rowIndex,t.columnIndex),t.removed=s.removed,s.modified&&(t.modified=s.modifiedValues[n]!==void 0),t}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),t.removed&&this.setAria("roledescription",re.format("dxDataGrid-ariaDeletedCell"),e),t.modified&&this.setAria("roledescription",re.format("dxDataGrid-ariaModifiedCell"),e),t.column.allowEditing&&!t.removed&&!t.modified&&t.rowType==="data"&&t.column.calculateCellValue===t.column.defaultCalculateCellValue&&this._editingController.isCellBasedEditMode()&&this.setAria("roledescription",re.format("dxDataGrid-ariaEditableCell"),e)}_createCell(e){const t=super._createCell(e),n=this._editingController.isEditRow(e.rowIndex);return Jv(n,e)&&t.addClass(zu),t}cellValue(e,t,n,s){const o=this.getCellOptions(e,t);if(o){if(n===void 0)return o.value;this._editingController.updateFieldValue(o,n,s,!0)}}dispose(){super.dispose.apply(this,arguments),clearTimeout(this._pointerDownTimeout)}_renderCore(){return super._renderCore.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}_editCellPrepared(){}_formItemPrepared(){}},cL=i=>class extends i{optionChanged(e){const{fullName:t}=e;switch(e.name){case"editing":{t&&![yc,Bs,tr,En].some(o=>o===t)&&this._invalidate(),super.optionChanged(e);break}case"useLegacyColumnButtonTemplate":e.handled=!0;break;default:super.optionChanged(e)}}_getToolbarItems(){const e=super._getToolbarItems();return this._editingController.prepareEditButtons(this).concat(e)}isVisible(){const e=this._editingController.option("editing");return super.isVisible()||(e==null?void 0:e.allowAdding)}},Jh={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:DE,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:re.format("dxDataGrid-editingEditRow"),saveAllChanges:re.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:re.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:re.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:re.format("dxDataGrid-editingCancelRowChanges"),addRow:re.format("dxDataGrid-editingAddRow"),deleteRow:re.format("dxDataGrid-editingDeleteRow"),undeleteRow:re.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:re.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:lL},extenders:{controllers:{data:ME},views:{rowsView:dL,headerPanel:cL}}},uL=i=>class extends ME(i){_changeRowExpandCore(e){const t=this._editingController;return Array.isArray(e)&&t&&t.refresh(),super._changeRowExpandCore.apply(this,arguments)}};He.registerModule("editing",ve({},Jh,{extenders:ve({},Jh.extenders,{controllers:ve({},Jh.extenders.controllers,{data:uL})})}));const hL=i=>class extends i{isRowEditMode(){return this.getEditMode()===ll}_afterCancelEditData(e){const t=this._dataController;this.isRowBasedEditMode()&&e>=0?t.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,t){const n=this.isRowBasedEditMode(),o=!this.isPopupEditMode()&&t.row&&zt(t.row.key,this.option(En));if(n)switch(e.name){case"edit":return!o&&this.allowUpdating(t);case"delete":return super._isDefaultButtonVisible(e,t)&&!o;case"save":case"cancel":return o;default:return super._isDefaultButtonVisible(e,t)}return super._isDefaultButtonVisible(e,t)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){const{allowCancelEditing:t}=e??{};if(this.isRowBasedEditMode()){const n=this.getChanges().filter(s=>s.type==="update").length>0;this.init(),t&&n&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){const e=super._isEditColumnVisible(),t=this.option("editing"),n=this.isRowEditMode(),s=t.allowUpdating||t.allowAdding;return e||n&&s}_focusEditorIfNeed(){const e=this.getEditMode();if(this._needFocusEditor){if(D9.includes(e)){const t=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(t,()=>{t&&this.component.focus(t)})}this._needFocusEditor=!1}}},pL=i=>class extends i{_getChangedColumnIndices(e,t,n,s){if(!(this._editingController.isRowBasedEditMode()&&e.isEditing!==t.isEditing))return super._getChangedColumnIndices.apply(this,arguments)}},fL=i=>class extends i{_createRow(e){const t=super._createRow.apply(this,arguments);return e&&this._editingController.isEditRow(e.rowIndex)&&(t.addClass(Zv),t.removeClass(Kv),e.rowType==="detail"&&t.addClass(this.addWidgetPrefix(bg))),t}_update(e){super._update(e),e.changeType==="updateSelection"&&this.getTableElements().children("tbody").children(`.${Zv}`).removeClass(Kv)}},mL={extenders:{controllers:{editing:hL,data:pL},views:{rowsView:fL}}};He.registerModule("editingRowBased",mL);const Qv="dx-responsivebox-screen-",PE=Dr.inherit({_getDefaultOptions(){return Y(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init(){this.option("screenByWidth")||this._options.silent("screenByWidth",Qf),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:()=>"dx-box-item",_itemDataKey:()=>"dxBoxItemData",_initMarkup(){this.callBase(),this.$element().addClass("dx-responsivebox")},_renderItems(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged(i){const e=this._findItemElementByItem(i);e.length&&(this._refreshItem(e,i),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize(){const i=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(Qv+i),this.option("currentScreenFactor",i)},_removeScreenSizeClass(){const i=this.option("currentScreenFactor");i&&this.$element().removeClass(Qv+i)},_prepareGrid(){const i=this._grid=[];this._prepareRowsAndCols(),ie(this._rows,()=>{const e=[];i.push(e),ie(this._cols,()=>{e.push(this._createEmptyCell())})})},getSingleColumnRows(){const i=this.option("rows"),e=this._screenItems.length;if(i.length){const t=this._filterByScreen(i),n=[];for(let s=0;s<e;s++){const o=this._defaultSizeConfig();s<t.length&&U(t[s].shrink)&&(o.shrink=t[s].shrink),n.push(o)}return n}return this._defaultSizeConfig(e)},_prepareRowsAndCols(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems(){this._screenItems.sort((i,e)=>i.location.row-e.location.row||i.location.col-e.location.col),ie(this._screenItems,(i,e)=>{Y(e.location,{row:i,col:0,rowspan:1,colspan:1})})},_sizesByScreen(i){return Ii(this._filterByScreen(i),e=>Y(this._defaultSizeConfig(),e))},_createDefaultSizeConfig:()=>({ratio:1,baseSize:0,minSize:0,maxSize:0}),_defaultSizeConfig(i){const e=this._createDefaultSizeConfig();if(!arguments.length)return e;const t=[];for(let n=0;n<i;n++)t.push(e);return t},_filterByScreen(i){const e=this._screenRegExp();return ln(i,t=>!t.screen||e.test(t.screen))},_screenRegExp(){const i=this._getCurrentScreen();return new RegExp(`(^|\\s)${i}($|\\s)`,"i")},_getCurrentScreen(){const i=this._screenWidth();return this.option("screenByWidth")(i)},_screenWidth:()=>qe()?Ge(Je()):1920,_createEmptyCell:()=>({item:{},location:{colspan:1,rowspan:1}}),_spreadItems(){ie(this._screenItems,(i,e)=>{const t=e.location||{},n=t.col,s=t.row,o=this._grid[s],r=o&&o[n];this._occupyCells(r,e)})},_itemsByScreen(){return this.option("items").reduce((i,e)=>{let t=e.location||{};return t=ht(t)?[t]:t,this._filterByScreen(t).forEach(n=>{i.push({item:e,location:Y({rowspan:1,colspan:1},n)})}),i},[])},_occupyCells(i,e){!i||this._isItemCellOccupied(i,e)||(Y(i,e),this._markSpanningCell(i))},_isItemCellOccupied(i,e){if(!cn(i.item))return!0;let t=!1;return this._loopOverSpanning(e.location,n=>{t=t||!cn(n.item)}),t},_loopOverSpanning(i,e){const t=i.row+i.rowspan-1,n=i.col+i.colspan-1,s=Math.min(t,this._rows.length-1),o=Math.min(n,this._cols.length-1);i.rowspan-=t-s,i.colspan-=n-o;for(let r=i.row;r<=s;r++)for(let a=i.col;a<=o;a++)(r!==i.row||a!==i.col)&&e(this._grid[r][a])},_markSpanningCell(i){this._loopOverSpanning(i.location,e=>{Y(e,{item:i.item,spanningCell:i})})},_linkNodeToItem(){ie(this._itemElements(),(i,e)=>{const t=R(e),n=t.data("dxBoxItemData");n.box||(n.node=t.children())})},_layoutItems(){const i=this._grid.length,e=i&&this._grid[0].length;if(!i&&!e)return;const t=this._layoutBlock({direction:"col",row:{start:0,end:i-1},col:{start:0,end:e-1}}),n=this._prepareBoxConfig(t.box||{direction:"row",items:[Y(t,{ratio:1})]});Y(n,this._rootBoxConfig(n.items)),this._$root=R("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,ko,n)},_rootBoxConfig(i){return{width:"100%",height:"100%",items:ie(i,(t,n)=>{this._needApplyAutoBaseSize(n)&&Y(n,{baseSize:"auto"})}),itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:i=>!i.baseSize&&(!i.minSize||i.minSize==="auto")&&(!i.maxSize||i.maxSize==="auto"),_prepareBoxConfig(i){return Y(i||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock(i){return this._isSingleItem(i)?this._itemByCell(i.row.start,i.col.start):this._layoutDirection(i)},_isSingleItem(i){const e=this._grid[i.row.start][i.col.start].location,t=i.row.end-i.row.start===e.rowspan-1,n=i.col.end-i.col.start===e.colspan-1;return t&&n},_itemByCell(i,e){const t=this._grid[i][e];return t.spanningCell?null:t.item},_layoutDirection(i){const e=[],{direction:t}=i,n=this._crossDirection(t);let s;for(;s=this._nextBlock(i);){if(this._isBlockIndivisible(i.prevBlockOptions,s))throw mt.Error("E1025");const o=this._layoutBlock({direction:n,row:s.row,col:s.col,prevBlockOptions:i});o&&(Y(o,this._blockSize(s,n)),e.push(o)),i[n].start=s[n].end+1}return{box:this._prepareBoxConfig({direction:t,items:e})}},_isBlockIndivisible:(i,e)=>i&&i.col.start===e.col.start&&i.col.end===e.col.end&&i.row.start===e.row.start&&i.row.end===e.row.end,_crossDirection:i=>i==="col"?"row":"col",_nextBlock(i){const{direction:e}=i,t=this._crossDirection(e),n=i[e].start,s=i[e].end,o=i[t].start;if(o>i[t].end)return null;let r=1;for(let l=o;l<o+r;l++){let d=1;for(let u=n;u<=s;u++){const p=this._cellByDirection(e,u,l);d=Math.max(d,p.location[`${t}span`])}const c=l+d,h=o+r;c>h&&(r+=c-h)}const a={};return a[e]={start:n,end:s},a[t]={start:o,end:o+r-1},a},_cellByDirection(i,e,t){return i==="col"?this._grid[t][e]:this._grid[e][t]},_blockSize(i,e){const t=e==="row"?"auto":0,n=e==="row"?this._rows:this._cols,s=Y(this._createDefaultSizeConfig(),{ratio:0});for(let o=i[e].start;o<=i[e].end;o++){const r=n[o];s.ratio+=r.ratio,s.baseSize+=r.baseSize,s.minSize+=r.minSize,s.maxSize+=r.maxSize,U(r.shrink)&&(s.shrink=r.shrink)}return s.minSize=s.minSize?s.minSize:t,s.maxSize=s.maxSize?s.maxSize:"auto",this._isSingleColumnScreen()&&(s.baseSize="auto"),s},_update(i){const e=this._$root;this._renderItems(),e&&(i?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot(i){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(i)},_dispose(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots(){this._assistantRoots&&ie(this._assistantRoots,(i,e)=>{R(e).remove()})},_clearItemNodeTemplates(){ie(this.option("items"),function(){delete this.node})},_attachClickEvent:ue,_optionChanged(i){switch(i.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(i),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(i);break;case"currentScreenFactor":break;default:this.callBase(i)}},_dimensionChanged(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint(){this._update()}});wt("dxResponsiveBox",PE);function gL(i){let{item:e,$parent:t,rootElementCssClassList:n,validationGroup:s,createComponentCallback:o}=i;const r=R("<div>").appendTo(t).addClass(n.join(" ")).addClass("dx-field-button-item").css("textAlign",_L(e.horizontalAlignment));t.css("justifyContent",bL(e.verticalAlignment));const a=R("<div>").appendTo(r);return{$rootElement:r,buttonInstance:o(a,"dxButton",Y({validationGroup:s},e.buttonOptions))}}function _L(i){return U(i)?i:"right"}function bL(i){switch(i){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}function ey(i){let{$parent:e,rootElementCssClassList:t}=i;return R("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(t.join(" ")).appendTo(e)}const vL=Lt.inherit({ctor(i,e){this.editor=i,this.validator=e,this.validationRequestsCallbacks=[];const t=n=>{this.validationRequestsCallbacks.forEach(s=>s(n))};i.validationRequest.add(t),i.on("disposing",()=>{i.validationRequest.remove(t)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(i){this.editor.option({validationErrors:i.brokenRules,validationStatus:i.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}}),Wu=Ss.inherit({_initOptions(i){this.callBase.apply(this,arguments),this.option(Ft.initValidationOptions(i))},_getDefaultOptions(){return Y(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=Tt(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){const i=this._findGroup();this._groupWasInit||this.on("disposing",e=>{Ft.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==i)&&(Ft.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=i,Ft.registerValidatorInGroup(i,this))},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{validationGroup:!0})},_getEditor(){const i=this.$element()[0];return di(i,"dx-validation-target")},_initAdapter(){const i=this._getEditor();let e=this.option("adapter");if(!e){if(i){e=new vL(i,this),e.validationRequestsCallbacks.push(n=>{this._validationInfo.skipValidation||this.validate(n)}),this.option("adapter",e);return}throw mt.Error("E0120")}const t=e.validationRequestsCallbacks;t&&t.push(n=>{this.validate(n)})},_toggleRTLDirection(i){var e;const t=((e=this.option("adapter"))===null||e===void 0||(e=e.editor)===null||e===void 0?void 0:e.option("rtlEnabled"))??i;this.callBase(t)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){const i=this._getEditor();if(i){const t=(this.option("validationRules")||[]).some(n=>{let{type:s}=n;return s==="required"})||null;i.isInitialized()&&i.setAria("required",t),i.option("_onMarkupRendered",()=>{i.setAria("required",t)})}},_visibilityChanged(i){i&&this._initGroupRegistration()},_optionChanged(i){switch(i.name){case"validationGroup":this._initGroupRegistration();return;case"validationRules":this._resetValidationRules(),this._toggleAccessibilityAttributes(),this.option("isValid")!==void 0&&this.validate();return;case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(Ft.synchronizeValidationOptions(i,this.option()));break;default:this.callBase(i)}},_getValidationRules(){return this._validationRules||(this._validationRules=Ii(this.option("validationRules"),(i,e)=>Y({},i,{validator:this,index:e}))),this._validationRules},_findGroup(){const i=this.$element();return this.option("validationGroup")||Ft.findGroup(i,this._modelByElement(i))},_resetValidationRules(){delete this._validationRules},validate(i){const e=this.option("adapter"),t=this.option("name"),n=e.bypass&&e.bypass(),s=i&&i.value!==void 0?i.value:e.getValue(),o=e.getCurrentValidationError&&e.getCurrentValidationError(),r=this._getValidationRules(),a=this._validationInfo&&this._validationInfo.result;if(a&&a.status==="pending"&&a.value===s)return Y({},a);let l;return n?l={isValid:!0,status:"valid"}:o&&o.editorSpecific?(o.validator=this,l={isValid:!1,status:"invalid",brokenRule:o,brokenRules:[o]}):l=Ft.validate(s,r,t),l.id=new hi().toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(d=>{d.id===this._validationInfo.result.id&&this._applyValidationResult(d,e)}),Y({},this._validationInfo.result)},reset(){const i=this.option("adapter"),e={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null};this._validationInfo.skipValidation=!0,i.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(e,i)},_updateValidationResult(i){if(!this._validationInfo.result||this._validationInfo.result.id!==i.id){const e=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=Y({},i,{complete:e})}else for(const e in i)e!=="id"&&e!=="complete"&&(this._validationInfo.result[e]=i[e])},_applyValidationResult(i,e){const t=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(i.validator=this,this._updateValidationResult(i),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status==="pending"){this._validationInfo.deferred||(this._validationInfo.deferred=ae(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()),this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);return}this._validationInfo.result.status!=="pending"&&(t(i),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(i),this._validationInfo.deferred=null))},focus(){const i=this.option("adapter");i&&i.focus&&i.focus()},_useTemplates:()=>!1});wt("dxValidator",Wu);const yL="dx-form",Qh="dx-form-group",CL="dx-form-group-caption",xL="dx-form-group-custom-caption",ty="dx-col-",BE="dx-field-item",iy="dx-layout-manager-one-col",FE="dx-field-item-label-content",wL="dx-layout-manager",VE="dx-field-item-label",If="dx-field-item-content",SL="dx-single-column-item-content",NE="dx-root-simple-item",EL="dx-form-group-content",IL="dx-field-item-has-group",TL="dx-field-item-has-tabs",DL="dx-form-group-with-caption",ny="dx-field-item-tab",sy="dx-group-colcount-",oy="group-col-count",AL="dx-form-validation-summary",kL="dx-form-styling-mode-underlined",Tf="simple",OL=["dxTagBox","dxRangeSlider","dxDateRangeBox"],RL=["dxRangeSlider","dxSlider"],ML=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function PL(i){let{$parent:e,rootElementCssClassList:t,formOrLayoutManager:n,createComponentCallback:s,item:o,template:r,labelTemplate:a,name:l,formLabelLocation:d,requiredMessageTemplate:c,validationGroup:h,editorValue:u,canAssignUndefinedValueToEditor:p,editorValidationBoundary:f,editorStylingMode:g,showColonAfterLabel:m,managerLabelLocation:b,itemId:_,managerMarkOptions:w,labelMode:E,onLabelTemplateRendered:D}=i;const B=U(o.isRequired)?o.isRequired:!!VL(o.validationRules),$=o.itemType===Tf,F=o.helpText?`dx-${new hi}`:null,N=NL({item:o,id:_,isRequired:B,managerMarkOptions:w,showColonAfterLabel:m,labelLocation:b,formLabelMode:E,labelTemplate:a,onLabelTemplateRendered:D}),L=N.visible&&(N.text||N.labelTemplate&&$),{location:j,labelID:H}=N,I=j!=="top"&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(o.editorType),k=FL({editorType:o.editorType,editorValue:u,defaultEditorName:o.dataField,canAssignUndefinedValueToEditor:p,externalEditorOptions:o.editorOptions,editorInputId:_,editorValidationBoundary:f,editorStylingMode:g,formLabelMode:E,labelText:N.textWithoutColon,labelMark:N.markOptions.showRequiredMark?String.fromCharCode(160)+N.markOptions.requiredMark:""}),v=N.markOptions.showOptionalMark&&!N.visible&&k.labelMode!=="hidden"&&!U(o.helpText)?N.markOptions.optionalMark:o.helpText;return{$parent:e,rootElementCssClassList:t,formOrLayoutManager:n,createComponentCallback:s,labelOptions:N,labelNeedBaselineAlign:I,labelLocation:j,needRenderLabel:L,item:o,isSimpleItem:$,isRequired:B,template:r,helpID:F,labelID:H,name:l,helpText:v,formLabelLocation:d,requiredMessageTemplate:c,validationGroup:h,editorOptions:k}}function BL(i){let{showRequiredMark:e,requiredMark:t,showOptionalMark:n,optionalMark:s}=i;return!e&&!n?"":String.fromCharCode(160)+(e?t:s)}function LE(i,e){let{showRequiredMark:t,requiredMark:n,showOptionalMark:s,optionalMark:o}=i;return{showRequiredMark:t&&e,requiredMark:n,showOptionalMark:s&&!e,optionalMark:o}}function FL(i){let{editorType:e,defaultEditorName:t,editorValue:n,canAssignUndefinedValueToEditor:s,externalEditorOptions:o,editorInputId:r,editorValidationBoundary:a,editorStylingMode:l,formLabelMode:d,labelText:c,labelMark:h}=i;const u={};(n!==void 0||s)&&(u.value=n),OL.includes(e)&&(u.value=u.value||[]);let p=o==null?void 0:o.labelMode;U(p)||(p=d==="outside"?"hidden":d);const f=(o==null?void 0:o.stylingMode)||l,g=RL.includes(e),m=Y(!0,u,o,{inputAttr:{id:r},validationBoundary:a,stylingMode:f,label:g?o==null?void 0:o.label:c,labelMode:p,labelMark:h});return o&&(m.dataSource&&(m.dataSource=o.dataSource),m.items&&(m.items=o.items)),t&&!m.name&&(m.name=t),m}function VL(i){let e;return i&&i.length&&ie(i,(t,n)=>{if(n.type==="required")return e=!0,!1}),e}function NL(i){let{item:e,id:t,isRequired:n,managerMarkOptions:s,showColonAfterLabel:o,labelLocation:r,labelTemplate:a,formLabelMode:l,onLabelTemplateRendered:d}=i;const c=ML.includes(e.editorType),h=Y({showColon:o,location:r,id:t,visible:l==="outside"||c&&l!=="hidden",isRequired:n},e?e.label:{},{markOptions:LE(s,n),labelTemplate:a,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(h.labelID=`dx-label-${new hi}`),!h.text&&e.dataField&&(h.text=cr(e.dataField)),h.text&&(h.textWithoutColon=h.text,h.text+=h.showColon?":":""),h}const LL="dx-field-item-required-mark",$L="dx-field-item-optional-mark";function HL(i){let{text:e,id:t,location:n,alignment:s,labelID:o=null,markOptions:r={},labelTemplate:a,labelTemplateData:l,onLabelTemplateRendered:d}=i;if((!U(e)||e.length<=0)&&!U(a))return null;const c=R("<label>").addClass(`${VE} dx-field-item-label-location-${n}`).attr("for",t).attr("id",o).css("textAlign",s),h=R("<span>").addClass(FE);let u=R("<span>").addClass("dx-field-item-label-text").text(e);return a&&(u=R("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,a.render({container:ze(u),model:l,onRendered(){d==null||d()}})),c.append(h.append(u,zL(r)))}function zL(i){const e=BL(i);return e===""?null:R("<span>").addClass(i.showRequiredMark?LL:$L).text(e)}function WL(i,e,t){const n=`${e} > .${VE}:not(.dx-field-item-label-location-top) > .${FE}`,s=i.find(n),o=s.length;let r,a,l=0;for(a=0;a<o;a++)r=jL(s[a]),r>l&&(l=r);for(a=0;a<o;a++)s[a].style.width=`${l}px`}function jL(i){let e=0;const t=i.children.length;for(let n=0;n<t;n++){const s=i.children[n];e+=s.offsetWidth}return e}const $E="dx-field-item-content-wrapper",KL="dx-template-wrapper",Df="dx-validation-target",GL="dx-invalid";function UL(i){let{$parent:e,rootElementCssClassList:t,formOrLayoutManager:n,createComponentCallback:s,labelOptions:o,labelNeedBaselineAlign:r,labelLocation:a,needRenderLabel:l,formLabelLocation:d,item:c,editorOptions:h,isSimpleItem:u,isRequired:p,template:f,helpID:g,labelID:m,name:b,helpText:_,requiredMessageTemplate:w,validationGroup:E}=i;const D=R("<div>").addClass(t.join(" ")).appendTo(e);D.addClass(p?"dx-field-item-required":"dx-field-item-optional"),u&&D.addClass("dx-flex-layout"),u&&r&&D.addClass("dx-field-item-label-align");const B=R("<div>");B.data("dx-form-item",c),B.addClass(If).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[d]);let $=null;if(l&&(o.labelTemplate&&(o.labelTemplateData=ly(c,h,n)),$=HL(o)),$){const{editorType:j}=c;D.append($),(a==="top"||a==="left")&&D.append(B),a==="right"&&D.prepend(B),a==="top"?D.addClass("dx-label-v-align"):D.addClass("dx-label-h-align"),(j==="dxCheckBox"||j==="dxSwitch")&&q.on($,kt,()=>{q.trigger(B.children(),kt)});const I=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(j),k=o.alignment;!f&&I&&a==="top"&&(k==="left"||!k)&&B.addClass("dx-toggle-controls-paddings")}else D.append(B);let F;if(f)f.render({container:ze(B),model:ly(c,h,n),onRendered(){const j=ry(B),H=qL(j);ay(H)}});else{const j=R("<div>").appendTo(B);try{F=s(j,c.editorType,h),F.setAria("describedby",g),m&&F.setAria("labelledby",m),F.setAria("required",p)}catch(H){mt.log("E1035",H.message)}}const N=ry(B),L=N&&N.data(Df);if(L){const j=c.label&&c.label.text,H=j?null:b,I=j?c.label.text:H&&cr(H);let k;if(u)if(c.validationRules)k=c.validationRules;else{const S=vs(w,I||"");k=c.isRequired?[{type:"required",message:S}]:null}Array.isArray(k)&&k.length&&s(N,Wu,{validationRules:k,validationGroup:E,dataGetter:()=>({formItem:c})}),ay(L)}return _&&u&&B.parent().append(R("<div>").addClass($E).append(B).append(R("<div>").addClass("dx-field-item-help-text").attr("id",g).text(_))),{$fieldEditorContainer:B,$rootElement:D,widgetInstance:F}}function ry(i){const e=i.children().first();return e.hasClass(KL)?e.children().first():e}function qL(i){var e;return(i==null?void 0:i.data(Df))||(i==null||(e=i.parent)===null||e===void 0||(e=e.call(i))===null||e===void 0?void 0:e.data(Df))}function ay(i){if(i&&On()){const e=`.${$E}`,t=n=>{let{element:s,component:o}=n;const{isValid:r,validationMessageMode:a}=o.option();R(s).parents(e).toggleClass(GL,r===!1&&(o._isFocused()||a==="always"))};i.on("optionChanged",n=>{n.name==="isValid"&&t(n)}),i.on("focusIn",t).on("focusOut",t).on("enterKey",t)}}function ly(i,e,t){return{dataField:i.dataField,editorType:i.editorType,editorOptions:e,component:t,name:i.name}}class HE{constructor(){this._map={}}_findWidgetInstance(e){let t;return ie(this._map,(n,s)=>{let{widgetInstance:o,item:r}=s;if(e(r))return t=o,!1}),t}_findFieldByCondition(e,t){let n;return ie(this._map,(s,o)=>{if(e(o))return n=t==="guid"?s:o[t],!1}),n}clear(){this._map={}}removeItemsByItems(e){ie(e.getItems(),t=>this.removeItemByKey(t))}removeItemByKey(e){delete this._map[e]}add(e){const t=e.guid||new hi;return this._map[t]=e,t}addItemsOrExtendFrom(e){e.each((t,n)=>{this._map[t]?(n.widgetInstance&&(this._map[t].widgetInstance=n.widgetInstance),this._map[t].$itemContainer=n.$itemContainer):this.add({item:n.item,widgetInstance:n.widgetInstance,guid:t,$itemContainer:n.$itemContainer})})}extendRunTimeItemInfoByKey(e,t){this._map[e]&&(this._map[e]=Y(this._map[e],t))}findWidgetInstanceByItem(e){return this._findWidgetInstance(t=>t===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(t=>{let{path:n}=t;return n===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(t=>{let{path:n}=t;return n===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(t=>e===t.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(t=>e===(Ke(t)?t:t.dataField))}findItemContainerByItem(e){for(const t in this._map)if(this._map[t].item===e)return this._map[t].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(t=>{let{item:n}=t;return n===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(t=>{let{item:n}=t;return n===e},"preparedItem")}getItems(){return this._map}each(e){ie(this._map,(t,n)=>{e(t,n)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(s=>this._map[s].path?this._map[s].path.indexOf(e,0)>-1:!1).forEach(s=>this.removeItemByKey(s))}}const YL=Hi.inherit({_getDefaultOptions(){return Y(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:re.format("dxForm-optionalMark"),requiredMessage:re.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init(){const i=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new HE,this._updateReferencedOptions(i),this._initDataAndItems(i)},_dispose(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems(i){this._syncDataWithItems(),this._updateItems(i)},_syncDataWithItems(){const i=this.option("layoutData"),e=this.option("items");U(e)&&e.forEach(t=>{if(t.dataField&&this._getDataByField(t.dataField)===void 0){let n;t.editorOptions&&(n=t.editorOptions.value),(U(n)||t.dataField in i)&&this._updateFieldValue(t.dataField,n)}})},_getDataByField(i){return i?this.option(`layoutData.${i}`):null},_isCheckboxUndefinedStateEnabled(i){let{allowIndeterminateState:e,editorType:t,dataField:n}=i;if(e===!0&&t==="dxCheckBox"){const s=["layoutData",...n.split(".")],o=s.pop(),r=this.option(s.join("."));return r&&o in r}return!1},_updateFieldValue(i,e){const t=this.option("layoutData");let n=e;!Qi.isWrapped(t[i])&&U(i)?this.option(`layoutData.${i}`,n):Qi.isWritableWrapped(t[i])&&(n=Ee(n)?n():n,t[i](n)),this._triggerOnFieldDataChanged({dataField:i,value:n})},_triggerOnFieldDataChanged(i){this._createActionByOption("onFieldDataChanged")(i)},_updateItems(i){const e=this,t=this.option("items"),n=U(t),s=e.option("customizeItem"),o=n?t:this._generateItemsByData(i);if(U(o)){const r=[];ie(o,(a,l)=>{e._isAcceptableItem(l)&&(l=e._processItem(l),s&&s(l),We(l)&&Qi.unwrap(l.visible)!==!1&&r.push(l))}),(!e._itemWatchers.length||!n)&&e._updateItemWatchers(o),this._setItems(r),this._sortItems()}},_cleanItemWatchers(){this._itemWatchers.forEach(i=>{i()}),this._itemWatchers=[]},_updateItemWatchers(i){const e=this,t=e._getWatch();i.forEach(n=>{We(n)&&U(n.visible)&&Ee(t)&&e._itemWatchers.push(t(()=>Qi.unwrap(n.visible),()=>{e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData(i){const e=[];return U(i)&&ie(i,t=>{e.push({dataField:t})}),e},_isAcceptableItem(i){const e=i.dataField||i,t=this._getDataByField(e);return!(Ee(t)&&!Qi.isWrapped(t))},_processItem(i){if(typeof i=="string"&&(i={dataField:i}),typeof i=="object"&&!i.itemType&&(i.itemType=Tf),!U(i.editorType)&&U(i.dataField)){const e=this._getDataByField(i.dataField);i.editorType=U(e)?this._getEditorTypeByDataType(kn(e)):"dxTextBox"}return i.editorType==="dxCheckBox"&&(i.allowIndeterminateState=i.allowIndeterminateState??!0),i},_getEditorTypeByDataType(i){switch(i){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems(){vl(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes(){this._items.sort((i,e)=>{const t=i.visibleIndex,n=e.visibleIndex;let s;return t>n?s=1:t<n?s=-1:s=0,s})},_initMarkup(){this._itemsRunTimeInfo.clear(),this.$element().addClass(wL),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox(){const i=this,e=[];if(i._items&&i._items.length){const t=i._getColCount(),n=R("<div>").appendTo(i.$element());i._prepareItemsWithMerging(t);const s=i._generateLayoutItems();i._responsiveBox=i._createComponent(n,PE,i._getResponsiveBoxConfig(s,t,e)),qe()||i._renderTemplates(e)}},_itemStateChangedHandler(i){this._refresh()},_renderTemplates(i){const e=this;let t=0;i.forEach(n=>{var s;let{item:o}=n;o!=null&&(s=o.label)!==null&&s!==void 0&&s.template&&t++}),ie(i,(n,s)=>{switch(s.itemType){case"empty":ey(s);break;case"button":e._renderButtonItem(s);break;default:e._renderFieldItem(s,t)}})},_getResponsiveBoxConfig(i,e,t){const n=this,s=n.option("colCountByScreen"),o=s&&s.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged(){const r=n.option("onLayoutChanged"),a=n.isSingleColumnMode();r&&(n.$element().toggleClass(iy,a),r(a))},onContentReady(r){qe()&&n._renderTemplates(t),n.option("onLayoutChanged")&&n.$element().toggleClass(iy,n.isSingleColumnMode(r.component))},itemTemplate(r,a,l){if(!r.location)return;const d=R(l),c=r.location.row*e,h=n._items[r.location.col+c];if(!h)return;const u=[h.cssClass];d.toggleClass(SL,n.isSingleColumnMode(this)),r.location.row===0&&u.push("dx-first-row"),r.location.col===0&&u.push("dx-first-col"),h.itemType===Tf&&n.option("isRoot")&&d.addClass(NE);const p=r.location.col===e-1||r.location.col+r.location.colspan===e,f=n._getRowsCount(),g=r.location.row===f-1;p&&u.push("dx-last-col"),g&&u.push("dx-last-row"),h.itemType!=="empty"&&(u.push(BE),u.push(n.option("cssItemClass")),U(h.col)&&u.push(`dx-col-${h.col}`)),t.push({itemType:h.itemType,item:h,$parent:d,rootElementCssClassList:u})},cols:n._generateRatio(e),rows:n._generateRatio(n._getRowsCount(),!0),dataSource:i,screenByWidth:n.option("screenByWidth"),singleColumnScreen:o?!1:"xs"}},_getColCount(){let i=this.option("colCount");const e=this.option("colCountByScreen");if(e){let t=this.option("form").getTargetScreenFactor();t||(t=qe()?EC(this.option("screenByWidth")):"lg"),i=e[t]||i}if(i==="auto"){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=i=this._getMaxColCount()}return i<1?1:i},_getMaxColCount(){if(!qe())return 1;const i=this.option("minColWidth"),e=Ge(this.$element()),t=this._items.length,n=Math.floor(e/i)||1;return t<n?t:n},isCachedColCountObsolete(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging(i){const e=this._items.slice(0);let t,n,s=[],o,r;for(r=0;r<e.length;r++)if(t=e[r],s.push(t),(this.option("alignItemLabels")||t.alignItemLabels||t.colSpan)&&(t.col=this._getColByIndex(s.length-1,i)),t.colSpan>1&&t.col+t.colSpan<=i){for(n=[],o=0;o<t.colSpan-1;o++)n.push({merged:!0});s=s.concat(n)}else delete t.colSpan;this._setItems(s)},_getColByIndex:(i,e)=>i%e,_setItems(i){this._items=i,this._cashedColCount=null},_generateLayoutItems(){const i=this._items,e=this._getColCount(),t=[];let n,s;for(s=0;s<i.length;s++)if(n=i[s],!n.merged){const o={location:{row:parseInt(s/e),col:this._getColByIndex(s,e)}};U(n.disabled)&&(o.disabled=n.disabled),U(n.visible)&&(o.visible=n.visible),U(n.colSpan)&&(o.location.colspan=n.colSpan),U(n.rowSpan)&&(o.location.rowspan=n.rowSpan),t.push(o)}return t},_renderEmptyItem(i){ey({$container:i})},_renderButtonItem(i){let{item:e,$parent:t,rootElementCssClassList:n}=i;const{$rootElement:s,buttonInstance:o}=gL({item:e,$parent:t,rootElementCssClassList:n,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:o,guid:e.guid,$itemContainer:s})},_renderFieldItem(i,e){var t,n;let{item:s,$parent:o,rootElementCssClassList:r}=i;const a=this._getDataByField(s.dataField);let l=!1;if(a===void 0){const{allowIndeterminateState:f,editorType:g,dataField:m}=s;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:f,editorType:g,dataField:m})}const d=s.dataField||s.name,c=this._getFormOrThis(),{$fieldEditorContainer:h,widgetInstance:u,$rootElement:p}=UL(PL({$parent:o,rootElementCssClassList:r,item:s,name:d,editorValue:a,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:s.template?this._getTemplate(s.template):null,labelTemplate:(t=s.label)!==null&&t!==void 0&&t.template?this._getTemplate(s.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(d),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(c,e)&&c._alignLabels(this,this.isSingleColumnMode(c))}}));(n=this.option("onFieldItemRendered"))===null||n===void 0||n(),u&&s.dataField&&this._bindDataField(u,s.dataField,s.editorType,h),this._itemsRunTimeInfo.add({item:s,widgetInstance:u,guid:s.guid,$itemContainer:p})},_incTemplateRenderedCallCount(){this._labelTemplateRenderedCallCount=(this._labelTemplateRenderedCallCount??0)+1},_shouldAlignLabelsOnTemplateRendered(i,e){return i.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis(){return this.option("form")||this},_bindDataField(i,e,t,n){const s=this._getFormOrThis();i.on("enterKey",o=>{s._createActionByOption("onEditorEnterKey")(Y(o,{dataField:e}))}),this._createWatcher(i,n,e),this.linkEditorToDataField(i,e,t)},_createWatcher(i,e,t){const n=this,s=n._getWatch();if(!Ee(s))return;const o=s(()=>n._getDataByField(t),()=>{const r=n._getDataByField(t);if(i.NAME==="dxTagBox"){const a=i.option("value");if(r!==a&&function(l,d){if(!Array.isArray(l)||!Array.isArray(d)||l.length!==d.length)return!1;for(let c=0;c<l.length;c++)if(l[c]!==d[c])return!1;return!0}(r,a))return}i.option("value",r)},{deep:!0,skipImmediate:!0},{createWatcherDataField:t});q.on(e,Rn,o)},_getWatch(){if(!U(this._watch)){const i=this.option("form");this._watch=i&&i.option("integrationOptions.watchMethod")}return this._watch},_createComponent(i,e,t){const n=this.option("readOnly");let s=Object.hasOwn(t,"readOnly");const o=this.callBase(i,e,ve({},t,{readOnly:s?t.readOnly:n}));let r=!1;return o.on("optionChanged",a=>{a.name==="readOnly"&&!r&&(s=!0)}),this.on("optionChanged",a=>{a.name==="readOnly"&&!s&&(r=!0,o.option(a.name,a.value),r=!1)}),o},_generateRatio(i,e){const t=[];let n,s;for(s=0;s<i;s++)n={ratio:1},e&&(n.baseSize="auto"),t.push(n);return t},_getRowsCount(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions(i){const e=this.option("layoutData");We(e)&&Object.getOwnPropertyNames(e).forEach(t=>delete this._optionsByReference[`layoutData.${t}`]),We(i)&&Object.getOwnPropertyNames(i).forEach(t=>this._optionsByReference[`layoutData.${t}`]=!0)},_clearWidget(i){this._disableEditorValueChangedHandler=!0,i.clear(),this._disableEditorValueChangedHandler=!1,i.option("isValid",!0)},_optionChanged(i){if(i.fullName.search("layoutData.")!==0)switch(i.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(i.value),this.option("items")?cn(i.value)||this._itemsRunTimeInfo.each((e,t)=>{if(U(t.item)){const{dataField:n}=t.item;if(n&&U(t.widgetInstance)){const o=Nt(n)(i.value),{allowIndeterminateState:r,editorType:a}=t.item;o!==void 0||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:r,editorType:a,dataField:n})?t.widgetInstance.option("value",o):this._clearWidget(t.widgetInstance)}}}):(this._initDataAndItems(i.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(i.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":this.option("colCount")==="auto"&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(i),this.option("colCount")==="auto"&&this._resetColCount();break;default:this.callBase(i)}},_resetColCount(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(i,e){this.on("optionChanged",t=>{t.fullName===`layoutData.${e}`&&i._setOptionWithoutOptionChange("value",t.value)}),i.on("valueChanged",t=>{const n=We(t.value)||Array.isArray(t.value);!this._disableEditorValueChangedHandler&&!(n&&t.value===t.previousValue)&&this._updateFieldValue(e,t.value)})},_dimensionChanged(){this.option("colCount")==="auto"&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData(i,e){const t=this;We(i)?ie(i,(n,s)=>{t._updateFieldValue(n,s)}):typeof i=="string"&&t._updateFieldValue(i,e)},getEditor(i){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(i)||this._itemsRunTimeInfo.findWidgetInstanceByName(i)},isSingleColumnMode(i){const e=this._responsiveBox||i;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo(){return this._itemsRunTimeInfo}});wt("dxLayoutManager",YL);const XL="dx-validationsummary-item",ZL="dx-validationsummary-item-data",zE=Dr.inherit({_getDefaultOptions(){return Y(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){const i=this.$element(),e=this.option("validationGroup")||Ft.findGroup(i,this._modelByElement(i)),t=Ft.addGroup(e,!0);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),t.on("validated",this.groupSubscription)},_unsubscribeGroup(){const i=Ft.getGroupConfig(this._validationGroup);i&&i.off("validated",this.groupSubscription)},_getOrderedItems(i,e){let t=[];return ie(i,(n,s)=>{const o=ln(e,r=>{if(r.validator===s)return!0});o.length&&(t=t.concat(o))}),t},_groupValidationHandler(i){const e=this._getOrderedItems(i.validators,Ii(i.brokenRules,t=>({text:t.message,validator:t.validator,index:t.index})));this.validators=i.validators,ie(this.validators,(t,n)=>{if(n._validationSummary!==this){let s=this._itemValidationHandler.bind(this);const o=function(){n.off("validated",s),n._validationSummary=null,s=null};n.on("validated",s),n.on("disposing",o),n._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(i){let{isValid:e,validator:t,brokenRules:n}=i,s=this.option("items"),o=!1,r=0;for(;r<s.length;){const a=s[r];if(a.validator===t){const l=ln(n||[],d=>d.index===a.index)[0];if(e||!l){s.splice(r,1),o=!0;continue}l.message!==a.text&&(a.text=l.message,o=!0)}r++}ie(n,(a,l)=>{ln(s,c=>c.validator===t&&c.index===l.index)[0]||(s.push({text:l.message,validator:t,index:l.index}),o=!0)}),o&&(s=this._getOrderedItems(this.validators,s),this.option("items",s))},_initMarkup(){this.$element().addClass("dx-validationsummary"),this.callBase()},_optionChanged(i){i.name==="validationGroup"?this._initGroupRegistration():this.callBase(i)},_itemClass:()=>XL,_itemDataKey:()=>ZL,_postprocessRenderItem(i){q.on(i.itemElement,"click",()=>{i.itemData.validator&&i.itemData.validator.focus&&i.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});wt("dxValidationSummary",zE);class JL extends Ss{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),Ft.addGroup(this,!1)}_initMarkup(){const e=this.$element();e.addClass("dx-validationgroup"),e.find(".dx-validator").each((t,n)=>{Wu.getInstance(R(n))._initGroupRegistration()}),e.find(".dx-validationsummary").each((t,n)=>{zE.getInstance(R(n)).refreshValidationGroup()}),super._initMarkup()}validate(){return Ft.validateGroup(this)}reset(){return Ft.resetGroup(this)}_dispose(){Ft.removeGroup(this),this.$element().removeClass("dx-validationgroup"),super._dispose()}_useTemplates(){return!1}}wt("dxValidationGroup",JL);const Yd={move(i,e){Bi(i,{left:e})}},ep={moveTo(i,e,t,n){li.animate(i,{type:"slide",to:{left:e},duration:t,complete:n})},complete(i){li.stop(i,!0)}},dy=i=>+i,QL=i=>Hn(i).left,WE=og.inherit({_activeStateUnit:".dx-multiview-item",_supportedKeys(){return Y(this.callBase(),{pageUp:ue,pageDown:ue})},_getDefaultOptions(){return Y(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}}])},_itemClass:()=>"dx-multiview-item",_itemDataKey:()=>"dxMultiViewItemData",_itemContainer(){return this._$itemContainer},_itemElements(){return this._itemContainer().children(this._itemSelector())},_itemWidth(){return this._itemWidthValue||(this._itemWidthValue=Ge(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache(){delete this._itemWidthValue},_itemsCount(){return this.option("items").length},_normalizeIndex(i){const e=this._itemsCount();return i<0&&(i+=e),i>=e&&(i-=e),i},_getRTLSignCorrection(){return this.option("rtlEnabled")?-1:1},_init(){this.callBase.apply(this,arguments);const i=this.$element();i.addClass("dx-multiview"),this._$wrapper=R("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(i),this._$itemContainer=R("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup(){this._deferredItems=[],this.callBase();const i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted(i,e){this.callBase(i,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted(i){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(i.index,0,null)},_executeItemRenderAction(i,e,t){i=(this.option("items")||[]).indexOf(e),this.callBase(i,e,t)},_renderItemContent(i){const e=ae(),t=this,{callBase:n}=this,s=ae();return s.done(()=>{const o=n.call(t,i);e.resolve(o)}),this._deferredItems[i.index]=s,this.option("deferRendering")||s.resolve(),e.promise()},_render(){this.callBase(),Di(()=>{const i=this._getSelectedItemIndices();this._updateItems(i[0])})},_getElementAria:()=>({role:"group",roledescription:re.format("dxMultiView-elementAriaRoleDescription"),label:re.format("dxMultiView-elementAriaLabel")}),_setElementAria(){const i=this._getElementAria();this.setAria(i,this.$element())},_setItemsAria(){const i=this._itemElements(),e=this._itemsCount();i.each((t,n)=>{const s=this._getItemAria({itemIndex:t,itemsCount:e});this.setAria(s,R(n))})},_getItemAria(i){let{itemIndex:e,itemsCount:t}=i;return{role:"group",roledescription:re.format("dxMultiView-itemAriaRoleDescription"),label:re.format("dxMultiView-itemAriaLabel",e+1,t)}},_updateItems(i,e){this._updateItemsPosition(i,e),this._updateItemsVisibility(i,e)},_modifyByChanges(){this.callBase.apply(this,arguments);const i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0])},_updateItemsPosition(i,e){const t=this._itemElements(),n=U(e)?-this._animationDirection(e,i):void 0,s=t.eq(i);Yd.move(s,0),U(e)&&Yd.move(t.eq(e),100*n+"%")},_updateItemsVisibility(i,e){this._itemElements().each((n,s)=>{const o=R(s),r=n!==i&&n!==e;r||this._renderSpecificItem(n),o.toggleClass("dx-multiview-item-hidden",r),this.setAria("hidden",r||void 0,o)})},_renderSpecificItem(i){const e=this._itemElements().eq(i),t=e.find(this._itemContentClass()).length>0;U(i)&&!t&&(this._deferredItems[i].resolve(),ps(e))},_refreshItem(i,e){this.callBase(i,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:ue,_updateSelection(i,e){const t=i[0],n=e[0];ep.complete(this._$itemContainer),this._updateItems(n,t);const s=this._animationDirection(t,n);this._animateItemContainer(s*this._itemWidth(),()=>{Yd.move(this._$itemContainer,0),this._updateItems(t),Ge(this._$itemContainer)})},_animateItemContainer(i,e){const t=this.option("animationEnabled")?200:0;ep.moveTo(this._$itemContainer,i,t,e)},_animationDirection(i,e){const t=QL(this._$itemContainer),n=(e-i)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return ha(t!==0?t:n)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),iu,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:i=>this._swipeStartHandler(i.event),onUpdated:i=>this._swipeUpdateHandler(i.event),onEnd:i=>this._swipeEndHandler(i.event)})},_findBoundaryIndices(){const i=this.option("items");let e,t;i.forEach((n,s)=>{!!(n!=null&&n.disabled)||(e??(e=s),t=s)}),this._boundaryIndices={firstAvailableIndex:e??0,lastAvailableIndex:t??i.length-1,firstTrueIndex:0,lastTrueIndex:i.length-1}},_swipeStartHandler(i){ep.complete(this._$itemContainer);const e=this.option("selectedIndex"),t=this.option("loop"),{firstAvailableIndex:n,lastAvailableIndex:s}=this._boundaryIndices,o=this.option("rtlEnabled");i.maxLeftOffset=dy(t||(o?e>n:e<s)),i.maxRightOffset=dy(t||(o?e<s:e>n)),this._swipeDirection=null},_swipeUpdateHandler(i){const{offset:e}=i,t=ha(e)*this._getRTLSignCorrection();if(Yd.move(this._$itemContainer,e*this._itemWidth()),t!==this._swipeDirection){this._swipeDirection=t;const n=this.option("selectedIndex"),s=this._normalizeIndex(n-t);this._updateItems(n,s)}},_findNextAvailableIndex(i,e){const{items:t,loop:n}=this.option(),{firstAvailableIndex:s,lastAvailableIndex:o,firstTrueIndex:r,lastTrueIndex:a}=this._boundaryIndices,l=[r,s].includes(i),d=[a,o].includes(i);if(n){if(l&&e<0)return o;if(d&&e>0)return s}for(let c=i+e;c>=s&&c<=o;c+=e)if(!!!t[c].disabled)return c;return i},_swipeEndHandler(i){const e=i.targetOffset*this._getRTLSignCorrection();if(e){const t=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",t);const n=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",ze(n))}else this._animateItemContainer(0,ue)},_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1},_moveFocus(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem(i){const e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(i.last()),e},_nextItem(i){const e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(i.first()),e},_dimensionChanged(){this._clearItemWidthCache()},_visibilityChanged(i){i&&this._dimensionChanged()},_updateSwipeDisabledState(){const i=this._getSwipeDisabledState();iu.getInstance(this.$element()).option("disabled",i)},_dispose(){delete this._boundaryIndices,this.callBase()},_optionChanged(i){const{value:e}=i;switch(i.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(i);break;default:this.callBase(i)}}});wt("dxMultiView",WE);function jE(i){return i.scrollWidth-i.clientWidth}function e$(i){return i.scrollHeight-i.clientHeight}function t$(i,e){return Math.round(i)<=e}function i$(i,e,t){return Math.round(jE(i)-e)<=t}function n$(i,e){return Math.round(i)<=e}function s$(i,e,t,n){return Math.round(e$(i)-e-t)<=n}const cy="dx-tabs-expanded",o$=Tr.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge(i){if(this._$element.children(".dx-badge").remove(),!i)return;const e=R("<div>").addClass("dx-tabs-item-badge").addClass("dx-badge").text(i);this._$element.append(e)}}),uy={vertical:"dx-tabs-vertical",horizontal:"dx-tabs-horizontal"},hy={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},Wa={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},tp={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},ip={horizontal:"horizontal",vertical:"vertical"},Xd={top:"top",right:"right",bottom:"bottom",left:"left"},py={horizontal:"horizontal",vertical:"vertical"},qr={top:"top",end:"end",bottom:"bottom",start:"start"},fy={primary:"primary",secondary:"secondary"},xg=og.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions(){return Y(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:ip.horizontal,iconPosition:qr.start,stylingMode:fy.primary,activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:i=>i?i.badge:void 0,_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules(){const i=un();return this.callBase().concat([{device:()=>Re.real().deviceType!=="desktop",options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>nn(i),options:{iconPosition:qr.top,stylingMode:fy.secondary}},{device:()=>tn(i),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:qr.top}}])},_init(){const{orientation:i,stylingMode:e,scrollingEnabled:t}=this.option(),n=this._getIndicatorPosition();this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(t),this._toggleOrientationClass(i),this._toggleIndicatorPositionClass(n),this._toggleIconPositionClass(),this._toggleStylingModeClass(e),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(i,e){const t=ht(i)?i==null?void 0:i.text:i;if(U(t)){const n=R("<span>").addClass("dx-tab-text-span");n.text(t);const s=R("<span>").addClass("dx-tab-text-span-pseudo");s.text(t),s.appendTo(n),n.appendTo(e)}U(i.html)&&e.html(i.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Ir((i,e)=>{this._prepareDefaultItemTemplate(e,i);const t=Ys(e.icon);t&&t.prependTo(i);const n=R("<div>").addClass("dx-tab-text");i.wrapInner(n)},["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(i,e){const{itemData:t,container:n,index:s}=e;return this._deferredTemplates[s]=ae(),i.render({model:t,container:n,index:s,onRendered:()=>this._deferredTemplates[s].resolve()})},_itemClass:()=>"dx-tab",_selectedItemClass:()=>"dx-tab-selected",_itemDataKey:()=>"dxTabData",_initMarkup(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-overflow-hidden")},_render(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){De.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling(){const i=["dx-tabs-stretched",cy,"dx-overflow-hidden"];if(this.$element().removeClass(i.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());const e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){const t=jE(R(this.getScrollable().container()).get(0));e.scrollTo({left:t})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass("dx-tabs-stretched"),this.$element().removeClass("dx-tabs-nav-buttons").addClass(cy))},_isVertical(){return this.option("orientation")===ip.vertical},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){const i=this._getVisibleItems(),e=this._getSummaryItemsSize("width",i,!0),t=Ge(this.$element());return[e,t].includes(0)?!1:e>t-1},_isItemsHeightExceeded(){const i=this._getVisibleItems(),e=this._getSummaryItemsSize("height",i,!0),t=st(this.$element());return e-1>t},_needStretchItems(){const i=this._getVisibleItems(),e=Ge(this.$element()),t=[];ie(i,(r,a)=>{t.push(St(a,!0))});const n=Math.max.apply(null,t),s=e/i.length;return n>s+1},_cleanNavButtons(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple(){this._inkRipple=zm()},_getPointerEvent:()=>Ct.up,_toggleActiveState(i,e,t){if(this.callBase.apply(this,arguments),!this._inkRipple)return;const n={element:i,event:t};e?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)},_renderMultiple(){this.option("selectionMode")==="multiple"&&this.option("selectOnFocus",!1)},_renderWrapper(){this._$wrapper=R("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?py.vertical:py.horizontal},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){const i=this.$element().wrapInner(R("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(i,vn,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem(i){if(!this._scrollable)return;const e=this._editStrategy.getItemElement(i);this._scrollable.scrollToElement(e)},_renderNavButtons(){const{showNavButtons:i,rtlEnabled:e}=this.option();if(this.$element().toggleClass("dx-tabs-nav-buttons",i),!i)return;this._leftButton=this._createNavButton(-30,e?"chevronnext":"chevronprev");const t=this._leftButton.$element();t.addClass("dx-tabs-nav-button-left"),this.$element().prepend(t),this._rightButton=this._createNavButton(30,e?"chevronprev":"chevronnext");const n=this._rightButton.$element();n.addClass("dx-tabs-nav-button-right"),this.$element().append(n)},_updateNavButtonsAriaDisabled(){[this._leftButton,this._rightButton].forEach(e=>{e==null||e.$element().attr({"aria-disabled":null})})},_updateNavButtonsState(){const i=this._isVertical(),e=this.getScrollable();if(i){var t,n;(t=this._leftButton)===null||t===void 0||t.option("disabled",n$(e.scrollTop(),1)),(n=this._rightButton)===null||n===void 0||n.option("disabled",s$(R(e.container()).get(0),e.scrollTop(),0,1))}else{var s,o;(s=this._leftButton)===null||s===void 0||s.option("disabled",t$(e.scrollLeft(),1)),(o=this._rightButton)===null||o===void 0||o.option("disabled",i$(R(e.container()).get(0),e.scrollLeft(),1))}this._updateNavButtonsAriaDisabled()},_updateScrollPosition(i,e){this._scrollable.update(),this._scrollable.scrollBy(i/e)},_createNavButton(i,e){const t=this._createAction(()=>{this._holdInterval=setInterval(()=>{this._updateScrollPosition(i,5)},5)}),n=be(Ao.name,"dxNavButton"),s=be(Ct.up,"dxNavButton"),o=be(Ct.out,"dxNavButton"),r=this._createComponent(R("<div>").addClass("dx-tabs-nav-button"),$i,{focusStateEnabled:!1,icon:e,integrationOptions:{},elementAttr:{role:null,"aria-label":null,"aria-disabled":null},onClick:()=>{this._updateScrollPosition(i,1)}}),a=r.$element();return q.on(a,n,{timeout:300},l=>{t({event:l})}),q.on(a,s,()=>{this._clearInterval()}),q.on(a,o,()=>{this._clearInterval()}),r},_clearInterval(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection(i){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(i[0]))},_visibilityChanged(i){i&&this._dimensionChanged()},_dimensionChanged(){this._renderScrolling()},_itemSelectHandler(i){this.option("selectionMode")==="single"&&this.isItemSelected(i.currentTarget)||this.callBase(i)},_clean(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(i){this.$element().toggleClass(uy.vertical,i)},_toggleTabsHorizontalClass(i){this.$element().toggleClass(uy.horizontal,i)},_getIndicatorPositionClass:i=>hy[i],_getIndicatorPosition(){const{_indicatorPosition:i,rtlEnabled:e}=this.option();if(i)return i;const t=this._isVertical();return e?t?Xd.left:Xd.bottom:t?Xd.right:Xd.bottom},_toggleIndicatorPositionClass(i){const e=this._getIndicatorPositionClass(i);this._toggleElementClasses(hy,e)},_toggleScrollingEnabledClass(i){this.$element().toggleClass("dx-tabs-scrolling-enabled",!!i)},_toggleOrientationClass(i){const e=i===ip.vertical;this._toggleTabsVerticalClass(e),this._toggleTabsHorizontalClass(!e)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case qr.top:return Wa.top;case qr.end:return Wa.end;case qr.bottom:return Wa.bottom;default:return Wa.start}},_toggleIconPositionClass(){const i=this._getTabsIconPositionClass();this._toggleElementClasses(Wa,i)},_toggleStylingModeClass(i){const e=tp[i]??tp.primary;this._toggleElementClasses(tp,e)},_toggleElementClasses(i,e){for(const t in i)this.$element().removeClass(i[t]);this.$element().addClass(e)},_toggleFocusedDisabledNextClass(i,e){this._itemElements().eq(i).toggleClass("dx-focused-disabled-next-tab",e)},_toggleFocusedDisabledPrevClass(i,e){this._itemElements().eq(i).toggleClass("dx-focused-disabled-prev-tab",e)},_toggleFocusedDisabledClasses(i){const{selectedIndex:e}=this.option();this._itemElements().removeClass("dx-focused-disabled-next-tab").removeClass("dx-focused-disabled-prev-tab");const t=e-1,n=e+1,s=R(i).index(),o=this._itemElements().eq(n).hasClass("dx-state-disabled"),r=this._itemElements().eq(t).hasClass("dx-state-disabled"),a=o&&s===n,l=r&&s===t;this._toggleFocusedDisabledNextClass(e,a),this._toggleFocusedDisabledPrevClass(e,l)},_updateFocusedElement(){const{focusStateEnabled:i,selectedIndex:e}=this.option(),t=this._itemElements();if(i&&t.length){const n=t.get(e);this.option({focusedElement:n})}},_optionChanged(i){switch(i.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(i.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(i.name,i.value);break;case"width":case"height":this.callBase(i),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(i);break;case"focusedElement":this._toggleFocusedDisabledClasses(i.value),this.callBase(i),this._scrollToItem(i.value);break;case"rtlEnabled":{this.callBase(i);const e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e);break}case"orientation":{this._toggleOrientationClass(i.value);const e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e),qe()&&this._updateScrollable();break}case"iconPosition":this._toggleIconPositionClass(),qe()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(i.value),qe()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(i.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(i),this._updateFocusedElement();break;default:this.callBase(i)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(i,e){this.callBase(i,e),this._renderScrolling()},getScrollable(){return this._scrollable}});xg.ItemClass=o$;wt("dxTabs",xg);class r$ extends Tr{_renderWatchers(){return this._startWatcher("badge",ue),super._renderWatchers()}}const Yr={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},Ko={top:"top",right:"right",bottom:"bottom",left:"left"},a$={top:"bottom",right:"left",bottom:"top",left:"right"},my={horizontal:"horizontal",vertical:"vertical"},gy={top:"top",end:"end",bottom:"bottom",start:"start"},_y={primary:"primary",secondary:"secondary"},wg=WE.inherit({_getDefaultOptions(){return Y(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:Ko.top,iconPosition:gy.start,stylingMode:_y.primary,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:i=>i?i.badge:void 0,_tabsIndicatorPosition:null})},_defaultOptionsRules(){const i=un();return this.callBase().concat([{device:()=>Re.real().deviceType==="desktop"&&!Re.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!pr,options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>nn(i),options:{stylingMode:_y.secondary}},{device:()=>On(i),options:{iconPosition:gy.top}}])},_init(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(i,e){const t=Ys(i==null?void 0:i.icon);t&&e.append(t);const n=ht(i)?i==null?void 0:i.title:i;if(U(n)&&!ht(n)){const s=R("<span>").addClass("dx-tab-text-span");s.append(_e.createTextNode(n));const o=R("<span>").addClass("dx-tab-text-span-pseudo");o.append(_e.createTextNode(n)),o.appendTo(s),s.appendTo(e)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Ir((i,e)=>{this._prepareTabsItemTemplate(e,i);const t=R("<div>").addClass("dx-tab-text");i.wrapInner(t)},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout(){if(this._tabs)return;const i=this.$element();this._$tabContainer=R("<div>").addClass("dx-tabpanel-tabs").appendTo(i);const e=R("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,xg,this._tabConfig()),this._$container=R("<div>").addClass("dx-tabpanel-container").appendTo(i),this._$container.append(this._$wrapper)},_refreshActiveDescendant(){if(!this._tabs)return;const i=this._tabs,e=i.itemElements(),t=R(e[i.option("selectedIndex")]),n=this.getFocusedItemId();this.setAria("controls",void 0,R(e)),this.setAria("controls",n,t)},_getTabsIndicatorPosition(){const{_tabsIndicatorPosition:i,tabsPosition:e}=this.option();return i??a$[e]},_tabConfig(){const i=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:(function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}).bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:(function(e){if(e.name==="focusedElement")if(e.value){const t=R(e.value),n=this._itemElements().eq(t.index());this.option("focusedElement",ze(n))}else this.option("focusedElement",e.value)}).bind(this),onFocusIn:(function(e){this._focusInHandler(e.event)}).bind(this),onFocusOut:(function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}).bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:i}},_renderFocusTarget(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){const{tabsPosition:i}=this.option();return[Ko.right,Ko.left].includes(i)?my.vertical:my.horizontal},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case Ko.right:return Yr.right;case Ko.bottom:return Yr.bottom;case Ko.left:return Yr.left;case Ko.top:default:return Yr.top}},_toggleTabPanelTabsPositionClass(){for(const e in Yr)this.$element().removeClass(Yr[e]);const i=this._getTabPanelTabsPositionClass();this.$element().addClass(i)},_updateTabsOrientation(){const i=this._getTabsOrientation();this._setTabsOption("orientation",i)},_toggleWrapperFocusedClass(i){this._toggleFocusClass(i,this._$wrapper)},_toggleDisabledFocusedClass(i){this._focusTarget().toggleClass("dx-disabled-focused-tab",i)},_updateFocusState(i,e){this.callBase(i,e);const t=i.target===this._tabs._focusTarget().get(0),n=i.target===this._focusTarget().get(0);if(t&&this._toggleFocusClass(e,this._focusTarget()),t||n){const s=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!s),this._toggleDisabledFocusedClass(e&&s)}n&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler(i){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(i),this._isFocusOutHandlerExecuting=!1},_setTabsOption(i,e){this._tabs&&this._tabs.option(i,e)},_visibilityChanged(i){i&&this._tabs._dimensionChanged()},registerKeyHandler(i,e){this.callBase(i,e),this._tabs&&this._tabs.registerKeyHandler(i,e)},repaint(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){const i=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",i)},_optionChanged(i){const{name:e,value:t,fullName:n}=i;switch(e){case"dataSource":default:this.callBase(i);break;case"items":this._setTabsOption(e,this.option(e)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(i);break;case"width":this.callBase(i),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(n,t),this.callBase(i),this.option("focusStateEnabled")===!0){const s=this.option("selectedIndex"),o=this._itemElements().eq(s);this.option("focusedElement",ze(o))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(n,t),this.callBase(i);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(n,t);break;case"focusedElement":{const s=t&&R(t).index(),o=t&&this._tabs._itemElements().eq(s);if(this._setTabsOption("focusedElement",ze(o)),t){const r=this._isDisabled(t);this._toggleWrapperFocusedClass(!r),this._toggleDisabledFocusedClass(r)}this.callBase(i);break}case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",t);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",t);break;case"stylingMode":this._setTabsOption("stylingMode",t);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",t)}}});wg.ItemClass=r$;wt("dxTabPanel",wg);class kr{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){Lt.abstract()}}const Af=(i,e)=>`${e?"tabs":"items"}[${i}]`,KE=(i,e)=>U(i)&&U(e)?`${i}.${e}`:i||e,kf=i=>i?i.replace(/\s/g,""):void 0,l$=(i,e)=>i?i.dataField===e||i.name===e||kf(i.title)===e||i.itemType==="group"&&kf(i.caption)===e:!1,Ya=(i,e)=>`${i}.${e}`,by=i=>{const e=i.split(".");return e[e.length-1].replace(/\[\d+]/,"")},d$=i=>{const e=i.split("."),t=[...e];for(let n=e.length-1;n>=0;n--){if(GE(e[n]))return t.join(".");t.splice(n,1)}return""},GE=i=>i.indexOf("tabs")>-1,UE=(i,e,t)=>{const n=i.indexOf(e);if(n>-1)return Af(n,t);for(let s=0;s<i.length;s++){const o=i[s],r=o.tabs||o.items;if(r){const a=UE(r,e,o.tabs);if(a)return KE(Af(s,t),a)}}};function c$(i){let{form:e,$formElement:t,formOptions:n,items:s,validationGroup:o,extendedLayoutManagerOptions:r,onFieldDataChanged:a,onContentReady:l,onDisposing:d,onFieldItemRendered:c}=i;const h={form:e,items:s,$formElement:t,validationGroup:o,onFieldDataChanged:a,onContentReady:l,onDisposing:d,onFieldItemRendered:c,validationBoundary:n.scrollingEnabled?t:void 0,scrollingEnabled:n.scrollingEnabled,showRequiredMark:n.showRequiredMark,showOptionalMark:n.showOptionalMark,requiredMark:n.requiredMark,optionalMark:n.optionalMark,requiredMessage:n.requiredMessage,screenByWidth:n.screenByWidth,layoutData:n.formData,labelLocation:n.labelLocation,customizeItem:n.customizeItem,minColWidth:n.minColWidth,showColonAfterLabel:n.showColonAfterLabel,onEditorEnterKey:n.onEditorEnterKey,labelMode:n.labelMode};return Y(h,{isRoot:r.isRoot,colCount:r.colCount,alignItemLabels:r.alignItemLabels,cssItemClass:r.cssItemClass,colCountByScreen:r.colCountByScreen,onLayoutChanged:r.onLayoutChanged,width:r.width})}class u$ extends kr{tryExecute(){const{value:e}=this._options,t=this.findInstance();return t?(t.option(e),!0):!1}}class vy extends kr{tryExecute(){const e=this.findInstance();if(e){const{optionName:t,item:n,value:s}=this._options,o=this._itemsRunTimeInfo.findItemIndexByItem(n);if(o>=0)return e.option(Ya(`items[${o}]`,t),s),!0}return!1}}class h$ extends kr{tryExecute(){return!1}}class p$ extends kr{tryExecute(){const e=this.findPreparedItem();return e!=null&&e._prepareGroupItemTemplate&&e._renderGroupContentTemplate?(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),!0):!1}}class f$ extends kr{tryExecute(){const e=this.findInstance();if(e){const{value:t}=this._options;return e.option("dataSource",t),!0}return!1}}class m$ extends kr{tryExecute(){const{item:e}=this._options,t=this.findInstance(),n=t&&di(t.$element()[0],"dxValidator");if(n&&e){const s=a=>a.type==="required",o=(n.option("validationRules")||[]).some(s),r=(e.validationRules||[]).some(s);if(!o&&!r||o&&r)return n.option("validationRules",e.validationRules),!0}return!1}}class g$ extends kr{tryExecute(){const e=this.findItemContainer(),{previousValue:t,value:n}=this._options;return e?(e.removeClass(t).addClass(n),!0):!1}}const _$=(i,e)=>{switch(i){case"editorOptions":case"buttonOptions":return new u$(e);case"validationRules":return new m$(e);case"cssClass":return new g$(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new vy(Y(e,{optionName:i}));case"tabs":return new f$(e);case"template":{var t,n;const s=(e==null||(t=e.item)===null||t===void 0?void 0:t.itemType)??((n=e.itemsRunTimeInfo.findPreparedItemByItem(e==null?void 0:e.item))===null||n===void 0?void 0:n.itemType);return s==="simple"?new h$(e):s==="group"?new p$(e):new vy(Y(e,{optionName:i}))}default:return null}},b$=["items","isRequired","validationRules","visible"],Sg=Hi.inherit({_init(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new HE,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions(){return Y(this.callBase(),{formID:`dx-${new hi}`,formData:{},colCount:1,screenByWidth:Qf,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:re.format("dxForm-optionalMark"),requiredMessage:re.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:$t().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>On(),options:{labelLocation:"top"}},{device:()=>tn(),options:{showColonAfterLabel:!1}}])},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:i=>parseInt(i.attr(oy)),_applyLabelsWidthByCol(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=t.inOneColumn?BE:ty+e,s=t.excludeTabbed?`:not(.${ny})`:"";WL(i,`.${n}${s}`)},_applyLabelsWidth(i,e,t,n,s){n=t?1:n||this._getGroupColCount(i);const o={excludeTabbed:e,inOneColumn:t};let r;for(r=0;r<n;r++)this._applyLabelsWidthByCol(i,r,o,s)},_getGroupElementsInColumn(i,e,t){const n=U(t)?`.${sy}${t}`:"",s=`.${ty}${e} > .${If} > .${Qh}${n}`;return i.find(s)},_applyLabelsWidthWithGroups(i,e,t,n){if(this.option("alignRootItemLabels")===!0){const o=i.find(`.${NE}`);for(let r=0;r<e;r++)this._applyLabelsWidthByCol(o,r,t,n)}if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(i,e,t,n);else{const o=this.$element().find(`.${Qh}`);let r;for(r=0;r<o.length;r++)this._applyLabelsWidth(o.eq(r),t,void 0,void 0,n)}},_applyLabelsWidthWithNestedGroups(i,e,t,n){const s={excludeTabbed:t};let o,r,a,l;for(o=0;o<e;o++)for(l=this._getGroupElementsInColumn(i,o),this._applyLabelsWidthByCol(l,0,s,n),r=0;r<this._groupsColCount.length;r++){l=this._getGroupElementsInColumn(i,o,this._groupsColCount[r]);const d=this._getGroupColCount(l);for(a=1;a<d;a++)this._applyLabelsWidthByCol(l,a,s,n)}},_labelLocation(){return this.option("labelLocation")},_alignLabelsInColumn(i){let{layoutManager:e,inOneColumn:t,$container:n,excludeTabbed:s,items:o}=i;if(!qe()||this._labelLocation()==="top")return;const r=LE(e._getMarkOptions());t?this._applyLabelsWidth(n,s,!0,void 0,r):this._checkGrouping(o)?this._applyLabelsWidthWithGroups(n,e._getColCount(),s,r):this._applyLabelsWidth(n,s,!1,e._getColCount(),r)},_prepareFormData(){U(this.option("formData"))||this.option("formData",{})},_setStylingModeClass(){this.option("stylingMode")==="underlined"&&this.$element().addClass(kL)},_initMarkup(){Ft.addGroup(this._getValidationGroup(),!1),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass(yL),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription(){if(qe()){const i=this.$element().get(0);ar.unobserve(i),ar.observe(i,()=>{this._resizeHandler()})}},_resizeHandler(){this._cachedLayoutManagers.length&&ie(this._cachedLayoutManagers,(i,e)=>{var t;(t=e.option("onLayoutChanged"))===null||t===void 0||t(e.isSingleColumnMode())})},_getCurrentScreenFactor(){return qe()?EC(this.option("screenByWidth")):"lg"},_clearCachedInstances(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels(i,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:i,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),ps(this.$element().find(`.${BS}`))},_clean(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,ar.unobserve(this.$element().get(0))},_renderScrollable(){const i=this.option("useNativeScrolling");this._scrollable=new vn(this.$element(),{useNative:!!i,useSimulatedScrollbar:!i,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent(){return this.option("scrollingEnabled")?R(this._scrollable.content()):this.$element()},_clearValidationSummary(){var i;(i=this._$validationSummary)===null||i===void 0||i.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=R("<div>").addClass(AL).appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(i,e,t,n){if(i){const s=[];for(let o=0;o<i.length;o++){let r=i[o];const a=KE(t,Af(o,n)),l={item:r,itemIndex:o,path:a},d=this._itemsRunTimeInfo.add(l);if(Ke(r)&&(r={dataField:r}),We(r)){const c=ve({},r);l.preparedItem=c,c.guid=d,this._tryPrepareGroupItemCaption(c),this._tryPrepareGroupItem(c),this._tryPrepareTabbedItem(c,a),this._tryPrepareItemTemplate(c),e&&(c.cssItemClass=ny),c.items&&(c.items=this._prepareItems(c.items,e,a)),s.push(c)}else s.push(r)}return s}},_tryPrepareGroupItemCaption(i){i.itemType==="group"&&(i._prepareGroupCaptionTemplate=e=>{i.captionTemplate&&(i.groupCaptionTemplate=this._getTemplate(e)),i.captionTemplate=this._itemGroupTemplate.bind(this,i)},i._prepareGroupCaptionTemplate(i.captionTemplate))},_tryPrepareGroupItem(i){i.itemType==="group"&&(i.alignItemLabels=ci(i.alignItemLabels,!0),i._prepareGroupItemTemplate=e=>{i.template&&(i.groupContentTemplate=this._getTemplate(e)),i.template=this._itemGroupTemplate.bind(this,i)},i._prepareGroupItemTemplate(i.template))},_tryPrepareTabbedItem(i,e){i.itemType==="tabbed"&&(i.template=this._itemTabbedTemplate.bind(this,i),i.tabs=this._prepareItems(i.tabs,!0,e,!0))},_tryPrepareItemTemplate(i){i.template&&(i.template=this._getTemplate(i.template))},_checkGrouping(i){if(i){for(let e=0;e<i.length;e++)if(i[e].itemType==="group")return!0}},_renderLayout(){const i=this;let e=i.option("items");const t=i._getContent();e=i._prepareItems(e),i._rootLayoutManager=i._renderLayoutManager(t,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:i.option("colCount"),alignItemLabels:i.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged(n){i._alignLabels.bind(i)(i._rootLayoutManager,n)},onContentReady(n){i._alignLabels(n.component,n.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:i=>i.items||[],_itemTabbedTemplate(i,e,t){const n=R("<div>").appendTo(t),s=Y({},i.tabPanelOptions,{dataSource:i.tabs,onItemRendered:a=>{var l,d;(l=i.tabPanelOptions)===null||l===void 0||(d=l.onItemRendered)===null||d===void 0||d.call(l,a),Am(a.itemElement)},itemTemplate:(a,l,d)=>{const c=R(d),h=ci(a.alignItemLabels,!0),u=this._renderLayoutManager(c,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(a),{colCount:a.colCount,alignItemLabels:h,screenByWidth:this.option("screenByWidth"),colCountByScreen:a.colCountByScreen,cssItemClass:a.cssItemClass,onLayoutChanged:p=>{this._alignLabelsInColumn({$container:c,layoutManager:u,items:a.items,inOneColumn:p})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(a.guid,{layoutManager:u}),h&&this._alignLabelsInColumn({$container:c,layoutManager:u,items:a.items,inOneColumn:u.isSingleColumnMode()})}}),o=(a,l)=>{Array.isArray(a)&&a.forEach(d=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(d.guid,{widgetInstance:l}))},r=this._createComponent(n,wg,s);R(t).parent().addClass(TL),r.on("optionChanged",a=>{a.fullName==="dataSource"&&o(a.value,a.component)}),o([{guid:i.guid},...i.tabs??[]],r)},_itemGroupCaptionTemplate(i,e,t){if(i.groupCaptionTemplate){const n=R("<div>").addClass(xL).attr("id",t).appendTo(e);i._renderGroupCaptionTemplate=()=>{const s={component:this,caption:i.caption,name:i.name};i.groupCaptionTemplate.render({model:s,container:ze(n)})},i._renderGroupCaptionTemplate();return}i.caption&&R("<span>").addClass(CL).text(i.caption).attr("id",t).appendTo(e)},_itemGroupContentTemplate(i,e){const t=R("<div>").addClass(EL).appendTo(e);if(i.groupContentTemplate)i._renderGroupContentTemplate=()=>{t.empty();const n={formData:this.option("formData"),component:this};i.groupContentTemplate.render({model:n,container:ze(t)})},i._renderGroupContentTemplate();else{const n=this._renderLayoutManager(t,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(i),{colCount:i.colCount,colCountByScreen:i.colCountByScreen,alignItemLabels:i.alignItemLabels,cssItemClass:i.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(i.guid,{layoutManager:n});const s=n._getColCount();this._groupsColCount.includes(s)||this._groupsColCount.push(s),e.addClass(sy+s),e.attr(oy,s)}},_itemGroupTemplate(i,e,t){const{id:n}=e.editorOptions.inputAttr,s=R("<div>").toggleClass(DL,U(i.caption)&&i.caption.length).addClass(Qh).appendTo(t),o={role:"group",labelledby:n};this.setAria(o,s),R(t).parent().addClass(IL),this._itemGroupCaptionTemplate(i,s,n),this._itemGroupContentTemplate(i,s)},_createLayoutManagerOptions(i,e){return c$({form:this,formOptions:this.option(),$formElement:this.$element(),items:i,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:t=>{this._isDataUpdating||this._triggerOnFieldDataChanged(t)},onContentReady:t=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(t.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(t)},onDisposing:t=>{let{component:n}=t;const s=n.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(s)},onFieldItemRendered:()=>{var t;(t=this._validationSummary)===null||t===void 0||t.refreshValidationGroup()}})},_renderLayoutManager(i,e){const t={lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:Y(t,e.colCountByScreen)});const n=R("<div>");n.appendTo(i);const s=this._createComponent(n,"dxLayoutManager",e);return s.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(s),s},_getValidationGroup(){return this.option("validationGroup")||this},_createComponent(i,e,t){return t=t||{},this._extendConfig(t,{readOnly:this.option("readOnly")}),this.callBase(i,e,t)},_attachSyncSubscriptions(){const i=this;i.on("optionChanged",e=>{const t=e.fullName;t==="formData"&&(U(e.value)||i._options.silent("formData",e.value={}),i._triggerOnFieldDataChangedByDataSet(e.value)),i._cachedLayoutManagers.length&&ie(i._cachedLayoutManagers,(n,s)=>{t==="formData"&&(i._isDataUpdating=!0,s.option("layoutData",e.value),i._isDataUpdating=!1),(e.name==="readOnly"||e.name==="disabled")&&s.option(t,e.value)})})},_optionChanged(i){const e=i.fullName.split(".");e.length>1&&e[0].search("items")!==-1&&this._itemsOptionChangedHandler(i)||e.length>1&&e[0].search("formData")!==-1&&this._formDataOptionChangedHandler(i)||this._defaultOptionChangedHandler(i)},_defaultOptionChangedHandler(i){switch(i.name){case"formData":this.option("items")?cn(i.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":this.option("colCount")==="auto"&&this._invalidate();break;case"width":this.callBase(i),this._rootLayoutManager.option(i.name,i.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":Ft.removeGroup(i.previousValue||this),this._invalidate();break;default:this.callBase(i)}},_itemsOptionChangedHandler(i){const e=i.fullName.split("."),{value:t}=i,n=this._getItemPath(e),s=this.option(n),o=i.fullName.replace(`${n}.`,""),r=o.split(".")[0].replace(/\[\d+]/,""),a=this._tryCreateItemOptionAction(r,s,s[r],i.previousValue,n);let l=this._tryExecuteItemOptionAction(a)||this._tryChangeLayoutManagerItemOption(i.fullName,t);if(!l&&s){this._changeItemOption(s,o,t);const d=this._generateItemsFromData(this.option("items"));this.option("items",d),l=!0}return l},_formDataOptionChangedHandler(i){const e=i.fullName.split("."),{value:t}=i,n=e.slice(1).join("."),s=this.getEditor(n);return s?s.option("value",t):this._triggerOnFieldDataChanged({dataField:n,value:t}),!0},_tryCreateItemOptionAction(i,e,t,n,s){return i==="tabs"&&(this._itemsRunTimeInfo.removeItemsByPathStartWith(`${s}.tabs`),t=this._prepareItems(t,!0,s,!0)),_$(i,{item:e,value:t,previousValue:n,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:i=>i&&i.tryExecute(),_updateValidationGroupAndSummaryIfNeeded(i){const e=by(i);if(b$.includes(e)&&(Ft.addGroup(this._getValidationGroup(),!1),this.option("showValidationSummary"))){var t;(t=this._validationSummary)===null||t===void 0||t.refreshValidationGroup()}},_setLayoutManagerItemOption(i,e,t,n){if(this._updateLockCount>0){!i._updateLockCount&&i.beginUpdate();const o=this._itemsRunTimeInfo.findKeyByPath(n);this.postponedOperations.add(o,()=>(!i._disposed&&i.endUpdate(),ae().resolve()))}const s=o=>{if(o.component.off("contentReady",s),GE(n)){const r=d$(n),a=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(r);a&&this._alignLabelsInColumn({items:a.option("items"),layoutManager:a,$container:a.$element(),inOneColumn:a.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};i.on("contentReady",s),i.option(e,t),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(i,e){const t=i.split("."),n=by(i);if(n==="items"&&t.length>1){const s=this._getItemPath(t),o=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(s);if(o){this._itemsRunTimeInfo.removeItemsByItems(o.getItemsRunTimeInfo());const r=this._prepareItems(e,!1,s);return this._setLayoutManagerItemOption(o,n,r,s),!0}}else if(t.length>2){const s=t.length-2,o=this._getItemPath(t.slice(0,s)),r=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);if(r){const a=Ya(t[s],n);if(n==="editorType"&&r.option(a)!==e)return!1;if(n==="visible"){const l=this.option(Ya(o,"items"));if(l&&l.length){const d=r.option("items");l.forEach((c,h)=>{const u=d[h];u.visibleIndex=c.visibleIndex})}}return this._setLayoutManagerItemOption(r,a,e,o),!0}}return!1},_tryChangeLayoutManagerItemOptions(i,e){let t;return this.beginUpdate(),ie(e,(n,s)=>{if(t=this._tryChangeLayoutManagerItemOption(Ya(i,n),s),!t)return!1}),this.endUpdate(),t},_getItemPath(i){let e=i[0],t;for(t=1;t<i.length&&i[t].search(/items\[\d+]|tabs\[\d+]/)!==-1;t++)e+=`.${i[t]}`;return e},_triggerOnFieldDataChanged(i){this._updateIsDirty(i.dataField),this._createActionByOption("onFieldDataChanged")(i)},_triggerOnFieldDataChangedByDataSet(i){i&&We(i)&&Object.keys(i).forEach(e=>{this._triggerOnFieldDataChanged({dataField:e,value:i[e]})})},_updateFieldValue(i,e){if(U(this.option("formData"))){const t=this.getEditor(i);this.option(`formData.${i}`,e),t&&t.option("value")!==e&&t.option("value",e)}},_generateItemsFromData(i){const e=this.option("formData"),t=[];return!i&&U(e)&&ie(e,n=>{t.push({dataField:n})}),i&&ie(i,(n,s)=>{We(s)?t.push(s):t.push({dataField:s})}),t},_getItemByField(i,e){const t=this,n=We(i)?i:t._getFieldParts(i),{fieldName:s}=n,{fieldPath:o}=n;let r;return e.length&&ie(e,(a,l)=>{const{itemType:d}=l;if(o.length){const c=o.slice();l=t._getItemByFieldPath(c,s,l)}else if(d==="group"&&!(l.caption||l.name)||d==="tabbed"&&!l.name){const c=t._getSubItemField(d);l.items=t._generateItemsFromData(l.items),l=t._getItemByField({fieldName:s,fieldPath:o},l[c])}if(l$(l,s))return r=l,!1}),r},_getFieldParts(i){let e=i,t=e.indexOf(".");const n=[];for(;t!==-1;)n.push(e.substr(0,t)),e=e.substr(t+1),t=e.indexOf(".");return{fieldName:e,fieldPath:n.reverse()}},_getItemByFieldPath(i,e,t){const n=this,{itemType:s}=t,o=n._getSubItemField(s),r=s==="group"||s==="tabbed"||t.title;let a;do if(r){const l=t.name||t.caption||t.title,d=U(l),c=kf(l);let h;if(t[o]=n._generateItemsFromData(t[o]),d&&(h=i.pop()),!i.length&&(a=n._getItemByField(e,t[o]),a))break;(!d||d&&c===h)&&i.length&&(a=n._searchItemInEverySubItem(i,e,t[o]))}else break;while(i.length&&!U(a));return a},_getSubItemField:i=>i==="tabbed"?"tabs":"items",_searchItemInEverySubItem(i,e,t){const n=this;let s;return ie(t,(o,r)=>{if(s=n._getItemByFieldPath(i.slice(),e,r),s)return!1}),s||(s=!1),s},_changeItemOption(i,e,t){We(i)&&(i[e]=t)},_dimensionChanged(){const i=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==i&&(this._isColCountChanged(this._lastMarkupScreenFactor,i)&&(this._targetScreenFactor=i,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=i)},_isColCountChanged(i,e){let t=!1;return ie(this._cachedColCountOptions,(n,s)=>{if(s.colCountByScreen[i]!==s.colCountByScreen[e])return t=!0,!1}),t},_refresh(){q.trigger(this.$element().find(".dx-state-focused > :not(.dx-dropdowneditor-input-wrapper) input, .dx-state-focused textarea"),"change"),this.callBase()},_updateIsDirty(i){const e=this.getEditor(i);e&&(e.option("isDirty")?this._dirtyFields.add(i):this._dirtyFields.delete(i),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor(i){this._itemsRunTimeInfo.each((e,t)=>{const{widgetInstance:n}=t;U(n)&&ns.isEditor(n)&&i(n)})},_clear(){this.updateRunTimeInfoForEachEditor(i=>{i.clear(),i.option("isValid",!0)}),Ft.resetGroup(this._getValidationGroup())},_updateData(i,e,t){const n=this,s=t?e:i;We(s)?ie(s,(o,r)=>{n._updateData(t?`${i}.${o}`:o,r,We(r))}):Ke(i)&&n._updateFieldValue(i,e)},registerKeyHandler(i,e){this.callBase(i,e),this._itemsRunTimeInfo.each((t,n)=>{U(n.widgetInstance)&&n.widgetInstance.registerKeyHandler(i,e)})},_focusTarget(){return this.$element().find(`.${If} [tabindex]`).first()},_visibilityChanged(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose(){this._clearAutoColCountChangedTimeout(),Ft.removeGroup(this._getValidationGroup()),this.callBase()},clear(){this._clear()},resetValues(){this._clear()},reset(i){this.updateRunTimeInfoForEachEditor(e=>{const t=e.option("name");i&&t in i?e.reset(i[t]):e.reset()}),this._renderValidationSummary()},updateData(i,e){this._updateData(i,e)},getEditor(i){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(i)||this._itemsRunTimeInfo.findWidgetInstanceByName(i)},getButton(i){return this._itemsRunTimeInfo.findWidgetInstanceByName(i)},updateDimensions(){const i=this,e=ae();return i._scrollable?i._scrollable.update().done(()=>{e.resolveWith(i)}):e.resolveWith(i),e.promise()},itemOption(i,e,t){const n=this._generateItemsFromData(this.option("items")),s=this._getItemByField(i,n),o=UE(n,s);if(s)switch(arguments.length){case 1:return s;case 3:{const r=this._tryCreateItemOptionAction(e,s,t,s[e],o);this._changeItemOption(s,e,t);const a=Ya(o,e);!this._tryExecuteItemOptionAction(r)&&!this._tryChangeLayoutManagerItemOption(a,t)&&this.option("items",n);break}default:if(We(e)&&!this._tryChangeLayoutManagerItemOptions(o,e)){let r;ie(e,(a,l)=>{const d=this._tryCreateItemOptionAction(a,s,l,s[a],o);this._changeItemOption(s,a,l),!r&&!this._tryExecuteItemOptionAction(d)&&(r=!0)}),r&&this.option("items",n)}}},validate(){return Ft.validateGroup(this._getValidationGroup())},getItemID(i){return`dx_${this.option("formID")}_${i||new hi}`},getTargetScreenFactor(){return this._targetScreenFactor}});wt("dxForm",Sg);const v$=i=>class extends i{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isEditRow(e){return!this.isPopupEditMode()&&super.isEditRow(e)}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isFormEditMode(){return this.option("editing.mode")===Cg}getFirstEditableColumnIndex(){const e=this._firstFormItem;if(this.isFormEditMode()&&e){const t=this.option(En),n=this._dataController.getRowIndexByKey(t),s=this._rowsView.getCellElements(n);return this._rowsView._getEditFormEditorVisibleIndex(s,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){const e=super._isEditColumnVisible(),t=this.option("editing");return this.isFormOrPopupEditMode()&&t.allowUpdating||e}_handleDataChanged(e){if(this.isPopupEditMode()){var t,n;const s=this.option("editing.editRowKey"),o=e==null||(t=e.items)===null||t===void 0?void 0:t.some(a=>zt(a.key,s)),r=((n=e.changeTypes)===null||n===void 0?void 0:n.length)&&e.changeTypes.every(a=>a==="insert");(e.changeType==="refresh"||o&&e.isOptionChanged)&&!r&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e;const t=(e=this._editPopup)===null||e===void 0?void 0:e.option("visible");if(this.isPopupEditMode()&&t)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,t,n){const s=this._editForm;if(this.isPopupEditMode())if(this.option("repaintChangesOnly")){var o;(o=e.update)===null||o===void 0||o.call(e,e),this._rowsView.renderDelayedTemplates()}else s&&(this._updateEditFormDeferred=new ae().done(()=>s.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve());else super._updateEditRowCore(e,t,n)}_showEditPopup(e,t){const n=Re.current().deviceType!=="desktop",s=this.addWidgetPrefix(J9),o=Y({showTitle:!1,fullScreen:n,wrapperAttr:{class:s},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(yc));if(!this._editPopup){const r=R("<div>").appendTo(this.component.$element()).addClass(s);this._editPopup=this._createComponent(r,io),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",a=>{if(q.trigger(a.component.$content().find(yg).not(`.${eL}`).first(),"focus"),t){var l;(l=this._editForm)===null||l===void 0||l.repaint()}})}this._editPopup.option(o),this._editPopup.show(),super._showEditPopup(e,t)}_getPopupEditFormTemplate(e){const t=this.component.getVisibleRows()[e],n={row:t,values:t.values,rowType:t.rowType,key:t.key,rowIndex:e};return this._rowsView._addWatchMethod(n,t),s=>{const o=this.getEditFormTemplate(),r=this._createComponent(R("<div>").appendTo(s),vn);this._$popupContent=R(r.content()),o(this._$popupContent,n,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),R(s).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){const e=this._getVisibleEditRowIndex();if(e>=0){var t,n;const s=(t=this._editPopup)===null||t===void 0?void 0:t.option("animation");(n=this._editPopup)===null||n===void 0||n.option("animation",null),this._showEditPopup(e,!0),s!==void 0&&this._editPopup.option("animation",s)}}_hideEditPopup(){var e;(e=this._editPopup)===null||e===void 0||e.option("visible",!1)}optionChanged(e){if(e.name==="editing"&&this.isFormOrPopupEditMode()){const{fullName:t}=e;t.indexOf(Xh)===0?(this._handleFormOptionChange(e),e.handled=!0):t.indexOf(yc)===0&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var t;if(this.isFormEditMode()){const n=this._getVisibleEditRowIndex();n>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[n]})}else(t=this._editPopup)!==null&&t!==void 0&&t.option("visible")&&e.fullName.indexOf(Xh)===0&&this._repaintEditPopup()}_handlePopupOptionChange(e){const t=this._editPopup;if(t){const n=e.fullName.slice(yc.length+1);n?t.option(n,e.value):t.option(e.value)}}renderFormEditorTemplate(e,t,n,s,o){const r=this,a=R(s),{column:l}=t,d=aL(t),c=e==null?void 0:e.row,h=c==null?void 0:c.data,u=n.component,p=l.calculateCellValue(h),f=Ce.getDisplayValue(l,p,h,c==null?void 0:c.rowType),{label:g,labelMark:m,labelMode:b}=n.editorOptions||{},_=Y({},e,{data:h,cellElement:null,isOnForm:!0,item:t,id:u.getItemID(t.name||t.dataField),column:Y({},l,{editorType:d,editorOptions:Y({label:g,labelMark:m,labelMode:b},l.editorOptions,t.editorOptions)}),columnIndex:l.index,setValue:!o&&l.allowEditing&&function(E,D){r.updateFieldValue(_,E,D)}});_.value=p,_.displayValue=f,_.text=l.command?"":Ce.formatValue(f,l);const w=this._getFormEditItemTemplate.bind(this)(_,l);return this._rowsView.renderTemplate(a,w,_,!!_u(a)).done(()=>{this._rowsView._updateCell(a,_)}),_}getFormEditorTemplate(e,t){const n=this.component.columnOption(t.name||t.dataField);return(s,o)=>{const r=R(o),{row:a}=e;if(a!=null&&a.watch){const l=a.watch(()=>n.selector(a.data),()=>{var d;let c=r.find(".dx-widget").first(),h=c.data("dxValidator");const u=(d=h)===null||d===void 0?void 0:d.option();r.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,t,s,r),c=r.find(".dx-widget").first(),h=c.data("dxValidator"),u&&!h&&c.dxValidator({validationRules:u.validationRules,validationGroup:u.validationGroup,dataGetter:u.dataGetter})});q.on(r,Rn,l)}e=this.renderFormEditorTemplate.bind(this)(e,t,s,r)}}getEditFormOptions(e){var t;const n=(t=this._getValidationGroupsInForm)===null||t===void 0?void 0:t.call(this,e),s=this.option("editing.form.customizeItem"),o=this.addWidgetPrefix(AE);let r=this.option("editing.form.items");const a={};if(r)RE(r,l=>{const d=(l==null?void 0:l.name)||(l==null?void 0:l.dataField);d&&(a[d]=!!l.editorType)});else{const l=this._columnsController.getColumns();r=[],ie(l,(d,c)=>{!c.isBand&&!c.type&&r.push({column:c,name:c.name,dataField:c.dataField})})}return Y({},n,{items:r,formID:`dx-${new hi}`,customizeItem:l=>{let d;const c=l.name||l.dataField;if((l.column||c)&&(d=l.column||this._columnsController.columnOption(l.name?`name:${l.name}`:`dataField:${l.dataField}`)),d){if(l.label=l.label||{},l.label.text=l.label.text||d.caption,d.dataType==="boolean"&&l.label.visible===void 0){const u=this.option("editing.form.labelMode");(u==="floating"||u==="static")&&(l.label.visible=!0)}l.template=l.template||this.getFormEditorTemplate(e,l),l.column=d,l.isCustomEditorType=a[c],d.formItem&&Y(l,d.formItem),l.isRequired===void 0&&d.validationRules&&(l.isRequired=d.validationRules.some(u=>u.type==="required"),l.validationRules=[]);const h=U(l.visible)?l.visible:!0;!this._firstFormItem&&h&&(this._firstFormItem=l)}s==null||s.call(this,l),l.cssClass=Ke(l.cssClass)?`${l.cssClass} ${o}`:o}})}getEditFormTemplate(){return(e,t,n)=>{const s=this.option(Xh),o=this.getEditFormOptions(t),r=R("<div>").appendTo(e),a=n==null?void 0:n.isPopupForm;if(this._firstFormItem=void 0,a&&r.addClass(this.addWidgetPrefix(Q9)),this._editForm=this._createComponent(r,Sg,Y({},s,o)),!a){const l=R("<div>").addClass(this.addWidgetPrefix(iL)).appendTo(e);this._createComponent(R("<div>").appendTo(l),$i,this._getSaveButtonConfig()),this._createComponent(R("<div>").appendTo(l),$i,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var l;this._rowsView.renderDelayedTemplates(),(l=this._editPopup)===null||l===void 0||l.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;(e=this._updateEditFormDeferred)===null||e===void 0||e.resolve()}_beforeEndSaving(e){if(super._beforeEndSaving(e),this.isPopupEditMode()){var t;(t=this._editPopup)===null||t===void 0||t.hide()}}_processDataItemCore(e,t,n,s,o){const{type:r}=t;this.isPopupEditMode()&&r===cs&&(e.visible=!1),super._processDataItemCore(e,t,n,s,o)}_editRowFromOptionChangedCore(e,t){const n=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,t,n),n&&this._showEditPopup(t)}},y$=i=>class extends i{_updateEditItem(e){this._editingController.isFormEditMode()&&(e.rowType="detail")}_getChangedColumnIndices(e,t,n,s){if(!(s===!1&&t.isEditing&&this._editingController.isFormEditMode()))return super._getChangedColumnIndices.apply(this,arguments)}},C$=i=>class extends i{_renderCellContent(e,t){t.rowType==="data"&&this._editingController.isPopupEditMode()&&t.row.visible===!1||super._renderCellContent.apply(this,arguments)}getCellElements(e){const t=super.getCellElements(e),n=this._editingController,s=n.getEditForm();return n.getEditFormRowIndex()===e&&t&&s?s.$element().find(`.${this.addWidgetPrefix(AE)}, .${tL}`):t}_getVisibleColumnIndex(e,t,n){if(this._editingController.getEditFormRowIndex()===t&&Ke(n)){const o=this._columnsController.columnOption(n);return this._getEditFormEditorVisibleIndex(e,o)}return super._getVisibleColumnIndex.apply(this,arguments)}_getEditFormEditorVisibleIndex(e,t){let n=-1;return ie(e,(s,o)=>{const r=R(o).find(".dx-field-item-content").data("dx-form-item");if(r!=null&&r.column&&t&&r.column.index===t.index)return n=s,!1}),n}_isFormItem(e){const t=e.rowType==="detail"||e.rowType==="detailAdaptive",n=e.rowType==="data"&&this._editingController.isPopupEditMode();return(t||n)&&e.item}_updateCell(e,t){this._isFormItem(t)?this._formItemPrepared(t,e):super._updateCell(e,t)}_updateContent(){const e=this._editingController,t=e.getEditForm(),n=t==null?void 0:t.option("validationGroup");return super._updateContent.apply(this,arguments).done(()=>{const o=e.getEditForm();n&&o&&o!==t&&o.option("validationGroup",n)})}},x$={extenders:{controllers:{editing:v$,data:y$},views:{rowsView:C$}}};He.registerModule("editingFormBased",x$);const w$=i=>class extends i{init(){const e=!this._saveEditorHandler;if(super.init(),e){let t,n;this._pointerUpEditorHandler=()=>{var s;n=(s=this._columnsResizerController)===null||s===void 0?void 0:s.isResizing()},this._pointerDownEditorHandler=s=>t=R(s.target),this._saveEditorHandler=this.createAction(function(s){const{event:o}=s,r=R(o.target),a=o[TE],{component:l}=this;if(rL(t)&&!t.is(r))return;function d(c){if(!c)return!1;const h=c.closest(`.${U9}`),u=l.$element();return h.length>0&&u.closest(h).length===0}if(this.isCellOrBatchEditMode()&&!this._editCellInProgress){const c=d(r)||d(a==null?void 0:a.$element()),h=a&&!a._disposed&&a!==this.component,u=!!r.closest(`.${this.addWidgetPrefix(G9)}`).length,p=r.hasClass(this.addWidgetPrefix(K9)),f=this.isCellEditMode();!n&&!c&&!p&&!(u&&f&&this.isEditing())&&(_u(r)||h)&&this._closeEditItem.bind(this)(r)}}),q.on(_e.getDocument(),Ct.up,this._pointerUpEditorHandler),q.on(_e.getDocument(),Ct.down,this._pointerDownEditorHandler),q.on(_e.getDocument(),kt,this._saveEditorHandler)}}isCellEditMode(){return this.option("editing.mode")===Ef}isBatchEditMode(){return this.option("editing.mode")===nu}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){const t=this.component.$element();let n=this.isEditing();if((!t||!!e.closest(t).length)&&e.closest(`.${q9}`).length){const a=e.closest(`.${po}> td`),l=this._rowsView.getRowIndex(a.parent()),d=this._rowsView.getCellElements(l);if(d!=null&&d.length){var o;const c=d.index(a),u=(o=this._columnsController.getVisibleColumns()[c])===null||o===void 0?void 0:o.allowEditing,p=this.isEditCell(l,c);n=n&&!u&&!p}}return n||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var e;const t=this._getVisibleEditColumnIndex(),n=(e=this._rowsView)===null||e===void 0?void 0:e._getCellElement(this._getVisibleEditRowIndex(),t);this._refocusEditCell=!1,clearTimeout(this._inputFocusTimeoutID),n&&!n.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},n,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){const e=U(this.option(En)),t=U(this.option(tr));return e&&t}return super.isEditing()}_handleEditColumnNameChange(e){const t=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&t!==-1&&U(e.value)&&e.value!==e.previousValue){const n=this._columnsController.getVisibleColumnIndex(e.value),s=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(n,s,t)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){const t=new ae;return this.saveEditData().done(()=>{this.hasChanges()?t.reject("cancel"):this.addRow(e).done(t.resolve).fail(t.reject)}),t.promise()}return super._addRow(e)}editCell(e,t){return this._editCell({rowIndex:e,columnIndex:t})}_editCell(e){const t=new ae;let n;return this.executeOperation(t,()=>{n=this._editCellCore(e),De(n).done(t.resolve).fail(t.reject)}),n!==void 0?n:t.promise()}_editCellCore(e){const t=this._dataController,n=U(e.oldColumnIndex)||U(e.oldRowIndex),{columnIndex:s,rowIndex:o,column:r,item:a}=this._getNormalizedEditCellOptions(e),l={data:a==null?void 0:a.data,cancel:!1,column:r};if(a.key===void 0){this._dataController.fireError("E1043");return}if(r&&(a.rowType==="data"||a.rowType==="detailAdaptive")&&!a.removed&&this.isCellOrBatchEditMode()){if(!n&&this.isEditCell(o,s))return!0;const d=o+t.getRowIndexOffset();return De(this._beforeEditCell(o,s,a)).done(c=>{c||this._prepareEditCell(l,a,s,d)||this._processCanceledEditingCell()})}return!1}_beforeEditCell(e,t,n){if(this.isCellEditMode()&&!n.isNewRow&&this.hasChanges()){const s=new ae;return this.saveEditData().always(()=>{s.resolve(this.hasChanges())}),this.addDeferred(s),s}return!1}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){let{oldColumnIndex:t,oldRowIndex:n,columnIndex:s,rowIndex:o}=e;const r=this._columnsController,a=r.getVisibleColumns(),d=this._dataController.items()[o];let c;U(t)?c=a[t]:c=this._getEditColumn(),U(n)||(n=this._getVisibleEditRowIndex()),Ke(s)&&(s=r.columnOption(s,"index"),s=r.getVisibleIndex(s));const h=a[s];return{oldColumn:c,columnIndex:s,oldRowIndex:n,rowIndex:o,column:h,item:d}}_prepareEditCell(e,t,n,s){return t.isNewRow||(e.key=t.key),this._isEditingStart(e)?!1:(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(t.key),this._setEditColumnNameByIndex(n),e.column.showEditorAlways||this._addInternalData({key:t.key,oldData:t.oldData??t.data}),!0)}closeEditCell(e,t){let n=De();const s=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){const o=new ae;n=new ae,this.executeOperation(o,()=>{this._closeEditCellCore(e,s,t).always(n.resolve)})}return n.promise()}_closeEditCellCore(e,t,n){const s=this._dataController,o=new ae,r=o.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!n)return this.saveEditData().done(a=>{if(!this.hasChanges()){this.closeEditCell(!!a).always(o.resolve);return}o.resolve()}),r}else if(this._resetEditRowKey(),this._resetEditColumnName(),t>=0){const a=[t];this._beforeCloseEditCellInBatchMode(a),e||s.updateItems({changeType:"update",rowIndices:a})}return o.resolve(),r}_resetModifiedClassCells(e){if(this.isBatchEditMode()){const t=this._columnsController.getVisibleColumns().length;e.forEach(n=>{let{key:s}=n;const o=this._dataController.getRowIndexByKey(s);for(let r=0;r<t;r++){const a=this._rowsView._getCellElement(o,r);a==null||a.removeClass(x9)}})}}_prepareChange(e,t,n){const s=R(e.cellElement);return this.isBatchEditMode()&&e.key!==void 0&&this._applyModified(s,e),super._prepareChange(e,t,n)}_cancelSaving(e){const t=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),t.updateItems()),super._cancelSaving(e)}optionChanged(e){const{fullName:t}=e;e.name==="editing"&&t===tr?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,t,n){const s=this._columnsController.getVisibleColumns();e>-1&&Di(()=>{this._repaintEditCell(s[e],s[t],n)})}_handleEditRowKeyChange(e){if(this.isCellOrBatchEditMode()){const n=this._getVisibleEditColumnIndex(),s=this._getEditRowIndexCorrection(),o=this._dataController.getRowIndexByKey(e.previousValue)+s;if(U(e.value)&&e.value!==e.previousValue){var t;(t=this._editCellFromOptionChanged)===null||t===void 0||t.call(this,n,n,o)}}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){const{isNewRow:t}=this._dataController.items()[e],n=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,t).always(()=>{e=this._dataController.getRowIndexByKey(n),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){const{isPageChanged:t}=e??{},n=this.isBatchEditMode()||t&&this.option("scrolling.mode")!=="virtual";this.isCellOrBatchEditMode()?n&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return this.isBatchEditMode()?!0:super._allowRowAdding(e)}_afterDeleteRow(e,t){const n=this._dataController;return this.isBatchEditMode()?(n.updateItems({changeType:"update",rowIndices:[t,e]}),new ae().resolve()):super._afterDeleteRow(e,t)}_updateEditRow(e,t,n){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,t,n):super._updateEditRow(e,t,n)}_isDefaultButtonVisible(e,t){if(this.isCellOrBatchEditMode()){const n=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,t)&&(!n||!t.row.removed);case"undelete":return n&&this.allowDeleting(t)&&t.row.removed;default:return super._isDefaultButtonVisible(e,t)}}return super._isDefaultButtonVisible(e,t)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(e){if(this.isCellEditMode()){var t;((t=e[0])===null||t===void 0?void 0:t.type)!=="update"&&super._beforeEndSaving(e)}else this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e)}prepareEditButtons(e){const t=this.option("editing")??{},n=super.prepareEditButtons(e);return(t.allowUpdating||t.allowAdding||t.allowDeleting)&&this.isBatchEditMode()&&(n.push(this.prepareButtonItem(e,"save","saveEditData",21)),n.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),n}_saveEditDataInner(){var e;const t=this._dataController.getVisibleRows()[this.getEditRowIndex()],n=this._getEditColumn(),s=n==null?void 0:n.showEditorAlways,o=this.isCellEditMode()&&!(t!=null&&t.isNewRow);let r;return o&&s&&(r=new ae,this.addDeferred(r)),super._saveEditDataInner().always((e=r)===null||e===void 0?void 0:e.resolve)}_applyChange(e,t,n){const s=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:o}=e.column,r=e.column.setCellValue!==e.column.defaultSetCellValue;if(o&&!n&&s&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex)){this._focusEditingCell(),this._updateEditRow(e.row,!0,r);return}return super._applyChange(e,t,n)}_applyChangeCore(e,t){const{showEditorAlways:n}=e.column,s=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(n&&!t){if(s)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return t=this._needUpdateRow(e.column),super._applyChangeCore(e,t)}return super._applyChangeCore(e,t)}_processDataItemCore(e,t,n,s,o){const{data:r,type:a}=t;this.isBatchEditMode()&&a===Ps&&(e.data=vo(e.data,r)),super._processDataItemCore(e,t,n,s,o)}_processRemoveCore(e,t,n){if(!(this.isBatchEditMode()&&!n))return super._processRemoveCore(e,t,n)}_processRemoveIfError(e,t){if(!this.isBatchEditMode())return super._processRemoveIfError(e,t)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);const t=e>=0?e:0,n=this.getFirstEditableColumnIndex();n>=0&&this.editCell(t,n)}},S$=i=>class extends i{_createTable(){const e=super._createTable.apply(this,arguments),t=this._editingController;return t.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&q.on(e,be(Ao.name,"dxDataGridRowsView"),`td:not(.${zu})`,this.createAction(()=>{t.isEditing()&&t.closeEditCell()})),e}_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const n=this._editingController,s=!!e.removed;n.isBatchEditMode()&&s&&t.addClass(Y9)}return t}},E$=i=>class extends i{isVisible(){const e=this._editingController.option("editing");return super.isVisible()||e&&(e.allowUpdating||e.allowDeleting)&&e.mode===nu}},I$={extenders:{controllers:{editing:w$},views:{rowsView:S$,headerPanel:E$}}};He.registerModule("editingCellBased",I$);const yy="__DX_INSERT_INDEX__",qE="row",Cc="batch",da="cell",YE=["popup","form"],gn={valid:"valid",invalid:"invalid",pending:"pending"},Xa=function(i){return U(i)&&i!=="cancel"},XE=function(i,e){return i!==void 0||i===void 0&&e&&!e.isNewRow};class T$ extends Yt.Controller{constructor(){super(...arguments),this._isValidationInProgress=!1,this._disableApplyValidationResults=!1}init(){this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._columnsController=this.getController("columns"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()}initValidationState(){this._validationState=[],this._validationStateCache={}}_rowIsValidated(e){const t=this._getValidationData(e==null?void 0:e.key);return!!t&&!!t.validated}_getValidationData(e,t){const n=ys(e),s=We(n);let o;return s?o=this._validationState.filter(r=>zt(r.key,e))[0]:o=this._validationStateCache[n],!o&&t&&(o={key:e,isValid:!0},this._validationState.push(o),s||(this._validationStateCache[n]=o)),o}_getBrokenRules(e,t){let n;return t?n=t.brokenRules||t.brokenRule&&[t.brokenRule]:n=e.brokenRules||[],n}_rowValidating(e,t){const n=new ae,s=this._editingController.getChangeByKey(e==null?void 0:e.key),o=this._getBrokenRules(e,t),r=t?t.isValid:e.isValid,a={brokenRules:o,isValid:r,key:s.key,newData:s.data,oldData:this._editingController._getOldData(s.key),promise:null,errorText:this.getHiddenValidatorsErrorText(o)};return this.executeAction("onRowValidating",a),De(Pi(a.promise)).always(()=>{e.isValid=a.isValid,e.errorText=a.errorText,n.resolve(a)}),n.promise()}getHiddenValidatorsErrorText(e){const t=[];return ie(e,(n,s)=>{const{column:o}=s,r=o&&o.groupIndex!==void 0&&!o.showWhenGrouped,a=o&&o.visible;!s.validator.$element().parent().length&&(!a||r)&&t.push(s.message)}),t.join(", ")}validate(e){let t=!0;const n=this._editingController,s=new ae,o=[],r=n.getEditMode();if(e=e||r===qE,this._isValidationInProgress)return s.resolve(!1).promise();if(this._isValidationInProgress=!0,e){n.addDeferred(s);const a=n.getChanges();ie(a,(l,d)=>{let{type:c,key:h}=d;if(c!=="remove"){const u=this._getValidationData(h,!0),p=this.validateGroup(u);o.push(p),p.done(f=>{u.validated=!0,t=t&&f.isValid})}})}else if(this._currentCellValidator){const a=this.validateGroup(this._currentCellValidator._findGroup());o.push(a),a.done(l=>{t=l.isValid})}return De(...o).done(()=>{this._isValidationInProgress=!1,s.resolve(t)}),s.promise()}validateGroup(e){var t;const n=new ae,s=e&&Ft.getGroupConfig(e);let o;return s!=null&&s.validators.length&&(this.resetRowValidationResults(e),o=Ft.validateGroup(e)),De(((t=o)===null||t===void 0?void 0:t.complete)||o).done(r=>{De(this._rowValidating(e,r)).done(n.resolve)}),n.promise()}isRowDataModified(e){return!cn(e.data)}updateValidationState(e){const t=this._editingController.getEditMode(),{key:n}=e,s=this._getValidationData(n,!0);if(YE.includes(t))s.isValid=!0;else{if(e.type==="insert"&&!this.isRowDataModified(e)){s.isValid=!0;return}if(this.setDisableApplyValidationResults(!0),Ft.getGroupConfig(s)){const r=Ft.validateGroup(s);De(r.complete||r).done(a=>{s.isValid=a.isValid,s.brokenRules=a.brokenRules})}else(!s.brokenRules||!s.brokenRules.length)&&(s.isValid=!0);this.setDisableApplyValidationResults(!1)}}setValidator(e){this._currentCellValidator=e}renderCellPendingIndicator(e){let t=e.find(".dx-pending-indicator");if(!t.length){const n=e;t=R("<div>").appendTo(n).addClass("dx-pending-indicator"),this._createComponent(t,An),e.addClass("dx-validation-pending")}}disposeCellPendingIndicator(e){const t=e.find(".dx-pending-indicator");if(t.length){const n=An.getInstance(t);n&&(n.dispose(),n.$element().remove()),e.removeClass("dx-validation-pending")}}validationStatusChanged(e){const{validator:t}=e,n=t.option("validationGroup"),{column:s}=t.option("dataGetter")();this.updateCellValidationResult({rowKey:n.key,columnIndex:s.index,validationResult:e})}validatorInitialized(e){e.component.on("validating",this.validationStatusChanged.bind(this)),e.component.on("validated",this.validationStatusChanged.bind(this))}validatorDisposing(e){const t=e.component,n=t.option("validationGroup"),{column:s}=t.option("dataGetter")(),o=this.getCellValidationResult({rowKey:n==null?void 0:n.key,columnIndex:s.index});Xa(o)&&o.status===gn.pending&&this.cancelCellValidationResult({change:n,columnIndex:s.index})}applyValidationResult(e,t){const{validator:n}=t,s=n.option("validationGroup"),{column:o}=n.option("dataGetter")();if(t.brokenRules&&t.brokenRules.forEach(r=>{r.columnIndex=o.index,r.column=o}),e){const r=this.getCellValidationResult({rowKey:s.key,columnIndex:o.index}),a=Xa(r)&&r.disabledPendingId===t.id;if(this._disableApplyValidationResults||a)return;if(t.status===gn.invalid){const d=e.find(":focus");To(d)||(q.trigger(d,"focus"),q.trigger(d,Ct.down))}const l=!o.editCellTemplate&&this._editorFactoryController.getEditorInstance(e);t.status===gn.pending?l?l.option("validationStatus",gn.pending):this.renderCellPendingIndicator(e):l?l.option("validationStatus",gn.valid):this.disposeCellPendingIndicator(e),e.toggleClass(this.addWidgetPrefix("invalid"),t.status===gn.invalid)}}_syncInternalEditingData(e){var t;const n=this._editingController,s=n.getChangeByKey(e.key),o=n._getOldData(e.key),r=(t=e.row)===null||t===void 0?void 0:t.oldData;s&&r&&!o&&n._addInternalData({key:e.key,oldData:r})}createValidator(e,t){const n=this._editingController,{column:s}=e;let{showEditorAlways:o}=s;if(U(s.command)||!s.validationRules||!Array.isArray(s.validationRules)||!s.validationRules.length)return;let a=n.getIndexByKey(e.key,n.getChanges())>-1;if(!a){if(!o){var l;o=(((l=this._columnsController)===null||l===void 0?void 0:l.getVisibleColumns())||[]).some(p=>p.showEditorAlways)}const c=zt(this.option("editing.editRowKey"),e.key),h=n.isCellOrBatchEditMode()&&n.allowUpdating({row:e.row});if(a=c||h&&o,h&&o){var d;n._addInternalData({key:e.key,oldData:((d=e.row)===null||d===void 0?void 0:d.oldData)??e.data})}}if(a){if(t&&!t.length){mt.log("E1050");return}this._syncInternalEditingData(e);const c=this._getValidationData(e.key,!0),h=()=>{const f=n.getChangeByKey(c==null?void 0:c.key),g=s.calculateCellValue((f==null?void 0:f.data)||{});return g!==void 0?g:e.value},u=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix("validator"));const p=new Wu(t||R("<div>"),{name:s.caption,validationRules:Y(!0,[],s.validationRules),validationGroup:c,adapter:u?null:{getValue:h,applyValidationResults:f=>{this.applyValidationResult(t,f)}},dataGetter(){const f=c==null?void 0:c.key,g=n.getChangeByKey(f),m=n._getOldData(f);return{data:vo(m,g==null?void 0:g.data),column:s}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(u){const f=p.option("adapter");if(f){const g=f.bypass,m=()=>e.row.isNewRow&&!this._isValidationInProgress&&!n.isCellModified(e);f.getValue=h,f.validationRequestsCallbacks=[],f.bypass=()=>g.call(f)||m()}}return p}}setDisableApplyValidationResults(e){this._disableApplyValidationResults=e}getDisableApplyValidationResults(){return this._disableApplyValidationResults}isCurrentValidatorProcessing(e){let{rowKey:t,columnIndex:n}=e;return this._currentCellValidator&&zt(this._currentCellValidator.option("validationGroup").key,t)&&this._currentCellValidator.option("dataGetter")().column.index===n}validateCell(e){const t={rowKey:e.option("validationGroup").key,columnIndex:e.option("dataGetter")().column.index,validationResult:null};let n=this.getCellValidationResult(t);const s=Xa(n),o=e.option("adapter");if(!s)n=e.validate();else{const a=o.getValue();zt(a,n.value)||(n=e.validate())}const r=new ae;return s&&n.status===gn.pending&&(this.updateCellValidationResult(t),o.applyValidationResults(n)),De(n.complete||n).done(a=>{s&&o.applyValidationResults(a),r.resolve(a)}),r.promise()}updateCellValidationResult(e){let{rowKey:t,columnIndex:n,validationResult:s}=e;const o=this._getValidationData(t);if(!o)return;o.validationResults||(o.validationResults={});let r;if(s){if(r=Y({},s),o.validationResults[n]=r,s.status===gn.pending&&(this._editingController.getEditMode()===da&&(r.deferred=new ae,r.complete.always(()=>{r.deferred.resolve()}),this._editingController.addDeferred(r.deferred)),this._disableApplyValidationResults)){r.disabledPendingId=s.id;return}}else r=o.validationResults[n];r&&r.disabledPendingId&&delete r.disabledPendingId}getCellValidationResult(e){var t;let{rowKey:n,columnIndex:s}=e;const o=this._getValidationData(n,!0);return o==null||(t=o.validationResults)===null||t===void 0?void 0:t[s]}removeCellValidationResult(e){let{change:t,columnIndex:n}=e;const s=this._getValidationData(t==null?void 0:t.key);s&&s.validationResults&&(this.cancelCellValidationResult({change:t,columnIndex:n}),delete s.validationResults[n])}cancelCellValidationResult(e){let{change:t,columnIndex:n}=e;const s=this._getValidationData(t.key);if(t&&s.validationResults){const o=s.validationResults[n];o&&(o.deferred&&o.deferred.reject("cancel"),s.validationResults[n]="cancel")}}resetRowValidationResults(e){e&&(e.validationResults&&delete e.validationResults,delete e.validated)}isInvalidCell(e){let{rowKey:t,columnIndex:n}=e;const s=this.getCellValidationResult({rowKey:t,columnIndex:n});return Xa(s)&&s.status===gn.invalid}getCellValidator(e){let{rowKey:t,columnIndex:n}=e;const s=this._getValidationData(t),o=s&&Ft.getGroupConfig(s),r=o&&o.validators;return r&&r.filter(a=>{const{column:l}=a.option("dataGetter")();return l?l.index===n:!1})[0]}setCellValidationStatus(e){const t=this.getCellValidationResult({rowKey:e.key,columnIndex:e.column.index});U(t)?e.validationStatus=t!=="cancel"?t.status:"cancel":delete e.validationStatus}}const D$=i=>class extends i{processDataItemTreeListHack(e){super.processDataItem.apply(this,arguments)}processItemsTreeListHack(e,t){return super.processItems.apply(this,arguments)}_addChange(e){const t=super._addChange.apply(this,arguments);return t&&e.type!=="remove"&&this._validatingController.updateValidationState(t),t}_handleChangesChange(e){super._handleChangesChange.apply(this,arguments),e.value.forEach(t=>{this._validatingController._getValidationData(t.key)===void 0&&this._validatingController.updateValidationState(t)})}_updateRowAndPageIndices(){const e=this,t=e.getView("rowsView").getTopVisibleItemIndex();let n=t;ie(e.getChanges(),(s,o)=>{let{key:r,type:a}=o;const l=this._validatingController._getValidationData(r);l&&!l.isValid&&l.pageIndex!==e._pageIndex&&(l.pageIndex=e._pageIndex,a==="insert"?l.rowIndex=t:l.rowIndex=n,n++)})}_getValidationGroupsInForm(e){return{validationGroup:this._validatingController._getValidationData(e.key,!0)}}_validateEditFormAfterUpdate(e,t){t&&this._editForm&&this._editForm.validate(),super._validateEditFormAfterUpdate.apply(this,arguments)}_prepareEditCell(e){const t=super._prepareEditCell.apply(this,arguments);return t&&e.column.showEditorAlways&&this._validatingController.updateValidationState({key:e.key}),t}processItems(e,t){const n=this.getChanges(),s=(r,a)=>{let l=-1;const d=r.type==="insert",{key:c}=r;return ie(a,(h,u)=>{if(zt(c,d?u.key:this._dataController.keyOf(u)))return l=h,!1}),l};e=super.processItems(e,t);const o=e.length;return this.getEditMode()===Cc&&t!=="prepend"&&t!=="append"&&n.forEach(r=>{const{key:a}=r,l=this._validatingController._getValidationData(a);l&&r.type&&l.pageIndex===this._pageIndex&&(r==null?void 0:r.pageIndex)!==this._pageIndex&&function(d,c){const h={key:d.key};if(s(d,e)>=0)return;c.rowIndex=c.rowIndex>o?c.rowIndex%o:c.rowIndex;const{rowIndex:p}=c;h[yy]=1,e.splice(p,0,h)}(r,l)}),e}processDataItem(e){const t=e.data[yy],n=t?e.data.key:e.key;if(this.getEditMode()===Cc&&t&&n){const o=this.getChanges(),r=Ce.getIndexByKey(n,o);if(r>=0){const a=o[r];if(a.type!=="insert"){const l=this._getOldData(a.key);e.data=Y(!0,{},l,a.data),e.key=n}}}super.processDataItem.apply(this,arguments)}_createInvisibleColumnValidators(e){const t=this,n=this._columnsController.getColumns(),s=this._columnsController.getInvisibleColumns().filter(l=>!l.isBand),o=this._columnsController.getGroupColumns().filter(l=>!l.showWhenGrouped&&s.indexOf(l)===-1),r=[],a=(l,d)=>this._dataController.getRowIndexByKey(d)>=0&&s.indexOf(l)<0;return s.push(...o),YE.includes(this.getEditMode())||ie(n,(l,d)=>{e.forEach(c=>{let h;if(!a(d,c.key)){if(c.type==="insert")h=c.data;else if(c.type==="update"){const u=t._getOldData(c.key);if(!U(u))return;h=vo(u,c.data)}if(h){const u=this._validatingController.createValidator({column:d,key:c.key,value:d.calculateCellValue(h)});u&&r.push(u)}}})}),function(){r.forEach(l=>{l.dispose()})}}_beforeSaveEditData(e,t){let n=super._beforeSaveEditData.apply(this,arguments);const s=this._validatingController._getValidationData(e==null?void 0:e.key);if(e){const o=e.type==="remove"||s.isValid;n=n||!o}else{const o=this._createInvisibleColumnValidators(this.getChanges());n=new ae,this.executeOperation(n,()=>{this._validatingController.validate(!0).done(r=>{switch(o(),this._updateRowAndPageIndices(),this.getEditMode()){case da:r||this._focusEditingCell();break;case Cc:r||(this._resetEditRowKey(),this._resetEditColumnName(),this._dataController.updateItems())}n.resolve(!r)})})}return n.promise?n.promise():n}_beforeEditCell(e,t,n){const s=super._beforeEditCell(e,t,n);if(this.getEditMode()===da){const o=this._rowsView._getCellElement(e,t),r=o&&o.data("dxValidator"),a=o&&o.closest(".dx-row").data("options"),l=r&&r.option("adapter").getValue();if(r&&XE(l,a)){const d=new ae;return De(this._validatingController.validateCell(r),s).done((c,h)=>{d.resolve(c.status===gn.valid&&h)}),d.promise()}if(!r)return s}return!1}_afterSaveEditData(e){let t;const n=this.getEditMode()===da;if(ie(this.getChanges(),(s,o)=>{const r=this._showErrorRow(o);t=t||r}),t){const s=this._rowsView.getScrollable();s&&(s.update(),s.scrollToElement(t))}if(e&&n&&this._needUpdateRow()){const s=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[s]}),this._focusEditingCell()}else if(!e){let s=!0;n&&(s=!(this._columnsController.getColumns().filter(a=>{var l;return a.showEditorAlways&&((l=a.validationRules)===null||l===void 0?void 0:l.length)>0}).length>0)),s&&this._validatingController.initValidationState()}}_handleDataChanged(e){const t=this._validatingController._validationState;this.option("scrolling.mode")==="standard"&&this.resetRowAndPageIndices(),e.changeType==="prepend"&&ie(t,(n,s)=>{s.rowIndex+=e.items.length}),super._handleDataChanged(e)}resetRowAndPageIndices(){const e=this._validatingController._validationState;ie(e,(t,n)=>{n.pageIndex!==this._pageIndex&&(delete n.pageIndex,delete n.rowIndex)})}_beforeCancelEditData(){this._validatingController.initValidationState(),super._beforeCancelEditData()}_showErrorRow(e){let t;const n=this._dataController.items(),s=this.getIndexByKey(e.key,n),o=this._validatingController._getValidationData(e.key);if(!(o!=null&&o.isValid)&&o!==null&&o!==void 0&&o.errorText&&s>=0)return t=this.getPopupContent(),this._errorHandlingController&&this._errorHandlingController.renderErrorRow(o==null?void 0:o.errorText,s,t)}updateFieldValue(e){const t=new ae;return this._validatingController.removeCellValidationResult({change:this.getChangeByKey(e.key),columnIndex:e.column.index}),super.updateFieldValue.apply(this,arguments).done(()=>{const n=this._validatingController.getCellValidator({rowKey:e.key,columnIndex:e.column.index});De(n&&this._validatingController.validateCell(n)).done(s=>{this._editorFactoryController.refocus(),t.resolve(s)})}),t.promise()}highlightDataCell(e,t){super.highlightDataCell.apply(this,arguments),this._validatingController.setCellValidationStatus(t);const n=!!t.setValue,s=this.isCellModified(t),o=U(t.validationStatus);if(s&&t.column.setCellValue||n&&!s&&!(t.row.isNewRow||!o)){const a=e.data("dxValidator");a&&De(this._validatingController.validateCell(a)).done(()=>{this._validatingController.setCellValidationStatus(t)})}}getChangeByKey(e){const t=this.getChanges();return t[Ce.getIndexByKey(e,t)]}isCellModified(e){const t=super.isCellModified(e),n=this.getChangeByKey(e.key),s=!!e.row&&this._validatingController.isInvalidCell({rowKey:e.key,columnIndex:e.column.index});return t||this._validatingController._rowIsValidated(n)&&s}},A$=function(i,e){const t=R(e).closest("tr").index(),n=R(i._rowsView.getRowElement(t)).first().children().filter(":not(.dx-hidden-cell)");return i._rowsView._getWidths(n).reduce((s,o)=>s+o,0)},k$=function(i){let e,t;return i.some((n,s)=>{if(n.command==="transparent")return e=s===0?-1:s,t=s===i.length-1?-1:s+n.colspan-1,!0}),{startColumnIndex:e,endColumnIndex:t}},O$=i=>class extends i{_showRevertButton(e){var t,n;let s=(t=this._revertTooltip)===null||t===void 0?void 0:t.$element();if(!e||!e.length){var o;(o=s)===null||o===void 0||o.remove(),this._revertTooltip=void 0;return}if(e.find(s).length)return;const r=e.closest(`.${this.addWidgetPrefix("content")}`).parent(),a=this.addWidgetPrefix("revert-tooltip");(n=s)===null||n===void 0||n.remove(),s=R("<div>").addClass(a).appendTo(e);const l={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:r,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:a},contentTemplate:()=>{const d=R("<div>").addClass("dx-revert-button"),c={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),elementAttr:{id:"dxRevertButton","aria-label":re.format("dxDataGrid-ariaRevertButton")},onClick:()=>{this._editingController.cancelEditData()}};return new $i(d,c).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:e},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new is(s,l)}_hideFixedGroupCell(e,t){let n,s;const o=this._rowsView.isFixedColumns(),r=this._editingController.isFormOrPopupEditMode();if(o&&!r){const a=e.closest(".dx-row").next().data("options");a&&a.rowType==="group"&&(n=R(this._rowsView.getRowElement(a.rowIndex)).last(),s=n.find(".dx-group-cell"),s.length&&s.get(0).style.visibility!=="hidden"&&(s.css("visibility","hidden"),t.onDisposing=function(){s.css("visibility","")}))}}_positionedHandler(e,t){if(!e.component.__skipPositionProcessing){const n=R(e.element).hasClass(this.addWidgetPrefix("revert-tooltip")),s=!n&&this._rowsView.updateFreeSpaceRowHeight(),o=this._normalizeValidationMessagePositionAndMaxWidth(e,n,t);e.component.__skipPositionProcessing=!!(s||o),o?e.component.option(o):s&&e.component.repaint()}}_showValidationMessage(e,t,n){var s;const o=e.find(".dx-dropdowneditor-overlay").data("dxPopup"),r=o&&o.option("visible"),a=r?"top right":`top ${n}`,l=r?"top left":`bottom ${n}`,c=((s=this._columnsController.getFixedColumns())===null||s===void 0?void 0:s.length)>0?this.getView("rowsView").element():e.closest(`.${this.addWidgetPrefix("content")}`);let h="";t&&t.forEach(g=>{h+=(h.length?"<br/>":"")+mC(g)});const u=this.addWidgetPrefix("invalid-message");this._rowsView.element().find(`.${u}`).remove();const p=R("<div>").addClass("dx-invalid-message").addClass("dx-invalid-message-always").addClass(u).html(h).appendTo(e),f={container:c,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{id:"dxInvalidMessage",class:`dx-invalid-message dx-invalid-message-always ${u}`},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!r&&Zt.mozilla?-1:0},my:a,at:l,of:e},onPositioned:g=>{this._positionedHandler(g,r),this._shiftValidationMessageIfNeed(g.component.$content(),e)}};this._hideFixedGroupCell(e,f),new is(p,f)}_hideValidationMessage(){var e;const t=(e=this._rowsView.element())===null||e===void 0?void 0:e.find(this._getValidationMessagesSelector());t==null||t.remove()}_normalizeValidationMessagePositionAndMaxWidth(e,t,n){const s=this._columnsController.getFixedColumns();if(!s||!s.length)return;let o;const r=!t&&A$(this,e.element),a=e.component.$content(),l=St(a,!0),d=!t&&l>r,c=this._rowsView.getCellIndex(R(e.element).closest("td")),h=k$(s);return!t&&(c===h.startColumnIndex||d)?o={collision:"none flip",my:"top left",at:n?"top right":"bottom left"}:c===h.endColumnIndex&&(o={collision:"none flip",my:"top right",at:t||n?"top left":"bottom right"},t&&(o.offset="-1 0")),o&&{position:o,maxWidth:d?r-2:void 0}}_shiftValidationMessageIfNeed(e,t){const n=this._revertTooltip&&this._revertTooltip.$content();if(!n)return;const s=e.offset(),o=n.offset();if(s.top===o.top&&s.left+Ge(e)>o.left){const r=Ge(n)+2;e.css("left",o.left<t.offset().left?-r:r)}}_getRevertTooltipsSelector(){return`.dx-editor-cell .${this.addWidgetPrefix("revert-tooltip")}`}_getValidationMessagesSelector(){const e=this.addWidgetPrefix("invalid-message");return`.dx-editor-cell .${e}, .dx-cell-modified .${e}`}loseFocus(e){e||this._validatingController.setValidator(null),super.loseFocus()}updateCellState(e,t,n){var s;const o=e==null?void 0:e.closest(this._getFocusCellSelector()),r=o!=null&&o.is("td")?o:null,a=o==null?void 0:o.closest(".dx-row").data("options"),l=a?this._editingController.getChangeByKey(a.key):null,d=r&&this._columnsController.getVisibleColumns()[r.index()],c=(l==null||(s=l.data)===null||s===void 0?void 0:s[d==null?void 0:d.name])!==void 0&&!this._editingController.isSaving(),h=[];if(this._editingController.getEditMode()===da&&((t==null?void 0:t.status)===gn.invalid||c?(this._showRevertButton(o),h.push("dxRevertButton")):this._revertTooltip&&this._revertTooltip.$element().remove()),t&&t.status===gn.invalid&&r&&d&&t&&t.brokenRules){const p=[];t.brokenRules.forEach(f=>{f.message&&p.push(f.message)}),p.length&&(this._showValidationMessage(o,p,d.alignment||"left"),h.push("dxInvalidMessage"))}this._updateAriaValidationAttributes(o,h),!n&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()}_updateAriaValidationAttributes(e,t){if(t.length===0)return;const n=this._editingController.getEditMode();if([da,Cc,qE].includes(n)){const o=this._getCurrentFocusElement(e);o.attr("aria-labelledby",t.join(" ")),o.attr("aria-invalid",!0)}}_getCurrentFocusElement(e){return this._editingController.isEditing()?e.find(vg).first():e}focus(e,t){if(!arguments.length)return super.focus();if(this._hideValidationMessage(),e!=null&&e.hasClass("dx-row")||e!=null&&e.hasClass("dx-master-detail-cell"))return super.focus(e,t);const n=e==null?void 0:e.closest(this._getFocusCellSelector()),s=n&&(n.data("dxValidator")||e.find(`.${this.addWidgetPrefix("validator")}`).eq(0).data("dxValidator")),o=n&&n.closest(".dx-row").data("options"),r=o?this._editingController.getChangeByKey(o.key):null;let a;if(s){this._validatingController.setValidator(s);const l=s.option("adapter").getValue();if(XE(l,o)||this._validatingController._rowIsValidated(r))return this._editingController.waitForDeferredOperations().done(()=>{this._rowsView.isElementInside(e)&&De(this._validatingController.validateCell(s)).done(c=>{a=c;const{column:h}=a.validator.option("dataGetter")();r&&h&&!this._validatingController.isCurrentValidatorProcessing({rowKey:r.key,columnIndex:h.index})||(!nn(un())&&a.status===gn.invalid&&(t=!0),this.updateCellState(e,a,t),super.focus.call(this,e,t))})}),super.focus(e,t)}return this.updateCellState(e,a,t),super.focus(e,t)}getEditorInstance(e){const t=e.find(".dx-texteditor").eq(0);return Ce.getWidgetInstance(t)}},R$=i=>class extends i{_getValidationStatus(e){return(Xa(e)?e.status:e)||gn.valid}_isCellChanged(e,t,n,s,o){var r,a;const l=(r=e.cells)===null||r===void 0?void 0:r[s],d=this._getValidationStatus({status:l==null?void 0:l.validationStatus}),c=this._validatingController.getCellValidationResult({rowKey:e.key,columnIndex:s}),h=this._validatingController._getValidationData(e.key),u=this._getValidationStatus(c),p=JSON.stringify(t.modifiedValues)!==JSON.stringify(e.modifiedValues),f=d!==u&&p,g=R(l==null?void 0:l.cellElement).hasClass(this.addWidgetPrefix("invalid")),m=l==null||(a=l.column.validationRules)===null||a===void 0?void 0:a.length,b=e.isEditing!==t.isEditing&&m,_=f||h.isValid&&g;return b||_?!0:super._isCellChanged.apply(this,arguments)}},M$=i=>class extends i{updateFreeSpaceRowHeight(e){const t=this;let n,s,o;const r=t.element(),a=r&&r.find(`.${t.addWidgetPrefix("invalid-message")} .dx-overlay-content`);if(super.updateFreeSpaceRowHeight(e),a&&a.length&&(n=t._getRowElements(),o=t._getFreeSpaceRowElements(e),s=o.first(),s&&n.length===1&&(!s.is(":visible")||rt(a)>rt(s))))return o.show(),Io(o,rt(a)),!0}_formItemPrepared(e,t){super._formItemPrepared.apply(this,arguments),rn(()=>{const n=t.find(".dx-widget").first();n.length&&!n.children().length||this._validatingController.createValidator(e,n)})}_cellPrepared(e,t){this._editingController.isFormOrPopupEditMode()||this._validatingController.createValidator(t,e),super._cellPrepared.apply(this,arguments)}_restoreErrorRow(e){this._editingController&&this._editingController.hasChanges()&&this._getRowElements(e).each((t,n)=>{const s=R(n).data("options");if(s){const o=this._editingController.getChangeByKey(s.key);o&&this._editingController._showErrorRow(o)}})}},P$={defaultOptions:()=>({editing:{texts:{validationCancelChanges:re.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:T$},extenders:{controllers:{editing:D$,editorFactory:O$,data:R$},views:{rowsView:M$}}};He.registerModule("validating",P$);const np="scrolling.legacyMode",ZE=i=>i.option("scrolling.loadTwoPagesOnStart")||i._controller.isVirtual()||i._controller.getViewportItemIndex()>0,xc=i=>i._cache.length?i._cache[0].pageIndex:-1,Of=i=>i._cache.length?i._cache[i._cache.length-1].pageIndex:-1,su=(i,e,t)=>{i._isChangedFiring=!0,e(t),i._isChangedFiring=!1},Cy=(i,e,t)=>{if(i._isDelayChanged)return i._isDelayChanged=!1,su(i,e,t),!0},B$=i=>{const e=i._dataOptions.pageSize();if(i.option("scrolling.preventPreload"))return 0;let n=i._controller.viewportSize();if(i._controller.isVirtualMode()&&i.option("scrolling.removeInvisiblePages")){n=0;const s=i._controller.viewportSize()*i._controller.viewportItemSize();let o=i._controller.getContentOffset();const r=i._controller.getViewportPosition(),a=i._controller.virtualItemsCount(),l=i._dataOptions.totalItemsCount();for(let d=a.begin;d<l&&!(o>=r+s);d++){const c=i._controller.getItemSizes()[d]||i._controller.viewportItemSize();o+=c,o>=r&&n++}}return e&&n>0?Math.ceil(n/e):1},wc=(i,e)=>{const t=i.option("scrolling.preloadEnabled");let n=B$(i);const s=i._controller.isAppendMode();return n&&(e?n=t?1:0:(t&&n++,(s||!ZE(i))&&n--)),n},F$=i=>{let e=-1;const t=xc(i),n=i._dataOptions;return t<0?e=i._pageIndex:i._cache[i._pageIndex-t]?t>=0&&i._controller.viewportSize()>=0&&(t>0&&(Of(i)+1===n.pageCount()&&i._cache.length<wc(i)+1||i._pageIndex===t&&wc(i,!0))&&(e=t-1),e<0&&t+i._cache.length<=i._pageIndex+wc(i)&&(e=t+i._cache.length)):e=i._pageIndex,i._loadingPageIndexes[e]&&(e=-1),e},V$=(i,e)=>{const t=i._dataOptions;if(e===i.pageIndex()||!t.isLoading()&&e<t.pageCount()||!t.hasKnownLastPage()&&e===t.pageCount())return t.pageIndex(e),i._loadingPageIndexes[e]=!0,De(t.load()).always(()=>{i._loadingPageIndexes[e]=!1})},xy=(i,e,t,n,s)=>{const o=i._dataOptions,r=o.items().slice();let a=We(t)?t:void 0;const l=t==="prepend",d=o.viewportItems();t&&Ke(t)&&!i._isDelayChanged&&(a={changeType:t,items:r},s&&(a.removeCount=s.itemsCount,a.removeCount&&o.correctCount&&(a.removeCount=o.correctCount(d,a.removeCount,l))));let c=s?s.itemsLength:0;c&&o.correctCount&&(c=o.correctCount(d,c,l)),t==="append"?(d.push.apply(d,r),s&&d.splice(0,c)):l?(d.unshift.apply(d,r),s&&d.splice(-c)):i._dataOptions.viewportItems(r),o.updateLoading(),i._lastPageIndex=i.pageIndex(),i._isDelayChanged=n,n||su(i,e,a)};class N${constructor(e,t){this._dataOptions=t,this._controller=e,this._pageIndex=this._lastPageIndex=t.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){const t=this._dataOptions.pageSize(),n=this._dataOptions.pageCount(),s=this._controller.isVirtualMode(),o=this._controller.isAppendMode(),r=this._dataOptions.totalItemsCount();let a;if(t&&(s||o)&&r>=0){const l=this._controller.viewportSize();if(l&&e+l>=r&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){a=n-1;const d=r%t;a>0&&d>0&&d<l&&a--}else a=n;else{a=Math.floor(e/t);const d=n-1;a=Math.max(a,0),a=Math.min(a,d)}return this.pageIndex(a),this.load()}}pageIndex(e){const t=this._controller.isVirtualMode(),n=this._controller.isAppendMode();return this.option(np)!==!1&&(t||n)?(e!==void 0&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){let t=xc(this);return t<0&&(t=e!==void 0?e:this.pageIndex()),t}endPageIndex(){const e=Of(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){const e=this._dataOptions;let t;const n=this._controller.isVirtualMode(),s=this._controller.isAppendMode();if(this.option(np)!==!1&&(n||s)){const o=F$(this);if(o>=0){const r=V$(this,o);r&&(t=new ae,r.done(()=>{const a=this._delayDeferred;a?a.done(t.resolve).fail(t.reject):t.resolve()}).fail(t.reject),e.updateLoading())}}else t=e.load();return!t&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),t||new ae().resolve()}loadIfNeed(){const e=this._controller.isVirtualMode(),t=this._controller.isAppendMode();if((e||t)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){const n=this._controller.getViewportPosition();n>0?this._controller._setViewportPositionCore(n):this.load()}}handleDataChanged(e,t){const n=this._dataOptions;let s=this._cache.length,o,r;const a=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(t&&t.changes)su(this,e,t);else if(this.option(np)!==!1&&(a||l)){const d=xc(this);if(d>=0&&(a&&d+this._cache.length!==n.pageIndex()&&d-1!==n.pageIndex()&&(s=0,this._cache=[]),l)){if(n.pageIndex()===0)this._cache=[];else if(n.pageIndex()<Of(this)){su(this,e,{changeType:"append",items:[]});return}}const c={pageIndex:n.pageIndex(),itemsLength:n.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&a?r=this._cache.length>Math.max(wc(this)+(this.option("scrolling.preloadEnabled")?1:0),2):Cy(this,e,{isDelayed:!0});let h;d===n.pageIndex()+1?(r&&(h=this._cache.pop()),o="prepend",this._cache.unshift(c)):(r&&(h=this._cache.shift()),o="append",this._cache.push(c));const u=a&&s===0&&ZE(this);xy(this,e,this._cache.length>1?o:void 0,u,h),this._delayDeferred=this.load().done(()=>{Cy(this,e)&&this.load()})}else xy(this,e,t)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){let t=0;const n=this._controller.isVirtualMode();return!e&&n?this._cache.forEach(s=>{t+=s.itemsCount}):t=this._dataOptions.itemsCount(),t}virtualItemsCount(){let e=xc(this);e<0&&(e=this._dataOptions.pageIndex());const t=e*this._dataOptions.pageSize(),n=this._cache.length*this._dataOptions.pageSize(),s=Math.max(0,this._dataOptions.totalItemsCount()-n-t);return{begin:t,end:s}}reset(){this._loadingPageIndexes={},this._cache=[]}}const Zd="scrolling.legacyMode",wy=i=>i.option("scrolling.mode")==="virtual"||i._isVirtual,L$=i=>i.option("scrolling.mode")==="infinite"&&!i._isVirtual;function JE(i,e,t){let n;const s=[],o=[];t=t||i;function r(c){const h=c.element?c.$element():c,u=Un.offset(h);return u?c.scrollTop()-(u.top-i.offset().top):i.offset().top}const a={on(c,h,u){c.on("scroll",u)},off(c,h,u){c.off("scroll",u)}};function l(c){const h=c.get(0).nodeName==="#document",u=c.get(0).nodeType===Je().Node.ELEMENT_NODE;let p=c.data("dxScrollable"),f=a;if(!p&&(p=h&&R(Je())||u&&c.css("overflowY")==="auto"&&c,f=q,!p))return;const g=function(m){return function(){let b=m.scrollTop()-r(m);b=b>0?b:0,e(b)}}(p);f.on(p,"scroll",g),s.push(m=>{const b=r(p),_=p.scrollTo?"scrollTo":"scrollTop";m-b>=0&&p[_](m+b)}),o.push(()=>{f.off(p,"scroll",g)})}const d=c=>R(c.get(0).parentNode??c.get(0).host);for(n=t.parent();n.length;n=d(n))l(n);return{scrollTo(c){ie(s,(h,u)=>{u(c)})},dispose(){ie(o,(c,h)=>{h()})}}}class QE{constructor(e,t,n){this._dataOptions=t,this.component=e,this._viewportSize=e.option(Zd)===!1?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=n,this.positionChanged=Tt(),this._dataLoader=new N$(this,this._dataOptions)}getItemSizes(){return this._itemSizes}option(e,t){return this.component.option.apply(this.component,arguments)}isVirtual(){return this._isVirtual}virtualItemsCount(){if(wy(this)){const e=this._dataOptions,t=e.totalItemsCount();if(this.option(Zd)===!1&&t!==-1){const n=this.getViewportParams(),s=e.loadedOffset(),o=e.loadedItemCount(),r=Math.max(n.skip,s),a=Math.min(n.take,o),l=Math.max(t-(r+a),0);return{begin:r,end:l}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}}getScrollingTimeout(){const e=this.option("scrolling.renderAsync");let t=0;return U(e)?e&&(t=this.option("scrolling.timeout")??0):(t=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()),t<this.option("scrolling.renderingThreshold")&&(t=this.option("scrolling.minTimeout")||0)),t}setViewportPosition(e){const t=new ae,n=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),n>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),t.resolve()},n):(this._setViewportPositionCore(e),t.resolve()),t.promise()}getViewportPosition(){return this._position}getItemIndexByPosition(e,t,n){e=e??this._position;const s=this.getItemSize();let o=0,r=0;const a=Object.keys(this._itemSizes).concat(-1);for(let l=0;l<a.length&&o<e;l++){const d=parseInt(a[l]);let c=(e-o)/s;if(d<0||r+c<d){r+=c,this._sizeRatio<1&&U(t)&&(r=t+n/this._viewportItemSize);break}else c=d-r,o+=c*s,r+=c;const h=this._itemSizes[d];o+=h,r+=o<e?1:(e-o+h)/h}return Math.round(50*r)/50}isScrollingBack(){return this._isScrollingBack}_setViewportPositionCore(e){const t=this._position||0;this._position=e,t!==this._position&&(this._isScrollingBack=this._position<t);const n=this.getItemIndexByPosition(),s=this.setViewportItemIndex(n);return this.positionChanged.fire(),s}setContentItemSizes(e){const t=this.virtualItemsCount();if(this._contentSize=e.reduce((n,s)=>n+s,0),t){e.forEach((o,r)=>{this._itemSizes[t.begin+r]=o});const n=(t.begin+t.end+this.itemsCount())*this._viewportItemSize,s=Ce.getContentHeightLimit(Zt);n>s?this._sizeRatio=s/n:this._sizeRatio=1}}getItemSize(){return this._viewportItemSize*this._sizeRatio}getItemOffset(e,t){const n=this.virtualItemsCount();let s=e;if(!n)return 0;let o=0;const r=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(a=>{s&&(t?a>=r-e:a<e)&&(o+=this._itemSizes[a],s--)}),Math.floor(o+s*this._viewportItemSize*this._sizeRatio)}getContentOffset(e){const t=e==="end",n=this.virtualItemsCount();return n?this.getItemOffset(t?n.end:n.begin,t):0}getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0}getViewportItemIndex(){return this._viewportItemIndex}setViewportItemIndex(e){if(this._viewportItemIndex=e,this.option(Zd)!==!1)return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)}viewportItemSize(e){return e!==void 0&&(this._viewportItemSize=e),this._viewportItemSize}viewportSize(e){return e!==void 0&&(this._viewportSize=e),this._viewportSize}viewportHeight(e,t){const n=t??this._position,s=this.getItemIndexByPosition(n),o=this.getItemIndexByPosition(n+e,s,e);this.viewportSize(Math.ceil(o-s)),!U(t)&&this._viewportItemIndex!==s&&this._setViewportPositionCore(n)}reset(e){this._dataLoader.reset(),e||(this._itemSizes={})}subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||JE(e,t=>{this.viewportItemSize()&&this.setViewportPosition(t)})}dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null}scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)}isVirtualMode(){return wy(this)}isAppendMode(){return L$(this)}getViewportParams(){const e=this.option("scrolling.mode")==="virtual",t=this._dataOptions.totalItemsCount(),s=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>t?t:this._viewportItemIndex,o=this._viewportSize+s,r=this.option("scrolling.prerenderedRowChunkSize")||1,a=this.isScrollingBack(),l=this.option("scrolling.prerenderedRowCount")??1,d=a?l:0,c=a?0:l,h=Math.floor(Math.max(0,s-d)/r)*r;let u=Math.ceil((o+c-h)/r)*r;if(e){const p=Math.max(0,t-h);u=Math.min(u,p)}return{skip:h,take:u}}itemsCount(){let e=0;return this.option(Zd)?e=this._dataLoader.itemsCount.apply(this._dataLoader,arguments):e=this._dataOptions.itemsCount(),e}pageIndex(){return this._dataLoader.pageIndex(...arguments)}beginPageIndex(){return this._dataLoader.beginPageIndex(...arguments)}endPageIndex(){return this._dataLoader.endPageIndex(...arguments)}pageSize(){return this._dataLoader.pageSize(...arguments)}load(){return this._dataLoader.load(...arguments)}loadIfNeed(){return this._dataLoader.loadIfNeed(...arguments)}handleDataChanged(){return this._dataLoader.handleDataChanged(...arguments)}getDelayDeferred(){return this._dataLoader.getDelayDeferred()}}const eI="dx-freespace-row",$$="dx-row-inserted",bt="scrolling.legacyMode",H$=["beginPageIndex","endPageIndex","pageIndex"],en=function(i){return i.option("scrolling.mode")==="virtual"},_s=function(i){return i.option("scrolling.mode")==="infinite"},Qn=function(i){return en(i)||_s(i)},Sy=function(i,e,t,n){for(let s=0;s<e+1;s++){const o=i[t?i.length-1-s:s];o&&!n(o,s===e,t)&&e++}return e},Sc=function(i,e){return i.rowType==="data"&&!i.isNewRow||i.rowType==="group"&&e.isGroupItemCountable(i.data)},z$=function(i){return i.forEach((e,t)=>{e.rowIndex=t}),i},sp=function(i){const e=i._virtualScrollController.beginPageIndex(-1);en(i)&&(e<0||i.viewportSize()>=0&&i.getViewportItemIndex()>=0&&(e*i.pageSize()>i.getViewportItemIndex()||e*i.pageSize()+i.itemsCount()<i.getViewportItemIndex()+i.viewportSize())&&i._dataSource.isLoading()?i._isLoading||(i._isLoading=!0,i.loadingChanged.fire(!0)):i._isLoading&&(i._isLoading=!1,i.loadingChanged.fire(!1)))},Zi=function(i,e,t){if(i.option(bt)===!1&&H$.includes(e)){const s=i._dataSource;return s.pageIndex.apply(s,t)}const n=i._virtualScrollController;return n[e].apply(n,t)},Ey=function(i,e){const t=i.toArray().map(s=>R(s).parent(`.${e}`).get(0)).filter(s=>s);t.length&&(i=R(t));const n=e===eI?i.length-1:i.length;for(let s=0;s<n;s++)i.eq(s).remove()},W$=i=>class extends i{init(){super.init.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new QE(this.component,this._getVirtualScrollDataOptions())}dispose(){this._virtualScrollController.dispose(),super.dispose.apply(this,arguments)}_getVirtualScrollDataOptions(){const e=this;return{pageSize:()=>e.pageSize(),totalItemsCount:()=>e.totalItemsCount(),hasKnownLastPage:()=>e.hasKnownLastPage(),pageIndex:t=>e._dataSource.pageIndex(t),isLoading:()=>e._dataSource.isLoading()&&!e.isCustomLoading(),pageCount:()=>e.pageCount(),load:()=>e._dataSource.load(),updateLoading(){sp(e)},itemsCount:()=>e.itemsCount(!0),items:()=>e._dataSource.items(),viewportItems(t){return t&&(e._items=t),e._items},onChanged(t){e.changed.fire(t)},changingDuration(){return e.isLoading()?300:e._renderTime||0}}}_handleLoadingChanged(e){if(this.option(bt)===!1){super._handleLoadingChanged.apply(this,arguments);return}(!en(this)||this._isLoadingAll)&&(this._isLoading=e,super._handleLoadingChanged.apply(this,arguments)),e?this._startLoadTime=new Date:this._startLoadTime=void 0}_handleLoadError(){this.option(bt)!==!1&&(this._isLoading=!1,this.loadingChanged.fire(!1)),super._handleLoadError.apply(this,arguments)}_handleDataChanged(e){if(this.option(bt)===!1){this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),super._handleDataChanged.apply(this,arguments);return}const t=super._handleDataChanged.bind(this);this._virtualScrollController.handleDataChanged(t,e)}_customizeRemoteOperations(e,t){const n=this.option(bt)===!1;let s=this.option("scrolling.renderAsync");U(s)||(s=this._renderTime>=this.option("scrolling.renderingThreshold")),(en(this)||_s(this)&&n)&&!t.reload&&(t.skip||n)&&!s&&(e.delay=void 0),super._customizeRemoteOperations.apply(this,arguments)}items(){return this._items}_dataSourceTotalCount(e){return this.option(bt)===!1&&en(this)&&!e?this._totalCount:super._dataSourceTotalCount()}itemsCount(e){return e||this.option(bt)===!1?super.itemsCount():this._virtualScrollController.itemsCount()}load(e){return this.option(bt)===!1||e?super.load(e):this._virtualScrollController.load()}isLoading(){return this.option(bt)===!1?this._dataSource.isLoading():this._isLoading}isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded}resetPagesCache(e){e||this._virtualScrollController.reset(!0),super.resetPagesCache.apply(this,arguments)}_changeRowExpandCore(){const e=super._changeRowExpandCore.apply(this,arguments);return this.option(bt)===!1||(this.resetPagesCache(),sp(this)),e}reload(){this._dataSource.pageIndex(this.pageIndex());const e=this._virtualScrollController;if(this.option(bt)!==!1&&e){const t=new ae;return super.reload.apply(this,arguments).done(n=>{const s=e.getDelayDeferred();s?s.done(t.resolve).fail(t.reject):t.resolve(n)}).fail(t.reject),t}return super.reload.apply(this,arguments)}refresh(e,t){if(this.option(bt)!==!1){const{storeLoadOptions:n}=e,s=this._dataSource;t.reload?(this._virtualScrollController.reset(),s.items().length=0,this._isLoaded=!1,sp(this),this._isLoaded=!0,_s(this)?(this.pageIndex(0),s.pageIndex(0),n.pageIndex=0,e.pageIndex=0,n.skip=0):(s.pageIndex(this.pageIndex()),s.paginate()&&(e.pageIndex=this.pageIndex(),n.skip=this.pageIndex()*this.pageSize()))):_s(this)&&n.skip&&this._totalCountCorrection<0&&(n.skip+=this._totalCountCorrection)}return super.refresh.apply(this,arguments)}loadPageCount(e){if(!U(e))return this._loadPageCount;this._loadPageCount=e}_handleDataLoading(e){const t=this.loadPageCount(),n=this.pageSize(),s=this.option(bt)===!1,{storeLoadOptions:o}=e,r=U(o.take);e.loadPageCount=t,!e.isCustomLoading&&s&&r&&t>1&&n>0&&(o.take=t*n),super._handleDataLoading.apply(this,arguments)}_loadPageSize(){return super._loadPageSize.apply(this,arguments)*this.loadPageCount()}beginPageIndex(){return Zi(this,"beginPageIndex",[...arguments])}endPageIndex(){return Zi(this,"endPageIndex",[...arguments])}pageIndex(e){return Zi(this,"pageIndex",[...arguments])}virtualItemsCount(){return Zi(this,"virtualItemsCount",[...arguments])}getContentOffset(){return Zi(this,"getContentOffset",[...arguments])}getVirtualContentSize(){return Zi(this,"getVirtualContentSize",[...arguments])}setContentItemSizes(){return Zi(this,"setContentItemSizes",[...arguments])}setViewportPosition(){return Zi(this,"setViewportPosition",[...arguments])}getViewportItemIndex(){return Zi(this,"getViewportItemIndex",[...arguments])}setViewportItemIndex(e){return Zi(this,"setViewportItemIndex",[...arguments])}getItemIndexByPosition(){return Zi(this,"getItemIndexByPosition",[...arguments])}viewportSize(){return Zi(this,"viewportSize",[...arguments])}viewportItemSize(){return Zi(this,"viewportItemSize",[...arguments])}getItemSize(){return Zi(this,"getItemSize",[...arguments])}getItemSizes(){return Zi(this,"getItemSizes",[...arguments])}loadIfNeed(){return Zi(this,"loadIfNeed",[...arguments])}},j$=i=>class extends i{dispose(){const e=this._rowsScrollController;e&&e.dispose(),super.dispose.apply(this,arguments)}_refreshDataSource(){const e=super._refreshDataSource.apply(this,arguments)||new ae().resolve().promise();return e.done(this.initVirtualRows.bind(this)),e}_loadDataSource(){if(this._rowsScrollController&&Qn(this)){var e;const{loadPageCount:t}=U(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:0};t>=1&&((e=this._dataSource)===null||e===void 0||e.loadPageCount(t))}return super._loadDataSource.apply(this,arguments)}getRowPageSize(){const e=this.option("scrolling.rowPageSize"),t=this.pageSize();return t&&t<e?t:e}reload(){const e=this._rowsScrollController||this._dataSource,t=e&&e.getItemIndexByPosition(),n=super.reload.apply(this,arguments);return n&&n.done(()=>{if(en(this)||Ce.isVirtualRowRendering(this)){const o=this.getRowIndexOffset(),r=Math.floor(t)-o,{component:a}=this,l=a.getScrollable&&a.getScrollable(),d=this.dataSource().operationTypes().sorting;if(l&&!d&&r>=0){var s;const c=a.getRowElement(r),h=c&&c[0]&&R(c[0]);let u=h&&((s=h.position())===null||s===void 0?void 0:s.top);const p=Zt.chrome&&Number(Zt.version??0)>=91,f=Zt.mozilla||p?1:0;u&&u>f&&(u=Math.round(u+rt(h)*(t%1)),l.scrollTo({y:u}))}}})}initVirtualRows(){const e=Ce.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,this.option("scrolling.mode")!=="virtual"&&!e||!e||this.option(bt)!==!1&&!this.option("scrolling.rowPageSize")){this._visibleItems=null,this._rowsScrollController=null;return}const t=!en(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(t*this.pageSize()/this.getRowPageSize()),this._visibleItems=this.option(bt)===!1?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new QE(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var n;if(this.option(bt)===!1){this._viewportChanging=!0,this.loadViewport(),this._viewportChanging=!1;return}(n=this._dataSource)===null||n===void 0||n.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),this.option(bt)===!1&&this._updateLoadViewportParams(),this.isLoaded()&&this.option(bt)!==!1&&this._rowsScrollController.load()}isViewportChanging(){return this._viewportChanging}_getRowsScrollDataOptions(){const e=this,t=function(n){return Sc(n,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var n;return en(e)&&((n=e._dataSource)===null||n===void 0?void 0:n.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount(){return Qn(e)?e.totalItemsCount():e.option(bt)===!1?e._itemCount:e._items.filter(t).length},hasKnownLastPage:()=>e.option(bt)===!1?e.hasKnownLastPage():!0,pageIndex(n){return n!==void 0&&(e._rowPageIndex=n),e._rowPageIndex},isLoading:()=>e.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),!(!this.items().length&&this.totalItemsCount())&&e._rowsScrollController.handleDataChanged(n=>{n=n||{},n.changeType=n.changeType||"refresh",n.items=n.items||e._visibleItems,e._visibleItems.forEach((s,o)=>{s.rowIndex=o}),e._fireChanged(n)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(n,s,o)=>Sy(n,s,o,(r,a,l)=>r.isNewRow?a&&!l:a&&l?!r.isNewRow:t(r)),items(n){let s=e._items;if(e.option(bt)){const o=e.dataSource(),r=o==null?void 0:o.virtualItemsCount(),a=r?r.begin:0,l=e.getRowPageSize();let d=e._rowPageIndex*l-a,c=l;if(d<0)return[];d&&(d=this.correctCount(s,d),s=s.slice(d)),c&&(c=this.correctCount(s,c),s=s.slice(0,c))}return n?s.filter(t):s},viewportItems(n){return n&&e.option(bt)!==!1&&(e._visibleItems=n),e._visibleItems},onChanged(){},changingDuration(){const n=e.dataSource();return n!=null&&n.isLoading()&&e.option(bt)!==!1?300:(n==null?void 0:n._renderTime)||0}}}_updateItemsCore(e){const t=this.getRowIndexDelta();if(super._updateItemsCore.apply(this,arguments),this.option(bt)===!1&&Ce.isVirtualRowRendering(this)){e.changeType==="update"&&e.rowIndices.length===0&&e.cancelEmptyChanges&&(e.cancel=!0);return}const n=this._rowsScrollController;if(n){const s=this._visibleItems,o=e.changeType==="refresh"||e.isLiveUpdate;if(e.changeType==="append"&&e.items&&!e.items.length)return;o||e.changeType==="append"||e.changeType==="prepend"?(e.cancel=!0,o&&n.reset(!0),n.load()):(e.changeType==="update"?e.rowIndices.forEach((r,a)=>{const l=e.changeTypes[a],d=e.items[a];l==="update"?s[r]=d:l==="insert"?s.splice(r,0,d):l==="remove"&&s.splice(r,1)}):(s.forEach((r,a)=>{s[a]=this._items[a+t]||s[a]}),e.items=s),z$(s))}}_updateLoadViewportParams(){const e=this._rowsScrollController.getViewportParams(),t=this.pageSize();if(e&&!Qn(this)&&t>0){const n=this.pageIndex()*t;e.skip+=n}this._loadViewportParams=e}_processItems(){const e=super._processItems.apply(this,arguments);if(this.option(bt)===!1){const t=this._dataSource;let n=(t==null?void 0:t.lastLoadOptions().skip)??0,s,o,r,a=!1,l=[];e.forEach(d=>{const{rowType:c}=d,h=Sc(d,t),u=c==="group"&&(s||h||o!=="group"&&n>0),p=c==="data"&&h&&(s||o!=="group");!d.isNewRow&&U(s)&&(u||p)&&!(r&&!a)&&n++,(u||p)&&(a=!0),d.isNewRow?l.push(d):(l.forEach(f=>{f.loadIndex=n}),l=[]),d.loadIndex=n,s=h,o=c,r=d.isNewRow}),l.forEach(d=>{d.loadIndex=n})}return e}_afterProcessItems(e){if(this._itemCount=e.filter(t=>Sc(t,this._dataSource)).length,U(this._loadViewportParams)){this._updateLoadViewportParams();let t=e;if(this._allItems=e,e.length){const{skipForCurrentPage:n}=this.getLoadPageParams(!0),s=e[0].loadIndex+n,{take:o}=this._loadViewportParams;t=e.filter(r=>{const a=r.isNewRow&&r.loadIndex===s&&o===0,l=r.loadIndex>=s,d=r.loadIndex<s+o||a;return l&&d})}return t}return super._afterProcessItems.apply(this,arguments)}_applyChange(e){const t=this,{items:n}=e,{changeType:s}=e;let{removeCount:o}=e;if(o){const r=s==="prepend";o=Sy(t._items,o,r,(a,l)=>a.rowType==="data"&&!a.isNewRow||a.rowType==="group"&&(t._dataSource.isGroupItemCountable(a.data)||l)),e.removeCount=o}switch(s){case"prepend":t._items.unshift.apply(t._items,n),o&&t._items.splice(-o);break;case"append":t._items.push.apply(t._items,n),o&&t._items.splice(0,o);break;default:super._applyChange(e)}}items(e){return e?this._allItems||this._items:this._visibleItems||this._items}getRowIndexDelta(){let e=0;if(this.option(bt)){const t=this._visibleItems;t&&t[0]&&(e=this._items.indexOf(t[0]))}return e<0?0:e}getRowIndexOffset(e,t){let n=0;const s=this.dataSource(),o=this._rowsScrollController,r=this.option(bt)===!1,a=Qn(this);if(o&&!e)if(r&&U(this._loadViewportParams)){const{skipForCurrentPage:d,pageIndex:c}=this.getLoadPageParams(!0),h=this.items(!0);if(n=a?c*this.pageSize():0,h.length){const u=h[0].loadIndex;n+=h.filter(p=>p.loadIndex<u+d).length}}else n=o.beginPageIndex()*o.pageSize();else if(a&&r&&s){var l;const d=s.lastLoadOptions();t&&(l=d.skips)!==null&&l!==void 0&&l.length?n=d.skips.reduce((c,h)=>c+h,0):n=d.skip??0}else en(this)&&s&&(n=s.beginPageIndex()*s.pageSize());return n}getDataIndex(){return this.option(bt)===!1?this.getRowIndexOffset(!0,!0):super.getDataIndex.apply(this,arguments)}viewportSize(){const e=this._rowsScrollController,t=this._dataSource,n=e==null?void 0:e.viewportSize.apply(e,arguments);return this.option(bt)===!1?n:t==null?void 0:t.viewportSize.apply(t,arguments)}viewportHeight(e,t){var n;(n=this._rowsScrollController)===null||n===void 0||n.viewportHeight(e,t)}viewportItemSize(){const e=this._rowsScrollController,t=this._dataSource,n=e==null?void 0:e.viewportItemSize.apply(e,arguments);return this.option(bt)===!1?n:t==null?void 0:t.viewportItemSize.apply(t,arguments)}setViewportPosition(){const e=this._rowsScrollController,t=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):t==null||t.setViewportPosition.apply(t,arguments)}setContentItemSizes(e){const t=this._rowsScrollController,n=this._dataSource,s=t==null?void 0:t.setContentItemSizes(e);return this.option(bt)===!1?s:n==null?void 0:n.setContentItemSizes(e)}getPreloadedRowCount(){const e=this.option("scrolling.preloadedRowCount"),t=this.option("scrolling.preloadEnabled");if(U(e))return e;const n=this.viewportSize();return t?2*n:n}getLoadPageParams(e){var t,n;const s=this.pageSize(),o=this._loadViewportParams,r=(t=this._dataSource)===null||t===void 0?void 0:t.lastLoadOptions(),a=(r==null?void 0:r.pageIndex)||0,l=(r==null?void 0:r.take)||0,d=this._rowsScrollController.isScrollingBack(),c=d?this.getPreloadedRowCount():0,h=d?0:this.getPreloadedRowCount(),u=((n=this._dataSource)===null||n===void 0?void 0:n.totalCountCorrection())||0,p=Math.max(0,o.skip-c),f=e?a:Math.floor(s?p/s:0),g=f*s,m=o.skip-g,b=o.take+m+h-u,w=Math.ceil(s?(e?l:b)/s:0);return{pageIndex:f,loadPageCount:Math.max(1,w),skipForCurrentPage:Math.max(0,m)}}_updateVisiblePageIndex(e){if(!this._rowsScrollController)return;if(U(e)){this._silentOption("paging.pageIndex",e),this.pageChanged.fire();return}const t=this._rowsScrollController.getViewportItemIndex(),n=Math.floor(t/this.pageSize());this.pageIndex()!==n&&(this._silentOption("paging.pageIndex",n),this.updateItems({changeType:"pageIndex"}))}_getChangedLoadParams(){const e=this.getLoadPageParams(!0),{pageIndex:t,loadPageCount:n}=this.getLoadPageParams(),s=this._pageIndexIsValid(t);let o=null;return!this._isLoading&&s&&(t!==e.pageIndex||n!==e.loadPageCount)&&(o={pageIndex:t,loadPageCount:n}),o}_pageIndexIsValid(e){let t=!0;return(_s(this)&&this.hasKnownLastPage()||en(this))&&(t=e*this.pageSize()<this.totalItemsCount()),t}_loadItems(e,t){const n=Qn(this),s=this._dataSource,o=this._getChangedLoadParams(),r=(s==null?void 0:s.loadPageCount())??0,a=this.pageSize()*r,l=(s==null?void 0:s.pageIndex())??0,d=(o==null?void 0:o.pageIndex)===l,c=_s(this)&&this.totalItemsCount()<a,h=this.option("editing.refreshMode")==="repaint",u=(o==null?void 0:o.pageIndex)>l;let p=!1;if(!s||n&&e&&(h&&t||u||d&&c))return p;if(n&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),n&&o){p=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;const f=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{const g=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(f||g)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return p}loadViewport(e){const{checkLoadedParamsOnly:t,checkLoading:n,viewportIsNotFilled:s}=e??{};if(Qn(this)||Ce.isVirtualRowRendering(this)){var r;this._updateLoadViewportParams();const l=this._loadItems(n,!s),d=(r=this._dataSource)===null||r===void 0?void 0:r.isCustomLoading(),c=n&&!d&&this._isLoading;if(!(l||c||t)){var a;const u=!((a=this._editingController)!==null&&a!==void 0&&(a=a.getChanges())!==null&&a!==void 0&&a.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:u,cancelEmptyChanges:!0})}}}updateViewport(){var e;const t=this.viewportSize(),n=this.items().length,s=t>n,o=((e=this._loadViewportParams)===null||e===void 0?void 0:e.take)??0,r=this._rowsScrollController,a=r==null?void 0:r.getViewportParams().take;(s||o<a)&&!this._isPaging&&n&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:s})}loadIfNeed(){if(this.option(bt)===!1)return;const e=this._rowsScrollController;e&&e.loadIfNeed();const t=this._dataSource;return t&&t.loadIfNeed()}getItemSize(){const e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);const t=this._dataSource;return t&&t.getItemSize.apply(t,arguments)}getItemSizes(){const e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);const t=this._dataSource;return t&&t.getItemSizes.apply(t,arguments)}getContentOffset(){const e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);const t=this._dataSource;return t&&t.getContentOffset.apply(t,arguments)}refresh(e){const t=this._dataSource;return t&&e&&e.load&&_s(this)&&t.resetCurrentTotalCount(),super.refresh.apply(this,arguments)}topItemIndex(){var e;return(e=this._loadViewportParams)===null||e===void 0?void 0:e.skip}bottomItemIndex(){const e=this._loadViewportParams;return e&&e.skip+e.take}virtualItemsCount(){const e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);const t=this._dataSource;return t==null?void 0:t.virtualItemsCount.apply(t,arguments)}pageIndex(e){const t=Qn(this),n=this._rowsScrollController;return this.option(bt)===!1&&t&&n&&e===void 0?this.option("paging.pageIndex")??0:super.pageIndex.apply(this,arguments)}_fireChanged(e){super._fireChanged.apply(this,arguments);const{operationTypes:t}=e;if(this.option(bt)===!1&&Qn(this)&&t){const{fullReload:n,pageIndex:s}=t;e.isDataChanged&&!n&&s&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}}_getPagingOptionValue(e){let t=super._getPagingOptionValue.apply(this,arguments);return this.option(bt)===!1&&Qn(this)&&(t=this[e]()),t}isEmpty(){return this.option(bt)===!1?!this.items(!0).length:super.isEmpty.apply(this,arguments)}isLastPageLoaded(){let e=!1;if(this.option(bt)===!1&&Qn(this)){const{pageIndex:t,loadPageCount:n}=this.getLoadPageParams(!0),s=this.pageCount();e=t+n>=s}else e=super.isLastPageLoaded.apply(this,arguments);return e}reset(){this._itemCount=0,this._allItems=null,super.reset.apply(this,arguments)}_applyFilter(){var e;return(e=this._dataSource)===null||e===void 0||e.loadPageCount(1),super._applyFilter.apply(this,arguments)}getVirtualContentSize(){var e;return(e=this._dataSource)===null||e===void 0?void 0:e.getVirtualContentSize.apply(this._dataSource,arguments)}setViewportItemIndex(){var e;return(e=this._dataSource)===null||e===void 0?void 0:e.setViewportItemIndex.apply(this._dataSource,arguments)}},K$=i=>class extends i{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._resizeTimeout)}_updateMasterDataGridCore(e){return De(super._updateMasterDataGridCore.apply(this,arguments)).done(t=>{const n=en(e)&&e.option(bt)===!1;!t&&n&&e.getScrollable()&&e.updateDimensions()})}hasResizeTimeout(){return!!this._resizeTimeout}resize(){let e;if(en(this)||Ce.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;const t=new Date-this._lastTime,n=this.option("scrolling.updateTimeout");this._lastTime&&t<n?(e=new ae,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,super.resize.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},n),this._lastTime=new Date):(e=super.resize.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=super.resize.apply(this);return e}},G$=i=>class extends i{init(){var e;super.init(),this._dataController.pageChanged.add(t=>{const n=this._scrollTop;this.scrollToPage(t??this._dataController.pageIndex()),this.option(bt)===!1&&this._scrollTop===n&&this._dataController.updateViewport()}),this._dataController.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),(e=this._dataController.stateLoaded)===null||e===void 0||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()}dispose(){clearTimeout(this._scrollTimeoutID),super.dispose()}_scrollToCurrentPageOnResize(){if(this._dataController.pageIndex()>0){const e=()=>{this.resizeCompleted.remove(e),this.scrollToPage(this._dataController.pageIndex())};this.resizeCompleted.add(e)}}scrollToPage(e){const t=this._dataController?this._dataController.pageSize():0;let n;if(en(this)||_s(this)){const s=this._dataController.getItemSize(),o=this._dataController.getItemSizes(),r=e*t;n=r*s;for(const a in o)parseInt(a)<r&&(n+=o[a]-s)}else n=0;this.scrollTo({y:n,x:this._scrollLeft})}renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),super.renderDelayedTemplates.apply(this,arguments)}_renderCore(e){const t=new Date,n=super._renderCore.apply(this,arguments),s=this._dataController._dataSource;if(s&&e){const o=e.items?e.items.length:20,r=this._dataController.viewportSize()||20;Ce.isVirtualRowRendering(this)&&o>0&&this.option(bt)!==!1?s._renderTime=(new Date-t)*r/o:s._renderTime=new Date-t}return n}_getRowElements(e){const t=super._getRowElements(e);return t&&t.not(".dx-virtual-row")}_removeRowsElements(e,t,n){let s=this._getRowElements(e).toArray();n==="append"?s=s.slice(0,t):s=s.slice(-t),s.map(o=>{const r=R(o);this._errorHandlingController&&this._errorHandlingController.removeErrorRow(r.next()),r.remove()})}_updateContent(e,t){let n;const s=this._findContentElement(),o=t&&t.changeType,r=ae(),a=s.children().first();return o==="append"||o==="prepend"?this.waitAsyncTemplates().done(()=>{const l=this._getBodies(e);l.length===1?this._getBodies(a)[o==="append"?"append":"prepend"](l.children()):l[o==="append"?"appendTo":"prependTo"](a),e.remove(),n=this._getFreeSpaceRowElements(a),Ey(n,eI),t.removeCount&&this._removeRowsElements(a,t.removeCount,o),this._restoreErrorRow(a),r.resolve()}).fail(r.reject):super._updateContent.apply(this,arguments).done(()=>{o==="update"&&this._restoreErrorRow(a),r.resolve()}).fail(r.reject),r.promise().done(()=>{this._updateBottomLoading()})}_addVirtualRow(e,t,n,s){if(!s)return;let o=this._createEmptyRow("dx-virtual-row",t,s);o=this._wrapRowIfNeed(e,o),this._appendEmptyRow(e,o,n)}_updateContentItemSizes(){const e=this._getRowHeights(),t=this._correctRowHeights(e);this._dataController.setContentItemSizes(t)}_updateViewportSize(e,t){U(e)||(e=this._hasHeight?rt(this.element()):rt(Je())),this._dataController.viewportHeight(e,t)}_getRowHeights(){var e,t;const n=(e=this._editingController)===null||e===void 0||(t=e.isPopupEditMode)===null||t===void 0?void 0:t.call(e);let s=this._getRowElements(this._tableElement).toArray();return n&&(s=s.filter(o=>!R(o).hasClass($$))),s.map(o=>yi(o).height)}_correctRowHeights(e){const t=this._dataController,n=t._dataSource,s=[],o=t.getVisibleRows();let r=0,a=!0,l=-1;for(let d=0;d<e.length;d++){const c=o[d];U(c)&&(this.option(bt)===!1?(l>=0&&l!==c.loadIndex&&(s.push(r),r=0),l=c.loadIndex):Sc(c,n)&&(a?a=!1:(s.push(r),r=0)),r+=e[d])}return r>0&&s.push(r),s}_updateContentPosition(e){const t=this._rowHeight||20;if(this._dataController.viewportItemSize(t),en(this)||Ce.isVirtualRowRendering(this)){e||this._updateContentItemSizes();const n=this._dataController.getContentOffset("begin"),s=this._dataController.getContentOffset("end"),o=this.getTableElements(),r=o.children("tbody").children(".dx-virtual-row");Ey(r,"dx-virtual-row"),o.each((a,l)=>{const d=a>0,c=this._isFixedTableRendering;this._isFixedTableRendering=d,this._addVirtualRow(R(l),d,"top",n),this._addVirtualRow(R(l),d,"bottom",s),this._isFixedTableRendering=c})}}_isTableLinesDisplaysCorrect(e){return e.find(".dx-column-lines").length>0===this.option("showColumnLines")}_isColumnElementsEqual(e,t){let n=e.length===t.length;return n&&ie(e,(s,o)=>{if(o.style.width!==t[s].style.width)return n=!1,n}),n}_getCellClasses(e){const t=[],{cssClass:n}=e,s=e.command==="expand";return n&&t.push(n),s&&t.push(this.addWidgetPrefix("group-space")),t}_findBottomLoadPanel(e){const t=e||this.element(),n=t&&t.find(`.${this.addWidgetPrefix("bottom-load-panel")}`);if(n&&n.length)return n}_updateBottomLoading(){const e=this,t=en(this),n=_s(this),s=!e._dataController.hasKnownLastPage()&&e._dataController.isLoaded()&&(t||n),o=e._findContentElement(),r=e._findBottomLoadPanel(o);s?r||R("<div>").addClass(e.addWidgetPrefix("bottom-load-panel")).append(e._createComponent(R("<div>"),An,{elementAttr:{role:null,"aria-label":null}}).$element()).appendTo(o):r&&r.remove()}_handleScroll(e){const t=this.option(bt)===!0,n=e.scrollOffset.top===0,o=this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition,r=this._hasHeight||!t&&n;o&&r&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(en(this)||this.option("scrolling.rowRenderingMode")!=="standard")&&this.option(bt)===!1&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),super._handleScroll.apply(this,arguments)}_needUpdateRowHeight(e){return super._needUpdateRowHeight.apply(this,arguments)||e>0&&_s(this)&&!Ce.isVirtualRowRendering(this)}_updateRowHeight(){if(super._updateRowHeight.apply(this,arguments),this._rowHeight){this._updateContentPosition();const e=this._hasHeight?rt(this.element()):rt(Je());this.option(bt)===!1?(this._updateViewportSize(e),this._dataController.updateViewport()):this._dataController.viewportSize(Math.ceil(e/this._rowHeight))}}updateFreeSpaceRowHeight(){const e=super.updateFreeSpaceRowHeight.apply(this,arguments);return e&&this._updateContentPosition(),e}setLoading(e,t){const n=this._dataController,s=n.pageIndex()>0&&n.isLoaded()&&!!this._findBottomLoadPanel();this.option(bt)===!1&&e&&n.isViewportChanging()||(s&&(e=!1),super.setLoading.call(this,e,t))}throwHeightWarningIfNeed(){if(this._hasHeight===void 0)return;!this._hasHeight&&Qn(this)&&!this._heightWarningIsThrown&&(this._heightWarningIsThrown=!0,mt.log("W1025"))}_resizeCore(){const e=this,t=e.element();super._resizeCore(),this.throwHeightWarningIfNeed(),e.component.$element()&&!e._windowScroll&&_u(t)&&(e._windowScroll=JE(t,n=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(n)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),this.option(bt)!==!1&&e.loadIfNeed()}loadIfNeed(){var e,t;(e=this._dataController)===null||e===void 0||(t=e.loadIfNeed)===null||t===void 0||t.call(e)}_restoreErrorRow(e){if(this.option(bt)===!1){var t;(t=this._errorHandlingController)===null||t===void 0||t.removeErrorRow()}super._restoreErrorRow.apply(this,arguments)}},U$={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{controllers:{data:j$,resizing:K$},views:{rowsView:G$}}};He.registerModule("virtualScrolling",U$);Au.extend(W$);const tI=(i,e)=>{const t=R(Je()),{top:n}=i.offset();let s;if(Wt(e)){if(e<n)return n-e;s=Oc(t)-e+t.scrollTop()}else{const o=n-t.scrollTop(),r=Oc(t)-o-rt(i);s=Math.max(o,r)}return .9*s};class op extends ig{_getDefaultOptions(){return Y(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:ue})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();const e=this._dataAdapter.getNodeByKey(this.option("_parentKey"));e&&this._renderItems(this._getChildNodes(e)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=R("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return Y(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(e){this._showDelimiter(e)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){return this.option("orientation")==="horizontal"}_hoverStartHandler(e){this.option("onHoverStart")(e),super._hoverStartHandler(e),this._toggleFocusClass(!0,e.currentTarget)}_drawSubmenu(e){this._actions.onShowing({rootItem:ze(e),submenu:this}),super._drawSubmenu(e),this._actions.onShown({rootItem:ze(e),submenu:this})}_hideSubmenu(e){this._actions.onHiding({cancel:!0,rootItem:ze(e),submenu:this}),super._hideSubmenu(e),this._actions.onHidden({rootItem:ze(e),submenu:this})}_showDelimiter(e){if(!this.$contentDelimiter)return;const t=this._itemContainer().children(".dx-submenu").eq(0),n=this.option("position").of.find(".dx-context-menu-container-border"),s={of:t,precise:!0},o=e.position,r=o.v.location,a=o.h.location,l=n.offset(),d=Math.round(l.left),c=Math.round(l.top),h=Ge(n),u=st(n),p=Ge(t),f=st(t);this.$contentDelimiter.css("display","block"),rm(this.$contentDelimiter,this._isMenuHorizontal()?h<p?h:p:3),Io(this.$contentDelimiter,this._isMenuHorizontal()?3:u<f?u:f),this._isMenuHorizontal()?r>c?Math.round(a)===d?(s.offset="0 -2.5",s.at=s.my="left top"):(s.offset="0 -2.5",s.at=s.my="right top"):(Io(this.$contentDelimiter,5),Math.round(a)===d?(s.offset="0 5",s.at=s.my="left bottom"):(s.offset="0 5",s.at=s.my="right bottom")):a>d?Math.round(r)===c?(s.offset="-2.5 0",s.at=s.my="left top"):(s.offset="-2.5 0",s.at=s.my="left bottom"):Math.round(r)===c?(s.offset="2.5 0",s.at=s.my="right top"):(s.offset="2.5 0",s.at=s.my="right bottom"),Un.setup(this.$contentDelimiter,s)}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}}const Ec="dx-menu-adaptive-mode",q$=`${Ec}-overlay-wrapper`,Y$={show:50,hide:300},Iy=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class Rf extends tg{_getDefaultOptions(){return Y(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),Y(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){const e=super._itemElements(),t=this._submenuItemElements();return e.add(t)}_submenuItemElements(){let e=[];const t=this._submenus.length&&this._submenus[0];return t&&t.itemsContainer()&&(e=t.itemsContainer().find(".dx-menu-item")),e}_focusTarget(){return this.$element()}_isMenuHorizontal(){return this.option("orientation")==="horizontal"}_moveFocus(e){const t=this._getAvailableItems(),n=this._isMenuHorizontal(),s=this._getActiveItem(!0);let o,r,a,l;switch(e){case"up":r=n?"showSubmenu":this._getItemsNavigationOperation("prevItem"),o=n?s:t,a=this._getKeyboardNavigationAction(r,o),l=a();break;case"down":r=n?"showSubmenu":this._getItemsNavigationOperation("nextItem"),o=n?s:t,a=this._getKeyboardNavigationAction(r,o),l=a();break;case"right":r=n?this._getItemsNavigationOperation("nextItem"):"showSubmenu",o=n?t:s,a=this._getKeyboardNavigationAction(r,o),l=a();break;case"left":r=n?this._getItemsNavigationOperation("prevItem"):"showSubmenu",o=n?t:s,a=this._getKeyboardNavigationAction(r,o),l=a();break;default:return super._moveFocus(e)}l&&l.length!==0&&this.option("focusedElement",ze(l))}_getItemsNavigationOperation(e){let t=e;return this.option("rtlEnabled")&&(t=e==="prevItem"?"nextItem":"prevItem"),t}_getKeyboardNavigationAction(e,t){let n=ue;switch(e){case"showSubmenu":t.hasClass("dx-state-disabled")||(n=this._showSubmenu.bind(this,t));break;case"nextItem":n=this._nextItem.bind(this,t);break;case"prevItem":n=this._prevItem.bind(this,t)}return n}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(e){e&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&this.option("orientation")==="horizontal"}_updateItemsWidthCache(){const e=this.$element().find("ul").first().children("li").children(".dx-menu-item");this._menuItemsWidth=this._getSummaryItemsSize("width",e,!0)}_dimensionChanged(){if(!this._isAdaptivityEnabled())return;const e=St(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>e)}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},ie(Iy,(e,t)=>{this._actions[t]=this._createActionByOption(t)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass("dx-menu"),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_isTargetOutOfComponent(e){const t=R(e).closest(".dx-menu").length!==0,n=R(e).closest(".dx-context-menu").length!==0;return!(t||n)}_focusOutHandler(e){const{relatedTarget:t}=e;t&&this._isTargetOutOfComponent(t)&&this._hideVisibleSubmenu(),super._focusOutHandler(e)}_renderHamburgerButton(){return this._hamburger=new $i(R("<div>").addClass("dx-menu-hamburger-button"),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(e){ht(e)&&(e=!this._overlay.option("visible")),this._overlay.option("visible",e),e&&this._treeView.focus(),this._toggleHamburgerActiveState(e)}_toggleHamburgerActiveState(e){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",e)}_toggleAdaptiveMode(e){const t=this.$element().find(".dx-menu-horizontal"),n=this.$element().find(`.${Ec}`);e?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(e)),t.toggle(!e),n.toggle(e)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){this._actions.onItemClick(e),e.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){const t=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>tI(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:n=>!R(n.target).closest(".dx-menu-hamburger-button").length,position:{collision:"flipfit",at:`bottom ${t}`,my:`top ${t}`,of:this._hamburger.$element()}}}_getTreeViewOptions(){const e={};return ie(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(t,n)=>{e[n]=this.option(n)}),ie(["onItemContextMenu","onSelectionChanged","onItemRendered"],(t,n)=>{e[n]=s=>{this._actions[n](s)}}),Y(e,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:t=>{this._overlay.repaint(),this._actions.onSubmenuShown(t)},onItemCollapsed:t=>{this._overlay.repaint(),this._actions.onSubmenuHidden(t)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click",_supportItemUrl:!0})}_initAdaptivity(){if(!this._isAdaptivityEnabled())return;this._$adaptiveContainer=R("<div>").addClass(Ec);const e=this._renderHamburgerButton();this._treeView=this._createComponent(R("<div>"),ud,this._getTreeViewOptions()),this._overlay=this._createComponent(R("<div>"),is,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass(Ec).addClass(this.option("cssClass")),this._overlay.$wrapper().addClass(q$),this._$adaptiveContainer.append(e),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}_getDelay(e){const{delay:t}=this.option("showFirstSubmenuMode");return U(t)?We(t)?t[e]:t:Y$[e]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){const e=R("<div>");return e.appendTo(this.$element()).addClass(this._isMenuHorizontal()?"dx-menu-horizontal":"dx-menu-vertical"),super._renderContainer(e)}_renderSubmenuItems(e,t){const n=this._createSubmenu(e,t);return this._submenus.push(n),this._renderBorderElement(t),n}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(e,t){const n=R("<div>").addClass("dx-context-menu").appendTo(t),s=this._getChildNodes(e),o=this._createComponent(n,op,Y(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:e.internalFields.key,items:s,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(t)}));return this._attachSubmenuHandlers(t,o),o}_getSubmenuOptions(){const e=R("<div>"),t=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:e,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:n=>{n.component.option("visible")&&this.option("focusedElement",n.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:t?null:this._moveMainMenuFocus.bind(this,"prevItem"),onLeftLastItem:t?null:this._moveMainMenuFocus.bind(this,"nextItem"),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,t?"prevItem":null),onExpandLastSubmenu:t?this._moveMainMenuFocus.bind(this,"nextItem"):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";const e=this.option("showFirstSubmenuMode");return We(e)?e.name:e}_moveMainMenuFocus(e){const t=this._getAvailableItems(),n=t.length,s=t.filter(".dx-menu-item-expanded").eq(0);let o=t.index(s);this._hideSubmenu(this._visibleSubmenu),o+=e==="prevItem"?-1:1,o>=n?o=0:o<0&&(o=n-1);const r=t.eq(o);this.option("focusedElement",ze(r))}_nestedItemOnSelectionChangedHandler(e){const t=e.addedItems.length&&e.addedItems[0],n=op.getInstance(e.element),{onSelectionChanged:s}=this._actions;s(e),t&&this._clearSelectionInSubmenus(t[0],n),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",t)}_clearSelectionInSubmenus(e,t){const n=!arguments.length;ie(this._submenus,(s,o)=>{const r=o._itemContainer(),a=!r.is(t&&t._itemContainer()),l=r.find(`.${this._selectedItemClass()}`);if(a&&l.length||n){l.removeClass(this._selectedItemClass());const d=this._getItemData(l);d&&(d.selected=!1),o._clearSelectedItems()}})}_clearRootSelection(){const e=this.$element().find(".dx-menu-items-container").first().children().children().filter(`.${this._selectedItemClass()}`);if(e.length){const t=this._getItemData(e);t.selected=!1,e.removeClass(this._selectedItemClass())}}_nestedItemOnItemClickHandler(e){this._actions.onItemClick(e)}_nestedItemOnItemRenderedHandler(e){this._actions.onItemRendered(e)}_attachSubmenuHandlers(e,t){const s=t.getOverlayContent().find(".dx-submenu"),o=be(Yl,`${this.NAME}_submenu`);t.option({onShowing:this._submenuOnShowingHandler.bind(this,e,t),onShown:this._submenuOnShownHandler.bind(this,e,t),onHiding:this._submenuOnHidingHandler.bind(this,e,t),onHidden:this._submenuOnHiddenHandler.bind(this,e,t)}),ie(s,(r,a)=>{q.off(a,o),q.on(a,o,null,this._submenuMouseLeaveHandler.bind(this,e))})}_submenuOnShowingHandler(e,t,n){let{rootItem:s}=n;const o=e.children(".dx-context-menu-container-border"),r=this._getVisibilityChangeEventParams(s,t,e);this._actions.onSubmenuShowing(r),o.show(),e.addClass("dx-menu-item-expanded")}_submenuOnShownHandler(e,t,n){let{rootItem:s}=n;const o=this._getVisibilityChangeEventParams(s,t,e);this._actions.onSubmenuShown(o)}_submenuOnHidingHandler(e,t,n){const s=e.children(".dx-context-menu-container-border"),o=this._getVisibilityChangeEventParams(n.rootItem,t,e,!0);n.itemData=o.itemData,n.rootItem=o.rootItem,n.submenuContainer=o.submenuContainer,n.submenu=o.submenu,this._actions.onSubmenuHiding(n),n.cancel||(this._visibleSubmenu===t&&(this._visibleSubmenu=null),s.hide(),e.removeClass("dx-menu-item-expanded"))}_submenuOnHiddenHandler(e,t,n){let{rootItem:s}=n;const o=this._getVisibilityChangeEventParams(s,t,e,!0);this._actions.onSubmenuHidden(o)}_getVisibilityChangeEventParams(e,t,n,s){let o,r;if(e){const a=s?R(e).closest(".dx-menu-item")[0]:e;o=this._getItemData(a),r=R(a).find(".dx-submenu").first()}else{const a=R(t._overlay.content());o=this._getItemData(n),r=a.find(".dx-submenu").first()}return{itemData:o,rootItem:ze(n),submenuContainer:ze(r),submenu:t}}_submenuMouseLeaveHandler(e,t){const n=R(t.relatedTarget).parents(".dx-context-menu")[0],s=this._getSubmenuByRootElement(e).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&n!==s&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(!this._visibleSubmenu)return;const e=R(this._visibleSubmenu.$element().context).hasClass("dx-state-hover"),t=this._visibleSubmenu.getOverlayContent().find(".dx-state-hover").length;!this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")&&!t&&!e&&this._visibleSubmenu.hide()}_getSubmenuByRootElement(e){if(!e)return!1;const t=e.children(".dx-context-menu");return t.length&&op.getInstance(t)}getSubmenuPosition(e){const t=this._isMenuHorizontal(),n=this.option("submenuDirection").toLowerCase(),s=this.option("rtlEnabled"),o={collision:"flip",of:e,precise:!0};switch(n){case"leftortop":o.at="left top",o.my=t?"left bottom":"right top";break;case"rightorbottom":o.at=t?"left bottom":"right top",o.my="left top";break;default:t?(o.at=s?"right bottom":"left bottom",o.my=s?"right top":"left top"):(o.at=s?"left top":"right top",o.my=s?"right top":"left top")}return o}_renderBorderElement(e){R("<div>").appendTo(e).addClass("dx-context-menu-container-border").hide()}_itemPointerDownHandler(e){if(R(e.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")){this.option("focusedElement",null);return}super._itemPointerDownHandler(e)}_hoverStartHandler(e){const t=be(Ct.move,this.NAME),n=this._getItemElementByEventArgs(e),s=this._dataAdapter.getNodeByItem(this._getItemData(n)),o=U(e.buttons)&&e.buttons===1||!U(e.buttons)&&e.which===1;if(!this._isItemDisabled(n)){if(q.off(n,t),!this._hasChildren(s)){this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide"));return}if(this._getShowFirstSubmenuMode()==="onHover"&&!o){const r=this._getSubmenuByElement(n);this._clearTimeouts(),r.isOverlayVisible()||(q.on(n,t,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}}_hoverEndHandler(e){const t=this._getItemElementByEventArgs(e),n=R(e.relatedTarget);super._hoverEndHandler(e),this._clearTimeouts(),!this._isItemDisabled(t)&&(n.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!n.hasClass("dx-menu-items-container")&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide"))))}_hideVisibleSubmenu(){return this._visibleSubmenu?(this._hideSubmenu(this._visibleSubmenu),!0):!1}_showSubmenu(e){const t=this._getSubmenuByElement(e);this._visibleSubmenu!==t&&this._hideVisibleSubmenu(),t&&(this._clearTimeouts(),this.focus(),t.show(),this.option("focusedElement",t.option("focusedElement"))),this._visibleSubmenu=t,this._hoveredRootItem=e}_hideSubmenu(e){e&&e.hide(),this._visibleSubmenu===e&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){if(e.pointers&&e.pointers.length)return;const t=R(e.currentTarget);U(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{const n=this._getSubmenuByElement(t);n&&!n.isOverlayVisible()&&this._showSubmenu(t)},this._getDelay("show")))}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(e,t){const n=this._getSubmenuByRootElement(e);if(n)return n;t=t??this._getItemData(e);const s=this._dataAdapter.getNodeByItem(t);return this._hasChildren(s)&&this._renderSubmenuItems(s,e)}_updateSubmenuVisibilityOnClick(e){const t=e.args.length&&e.args[0];if(!t||this._disabledGetter(t.itemData))return;const n=R(t.itemElement),s=this._getSubmenuByElement(n,t.itemData);if(this._updateSelectedItemOnClick(e),this._visibleSubmenu){if(this._visibleSubmenu===s){this.option("showFirstSubmenuMode")==="onClick"&&this._hideSubmenu(this._visibleSubmenu);return}this._hideSubmenu(this._visibleSubmenu)}s&&(s.isOverlayVisible()||this._showSubmenu(n))}_optionChanged(e){if(Iy.includes(e.name)){this._initActions();return}switch(e.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(e.name,e.value);break;case"adaptivityEnabled":e.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(e.name,e.value),this._overlay.option(e.name,e.value)),super._optionChanged(e),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!e.value),super._optionChanged(e);break;default:this._isAdaptivityEnabled()&&(e.name===e.fullName||e.name==="items")&&this._treeView.option(e.fullName,e.value),super._optionChanged(e)}}_changeSubmenusOption(e,t){ie(this._submenus,(n,s)=>{s.option(e,t)})}selectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}unselectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}}wt("dxMenu",Rf);const rp={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},Ty={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},X$="dx-filter-menu",ja="input:not([type='hidden'])",Z$=["date","datetime","number"],J$=re.format("dxDataGrid-ariaSearchBox");function ga(i){return i.option("filterRow.applyFilter")==="onClick"}const ap=function(i){const e=i&&i.children(),t=e&&e.data("dxComponents"),n=t&&t.length&&e.data(t[0]);return n instanceof ns?n:null},lp=function(i,e){let t="",n="";const s=Eg(i,e),o=Ce.getFormatOptionsByColumn(e,"filterRow");return Array.isArray(s)?(t=Ce.formatValue(s[0],o),n=Ce.formatValue(s[1],o),n!==""&&(t+=` - ${n}`)):U(s)&&(t=Ce.formatValue(s,o)),t};function Eg(i,e){if(e)return ga(i)&&e.bufferedFilterValue!==void 0?e.bufferedFilterValue:e.filterValue}const us=function(i,e){if(e)return ga(i)&&e.bufferedSelectedFilterOperation!==void 0?e.bufferedSelectedFilterOperation:e.selectedFilterOperation},Q$=function(i,e){return e&&Z$.includes(e.dataType)&&Array.isArray(i)?!1:i!==void 0},Mf=function(i,e,t){const n=i._columnsController.columnOption(e),s=Eg(i,n),o=t.closest(`.${i.addWidgetPrefix("filter-range-overlay")}`).length,r=t.hasClass(i.addWidgetPrefix("filter-range-start"));return s&&Array.isArray(s)&&us(i,n)==="between"?r?s[0]:s[1]:!o&&Q$(s,n)?s:null},e7=function(i,e,t,n){if(us(i,t)==="between"){const s=Eg(i,t);return n.hasClass(i.addWidgetPrefix("filter-range-start"))?[e,Array.isArray(s)?s[1]:void 0]:[Array.isArray(s)?s[0]:s,e]}return e},t7=function(i,e){const t=e.value===""?null:e.value,n=e.container,s=i._columnsController.columnOption(e.column.index),o=Mf(i,s.index,n);if(!U(o)&&!U(t))return;i._applyFilterViewController.setHighLight(n,o!==t);const r=ga(i)?"bufferedFilterValue":"filterValue",a=e7(i,t,s,n),l=us(i,s)==="between",d=e.notFireEvent||l&&Array.isArray(a)&&a.includes(void 0);i._columnsController.columnOption(s.index,r,a,d)},i7=i=>class extends i{init(){super.init(),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){switch(e.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;case"syncLookupFilterValues":e.value?this.updateLookupDataSource():this.render(),e.handled=!0;break;default:super.optionChanged(e)}}_updateEditorValue(e,t){const n=ap(t);n&&n.option("value",Mf(this,e.index,t))}_columnOptionChanged(e){const t=this,{optionNames:n}=e;let s,o,r,a;if(Ce.checkChanges(n,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&e.columnIndex!==void 0){const l=t._columnsController.getVisibleIndex(e.columnIndex),d=t._columnsController.columnOption(e.columnIndex);if(s=t._getCellElement(t.element().find(`.${t.addWidgetPrefix("filter-row")}`).index(),l)??R(),o=s.find(".dx-editor-container").first(),n.filterValue||n.bufferedFilterValue){t._updateEditorValue(d,o);const c=s.find(`.${t.addWidgetPrefix("filter-range-overlay")}`).data("dxOverlay");c&&(r=c.$content().find(".dx-editor-container"),t._updateEditorValue(d,r.first()),t._updateEditorValue(d,r.last())),(!c||!c.option("visible"))&&t._updateFilterRangeContent(s,lp(t,d))}(n.selectedFilterOperation||n.bufferedSelectedFilterOperation)&&l>=0&&d&&(a=s.find(".dx-menu"),a.length&&(t._updateFilterOperationChooser(a,d,o),us(t,d)==="between"?t._renderFilterRangeContent(s,d):o.find(".dx-filter-range-content").length&&(t._renderEditor(o,t._getEditorOptions(o,d)),t._hideFilterRange())));return}super._columnOptionChanged(e)}_renderCore(){return this._filterRangeOverlayInstance=null,super._renderCore.apply(this,arguments)}_resizeCore(){var e;super._resizeCore.apply(this,arguments),(e=this._filterRangeOverlayInstance)===null||e===void 0||e.repaint()}isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))}isVisible(){return super.isVisible()||this.isFilterRowVisible()}_initFilterRangeOverlay(e,t){const n=this,s={},o=e.find(".dx-editor-container"),r=n.addWidgetPrefix("filter-range-overlay"),a=R("<div>").addClass(r).appendTo(e);return n._createComponent(a,is,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:r},animation:!1,position:{my:"top",at:"top",of:o.length&&o||e,offset:"0 -1"},contentTemplate(l){let d,c=R("<div>").addClass(`dx-editor-container ${n.addWidgetPrefix("filter-range-start")}`).appendTo(l);return t=n._columnsController.columnOption(t.index),d=n._getEditorOptions(c,t),d.sharedData=s,n._renderEditor(c,d),q.on(c.find(ja),"keydown",h=>{let u=e.find("[tabindex]").not(h.target).first();oi(h)==="tab"&&h.shiftKey&&(h.preventDefault(),n._hideFilterRange(),u.length||(u=e.prev().find("[tabindex]").last()),q.trigger(u,"focus"))}),c=R("<div>").addClass(`dx-editor-container ${n.addWidgetPrefix("filter-range-end")}`).appendTo(l),d=n._getEditorOptions(c,t),d.sharedData=s,n._renderEditor(c,d),q.on(c.find(ja),"keydown",h=>{oi(h)==="tab"&&!h.shiftKey&&(h.preventDefault(),n._hideFilterRange(),q.trigger(e.next().find("[tabindex]").first(),"focus"))}),R(l).addClass(n.getWidgetContainerClass())},onShown(l){const d=l.component.$content().find(".dx-editor-container").first();q.trigger(d.find(ja),"focus")},onHidden(){t=n._columnsController.columnOption(t.index),e.find(".dx-menu").parent().addClass("dx-editor-with-menu"),us(n,t)==="between"&&(n._updateFilterRangeContent(e,lp(n,t)),n.component.updateDimensions())}})}_updateFilterRangeOverlay(e){const t=this._filterRangeOverlayInstance;t&&t.option(e)}_showFilterRange(e,t){const n=this,s=e.children(`.${n.addWidgetPrefix("filter-range-overlay")}`);let o=s.length&&s.data("dxOverlay");!o&&t&&(o=n._initFilterRangeOverlay(e,t)),o.option("visible")||(n._filterRangeOverlayInstance&&n._filterRangeOverlayInstance.hide(),n._filterRangeOverlayInstance=o,n._updateFilterRangeOverlay({width:St(e,!0)+1}),n._filterRangeOverlayInstance&&n._filterRangeOverlayInstance.show())}_hideFilterRange(){const e=this._filterRangeOverlayInstance;e&&e.hide()}getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance}_createRow(e){const t=super._createRow(e);return e.rowType==="filter"&&(t.addClass(this.addWidgetPrefix("filter-row")),this.option("useLegacyKeyboardNavigation")||q.on(t,"keydown",n=>um("filterRow",this,n))),t}_getRows(){const e=super._getRows();return this.isFilterRowVisible()&&e.push({rowType:"filter"}),e}_renderFilterCell(e,t){const n=this,{column:s}=t,o=R(e);n.component.option("showColumnHeaders")&&n.setAria("describedby",s.headerId,o),n.setAria("label",re.format("dxDataGrid-ariaFilterCell"),o),o.addClass("dx-editor-cell");const r=R("<div>").appendTo(o),a=R("<div>").addClass("dx-editor-container").appendTo(r);if(us(n,s)==="between")n._renderFilterRangeContent(o,s);else{const d=n._getEditorOptions(a,s);n._renderEditor(a,d)}const{alignment:l}=s;l&&l!=="center"&&o.find(ja).first().css("textAlign",s.alignment),s.filterOperations&&s.filterOperations.length&&n._renderFilterOperationChooser(r,s,a)}_renderCellContent(e,t){const n=this,{column:s}=t;if(t.rowType==="filter"){if(s.command)e.html("&nbsp;");else if(s.allowFiltering){n.renderTemplate(e,n._renderFilterCell.bind(n),t).done(()=>{n._updateCell(e,t)});return}}super._renderCellContent.apply(this,arguments)}_getEditorOptions(e,t){const n=this,s={editorOptions:{inputAttr:n._getFilterInputAccessibilityAttributes(t)}},o=Y(s,t,{value:Mf(n,t.index,e),parentType:"filterRow",showAllText:n.option("filterRow.showAllText"),updateValueTimeout:n.option("filterRow.applyFilter")==="onClick"?0:700,width:null,setValue(r,a){t7(n,{column:t,value:r,container:e,notFireEvent:a})}});return us(n,t)==="between"&&(e.hasClass(n.addWidgetPrefix("filter-range-start"))?o.placeholder=n.option("filterRow.betweenStartText"):o.placeholder=n.option("filterRow.betweenEndText")),o}_getFilterInputAccessibilityAttributes(e){const t=re.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":t,"aria-describedby":e.headerId}:{"aria-label":t}}_renderEditor(e,t){e.empty();const n=R("<div>").appendTo(e),s=this._dataController.dataSource();if(t.lookup&&this.option("syncLookupFilterValues")){this._applyFilterViewController.setCurrentColumnForFiltering(t);const o=this._dataController.getCombinedFilter();this._applyFilterViewController.setCurrentColumnForFiltering(null);const r=Ce.getWrappedLookupDataSource(t,s,o),a=ve({},t,{lookup:ve({},t.lookup,{dataSource:r})});return this._editorFactoryController.createEditor(n,a)}return this._editorFactoryController.createEditor(n,t)}_renderFilterRangeContent(e,t){const n=this,s=e.find(".dx-editor-container").first();s.empty();const o=R("<div>").addClass("dx-filter-range-content").attr("tabindex",this.option("tabIndex"));q.on(o,"focusin",()=>{n._showFilterRange(e,t)}),o.appendTo(s),n._updateFilterRangeContent(e,lp(n,t))}_updateFilterRangeContent(e,t){const n=e.find(".dx-filter-range-content");n.length&&(t===""?n.html("&nbsp;"):n.text(t))}_updateFilterOperationChooser(e,t,n){const s=this;let o;const r=function(){const l=Rf.getInstance(e);l&&l.option("focusedElement",null),o&&s._focusEditor(n)},a=this._editorFactoryController;s._createComponent(e,Rf,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:`${s.getWidgetContainerClass()} dx-cell-focus-disabled ${X$}`,showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(t.filterOperations&&t.filterOperations.length),icon:rp[us(s,t)||"default"],selectable:!1,items:s._getFilterOperationMenuItems(t)}],onItemRendered:l=>{let{itemElement:d}=l;this.setAria("label",J$,R(d))},onItemClick(l){const d=l.itemData.name,c=us(s,t);let h=!1;const u=ga(s),p={};if(!(l.itemData.items||d&&d===c)){if(d?(p[u?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=d,(d==="between"||c==="between")&&(h=d==="between",p[u?"bufferedFilterValue":"filterValue"]=null)):(p[u?"bufferedFilterValue":"filterValue"]=null,p[u?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=t.defaultSelectedFilterOperation||null),s._columnsController.columnOption(t.index,p),s._applyFilterViewController.setHighLight(n,!0),!d){const f=ap(n);f&&f.NAME==="dxDateBox"&&!f.option("isValid")&&(f.clear(),f.option("isValid",!0))}h?s._showFilterRange(n.closest(".dx-editor-cell"),t):s._focusEditor(n)}},onSubmenuShowing(){o=s._isEditorFocused(n),a.loseFocus()},onSubmenuHiding(){q.trigger(e,"blur"),r()},onContentReady(l){q.on(e,"blur",()=>{l.component._hideSubmenuAfterTimeout(),r()})},rtlEnabled:s.option("rtlEnabled")})}_isEditorFocused(e){return e.hasClass("dx-focused")||e.parents(".dx-focused").length}_focusEditor(e){this._editorFactoryController.focus(e),q.trigger(e.find(ja),"focus")}_renderFilterOperationChooser(e,t,n){const s=this;let o;s.option("filterRow.showOperationChooser")&&(e.addClass("dx-editor-with-menu"),o=R("<div>").prependTo(e),s._updateFilterOperationChooser(o,t,n))}_getFilterOperationMenuItems(e){const t=this;let n=[{}];const s=t.option("filterRow"),o=s&&s.operationDescriptions||{};if(e.filterOperations&&e.filterOperations.length){const r=e.filterOperations.filter(a=>U(Ty[a]));n=Ii(r,a=>{const l=Ty[a];return{name:a,selected:(us(t,e)||e.defaultFilterOperation)===a,text:o[l],icon:rp[a]}}),n.push({name:null,text:s&&s.resetOperationText,icon:rp.default})}return n}_handleDataChanged(e){var t,n,s,o,r;const a=(t=this._dataController)===null||t===void 0||(n=t.dataSource)===null||n===void 0?void 0:n.call(t),l=a==null||(s=a.lastLoadOptions)===null||s===void 0?void 0:s.call(a);if(super._handleDataChanged.apply(this,arguments),(o=e.operationTypes)!==null&&o!==void 0&&o.filtering||(r=e.operationTypes)!==null&&r!==void 0&&r.fullReload){var d;this.updateLookupDataSource(((d=e.operationTypes)===null||d===void 0?void 0:d.filtering)||(l==null?void 0:l.filter))}}updateLookupDataSource(e){if(!this.option("syncLookupFilterValues")||!this.element())return;const t=this._columnsController.getVisibleColumns(),n=this._dataController.dataSource(),s=this._applyFilterViewController,o=this.element().find(`.${this.addWidgetPrefix("filter-row")}`).index();o!==-1&&t.forEach((r,a)=>{if(!r.lookup||r.calculateCellValue!==r.defaultCalculateCellValue)return;const l=this._getCellElement(o,a),d=ap(l==null?void 0:l.find(".dx-editor-container"));if(d){s.setCurrentColumnForFiltering(r);const c=this._dataController.getCombinedFilter()||null;s.setCurrentColumnForFiltering(null);const h=d.option("dataSource");if(!e||!zt(h.__dataGridSourceFilter||null,c)){const p=Ce.getWrappedLookupDataSource(r,n,c);d.option("dataSource",p)}}})}},n7=i=>class extends i{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();const e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),n=this._applyFilterController;return ie(t,function(){var s;const o=((s=n.getCurrentColumnForFiltering())===null||s===void 0?void 0:s.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&U(this.filterValue)&&!o){const r=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");e.push(r)}}),Ce.combineFilters(e)}};class s7 extends Yt.ViewController{init(){this._columnsController=this.getController("columns")}_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel}setHighLight(e,t){ga(this)&&(e&&e.toggleClass("dx-highlight-outline",t)&&e.closest(".dx-editor-cell").toggleClass("dx-filter-modified",t),this._getHeaderPanel().enableApplyButton(t))}applyFilter(){const e=this._columnsController.getColumns();this._columnsController.beginUpdate();for(let t=0;t<e.length;t++){const n=e[t];n.bufferedFilterValue!==void 0&&(this._columnsController.columnOption(t,"filterValue",n.bufferedFilterValue),n.bufferedFilterValue=void 0),n.bufferedSelectedFilterOperation!==void 0&&(this._columnsController.columnOption(t,"selectedFilterOperation",n.bufferedSelectedFilterOperation),n.bufferedSelectedFilterOperation=void 0)}this._columnsController.endUpdate(),this.removeHighLights()}removeHighLights(){if(ga(this)){const e=this.getView("columnHeadersView").element();e.find(`.${this.addWidgetPrefix("filter-row")} .dx-highlight-outline`).removeClass("dx-highlight-outline"),e.find(`.${this.addWidgetPrefix("filter-row")} .dx-filter-modified`).removeClass("dx-filter-modified"),this._getHeaderPanel().enableApplyButton(!1)}}setCurrentColumnForFiltering(e){this._currentColumn=e}getCurrentColumnForFiltering(){return this._currentColumn}}const o7=i=>class extends i{_startResizing(){const e=this;if(super._startResizing.apply(e,arguments),e.isResizing()){const t=e._columnHeadersView.getFilterRangeOverlayInstance();if(t){const n=t.$element().closest("td").index();(n===e._targetPoint.columnIndex||n===e._targetPoint.columnIndex+1)&&t.$content().hide()}}}_endResizing(){const e=this;let t;if(e.isResizing()){const n=e._columnHeadersView.getFilterRangeOverlayInstance();n&&(t=n.$element().closest("td"),e._columnHeadersView._updateFilterRangeOverlay({width:St(t,!0)+1}),n.$content().show())}super._endResizing.apply(e,arguments)}},r7=i=>class extends i{updateFieldValue(e){return e.column.lookup&&(this._needUpdateLookupDataSource=!0),super.updateFieldValue.apply(this,arguments)}_afterSaveEditData(e){if(this._needUpdateLookupDataSource&&!e){var t;(t=this.getView("columnHeadersView"))===null||t===void 0||t.updateLookupDataSource()}return this._needUpdateLookupDataSource=!1,super._afterSaveEditData.apply(this,arguments)}_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,super._afterCancelEditData.apply(this,arguments)}},a7=i=>class extends i{init(){super.init(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){e.name==="filterRow"?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_getToolbarItems(){const e=super._getToolbarItems();return this._prepareFilterItem().concat(e)}_prepareFilterItem(){const e=this,t=[];if(e._isShowApplyFilterButton()){const n=e.option("filterRow.applyFilterText"),l={widget:"dxButton",options:{icon:"apply-filter",disabled:!e._columnsController.getColumns().filter(d=>d.bufferedFilterValue!==void 0).length,onClick:function(){e._applyFilterViewController.applyFilter()},hint:n,text:n,onInitialized:function(d){R(d.element).addClass(e._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10};t.push(l)}return t}_isShowApplyFilterButton(){const e=this.option("filterRow");return!!(e!=null&&e.visible)&&e.applyFilter==="onClick"}enableApplyButton(e){this.setToolbarItemDisabled("applyFilterButton",!e)}isVisible(){return super.isVisible()||this._isShowApplyFilterButton()}},l7={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:re.format("dxDataGrid-filterRowShowAllText"),resetOperationText:re.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:re.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:re.format("dxDataGrid-filterRowOperationEquals"),notEqual:re.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:re.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:re.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:re.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:re.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:re.format("dxDataGrid-filterRowOperationStartsWith"),contains:re.format("dxDataGrid-filterRowOperationContains"),notContains:re.format("dxDataGrid-filterRowOperationNotContains"),endsWith:re.format("dxDataGrid-filterRowOperationEndsWith"),between:re.format("dxDataGrid-filterRowOperationBetween"),isBlank:re.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:re.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:re.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:re.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:s7},extenders:{controllers:{data:n7,columnsResizer:o7,editing:r7},views:{columnHeadersView:i7,headerPanel:a7}}};He.registerModule("filterRow",l7);gr.setEditorClass(cd);function iI(i){i=i||[];for(let e=0;e<i.length;e++)i[e].selected=!1,iI(i[e].items)}function nI(i){const e=i.NAME==="dxTreeView"?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return i.$element().find(e).dxCheckBox("instance")}function Dy(i,e){if(i.component.option("searchValue"))return;const t=nI(i.component);t&&e&&e.length&&t.option("value",void 0)}function d7(i,e,t){if(e^t){if(i.selected=!0,t&&i.items){for(let n=0;n<i.items.length;n++)if(!i.items[n].selected){i.selected=void 0;break}}}else(t||i.selected)&&(i.selected=!1,iI(i.items))}class c7 extends Yt.View{getPopupContainer(){return this._popupContainer}getListComponent(){return this._listComponent}applyHeaderFilter(e){const t=this.getListComponent(),n=t.option("searchValue"),s=nI(t),o=!n&&!e.isFilterBuilder&&(s==null?void 0:s.option("value")),r=[],a=function(l,d,c){ie(d,(h,u)=>{if(u.selected!==void 0&&!!u.selected^c){const p=t._getNode(u),g=t._hasChildren(p)&&u.items&&u.items.some(m=>m.selected);if(!n||!g){l.push(u.value);return}}u.items&&u.items.length&&a(l,u.items,c)})};o?(e.type==="tree"&&(e.filterType="exclude"),Array.isArray(e.filterValues)&&(e.filterValues=[])):e.type==="tree"&&(e.filterType&&(e.filterType="include"),a(r,t.option("items"),!1),e.filterValues=r),e.filterValues&&!e.filterValues.length&&(e.filterValues=null),e.apply(),this.hideHeaderFilterMenu()}showHeaderFilterMenu(e,t){const n=this;if(t){n._initializePopupContainer(t);const s=n.getPopupContainer();n.hideHeaderFilterMenu(),n.updatePopup(e,t),s.show()}}hideHeaderFilterMenu(){const e=this.getPopupContainer();e&&e.hide()}updatePopup(e,t){const n=this,s=this.option("showColumnLines"),o=t.alignment==="right"^!s?"left":"right";n._popupContainer.setAria({role:"dialog",label:re.format("dxDataGrid-headerFilterLabel")}),n._popupContainer&&(n._cleanPopupContent(),n._popupContainer.option("position",{my:`${o} top`,at:`${o} bottom`,of:e,collision:"fit fit"}))}_getSearchExpr(e,t){const{lookup:n}=e,{useDefaultSearchExpr:s}=e,o=t.dataSource,r=t.search.searchExpr;if(r)return r;if(s||U(o)&&!Ee(o))return"text";if(n)return n.displayExpr||"this";if(e.dataSource){const{group:a}=e.dataSource;if(Array.isArray(a)&&a.length>0)return a[0].selector;if(Ee(a)&&!e.remoteFiltering)return a}return e.dataField||e.selector}_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()}_initializePopupContainer(e){const t=this,n=t.element(),s=this._normalizeHeaderFilterOptions(e),{height:o,width:r}=s,a={width:r,height:o,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:"dx-header-filter-menu"},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:s.texts.ok,onClick(){t.applyHeaderFilter(e)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:s.texts.cancel,onClick(){t.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(l){l.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(e,s),e.onShowing&&e.onShowing(l)},onShown(){t.getListComponent().focus()},onHidden:e.onHidden,onInitialized(l){const{component:d}=l;d.option("animation",d._getDefaultOptions().animation)}};U(t._popupContainer)?t._popupContainer.option(a):t._popupContainer=t._createComponent(n,io,a)}_initializeListContainer(e,t){const n=this,s=n._popupContainer.$content(),o=!e.isFilterBuilder&&t.allowSelectAll,r={searchEnabled:t.search.enabled,searchTimeout:t.search.timeout,searchEditorOptions:t.search.editorOptions,searchMode:t.search.mode||"",dataSource:e.dataSource,onContentReady(){n.renderCompleted.fire()},itemTemplate(l,d,c){const h=R(c);return e.encodeHtml?h.text(l.text):h.html(l.text)}};function a(l){l.fullName==="searchValue"&&o&&n.option("headerFilter.hideSelectAllOnSearch")!==!1&&(e.type==="tree"?l.component.option("showCheckBoxesMode",l.value?"normal":"selectAll"):l.component.option("selectionMode",l.value?"multiple":"all"))}e.type==="tree"?n._listComponent=n._createComponent(R("<div>").appendTo(s),ud,Y(r,{showCheckBoxesMode:o?"selectAll":"normal",onOptionChanged:a,keyExpr:"id"})):n._listComponent=n._createComponent(R("<div>").appendTo(s),wa,Y(r,{searchExpr:n._getSearchExpr(e,t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:o?"all":"multiple",onOptionChanged:a,onSelectionChanged(l){const d=l.component.option("items"),c=l.component.option("selectedItems");if(!l.component._selectedItemsUpdating&&!l.component.option("searchValue")&&!e.isFilterBuilder){const h=e.filterValues||[],u=e.filterType==="exclude";c.length===0&&d.length&&(h.length<=1||u&&h.length===d.length-1)?(e.filterType="include",e.filterValues=[]):c.length===d.length&&(e.filterType="exclude",e.filterValues=[])}ie(d,(h,u)=>{const p=Ce.getIndexByKey(u,c,null)>=0;if(!!u.selected!==p){u.selected=p,e.filterValues=e.filterValues||[];const g=Ce.getIndexByKey(u.value,e.filterValues,null);g>=0&&e.filterValues.splice(g,1);const m=e.filterType==="exclude";p^m&&e.filterValues.push(u.value)}}),Dy(l,e.filterValues)},onContentReady(l){const{component:d}=l,c=d.option("items"),h=[];ie(c,function(){this.selected&&h.push(this)}),d._selectedItemsUpdating=!0,d.option("selectedItems",h),d._selectedItemsUpdating=!1,Dy(l,e.filterValues)}}))}_normalizeHeaderFilterOptions(e){const t=this.option("headerFilter")||{},n=e.headerFilter||{},s={search:{enabled:t.allowSearch,timeout:t.searchTimeout}},o={search:{enabled:n.allowSearch,mode:n.searchMode,timeout:n.searchTimeout}};return Y(!0,{},t,s,n,o)}_renderCore(){this.element().addClass("dx-header-filter-menu")}}const ju=function(i){return U(i.allowHeaderFiltering)?i.allowHeaderFiltering:i.allowFiltering},sI=i=>class extends i{optionChanged(e){if(e.name==="headerFilter"){const t=this.name==="columnHeadersView";this._invalidate(t,t),e.handled=!0}else super.optionChanged(e)}_applyColumnState(e){let t;const{rootElement:n}=e,{column:s}=e;if(e.name==="headerFilter"){if(n.find(".dx-header-filter").remove(),ju(s)){t=super._applyColumnState(e).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(s)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0);const o=re.format("dxDataGrid-headerFilterIndicatorLabel",s.caption);t.attr("aria-label",o),t.attr("aria-haspopup","dialog"),t.attr("role","button")}return t}return super._applyColumnState(e)}_isHeaderFilterEmpty(e){return!e.filterValues||!e.filterValues.length}_getIndicatorClassName(e){return e==="headerFilter"?"dx-header-filter":super._getIndicatorClassName(e)}_renderIndicator(e){const t=e.container,n=e.indicator;if(e.name==="headerFilter"){const s=this.option("rtlEnabled");if(t.children().length&&(!s&&e.columnAlignment==="right"||s&&e.columnAlignment==="left")){t.prepend(n);return}}super._renderIndicator(e)}},u7={month:i=>ct.getMonthNames()[i-1],quarter:i=>ct.format(new Date(2e3,3*i-1),"quarter")};function oI(i,e,t){return e=e||[],t=t||[],i.forEach(n=>{if(U(n.key)){const s=e.length===1;if(e.push(s?n.key-1:n.key),n.items)oI(n.items,e,t);else{const o=new Date(Date.UTC.apply(Date,e));t.push(o)}e.pop()}else t.push(null)}),t}function h7(i,e){const t=oI(i),n=dn(t),s=Ce.getHeaderFilterGroupParameters(ve({},e,{calculateCellValue:o=>o}));return qs.queryByOptions(n,{group:s}).toArray()}function p7(i){return(i==null?void 0:i.slice(-1))==="Z"||(i==null?void 0:i.slice(-3))==="'Z'"}const f7=function(i,e,t){const n=Er.getGroupInterval(e),s=Ce.getFormatOptionsByColumn(e,"headerFilter");return n&&(s.groupInterval=n[t],Ce.isDateType(e.dataType)?s.format=u7[n[t]]:e.dataType==="number"&&(s.getDisplayFormat=function(){const o={format:e.format,target:"headerFilter"},r=Ce.formatValue(i,o),a=i+n[t],l=Ce.formatValue(a,o);return r&&l?`${r} - ${l}`:""})),s};class m7 extends Yt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")}_updateSelectedState(e,t){let n=e.length;const s=t.filterType==="exclude";for(;n--;){const o=e[n];"items"in e[n]&&this._updateSelectedState(e[n].items,t),d7(o,Ce.getIndexByKey(e[n].value,t.filterValues,null)>-1,s)}}_normalizeGroupItem(e,t,n){let s,o;const{path:r}=n,{valueSelector:a}=n,{displaySelector:l}=n,{column:d}=n;return a&&l?(s=a(e),o=l(e)):(s=e.key,o=s),We(e)?e=Y({},e):e={},r.push(s),r.length===1?e.value=r[0]:e.value=r.join("/"),e.text=this.getHeaderItemText(o,d,t,n.headerFilterOptions),e}getHeaderItemText(e,t,n,s){let o=Ce.formatValue(e,f7(e,t,n));return o||(o=s.texts.emptyValue),o}_processGroupItems(e,t,n,s){const o=this;let r,a;const{column:l}=s,{lookup:d}=l,{level:c}=s;n=n||[],t=t||0,d&&(r=Nt(d.displayExpr),a=Nt(d.valueExpr));for(let h=0;h<e.length;h++)e[h]=o._normalizeGroupItem(e[h],t,{column:s.column,headerFilterOptions:s.headerFilterOptions,displaySelector:r,valueSelector:a,path:n}),"items"in e[h]&&(t===c||!U(e[h].value)?delete e[h].items:o._processGroupItems(e[h].items,t+1,n,s)),n.pop()}getDataSource(e){var t;const n=this._dataController.dataSource(),s=n==null?void 0:n.remoteOperations().grouping,o=Ce.getHeaderFilterGroupParameters(e,s),r=(t=e.headerFilter)===null||t===void 0?void 0:t.dataSource,a=this.option("headerFilter");let l=!1;const d={component:this.component};if(!n)return;if(U(r)&&!Ee(r))d.dataSource=Bo(r);else if(e.lookup)if(l=!0,this.option("syncLookupFilterValues")){this._currentColumn=e;const u=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource=Ce.getWrappedLookupDataSource(e,n,u)}else d.dataSource=Ce.normalizeLookupDataSource(e.lookup);else{const u=Array.isArray(o)?o.length-1:0;this._currentColumn=e;const p=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource={filter:p,group:o,useDefaultSearch:!0,load:f=>{const g=new ae;return f.dataField=e.dataField||e.name,n.load(f).done(m=>{s&&p7(e.serializationFormat)&&u>3&&(m=h7(m,e)),h._processGroupItems(m,null,null,{level:u,column:e,headerFilterOptions:a}),g.resolve(m)}).fail(g.reject),g}}}Ee(r)&&r.call(e,d);const c=d.dataSource.postProcess,h=this;return d.dataSource.postProcess=function(u){let p=u;return l&&(p=p.filter(f=>f[e.lookup.valueExpr]!==null),this.pageIndex()===0&&!this.searchValue()&&(p=p.slice(0),p.unshift(null)),h._processGroupItems(p,null,null,{level:0,column:e,headerFilterOptions:a})),p=c&&c.call(this,p)||p,h._updateSelectedState(p,e),p},d.dataSource}getCurrentColumn(){return this._currentColumn}showHeaderFilterMenu(e,t){const n=this._columnsController,s=Y(!0,{},this._columnsController.getColumns()[e]);if(s){const o=n.getVisibleIndex(e),a=(t?this.getView("headerPanel"):this.getView("columnHeadersView")).getColumnElements().eq(t?s.groupIndex:o);this.showHeaderFilterMenuBase({columnElement:a,column:s,applyFilter:!0,apply(){n.columnOption(e,{filterValues:this.filterValues,filterType:this.filterType})}})}}showHeaderFilterMenuBase(e){const t=this,{column:n}=e;if(n){const s=Er.getGroupInterval(n),o=t._dataController.dataSource(),r=o&&o.remoteOperations().filtering,a=e.onHidden;Y(e,n,{type:s&&s.length>1?"tree":"list",remoteFiltering:r,onShowing:l=>{const d=l.component.$overlayContent().dxResizable("instance");d&&d.option("onResizeEnd",c=>{let h=this._columnsController.columnOption(e.dataField,"headerFilter");h=h||{},h.width=c.width,h.height=c.height,this._columnsController.columnOption(e.dataField,"headerFilter",h,!0)})},onHidden:()=>{a==null||a(),cm(this)}}),e.dataSource=t.getDataSource(e),e.isFilterBuilder&&(e.dataSource.filter=null,e.alignment="right"),t._headerFilterView.showHeaderFilterMenu(e.columnElement,e)}}hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}const g7=i=>class extends sI(i){_renderCellContent(e,t){const n=this;let s;const{column:o}=t;!o.command&&ju(o)&&n.option("headerFilter.visible")&&t.rowType==="header"&&(s=n._applyColumnState({name:"headerFilter",rootElement:e,column:o,showColumnLines:n.option("showColumnLines")}),s&&n._subscribeToIndicatorEvent(s,o,"headerFilter")),super._renderCellContent.apply(this,arguments)}_subscribeToIndicatorEvent(e,t,n){n==="headerFilter"&&q.on(e,kt,this.createAction(s=>{s.event.stopPropagation(),XC(e,this),this._headerFilterController.showHeaderFilterMenu(t.index,!1)}))}_updateIndicator(e,t,n){const s=super._updateIndicator(e,t,n);s&&this._subscribeToIndicatorEvent(s,t,n)}_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")}_needUpdateFilterIndicators(){return!0}_columnOptionChanged(e){const{optionNames:t}=e,n=Ce.checkChanges(t,["filterValues","filterValue"]),s=Ce.checkChanges(t,["filterValues","filterType"]);(n||s)&&this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators(),s||super._columnOptionChanged(e)}},_7=i=>class extends sI(i){_createGroupPanelItem(e,t){const n=this,s=super._createGroupPanelItem.apply(n,arguments);let o;return!t.command&&ju(t)&&n.option("headerFilter.visible")&&(o=n._applyColumnState({name:"headerFilter",rootElement:s,column:{alignment:Po(n.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0,caption:t.caption},showColumnLines:!0}),o&&q.on(o,kt,n.createAction(r=>{const{event:a}=r;a.stopPropagation(),this._headerFilterController.showHeaderFilterMenu(t.index,!0)}))),s}},b7=i=>class extends i{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();const e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),s=this._headerFilterController.getCurrentColumn();return ie(t,(o,r)=>{let a;if(!(s&&s.index===r.index)&&ju(r)&&r.calculateFilterExpression&&Array.isArray(r.filterValues)&&r.filterValues.length){let l=[];ie(r.filterValues,(d,c)=>{Array.isArray(c)?a=c:(r.deserializeValue&&!Ce.isDateType(r.dataType)&&r.dataType!=="number"&&(c=r.deserializeValue(c)),a=r.createFilterExpression(c,"=","headerFilter")),a&&(a.columnIndex=r.index),l.push(a)}),l=Ce.combineFilters(l,"or"),e.push(r.filterType==="exclude"?["!",l]:l)}}),Ce.combineFilters(e)}},v7={defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:re.format("dxDataGrid-headerFilterEmptyValue"),ok:re.format("dxDataGrid-headerFilterOK"),cancel:re.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:m7},views:{headerFilterView:c7},extenders:{controllers:{data:b7},views:{columnHeadersView:g7,headerPanel:_7}}};He.registerModule("headerFilter",v7);const Ku="dx-filterbuilder-range",y7=`${Ku}-start`,C7=`${Ku}-end`,x7=`${Ku}-separator`,rI="–";function w7(i,e){const t=R("<div>").addClass(y7),n=R("<div>").addClass(C7);let s=i.value||[];const o=function(a){return a&&a.length>0?a[0]:null},r=function(a){return a&&a.length===2?a[1]:null};e.append(t),e.append(R("<span>").addClass(x7).text(rI)),e.append(n),e.addClass(Ku),this._editorFactory.createEditor.call(this,t,Y({},i.field,i,{value:o(s),parentType:"filterBuilder",setValue(a){s=[a,r(s)],i.setValue(s)}})),this._editorFactory.createEditor.call(this,n,Y({},i.field,i,{value:r(s),parentType:"filterBuilder",setValue(a){s=[o(s),a],i.setValue(s)}}))}function Ay(i,e){return{name:"between",caption:i,icon:"range",valueSeparator:rI,dataTypes:["number","date","datetime"],editorTemplate:w7.bind(e),notForLookup:!0}}const S7={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},E7={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"},aI={getIconByFilterOperation:i=>S7[i],getNameByFilterOperation:i=>E7[i]},Ig="string",Oo="and",Tg="=",I7="<>",T7={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},D7={date:"shortDate",datetime:"shortDateShortTime"},A7=["=","<>","isblank","isnotblank"],k7=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"];function O7(i,e){const t=i.format||D7[i.dataType];return lw.format(e,t)}function vr(i){return i&&i.length>1&&i[0]==="!"&&!zi(i)}function No(i){return vr(i)?i[1]:i}function R7(i,e){return vr(i)?i[1]=e:i=e,i}function M7(i,e){(function(t){return t.indexOf("!")!==-1})(e)?vr(i)||function(t){const n=t.slice(0);t.length=0,t.push("!",n)}(i):vr(i)&&function(t){const n=No(t);t.length=0,[].push.apply(t,n)}(i)}function P7(i,e){M7(i,e);const t=No(i);let n;return e=function(s){return s.indexOf("!")===-1?s:s.substring(1)}(e),function(s,o){for(n=0;n<s.length;n++)Array.isArray(s[n])||(s[n]=o)}(t,e),i}function B7(i,e){const t=Or(i);return e.filter(n=>n.value===t)[0]}function lI(i){if(zi(i))return Oo;let e="";for(let t=0;t<i.length;t++){const n=i[t];if(!Array.isArray(n)){if(e&&e!==n)throw new Ei.Error("E4019");n!=="!"&&(e=n)}}return e}function Or(i){const e=No(i);let t=lI(e);return t||(t=Oo),e!==i&&(t=`!${t}`),t}function F7(i){return i.lookup&&A7||T7[i.dataType||Ig]}function V7(i){return Array.isArray(i)&&i.length}function dI(i){const e=V7(i.filterOperations)?i.filterOperations:F7(i);return Y([],e)}function Pf(i,e){const t=aI.getNameByFilterOperation(i);return e&&e[t]?e[t]:t}function N7(i,e){for(let t=0;t<e.length;t++)if(e[t].value===i)return e[t];throw new mt.Error("E1048",i)}function Ks(i,e){const t=i.filter(n=>n.name===e);return t.length?t[0]:null}function L7(i,e,t){const n=dI(i),s=!!i.lookup;return t.forEach(o=>{if(!i.filterOperations&&n.indexOf(o.name)===-1){const r=o&&o.dataTypes;!(s?!!o.notForLookup:!1)&&r&&r.indexOf(i.dataType||Ig)>=0&&n.push(o.name)}}),n.map(o=>{const r=Ks(t,o);return r?{icon:r.icon||"icon-none",text:r.caption||cr(r.name),value:r.name,isCustom:!0}:{icon:aI.getIconByFilterOperation(o)||"icon-none",text:Pf(o,e),value:o}})}function Dg(i){return i.defaultFilterOperation||dI(i)[0]}function $7(i,e){const t=[i.dataField,"",""],n=Dg(i);return Ff(t,n,e),t}function Bf(i,e){const t=No(i),n=t.indexOf(e);return t.splice(n,1),t.length!==1&&t.splice(n,1),i}function cI(i){const e=Ag(i),t=e?kg(i):i;return e?["!",[t]]:[t]}function ou(i,e){const t=No(e),n=Or(t);return t.length===1?t.unshift(i):t.push(i,n),e}function ru(i,e){for(let n=0;n<e.length;n++)if(e[n].name===i||e[n].dataField.toLowerCase()===i.toLowerCase())return e[n];const t=gI(e,!0).filter(n=>n.dataField.toLowerCase()===i.toLowerCase());if(t.length>0)return t[0];throw new mt.Error("E1047",i)}function Lo(i){return Array.isArray(i)?i.length<2||Array.isArray(i[0])||Array.isArray(i[1]):!1}function zi(i){return Array.isArray(i)?i.length>1&&!Array.isArray(i[0])&&!Array.isArray(i[1]):!1}function ky(i,e,t){t=t||Oo;const n=lI(i).toLowerCase()||t;let s=[];for(let o=0;o<i.length;o++)Lo(i[o])?(s.push(Og(i[o],e,t)),s=cp(s,n)):zi(i[o])&&(s.push(au(i[o],e)),s=cp(s,n));return s.length===0&&(s=cp(s,n)),s}function H7(i,e){const t=Ks(e,i[1]);return t&&t.name===i[1]}function au(i,e){return H7(i,e)||i.length<3&&(i[2]=i[1],i[1]=Tg),i}function Ag(i){return i.indexOf("not")!==-1}function kg(i){return i.substring(3).toLowerCase()}function dp(i,e){const t=Ag(e);return e=t?kg(e):e,t?["!",i,e]:[i,e]}function cp(i,e){const t=Ag(e);e=t?kg(e):e,i.push(e);let n=i;return t&&(n=["!",n]),n}function Og(i,e,t){return t=t||Oo,i?(i=Y(!0,[],i),zi(i)?dp(au(i,e),t):vr(i)?["!",zi(i[1])?dp(au(i[1],e),t):vr(i[1])?dp(Og(i[1],e),t):ky(i[1],e,t)]:ky(i,e,t)):cI(t)}function z7(i){return i.reduce((e,t)=>{if(U(t.dataField)){const n={};for(const s in t)t[s]&&k7.includes(s)&&(n[s]=t[s]);n.defaultCalculateFilterExpression=Er.defaultCalculateFilterExpression,U(n.dataType)||(n.dataType=Ig),U(n.trueText)||(n.trueText=re.format("dxDataGrid-trueText")),U(n.falseText)||(n.falseText=re.format("dxDataGrid-falseText")),e.push(n)}return e},[])}function Oy(i,e,t,n){const s=ru(i[0],e),o=au(i,t),r=t.length&&Ks(t,o[1]);return r&&r.calculateFilterExpression?r.calculateFilterExpression.apply(r,[o[2],s,e]):s.createFilterExpression?s.createFilterExpression.apply(s,[o[2],o[1],n]):s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[o[2],o[1],n]):s.defaultCalculateFilterExpression.apply(s,[o[2],o[1],n])}function _a(i,e,t,n){if(!U(i))return null;if(vr(i))return["!",_a(i[1],e,t,n)];const s=No(i);if(zi(s))return Oy(s,e,t,n)||null;let o=[],r;const a=Or(s);for(let l=0;l<s.length;l++)Lo(s[l])?(r=_a(s[l],e,t,n),r&&(l&&o.push(a),o.push(r))):zi(s[l])&&(r=Oy(s[l],e,t,n),r&&(o.length&&o.push(a),o.push(r)));return o.length===1&&(o=o[0]),o.length?o:null}function dl(i){const e=No(i);let t;if(e.length===0)return null;const n=[];for(t=0;t<e.length;t++)if(Lo(e[t])){const s=dl(e[t]);s?e[t]=s:n.push(e[t])}else zi(e[t])&&(j7(e[t])||n.push(e[t]));for(t=0;t<n.length;t++)Bf(e,n[t]);return e.length===1||(e.splice(e.length-1,1),e.length===1&&(i=R7(i,e[0])),i.length===0)?null:i}function uI(i,e,t){if(e===""){t("");return}const{lookup:n}=i;if(n.items)t(n.calculateCellValue(e)||"");else{const s=Ee(n.dataSource)?n.dataSource({}):n.dataSource;new Dn(s).loadSingle(n.valueExpr,e).done(r=>{let a="";r&&(a=n.displayExpr?Nt(n.displayExpr)(r):r),i.customizeText&&(a=i.customizeText({value:e,valueText:a})),t(a)}).fail(()=>{t("")})}}function hI(i,e,t,n,s){let o;return e===!0?o=i.trueText||re.format("dxDataGrid-trueText"):e===!1?o=i.falseText||re.format("dxDataGrid-falseText"):o=O7(i,e),i.customizeText&&(o=i.customizeText.call(i,{value:e,valueText:o,target:n})),t&&t.customizeText&&(o=t.customizeText.call(t,{value:e,valueText:o,field:i,target:n},s)),o}function W7(i,e,t,n){const s={values:e};return e.map(o=>hI(i,o,t,n,s))}function up(i){return i===""||i===null}function pI(i,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"filterBuilder";if(up(e))return"";if(Array.isArray(e)){const s=new ae;return De.apply(this,W7(i,e,t,n)).done(function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];const l=r.some(d=>!up(d))?r.map(d=>up(d)?"?":d):"";s.resolve(l)}),s}return hI(i,e,t,n)}function Ry(i,e){return i.some(t=>t.dataField===e)}function fI(i,e,t){const{dataField:n}=t;Rg(n)&&(t.parentId=_I(n),!Ry(e,t.parentId)&&!Ry(i,t.parentId)&&fI(i,e,{id:t.parentId,dataType:"object",dataField:t.parentId,caption:mI(t.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:Er.defaultCalculateFilterExpression})),e.push(t)}function mI(i,e){let t="";if(e)i=i.substring(i.lastIndexOf(".")+1);else if(Rg(i))return i.split(".").forEach((n,s,o)=>{t+=cr(n),s!==o.length-1&&(t+=".")}),t;return cr(i)}function gI(i,e){const t=[];for(let n=0;n<i.length;n++){const s=Y(!0,{caption:mI(i[n].dataField,e)},i[n]);s.id=s.name||s.dataField,e?fI(i,t,s):t.push(s)}return t}function Rg(i){return i.lastIndexOf(".")!==-1}function _I(i){return i.substring(0,i.lastIndexOf("."))}function bI(i,e){if(Rg(i.dataField)){const t=_I(i.dataField);for(let n=0;n<e.length;n++)if(e[n].dataField===t)return`${bI(e[n],e)}.${i.caption}`}return i.caption}function Ff(i,e,t){let n=Ks(t,e);return n?(n.hasValue===!1?(i[1]=e,i.length=2):(i[1]=e,i[2]=""),i):(e==="isblank"?(i[1]=Tg,i[2]=null):e==="isnotblank"?(i[1]=I7,i[2]=null):(n=Ks(t,i[1]),(n||i.length===2||i[2]===null)&&(i[2]=""),i[1]=e),i)}function My(i){let e;return i[2]===null?i[1]===Tg?e="isblank":e="isnotblank":e=i[1],e}function j7(i){return i[2]!==""}function K7(i,e,t){const n=Y(!0,[],i);let s=-1;return n.some((o,r)=>{if(o.name==="between")return s=r,!0}),s!==-1?n[s]=Y(Ay(e,t),n[s]):n.unshift(Ay(e,t)),n}function Ol(i,e){return i[0]===e}function Vf(i,e){return!i||i.length===0?null:zi(i)?Ol(i,e)?null:i:vI(i,[e],!1)}function vI(i,e,t){const n=[];return i.forEach(s=>{zi(s)?Ol(s,e[0])?t?(n.push(e),t=!1):n.splice(n.length-1,1):n.push(s):(n.length||Lo(s))&&n.push(s)}),n.length===0?null:(t&&(n.push(Oo),n.push(e)),n.length===1?n[0]:n)}function Py(i,e){return i===null||i.length===0?e:zi(i)?Ol(i,e[0])?e:[i,Oo,e]:Or(i)!==Oo?[e,"and",i]:vI(i,e,!0)}function G7(i,e){return i===null||i.length===0?[]:zi(i)?Ol(i,e)?[i]:[]:Or(i)!==Oo?[]:i.filter(s=>zi(s)&&Ol(s,e))}function yI(i,e){return i===null||i.length===0?!1:zi(i)?i[0]===e:i.some(t=>(zi(t)||Lo(t))&&yI(t,e))}const Nf=function(i,e,t){if(Array.isArray(e)){const n=e.length-1;i.empty(),e.forEach((s,o)=>{R("<span>").addClass("dx-filterbuilder-text-part").text(s).appendTo(i),o!==n&&R("<span>").addClass("dx-filterbuilder-text-separator").text(t&&t.valueSeparator?t.valueSeparator:"|").addClass("dx-filterbuilder-text-separator-empty").appendTo(i)})}else e?i.text(e):i.text(re.format("dxFilterBuilder-enterValueText"))};function CI(i){const e=function(s,o){return o?`${o}/${s}`:s},t=function(s,o){let r=[];return s.forEach(a=>{if(a.items){const l=t(a.items,e(a.text,o));r=r.concat(l)}a.selected&&r.push(e(a.text,o))}),r},n=i&&i.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(s,o,r){const a=[],l=s.length-1;return s&&s.forEach((d,c)=>{if(zi(d)||Lo(d)){const h=_a(d,r,[],"headerFilter");a.push(h)}else{const h=_a([o.dataField,"=",d],r,[],"headerFilter");a.push(h)}c!==l&&a.push("or")}),a.length===1?a[0]:a},editorTemplate(s,o){const r=R("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(o),a=Y(!0,{},i.columnOption(s.field.dataField));return Nf(r,s.text&&s.text.split("|")),a.filterType="include",a.filterValues=s.value?s.value.slice():[],n.showHeaderFilterMenuBase({columnElement:r,column:a,apply(){l=this.filterValues,s.setValue(l);var l;n.hideHeaderFilterMenu(),s.closeEditor()},onHidden(){s.closeEditor()},isFilterBuilder:!0}),o},customizeText:function(s,o){o=o||{};const{value:r}=s;let a=i.columnOption(s.field.dataField);const l=a&&a.headerFilter,d=a&&a.lookup,c=o.values||[r];if(l&&l.dataSource||d&&d.dataSource){const u=new ae,p=o.items||new ae;if(!o.items){a=Y({},a,{filterType:"include",filterValues:c});const f=n.getDataSource(a);f.paginate=!1;const g=new Dn(f),m=g.store().key();if(m){const{values:b}=o;if(b&&b.length>1){const _=b.reduce((w,E)=>(w.length&&w.push("or"),w.push([m,"=",E]),w),[]);g.filter(_)}else g.filter([m,"=",s.value])}else s.field.calculateDisplayValue&&mt.log("W1017");o.items=p,g.load().done(p.resolve)}return p.done(f=>{const g=c.indexOf(s.value);u.resolve(t(f,null)[g])}),u}return n.getHeaderItemText(r,a,0,i.option("headerFilter"))}}}function U7(i){return Y(CI(i),{name:"anyof",icon:"selectall",caption:re.format("dxFilterBuilder-filterOperationAnyOf")})}function q7(i){const e=CI(i);return Y({},e,{calculateFilterExpression(t,n,s){const o=e.calculateFilterExpression(t,n,s);return!o||o.length===0?null:o[0]==="!"?o:["!",o]},name:"noneof",icon:"unselectall",caption:re.format("dxFilterBuilder-filterOperationNoneOf")})}const Y7=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"];function bs(i){return i.name||i.dataField}function X7(i){i.forEach(e=>{const t=bs(e);if(!U(t)&&e.allowFiltering)throw new mt.Error("E1049",e.caption)})}const hp=function(){return{filterType:"include",filterValues:void 0}},xI=function(i){const e=i.filterValues||[];return!Er.getGroupInterval(i)&&!(i.headerFilter&&i.headerFilter.dataSource)||e.length===1&&e[0]===null},Z7=function(i,e){if(!i)return hp();let t;const n=i[1],s=i[2],o=Array.isArray(s);if(!o&&!xI(e))return hp();switch(n){case"anyof":case"=":t="include";break;case"noneof":case"<>":t="exclude";break;default:return hp()}return{filterType:t,filterValues:o?s:[s]}},By=function(i){const e=i.filterValue;if(U(e)){const t=i.selectedFilterOperation||i.defaultFilterOperation||Dg(i);return[bs(i),t,i.filterValue]}return null},Fy=function(i){let e,t;const{filterValues:n}=i;return n?(n.length===1&&xI(i)&&!Array.isArray(n[0])?(i.filterType==="exclude"?e="<>":e="=",t=n[0]):(i.filterType==="exclude"?e="noneof":e="anyof",t=n),[bs(i),e,t]):null},Vy=function(i,e,t){const n=Z7(t,e);i.columnOption(bs(e),n)},Ny=function(i,e,t){let n,s=t==null?void 0:t[1];const o=t==null?void 0:t[2],r=e.filterOperations||e.defaultFilterOperations;(!r||r.indexOf(s)>=0||s===e.defaultFilterOperation)&&Y7.includes(s)&&o!==null?(s===e.defaultFilterOperation&&!U(e.selectedFilterOperation)&&(s=e.selectedFilterOperation),n={filterValue:o,selectedFilterOperation:s}):n={filterValue:void 0,selectedFilterOperation:void 0},i.columnOption(bs(e),n)};class J7 extends Yt.Controller{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._dataController.isFilterSyncActive()&&(this._columnsController.isAllDataTypesDefined()?this._initSync():this._dataController.dataSourceChanged.add(()=>this._initSync()))}publicMethods(){return["getCustomFilterOperations"]}syncFilterValue(){const e=this,t=this._columnsController.getFilteringColumns();this._skipSyncColumnOptions=!0,t.forEach(n=>{const s=G7(e.option("filterValue"),bs(n));if(s.length===1){const o=s[0];Vy(this._columnsController,n,o),Ny(this._columnsController,n,o)}else U(n.filterValues)&&Vy(this._columnsController,n,null),U(n.filterValue)&&Ny(this._columnsController,n,null)}),this._skipSyncColumnOptions=!1}_initSync(){const e=this._columnsController.getColumns(),t=this._dataController.pageIndex();if(X7(e),!this.option("filterValue")){const n=this._columnsController.getFilteringColumns(),s=this.getFilterValueFromColumns(n);this._silentOption("filterValue",s)}this.syncFilterValue(),this._dataController.pageIndex(t)}_getSyncFilterRow(e,t){const n=By(t);return U(n)?Py(e,n):Vf(e,bs(t))}_getSyncHeaderFilter(e,t){const n=Fy(t);return n?Py(e,n):Vf(e,bs(t))}getFilterValueFromColumns(e){if(!this._dataController.isFilterSyncActive())return null;const t=["and"];return e&&e.forEach(n=>{const s=Fy(n),o=By(n);s&&ou(s,t),o&&ou(o,t)}),dl(t)}syncFilterRow(e,t){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),e))}syncHeaderFilter(e){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),e))}getCustomFilterOperations(){const e=this.option("filterBuilder.customOperations")??[];return[U7(this.component),q7(this.component)].concat(e)}}const Q7=i=>class extends i{optionChanged(e){switch(e.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this._filterSyncController.syncFilterValue(),e.handled=!0;break;case"filterSyncEnabled":e.handled=!0;break;case"columns":if(this.isFilterSyncActive()){const t=this._columnsController.getColumnByPath(e.fullName);if(t&&!this._filterSyncController._skipSyncColumnOptions){const n=this._parseColumnPropertyName(e.fullName);this._filterSyncController._skipSyncColumnOptions=!0,n==="filterType"?(e.value==="exclude"||e.previousValue==="exclude")&&this._filterSyncController.syncHeaderFilter(t):n==="filterValues"?this._filterSyncController.syncHeaderFilter(t):["filterValue","selectedFilterOperation"].includes(n)&&this._filterSyncController.syncFilterRow(t,t.filterValue),this._filterSyncController._skipSyncColumnOptions=!1}}super.optionChanged(e);break;default:super.optionChanged(e)}}isFilterSyncActive(){const e=this.option("filterSyncEnabled");return e==="auto"?this.option("filterPanel.visible"):e}skipCalculateColumnFilters(){return(U(this.option("filterValue"))||this._filterSyncController._skipSyncColumnOptions)&&this.isFilterSyncActive()}_calculateAdditionalFilter(){if(this.option("filterPanel.filterEnabled")===!1)return super._calculateAdditionalFilter();const e=[super._calculateAdditionalFilter()],t=this._columnsController.getFilteringColumns();let n=this.option("filterValue");if(this.isFilterSyncActive()){const r=this._headerFilterController.getCurrentColumn(),a=this._applyFilterController.getCurrentColumnForFiltering(),l=r||a;(r||U(a==null?void 0:a.filterValue))&&n&&(n=Vf(n,bs(l)))}const s=this._filterSyncController.getCustomFilterOperations(),o=_a(n,t,s,"filterBuilder");return o&&e.push(o),Ce.combineFilters(e)}_parseColumnPropertyName(e){const t=e.match(/.*\.(.*)/);return t?t[1]:null}clearFilter(e){this.component.beginUpdate(),arguments.length>0?(e==="filterValue"&&this.option("filterValue",null),super.clearFilter(e)):(this.option("filterValue",null),super.clearFilter()),this.component.endUpdate()}_applyFilter(){return this._filterSyncController._skipSyncColumnOptions?new ae().resolve():super._applyFilter.apply(this,arguments)}},eH=i=>class extends i{optionChanged(e){e.name==="filterValue"?this._updateHeaderFilterIndicators():super.optionChanged(e)}_isHeaderFilterEmpty(e){return this._dataController.isFilterSyncActive()?!yI(this.option("filterValue"),bs(e)):super._isHeaderFilterEmpty(e)}_needUpdateFilterIndicators(){return!this._dataController.isFilterSyncActive()}},tH={defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:J7},extenders:{controllers:{data:Q7},views:{columnHeadersView:eH}}};He.registerModule("filterSync",tH);const Ly="dx-filterbuilder-action-icon",Jd="dx-state-active",$y="filterBuilder",iH=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],Hy={and:"and",or:"or",notAnd:"!and",notOr:"!or"},nH=EE(class{});class wI extends Hi{_getDefaultOptions(){return Y(super._getDefaultOptions(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:re.format("dxFilterBuilder-and"),or:re.format("dxFilterBuilder-or"),notAnd:re.format("dxFilterBuilder-notAnd"),notOr:re.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:re.format("dxFilterBuilder-filterOperationBetween"),equal:re.format("dxFilterBuilder-filterOperationEquals"),notEqual:re.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:re.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:re.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:re.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:re.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:re.format("dxFilterBuilder-filterOperationStartsWith"),contains:re.format("dxFilterBuilder-filterOperationContains"),notContains:re.format("dxFilterBuilder-filterOperationNotContains"),endsWith:re.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:re.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:re.format("dxFilterBuilder-filterOperationIsNotBlank")}})}_optionChanged(e){switch(e.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(e.value!==e.previousValue){const t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:e.value,previousValue:e.previousValue}),this._disableInvalidateForValue=t}break;default:super._optionChanged(e)}}getFilterExpression(){const e=this._getNormalizedFields(),t=Y(!0,[],this._model);return _a(dl(t),e,this._customOperations,$y)}_getNormalizedFields(){return z7(this.option("fields"))}_updateFilter(){this._disableInvalidateForValue=!0;const e=Y(!0,[],this._model),t=dl(e),n=dl(this._getModel(this.option("value")));JSON.stringify(n)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()}_init(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),super._init()}_initEditorFactory(){this._editorFactory=new nH}_initCustomOperations(){this._customOperations=K7(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)}_getDefaultGroupOperation(){var e;return((e=this.option("groupOperations"))===null||e===void 0?void 0:e[0])??Hy.and}_getModel(e){return Og(e,this._customOperations,this._getDefaultGroupOperation())}_initModel(){this._model=this._getModel(this.option("value"))}_initActions(){const e=this;e._actions={},iH.forEach(t=>{const n=Y({},t.config);e._actions[t.name]=e._createActionByOption(t.name,n)})}executeAction(e,t){const n=this._actions[e];return n&&n(t)}_initMarkup(){this.$element().addClass("dx-filterbuilder"),super._initMarkup(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())}_createConditionElement(e,t){return R("<div>").addClass("dx-filterbuilder-group").append(this._createConditionItem(e,t))}_createGroupElementByCriteria(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=this._createGroupElement(e,t,n),o=s.find(".dx-filterbuilder-group-content"),r=No(e);for(let a=0;a<r.length;a++){const l=r[a];Lo(l)?this._createGroupElementByCriteria(l,e,n+1).appendTo(o):zi(l)&&this._createConditionElement(l,e).appendTo(o)}return s}_createGroupElement(e,t,n){const s=R("<div>").addClass("dx-filterbuilder-group-item"),o=R("<div>").addClass("dx-filterbuilder-group-content"),r=R("<div>").addClass("dx-filterbuilder-group").append(s).append(o);return t!=null&&this._createRemoveButton(()=>{Bf(t,e),r.remove(),this._updateFilter()}).appendTo(s),this._createGroupOperationButton(e).appendTo(s),this._createAddButton(()=>{const a=cI(this._getDefaultGroupOperation());ou(a,e),this._createGroupElement(a,e,n+1).appendTo(o),this._updateFilter()},()=>{const a=this.option("fields")[0],l=$7(a,this._customOperations);ou(l,e),this._createConditionElement(l,e).appendTo(o),this._updateFilter()},n).appendTo(s),r}_createButton(e){return R("<div>").text(e)}_createGroupOperationButton(e){const t=this._getGroupOperations(e);let n=B7(e,t);const s=n.text,o=t&&t.length<2?this._createButton(s).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:s,menu:{items:t,displayExpr:"text",keyExpr:"value",onItemClick:r=>{n!==r.itemData&&(P7(e,r.itemData.value),o.text(r.itemData.text),n=r.itemData,this._updateFilter())},onContentReady(r){r.component.selectItem(n)},cssClass:"dx-filterbuilder-group-operations"}});return o.addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-group-operation").attr("tabindex",0)}_createButtonWithMenu(e){const t=this,n=function(){t.$element().find(`.${Jd}`).removeClass(Jd),t.$element().find(".dx-overlay .dx-treeview").remove(),t.$element().find(".dx-overlay").remove()},s=this.option("rtlEnabled"),o=s?"right":"left",r=this._createButton(e.caption);Y(e.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(a=e.menu.onItemClick,function(l){a(l),l.event.type==="dxclick"&&n()}),onHiding(){r.removeClass(Jd)},position:{my:`${o} top`,at:`${o} bottom`,offset:"0 1",of:r,collision:"flip"},animation:null,onHidden(){n()},cssClass:`dx-filterbuilder-overlay ${e.menu.cssClass}`,rtlEnabled:s});var a;return e.popup={onShown(l){const d=R(l.component.content()).find(".dx-treeview"),c=d.dxTreeView("instance");q.on(d,"keyup keydown",h=>{const u=oi(h);(h.type==="keydown"&&u==="tab"||h.type==="keyup"&&(u==="escape"||u==="enter"))&&(l.component.hide(),q.trigger(e.menu.position.of,"focus"))}),c.focus(),c.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(r,()=>{n(),t._createPopupWithTreeView(e,t.$element()),r.addClass(Jd)}),r}_hasValueButton(e){const t=Ks(this._customOperations,e[1]);return t?t.hasValue!==!1:e[2]!==null}_createOperationButtonWithMenu(e,t){const n=this,s=L7(t,this.option("filterOperationDescriptions"),this._customOperations);let o=N7(My(e),s);const r=this._createButtonWithMenu({caption:o.text,menu:{items:s,displayExpr:"text",onItemRendered(a){a.itemData.isCustom&&R(a.itemElement).addClass("dx-filterbuilder-menu-custom-operation")},onContentReady(a){a.component.selectItem(o)},onItemClick:a=>{if(o!==a.itemData){o=a.itemData,Ff(e,o.value,n._customOperations);const l=r.siblings().filter(".dx-filterbuilder-item-value");n._hasValueButton(e)?(l.length!==0&&l.remove(),n._createValueButton(e,t).appendTo(r.parent())):l.remove(),r.text(o.text),this._updateFilter()}},cssClass:"dx-filterbuilder-operations"}}).addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-operation").attr("tabindex",0);return r}_createOperationAndValueButtons(e,t,n){this._createOperationButtonWithMenu(e,t).appendTo(n),this._hasValueButton(e)&&this._createValueButton(e,t).appendTo(n)}_createFieldButtonWithMenu(e,t,n){const s=this,o=this.option("allowHierarchicalFields"),r=gI(e,o);let a=ru(n.name||n.dataField,r);const l=function(c,h){return o?bI(c,h):c.caption},d=this._createButtonWithMenu({caption:l(a,r),menu:{items:r,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:c=>{if(a!==c.itemData){a=c.itemData,t[0]=a.name||a.dataField,t[2]=a.dataType==="object"?null:"",Ff(t,Dg(a),s._customOperations),d.siblings().filter(".dx-filterbuilder-text").remove(),s._createOperationAndValueButtons(t,a,d.parent());const h=l(a,c.component.option("items"));d.text(h),this._updateFilter()}},onContentReady(c){c.component.selectItem(a)},cssClass:"dx-filterbuilder-fields"}}).addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-field").attr("tabindex",0);return d}_createConditionItem(e,t){const n=R("<div>").addClass("dx-filterbuilder-group-item"),s=this._getNormalizedFields(),o=ru(e[0],s);return this._createRemoveButton(()=>{Bf(t,e),n.parent().children().length===1?n.parent().remove():n.remove(),this._updateFilter()}).appendTo(n),this._createFieldButtonWithMenu(s,e,o).appendTo(n),this._createOperationAndValueButtons(e,o,n),n}_getGroupOperations(e){let t=this.option("groupOperations");const n=this.option("groupOperationDescriptions");return(!t||!t.length)&&(t=[Or(e).replace("!","not")]),t.map(s=>({text:n[s],value:Hy[s]}))}_createRemoveButton(e){const t=R("<div>").addClass(Ly).addClass("dx-icon-remove").addClass("dx-filterbuilder-action").attr("tabindex",0);return this._subscribeOnClickAndEnterKey(t,e),t}_createAddButton(e,t,n){let s;const o=this.option("maxGroupLevel");return U(o)&&n>=o?(s=this._createButton(),this._subscribeOnClickAndEnterKey(s,t)):s=this._createButtonWithMenu({menu:{items:[{caption:re.format("dxFilterBuilder-addCondition"),click:t},{caption:re.format("dxFilterBuilder-addGroup"),click:e}],displayExpr:"caption",onItemClick(r){r.itemData.click()},cssClass:"dx-filterbuilder-add-condition"}}),s.addClass(Ly).addClass("dx-icon-plus").addClass("dx-filterbuilder-action").attr("tabindex",0)}_createValueText(e,t,n){const s=this,o=R("<div>").html("&nbsp;").addClass("dx-filterbuilder-item-value-text").attr("tabindex",0).appendTo(n),r=e[2],a=Ks(s._customOperations,e[1]);return!a&&t.lookup?uI(t,r,l=>{Nf(o,l)}):De(pI(t,r,a)).done(l=>{Nf(o,l,a)}),s._subscribeOnClickAndEnterKey(o,l=>{l.type==="keyup"&&l.stopPropagation(),s._createValueEditorWithEvents(e,t,n)}),o}_updateConditionValue(e,t,n){e[2]!==t&&(e[2]=t),n(),this._updateFilter()}_addDocumentKeyUp(e,t){let n=!1,s=!1;const o=_e.getDocument(),r=l=>{if(n||s){s=!1;return}t(l)};q.on(o,"keyup",r);const a=e.find("input");q.on(a,"compositionstart",()=>{n=!0}),q.on(a,"compositionend",()=>{n=!1,s=!0}),q.on(a,"keydown",l=>{l.which!==229&&(s=!1)}),this._documentKeyUpHandler=r}_addDocumentClick(e,t){const n=_e.getDocument(),s=o=>{this._isFocusOnEditorParts(e,o.target)||(q.trigger(e.find("input"),"change"),t())};q.on(n,"dxpointerdown",s),this._documentClickHandler=s}_isFocusOnEditorParts(e,t){const n=t||_e.getActiveElement();return R(n).closest(e.children()).length||R(n).closest(".dx-dropdowneditor-overlay").length}_removeEvents(){const e=_e.getDocument();U(this._documentKeyUpHandler)&&q.off(e,"keyup",this._documentKeyUpHandler),U(this._documentClickHandler)&&q.off(e,"dxpointerdown",this._documentClickHandler)}_dispose(){this._removeEvents(),super._dispose()}_createValueEditorWithEvents(e,t,n){let s=e[2];const o=()=>(n.empty(),this._removeEvents(),this._createValueText(e,t,n)),r=()=>{this._updateConditionValue(e,s,()=>{o()})},a={value:s===""?null:s,filterOperation:My(e),setValue(d){s=d===null?"":d},closeEditor:r,text:n.text()};n.empty();const l=this._createValueEditor(n,t,a);q.trigger(l.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(l,r),this._addDocumentKeyUp(l,d=>{const c=oi(d);if(c==="tab"){if(this._isFocusOnEditorParts(l))return;this._updateConditionValue(e,s,()=>{o(),d.shiftKey&&q.trigger(n.prev(),"focus")})}c==="escape"&&q.trigger(o(),"focus"),c==="enter"&&this._updateConditionValue(e,s,()=>{q.trigger(o(),"focus")})}),this._fireContentReadyAction()}_createValueButton(e,t){const n=R("<div>").addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-value");return this._createValueText(e,t,n),n}_createValueEditor(e,t,n){const s=R("<div>").attr("tabindex",0).appendTo(e),o=Ks(this._customOperations,n.filterOperation),r=o&&o.editorTemplate?o.editorTemplate:t.editorTemplate;return r?this._getTemplate(r).render({model:Y({field:t},n),container:s}):this._editorFactory.createEditor.call(this,s,Y({},t,n,{parentType:$y})),s}_createPopupWithTreeView(e,t){const n=this,s=R("<div>").addClass(e.menu.cssClass).appendTo(t);this._createComponent(s,io,{onHiding:e.menu.onHiding,onHidden:e.menu.onHidden,rtlEnabled:e.menu.rtlEnabled,position:e.menu.position,animation:e.menu.animation,contentTemplate(o){const r=R("<div>").appendTo(o);n._createComponent(r,ud,e.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:()=>tI(e.menu.position.of),visible:!0,focusStateEnabled:!1,preventScrollEvents:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:e.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:e.menu.cssClass})}_subscribeOnClickAndEnterKey(e,t){q.on(e,"dxclick",t),q.on(e,"keyup",n=>{oi(n)==="enter"&&t(n)})}}wt("dxFilterBuilder",wI);class sH extends Yt.View{init(){super.init(),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync")}optionChanged(e){switch(e.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_renderCore(){this._updatePopupOptions()}_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()}_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)}_initPopup(){const e=this;e._disposePopup(),e._filterBuilderPopup=e._createComponent(e.element(),io,Y({title:re.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:t=>e._getPopupContentTemplate(t),onOptionChanged(t){t.name==="visible"&&e.option("filterBuilderPopup.visible",t.value)},toolbarItems:e._getPopupToolbarItems()},e.option("filterBuilderPopup"),{onHidden(){cm(e),e._disposePopup()}}))}_getPopupContentTemplate(e){const t=R(e),n=R("<div>").appendTo(R(e));this._filterBuilder=this._createComponent(n,wI,Y({value:this.option("filterValue"),fields:this._columnsController.getFilteringColumns()},this.option("filterBuilder"),{customOperations:this._filterSyncController.getCustomFilterOperations()})),this._createComponent(t,rg,{direction:"both"})}_getPopupToolbarItems(){const e=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:re.format("OK"),onClick(){const t=e._filterBuilder.option("value");e.option("filterValue",t),e._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:re.format("Cancel"),onClick(){e._filterBuilderPopup.hide()}}}]}}const oH={defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:re.format("dxFilterBuilder-and"),or:re.format("dxFilterBuilder-or"),notAnd:re.format("dxFilterBuilder-notAnd"),notOr:re.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:re.format("dxFilterBuilder-filterOperationBetween"),equal:re.format("dxFilterBuilder-filterOperationEquals"),notEqual:re.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:re.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:re.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:re.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:re.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:re.format("dxFilterBuilder-filterOperationStartsWith"),contains:re.format("dxFilterBuilder-filterOperationContains"),notContains:re.format("dxFilterBuilder-filterOperationNotContains"),endsWith:re.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:re.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:re.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:sH}};He.registerModule("filterBuilder",oH);class rH extends Yt.View{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync"),this._dataController.dataSourceChanged.add(()=>this.render())}isVisible(){return this.option("filterPanel.visible")&&this._dataController.dataSource()}_renderCore(){const e=this.element();if(e.empty(),!!!this._columnsController.getColumns().length)return;e.addClass(this.addWidgetPrefix("filter-panel"));const n=R("<div>").addClass(this.addWidgetPrefix("filter-panel-left")).appendTo(e);this._renderFilterBuilderText(e,n)}_renderFilterBuilderText(e,t){const n=this._getFilterElement(),s=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){const o=this._getCheckElement(),r=this._getRemoveButtonElement();t.append(o).append(n).append(s),e.append(r);return}t.append(n).append(s)}_getCheckElement(){const e=this,t=R("<div>").addClass(this.addWidgetPrefix("filter-panel-checkbox"));return e._createComponent(t,_r,{value:e.option("filterPanel.filterEnabled"),onValueChanged(n){e.option("filterPanel.filterEnabled",n.value)}}),t.attr("title",this.option("filterPanel.texts.filterEnabledHint")),t}_getFilterElement(){const e=this,t=R("<div>").addClass("dx-icon-filter");return q.on(t,"click",()=>e._showFilterBuilder()),el("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_getTextElement(){const e=this,t=R("<div>").addClass(e.addWidgetPrefix("filter-panel-text"));let n;const s=e.option("filterValue");return s?De(e.getFilterText(s,this._filterSyncController.getCustomFilterOperations())).done(o=>{const r=e.option("filterPanel.customizeText");if(r){const a=r({component:e.component,filterValue:s,text:o});typeof a=="string"&&(o=a)}t.text(o)}):(n=e.option("filterPanel.texts.createFilter"),t.text(n)),q.on(t,"click",()=>e._showFilterBuilder()),el("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)}_getRemoveButtonElement(){const e=this,t=()=>e.option("filterValue",null),n=R("<div>").addClass(e.addWidgetPrefix("filter-panel-clear-filter")).text(e.option("filterPanel.texts.clearFilter"));return q.on(n,"click",t),el("filterPanel",this,n,void 0,t),e._addTabIndexToElement(n),n}_addTabIndexToElement(e){if(!this.option("useLegacyKeyboardNavigation")){const t=this.option("tabindex")||0;e.attr("tabindex",t)}}optionChanged(e){switch(e.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),e.handled=!0;break;case"filterPanel":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_getConditionText(e,t,n){let s=`[${e}] ${t}`;return U(n)&&(s+=n),s}_getValueMaskedText(e){return Array.isArray(e)?`('${e.join("', '")}')`:` '${e}'`}_getValueText(e,t,n){const s=new ae,o=t&&t.customizeText;if(U(n)||o)if(!o&&e.lookup)uI(e,n,r=>{s.resolve(this._getValueMaskedText(r))});else{const r=Array.isArray(n)?n:Ce.getDisplayValue(e,n,null);De(pI(e,r,t,"filterPanel")).done(a=>{s.resolve(this._getValueMaskedText(a))})}else s.resolve("");return s.promise()}getConditionText(e,t){const n=this,s=e[1],o=new ae,r=Ks(t.customOperations,s);let a;const l=ru(e[0],t.columns),d=l.caption||"",c=e[2];return r?a=r.caption||cr(r.name):c===null?a=Pf(s==="="?"isblank":"isnotblank",t.filterOperationDescriptions):a=Pf(s,t.filterOperationDescriptions),this._getValueText(l,r,c).done(h=>{o.resolve(n._getConditionText(d,a,h))}),o}getGroupText(e,t,n){const s=this,o=new ae,r=[],a=Or(e);return e.forEach(l=>{zi(l)?r.push(s.getConditionText(l,t)):Lo(l)&&r.push(s.getGroupText(l,t,!0))}),De.apply(this,r).done(function(){let l;for(var d=arguments.length,c=new Array(d),h=0;h<d;h++)c[h]=arguments[h];a.startsWith("!")?l=`${t.groupOperationDescriptions[`not${a.substring(1,2).toUpperCase()}${a.substring(2)}`].split(" ")[0]} ${c[0]}`:l=c.join(` ${t.groupOperationDescriptions[a]} `),n&&(l=`(${l})`),o.resolve(l)}),o}getFilterText(e,t){const n={customOperations:t,columns:this._columnsController.getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return zi(e)?this.getConditionText(e,n):this.getGroupText(e,n)}}const aH=i=>class extends i{optionChanged(e){e.name==="filterPanel"?(this._applyFilter(),e.handled=!0):super.optionChanged(e)}},lH={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:re.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:re.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:re.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:rH},extenders:{controllers:{data:aH}}};He.registerModule("filterPanel",lH);function SI(i){return!!(i.allowSearch??i.allowFiltering)}function EI(i,e){const{lookup:t}=i;return i.parseValue?t?i.parseValue.call(t,e):i.parseValue(e):e}const dH=i=>class extends i{optionChanged(e){switch(e.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return super.publicMethods().concat(["searchByText"])}_calculateAdditionalFilter(){const e=super._calculateAdditionalFilter(),t=this.calculateSearchFilter(this.option("searchPanel.text"));return Ce.combineFilters([e,t])}searchByText(e){this.option("searchPanel.text",e)}calculateSearchFilter(e){let t,n;const s=this._columnsController.getColumns(),o=this.option("searchPanel.searchVisibleColumnsOnly");let r;const a=[];if(!e)return null;function l(d){const c=Nt(r.valueExpr);for(let h=0;h<d.length;h++){const u=c(d[h]);a.push(n.createFilterExpression(u,null,"search"))}}for(t=0;t<s.length;t++)if(n=s[t],!(o&&!n.visible)&&SI(n)&&n.calculateFilterExpression){r=n.lookup;const d=EI(n,e);r&&r.items?dn(r.items).filter(n.createFilterExpression.call({dataField:r.displayExpr,dataType:r.dataType,calculateFilterExpression:n.calculateFilterExpression},d,null,"search")).enumerate().done(l):d!==void 0&&a.push(n.createFilterExpression(d,null,"search"))}return a.length===0?["!"]:Ce.combineFilters(a,"or")}},cH=i=>class extends i{optionChanged(e){if(e.name==="searchPanel"){if(e.fullName==="searchPanel.text"){const t=this.getSearchTextEditor();t&&t.option("value",e.value)}else this._invalidate();e.handled=!0}else super.optionChanged(e)}_getToolbarItems(){const e=super._getToolbarItems();return this._prepareSearchItem(e)}_prepareSearchItem(e){const t=this,n=this._dataController,s=this.option("searchPanel");if(s&&s.visible){const o={template(r,a,l){const d=R("<div>").addClass(t.addWidgetPrefix("search-panel")).appendTo(l);t._editorFactoryController.createEditor(d,{width:s.width,placeholder:s.placeholder,parentType:"searchPanel",value:t.option("searchPanel.text"),updateValueTimeout:700,setValue(c){n.searchByText(c)},editorOptions:{inputAttr:{"aria-label":re.format(`${t.component.NAME}-ariaSearchInGrid`)}}}),t.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40};e.push(o)}return e}getSearchTextEditor(){const e=this,t=e.element(),n=t.find(`.${e.addWidgetPrefix("search-panel")}`).filter(function(){return R(this).closest(`.${e.addWidgetPrefix("header-panel")}`).is(t)});return n.length?n.dxTextBox("instance"):null}isVisible(){const e=this.option("searchPanel");return super.isVisible()||!!(e!=null&&e.visible)}},uH=i=>class extends i{init(){super.init.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")}dispose(){clearTimeout(this._highlightTimer),super.dispose()}_getFormattedSearchText(e,t){const n=EI(e,t),s=Ce.getFormatOptionsByColumn(e,"search");return Ce.formatValue(n,s)}_getStringNormalizer(){var e,t,n;const s=this.option("searchPanel.highlightCaseSensitive"),o=(e=this._dataController)===null||e===void 0||(t=e.getDataSource)===null||t===void 0?void 0:t.call(e),r=o==null||(n=o.loadOptions)===null||n===void 0||(n=n.call(o))===null||n===void 0?void 0:n.langParams;return a=>Ki(a,s,r)}_findHighlightingTextNodes(e,t,n){var s;const o=this;let r=t.parent(),a;const l=this._getStringNormalizer(),d=l(n),c=[];if(!r.length)r=R("<div>").append(t);else if(e)if(e.groupIndex>=0&&!e.showWhenGrouped)a=t;else{const h=o._columnsController.getVisibleIndex(e.index);a=r.children("td").eq(h).find("*")}return a=(s=a)!==null&&s!==void 0&&s.length?a:r.find("*"),a.each((h,u)=>{const p=R(u).contents();for(let f=0;f<p.length;f++){const g=p.get(f);g.nodeType===3&&l(g.textContent??g.nodeValue??"").includes(d)&&c.push(g)}}),c}_highlightSearchTextCore(e,t){const n=this,s=R("<span>").addClass(n.addWidgetPrefix("search-text")),o=e.text(),r=e[0],a=this._getStringNormalizer(),l=a(o).indexOf(a(t));if(l>=0)return r.textContent?r.textContent=o.substr(0,l):r.nodeValue=o.substr(0,l),e.after(s.text(o.substr(l,t.length))),e=R(_e.createTextNode(o.substr(l+t.length))).insertAfter(s),n._highlightSearchTextCore(e,t)}_highlightSearchText(e,t,n){const s=this,o=this._getStringNormalizer();let r=s.option("searchPanel.text");t&&n&&(r=r&&s._getFormattedSearchText(n,r)),r&&s.option("searchPanel.highlightSearchText")&&s._findHighlightingTextNodes(n,e,r).forEach(l=>{t?o(R(l).text())===o(r??"")&&R(l).replaceWith(R("<span>").addClass(s.addWidgetPrefix("search-text")).text(R(l).text())):s._highlightSearchTextCore(R(l),r)})}_renderCore(){const e=super._renderCore.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),e}_updateCell(e,t){const{column:n}=t,o=(n.lookup&&n.lookup.dataType||n.dataType)!=="string";SI(n)&&!t.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(r=>{this._highlightSearchText.apply(this,r)}),this._searchParams=[]})),this._searchParams.push([e,o,n])):this._highlightSearchText(e,o,n)),super._updateCell(e,t)}},hH={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:re.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:dH},views:{headerPanel:cH,rowsView:uH}}};He.registerModule("search",hH);class pH extends dd{_optionChanged(e){switch(e.name){case"pageIndex":{const t=this.option("pageIndexChanged");t&&t(e.value);break}case"pageSize":{const t=this.option("pageSizeChanged");t&&t(e.value);break}}super._optionChanged(e)}}function fH(i){var e;const t=Je();return i?(e=t.getComputedStyle)===null||e===void 0?void 0:e.call(t,i):null}function Gs(i,e){const t=fH(e)??{};return $S(t[i])}function mH(i){const e=Gs("paddingLeft",i)+Gs("paddingRight",i);return Gs("width",i)-e}function Ic(i){const e=Gs("marginLeft",i)+Gs("marginRight",i),t=Gs("width",i);return e+t}function II(i){return Gs("minWidth",i)}const gH=["contentTemplate","pagerProps"],_H=i=>{let{contentAttributes:e,infoTextRef:t,infoTextVisible:n,isLargeDisplayMode:s,pageSizesRef:o,pagesRef:r,parentRef:a,props:{contentTemplate:l}}=i;return l(ve({rootElementRef:a,pageSizesRef:o,infoTextRef:t,pagesRef:r,infoTextVisible:n,isLargeDisplayMode:s},e))};function bH(i){let{pageSizes:e,pages:t,parent:n}=i;return n-(e+t)>0}function vH(i){let{info:e,pageSizes:t,pages:n,parent:s}=i;const o=t+n+e;return s-o>0}function yH(i){let{info:e,pageSizes:t,pages:n,parent:s}=i;const o=mH(s),r=Ic(t),a=Ic(e),l=Ic(n);return{parent:o,pageSizes:r,info:a+Gs("marginLeft",e)+Gs("marginRight",e),pages:l}}const CH={},xH=i=>i&&(i.defaultProps?e=>xn(Jt(2,i,ve({},e))):i);class TI extends to{constructor(e){super(e),this.parentRef=Ni(),this.pageSizesRef=Ni(),this.infoTextRef=Ni(),this.pagesRef=Ni(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new ai(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new ai(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var e,t;(e=this._effects[0])===null||e===void 0||e.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),(t=this._effects[1])===null||t===void 0||t.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){const e=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return hr.add(e),()=>{hr.remove(e)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){const{className:e,displayMode:t,gridCompatibility:n,hasKnownLastPage:s,infoText:o,label:r,lightModeEnabled:a,maxPagesCount:l,onKeyDown:d,pageCount:c,pageIndex:h,pageIndexChange:u,pageSize:p,pageSizeChange:f,pageSizes:g,pagesCountText:m,pagesNavigatorVisible:b,rtlEnabled:_,showInfo:w,showNavigationButtons:E,showPageSizes:D,totalCount:B,visible:$}=this.props.pagerProps;return ve({},this.restAttributes,{pageSize:p,pageIndex:h,pageIndexChange:u,pageSizeChange:f,gridCompatibility:n,className:e,showInfo:w,infoText:o,lightModeEnabled:a,displayMode:t,maxPagesCount:l,pageCount:c,pagesCountText:m,visible:$,hasKnownLastPage:s,pagesNavigatorVisible:b,showPageSizes:D,pageSizes:g,rtlEnabled:_,showNavigationButtons:E,totalCount:B,onKeyDown:d,label:r})}get parentWidth(){return this.parentRef.current?Ic(this.parentRef.current):0}updateAdaptivityProps(){const e=yH({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible!==this.state.infoTextVisible||this.actualIsLargeDisplayMode!==this.state.isLargeDisplayMode)return;const t=!U(this.elementsWidth);t&&(this.elementsWidth={}),(t||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=e.pageSizes,this.elementsWidth.pages=e.pages),(t||this.state.infoTextVisible)&&(this.elementsWidth.info=e.info),this.actualIsLargeDisplayMode=bH(ve({parent:e.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=vH(ve({},e,{info:this.elementsWidth.info})),this.setState(n=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(n=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}get restAttributes(){const e=this.props;return ei(e,gH)}render(){const e=this.props;return _H({props:ve({},e,{contentTemplate:xH(e.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}TI.defaultProps=CH;const DI={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return re.format("dxPager-ariaLabel")}},wH=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(DI),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),Mi=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(DI),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),SH=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],EH="dx-info",IH=i=>{let{props:{rootElementRef:e},text:t}=i;return bi(1,"div","dx-info",t,0,null,null,e)},TH={get pageIndex(){return Mi.pageIndex},get pageCount(){return Mi.pageCount},get totalCount(){return Mi.totalCount}};class AI extends Mn{constructor(e){super(e),this.state={}}get infoText(){return(this.props.infoText??"")||re.getFormatter("dxPager-infoText")()}get text(){const{pageCount:e,pageIndex:t,totalCount:n}=this.props;return vs(this.infoText,(t+1).toString(),e.toString(),n.toString())}get restAttributes(){const e=this.props;return ei(e,SH)}render(){const e=this.props;return IH({props:ve({},e),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}AI.defaultProps=TH;const cl=yS(void 0),DH=["children","className","label","onClick","selected","tabIndex"],AH=i=>{let{props:{children:e,className:t,label:n,selected:s,tabIndex:o},widgetRef:r}=i;return bi(1,"div",t,e,0,{tabIndex:o,role:"button","aria-label":n,"aria-current":s?"page":void 0},null,r)},kH={className:"",label:"",tabIndex:0,selected:!1};class Rl extends to{get keyboardContext(){return this.context[cl.id]?this.context[cl.id]:cl.defaultValue}constructor(e){super(e),this.state={},this.widgetRef=Ni(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}createEffects(){return[new ai(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new ai(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var e,t;(e=this._effects[0])===null||e===void 0||e.update([this.keyboardContext,this.props.onClick]),(t=this._effects[1])===null||t===void 0||t.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return WB(this.widgetRef.current,this.props.onClick)}get restAttributes(){const e=this.props;return ei(e,DH)}render(){const e=this.props;return AH({props:ve({},e),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}Rl.defaultProps=kH;const OH="dx-pager",RH="dx-light-mode",MH="dx-pages",PH="dx-page-indexes",BH="dx-page",FH="dx-selection",VH="dx-page-size",NH="dx-page-sizes",LH="dx-page-size dx-selection",$H="dx-first-child",HH=["className","index","onClick","selected"],zH=i=>{let{className:e,label:t,props:{onClick:n,selected:s},value:o}=i;return Jt(2,Rl,{className:e,label:t,onClick:n,selected:s,children:o})},WH={index:0,selected:!1,className:BH};class Mg extends Mn{constructor(e){super(e),this.state={}}get label(){return vs(re.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){const{selected:e}=this.props;return zn({[`${this.props.className}`]:!!this.props.className,[FH]:!!e})}get restAttributes(){const e=this.props;return ei(e,HH)}render(){const e=this.props;return zH({props:ve({},e),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}Mg.defaultProps=WH;const jH=["pageIndexes"],KH=["maxPagesCount","pageCount","pageIndex","pageIndexChange"],GH=i=>{let{pages:e}=i;const t=e.map(n=>{let{key:s,pageProps:o}=n;return o?Jt(2,Mg,{index:o.index,selected:o.selected,onClick:o.onClick},s):bi(1,"div","dx-separator",". . .",16,null,s)});return eo(t,0)};function zy(i,e,t){return i===1?"high":i+e===t-1?"low":"both"}function kI(i,e,t){let n=[],s=[];switch(t){case"none":n=[...i];break;case"both":n=[0,"low",...i,"high",e-1],s=i.slice(1,-1);break;case"high":n=[0,...i,"high",e-1],s=i.slice(0,-1);break;case"low":n=[0,"low",...i,e-1],s=i.slice(1)}return{slidingWindowIndexes:i,indexesForReuse:s,pageIndexes:n}}function Wy(i,e,t,n){const s=[];for(let o=0;o<e;o+=1)s.push(o+i);return kI(s,t,n)}const UH={get pageIndex(){return Mi.pageIndex},get maxPagesCount(){return Mi.maxPagesCount},get pageCount(){return Mi.pageCount}};class OI extends Mn{get config(){return this.context[ji.id]?this.context[ji.id]:ji.defaultValue}constructor(e){super(e),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get slidingWindowState(){const e=this.slidingWindowStateHolder;return e||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(e,t){const{indexesForReuse:n}=this.slidingWindowState,s=n.slice(-1)[0]<e-1,o=n.includes(t);return s&&o}generatePageIndexes(){const{pageCount:e,pageIndex:t}=this.props;let n=0;const{slidingWindowIndexes:s}=this.slidingWindowState;t===s[0]?n=t-1:t===s[s.length-1]?n=t+2-4:t<4?n=1:t>=e-4?n=e-4-1:n=t-1;const o=zy(n,4,e),r=Wy(n,4,e,o),{pageIndexes:a}=r,l=ei(r,jH);return this.slidingWindowStateHolder=l,a}isSlidingWindowMode(){const{maxPagesCount:e,pageCount:t}=this.props;return t<=4||t<=e}onPageClick(e){this.props.pageIndexChange(e)}get pageIndexes(){const{pageCount:e}=this.props;if(this.isSlidingWindowMode())return Wy(0,e,e,"none").pageIndexes;if(this.canReuseSlidingWindow(e,this.props.pageIndex)){const{slidingWindowIndexes:t}=this.slidingWindowState,n=zy(t[0],4,e);return kI(t,e,n).pageIndexes}return this.generatePageIndexes()}get pages(){var e;const{pageIndex:t}=this.props,n=o=>{const r=o==="low"||o==="high"?null:{index:o,onClick:()=>this.onPageClick(o),selected:t===o};return{key:o.toString(),pageProps:r}};return((e=this.config)!==null&&e!==void 0&&e.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(o=>n(o))}get restAttributes(){const e=this.props;return ei(e,KH)}render(){const e=this.props;return GH({props:ve({},e),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}OI.defaultProps=UH;const ca={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return Re.real().deviceType==="desktop"&&!Re.isSimulator()}},lu={label:"",get labelMode(){return tn(un())?"floating":"static"}},qH=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isDirty","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],YH=i=>{let{componentProps:e,restAttributes:t}=i;return xn(Jt(2,Lu,ve({componentType:eu,componentProps:e,templateNames:[]},t)))},sn=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(xi),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),XH={get defaultValue(){return sn.defaultValue},get readOnly(){return sn.readOnly},get name(){return sn.name},get validationError(){return sn.validationError},get validationErrors(){return sn.validationErrors},get validationMessageMode(){return sn.validationMessageMode},get validationMessagePosition(){return sn.validationMessagePosition},get validationStatus(){return sn.validationStatus},get isValid(){return sn.isValid},get isDirty(){return sn.isDirty},get inputAttr(){return sn.inputAttr},get className(){return sn.className},get activeStateEnabled(){return ca.activeStateEnabled},get disabled(){return sn.disabled},get focusStateEnabled(){return ca.focusStateEnabled},get hoverStateEnabled(){return ca.hoverStateEnabled},get tabIndex(){return sn.tabIndex},get visible(){return sn.visible},get label(){return lu.label},get labelMode(){return lu.labelMode},isReactComponentWrapper:!0};class RI extends Mn{constructor(e){super(e),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue}}get componentProps(){return ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value})}get restAttributes(){const e=ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value});return ei(e,qH)}render(){const e=this.props;return YH({props:ve({},e,{value:this.props.value!==void 0?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}RI.defaultProps=XH;function MI(i,e){return i+10*Math.max(...e).toString().length}const ZH=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],JH=`${EH}  dx-info-text`,QH=i=>{let{pageIndexRef:e,pagesCountText:t,props:{inputAttr:n,pageCount:s},selectLastPageIndex:o,value:r,valueChange:a,width:l}=i;return bi(1,"div","dx-light-pages",[Jt(2,RI,{className:"dx-page-index",min:1,max:Math.max(s,r),width:l,value:r,valueChange:a,inputAttr:n}),bi(1,"span",JH,t,0),Jt(2,Mg,{className:"dx-pages-count",selected:!1,index:s-1,onClick:o})],4,null,null,e)},ez={inputAttr:Object.freeze({"aria-label":re.format("dxPager-ariaPageNumber")})},tz={get pageIndex(){return Mi.pageIndex},get pageCount(){return Mi.pageCount},get inputAttr(){return ez.inputAttr}};class PI extends to{constructor(e){super(e),this.pageIndexRef=Ni(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new ai(this.updateWidth,[this.state.minWidth])]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.state.minWidth])}updateWidth(){var e;const t=(e=this.pageIndexRef.current)===null||e===void 0?void 0:e.querySelector(".dx-page-index");this.setState(n=>({minWidth:t&&II(t)||n.minWidth}))}get value(){return this.props.pageIndex+1}get width(){const{pageCount:e}=this.props;return MI(this.state.minWidth,[e])}get pagesCountText(){return(this.props.pagesCountText??"")||re.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(e){this.props.pageIndexChange(e-1)}get restAttributes(){const e=this.props;return ei(e,ZH)}render(){const e=this.props;return QH({props:ve({},e),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}PI.defaultProps=tz;const iz=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],nz=()=>re.getFormatter("dxPager-nextPage")(),sz=()=>re.getFormatter("dxPager-prevPage")(),oz={nextEnabledClass:"dx-navigate-button dx-next-button",prevEnabledClass:"dx-navigate-button dx-prev-button",nextDisabledClass:"dx-button-disable dx-navigate-button dx-next-button",prevDisabledClass:"dx-button-disable dx-navigate-button dx-prev-button"},rz={next:"prev",prev:"next"},az=i=>{let{nextButtonProps:e,pageIndexChange:t,prevButtonProps:n,props:{isLargeDisplayMode:s,maxPagesCount:o,pageCount:r,pageIndex:a,pagesCountText:l},renderNextButton:d,renderPrevButton:c}=i;return eo([c&&Jt(2,Rl,{label:sz(),className:n.className,tabIndex:n.tabIndex,onClick:n.navigate}),s&&Jt(2,OI,{maxPagesCount:o,pageCount:r,pageIndex:a,pageIndexChange:t}),!s&&Jt(2,PI,{pageCount:r,pageIndex:a,pageIndexChange:t,pagesCountText:l}),d&&Jt(2,Rl,{label:nz(),className:e.className,tabIndex:e.tabIndex,onClick:e.navigate})],0)};function lz(i){return i==="next"?1:-1}const dz={isLargeDisplayMode:!0},cz={get pageIndex(){return Mi.pageIndex},get maxPagesCount(){return Mi.maxPagesCount},get pageCount(){return Mi.pageCount},get hasKnownLastPage(){return Mi.hasKnownLastPage},get showNavigationButtons(){return Mi.showNavigationButtons},get totalCount(){return Mi.totalCount},get isLargeDisplayMode(){return dz.isLargeDisplayMode}};class BI extends Mn{get config(){return this.context[ji.id]?this.context[ji.id]:ji.defaultValue}constructor(e){super(e),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}pageIndexChange(e){this.canNavigateToPage(e)&&this.props.pageIndexChange(e)}getButtonProps(e){var t;const n=(t=this.config)!==null&&t!==void 0&&t.rtlEnabled?rz[e]:e,s=this.canNavigateTo(n);return{className:oz[`${e}${s?"Enabled":"Disabled"}Class`],tabIndex:s?0:-1,navigate:()=>this.navigateToPage(n)}}canNavigateToPage(e){return this.props.hasKnownLastPage?e>=0&&e<=this.props.pageCount-1:e>=0}getNextPageIndex(e){return this.props.pageIndex+lz(e)}canNavigateTo(e){return this.canNavigateToPage(this.getNextPageIndex(e))}navigateToPage(e){this.pageIndexChange(this.getNextPageIndex(e))}get renderPrevButton(){const{isLargeDisplayMode:e,showNavigationButtons:t}=this.props;return!e||t}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return this.__getterCache.prevButtonProps!==void 0?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return this.__getterCache.nextButtonProps!==void 0?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){const e=this.props;return ei(e,iz)}componentWillUpdate(e,t,n){(this.context[ji.id]!==n[ji.id]||this.props.hasKnownLastPage!==e.hasKnownLastPage||this.props.pageCount!==e.pageCount||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChange!==e.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[ji.id]!==n[ji.id]||this.props.hasKnownLastPage!==e.hasKnownLastPage||this.props.pageCount!==e.pageCount||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChange!==e.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){const e=this.props;return az({props:ve({},e),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}BI.defaultProps=cz;const uz=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],hz=i=>{let{componentProps:e,restAttributes:t}=i;return xn(Jt(2,Lu,ve({componentType:gg,componentProps:e,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},t)))},Gi=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(xi),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),pz={get placeholder(){return Gi.placeholder},get hoverStateEnabled(){return ca.hoverStateEnabled},get searchEnabled(){return Gi.searchEnabled},get defaultValue(){return Gi.defaultValue},get readOnly(){return Gi.readOnly},get name(){return Gi.name},get validationError(){return Gi.validationError},get validationErrors(){return Gi.validationErrors},get validationMessageMode(){return Gi.validationMessageMode},get validationMessagePosition(){return Gi.validationMessagePosition},get validationStatus(){return Gi.validationStatus},get isValid(){return Gi.isValid},get isDirty(){return Gi.isDirty},get inputAttr(){return Gi.inputAttr},get className(){return Gi.className},get activeStateEnabled(){return ca.activeStateEnabled},get disabled(){return Gi.disabled},get focusStateEnabled(){return ca.focusStateEnabled},get tabIndex(){return Gi.tabIndex},get visible(){return Gi.visible},get label(){return lu.label},get labelMode(){return lu.labelMode},isReactComponentWrapper:!0};class FI extends Mn{constructor(e){super(e),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue}}get componentProps(){return ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value})}get restAttributes(){const e=ve({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value});return ei(e,uz)}render(){const e=this.props;return hz({props:ve({},e,{value:this.props.value!==void 0?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}FI.defaultProps=pz;const fz=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],mz=i=>{let{props:{inputAttr:e,pageSize:t,pageSizeChange:n,pageSizes:s},width:o}=i;return Jt(2,FI,{displayExpr:"text",valueExpr:"value",dataSource:s,value:t,valueChange:n,width:o,inputAttr:e})},gz={inputAttr:Object.freeze({"aria-label":re.format("dxPager-ariaPageSize")})},_z={get pageSize(){return Mi.pageSize},get inputAttr(){return gz.inputAttr}};class VI extends to{constructor(e){super(e),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new ai(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(e=>({minWidth:II(this.props.parentRef.current)||e.minWidth}))}get width(){return MI(this.state.minWidth,this.props.pageSizes.map(e=>e.value))}get restAttributes(){const e=this.props;return ei(e,fz)}render(){const e=this.props;return mz({props:ve({},e),width:this.width,restAttributes:this.restAttributes})}}VI.defaultProps=_z;const bz=["pageSize","pageSizeChange","pageSizes"],vz=i=>{let{pageSizesText:e}=i;return eo(e.map(t=>{let{className:n,click:s,label:o,text:r}=t;return Jt(2,Rl,{className:n,label:o,onClick:s,children:r},r)}),0)},yz={get pageSize(){return Mi.pageSize}};class NI extends Mn{constructor(e){super(e),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return this.__getterCache.pageSizesText!==void 0?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{const{pageSize:e,pageSizes:t}=this.props;return t.map((n,s)=>{let{text:o,value:r}=n;return{className:zn({[r===e?LH:VH]:!0,[$H]:s===0}),click:this.onPageSizeChange(r),label:vs(re.getFormatter("dxPager-pageSize"),r||re.getFormatter("dxPager-pageSizesAllText")),text:o}})})()}onPageSizeChange(e){return()=>(this.props.pageSizeChange(e),this.props.pageSize)}get restAttributes(){const e=this.props;return ei(e,bz)}componentWillUpdate(e,t,n){(this.props.pageSize!==e.pageSize||this.props.pageSizes!==e.pageSizes||this.props.pageSizeChange!==e.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){const e=this.props;return vz({props:ve({},e),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}NI.defaultProps=yz;const Cz=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],xz=i=>{let{htmlRef:e,normalizedPageSizes:t,props:{isLargeDisplayMode:n,pageSize:s,pageSizeChange:o}}=i;return bi(1,"div",NH,[n&&Jt(2,NI,{pageSizes:t,pageSize:s,pageSizeChange:o}),!n&&Jt(2,VI,{parentRef:e,pageSizes:t,pageSize:s,pageSizeChange:o})],0,null,null,e)};function wz(){return re.getFormatter("dxPager-pageSizesAllText")()}const Sz={isLargeDisplayMode:!0},Ez={get pageSize(){return Mi.pageSize},get pageSizes(){return Mi.pageSizes},get isLargeDisplayMode(){return Sz.isLargeDisplayMode}};class LI extends to{constructor(e){super(e),this.state={},this.htmlRef=Ni(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new ai(this.setRootElementRef,[])]}setRootElementRef(){const{rootElementRef:e}=this.props;e&&(e.current=this.htmlRef.current)}get normalizedPageSizes(){return this.__getterCache.normalizedPageSizes!==void 0?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{const{pageSizes:e}=this.props;return e.map(t=>t==="all"||t===0?{text:wz(),value:0}:{text:String(t),value:t})})()}get restAttributes(){const e=this.props;return ei(e,Cz)}componentWillUpdate(e,t,n){super.componentWillUpdate(),this.props.pageSizes!==e.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){const e=this.props;return xz({props:ve({},e),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}LI.defaultProps=Ez;const Iz=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],Tz=i=>{let{aria:e,classes:t,infoVisible:n,isLargeDisplayMode:s,pageIndexSelectorVisible:o,pagesContainerVisibility:r,pagesContainerVisible:a,props:{hasKnownLastPage:l,infoText:d,infoTextRef:c,maxPagesCount:h,pageCount:u,pageIndex:p,pageIndexChange:f,pageSize:g,pageSizeChange:m,pageSizes:b,pageSizesRef:_,pagesCountText:w,pagesRef:E,rtlEnabled:D,showNavigationButtons:B,showPageSizes:$,totalCount:F,visible:N},restAttributes:L,widgetRootElementRef:j}=i;return xn(Jt(2,Vu,ve({rootElementRef:j,rtlEnabled:D,classes:t,visible:N,aria:e},L,{children:[$&&Jt(2,LI,{rootElementRef:_,isLargeDisplayMode:s,pageSize:g,pageSizeChange:m,pageSizes:b}),a&&bi(1,"div",MH,[n&&Jt(2,AI,{rootElementRef:c,infoText:d,pageCount:u,pageIndex:p,totalCount:F}),o&&bi(1,"div",PH,Jt(2,BI,{hasKnownLastPage:l,isLargeDisplayMode:s,maxPagesCount:h,pageCount:u,pageIndex:p,pageIndexChange:f,pagesCountText:w,showNavigationButtons:B,totalCount:F}),2,null,null,E)],0,{style:Qm({visibility:r})})]})))},Dz=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Mi),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));class $I extends to{constructor(e){super(e),this.state={},this.widgetRootElementRef=Ni(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new ai(this.setRootElementRef,[])]}getChildContext(){return ve({},this.context,{[cl.id]:this.keyboardAction||cl.defaultValue})}setRootElementRef(){const{rootElementRef:e}=this.props;e&&(e.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>e=>{var t,n;(t=(n=this.props).onKeyDown)===null||t===void 0||t.call(n,e)}}}get keyboardAction(){return this.__getterCache.keyboardAction!==void 0?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(e,t)=>{const n=this.createFakeInstance();return QC("pager",n,e,void 0,t)}}))()}get infoVisible(){const{infoTextVisible:e,showInfo:t}=this.props;return t&&e}get pageIndexSelectorVisible(){return this.props.pageSize!==0}get normalizedDisplayMode(){const{displayMode:e,lightModeEnabled:t}=this.props;return e==="adaptive"&&t!==void 0?t?"compact":"full":e}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if(this.props.pagesNavigatorVisible==="auto"&&this.props.pageCount===1&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){const e=this.normalizedDisplayMode;let t=!1;return e==="adaptive"?t=this.props.isLargeDisplayMode:t=e==="full",t}get classes(){const e={[`${this.props.className}`]:!!this.props.className,[OH]:!0,[RH]:!this.isLargeDisplayMode};return zn(e)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){const e=this.props;return ei(e,Iz)}componentWillUpdate(e,t,n){super.componentWillUpdate(),this.props.onKeyDown!==e.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){const e=this.props;return Tz({props:ve({},e),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}$I.defaultProps=Dz;const Az=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],kz=i=>{let{pagerProps:e,restAttributes:t}=i;return xn(Jt(2,TI,ve({contentTemplate:$I,pagerProps:e},t)))};let HI=class extends ad{constructor(e){super(e),this.__getterCache={},this.state={pageSize:this.props.pageSize!==void 0?this.props.pageSize:this.props.defaultPageSize,pageIndex:this.props.pageIndex!==void 0?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[ld()]}pageIndexChange(e){if(this.props.gridCompatibility){let t;this.setState(n=>(t=e+1,{pageIndex:t})),this.props.pageIndexChange(t)}else{let t;this.setState(n=>(t=e,{pageIndex:t})),this.props.pageIndexChange(t)}}get pageIndex(){return this.props.gridCompatibility?(this.props.pageIndex!==void 0?this.props.pageIndex:this.state.pageIndex)-1:this.props.pageIndex!==void 0?this.props.pageIndex:this.state.pageIndex}pageSizeChange(e){{let t;this.setState(n=>(t=e,{pageSize:t})),this.props.pageSizeChange(t)}}get className(){return this.props.gridCompatibility?zn({"dx-datagrid-pager":!0,[`${this.props.className}`]:!!this.props.className}):this.props.className}get pagerProps(){return this.__getterCache.pagerProps!==void 0?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>ve({},ve({},this.props,{pageSize:this.props.pageSize!==void 0?this.props.pageSize:this.state.pageSize,pageIndex:this.props.pageIndex!==void 0?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:e=>this.pageIndexChange(e),pageSizeChange:e=>this.pageSizeChange(e)}))()}get restAttributes(){const e=ve({},this.props,{pageSize:this.props.pageSize!==void 0?this.props.pageSize:this.state.pageSize,pageIndex:this.props.pageIndex!==void 0?this.props.pageIndex:this.state.pageIndex});return ei(e,Az)}componentWillUpdate(e,t,n){super.componentWillUpdate(),(this.props!==e||this.props.gridCompatibility!==e.gridCompatibility||this.props.className!==e.className||this.state.pageIndex!==t.pageIndex||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChange!==e.pageIndexChange||this.props.pageSizeChange!==e.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){const e=this.props;return kz({props:ve({},e,{pageSize:this.props.pageSize!==void 0?this.props.pageSize:this.state.pageSize,pageIndex:this.props.pageIndex!==void 0?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}};HI.defaultProps=wH;class zI extends pH{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return HI}}wt("dxPager",zI);const jy=function(i){return 1+(parseInt(i.pageIndex())||0)};class Oz extends Yt.View{init(){const e=this.getController("data");e.changed.add(t=>{if(t&&t.repaintChangesOnly){const n=this._pager;n?n.option({pageIndex:jy(e),pageSize:e.pageSize(),pageCount:e.pageCount(),totalCount:e.totalCount(),hasKnownLastPage:e.hasKnownLastPage()}):this.render()}else(!t||t.changeType!=="update"&&t.changeType!=="updateSelection"&&t.changeType!=="updateFocusedRow")&&(this._pager=null,this.render())})}dispose(){this._pager=null}optionChanged(e){const{name:t}=e,n=t==="pager",s=t==="paging",o=t==="dataSource",r=t==="scrolling",a=this.getController("data");if(n||s||r||o){if(e.handled=!0,a.skipProcessingPagingChange(e.fullName))return;(n||s)&&(this._pageSizes=null),o||(this._pager=null,this._invalidate(),qe()&&n&&this.component&&this.component.resize())}}_renderCore(){const e=this,t=e.element().addClass(e.addWidgetPrefix("pager")),n=e.option("pager")??{},s=e.getController("data"),o=e.getController("keyboardNavigation"),r={maxPagesCount:10,pageIndex:jy(s),pageCount:s.pageCount(),pageSize:s.pageSize(),showPageSizes:n.showPageSizeSelector,showInfo:n.showInfo,displayMode:n.displayMode,pagesNavigatorVisible:n.visible,showNavigationButtons:n.showNavigationButtons,label:n.label,pageSizes:e.getPageSizes(),totalCount:s.totalCount(),hasKnownLastPage:s.hasKnownLastPage(),pageIndexChanged(a){s.pageIndex()!==a-1&&s.pageIndex(a-1)},pageSizeChanged(a){s.pageSize(a)},onKeyDown:a=>o&&o.executeAction("onKeyDown",a),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};if(U(n.infoText)&&(r.infoText=n.infoText),this._pager){this._pager.repaint();return}qe()?this._pager=e._createComponent(t,zI,r):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')}getPager(){return this._pager}getPageSizes(){const e=this,t=e.getController("data"),n=e.option("pager"),s=n&&n.allowedPageSizes,o=t.pageSize();return(!U(e._pageSizes)||!e._pageSizes.includes(o))&&(e._pageSizes=[],n&&(Array.isArray(s)?e._pageSizes=s:s&&o>1&&(e._pageSizes=[Math.floor(o/2),o,2*o]))),e._pageSizes}isVisible(){const e=this.getController("data"),t=this.option("pager");let n=t&&t.visible;const s=this.option("scrolling");return n==="auto"&&(s&&(s.mode==="virtual"||s.mode==="infinite")?n=!1:n=e.pageCount()>1||e.isLoaded()&&!e.hasKnownLastPage()),!!n}getHeight(){return this.getElementHeight()}}const Rz={defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:re.format("dxPager-ariaLabel")}}),views:{pagerView:Oz}};He.registerModule("pager",Rz);const Ky="columns-separator-transparent",_n="dxDataGridResizingReordering",ul=function(i){return i.option("allowColumnResizing")||i.getController("columns").isColumnOptionUsed("allowResizing")},WI=function(i){return i.option("allowColumnReordering")||i.getController("columns").isColumnOptionUsed("allowReordering")};class Mz extends Yt.View{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){e.name==="allowColumnResizing"&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}_renderCore(){const e=super._renderCore();return this.element().addClass(this.addWidgetPrefix("tracker")),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){const e=this;e._positionChanged=function(t){const n=e.element();n&&n.hasClass(e.addWidgetPrefix("tracker"))&&(n.css({top:t.top}),Io(n,t.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}isVisible(){return ul(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(e){Io(this.element(),e)}}class jI extends Yt.View{_renderSeparator(){}_renderCore(e){const t=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),t}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){const t=this.element();if(t)if(U(e))Io(t,e);else return st(t)}width(e){const t=this.element();if(t)if(U(e))rm(t,e);else return Ge(t)}}class Pz extends jI{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){e.name==="allowColumnResizing"&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=ul(this),this.hide(!0))),super.optionChanged(e)}_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){const e=this;let t;e._positionChanged=function(n){t=e.element(),t&&(t.css({top:n.top}),Io(t,n.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=ul(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(WI(this)||ul(this))}show(){const e=this,t=this.element();t&&!e._isShown&&(e._isTransparent?t.removeClass(e.addWidgetPrefix(Ky)):t.show()),super.show()}hide(e){const t=this.element(),n=this.addWidgetPrefix(Ky);t&&(this._isShown||e)&&(this._isTransparent?(t.addClass(n),t.css("left",""),t.show()):(t.hasClass(n)&&t.removeClass(n),t.hide())),super.hide()}moveByX(e){const t=this.element();t&&t.css("left",e===null?0:e-this._parentElement().offset().left)}changeCursor(e){e=U(e)?e:"";const t=this.element();t&&t.css("cursor",e)}}class Bz extends jI{init(){super.init(),this.getController("data").loadingChanged.add(t=>{t||this.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass("dx-block-separator").html("&nbsp;")}hide(){const e=this,t=this._parentElement(),n=this.element();n&&this._isShown&&n.css("display","none"),t&&!t.children(".dx-block-separator").length&&t.prepend(e.element()),super.hide()}isVisible(){const e=this.option("groupPanel"),t=this.option("columnChooser");return e&&e.visible||t&&t.enabled}show(e){const t=this.element();if(t&&!this._isShown)switch(e){case"group":this.element().css("display","block");break;case"columnChooser":(function(n){li.stop(t,!0),li.animate(t,{type:"slide",from:{width:0,display:n.display},to:n,duration:300,easing:"swing"})})({width:"100%",display:"block"});break;default:t.css("display","")}super.show()}}class Fz extends Yt.View{init(){super.init();const e=this.getController("data");this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._columnsController=this.getController("columns"),this._isDragging=!1,e.loadingChanged.add(t=>{const n=this.element();!t&&n&&n.hide()})}isDragging(){return this._isDragging}_getDraggingPanelByPos(e){let t;return ie(this._dragOptions.draggingPanels,(n,s)=>{if(s){const o=s.getBoundingRect();if(o&&(o.bottom===void 0||e.y<o.bottom)&&(o.top===void 0||e.y>o.top)&&(o.left===void 0||e.x>o.left)&&(o.right===void 0||e.x<o.right))return t=s,!1}}),t}_renderCore(){this.element().addClass(`${this.addWidgetPrefix("drag-header")} ${this.addWidgetPrefix("text-content")} dx-widget`).hide()}_resetTargetColumnOptions(){const e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,t){return U(e)?{columnIndex:t,rowIndex:e}:t}dispose(){const e=this.element();this._dragOptions=null,e&&e.parent().find(`.${this.addWidgetPrefix("drag-header")}`).remove()}isVisible(){const e=this._columnsController.getCommonSettings();return this.option("showColumnHeaders")&&(WI(this)||e.allowGrouping||e.allowHiding)}dragHeader(e){const{columnElement:t}=e,n=!!e.sourceColumn.type;this._isDragging=!0,this._dragOptions=e,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:e.columnElement,sourceLocation:e.sourceLocation};const s=_e.getDocument();this._onSelectStart=s.onselectstart,s.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:t&&t.css("textAlign"),height:t&&(n&&t.get(0).clientHeight||st(t)),width:t&&(n&&t.get(0).clientWidth||Ge(t)),whiteSpace:t&&t.css("whiteSpace")}).addClass(this.addWidgetPrefix("drag-action")).toggleClass("dx-drag-command-cell",n).text(n?"":e.sourceColumn.caption),this.element().appendTo(Ww.getSwatchContainer(t))}moveHeader(e){const t=e.event,{that:n}=t.data,s=pi(t),o=n._columnsResizerViewController?n._columnsResizerViewController.isResizing():!1,r=n._dragOptions;if(n._isDragging&&!o){const a=n.element(),l=Math.abs(s.x-r.columnElement.offset().left-r.deltaX),d=Math.abs(s.y-r.columnElement.offset().top-r.deltaY);if(a.is(":visible")||l>5||d>5){a.show();const c=s.x-r.deltaX,h=s.y-r.deltaY;a.css({left:c,top:h}),n.dockHeader(s)}t.preventDefault()}}dockHeader(e){const t=this,n=t._getDraggingPanelByPos(e),s=t._controller,o=t._dropOptions,r=t._dragOptions;if(n){const a=t.option("rtlEnabled"),l=n.getName()==="columnChooser",d=l?"y":"x",c=n.getName(),h=c==="headers"?r.rowIndex:void 0,{sourceColumn:u}=r,p=n.getColumnElements(h,u==null?void 0:u.ownerBand)||[],f=r.pointsByTarget=r.pointsByTarget||{},g=c==="columnChooser"?[]:f[c]||s._generatePointsByColumns(Y({},r,{targetDraggingPanel:n,columns:n.getColumns(h),columnElements:p,isVerticalOrientation:l,startColumnIndex:c==="headers"&&R(p[0]).index()}));if(f[c]=g,o.targetLocation=c,g.length>0)for(let m=0;m<g.length;m++){const b=g[m+1]&&(g[m][d]+g[m+1][d])/2;if(b===void 0||(a&&d==="x"?e[d]>b:e[d]<b)){o.targetColumnIndex=t._getVisibleIndexObject(h,g[m].columnIndex),p[m]?(o.targetColumnElement=p.eq(m),o.isLast=!1):(o.targetColumnElement=p.last(),o.isLast=!0),o.posX=g[m].x,o.posY=g[m].y,s.dock(o);break}}else t._resetTargetColumnOptions(),s.dock(o)}}dropHeader(e){const t=e.event,{that:n}=t.data,s=n._controller;n.element().hide(),s&&n._isDragging&&s.drop(n._dropOptions),n.element().appendTo(n._parentElement()),n._dragOptions=null,n._dropOptions=null,n._isDragging=!1,_e.getDocument().onselectstart=n._onSelectStart||null}}const pp=function(i){return i.option("columnResizingMode")!=="widget"};class Vz extends Yt.ViewController{init(){this._subscribesToCallbacks=[],ul(this)&&this._init()}dispose(){this._unsubscribes(),super.dispose()}optionChanged(e){super.optionChanged(e),e.name==="allowColumnResizing"&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}_isHeadersRowArea(e){if(this._columnHeadersView){const t=this._columnHeadersView.element();if(t){const n=t.offset().top,s=this._columnHeadersView.getHeadersRowHeight();return e>=n&&e<=n+s}}return!1}_isRtlParentStyle(){var e;return this.option("rtlEnabled")&&((e=this._$parentContainer)===null||e===void 0?void 0:e.parent().css("direction"))==="rtl"}_pointCreated(e,t,n){const s=pp(this),o=this.option("rtlEnabled"),r=this._isRtlParentStyle(),a=!s&&o&&!r?0:1;if(e.index>=a&&e.index<t+(!s&&(!o||r)?1:0)){e.columnIndex-=a;const l=n[e.columnIndex]||{},d=n[e.columnIndex+1]||{};return!(s?l.allowResizing&&d.allowResizing:l.allowResizing)}return!0}_getTargetPoint(e,t,n){if(e){for(let s=0;s<e.length;s++)if(!(e[s].x===e[0].x&&e[s+1]&&e[s].x===e[s+1].x)&&e[s].x-n<=t&&t<=e[s].x+n)return e[s]}return null}_moveSeparator(e){var t;const n=e.event,s=n.data,o=s._columnsSeparatorView.width(),r=pp(s),a=o/2,l=s._$parentContainer.offset(),d=l.left,c=pi(n),h=s.option("rtlEnabled"),u=this._isRtlParentStyle(),p=(t=s._draggingHeaderView)===null||t===void 0?void 0:t.isDragging();if(s._isResizing&&s._resizingInfo){if((d<=c.x||!r&&u)&&(!r||c.x<=d+Ge(s._$parentContainer))&&s._updateColumnsWidthIfNeeded(c.x)){const f=s._columnHeadersView.getColumnElements().eq(s._resizingInfo.currentColumnIndex),g=f[0];if(g){const m=g.getBoundingClientRect().width;s._columnsSeparatorView.moveByX(f.offset().left+((r||u)&&h?0:m)),s._tablePositionController.update(s._targetPoint.y),n.preventDefault()}}}else p||(s._isHeadersRowArea(c.y)?(s._previousParentOffset&&(s._previousParentOffset.left!==l.left||s._previousParentOffset.top!==l.top)&&s.pointsByColumns(null),s._targetPoint=s._getTargetPoint(s.pointsByColumns(),c.x,o),s._previousParentOffset=l,s._isReadyResizing=!1,s._targetPoint?(s._columnsSeparatorView.changeCursor("col-resize"),s._columnsSeparatorView.moveByX(s._targetPoint.x-a),s._tablePositionController.update(s._targetPoint.y),s._isReadyResizing=!0,n.preventDefault()):(s._columnsSeparatorView.changeCursor(),s._columnsSeparatorView.moveByX(null))):(s.pointsByColumns(null),s._isReadyResizing=!1,s._columnsSeparatorView.changeCursor(),s._columnsSeparatorView.moveByX(null)))}_endResizing(e){const n=e.event.data;n._isResizing&&(n.pointsByColumns(null),n._resizingInfo=null,n._columnsSeparatorView.hide(),n._columnsSeparatorView.changeCursor(),n._trackerView.hide(),n._isReadyResizing=!1,n._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){const t=this._targetPoint.columnIndex,n=this._getNextColumnIndex(t),s=this._columnHeadersView.getHeaderElement(t),o=this._columnHeadersView.getHeaderElement(n);this._resizingInfo={startPosX:e,currentColumnIndex:t,currentColumnWidth:s&&s.length>0?yi(s[0]).width:0,nextColumnIndex:n,nextColumnWidth:o&&o.length>0?yi(o[0]).width:0}}_startResizing(e){const t=e.event,n=t.data,s=pi(t);if(Vl(t)&&(n._isHeadersRowArea(s.y)?(n._targetPoint=n._getTargetPoint(n.pointsByColumns(),s.x,10),n._targetPoint&&(n._columnsSeparatorView.moveByX(n._targetPoint.x-n._columnsSeparatorView.width()/2),n._isReadyResizing=!0)):n._isReadyResizing=!1),n._isReadyResizing){n._setupResizingInfo(s.x),n._isResizing=!0,n._tablePositionController.update(n._targetPoint.y),n._columnsSeparatorView.show(),n._trackerView.show();const o=n.component.getScrollable();o&&n._isRtlParentStyle()&&(n._scrollRight=Ge(o.$content())-Ge(o.container())-o.scrollLeft()),t.preventDefault(),t.stopPropagation()}this.isResizing()&&this._editorFactoryController.loseFocus()}_generatePointsByColumns(){const e=this,t=e._columnsController?e._columnsController.getVisibleColumns():[],n=e._columnHeadersView.getColumnElements();let s=[];n&&n.length>0&&(s=Ce.getPointsByColumns(n,o=>e._pointCreated(o,n.length,t))),e._pointsByColumns=s}_unsubscribeFromEvents(){this._moveSeparatorHandler&&q.off(_e.getDocument(),be(Ct.move,_n),this._moveSeparatorHandler),this._startResizingHandler&&q.off(this._$parentContainer,be(Ct.down,_n),this._startResizingHandler),this._endResizingHandler&&(q.off(this._columnsSeparatorView.element(),be(Ct.up,_n),this._endResizingHandler),q.off(_e.getDocument(),be(Ct.up,_n),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),q.on(_e.getDocument(),be(Ct.move,_n),this,this._moveSeparatorHandler),q.on(this._$parentContainer,be(Ct.down,_n),this,this._startResizingHandler),q.on(this._columnsSeparatorView.element(),be(Ct.up,_n),this,this._endResizingHandler),q.on(_e.getDocument(),be(Ct.up,_n),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){let t,n=!1,s=this._rowsView.contentWidth();const o=this._resizingInfo,r=this._columnsController,a=r.getVisibleColumns(),l=this._columnsSeparatorView.width(),d=pp(this),c=d&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),h=this.option("rtlEnabled"),u=this._isRtlParentStyle(),p=a[o.currentColumnIndex],f=a[o.nextColumnIndex];function g(w){return Ke(w)&&w.endsWith("%")}function m(w,E,D,B){if(w){const $=w.width;$&&(B=g($)),B?(r.columnOption(w.index,"visibleWidth",E),r.columnOption(w.index,"width",`${(E/D*100).toFixed(3)}%`)):(r.columnOption(w.index,"visibleWidth",null),r.columnOption(w.index,"width",E))}}t=e-o.startPosX,(d||u)&&h&&(t=-t);let{cellWidth:b,nextCellWidth:_}=function(w){let E,D,B;const $=o.currentColumnWidth+w,F=p&&p.minWidth||l,N={};return $>=F?N.cellWidth=$:(N.cellWidth=F,B=!0),d&&(D=o.nextColumnWidth-w,E=f&&f.minWidth||l,D>=E?B?N.nextCellWidth=o.nextColumnWidth-(w+F-$):N.nextCellWidth=D:(N.nextCellWidth=E,N.cellWidth=o.currentColumnWidth+(w-E+D))),N}(t);if(n=p.width!==b,n){if(r.beginUpdate(),b=Math.floor(b),s=function(w,E){if(E.every(B=>B.width)){const B=E.reduce(($,F)=>(g(F.width)&&($+=parseFloat(F.width)),$),0);B>100&&(w=w/B*100)}return w}(s,a),m(p,b,s,c),d)_=Math.floor(_),m(f,_,s,c);else{const w=this._columnHeadersView.getColumnWidths();if(w[o.currentColumnIndex]=b,!(w.reduce((D,B)=>D+B,0)>this._rowsView.contentWidth())){const D=Ce.getLastResizableColumnIndex(a);D>=0&&r.columnOption(a[D].index,"visibleWidth","auto")}for(let D=0;D<w.length;D++)a[D]&&a[D]!==p&&a[D].width===void 0&&r.columnOption(a[D].index,"width",w[D])}if(r.endUpdate(),!d){this.component.updateDimensions();const w=this.component.getScrollable();if(w&&u){const E=Ge(w.$content())-Ge(w.container())-this._scrollRight;w.scrollTo({left:E})}}}return n}_subscribeToCallback(e,t){e.add(t),this._subscribesToCallbacks.push({callback:e,handler:t})}_unsubscribeFromCallbacks(){for(let e=0;e<this._subscribesToCallbacks.length;e++){const t=this._subscribesToCallbacks[e];t.callback.remove(t.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){const e=()=>{this._isResizing||this.pointsByColumns(null)},t=o=>{this._scrollLeft!==o.left&&(this._scrollLeft=o.left,this.pointsByColumns(null))};this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._columnHeadersView=this.getView("columnHeadersView"),this._trackerView=this.getView("trackerView"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._editorFactoryController=this.getController("editorFactory"),this._draggingHeaderView=this.component.getView("draggingHeaderView"),this._$parentContainer=this.component.$element(),this._subscribeToCallback(this._columnHeadersView.renderCompleted,e),this._subscribeToCallback(this._columnHeadersView.resizeCompleted,e),this._subscribeToCallback(this._columnsSeparatorView.renderCompleted,()=>{this._unsubscribeFromEvents(),this._subscribeToEvents()}),this._subscribeToCallback(this._rowsView.renderCompleted,()=>{this._rowsView.scrollChanged.remove(t),this._rowsView.scrollChanged.add(t)});let n=this._rowsView.getScrollbarWidth()!==0,s=0;this._subscribeToCallback(this._tablePositionController.positionChanged,o=>{if(this._isResizing&&!this._rowsView.isResizing){const r=this._rowsView.getScrollbarWidth()!==0;n!==r||s&&s!==o.height?(n=r,s=o.height,this.component.updateDimensions()):this._rowsView.updateFreeSpaceRowHeight()}s=o.height})}isResizing(){return this._isResizing}pointsByColumns(e){if(e!==void 0)this._pointsByColumns=e;else return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns}}class Nz extends Yt.ViewController{constructor(e){super(e),this.positionChanged=Tt()}init(){super.init(),this._columnsResizerController=this.getController("columnsResizer"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView"),this._pagerView=this.getView("pagerView"),this._rowsView.resizeCompleted.add(()=>{if(this.option("allowColumnResizing")){const e=this._columnsResizerController._targetPoint;this.update(e?e.y:null)}})}update(e){const t={},n=this._columnHeadersView.element(),s=n&&n.offset(),o=s&&s.top||0,r=U(e)?Math.abs(e-o):0,a=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),d=this._rowsView?this._rowsView.height()-l:0,c=this.component.getView("draggingHeaderView");t.height=a,(this._columnsResizerController.isResizing()||c.isDragging())&&(t.height+=d-r),e!==null&&n&&n.length&&(t.top=n[0].offsetTop+r),this.positionChanged.fire(t)}}class Lz extends Yt.ViewController{init(){super.init(),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._columnHeadersView=this.getView("columnHeadersView"),this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._draggingHeaderView=this.getView("draggingHeaderView"),this._rowsView=this.getView("rowsView"),this._blockSeparatorView=this.getView("blockSeparatorView"),this._headerPanelView=this.getView("headerPanel"),this._columnChooserView=this.getView("columnChooserView");const e=()=>{if(this._draggingHeaderView){const t=[this._columnChooserView,this._columnHeadersView,this._headerPanelView];this._unsubscribeFromEvents(this._draggingHeaderView,t),this._subscribeToEvents(this._draggingHeaderView,t)}};this._columnHeadersView.renderCompleted.add(e),this._headerPanelView&&this._headerPanelView.renderCompleted.add(e),this._columnChooserView&&this._columnChooserView.renderCompleted.add(e)}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}_generatePointsByColumns(e){const t=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e),Ce.getPointsByColumns(e.columnElements,s=>t._pointCreated(s,e.columns,e.targetDraggingPanel.getName(),e.sourceColumn),e.isVerticalOrientation,e.startColumnIndex)}checkIsCustomGroupColumnPosition(e){let t=!0;for(let n=0;n<e.columns.length;n+=1){const s=e.columns[n];if(s.command==="expand"&&!t)return!0;s.command||(t=!1)}return!1}_pointCreated(e,t,n,s){const o=t[e.columnIndex],r=t[e.columnIndex-1],a=(r==null?void 0:r.command)==="expand",l=(o==null?void 0:o.command)==="expand"&&(r==null?void 0:r.command)!=="expand",d=s&&!s.allowReordering,c=!(o!=null&&o.allowReordering)&&!(r!=null&&r.allowReordering);switch(n){case"columnChooser":return!0;case"headers":if(d)return!0;if(!l)return a||c;if(this.isCustomGroupColumnPosition)return!1;for(;((h=t[e.columnIndex])===null||h===void 0?void 0:h.command)==="expand";){var h;e.columnIndex+=1}return!1;default:return t.length===0}}_subscribeToEvents(e,t){const n=this;ie(t,(s,o)=>{if(o){let r;const a=o.getRowCount?o.getRowCount():1,l=o.getName(),d=function(c,h){if(!h)return;const u=R(h),p=r[c];p&&o.allowDragging(p)&&(u.addClass(n.addWidgetPrefix("drag-action")),q.on(u,be(xl,_n),n.createAction(f=>{const g=f.event,m=pi(g);e.dragHeader({deltaX:m.x-R(g.currentTarget).offset().left,deltaY:m.y-R(g.currentTarget).offset().top,sourceColumn:p,index:p.index,columnIndex:c,columnElement:u,sourceLocation:l,draggingPanels:t,rowIndex:n._columnsController.getRowIndex(p.index,!0)})})),q.on(u,be(ma,_n),{that:e},n.createAction(e.moveHeader)),q.on(u,be(wl,_n),{that:e},n.createAction(e.dropHeader)))};for(let c=0;c<a;c++){const h=o.getColumnElements(c)||[];h.length&&(r=o.getColumns(c)||[],ie(h,d))}}})}_unsubscribeFromEvents(e,t){const n=this;ie(t,(s,o)=>{if(o){const r=o.getColumnElements()||[];ie(r,(a,l)=>{const d=R(l);q.off(d,be(xl,_n)),q.off(d,be(ma,_n)),q.off(d,be(wl,_n)),d.removeClass(n.addWidgetPrefix("drag-action"))})}})}_getSeparator(e){return e==="headers"?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){const t=this._blockSeparatorView,n=this._columnsSeparatorView;this._animationColumnIndex=void 0,t&&t.hide(),e!=="block"&&n&&n.hide()}allowDrop(e){return this._columnsController.allowMoveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}drag(e){const{sourceIndex:t}=e,{sourceLocation:n}=e,{sourceColumnElement:s}=e,o=this._columnHeadersView,r=this._rowsView;s&&(s.css({opacity:.5}),n==="headers"&&(o&&o.setRowsOpacity(t,.5),r&&r.setRowsOpacity(t,.5)))}dock(e){const t=this,n=We(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:s}=e,{targetLocation:o}=e,r=t._getSeparator(o),a=n>=0;t._columnHeadersView.element().find(".dx-header-row").toggleClass(t.addWidgetPrefix("drop-highlight"),s!=="headers"&&o==="headers"&&!a),r&&(t.allowDrop(e)&&a?o==="group"||o==="columnChooser"?function(){t._animationColumnIndex!==n&&(t.hideSeparators(),r.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),t._animationColumnIndex=n,r.show(o))}():(t.hideSeparators("block"),t._tablePositionController.update(e.posY),r.moveByX(e.posX-r.width()),r.show()):t.hideSeparators())}drop(e){const{sourceColumnElement:t}=e;if(t&&(t.css({opacity:""}),this._columnHeadersView.setRowsOpacity(e.sourceIndex,""),this._rowsView.setRowsOpacity(e.sourceIndex,""),this._columnHeadersView.element().find(".dx-header-row").removeClass(this.addWidgetPrefix("drop-highlight"))),this.allowDrop(e)){const n=this._getSeparator(e.targetLocation);n&&n.hide(),this._columnsController.moveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}}}const $z=i=>class extends i{_needUpdateRowHeight(e){const t=this.option("wordWrapEnabled"),n=this._columnsResizerController.isResizing();return super._needUpdateRowHeight.apply(this,arguments)||e>0&&!!t&&!!n}},Hz=i=>class extends i{renderFocusOverlay(){if(!this._columnsResizerController.isResizing())return super.renderFocusOverlay.apply(this,arguments)}},Rr={views:{columnsSeparatorView:Pz,blockSeparatorView:Bz,draggingHeaderView:Fz,trackerView:Mz},controllers:{draggingHeader:Lz,tablePosition:Nz,columnsResizer:Vz},extenders:{views:{rowsView:$z},controllers:{editorFactory:Hz}}};Rr.views.draggingHeaderView;Rr.controllers.draggingHeader;Rr.views.columnsSeparatorView;Rr.controllers.tablePosition;Rr.controllers.columnsResizer;Rr.views.trackerView;He.registerModule("columnsResizingReordering",Rr);const zz=(i,e)=>i.length===e.length&&!Object.keys(i).some(t=>i[t]!==e[t]),Wz=(i,e)=>zt(i,e,{maxDepth:4}),jz=(i,e,t,n)=>{let s=i,o=e;return function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return n(a,s)||(s=a,o=t(...s)),o}},Kz={compareType:"reference"},Gy=function(i){let{compareType:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kz,t=null;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];if(!t){const r=i(...s);return t=jz(s,r,i,e==="reference"?zz:Wz),r}return t(...s)}},Lf={ariaColIndex:"aria-colindex",dragCell:"dx-drag-cell"},fp="rowsview",Gz="edit-form",KI="dx-data-row",Uz="dx-group-row",qz="dx-header-row",Yz="edit-form-item",GI="dx-master-detail-row",UI="dx-freespace-row",Xz="dx-virtual-row",mp="dx-master-detail-cell",Zz="dx-dropdowneditor-overlay",Qd="dx-command-expand",Jz="dx-command-adaptive",qI="dx-command-select",YI="dx-command-edit",gp="[class^=dx-command]",ec="dx-cell-focus-disabled",Qz="dxDateBox",Uy="dx-state-focused",eW="dx-widget",tW="dx-revert-button",qy="dx-focused",_p="delete",Za=`
  input:not([type="hidden"]):not([disabled]),
  textarea:not([disabled]),
  a:not([disabled]),
  select:not([disabled]),
  button:not([disabled]),
  [tabindex]:not([disabled]),
  .dx-checkbox:not([disabled],.dx-state-readonly)
`,Yy=`${Za}, .dx-dropdowneditor-icon`,Xy="row",Zy="cell",Jy="columnHeadersView",iW="rowsView",nW=["shift","control","alt"],sW=i=>i.attr(Lf.dragCell)!==void 0,oW=i=>[`[${Lf.ariaColIndex}="${i+1}"]`,`:not([${Lf.dragCell}])`,":not([aria-hidden=true])"].join(""),rW=(i,e)=>i.filter(oW(e)).first(),XI={isDragCell:sW,getCellToFocus:rW};function Ja(i){return i&&i.hasClass(Uz)}function aW(i){return i&&i.hasClass("dx-datagrid-group-footer")}function lW(i){return i&&i.hasClass(GI)}function dW(i){return i&&i.hasClass(GI)&&i.hasClass(Gz)}function Ka(i){return i&&i.hasClass(KI)}function cW(i){return!i||i.hasClass(UI)||i.hasClass(Xz)}function Qy(i,e){return!i._isRowEditMode()&&e&&!e.hasClass(qI)&&e.hasClass(zu)}function Ln(i){return U(i)&&i.length>0}function $f(){return Re.current().deviceType!=="desktop"}function eC(i){return!!i.parent(`.${qz}`).length}function uW(i,e){return i.option("rtlEnabled")?!(e.fixedPosition==="right"||U(e.command)&&!U(e.fixedPosition)):!(!U(e.fixedPosition)||e.fixedPosition==="left")}function hW(i){const e=i.getController("keyboardNavigation");return e._isVirtualScrolling()?i.option("focusedRowIndex")===e.getRowIndex():!1}const pW=i=>class extends i{rowsViewFocusHandler(e){const t=R(e.target);this.translateFocusIfNeed(e,t),super.rowsViewFocusHandler(e)}rowsViewFocusOutHandler(){super.rowsViewFocusOutHandler(),this.makeScrollableFocusableIfNeed()}translateFocusIfNeed(e,t){const n=this.isScrollableNeedFocusable(),s=this._isFixedColumn(0);if(!n||!s)return;const o=this._rowsView.getCell({rowIndex:0,columnIndex:0}),r=!!o.attr("tabindex"),a=t.is(this._$firstNotFixedCell);r&&a&&(e.preventDefault(),this._focus(o))}renderCompleted(e){this._$firstNotFixedCell=this.getFirstNotFixedCell(),this.makeScrollableFocusableIfNeed(),super.renderCompleted(e)}_focus(e,t,n){super._focus(e,t,n),this.makeScrollableFocusableIfNeed()}_tabKeyHandler(e,t){const s=!(U(this._focusedCellPosition)&&!cn(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),o=this.isScrollableNeedFocusable();if(s&&o){var r;(r=this._$firstNotFixedCell)===null||r===void 0||r.removeAttr("tabIndex")}super._tabKeyHandler(e,t)}getFirstNotFixedCell(){var e;const n=this._columnsController.getVisibleColumns().findIndex(o=>{let{fixed:r}=o;return!r}),s=(e=this._editingController)===null||e===void 0?void 0:e.isEditing();return n===-1||s?void 0:this._rowsView._getCellElement(0,n)}isScrollableNeedFocusable(){var e,t;const n=!!this._rowsView.getScrollable(),s=!!((e=this._rowsView._fixedTableElement)!==null&&e!==void 0&&e.length),o=!!((t=this._rowsView.getCellElements(0))!==null&&t!==void 0&&t.length);return n&&s&&o}makeScrollableFocusableIfNeed(){!this.isScrollableNeedFocusable()||!this._$firstNotFixedCell||this._applyTabIndexToElement(this._$firstNotFixedCell)}};class fW extends Yt.ViewController{init(){if(this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnResizerController=this.getController("columnsResizer"),this._memoFireFocusedCellChanged=Gy(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=Gy(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this.rowsViewFocusOutHandlerContext=this.rowsViewFocusOutHandlerContext??this.rowsViewFocusOutHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()){var e;HD(),(e=this._editorFactory)===null||e===void 0||e.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")}else{var t;I_(),(t=this._editorFactory)===null||t===void 0||t.focused.remove(this.focusedHandlerWithContext)}this.initViewHandlers(),this.initDocumentHandlers()}dispose(){super.dispose(),this._resetFocusedView(),wo.off(this._keyDownListener),q.off(_e.getDocument(),be(Ct.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),I_()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable()&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}rowsViewFocusHandler(e){const t=R(e.target),n=R(e.relatedTarget).closest(this._rowsView.element()).length,s=t.is("a");if(e.relatedTarget&&s&&!n&&this._isEventInCurrentGrid(e)){let a=this._getFocusedCell();a=Ln(a)?a:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),t.closest(a).length||(e.preventDefault(),q.trigger(a,"focus"))}const o=t.is("td"),r=(this.option("focusedRowIndex")??-1)<0;o&&r&&this._updateFocusedCellPosition(t)}rowsViewFocusOutHandler(){this._toggleInertAttr(!1)}subscribeToRowsViewFocusEvent(){var e;const t=(e=this._rowsView)===null||e===void 0?void 0:e.element();q.on(t,"focusin",this.rowsViewFocusHandlerContext),q.on(t,"focusout",this.rowsViewFocusOutHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e;const t=(e=this._rowsView)===null||e===void 0?void 0:e.element();q.off(t,"focusin",this.rowsViewFocusHandlerContext),q.off(t,"focusout",this.rowsViewFocusOutHandlerContext)}renderCompleted(e){const t=this._rowsView.element(),n=!e||e.changeType==="refresh",s=this._focusedView&&this._focusedView.name===this._rowsView.name;let o=!1;const r=e&&(e.changeType==="append"||e.changeType==="prepend"),l=R(_e.getRootNode(t.get&&t.get(0))).find(":focus"),d=!l.length||l.closest(t).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),s&&d&&(o=this._isNeedFocus?!r:this._isHiddenFocus&&n&&!(e!=null&&e.virtualColumnsScrolling),o&&this._updateFocus(!0))}initViewHandlers(){var e;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),(e=this._rowsView)===null||e===void 0||(e=e.renderCompleted)===null||e===void 0||e.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){const e=_e.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(t=>{const n=R(t.event.target),s=this._isEventInCurrentGrid(t.event)&&n.closest(`.${this.addWidgetPrefix(fp)}`).length,o=n.closest(`.${Zz}`).length,r=!!this._columnResizerController&&this._columnResizerController.isResizing();!s&&!o&&!r&&(!(this._focusedView&&n.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),q.off(e,be(Ct.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&q.on(e,be(Ct.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){const e=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){const e=$f()?kt:Ct.down,t=this._getRowsViewElement();this._pointerEventAction&&q.off(t,be(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){const e=$f()?kt:Ct.down,t=this._getRowsViewElement(),n=`.${po} > td, .${po}`;q.on(t,be(e,"dxDataGridKeyboardNavigation"),n,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){wo.off(this._keyDownListener)}subscribeToKeyDownEvent(){const e=this._getRowsViewElement();this._keyDownListener=wo.on(e,null,t=>this._keyDownHandler(t))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}optionChanged(e){switch(e.name){case"keyboardNavigation":e.fullName==="keyboardNavigation.enabled"&&this.init(),e.handled=!0;break;case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isRowFocusType(){return this.focusType===Xy}isCellFocusType(){return this.focusType===Zy}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType=Xy)}setCellFocusType(){this.focusType=Zy}_keyDownHandler(e){var t;let n=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;let s=this._processOnKeyDown(e);const o=(t=this._editingController)===null||t===void 0?void 0:t.isEditing(),{originalEvent:r}=e;if(r.isDefaultPrevented()){this._isNeedFocus=!1,this._isNeedScroll=!1;return}if(!nW.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(r.target),!s){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,o),s=!0;break;case"upArrow":case"downArrow":e.ctrl?um("rowsView",this,r):this._upDownKeysHandler(e,o),s=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),s=!0;break;case"space":s=this._spaceKeyHandler(e,o);break;case"A":ki(e.originalEvent)?(this._ctrlAKeyHandler(e,o),s=!0):s=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,o),s=!0;break;case"enter":this._enterKeyHandler(e,o),s=!0;break;case"escape":s=this._escapeKeyHandler(e,o);break;case"F":ki(e.originalEvent)?(this._ctrlFKeyHandler(e),s=!0):s=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),s=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(s=this._beginFastEditing(r,!0))}!s&&!this._beginFastEditing(r)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,n=!1),n&&r.stopPropagation()}}_processOnKeyDown(e){const{originalEvent:t}=e,n={handled:!1,event:t};return this.executeAction("onKeyDown",n),e.ctrl=t.ctrlKey,e.alt=t.altKey,e.shift=t.shiftKey,!!n.handled}_closeEditCell(){const e=ae();return setTimeout(()=>{this._editingController.closeEditCell().always(e.resolve)}),e}_leftRightKeysHandler(e,t){const n=this.getVisibleRowIndex(),s=e.originalEvent,o=this._focusedView&&this._focusedView.getRow(n),r=this._getDirectionCodeByKey(e.keyName),a=this._isFastEditingStarted();if((!t||a)&&Ka(o)){this.setCellFocusType(),a&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(r);const d=this._getNextCell(r);Ln(d)&&this._arrowKeysHandlerFocusCell(s,d,r),s&&s.preventDefault()}}isInsideMasterDetail(e){const t=e.closest(`.${mp}`);return!!t.get(0)&&this.elementIsInsideGrid(t)&&!e.is(t)}_upDownKeysHandler(e,t){var n,s;const o=this.getVisibleRowIndex(),r=this._focusedView&&this._focusedView.getRow(o),a=e.originalEvent,l=e.keyName==="upArrow",d=this._dataController.dataSource(),c=(n=this._editingController)===null||n===void 0||(s=n.isEditRowByIndex)===null||s===void 0?void 0:s.call(n,o),h=this._isFastEditingStarted(),u=this.isInsideMasterDetail(R(a==null?void 0:a.target));if((!c||!t||h)&&r&&!dW(r)&&!u){if(h&&this._closeEditCell(),!this._navigateNextCell(a,e.keyName)&&this._isVirtualRowRender()&&l&&d&&!d.isLoading()){const f=rt(r),g=this._focusedCellPosition.rowIndex-1;this._scrollBy(0,-f,g,a)}a&&a.preventDefault()}}_pageUpDownKeyHandler(e){const t=this._dataController.pageIndex(),n=this._dataController.pageCount(),s=this.option("paging.enabled"),o=e.keyName==="pageUp",r=o?-1:1,a=this._rowsView.getScrollable();s&&!this._isVirtualScrolling()?(o?t>0:t<n-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(t+r),e.originalEvent.preventDefault()):a&&st(a.container())<st(a.$content())&&(this._scrollBy(0,st(a.container())*r),e.originalEvent.preventDefault())}_spaceKeyHandler(e,t){const n=this.getVisibleRowIndex(),s=R(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&this.option("selection").mode!=="none"&&!t){const o=this._getElementType(s)==="row"&&this.isRowFocusType()&&Ka(s);return s.hasClass(qI)&&this.option("selection.showCheckBoxesMode")==="onClick"&&this._selectionController.startSelectionWithCheckboxes(),o||s.parent().hasClass(KI)||s.hasClass(this.addWidgetPrefix(fp))?(this._selectionController.changeItemSelection(n,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0):!1}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,t){!t&&!e.alt&&this.option("selection.mode")==="multiple"&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_toggleInertAttr(e){}_tabKeyHandler(e,t){const n=this.option("editing"),s=e.shift?"previous":"next",o=U(this._focusedCellPosition)&&!cn(this._focusedCellPosition),r=e.shift&&this._isFirstValidCell(this._focusedCellPosition),a=!e.shift&&this._isLastValidCell(this._focusedCellPosition);let l=!o||r||a;const d=e.originalEvent.target,c=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(d,s)){if(R(c).addClass(Uy),n&&d&&!l)if(R(d).hasClass(this.addWidgetPrefix(fp))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s),t){if(!this._editingCellTabHandler(e,s))return}else this._targetCellTabHandler(e,s)&&(l=!0);if(l){const u=this._getFocusedCell().is(gp);a&&!u&&this._toggleInertAttr(!0),this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())}else e.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){const e=this.component.getScrollable();return e?e.scrollWidth()-Ge(this._rowsView.element()):0}_isColumnRendered(e){const t=this._columnsController.getVisibleColumns(null,!0),n=this._columnsController.getVisibleColumns(),s=t[e];let o=!1;return s&&(o=n.indexOf(s)>=0),o}_isFixedColumn(e){const n=this._columnsController.getVisibleColumns(null,!0)[e];return!!n&&!!n.fixed}_isColumnVirtual(e){const t=e-this._columnsController.getColumnIndexOffset(),s=this._columnsController.getVisibleColumns()[t];return!!s&&s.command==="virtual"}_processVirtualHorizontalPosition(e){const t=this.component.getScrollable(),n=this.getColumnIndex();let s,o=0,r=!1;switch(e){case"next":case"nextInRow":{const a=this._getVisibleColumnCount();s=n+1,o=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,e==="next"?r=a===s||this._isFixedColumn(n)&&!this._isColumnRendered(s):r=a>s&&this._isFixedColumn(n)&&!this._isColumnRendered(s);break}case"previous":case"previousInRow":if(s=n-1,o=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),e==="previous"){const a=this._columnsController.getColumnIndexOffset();r=s<0&&a===0||this._isFixedColumn(n)&&!this._isColumnRendered(s)}else r=s>=0&&this._isFixedColumn(n)&&!this._isColumnRendered(s)}r?t.scrollTo({left:o}):U(s)&&U(e)&&this._isColumnVirtual(s)&&(o=this._getHorizontalScrollPositionOffset(e),o!==0&&t.scrollBy({left:o,top:0}))}_getHorizontalScrollPositionOffset(e){let t=0;const n=this._getCell(this._focusedCellPosition),s=n&&St(n);if(s>0){const o=this.option("rtlEnabled")?-1:1;t=e==="nextInRow"||e==="next"?s*o:s*o*-1}return t}_editingCellTabHandler(e,t){const n=e.originalEvent.target;let s=this._getCellElementFromTarget(n),o;const r=e.originalEvent,a=this._getElementType(n);if(s.is(gp))return!this._targetCellTabHandler(e,t);this._updateFocusedCellPosition(s);const l=this._getNextCellByTabKey(r,t,a);if(s=l.$cell,!s||this._handleTabKeyOnMasterDetailCell(s,t))return!1;const d=this._getColumnByCellElement(s),c=s.parent(),h=this._getRowIndex(c),u=this._dataController.items()[h],p=this._editingController;if(d&&d.allowEditing){const f=!u||u.rowType==="data";o=p.allowUpdating({row:u})?f:u&&u.isNewRow}return o||this._closeEditCell(),this._focusCell(s,!l.isHighlighted)&&(!this._isRowEditMode()&&o?this._editFocusedCell():this._focusInteractiveElement(s,e.shift)),!0}_targetCellTabHandler(e,t){const n=e.originalEvent;let s=n.target,o=this._getElementType(s),r=this._getCellElementFromTarget(s);const a=o==="cell"&&this._getInteractiveElement(r,!e.shift);let l=!1;if(!Qy(this,r)&&a!==null&&a!==void 0&&a.length&&s!==a.get(0))l=!0;else{this._focusedCellPosition.rowIndex===void 0&&R(s).hasClass(po)&&this._updateFocusedCellPosition(r),o=this._getElementType(s),this.isRowFocusType()&&(this.setCellFocusType(),o==="row"&&Ka(R(s))&&(s=this.getFirstValidCellInRow(R(s)),o=this._getElementType(s)));const d=this._getNextCellByTabKey(n,t,o);if(r=d.$cell,!r||(r=this._checkNewLineTransition(n,r),!r))return!1;this._focusCell(r,!d.isHighlighted),Qy(this,r)||this._focusInteractiveElement(r,e.shift)}return l}_getNextCellByTabKey(e,t,n){let s=this._getNextCell(t,n);const o=s&&this._fireFocusedCellChanging(e,s,!0);return!o||o.cancel?{}:(o.$newCellElement&&(s=o.$newCellElement),{$cell:s,isHighlighted:o.isHighlighted})}_checkNewLineTransition(e,t){const n=this.getVisibleRowIndex(),s=t.parent();if(n!==this._getRowIndex(s)){const o=this._getCellPosition(t),r=this._fireFocusedRowChanging(e,s);if(r.cancel)return;r.rowIndexChanged&&o&&(this.setFocusedColumnIndex(o.columnIndex),t=this._getFocusedCell())}return t}_enterKeyHandler(e,t){var n,s;const o=this.getVisibleRowIndex(),r=this._dataController.getKeyByRowIndex(o),a=(n=this._focusedView)===null||n===void 0?void 0:n.getRow(o),l=this._getFocusedCell(),d=this.option("grouping.allowCollapsing")&&Ja(a),c=this.option("masterDetail.enabled")&&(l==null?void 0:l.hasClass(Qd)),h=l==null?void 0:l.hasClass(Jz);if(d||c){const u=this._dataController.items()[o],p=(u==null?void 0:u.data)&&!u.data.isContinuation;U(r)&&p&&this._dataController.changeRowExpand(r)}else h?(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(r),this._updateFocusedCellPosition(l)):(s=this.getMasterDetailCell(l))!==null&&s!==void 0&&s.is(l)?l.is(":focus")&&this.focusFirstInteractiveElementInside(l):l!=null&&l.hasClass(YI)||this._processEnterKeyForDataCell(e,t)}focusFirstInteractiveElementInside(e){e.find(Za).get(0).focus()}_processEnterKeyForDataCell(e,t){const n=this._getEnterKeyDirection(e),s=this._allowEditingOnEnterKey();t||!s&&n?this._handleEnterKeyEditingCell(e.originalEvent).done(()=>{n==="next"||n==="previous"?this._targetCellTabHandler(e,n):(n==="upArrow"||n==="downArrow")&&this._navigateNextCell(e.originalEvent,n)}):s&&this._startEditing(e)}_getEnterKeyDirection(e){const t=this.option("keyboardNavigation.enterKeyDirection"),n=e.shift;if(t==="column")return n?"upArrow":"downArrow";if(t==="row")return n?"previous":"next"}_handleEnterKeyEditingCell(e){const t=ae(),{target:n}=e,s=this._getCellElementFromTarget(n),o=this._isRowEditMode();return this._updateFocusedCellPosition(s),o?(this._focusEditFormCell(s),setTimeout(this._editingController.saveEditData.bind(this._editingController)),t.resolve()):(q.trigger(R(n),"change"),this._closeEditCell().always(t.resolve),e.preventDefault()),t}_escapeKeyHandler(e,t){const n=this._getCellElementFromTarget(e.originalEvent.target);if(t)return this._updateFocusedCellPosition(n),this._isRowEditMode()?(this._focusEditFormCell(n),this._editingController.cancelEditData(),this._dataController.items().length===0&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):this._editingController.getEditMode()==="cell"?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault(),!0;const s=this.getMasterDetailCell(n);return s?(this._focusCell(s),!0):!1}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){const t=this._headerPanel.getSearchTextEditor();t&&(t.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){const e=this._editingController.isEditing(),t=this.getVisibleRowIndex(),n=this._focusedView&&this._focusedView.getRow(t);!e&&Ka(n)&&this._startEditing()}_navigateNextCell(e,t){const n=this._getNextCell(t),s=this._getDirectionCodeByKey(t);return n&&this._isCellValid(n)?this._arrowKeysHandlerFocusCell(e,n,s):!1}_arrowKeysHandlerFocusCell(e,t,n){const s=n==="prevRow"||n==="nextRow",o=this._fireFocusChangingEvents(e,t,s,!0);return t=o.$newCellElement,!o.cancel&&this._isCellValid(t)?(this._focus(t,!o.isHighlighted),!0):!1}_beginFastEditing(e,t){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(t)this._startEditing(e,_p);else{const{key:n}=e,s=e.keyCode||e.which,o=n||s&&String.fromCharCode(s);o&&(o.length===1||o===_p)&&this._startEditing(e,o)}return!0}_pointerEventHandler(e){var t;const n=e.event||e;let s=R(n.currentTarget);const o=(t=this._rowsView)===null||t===void 0?void 0:t.element(),r=s.parent(),a=R(n.target).is(Za),l=!!R(n.target).closest(`.${tW}`).length,d=s.hasClass(Qd);this._isEventInCurrentGrid(n)&&(!l&&(this._isCellValid(s,!a)||d)?(s=this._isInsideEditForm(s)?R(n.target):s,this._focusView(),R(o).removeClass(Uy),r.hasClass(UI)?(this._updateFocusedCellPosition(s),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this.getMasterDetailCell(s)?this._updateFocusedCellPosition(s):this._clickTargetCellHandler(n,s)):s.is("td")&&this._resetFocusedCell())}_clickTargetCellHandler(e,t){const n=this._getColumnByCellElement(t),s=this._isCellEditMode();this.setCellFocusType();const o=this._fireFocusChangingEvents(e,t,!0);if(t=o.$newCellElement,o.cancel)this.setRowFocusType(),this.setFocusedRowIndex(o.prevRowIndex),this._editingController.isEditing()&&s&&this._closeEditCell();else{if(o.resetFocusedRow){this._focusController._resetFocusedRow();return}if(o.rowIndexChanged&&(t=this._getFocusedCell()),!o.isHighlighted&&!s&&this.setRowFocusType(),this._updateFocusedCellPosition(t),this._allowRowUpdating()&&s&&n&&n.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{t=this._getFocusedCell();const r=e&&R(e.target).closest(`${Yy}, td`),a=r&&r.not(t).is(Yy),d=!(!!n&&!n.command&&t.hasClass(zu))&&(!o.isHighlighted||a);this._focus(t,d,a)}}}_allowRowUpdating(){const e=this.getVisibleRowIndex(),t=this._dataController.items()[e];return this._editingController.allowUpdating({row:t},"click")}focus(e){let t;const n=this.option("focusedRowEnabled"),s=this._isCellElement(R(e));e||(t=".dx-datagrid-rowsview .dx-row[tabindex]",n||(t+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),e=this.component.$element().find(t).first()),e&&this._focusElement(R(e),s)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!U(this._focusedView)&&this._focusView()}_focusElement(e,t){const n=R(this._getRowsViewElement()),s=e.closest(n),o=this.isRowFocusType();let r={};!s.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||Ja(e))&&(this.setCellFocusType(),r=this._fireFocusChangingEvents(null,e,!0,t),e=r.$newCellElement,o&&!r.isHighlighted&&this.setRowFocusType()),r.cancel||(this._focus(e,!r.isHighlighted),this._focusInteractiveElement(e)))}_getFocusedViewByElement(e){const t=this.getFocusedView(),n=t&&R(t.element());return e&&e.closest(n).length!==0}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,t){if(!e)return;const n=this._getInteractiveElement(e,t);Ce.focusAndSelectElement(this,n)}_focus(e,t,n){const s=e&&!e.hasClass(po)?e.closest(`.${po}`):e;if(s&&cW(s))return;const o=this._focusedView,r=o&&o.element();let a;this._isHiddenFocus=t;const l=Ja(s)||aW(s)||this.isRowFocusType();l?(a=s,o&&this.setFocusedRowIndex(this._getRowIndex(s))):this._isCellElement(e)&&(a=e,this._updateFocusedCellPosition(e)),a&&(r&&r.find(".dx-row[tabindex], .dx-row > td[tabindex]").filter((d,c)=>Ce.isElementInCurrentGrid(this,R(c))).not(a).removeClass(ec).removeClass(qy).removeAttr("tabindex"),q.one(a,"blur",d=>{d.relatedTarget&&a.removeClass(ec).removeClass(qy)}),n||(this._applyTabIndexToElement(a),q.trigger(a,"focus")),t?(a.addClass(ec),l&&e.addClass(ec)):this._editorFactory.focus(a))}_updateFocus(e){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell()){this._editingController._focusEditingCell();return}let t=this._getFocusedCell();const n=this._editingController.isEditing();if(!this.getMasterDetailCell(t)||this._isRowEditMode()){if(this._hasSkipRow(t.parent())){const s=this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow";t=this._getNextCell(s)}if(Ln(t))if(t.is("td")||t.hasClass(this.addWidgetPrefix(Yz))){const s=t.is(gp),o=t.find(":focus"),r=Ln(o),a=this._getColumnByCellElement(t);if((e||!s)&&this._editorFactory.focus()){if(s&&r){Ce.focusAndSelectElement(this,o);return}!r&&this._focus(t)}else!r&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(t,this._isHiddenFocus);n&&!(a!=null&&a.showEditorAlways)&&this._focusInteractiveElement.bind(this)(t)}else q.trigger(t,"focus")}})}_getColumnByCellElement(e){const n=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset();return this._columnsController.getVisibleColumns(null,!0)[n]}_needFocusEditingCell(){const e=this._editingController.getEditMode()===Ef,t=this._editingController.getEditMode()===nu,n=e&&this._editingController.hasChanges(),s=t&&this._editingController.isNewRowInEditMode(),o=this._getFocusedCell();return(o.children().length===0||o.find(yg).length>0)&&(n||s)}_getFocusedCell(){return R(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(e){var t;if(this._getElementType(e)==="row"&&U((t=this._focusedCellPosition)===null||t===void 0?void 0:t.columnIndex)){const s=R(e);this._focusedView&&Ja(s)&&this.setFocusedRowIndex(this._getRowIndex(s))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_updateFocusedCellPosition(e,t){const n=this._getCellPosition(e,t);return n&&(!e.length||n.rowIndex>=0&&n.columnIndex>=0)&&this.setFocusedCellPosition(n.rowIndex,n.columnIndex),n}_getFocusedColumnIndexOffset(e){let t=0;const n=this._columnsController.getVisibleColumns()[e];return n&&n.fixed?t=this._getFixedColumnIndexOffset(n):e>=0&&(t=this._columnsController.getColumnIndexOffset()),t}_getFixedColumnIndexOffset(e){return uW(this,e)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0}_getCellPosition(e,t){let n;const s=Ln(e)&&e.closest("tr");if(Ln(s)){const o=this._getRowIndex(s);return n=this._rowsView.getCellIndex(e,o),n+=this._getFocusedColumnIndexOffset(n),t&&(n=t==="previous"?n-1:n+1,n=this._applyColumnIndexBoundaries(n)),{rowIndex:o,columnIndex:n}}}_focusCell(e,t){if(this._isCellValid(e))return this._focus(e,t),!0}_focusEditFormCell(e){e.hasClass(mp)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var t;const n=this._getFocusedCell();Ln(n)&&n.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),(t=this._focusedView)===null||t===void 0||t.renderFocusState({preventScroll:e})}restoreFocusableElement(e,t){const n=this;let s,o;const r=U(e),a=this._rowsView.element(),{columnIndex:l}=n._focusedCellPosition,d=n._dataController.getRowIndexOffset();e=r?e:this._rowsView.getTopVisibleItemIndex()+d,r?(o=this._rowsView.getRow(e-d),s=n._fireFocusedRowChanging(t,o),!s.cancel&&s.rowIndexChanged&&(e=s.newRowIndex)):(n._editorFactory.loseFocus(),n._applyTabIndexToElement(a),q.trigger(a,"focus")),(!r||!s.cancel)&&n.setFocusedCellPosition(e,l),r&&n._updateFocus()}_getNewPositionByCode(e,t,n){let{columnIndex:s}=e,{rowIndex:o}=e,r;if(e.rowIndex===void 0&&n==="next")return{columnIndex:0,rowIndex:0};switch(n){case"nextInRow":case"next":r=this._getVisibleColumnCount(),s<r-1&&t!=="row"&&this._hasValidCellAfterPosition({columnIndex:s,rowIndex:o})?s++:!this._isLastRow(o)&&n==="next"&&(s=0,o++);break;case"previousInRow":case"previous":s>0&&t!=="row"&&this._hasValidCellBeforePosition({columnIndex:s,rowIndex:o})?s--:o>0&&n==="previous"&&(o--,r=this._getVisibleColumnCount(),s=r-1);break;case"upArrow":o=o>0?o-1:o;break;case"downArrow":o=this._isLastRow(o)?o:o+1}return{columnIndex:s,rowIndex:o}}setFocusedCellPosition(e,t){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(t)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e;const t=(e=this._focusedCellPosition)===null||e===void 0?void 0:e.rowIndex;return!U(t)||t<0?-1:t-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e;const t=(e=this._focusedCellPosition)===null||e===void 0?void 0:e.columnIndex;return U(t)?t-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(e){const t=this._getVisibleColumnCount();return e<0?e=0:e>=t&&(e=t-1),e}_isCellByPositionValid(e){const t=R(this._getCell(e));return this._isCellValid(t)}_isLastRow(e){const t=this._dataController;if(this._isVirtualRowRender())return e>=t.getMaxRowIndex();const n=Math.max(...t.items().map((s,o)=>s.visible!==!1?o:-1));return e===n}_isFirstValidCell(e){let t=!1;return e.rowIndex===0&&e.columnIndex>=0&&(t=t||!this._hasValidCellBeforePosition(e)),t}_hasValidCellBeforePosition(e){let{columnIndex:t}=e,n=!1;for(;t>0&&!n;){const s={columnIndex:--t,rowIndex:e.rowIndex};n=this._isCellByPositionValid(s)}return n}_hasValidCellAfterPosition(e){let{columnIndex:t}=e,n=!1;const s=this._getVisibleColumnCount();for(;t<s-1&&!n;){const o={columnIndex:++t,rowIndex:e.rowIndex};n=this._isCellByPositionValid(o)}return n}_isLastValidCell(e){const t=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:n}=e,s={columnIndex:t,rowIndex:n},o=this._dataController.getVisibleRows(),r=o&&o[n];return this._isLastRow(n)?((r==null?void 0:r.rowType)==="group"||(r==null?void 0:r.rowType)==="groupFooter")&&e.columnIndex>0||e.columnIndex===this._getVisibleColumnCount()-1?!0:this._isCellByPositionValid(s)?!1:this._isLastValidCell(s):!1}_isCellValid(e,t){if(Ln(e)){const n=e.parent(),s=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset(),o=this._getColumnByCellElement(e),r=this._getVisibleColumnCount(),a=this._editingController,l=lW(n),d=o&&o.showWhenGrouped,c=o&&!e.hasClass(Qd)&&Ka(n),h=function(){return!l&&o&&(!U(o.groupIndex)||d&&c)||parseInt(e.attr("colspan"),10)>1};if(XI.isDragCell(e))return!1;if(this.getMasterDetailCell(e))return!0;if(r>s&&h()){const p=this._dataController.items(),f=this._rowsView.getRowIndex(n),g=p[f],m=a&&this._isCellEditMode()&&a.isEditing(),b=a&&a.isEditRow(f),_=b||m;return o.command?this._isLegacyNavigation()?!_&&o.command==="expand":m?!1:b?o.command!=="select":!_:m&&g&&g.rowType!=="data"?!1:!_||o.allowEditing||t}}}getFirstValidCellInRow(e,t){const n=this,s=e.find("> td");let o,r;t=t||0;for(let a=t;a<s.length;++a)if(o=s.eq(a),n._isCellValid(o)){r=o;break}return r}_getNextCell(e,t,n){const s=n||this._focusedCellPosition,o=this.isRowFocusType(),r=o||["next","previous"].includes(e);let a,l;if(this._focusedView&&s){const d=this._getNewPositionByCode(s,t,e);a=R(this._getCell(d));const c=e==="previous"?this._isFirstValidCell(d):this._isLastValidCell(d);if(Ln(a)&&!this._isCellValid(a)&&this._isCellInRow(d,r)&&!c&&(o?a=this.getFirstValidCellInRow(a.parent(),d.columnIndex):a=this._getNextCell(e,"cell",d)),l=Ln(a)&&a.parent(),this._hasSkipRow(l)){const h=this._getRowIndex(l);if(!this._isLastRow(h))a=this._getNextCell(e,"row",{columnIndex:s.columnIndex,rowIndex:h});else return null}return Ln(a)?a:null}return null}_startEditing(e,t){const n=this._focusedCellPosition,s=this.getVisibleRowIndex(),o=this.getVisibleColumnIndex(),r=this._dataController.items()[s],a=this._columnsController.getVisibleColumns()[o];this._isAllowEditing(r,a)&&(this._isRowEditMode()?this._editingController.editRow(s):n&&this._startEditCell(e,t))}_isAllowEditing(e,t){return this._editingController.allowUpdating({row:e})&&t&&t.allowEditing}_editFocusedCell(){const e=this.getVisibleRowIndex(),t=this.getVisibleColumnIndex();return this._editingController.editCell(e,t)}_startEditCell(e,t){this._fastEditingStarted=U(t);const n=this._editFocusedCell(),s=cu(n);if(!this._isFastEditingStarted()||!s&&!n)return;const r=s&&t===_p?"":t,a=s?n:ae().resolve(),l=this._rowsView.waitAsyncTemplates(!0);De(a,l).done(()=>{this._editingCellHandler(e,r)})}_editingCellHandler(e,t){var n;const s=this._getFocusedCell().find(Za).eq(0),o=s.get(0);if(!o)return;const r=bo(e,{type:"keydown",target:o}),a=bo(e,{type:"keypress",target:o}),l=bo(e,{type:"input",target:o});if(l.originalEvent&&(l.originalEvent=bo(l.originalEvent,{data:t})),(n=o.select)===null||n===void 0||n.call(o),q.trigger(s,r),!r.isDefaultPrevented()&&(q.trigger(s,a),!a.isDefaultPrevented())){const d=Zt.mozilla?25:0;setTimeout(()=>{const c=this._getKeyPressInputValue(s,t);s.val(c);const h=s.closest(`.${eW}`);q.off(h,"focusout"),q.one(h,"focusout",()=>{q.trigger(s,"change")}),q.trigger(s,l)},d)}}_getKeyPressInputValue(e,t){const n=e.val();return t==="-"&&n==="-0"?"-0":t}_fireFocusChangingEvents(e,t,n,s){let o={};const r=this._getCellPosition(t)??{};return this.isCellFocusType()&&(o=this._fireFocusedCellChanging(e,t,s),o.cancel||(r.columnIndex=o.newColumnIndex,r.rowIndex=o.newRowIndex,s=o.isHighlighted,t=R(this._getCell(r)))),!o.cancel&&n&&t&&(o=this._fireFocusedRowChanging(e,t.parent()),o.cancel||(r.rowIndex=o.newRowIndex,o.isHighlighted=s)),o.$newCellElement=R(this._getCell(r)),o.$newCellElement.length||(o.$newCellElement=t),o}_fireFocusedCellChanging(e,t,n){const s=this.option("focusedColumnIndex"),o=this.option("focusedRowIndex"),r=this._getCellPosition(t),a=r?r.columnIndex:-1,l=r?r.rowIndex:-1,d=this._dataController.getVisibleRows(),c=this._columnsController.getVisibleColumns(),h={cellElement:t,prevColumnIndex:s,prevRowIndex:o,newColumnIndex:a,newRowIndex:l,rows:d,columns:c,event:e,isHighlighted:n||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",h),(h.newColumnIndex!==a||h.newRowIndex!==l)&&(h.$newCellElement=R(this._getCell({columnIndex:h.newColumnIndex,rowIndex:h.newRowIndex}))),h.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:a}),h}_fireFocusedCellChanged(e){const t=this._rowsView.getCellIndex(e),n=e==null?void 0:e.parent().data("options"),s=n==null?void 0:n.key;this._memoFireFocusedCellChanged(s,t)}_memoFireFocusedCellChanged(e,t){const n=this._getFocusedCell(),s=this._getRowIndex(n==null?void 0:n.parent()),o=Math.min(s-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(this._editingController.isEditCell(o,t))return;const a=this._dataController.items()[o],l=this._columnsController.getVisibleColumns()[t];this.executeAction("onFocusedCellChanged",{cellElement:n?ze(n):void 0,columnIndex:t,rowIndex:s,row:a,column:l})}_fireFocusedRowChanging(e,t){const n=this._getRowIndex(t),s=this.option("focusedRowIndex"),o=this._dataController.loadingOperationTypes(),r={rowElement:t,prevRowIndex:s,newRowIndex:n,event:e,rows:this._dataController.getVisibleRows(),cancel:!1},a=o.sorting||o.grouping||o.filtering||o.paging;return!this._dataController||this._dataController.isLoading()&&a?(r.cancel=!0,r):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",r),!r.cancel&&r.newRowIndex!==n&&(r.resetFocusedRow=r.newRowIndex<0,r.resetFocusedRow||this.setFocusedRowIndex(r.newRowIndex),r.rowIndexChanged=!0)),r)}_fireFocusedRowChanged(){var e;const t=this.option("focusedRowEnabled"),n=this.option("focusedRowKey"),s=(e=this._focusController)===null||e===void 0?void 0:e.getFocusedRowIndexByKey(n);!t||U(n)&&s<0||this._memoFireFocusedRowChanged(n,s)}_memoFireFocusedRowChanged(e,t){const n=t-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:t<0?void 0:this._rowsView.getRowElement(n),rowIndex:t,row:t<0?void 0:this._dataController.getVisibleRows()[n]})}_isEventInCurrentGrid(e){return Ce.isElementInCurrentGrid(this,R(e.target))}_isRowEditMode(){const e=this._editingController.getEditMode();return e===ll||e===Cg}_isCellEditMode(){const e=this._editingController.getEditMode();return e===Ef||e===nu}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(e,t){const n=e.find(Za).filter(":visible");return t?n.last():n.first()}_applyTabIndexToElement(e){const t=this.option("tabIndex")??0;e.attr("tabindex",t)}_getCell(e){if(this._focusedView&&e){const t=this._dataController.getRowIndexOffset(),n=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],s=n&&n.fixed?this._getFixedColumnIndexOffset(n):this._columnsController.getColumnIndexOffset(),o=e.rowIndex>=0?e.rowIndex-t:-1,r=e.columnIndex>=0?e.columnIndex-s:-1;return this._focusedView.getCell({rowIndex:o,columnIndex:r})}}_getRowIndex(e){let t=this._rowsView.getRowIndex(e);return t>=0&&(t+=this._dataController.getRowIndexOffset()),t}_hasSkipRow(e){const t=e&&e.get(0);return t&&t.style.display==="none"}_allowEditingOnEnterKey(){return this.option("keyboardNavigation.enterKeyAction")==="startEdit"}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){let t;switch(e){case"upArrow":t="prevRow";break;case"downArrow":t="nextRow";break;case"leftArrow":t=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":t=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return t}_isVirtualScrolling(){const e=this.option("scrolling.mode");return e==="virtual"||e==="infinite"}_isVirtualRowRender(){return this._isVirtualScrolling()||Ce.isVirtualRowRendering(this)}_isVirtualColumnRender(){return this.option("scrolling.columnRenderingMode")==="virtual"}_scrollBy(e,t,n,s){const o=this,r=this._rowsView.getScrollable();if(o._focusedCellPosition){const a=function(){r.off("scroll",a),setTimeout(o.restoreFocusableElement.bind(o,n,s))};r.on("scroll",a)}return r.scrollBy({left:e,top:t})}_isInsideEditForm(e){const t=R(e).closest(`.${this.addWidgetPrefix(bg)}`);return t.length&&this.elementIsInsideGrid(t)}getMasterDetailCell(e){const t=R(e).closest(`.${mp}`);return t.length&&this.elementIsInsideGrid(t)?t:null}_processNextCellInMasterDetail(e,t){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,t){if(this.getMasterDetailCell(e)){this._updateFocusedCellPosition(R(e),t);const n=this._getNextCell(t,"row");return this._processNextCellInMasterDetail(n,R(e)),!0}return!1}_getElementType(e){return R(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,t){const{columnIndex:n}=e,s=this._getVisibleColumnCount();return t?n>=0&&n<=s-1:n>0&&n<s-1}_isCellElement(e){return e.length&&e[0].tagName==="TD"}_getCellElementFromTarget(e){const t=this._getElementType(e),n=R(e);let s;return t==="cell"?s=n.closest(`.${po} > td`):s=n.children().not(`.${Qd}`).first(),s}_getRowsViewElement(){var e;return(e=this._rowsView)===null||e===void 0?void 0:e.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(e,t){if(this._canceledCellPosition){const n=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===t;return this._canceledCellPosition=null,n}}updateFocusedRowIndex(){const e=this._dataController,t=this.getVisibleRowIndex(),n=e.items(),s=n.length?n.length-1:-1,o=e.getRowIndexOffset();s>=0&&t>s&&this.setFocusedRowIndex(s+o)}}const mW=i=>class extends i{_rowClick(e){const t=this._editingController.getEditRowIndex(),n=this._keyboardNavigationController.isKeyboardEnabled();t===e.rowIndex&&this._keyboardNavigationController.setCellFocusType(),($f()||!n)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(e,!n),super._rowClick.apply(this,arguments)}_triggerPointerDownEventHandler(e,t){const{originalEvent:n}=e.event;if(n){const s=R(n.target),o=this.getCellIndex(s),r=this._columnsController.getVisibleColumns()[o],a=this._dataController.items()[e.rowIndex];if(this._keyboardNavigationController._isAllowEditing(a,r)||t){const l=bo(n,{currentTarget:n.target});this._keyboardNavigationController._pointerEventHandler(l)}}}renderFocusState(e){super.renderFocusState(e);const{preventScroll:t,pageSizeChanged:n}=e??{},s=this.element();s&&!To(s)&&s.attr("tabindex",null),n&&this._keyboardNavigationController.updateFocusedRowIndex();let o=this._keyboardNavigationController.getVisibleRowIndex();(!U(o)||o<0)&&(o=0);const r=this.getCellElements(o);this._keyboardNavigationController.isKeyboardEnabled()&&r!==null&&r!==void 0&&r.length&&this.updateFocusElementTabIndex(r,t)}updateFocusElementTabIndex(e,t){const n=e.eq(0).parent();if(Ja(n))this._keyboardNavigationController._applyTabIndexToElement(n);else{let s=this._keyboardNavigationController.getColumnIndex();(!U(s)||s<0)&&(s=0),this._updateFocusedCellTabIndex(e,s)}}_updateFocusedCellTabIndex(e,t){const n=this._keyboardNavigationController,s=e?e.length:-1,o=function(a){const l=!!n.getMasterDetailCell(a),d=n._isCellValid(a);if(!l&&d&&n._isCellElement(a))return n._applyTabIndexToElement(a),n.setCellFocusType(),!0},r=XI.getCellToFocus(e,t);if(r.length)o(r);else{s<=t&&(t=s-1);for(let a=t;a<s&&!o(R(e[a]));++a);}}renderDelayedTemplates(e){super.renderDelayedTemplates.apply(this,arguments),this.waitAsyncTemplates().done(()=>{this._renderFocusByChange(e)})}_renderFocusByChange(e){var t;const{operationTypes:n,repaintChangesOnly:s}=e??{},{fullReload:o,pageSize:r}=n??{},a=!!(e!=null&&(t=e.changeTypes)!==null&&t!==void 0&&t.find(l=>l==="insert"||l==="remove"));if(!e||!s||o||r||a){const l=hW(this);this.renderFocusState({preventScroll:l,pageSizeChanged:r})}}_renderCore(e){const t=super._renderCore.apply(this,arguments);return this._renderFocusByChange(e),t}_editCellPrepared(e){var t;const n=this._getEditorInstance(e),s=(t=this._keyboardNavigationController)===null||t===void 0?void 0:t._isFastEditingStarted();n&&s&&this._handleEditingNavigationMode(n),super._editCellPrepared.apply(this,arguments)}_handleEditingNavigationMode(e){["downArrow","upArrow"].forEach(n=>{const s=e._supportedKeys()[n];e.registerKeyHandler(n,o=>{if(e._input().attr("aria-expanded")==="true")return s&&s.call(e,o)})}),e.registerKeyHandler("leftArrow",ue),e.registerKeyHandler("rightArrow",ue),e.NAME===Qz&&e.option("useMaskBehavior")&&e.registerKeyHandler("enter",ue)}_getEditorInstance(e){const t=e.find(".dx-texteditor").eq(0);return Ce.getWidgetInstance(t)}},gW=i=>class extends i{editCell(e,t){if(this._keyboardNavigationController._processCanceledEditCellPosition(e,t))return!1;const n=super.editCell(e,t);return n&&this._keyboardNavigationController.setupFocusedView(),n}editRow(e){const t=this._keyboardNavigationController.getVisibleColumnIndex(),n=this._columnsController.getVisibleColumns()[t];(n&&n.type||this.option("editing.mode")===Cg)&&this._keyboardNavigationController._resetFocusedCell(),super.editRow(e)}addRow(e){return this._keyboardNavigationController.setupFocusedView(),this._keyboardNavigationController.setCellFocusType(),super.addRow.apply(this,arguments)}getFocusedCellInRow(e){let t=super.getFocusedCellInRow(e);const n=this._dataController.getRowIndexOffset(),s=this._keyboardNavigationController._focusedCellPosition.rowIndex-n;if(this._keyboardNavigationController.isKeyboardEnabled()&&s===e){const o=this._keyboardNavigationController._getFocusedCell();Ln(o)&&!o.hasClass(YI)&&(t=o)}return t}_processCanceledEditingCell(){this.closeEditCell().done(()=>{this._keyboardNavigationController._updateFocus()})}closeEditCell(){const e=this._keyboardNavigationController;e._fastEditingStarted=!1;const t=super.closeEditCell.apply(this,arguments);return!!this._getFocusedElement().closest(`.${this.addWidgetPrefix(X9)}`).length||e._updateFocus(),t}_getFocusedElement(){var e,t;return R((e=(t=this.component).element)===null||e===void 0?void 0:e.call(t)).find(":focus")}_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,super._delayedInputFocus.apply(this,arguments)}_isEditingStart(){const e=super._isEditingStart.apply(this,arguments);if(e&&!this._keyboardNavigationController._isNeedFocus){const t=this._keyboardNavigationController._getFocusedCell();this._keyboardNavigationController._focus(t,!0)}return e}},_W=i=>class extends i{_correctRowIndices(e){const t=this._keyboardNavigationController._focusedCellPosition;if(super._correctRowIndices.apply(this,arguments),t&&t.rowIndex>=0){const n=e(t.rowIndex);n&&(t.rowIndex+=n,this._editorFactoryController.refocus())}}getMaxRowIndex(){let e=this.items().length-1;const t=this.virtualItemsCount();if(t){const n=this.getRowIndexOffset();e+=n+t.end}return e}},bW=i=>class extends i{_showHiddenCellsInView(e){let{viewName:t,$cells:n,isCommandColumn:s}=e;super._showHiddenCellsInView.apply(this,arguments),t===Jy&&!s&&n.each((o,r)=>{const a=R(r);eC(a)&&a.attr("tabindex",0)})}_hideVisibleCellInView(e){let{viewName:t,$cell:n,isCommandColumn:s}=e;super._hideVisibleCellInView.apply(this,arguments),t===Jy&&!s&&eC(n)&&n.removeAttr("tabindex")}_hideVisibleColumnInView(e){let{view:t,isCommandColumn:n,visibleIndex:s}=e;super._hideVisibleColumnInView({view:t,isCommandColumn:n,visibleIndex:s}),t.name===iW&&this._rowsView.renderFocusState(null)}},vW={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:fW},extenders:{views:{rowsView:mW},controllers:{editing:gW,data:_W,adaptiveColumns:bW,keyboardNavigation:pW}}};He.registerModule("keyboardNavigation",vW);function Hf(i,e,t,n){let s=0;if(i<e)for(;s<t.items.length;s++)Hf(i+1,e,t.items[s],n);i===e&&n(t)}function tc(i,e){let t;if("map"in i)return i.map(e);const n=new Array(i.length);for(t in i)n[t]=e(i[t],t);return n}function yW(i){return i!==i||i===""||i===null||i===void 0}function CW(i){return i===_m.count}function tC(i){const e=Nt(i.selector),t="skipEmptyValues"in i?i.skipEmptyValues:!0;let{aggregator:n}=i;if(typeof n=="string"&&(n=_m[n],!n))throw Ei.Error("E4001",i.aggregator);return{selector:e,aggregator:n,skipEmptyValues:t}}class xW{constructor(e){this._data=e.data,this._groupLevel=e.groupLevel||0,this._totalAggregates=tc(e.totalAggregates||[],tC),this._groupAggregates=tc(e.groupAggregates||[],tC),this._totals=[]}calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})}totalAggregates(){return this._totals}_aggregate(e,t,n){const s=t.items?t.items.length:0;for(let o=0;o<e.length;o++){if(CW(e[o].aggregator)){n[o]=(n[o]||0)+s;continue}for(let r=0;r<s;r++)this._accumulate(o,e[o],n,t.items[r])}}_calculateTotals(e,t){if(e===0&&(this._totals=this._seed(this._totalAggregates)),e===this._groupLevel)this._aggregate(this._totalAggregates,t,this._totals);else for(let n=0;n<t.items.length;n++)this._calculateTotals(e+1,t.items[n]);e===0&&(this._totals=this._finalize(this._totalAggregates,this._totals))}_calculateGroups(e){const t=this._groupLevel;let n=t+1;const s=this._seed.bind(this,this._groupAggregates),o=this._aggregate.bind(this,this._groupAggregates),r=this._finalize.bind(this,this._groupAggregates);function a(l){l.aggregates=s(n-1),n===t?o(l,l.aggregates):Hf(n,t,l,d=>{o(d,l.aggregates)}),l.aggregates=r(l.aggregates)}for(;--n>0;)Hf(0,n,e,a)}_seed(e,t){return tc(e,n=>{const{aggregator:s}=n;return"seed"in s?Ee(s.seed)?s.seed(t):s.seed:NaN})}_accumulate(e,t,n,s){const o=t.selector(s),{aggregator:r}=t,{skipEmptyValues:a}=t;a&&yW(o)||(n[e]!==n[e]?n[e]=o:n[e]=r.step(n[e],o))}_finalize(e,t){return tc(e,(n,s)=>{const o=n.aggregator.finalize;return o?o(t[s]):t[s]})}}const wW="dx-cell-focus-disabled",ZI=function(i,e){const t=R(i),{column:n}=e,{summaryItems:s}=e,o=[];if(!n.command&&s){for(let r=0;r<s.length;r++){const a=s[r],l=He.getSummaryText(a,e.summaryTexts);o.push(R("<div>").css("textAlign",a.alignment||n.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(a.cssClass).toggleClass("dx-datagrid-group-text-content",e.rowType==="group").text(l).attr("aria-label",`${n.caption} ${l}`))}t.append(o)}},JI=function(i,e){const t=i.option("summary.texts")||{};return{totalItem:e.row,summaryItems:e.row.summaryCells[e.columnIndex],summaryTexts:t}},bp=function(i){return i.summary||i.aggregates||[]},Pg=function(i){return i.option("summary.recalculateWhileEditing")},QI=function(i,e,t,n){n=n||[];for(let s=0;s<i.length;s++)n.push(i[s].key),e===1?t(n,i[s].items):QI(i[s].items,e-1,t,n),n.pop()},eT=function(i,e,t){return t?eT(i,e.map(n=>({items:[n]}),t-1)):i.concat(e)},tT=function(i,e,t){return t?i.map(n=>{const s={},o=tT(n.items||[],e,t-1);return Object.defineProperty(s,"aggregates",{get:()=>n.aggregates,set:r=>{n.aggregates=r}}),Y(s,n,{items:o})}):i.filter(n=>e.indexOf(n)<0)},iT=function(i,e,t){if(!i||!e.length)return i;const n=e[0],s=t[0];let o;return n&&s&&s.length&&(o=dn(i),ie(s,function(r){r===0?o=o.sortBy(this.selector,this.desc):o=o.thenBy(this.selector,this.desc)}),o.enumerate().done(r=>{i=r})),e=e.slice(1),t=t.slice(1),e.length&&t.length&&ie(i,function(){this.items=iT(this.items,e,t)}),i},iC=function(i,e,t){const n=t&&t.sortByGroups&&t.sortByGroups();return n&&n.length?iT(i,e,n):i},nC=function(i,e,t,n){let s;if(Pg(i)){const o=i._editingController;if(o){const r=o.getInsertedData();r.length&&(t=eT(t,r,n));const a=o.getRemovedData();a.length&&(t=tT(t,a,n))}}return e&&(s=new xW({totalAggregates:e.totalAggregates,groupAggregates:e.groupAggregates,data:t,groupLevel:n}),s.calculate()),s?s.totalAggregates():[]};class SW extends Ql{_getRows(){return this._dataController.footerItems()}_getCellOptions(e){return Y(super._getCellOptions(e),JI(this,e))}_renderCellContent(e,t){ZI(e,t),super._renderCellContent.apply(this,arguments)}_renderCore(e){let t=!1;const n=this._dataController.footerItems()[0];(!e||!e.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),t=!0),n&&n.summaryCells&&n.summaryCells.length&&(this._updateContent(this._renderTable({change:e}),e),t&&this._updateScrollLeftPosition())}_updateContent(e,t){return t&&t.changeType==="update"&&t.columnIndices?this.waitAsyncTemplates().done(()=>{const n=this.getTableElement().find(".dx-row"),s=e.find(".dx-row");this._updateCells(n,s,t.columnIndices[0])}):super._updateContent.apply(this,arguments)}_rowClick(e){const t=this._dataController.footerItems()[e.rowIndex]||{};this.executeAction("onRowClick",Y({},e,t))}_columnOptionChanged(e){const{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&super._columnOptionChanged(e)}_handleDataChanged(e){const{changeType:t}=e;e.changeType==="update"&&e.repaintChangesOnly?e.totalColumnIndices?e.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[e.totalColumnIndices]}):this.render():(t==="refresh"||t==="append"||t==="prepend")&&this.render()}_createRow(e){const t=super._createRow.apply(this,arguments);return e.rowType==="totalFooter"&&(t.addClass("dx-footer-row"),t.addClass(wW),t.attr("tabindex",0)),t}getHeight(){return this.getElementHeight()}isVisible(){return!!this._dataController.footerItems().length}}const EW=i=>class extends i{init(){super.init.apply(this,arguments),this._editingController=this.getController("editing"),this._totalAggregates=[],this._summaryGetter=ue}summaryGetter(e){if(!arguments.length)return this._summaryGetter;Ee(e)&&(this._summaryGetter=e)}summary(e){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return e}}totalAggregates(){return this._totalAggregates}isLastLevelGroupItemsPagingLocal(){const e=this.summary(),t=e==null?void 0:e.sortByGroups();return t==null?void 0:t.length}sortLastLevelGroupItems(e,t,n){const s=qs.multiLevelGroup(dn(e),t).toArray();let o=[];return n.forEach(r=>{QI(s,t.length,(a,l)=>{r.toString()===a.toString()&&(o=o.concat(l))})}),o}_customizeRemoteOperations(e){const t=this.summary();t&&(e.remoteOperations.summary?(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)&&(e.storeLoadOptions.group&&(e.remoteOperations.grouping?e.storeLoadOptions.groupSummary=t.groupAggregates:t.groupAggregates.length&&(e.remoteOperations.paging=!1)),e.storeLoadOptions.totalSummary=t.totalAggregates):(t.totalAggregates.length||t.groupAggregates.length&&e.storeLoadOptions.group)&&(e.remoteOperations.paging=!1)),super._customizeRemoteOperations.apply(this,arguments);const n=e.cachedData.extra;n!=null&&n.summary&&!e.isCustomLoading&&(e.storeLoadOptions.totalSummary=void 0)}_handleDataLoadedCore(e){const t=Us(e.storeLoadOptions.group||e.loadOptions.group||[]),n=e.remoteOperations||{},s=this.summaryGetter()(n);if(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll){if(n.summary)!n.paging&&t.length&&s&&(n.grouping||nC(this,{groupAggregates:s.groupAggregates},e.data,t.length),e.data=iC(e.data,t,s));else if(!n.paging&&s){var o;const r=e.operationTypes||{};if(!Object.keys(r).some(l=>r[l])||!((o=e.cachedData)!==null&&o!==void 0&&(o=o.extra)!==null&&o!==void 0&&o.summary)||t.length&&s.groupAggregates.length){const l=nC(this,s,e.data,t.length);e.extra=ht(e.extra)?e.extra:{},e.extra.summary=l,e.cachedData&&(e.cachedData.extra=e.extra)}e.data=iC(e.data,t,s)}}e.isCustomLoading||(this._totalAggregates=e.extra&&e.extra.summary||this._totalAggregates),super._handleDataLoadedCore(e)}};Au.extend(EW);const IW=i=>class extends i{_isDataColumn(e){return e&&(!U(e.groupIndex)||e.showWhenGrouped)}_isGroupFooterVisible(){const e=this.option("summary.groupItems")||[];for(let t=0;t<e.length;t++){const n=e[t],s=this._columnsController.columnOption(n.showInColumn||n.column);if(n.showInGroupFooter&&this._isDataColumn(s))return!0}return!1}_processGroupItems(e,t,n){const s=n&&n.data,o=super._processGroupItems.apply(this,arguments);return n&&(n.isGroupFooterVisible===void 0&&(n.isGroupFooterVisible=this._isGroupFooterVisible()),s&&s.items&&n.isGroupFooterVisible&&(n.collectContinuationItems||!s.isContinuationOnNextPage)&&o.push({rowType:"groupFooter",key:n.path.slice(),data:s,groupIndex:n.path.length-1,values:[]})),o}_processGroupItem(e,t){const n=this;if(t.summaryGroupItems||(t.summaryGroupItems=n.option("summary.groupItems")||[]),e.rowType==="group"){let s=-1,o=-1;ie(t.visibleColumns,function(r){const a=t.visibleColumns[r-1];e.groupIndex===this.groupIndex&&(s=this.index),r>0&&a.command==="expand"&&this.command!=="expand"&&(o=this.index)}),e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,bp(e.data),t.visibleColumns,(r,a)=>r.showInGroupFooter?-1:r.alignByColumn&&a&&!U(a.groupIndex)&&a.index!==o?a.index:s,!0)}return e.rowType==="groupFooter"&&(e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,bp(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter&&n._isDataColumn(o)?o.index:-1)),e}_calculateSummaryCells(e,t,n,s,o){const r=this,a=[],l={};return ie(e,(d,c)=>{const h=r._columnsController.columnOption(c.column),u=c.showInColumn&&r._columnsController.columnOption(c.showInColumn)||h,p=s(c,u);if(p>=0){l[p]||(l[p]=[]);const f=t[d];if(f===f){let g;U(c.valueFormat)?g=c.valueFormat:c.summaryType!=="count"&&(g=He.getFormatByDataType(h&&h.dataType)),l[p].push(Y({},c,{value:Ke(f)&&h&&h.deserializeValue?h.deserializeValue(f):f,valueFormat:g,columnCaption:h&&h.index!==p?h.caption:void 0}))}}}),cn(l)||n.forEach((d,c)=>{const h=n[c-1],u=o&&((h==null?void 0:h.command)==="expand"||d.command==="expand")?h==null?void 0:h.index:d.index;a.push(l[u]||[])}),a}_getSummaryCells(e,t){const n=this,s=n._columnsController;return n._calculateSummaryCells(e,t,s.getVisibleColumns(),(o,r)=>n._isDataColumn(r)?r.index:-1)}_updateItemsCore(e){const t=this;let n;const s=t._dataSource,o=t._footerItems,r=o&&o[0]&&o[0].summaryCells,a=t.option("summary.totalItems");if(t._footerItems=[],s&&a&&a.length){const l=s.totalAggregates();n=t._getSummaryCells(a,l),e&&e.repaintChangesOnly&&r&&(e.totalColumnIndices=n.map((d,c)=>JSON.stringify(d)!==JSON.stringify(r[c])?c:-1).filter(d=>d>=0)),n.length&&t._footerItems.push({rowType:"totalFooter",summaryCells:n})}super._updateItemsCore(e)}_prepareUnsavedDataSelector(e){if(Pg(this)){const t=this._editingController;if(t)return function(n){return n=t.getUpdatedData(n),e(n)}}return e}_prepareAggregateSelector(e,t){return e=this._prepareUnsavedDataSelector(e),t==="avg"||t==="sum"?function(n){const s=e(n);return U(s)?Number(s):s}:e}_getAggregates(e,t){const n=this;let s=n.option("summary.calculateCustomSummary");const o=n.option("summary.skipEmptyValues");return Ii(e||[],r=>{const a=this._columnsController.columnOption(r.column),l=a&&a.calculateCellValue?a.calculateCellValue.bind(a):Nt(a?a.dataField:r.column);let d=r.summaryType||"count";const c=U(r.skipEmptyValues)?r.skipEmptyValues:o;if(t)return{selector:r.column,summaryType:d};const h=n._prepareAggregateSelector(l,d);if(d==="custom"){s||(mt.log("E1026"),s=function(){});const u={component:n.component,name:r.name};s(u),u.summaryProcess="calculate",d={seed(p){return u.summaryProcess="start",u.totalValue=void 0,u.groupIndex=p,delete u.value,s(u),u.totalValue},step(p,f){return u.summaryProcess="calculate",u.totalValue=p,u.value=f,s(u),u.totalValue},finalize(p){return u.summaryProcess="finalize",u.totalValue=p,delete u.value,s(u),u.totalValue}}}return{selector:h,aggregator:d,skipEmptyValues:c}})}_addSortInfo(e,t,n,s){if(t){const{groupIndex:o}=t;s=s||t.sortOrder,U(o)&&(e[o]=e[o]||[],e[o].push({selector:n,desc:s==="desc"}))}}_findSummaryItem(e,t){let n=-1;return U(t)&&ie(e||[],function(s){if(this.name===t||s===t||this.summaryType===t||this.column===t||function(o){const{summaryType:r}=o,{column:a}=o;return r&&a&&`${r}_${a}`}(this)===t)return n=s,!1}),n}_getSummarySortByGroups(e,t){const n=this,s=n._columnsController,o=s.getGroupColumns(),r=[];if(!(!t||!t.length))return ie(e||[],function(){const{sortOrder:a}=this;let{groupColumn:l}=this;const d=n._findSummaryItem(t,this.summaryItem);if(d<0)return;const c=function(h){return bp(h)[d]};U(l)?(l=s.columnOption(l),n._addSortInfo(r,l,c,a)):ie(o,(h,u)=>{n._addSortInfo(r,u,c,a)})}),r}_createDataSourceAdapterCore(e,t){const n=this,s=super._createDataSourceAdapterCore(e,t);return s.summaryGetter(o=>n._getSummaryOptions(o||t)),s}_getSummaryOptions(e){const t=this,n=t.option("summary.groupItems"),s=t.option("summary.totalItems"),o=t.option("sortByGroupSummaryInfo"),r=t._getAggregates(n,e&&e.grouping&&e.summary),a=t._getAggregates(s,e&&e.summary),l=function(){return t._getSummarySortByGroups(o,n)};if(r.length||a.length)return{groupAggregates:r,totalAggregates:a,sortByGroups:l}}publicMethods(){const e=super.publicMethods();return e.push("getTotalSummaryValue"),e}getTotalSummaryValue(e){const t=this._findSummaryItem(this.option("summary.totalItems"),e),n=this._dataSource.totalAggregates();if(n.length&&t>-1)return n[t]}optionChanged(e){(e.name==="summary"||e.name==="sortByGroupSummaryInfo")&&(e.name="dataSource"),super.optionChanged(e)}init(){this._footerItems=[],super.init()}footerItems(){return this._footerItems}},TW=i=>class extends i{_refreshSummary(){Pg(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})}_addChange(e){const t=super._addChange.apply(this,arguments);return e.type&&this._refreshSummary(),t}_removeChange(){const e=super._removeChange.apply(this,arguments);return this._refreshSummary(),e}cancelEditData(){const e=super.cancelEditData.apply(this,arguments);return this._refreshSummary(),e}},DW=i=>class extends i{_createRow(e){const t=super._createRow.apply(this,arguments);return e&&t.addClass(e.rowType==="groupFooter"?"dx-datagrid-group-footer":""),t}_renderCells(e,t){super._renderCells.apply(this,arguments),t.row.rowType==="group"&&t.row.summaryCells&&t.row.summaryCells.length&&this._renderGroupSummaryCells(e,t)}_hasAlignByColumnSummaryItems(e,t){return!U(t.columns[e].groupIndex)&&t.row.summaryCells[e].length}_getAlignByColumnCellCount(e,t){let n=0;for(let s=1;s<e;s++){const o=t.row.summaryCells.length-s;n=this._hasAlignByColumnSummaryItems(o,t)?s:n}return n}_renderGroupSummaryCells(e,t){const n=e.children().last(),s=Number(n.attr("colSpan"))||1,o=this._getAlignByColumnCellCount(s,t);this._renderGroupSummaryCellsCore(n,t,s,o)}_renderGroupSummaryCellsCore(e,t,n,s){if(s>0){e.attr("colSpan",n-s);for(let o=0;o<s;o++){const r=t.columns.length-s+o;this._renderCell(e.parent(),Y({column:t.columns[r],columnIndex:this._getSummaryCellIndex(r,t.columns)},t))}}}_getSummaryCellIndex(e,t){return e}_getCellTemplate(e){return!e.column.command&&!U(e.column.groupIndex)&&e.summaryItems&&e.summaryItems.length?ZI:super._getCellTemplate(e)}_getCellOptions(e){const t=this,n=super._getCellOptions(e);return e.row.summaryCells?Y(n,JI(t,e)):n}};He.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:re.format("dxDataGrid-summarySum"),sumOtherColumn:re.format("dxDataGrid-summarySumOtherColumn"),min:re.format("dxDataGrid-summaryMin"),minOtherColumn:re.format("dxDataGrid-summaryMinOtherColumn"),max:re.format("dxDataGrid-summaryMax"),maxOtherColumn:re.format("dxDataGrid-summaryMaxOtherColumn"),avg:re.format("dxDataGrid-summaryAvg"),avgOtherColumn:re.format("dxDataGrid-summaryAvgOtherColumn"),count:re.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:SW},extenders:{controllers:{data:IW,editing:TW},views:{rowsView:DW}}});const AW="dx-master-detail-row",Ls=function(i){let e=-1;return ie(i,(t,n)=>{if(n.command==="transparent")return e=t,!1}),e},nT=function(i,e,t){let n=0;if(i&&e&&t)for(let s=0;s<i.length;s++)i[s].command==="transparent"?n+=i[s].colspan:(e[n]<t[s]&&(e[n]=t[s]),n++);return e},Bg=i=>class extends i{init(){super.init(),this._isFixedTableRendering=!1,this._isFixedColumns=!1}_createCol(e){return super._createCol(e).toggleClass("dx-col-fixed",!!(this._isFixedTableRendering&&(e.fixed||e.command&&e.command!=="transparent")))}isIndicesArray(e){return Array.isArray(e)&&e.length>0}_correctColumnIndicesForFixedColumns(e,t){var n;const s=t==null?void 0:t.columnIndices;if(!this.isIndicesArray(s))return;const o=Ls(e),r=e[o].colspan,a=o+r,l=t==null||(n=t.items)===null||n===void 0?void 0:n.map(d=>{let{rowType:c}=d;return c});t.columnIndices=s.map((d,c)=>this.isIndicesArray(d)?l&&l[c]==="group"?[...d]:d.reduce((u,p)=>{switch(!0){case p<o:u.push(p);break;case p>=a:u.push(p-r+1)}return u},[]):d)}_partialUpdateFixedTable(e,t){const n=this._fixedTableElement,s=this._getRowElementsCore(n);n.children("colgroup").replaceWith(this._createColGroup(e));for(let r=0;r<t.length;r++)this._partialUpdateFixedRow(R(s[r]),e,t[r])}_partialUpdateFixedRow(e,t,n){const s=e.get(0).childNodes,o=Ls(t),r=t[o],a=this._columnsController.getColumnIndexOffset();let l,d=a+1,{colspan:c}=r;if(e.hasClass(AW)){var h;s[0].setAttribute("colspan",(h=this._columnsController.getVisibleColumns())===null||h===void 0?void 0:h.length);return}if(e.hasClass("dx-group-row"))if(l=this._getGroupCellOptions({row:n,columns:this._columnsController.getVisibleColumns()}),n.summaryCells.length>0){const p=this._getAlignByColumnCellCount(l.colspan,{columns:this._columnsController.getVisibleColumns(),row:n,isFixed:!0});c=l.colspan-p}else c=l.colspan-Math.max(0,s.length-(l.columnIndex+2));for(let u=0;u<s.length;u++){const p=l?u===l.columnIndex+1:u===o;s[u].setAttribute("aria-colindex",d),p?(s[u].setAttribute("colspan",c),d+=c):d++}}_renderTable(e){let t;const n=this.getFixedColumns();this._isFixedColumns=!!n.length;const s=super._renderTable(e);if(this._isFixedColumns){var o;const a=e==null?void 0:e.change,l=this._getRowElements(this._fixedTableElement),d=(a==null?void 0:a.virtualColumnsScrolling)&&l.length===(a==null||(o=a.items)===null||o===void 0?void 0:o.length);if(this._isFixedTableRendering=!0,d&&this.option("scrolling.legacyMode")!==!0){var r;this._partialUpdateFixedTable(n,e==null||(r=e.change)===null||r===void 0?void 0:r.items),this._isFixedTableRendering=!1}else{const c=a==null?void 0:a.columnIndices;this._correctColumnIndicesForFixedColumns(n,a),t=this._createTable(n),this._renderRows(t,Y({},e,{columns:n})),this._updateContent(t,a,!0),c&&(a.columnIndices=c),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return s}_renderRow(e,t){let n,{cells:s}=t.row;if(super._renderRow.apply(this,arguments),this._isFixedTableRendering&&s&&s.length){n=0;const o=t.row.cells||[];s=s.slice(),t.row.cells=s;for(let r=0;r<o.length;r++){if(o[r].column&&o[r].column.command==="transparent"){n=(o[r].column.colspan||1)-1;continue}s[r+n]=o[r]}}}_createCell(e){const t=this,{column:n}=e,s=n&&n.command,{rowType:o}=e,r=super._createCell.apply(t,arguments);let a,l,d;(t._isFixedTableRendering||o==="filter")&&(a=t.getFixedColumns(),d=Ls(a),l=a[d-1]),t._isFixedTableRendering?s==="transparent"&&(r.addClass("dx-pointer-events-none").toggleClass("dx-first-cell",d===0||l&&l.command==="expand").toggleClass("dx-last-cell",a.length&&d===a.length-1),o!=="freeSpace"&&Ce.setEmptyText(r)):o==="filter"&&r.toggleClass("dx-first-cell",e.columnIndex===d);const c=t.option("rowAlternationEnabled")&&e.isAltRow,h=t.option("selection.mode")==="multiple"&&e.columnIndex===0&&e.rowType==="header";return Zt.mozilla&&e.column.fixed&&e.rowType!=="group"&&!c&&!h&&r.addClass("dx-col-fixed"),r}_getContent(e){var t;return e?(t=this._fixedTableElement)===null||t===void 0?void 0:t.parent():super._getContent.apply(this,arguments)}_wrapTableInScrollContainer(e,t){const n=super._wrapTableInScrollContainer.apply(this,arguments);return(this._isFixedTableRendering||t)&&n.addClass(this.addWidgetPrefix("content-fixed")),n}_renderCellContent(e,t){let n;const{column:s}=t,o=this._isFixedTableRendering,r=t.rowType==="group"&&U(s.groupIndex);if(o&&r&&!s.command&&!s.groupCellTemplate&&e.css("pointerEvents","none"),!o&&this._isFixedColumns){if(n=s.fixed||s.command&&s.fixed!==!1,r&&(n=!1,t.row.summaryCells&&t.row.summaryCells.length)){var a;const l=this._columnsController.getVisibleColumns(),d=((a=this._getAlignByColumnCellCount)===null||a===void 0?void 0:a.call(this,s.colspan,{columns:l,row:t.row,isFixed:!0}))??0;if(d>0){const c=Ls(this._columnsController.getFixedColumns());n=l.length-d<c}}if(n){if(s.command&&s.type!=="buttons"||t.rowType==="group"){e.html("&nbsp;").addClass(s.cssClass);return}e.addClass("dx-hidden-cell")}}s.command!=="transparent"&&super._renderCellContent.apply(this,arguments)}_getCellElementsCore(e){const t=super._getCellElementsCore.apply(this,arguments),n=t==null?void 0:t.parent().hasClass("dx-group-row"),s=this.name==="columnHeadersView"?e:void 0;if(this._fixedTableElement&&t){const o=this.getFixedColumns(s),r=this._getRowElements(this._fixedTableElement).eq(e).children("td");ie(r,(a,l)=>{if(n)t[a]&&l.style.visibility!=="hidden"&&(t[a]=l);else{const d=o[a];if(d)if(d.command==="transparent")r.eq(a).hasClass("dx-master-detail-cell")&&(t[a]=l||t[a]);else{const c=this._columnsController.getVisibleIndexByColumn(d,s);t[c]=l||t[c]}}})}return t}getColumnWidths(e){const t=super.getColumnWidths(),n=this.getFixedColumns(),s=this._fixedTableElement&&t.length?super.getColumnWidths(this._fixedTableElement):void 0;return nT(n,t,s)}getTableElement(e){return e=this._isFixedTableRendering||e,e?this._fixedTableElement:super.getTableElement()}setTableElement(e,t){this._isFixedTableRendering||t?this._fixedTableElement=e.addClass("dx-pointer-events-none"):super.setTableElement(e)}getColumns(e){const t=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(e):super.getColumns(e,t)}getRowIndex(e){const t=this._fixedTableElement;return t&&t.find(e).length?this._getRowElements(t).index(e):super.getRowIndex(e)}getTableElements(){let e=super.getTableElements.apply(this,arguments);return this._fixedTableElement&&(e=R([e.get(0),this._fixedTableElement.get(0)])),e}getFixedColumns(e){return this._columnsController.getFixedColumns(e)}getFixedColumnsOffset(){let e={left:0,right:0},t;if(this._fixedTableElement){t=this.getTransparentColumnElement();const n=t.position();e={left:n.left,right:St(this.element(),!0)-(St(t,!0)+n.left)}}return e}getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".dx-pointer-events-none").first()}getFixedTableElement(){return this._fixedTableElement}isFixedColumns(){return this._isFixedColumns}_resizeCore(){super._resizeCore(),this.synchronizeRows()}setColumnWidths(e){var t;const{widths:n}=e,s=this._columnsController.getVisibleColumns(),o=(n==null?void 0:n.length)&&s.some(d=>U(d.visibleWidth)),r=(t=e.optionNames)===null||t===void 0?void 0:t.width;if(super.setColumnWidths(e),this._fixedTableElement){const h=(n==null?void 0:n.some(u=>u==="auto"||!U(u)))&&(!o||!this.isScrollbarVisible(!0))?s:this.getFixedColumns();this.setFixedTableColumnWidths(h,n)}const a=this.option("wordWrapEnabled");(o||r&&a)&&this.synchronizeRows()}setFixedTableColumnWidths(e,t){if(!this._fixedTableElement||!t)return;const n=this._fixedTableElement.children("colgroup").children("col");n.toArray().forEach(o=>o.removeAttribute("style"));let s=0;e.forEach(o=>{if(o.colspan){s+=o.colspan;return}const r=Xw(t[s]);U(r)&&Tp(n.eq(s),r),s+=1})}_getClientHeight(e){const t=e.getBoundingClientRect&&yi(e);return t&&t.height?t.height:e.clientHeight}synchronizeRows(){const e=[],t=[];let n,s,o,r;this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){const a=this._getClientHeight(this._tableElement.get(0)),l=this._getClientHeight(this._fixedTableElement.get(0));if(s=this._getRowElements(this._tableElement),o=this._getRowElements(this._fixedTableElement),r=this._findContentElement(),a!==l){for(r&&r.css("height",a),s.css("height",""),o.css("height",""),n=0;n<s.length;n++)e.push(this._getClientHeight(s.get(n))),t.push(this._getClientHeight(o.get(n)));for(n=0;n<s.length;n++){const d=e[n],c=t[n];d>c?o.eq(n).css("height",d):d<c&&s.eq(n).css("height",c)}r&&r.css("height","")}}})}setScrollerSpacing(e,t){const n=this.option("rtlEnabled");super.setScrollerSpacing(e),this.element().children(`.${this.addWidgetPrefix("content-fixed")}`).css({paddingLeft:n?e:"",paddingRight:n?"":e})}},kW=i=>class extends Bg(i){_getRowVisibleColumns(e){return this._isFixedTableRendering?this.getFixedColumns(e):super._getRowVisibleColumns(e)}getContextMenuItems(e){const{column:t}=e,n=this.option("columnFixing");let s=super.getContextMenuItems(e);if(e.row&&e.row.rowType==="header"&&n.enabled===!0&&t&&t.allowFixing){const o=r=>{switch(r.itemData.value){case"none":this._columnsController.columnOption(t.index,"fixed",!1);break;case"left":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"right"})}};s=s||[],s.push({text:n.texts.fix,beginGroup:!0,items:[{text:n.texts.leftPosition,value:"left",disabled:t.fixed&&(!t.fixedPosition||t.fixedPosition==="left"),onItemClick:o},{text:n.texts.rightPosition,value:"right",disabled:t.fixed&&t.fixedPosition==="right",onItemClick:o}]},{text:n.texts.unfix,value:"none",disabled:!t.fixed,onItemClick:o})}return s}getFixedColumnElements(e){const t=this;if(U(e))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(e).children();const n=t.getColumnElements(),s=t.getTransparentColumnElement();if(n&&s&&s.length){const o=Ls(t.getFixedColumns());n.splice(o,s.get(0).colSpan,s.get(0))}return n}getColumnWidths(){const e=this;let t;const n=super.getColumnWidths(),s=e.getFixedColumnElements(),o=e.getFixedColumns();return e._fixedTableElement&&(s&&s.length?t=e._getWidths(s):t=super.getColumnWidths(e._fixedTableElement)),nT(o,n,t)}},OW=i=>class extends Bg(i){dispose(){super.dispose.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}optionChanged(e){super.optionChanged(e),e.name==="hoverStateEnabled"&&this._isFixedColumns&&(e.value?this._attachHoverEvents():this._detachHoverEvents())}_detachHoverEvents(){const e=this.element();this._fixedTableElement&&this._tableElement&&q.off(e,"mouseover mouseout",".dx-data-row")}_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&q.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(e=>{const{event:t}=e,n=this.getRowIndex(R(t.target).closest(".dx-row")),s=t.type==="mouseover";n>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(n).toggleClass("dx-state-hover",s),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(n).toggleClass("dx-state-hover",s))}))}_getScrollDelay(){var e;return((e=this._resizingController)===null||e===void 0?void 0:e.hasResizeTimeout())?this.option("scrolling.updateTimeout"):Zt.mozilla?60:0}_findContentElement(e){let t,n;const s=this.addWidgetPrefix("content"),o=this.element();if(e=this._isFixedTableRendering||e,o&&e){t=o.children(`.${s}`);const r=this.getScrollable();return!t.length&&r&&(t=R("<div>").addClass(s),q.on(t,"scroll",a=>{const{target:l}=a,d=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{n=R(l).scrollTop(),r.scrollTo({y:n})},d)}),q.on(t,Ll,a=>{const l=R(a.target).closest(".dx-scrollable");let d=!1;if(r&&r.$element().is(l))d=!0;else{const c=l.length&&vn.getInstance(l.get(0)),h=c&&c.scrollHeight()-c.clientHeight()>0;d=c&&!h}if(d){n=r.scrollTop(),r.scrollTo({y:n-a.delta});const c=r.scrollTop()+r.clientHeight(),h=r.scrollHeight()+this.getScrollbarWidth();if(r.scrollTop()>0&&c<h)return!1}}),t.appendTo(o)),t}return super._findContentElement()}_updateScrollable(){super._updateScrollable();const e=this.getScrollable();if(e!=null&&e._disposed)return;const t=e&&e.scrollOffset().top;this._updateFixedTablePosition(t)}_renderContent(e,t,n){return this._isFixedTableRendering||n?e.empty().addClass(`${this.addWidgetPrefix("content")} ${this.addWidgetPrefix("content-fixed")}`).append(t):super._renderContent(e,t)}_getGroupCellOptions(e){return this._isFixedTableRendering?super._getGroupCellOptions(Y({},e,{columns:this._columnsController.getVisibleColumns()})):super._getGroupCellOptions(e)}_renderGroupedCells(e,t){return super._renderGroupedCells(e,Y({},t,{columns:this._columnsController.getVisibleColumns()}))}_renderGroupSummaryCells(e,t){this._isFixedTableRendering?super._renderGroupSummaryCells(e,Y({},t,{columns:this._columnsController.getVisibleColumns()})):super._renderGroupSummaryCells(e,t)}_hasAlignByColumnSummaryItems(e,t){const n=super._hasAlignByColumnSummaryItems.apply(this,arguments),s=t.columns[e];return t.isFixed?s.fixed&&(n||s.fixedPosition==="right"):n&&(!this._isFixedColumns||!s.fixed)}_renderGroupSummaryCellsCore(e,t,n,s){let o;if(this._isFixedTableRendering){t.isFixed=!0,o=this._getAlignByColumnCellCount(n,t),t.isFixed=!1;const r=t.columns.length-o;t=Y({},t,{columns:this.getFixedColumns()});const a=Ls(t.columns);r<a?(o-=t.columns[a].colspan-1||0,n-=t.columns[a].colspan-1||0):s>0&&e.css("visibility","hidden"),s=o}super._renderGroupSummaryCellsCore(e,t,n,s)}_getSummaryCellIndex(e,t){if(this._isFixedTableRendering){const n=Ls(t);return e>n&&(e+=t[n].colspan-1),e}return super._getSummaryCellIndex.apply(this,arguments)}_renderCore(e){this._detachHoverEvents();const t=super._renderCore(e),n=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",n),this.option("hoverStateEnabled")&&n&&this._attachHoverEvents(),t}setAriaOwns(e,t,n){if(n){var s;const o=this.addWidgetPrefix("content-fixed"),r=(s=this.element())===null||s===void 0?void 0:s.children(`.${o}`),a=this.getFixedTableElement();r.length&&a!==null&&a!==void 0&&a.length&&this.setAria("owns",`${e??""} ${a.attr("id")??""} ${t??""}`.trim(),r)}else super.setAriaOwns.apply(this,arguments)}setRowsOpacity(e,t){super.setRowsOpacity(e,t);const n=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(n,this.getFixedColumns(),e,t)}getCellIndex(e){const t=this._fixedTableElement;let n=0;if(t&&e.is("td")&&e.closest(t).length){const s=this.getFixedColumns();return ie(s,(o,r)=>{if(o===e[0].cellIndex)return!1;if(r.colspan){n+=r.colspan;return}n++}),n}return super.getCellIndex.apply(this,arguments)}_updateFixedTablePosition(e,t){if(this._fixedTableElement&&this._tableElement){let n;this._fixedTableElement.parent().scrollTop(e),t&&this._editorFactoryController&&(n=this._editorFactoryController.focus(),n&&this._editorFactoryController.focus(n))}}setScrollerSpacing(e,t){const n=this,s={marginBottom:0},o=n.element().children(`.${this.addWidgetPrefix("content-fixed")}`);o.length&&n._fixedTableElement&&(o.css(s),n._fixedTableElement.css(s),s[n.option("rtlEnabled")?"marginLeft":"marginRight"]=e,s.marginBottom=t,(n._scrollable&&n._scrollable.option("useNative")?o:n._fixedTableElement).css(s))}_getElasticScrollTop(e){let t=0;if(e.scrollOffset.top<0)t=-e.scrollOffset.top;else if(e.reachedBottom){const n=R(e.component.content()),s=R(e.component.container()),o=Math.max(n.get(0).clientHeight-s.get(0).clientHeight,0);t=Math.min(o-e.scrollOffset.top,0)}return Math.floor(t)}_applyElasticScrolling(e){if(this._fixedTableElement){const t=this._getElasticScrollTop(e);Math.ceil(t)!==0?Bi(this._fixedTableElement,{top:t}):this._fixedTableElement.css("transform","")}}_handleScroll(e){this._updateFixedTablePosition(e.scrollOffset.top,!0),this._applyElasticScrolling(e),super._handleScroll(e)}_updateContentPosition(e){super._updateContentPosition.apply(this,arguments),e||this._updateFixedTablePosition(this._scrollTop)}_afterRowPrepared(e){this._isFixedTableRendering||super._afterRowPrepared(e)}_scrollToElement(e){super._scrollToElement(e,this.getFixedColumnsOffset())}},RW=i=>class extends Bg(i){},MW=function(i,e,t){const n=Ls(e),s=i.length-e.length;return ie(t,(o,r)=>{r.index>n&&(r.columnIndex+=s,r.index+=s)}),t},PW=i=>class extends i{_generatePointsByColumns(e){const t=e.columns,{targetDraggingPanel:n}=e;if(n&&n.getName()==="headers"&&n.isFixedColumns()&&e.sourceColumn.fixed){e.rowIndex||(e.columnElements=n.getFixedColumnElements(0)),e.columns=n.getFixedColumns(e.rowIndex);const s=super._generatePointsByColumns(e);return MW(t,e.columns,s),s}return super._generatePointsByColumns(e)}_pointCreated(e,t,n,s){const o=super._pointCreated.apply(this,arguments),r=t[e.columnIndex],a=this._columnHeadersView.getTransparentColumnElement();if(!o&&n==="headers"&&a&&a.length){const l=yi(a.get(0));return s&&s.fixed?s.fixedPosition==="right"?e.x<l.right:e.x>l.left:r&&r.fixed&&r.fixedPosition!=="right"?!0:e.x<l.left||e.x>l.right}return o}},BW=i=>class extends i{_generatePointsByColumns(){const e=this,t=e._columnsController,n=t&&e._columnsController.getVisibleColumns(),s=t&&e._columnsController.getFixedColumns(),o=Ls(s),r=n.length-s.length,a=e._columnHeadersView.getFixedColumnElements();super._generatePointsByColumns(),a&&a.length>0&&(e._pointsByFixedColumns=Ce.getPointsByColumns(a,l=>(l.index>o&&(l.columnIndex+=r,l.index+=r),e._pointCreated(l,n.length,n))))}_getTargetPoint(e,t,n){const s=this._columnHeadersView.getTransparentColumnElement();if(s&&s.length){const o=yi(s.get(0));if(t<=o.left||t>=o.right)return super._getTargetPoint(this._pointsByFixedColumns,t,n)}return super._getTargetPoint(e,t,n)}},FW=i=>class extends i{_setAriaOwns(){var e,t,n;super._setAriaOwns.apply(this,arguments);const s=(e=this._columnHeadersView)===null||e===void 0?void 0:e.getFixedTableElement(),o=(t=this._footerView)===null||t===void 0?void 0:t.getFixedTableElement();(n=this._rowsView)===null||n===void 0||n.setAriaOwns(s==null?void 0:s.attr("id"),o==null?void 0:o.attr("id"),!0)}},VW=i=>class extends i{_toggleInertAttr(e){var t;const n=(t=this._rowsView)===null||t===void 0?void 0:t.getFixedContentElement();e?n==null||n.attr("inert",!0):n==null||n.removeAttr("inert")}},NW={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:re.format("dxDataGrid-columnFixingFix"),unfix:re.format("dxDataGrid-columnFixingUnfix"),leftPosition:re.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:re.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:kW,rowsView:OW,footerView:RW},controllers:{draggingHeader:PW,columnsResizer:BW,resizing:FW,keyboardNavigation:VW}}};He.registerModule("columnFixing",NW);const sT="rowsView",LW="footerView",vp=["columnHeadersView",sT,LW],$W="dxDataGridAdaptivity",oT="dxDataGrid-ariaAdaptiveExpand",HW="dxDataGrid-ariaAdaptiveCollapse",zW="scrolling.legacyMode";function ic(i,e){return i._columnsController.getColumnId(e)}function WW(i){return i.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}function jW(i,e){let t;const n=R(i),s=e.component.getController("adaptiveColumns");e.rowType==="data"?(t=R("<span>").addClass(s.addWidgetPrefix("adaptive-more")),q.on(t,be(kt,$W),s.createAction(()=>{s.toggleExpandAdaptiveDetailRow(e.key)})),t.appendTo(n)):Ce.setEmptyText(n)}function zf(i){var e;const t=(e=i.data)===null||e===void 0?void 0:e.$nextCell;q.off(t,"focus",zf),q.trigger(t,"dxclick")}class KW extends Yt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._rowsView=this.getView("rowsView"),this._columnsController.addCommandColumn({type:"adaptive",command:"adaptive",visible:!0,adaptiveHidden:!0,cssClass:"dx-command-adaptive",alignment:"center",width:"auto",cellTemplate:jW,fixedPosition:"right"}),this._columnsController.columnsChanged.add(()=>{const e=!!this.updateHidingQueue(this._columnsController.getColumns()).length;this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),this._hidingColumnsQueue=[],this._hiddenColumns=[],this.createAction("onAdaptiveDetailRowPreparing"),super.init()}optionChanged(e){e.name==="columnHidingEnabled"&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e.value),super.optionChanged(e)}publicMethods(){return["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"]}_isRowEditMode(){return this._getEditMode()==="row"}_isItemModified(e,t){const n=this._columnsController.getVisibleIndex(e.column.index),s=this._dataController.getRowIndexByKey(t.key),o=this._dataController.items()[s+1];return o&&o.modifiedValues&&U(o.modifiedValues[n])}_renderFormViewTemplate(e,t,n){const s=this,{column:o}=e,r=s.createAction(()=>{s._editingController.isEditing()&&q.trigger(n,kt)}),a=t.row.data,l=o.calculateCellValue(a),d=Ce.getDisplayValue(o,l,a,t.rowType),c=Ce.formatValue(d,o),h=this._editingController.isCellOrBatchEditMode(),u=s._rowsView;if(o.allowEditing&&this._keyboardNavigationController.isKeyboardEnabled()&&(n.attr("tabIndex",s.option("tabIndex")),h&&(q.off(n,"focus",r),q.on(n,"focus",r))),o.cellTemplate){const p=Y({},t,{value:l,displayValue:d,text:c,column:o});u.renderTemplate(n,o.cellTemplate,p,_u(n)).done(()=>{u._cellPrepared(n,t)})}else{const p=n.get(0);o.encodeHtml?p.textContent=c:p.innerHTML=c,n.addClass("dx-adaptive-item-text"),(!U(c)||c==="")&&n.html("&nbsp;"),s._isRowEditMode()||s._isItemModified(e,t)&&n.addClass("dx-item-modified"),u._cellPrepared(n,t)}}_getTemplate(e,t,n){const s=this,{column:o}=e,r=this._editingController;return function(a,l){const d=R(l),c=s._columnsController.getVisibleIndex(o.index),h=Y({},t),u=function(){const p=s._isItemEdited(e);h.value=t.row.values[c],p||o.showEditorAlways?r.renderFormEditorTemplate(h,e,a,d,!p):(h.column=o,h.columnIndex=c,s._renderFormViewTemplate(e,h,d))};if(u(),h.watch){const p=h.watch(()=>({isItemEdited:s._isItemEdited(e),value:t.row.values[c]}),()=>{d.contents().remove(),d.removeClass("dx-adaptive-item-text"),u()});q.on(d,Rn,p)}}}_isVisibleColumnsValid(e){return!(e<2||e.length-function(){let t=0;for(let n=0;n<e.length;n++)e[n].command&&t++;return t}()<=1)}_calculatePercentWidths(e,t){const n=this;let s=0;return t.forEach((o,r)=>{e[r]!=="adaptiveHidden"&&(s+=n._getItemPercentWidth(o))}),s}_isPercentWidth(e){return Ke(e)&&e.endsWith("%")}_isColumnHidden(e){return this._hiddenColumns.filter(t=>t.index===e.index).length>0}_getAverageColumnsWidth(e,t,n){const s=this;let o=0,r=0;return t.forEach(a=>{if(!s._isColumnHidden(a)){const{width:l}=a;U(l)&&!isNaN(parseFloat(l))?o+=s._isPercentWidth(l)?s._calculatePercentWidth({visibleIndex:a.visibleIndex,columnsCount:t.length,columnsCanFit:n,bestFitWidth:a.bestFitWidth,columnWidth:l,containerWidth:e}):parseFloat(l):r++}}),(e-o)/r}_calculateColumnWidth(e,t,n,s){const o=ic(this,e),r=this._columnsController.columnOption(o,"width"),a=this._columnsController.columnOption(o,"bestFitWidth"),l=n.length;let d;if(r&&r!=="auto")if(this._isPercentWidth(r))d=this._calculatePercentWidth({visibleIndex:e.visibleIndex,columnsCount:l,columnsCanFit:s,bestFitWidth:a,columnWidth:r,containerWidth:t});else return parseFloat(r);else d=this.option("columnAutoWidth")||e.command?a:this._getAverageColumnsWidth(t,n,s);return d}_calculatePercentWidth(e){const t=e.visibleIndex<e.columnsCount-1&&e.columnsCanFit,n=e.containerWidth*parseFloat(e.columnWidth)/100,s=e.columnsCanFit&&n<e.bestFitWidth?e.bestFitWidth:n;return t?e.containerWidth*parseFloat(e.columnWidth)/100:s}_getNotTruncatedColumnWidth(e,t,n,s){const o=ic(this,e),r=this._columnsController.columnOption(o,"width"),a=this._columnsController.columnOption(o,"bestFitWidth");if(r&&r!=="auto"&&!this._isPercentWidth(r))return parseFloat(r);const l=this._calculateColumnWidth(e,t,n,s);return l<a?null:l}_getItemPercentWidth(e){let t=0;return e.width&&this._isPercentWidth(e.width)&&(t=parseFloat(e.width)),t}_getCommandColumnsWidth(){const e=this,t=e._columnsController.getVisibleColumns();let n=0;return ie(t,(s,o)=>{(o.index<0||o.command)&&(n+=e._columnsController.columnOption(ic(e,o),"bestFitWidth")||0)}),n}_isItemEdited(e){if(this.isFormOrPopupEditMode())return!1;if(this._isRowEditMode()){const t=this.option("editing.editRowKey");if(zt(t,this._dataController.adaptiveExpandedKey()))return!0}else{const t=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,n=this._columnsController.getVisibleIndex(e.column.index);return this._editingController.isEditCell(t,n)}}_getFormItemsByHiddenColumns(e){const t=[];return ie(e,(n,s)=>{t.push({column:s,name:s.name,dataField:s.dataField,visibleIndex:s.visibleIndex})}),t}_getAdaptiveColumnVisibleIndex(e){for(let t=0;t<e.length;t++)if(e[t].command==="adaptive")return t}_hideAdaptiveColumn(e,t){const n=this._getAdaptiveColumnVisibleIndex(t);U(n)&&(e[n]="adaptiveHidden",this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:n}))}_showHiddenCellsInView(e){let{$cells:t,isCommandColumn:n}=e,s=this.addWidgetPrefix("hidden-column");n?(s="dx-command-adaptive-hidden",t.attr({tabIndex:0,"aria-hidden":null}).removeClass(s)):t.removeClass(s)}_showHiddenColumns(){for(let e=0;e<vp.length;e++){const t=this.getView(vp[e]);if(t&&t.isVisible()&&t.element()){const n=t.name,s=t.element().find(".dx-command-adaptive-hidden");this._showHiddenCellsInView({viewName:n,$cells:s,isCommandColumn:!0});const o=t.element().find(`.${this.addWidgetPrefix("hidden-column")}`);this._showHiddenCellsInView({viewName:n,$cells:o})}}}_isCellValid(e){return e&&e.length&&!e.hasClass("dx-master-detail-cell")&&!e.hasClass("dx-group-cell")}_hideVisibleColumn(e){let{isCommandColumn:t,visibleIndex:n}=e;const s=this;vp.forEach(o=>{const r=s.getView(o);r&&s._hideVisibleColumnInView({view:r,isCommandColumn:t,visibleIndex:n})})}_hideVisibleColumnInView(e){let{view:t,isCommandColumn:n,visibleIndex:s}=e;const o=t.name;let r;const a=this._columnsController.getVisibleColumns()[s],l=this._editingController&&this._editingController.getEditFormRowIndex();if(t&&t.isVisible()&&a){const d=t.getRowsCount(),c=t._getRowElements();for(let h=0;h<d;h++)if(!(h===l&&o===sT&&this.option("editing.mode")!=="popup")){const p=o==="columnHeadersView"?this._columnsController.getVisibleIndex(a.index,h):s;if(p>=0){const f=c.eq(h);r=this._findCellElementInRow(f,p),this._isCellValid(r)&&this._hideVisibleCellInView({viewName:o,isCommandColumn:n,$cell:r})}}}}_findCellElementInRow(e,t){const n=e.children();let s=t,o=!1;if(e.hasClass("dx-group-row")){const a=e.find(".dx-group-cell"),l=a.attr("colspan");if(a.length&&U(l)){const d=parseInt(l),c=a.index()+d-1;t>c?s=t-d+1:o=!0}}return o?void 0:n.eq(s)}_hideVisibleCellInView(e){let{$cell:t,isCommandColumn:n}=e;const s=n?"dx-command-adaptive-hidden":this.addWidgetPrefix("hidden-column");t.attr({tabIndex:-1,"aria-hidden":!0}).addClass(s)}_getEditMode(){return this._editingController.getEditMode()}isFormOrPopupEditMode(){const e=this._getEditMode();return e==="form"||e==="popup"}hideRedundantColumns(e,t,n){const s=this;if(this._hiddenColumns=[],s._isVisibleColumnsValid(t)&&n.length){let o=0;const r=s.component.$element();let a=Ge(r)-s._getCommandColumnsWidth();const l=(function(){return t.filter(f=>!f.command&&this._hiddenColumns.filter(g=>g.index===f.index).length===0)}).bind(this);let d=l();const c=d.length;let h,u,p;do{p=!1,o=0;const f=s._calculatePercentWidths(e,t),g=f<100&&f!==0;for(h=0;h<t.length;h++){const m=t[h];let b=s._getNotTruncatedColumnWidth(m,a,d,g);const _=ic(s,m),w=s._columnsController.columnOption(_,"width"),E=s._columnsController.columnOption(_,"minWidth"),D=s._columnsController.columnOption(_,"bestFitWidth");if(e[h]==="adaptiveHidden"){u=!0;continue}if(!b&&!m.command&&!m.fixed){p=!0;break}(!w||w==="auto")&&(b=Math.max(D||0,E||0)),(m.command!=="adaptive"||u)&&(o+=b)}if(p=p||o>Ge(r),p){const m=n.pop(),b=s._columnsController.getVisibleIndex(m.index);a+=s._calculateColumnWidth(m,a,d,g),s._hideVisibleColumn({visibleIndex:b}),e[b]="adaptiveHidden",this._hiddenColumns.push(m),d=l()}}while(p&&d.length>1&&n.length);c===d.length&&s._hideAdaptiveColumn(e,t)}else s._hideAdaptiveColumn(e,t)}getAdaptiveDetailItems(){return this._$itemContents}getItemContentByColumnIndex(e){let t;for(let n=0;n<this._$itemContents.length;n++){t=this._$itemContents.eq(n);const s=t.data("dx-form-item");if(s&&s.column&&this._columnsController.getVisibleIndex(s.column.index)===e)return t}}toggleExpandAdaptiveDetailRow(e,t){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this._dataController.toggleExpandAdaptiveDetailRow(e,t)}createFormByHiddenColumns(e,t){const n=this,s=R(e),o={items:n._getFormItemsByHiddenColumns(n._hiddenColumns),formID:`dx-${new hi}`},r=tn()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:o}),n._$itemContents=null,n._form=n._createComponent(R("<div>").appendTo(s),Sg,Y(r,o,{customizeItem(a){const l=a.column||n._columnsController.columnOption(a.name||a.dataField);l&&(a.label=a.label||{},a.label.text=a.label.text||l.caption,a.column=l,a.template=n._getTemplate(a,t,n.updateForm.bind(n))),o.customizeItem&&o.customizeItem.call(this,a)},onContentReady(a){o.onContentReady&&o.onContentReady.call(this,a),n._$itemContents=s.find(".dx-field-item-content")}}))}hasAdaptiveDetailRowExpanded(){return U(this._dataController.adaptiveExpandedKey())}updateForm(e){this.hasAdaptiveDetailRowExpanded()&&this._form&&U(this._form._contentReadyAction)&&(e&&e.length?this._form.option("items",this._getFormItemsByHiddenColumns(e)):this._form.repaint())}updateHidingQueue(e){const t=this,n=e.filter(r=>r.visible&&!r.type&&!r.fixed&&!(U(r.groupIndex)&&r.groupIndex>=0));let s,o;if(t._hidingColumnsQueue=[],t.option("allowColumnResizing")&&t.option("columnResizingMode")==="widget")return t._hidingColumnsQueue;for(o=0;o<n.length;o++)U(n[o].hidingPriority)&&n[o].hidingPriority>=0&&(s=!0,t._hidingColumnsQueue[n[o].hidingPriority]=n[o]);if(s)t._hidingColumnsQueue.reverse();else if(t.option("columnHidingEnabled"))for(o=0;o<n.length;o++){const r=t._columnsController.getVisibleIndex(n[o].index);t._hidingColumnsQueue[r]=n[o]}return t._hidingColumnsQueue=t._hidingColumnsQueue.filter(Object),t._hidingColumnsQueue}getHiddenColumns(){return this._hiddenColumns}hasHiddenColumns(){return this._hiddenColumns.length>0}getHidingColumnsQueue(){return this._hidingColumnsQueue}isAdaptiveDetailRowExpanded(e){const t=this._dataController;return t.adaptiveExpandedKey()&&zt(t.adaptiveExpandedKey(),e)}expandAdaptiveDetailRow(e){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(e)}collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()}updateCommandAdaptiveAriaLabel(e,t){const n=this._dataController.getRowIndexByKey(e);if(n===-1)return;const s=R(this.component.getRowElement(n));this.setCommandAdaptiveAriaLabel(s,t)}setCommandAdaptiveAriaLabel(e,t){e.find(".dx-command-adaptive").attr("aria-label",re.format(t))}}const GW=i=>class extends i{_isCellValid(e,t){return super._isCellValid(e,t)&&!e.hasClass(this.addWidgetPrefix("hidden-column"))&&!e.hasClass("dx-command-adaptive-hidden")}_processNextCellInMasterDetail(e,t){super._processNextCellInMasterDetail(e,t);const n=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&e&&n&&!this._isInsideEditForm(e)&&(q.off(e,"focus",zf),q.on(e,"focus",{$nextCell:e},zf),q.trigger(t,"focus"))}_isCellElement(e){return super._isCellElement(e)||e.hasClass("dx-adaptive-item-text")}},UW=i=>class extends i{_getCellTemplate(e){const t=this,{column:n}=e;return e.rowType==="detailAdaptive"&&n.command==="detail"?function(s,o){t._adaptiveColumnsController.createFormByHiddenColumns(R(s),o)}:super._getCellTemplate(e)}_createRow(e){const t=super._createRow.apply(this,arguments);return e&&e.rowType==="detailAdaptive"&&e.key===this._dataController.adaptiveExpandedKey()&&t.addClass("dx-adaptive-detail-row"),t}_renderCells(e,t){super._renderCells(e,t);const n=this._adaptiveColumnsController,s=n.getHidingColumnsQueue().length,o=n.getHiddenColumns().length;s&&!o&&WW(e).last().addClass("dx-last-data-cell"),t.row.rowType==="data"&&n.setCommandAdaptiveAriaLabel(e,oT)}_getColumnIndexByElementCore(e){const t=e.closest(".dx-field-item-content");if(t.length&&t.closest(this.component.$element()).length){const n=t.length?t.first().data("dx-form-item"):null;return n&&n.column&&this._columnsController.getVisibleIndex(n.column.index)}return super._getColumnIndexByElementCore(e)}_cellPrepared(e,t){super._cellPrepared.apply(this,arguments),t.row.rowType!=="detailAdaptive"&&t.column.visibleWidth==="adaptiveHidden"&&e.addClass(this.addWidgetPrefix("hidden-column"))}getCell(e,t){const n=this._dataController.items()[e==null?void 0:e.rowIndex];if((n==null?void 0:n.rowType)==="detailAdaptive"){const s=this._adaptiveColumnsController.getAdaptiveDetailItems();return super.getCell(e,t,s)}return super.getCell.apply(this,arguments)}_getCellElement(e,t){const n=this._dataController.items()[e];return n&&n.rowType==="detailAdaptive"?this._adaptiveColumnsController.getItemContentByColumnIndex(t):super._getCellElement.apply(this,arguments)}getContextMenuItems(e){var t;if(e.row&&e.row.rowType==="detailAdaptive"){const n=this._columnHeadersView,s=R(e.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return e.column=s?s.column:e.column,n.getContextMenuItems&&n.getContextMenuItems(e)}return(t=super.getContextMenuItems)===null||t===void 0?void 0:t.call(this,e)}isClickableElement(e){var t;return(((t=super.isClickableElement)===null||t===void 0?void 0:t.call(this,e))??!1)||!!e.closest(".dx-command-adaptive").length}},qW=i=>class extends i{_updateColumnWidth(e,t){super._updateColumnWidth(e,e.visibleWidth==="adaptiveHidden"?e.bestFitWidth:t)}},YW=i=>class extends i{_pointCreated(e,t,n){const s=super._pointCreated(e,t,n),o=n[e.columnIndex]||{},r=this._getNextColumnIndex(e.columnIndex),a=n[r]||{},l=r!==e.columnIndex+1&&a.command,d=o.visibleWidth==="adaptiveHidden"||l;return s||d}_getNextColumnIndex(e){const t=this._columnsController.getVisibleColumns();let n=super._getNextColumnIndex(e);for(;t[n]&&t[n].visibleWidth==="adaptiveHidden";)n++;return n}},XW=i=>class extends i{_pointCreated(e,t,n,s){const o=super._pointCreated(e,t,n,s),a=(t[e.columnIndex-1]||{}).visibleWidth==="adaptiveHidden";return o||a}},ZW=i=>class extends i{_isRowEditMode(){return this.getEditMode()==="row"}_getFormEditItemTemplate(e,t){return this.getEditMode()!=="row"&&e.rowType==="detailAdaptive"?(e.columnIndex=this._columnsController.getVisibleIndex(t.index),this.getColumnTemplate(e)):super._getFormEditItemTemplate(e,t)}_closeEditItem(e){const t=e.closest(".dx-field-item-content"),n=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,s=t.length?t.first().data("dx-form-item"):null,o=s&&s.column&&this._columnsController.getVisibleIndex(s.column.index);this.isEditCell(n,o)||super._closeEditItem(e)}_beforeUpdateItems(e,t){if(!this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()){const n=this._dataController.items(),s=n[t],o=Ce.getIndexByKey(this._dataController.adaptiveExpandedKey(),n);this._isForceRowAdaptiveExpand=!this._adaptiveColumnsController.hasAdaptiveDetailRowExpanded(),o>=0&&e.push(o+1),e.push(t+1),this._dataController.adaptiveExpandedKey(s.key)}}_afterInsertRow(e){super._afterInsertRow.apply(this,arguments),this._adaptiveColumnsController.hasHiddenColumns()&&(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(e,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)}_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveColumnsController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)}_cancelEditAdaptiveDetailRow(){this._adaptiveColumnsController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()}_afterSaveEditData(){super._afterSaveEditData.apply(this,arguments);const e=new ae;return this._isRowEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()?De(this._validatingController.validate(!0)).done(t=>{t&&this._cancelEditAdaptiveDetailRow(),e.resolve()}):e.resolve(),e.promise()}_beforeCancelEditData(){super._beforeCancelEditData(),this._cancelEditAdaptiveDetailRow()}_getRowIndicesForCascadeUpdating(e){const t=super._getRowIndicesForCascadeUpdating.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e.key)&&t.push(e.rowType==="detailAdaptive"?e.rowIndex-1:e.rowIndex+1),t}_beforeCloseEditCellInBatchMode(e){const t=this._dataController._adaptiveExpandedKey;if(t){const n=Ce.getIndexByKey(t,this._dataController.items());n>-1&&e.unshift(n)}}editRow(e){return this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.editRow(e)}deleteRow(e){const t=this._dataController.getKeyByRowIndex(e);this.getEditMode()==="batch"&&this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(t)&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.deleteRow(e)}},JW=i=>class extends i{init(){super.init(),this._adaptiveExpandedKey=void 0}_processItems(e,t){const{changeType:n}=t;if(e=super._processItems.apply(this,arguments),n==="loadingAll"||!U(this._adaptiveExpandedKey))return e;const s=Ce.getIndexByKey(this._adaptiveExpandedKey,e),o=this.option(zW)===!1;if(s>=0){const r=e[s];e.splice(s+1,0,{visible:!0,rowType:"detailAdaptive",key:r.key,data:r.data,node:r.node,modifiedValues:r.modifiedValues,isNewRow:r.isNewRow,values:r.values})}else n==="refresh"&&!(o&&t.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return e}_getRowIndicesForExpand(e){const t=super._getRowIndicesForExpand.apply(this,arguments);if(this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e)){const n=t[t.length-1];t.push(n+1)}return t}adaptiveExpandedKey(e){if(U(e))this._adaptiveExpandedKey=e;else return this._adaptiveExpandedKey}toggleExpandAdaptiveDetailRow(e,t){let n=Ce.getIndexByKey(this._adaptiveExpandedKey,this._items),s=Ce.getIndexByKey(e,this._items);n>=0&&n===s&&!t&&(e=void 0,s=-1);const o=this._adaptiveExpandedKey;this._adaptiveExpandedKey=e,n>=0&&n++,s>=0&&s++;const r=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[n-r,s-r]}),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(e,HW),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(o,oT)}},QW=i=>class extends i{_needHideBorder(e){return super._needHideBorder(e)||(e==null?void 0:e.hasClass("dx-field-item-content"))&&(e==null?void 0:e.find(".dx-checkbox").length)}_getFocusCellSelector(){return`${super._getFocusCellSelector()}, .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content`}_getRevertTooltipsSelector(){return`${super._getRevertTooltipsSelector()}, .dx-field-item-content .${this.addWidgetPrefix("revert-tooltip")}`}},ej=i=>class extends i{_isColumnVisible(e){return super._isColumnVisible(e)&&!e.adaptiveHidden}},tj=i=>class extends i{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}_needBestFit(){return super._needBestFit()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length}_correctColumnWidths(e,t){const n=this._adaptiveColumnsController,s=n.getHiddenColumns(),o=n.updateHidingQueue(this._columnsController.getColumns());n.hideRedundantColumns(e,t,o);const r=n.getHiddenColumns();return n.hasAdaptiveDetailRowExpanded()&&s.length!==r.length&&n.updateForm(r),!r.length&&n.collapseAdaptiveDetailRow(),super._correctColumnWidths.apply(this,arguments)}_toggleBestFitMode(e){e&&this._adaptiveColumnsController._showHiddenColumns(),super._toggleBestFitMode(e)}_needStretch(){const e=this._adaptiveColumnsController;return super._needStretch.apply(this,arguments)||e.getHidingColumnsQueue().length||e.hasHiddenColumns()}},ij={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:KW},extenders:{views:{rowsView:UW},controllers:{export:qW,columnsResizer:YW,draggingHeader:XW,editing:ZW,resizing:tj,data:JW,editorFactory:QW,columns:ej,keyboardNavigation:GW}}};He.registerModule("adaptivity",ij);function rT(i,e,t,n,s,o){t=t||0,n=n||[],o=o||[],n[t]=n[t]||0;const r=i[t],a=o[t]+1||0;let l=0,d;if(r){for(d=a;d<r.length;d++){const c=r[d],h=d+n[t],u=c.colspan||1;if(rT(i,e,t+(c.rowspan||1),n,u,o),n[t]+=u-1,l+=u,c.rowspan)for(let p=t+1;p<t+c.rowspan;p++)n[p]=n[p]||0,n[p]+=c.colspan||1;if(e(c,h,t,d)===!1||s!==void 0&&l>=s)break}o[t]=d}}function yp(i,e,t){const n=[];rT(i,(s,o,r)=>{let a=s,l;const d=a.colspan||1,c=o+d-1>=e&&o<t;if(n[r]=n[r]||[],c)o<e?(l=d-(e-o),o=e):l=d,o+l>t&&(l=t-o),l!==d&&(a=Y({},a,{colspan:l})),n[r].push(a);else if(o>t)return!1});for(let s=0;s<n.length;s++)n[s]=n[s]||[];return n}const aT=i=>class extends i{_needToSetCellWidths(){let e=super._needToSetCellWidths();return!e&&this._columnsController.isVirtualMode()&&(e=this._columnsController.getColumns().some(n=>n.width==="auto")),e}},nj=i=>class extends aT(i){_resizeCore(){super._resizeCore.apply(this,arguments),this._columnsController.resize()}_handleScroll(e){const t=this.getScrollable();let{left:n}=e.scrollOffset;super._handleScroll.apply(this,arguments),this.option("rtlEnabled")&&t&&(n=Ge(t.$content())-Ge(t.$element())-n),this._columnsController.setScrollPosition(n)}_renderCore(e){if(e!=null&&e.virtualColumnsScrolling){var t,n;const s=this._findContentElement(),o=(t=this._columnsController)===null||t===void 0?void 0:t.getFixedColumns(),r=(n=this._scrollable)===null||n===void 0?void 0:n.option("useNative");if(o!=null&&o.length){s.css({minHeight:r?st(s):Ce.getContentHeightLimit(Zt)});const a=()=>{this.resizeCompleted.remove(a),s.css({minHeight:""})};this.resizeCompleted.add(a)}}return super._renderCore.apply(this,arguments)}},sj=i=>class extends aT(i){_renderCore(){const e=super._renderCore.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),e}},nc=function(i){return i.map(e=>e.visibleWidth||parseFloat(e.width)||50)},oj=i=>class extends i{init(){super.init.apply(this,arguments),this._resizingController=this.getController("resizing"),this._beginPageIndex=null,this._endPageIndex=null,this._position??(this._position=0),this._virtualVisibleColumns={}}dispose(){clearTimeout(this._changedTimeout),super.dispose.apply(this,arguments)}resetColumnsCache(){super.resetColumnsCache(),this._virtualVisibleColumns={}}getBeginPageIndex(e){const t=this.getVisibleColumns(void 0,!0),n=nc(t);let s=0;for(let o=0;o<n.length;o++){if(s>=e)return Math.floor(o/this.getColumnPageSize());s+=n[o]}return 0}getTotalWidth(){const e=this.option("width");return typeof e=="number"?e:this._resizingController._lastWidth||St(this.component.$element())}getEndPageIndex(e){const t=this.getVisibleColumns(void 0,!0),n=nc(t);let s=0;e+=this.getTotalWidth();for(let o=0;o<n.length;o++){if(s>=e)return Math.ceil(o/this.getColumnPageSize());s+=n[o]}return Math.ceil(n.length/this.getColumnPageSize())}getColumnPageSize(){return this.option("scrolling.columnPageSize")}_fireColumnsChanged(){const e=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-e}getScrollingTimeout(){const e=this.option("scrolling.columnRenderingThreshold"),t=this.option("scrolling.renderAsync");let n=0;return(!U(t)&&this._renderTime>e||t)&&(n=this.option("scrolling.timeout")),n}setScrollPosition(e){const t=this.getScrollingTimeout();t>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(e)},t)):this._setScrollPositionCore(e)}isVirtualMode(){return qe()&&this.option("scrolling.columnRenderingMode")==="virtual"}resize(){this._setScrollPositionCore(this._position)}_setScrollPositionCore(e){const t=this;if(t.isVirtualMode()){const n=t.getBeginPageIndex(e),s=t.getEndPageIndex(e),o=e<t._position?t._beginPageIndex>n:t._endPageIndex<s;t._position=e,o&&(t._beginPageIndex=n,t._endPageIndex=s,t._fireColumnsChanged())}}getFixedColumns(e,t){const n=super.getFixedColumns(e);if(this.isVirtualMode()&&!t&&n.length){const s=n.map(o=>o.command).indexOf("transparent");return n[s].colspan=this.getVisibleColumns().length-super.getFixedColumns().length+1,n}return n}_compileVisibleColumns(e,t){var n;if(t||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return super._compileVisibleColumns(e);(n=this._columns)!==null&&n!==void 0&&n.length&&!U(this._beginPageIndex)&&!U(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));const s=this._beginPageIndex,o=this._endPageIndex,r=`${e}-${s}-${o}`;if(this._virtualVisibleColumns[r])return this._virtualVisibleColumns[r];let a=super._compileVisibleColumns();const l=this.getRowCount(),d=this.getColumnPageSize();let c=s*d,h=o*d;const u=this.getFixedColumns(void 0,!0),p=u.map(B=>B.command).indexOf("transparent"),f=u.length?p:0;let g=a.slice(0,f);const m=a.slice(f,c),b=nc(m).reduce((B,$)=>B+$,0);b||(c=0);const _=u.length?u.length-p-1:0;let w=a.slice(a.length-_);const E=a.slice(h,a.length-_),D=nc(E).reduce((B,$)=>B+$,0);if(D||(h=a.length),l>1&&typeof e=="number"){const B=[];for(let $=0;$<=l;$++)B.push(super._compileVisibleColumns($));g=yp(B,0,g.length)[e]||[],w=yp(B,a.length-w.length,a.length)[e]||[],a=yp(B,c,h)[e]||[]}else a=a.slice(c,h);return b&&(a.unshift({command:"virtual",type:"virtual",width:b}),a=g.concat(a)),D&&(a.push({command:"virtual",type:"virtual",width:D}),a=a.concat(w)),this._virtualVisibleColumns[r]=a,a}getColumnIndexOffset(){let e=0;if(this._beginPageIndex>0){const n=this.getFixedColumns().map(o=>o.command).indexOf("transparent"),s=n>=0?n:0;e=this._beginPageIndex*this.getColumnPageSize()-s-1}return e>0?e:0}},rj={defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:oj},views:{columnHeadersView:sj,rowsView:nj}}};He.registerModule("virtualColumns",rj);class aj{constructor(e,t){let{key:n}=t;this._isSharedDataSource=!1,this._keyExpr=n,this.updateDataSource(e)}_updateDataSource(e){if(e)if(e instanceof Dn)this._isSharedDataSource=!0,this._dataSource=e;else{const t=Bo(e);this._dataSource=new Dn(Y(!0,{},{},t))}}_updateDataSourceByItems(e){this._dataSource=new Dn({store:new jl({key:this.key(),data:e}),pageSize:0})}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?this._isSharedDataSource=!1:this._dataSource.dispose(),delete this._dataSource)}load(){return this._dataSource.load()}loadSingle(e,t){if(!this._dataSource)return new ae().reject();let n=e,s=t;return arguments.length<2&&(s=e,n=this.key()),this._dataSource.loadSingle(n,s)}loadFromStore(e){return this.store().load(e)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(e){this._dataSource.cancel(e)}cancelAll(){this._dataSource.cancelAll()}filter(e){return this._dataSource.filter(e)}addSearchFilter(e){this._dataSource._addSearchFilter(e)}group(e){return this._dataSource.group(e)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(e){return e===void 0?this._dataSource.pageIndex(void 0):this._dataSource.pageIndex(e)}resetDataSource(){this._disposeDataSource()}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}updateDataSource(e,t){const n=e??this.items();t&&(this._keyExpr=t),this._disposeDataSource(),Array.isArray(n)?this._updateDataSourceByItems(n):this._updateDataSource(n)}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(e){return this._dataSource.searchValue(e)}searchOperation(e){return this._dataSource.searchOperation(e)}searchExpr(e){return this._dataSource.searchExpr(e)}select(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._dataSource.select(t)}key(){var e;const t=(e=this._dataSource)===null||e===void 0?void 0:e.key();return U(t)&&this._keyExpr==="this"?t:this._keyExpr}keyOf(e){return this.store().keyOf(e)}store(){return this._dataSource.store()}items(){var e;return(e=this._dataSource)===null||e===void 0?void 0:e.items()}applyMapFunction(e){return this._dataSource._applyMapFunction(e)}getDataSource(){return this._dataSource??null}reload(){return this._dataSource.reload()}on(e,t){this._dataSource.on(e,t)}off(e,t){this._dataSource.off(e,t)}}const sC="dx-buttongroup-item-has-width",sc={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},lj=Dr.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Ir((i,e,t)=>{this._prepareItemStyles(i);const n=this.option("buttonTemplate");this._createComponent(i,$i,Y({},t,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(n)?t:{},template:t.template||n}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return Y(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(i){return Ee(i)||this.option("integrationOptions.templates")[i]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(i){const e=i.data("dxItemIndex");e===0&&i.addClass("dx-buttongroup-first-item");const t=this.option("items");t&&e===t.length-1&&i.addClass("dx-buttongroup-last-item"),i.addClass("dx-shape-standard")},_renderItemContent(i){return i.container=R(i.container).parent(),this.callBase(i)},_setAriaSelectionAttribute(i,e){this.setAria("pressed",e,i)},_renderItemContentByNode(i,e){return i.container=R(i.container.children().first()),this.callBase(i,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>"dx-buttongroup-item",_itemSelectHandler(i){this.option("selectionMode")==="single"&&this.isItemSelected(i.currentTarget)||this.callBase(i)}}),lT=Hi.inherit({_getDefaultOptions(){return Y(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass("dx-buttongroup"),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){const{stylingMode:i}=this.option();for(const e in sc)this.$element().removeClass(sc[e]);this.$element().addClass(sc[i]??sc.contained)},_fireSelectionChangeEvent(i,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:i,removedItems:e})},_renderButtons(){const i=R("<div>").addClass("dx-buttongroup-wrapper").appendTo(this.$element()),e=this.option("selectedItems"),t={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:n=>{const s=this.option("width");U(s)&&R(n.itemElement).addClass(sC)},onSelectionChanged:n=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(n.addedItems,n.removedItems)},onItemClick:n=>{this._itemClickAction(n)}};U(e)&&e.length&&(t.selectedItems=e),this._buttonsCollection=this._createComponent(i,lj,t)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(i){switch(i.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(i.name,i.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(i),this._buttonsCollection.itemElements().toggleClass(sC,!!i.value);break;default:this.callBase(i)}}});wt("dxButtonGroup",lT);const dj="dx-dropdownbutton-content",cj=Hi.inherit({_getDefaultOptions(){return Y(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:re.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,template:null,text:"",type:"normal",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),Y(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataController(),this._compileKeyGetter(),this._compileDisplayGetter(),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initDataController(){const i=this.option("dataSource");this._dataController=new aj(i??this.option("items"),{key:this.option("keyExpr")})},_initTemplates(){this._templateManager.addDefaultTemplates({content:new fa(i=>{const e=R(i.container),t=R("<div>").appendTo(e);this._list=this._createComponent(t,wa,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_compileKeyGetter(){this._keyGetter=Nt(this._dataController.key())},_compileDisplayGetter(){this._displayGetter=Nt(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass("dx-dropdownbutton"),this._renderButtonGroup(),this._updateArrowClass(),U(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:ue,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var i;(i=this._loadSingleDeferred)===null||i===void 0||i.reject();const e=ae();if(this._list&&this._lastSelectedItemData!==void 0){const n=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(n)}this._lastSelectedItemData=void 0;const t=this.option("selectedItemKey");return this._dataController.loadSingle(t).done(e.resolve).fail(()=>{e.reject(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(i){let{previousValue:e,value:t}=i;this._selectionChangedAction({item:t,previousItem:e})},_fireItemClickAction(i){let{event:e,itemElement:t,itemData:n}=i;return this._itemClickAction({event:e,itemElement:t,itemData:this._actionItem||n})},_getButtonTemplate(){const{template:i,splitButton:e,showArrowIcon:t}=this.option();return i||(e||!t?"content":(n,s)=>{let{text:o,icon:r}=n;const a=Ys(r),l=o?R("<span>").text(o).addClass("dx-button-text"):void 0,d=Ys("spindown").addClass("dx-icon-right");R(s).append(a,l,d)})},_getActionButtonConfig(){const{icon:i,text:e,type:t,splitButton:n}=this.option(),s={text:e,icon:i,type:t,template:this._getButtonTemplate(),elementAttr:{class:"dx-dropdownbutton-action"}};return n&&(s.elementAttr.role="menuitem"),s},_getSpinButtonConfig(){const{type:i}=this.option();return{type:i,icon:"spindown",elementAttr:{class:"dx-dropdownbutton-toggle",role:"menuitem"}}},_getButtonGroupItems(){const{splitButton:i}=this.option(),e=[this._getActionButtonConfig()];return i&&e.push(this._getSpinButtonConfig()),e},_buttonGroupItemClick(i){let{event:e,itemData:t}=i;const n=t.elementAttr.class==="dx-dropdownbutton-action";t.elementAttr.class==="dx-dropdownbutton-toggle"?this.toggle():n&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_getButtonGroupOptions(){const{accessKey:i,focusStateEnabled:e,hoverStateEnabled:t,splitButton:n,stylingMode:s,tabIndex:o}=this.option();return Y({items:this._getButtonGroupItems(),width:"100%",height:"100%",selectionMode:"none",focusStateEnabled:e,hoverStateEnabled:t,stylingMode:s,accessKey:i,tabIndex:o,elementAttr:{role:n?"menu":"group"},onItemClick:this._buttonGroupItemClick.bind(this),onKeyboardHandled:a=>this._keyboardHandler(a)},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){const i=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return i.empty(),this._popupContentId=`dx-${new hi}`,this.setAria("id",this._popupContentId,i),e.render({container:ze(i),model:this.option("items")||this._dataController.getDataSource()})},_popupOptions(){const i=this.option("rtlEnabled")?"right":"left";return Y({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{const t=this.$element();return!R(e.target).closest(".dx-dropdownbutton").is(t)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>tu(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:`${i} top`,at:`${i} bottom`},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){const i=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:U(i)&&e?[i]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._dataController.key(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataController.getDataSource(),onItemClick:t=>{this.option("useSelectMode")||(this._lastSelectedItemData=t.itemData),this.option("selectedItemKey",this._keyGetter(t.itemData)),this._fireItemClickAction(t)!==!1&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){const i=R("<div>");this.$element().append(i),this._popup=this._createComponent(i,io,this._popupOptions()),this._popup.$content().addClass(dj),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.$overlayContent().attr("aria-label","Dropdown"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged(i){const e=Hi.getOptionsFromContainer(i);this._setPopupOption(e);const t=Object.keys(e);(t.includes("width")||t.includes("height"))&&this._dimensionChanged()},_dimensionChanged(){fg(this.option("dropDownOptions.width"))===void 0&&this._setPopupOption("width",()=>tu(this.$element()))},_setPopupOption(i,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(i){const e={owns:i?this._popupContentId:void 0};this.setAria(e,this.$element())},_setButtonsAria(i){const e={expanded:i,haspopup:"listbox"},t={};this.option("text")||(t.label="dropdownbutton"),this._getButtons().each((n,s)=>{n===0?this.setAria(ve({},t,e),R(s)):this.setAria(e,R(s))})},_updateAriaAttributes(i){this._setElementAria(i),this._setButtonsAria(i)},_getButtons(){return this._buttonGroup.$element().find(".dx-button")},_renderButtonGroup(){const i=this._buttonGroup&&this._buttonGroup.$element()||R("<div>");this._buttonGroup||this.$element().append(i),this._buttonGroup=this._createComponent(i,lT,this._getButtonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){const i=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",i)},toggle(i){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(i)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(i,e){this._list&&this._list.option(i,e)},_getDisplayValue(i){const t=!We(i)?i:this._displayGetter(i);return We(t)?"":String(ci(t,""))},_updateActionButton(i){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(i),icon:ht(i)?i.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",i),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(i))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(i){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&U(i)?[i]:[]);const e=this.option("selectedItem");this._loadSelectedItem().always(t=>{this._updateActionButton(t),this._displayGetter(e)!==this._displayGetter(t)&&this._fireSelectionChangedAction({previousValue:e,value:t})})},_updateButtonGroup(i,e){this._buttonGroup.option(i,e),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(i){let{name:e,value:t}=i;const n={};n[e]=t,this._updateButtonGroup("items[0]",Y({},this._getActionButtonConfig(),n)),this._popup&&this._popup.repaint()},_selectModeChanged(i){if(i){this._setListOption("selectionMode","single");const e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",U(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(i){const e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[i]),U(e)&&this._loadSelectedItem().done(t=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",t)}).fail(t=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataController(i){this._dataController.updateDataSource(i,this.option("keyExpr")),this._updateKeyExpr()},_updateKeyExpr(){this._compileKeyGetter(),this._setListOption("keyExpr",this._dataController.key())},focus(){this._buttonGroup.focus()},_optionChanged(i){var e;const{name:t,value:n}=i;switch(t){case"useSelectMode":this._selectModeChanged(n);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(t,n),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataController();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,i);break;case"dropDownOptions":if(i.fullName==="dropDownOptions.visible")break;i.value.visible!==void 0&&delete i.value.visible,this._popupOptionChanged(i),this._innerWidgetOptionChanged(this._popup,i);break;case"opened":this.toggle(n);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(t,n),this._updateButtonGroup(t,n),this.callBase(i);break;case"items":this._updateDataController(this.option("items")),this._updateItemCollection(t);break;case"dataSource":this._dataController.updateDataSource(n),this._updateKeyExpr(),this._updateItemCollection(t);break;case"icon":case"text":this._actionButtonOptionChanged(i);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(i),(e=this._popup)===null||e===void 0||e.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(t,n);break;case"type":this._updateButtonGroup("items",this._getButtonGroupItems());break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(t,n);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(n);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;case"template":this._renderButtonGroup();break;default:this.callBase(i)}},getDataSource(){return this._dataController.getDataSource()}});wt("dxDropDownButton",cj);function uj(i,e){const t=d=>d||1,n=[],s=(i[0]||[]).reduce((d,c)=>d+t(c.colspan),0),o=(d=>{let c=0,h=0;return()=>{const u=d[c]||[],p=u[h++];return h>=u.length&&(c++,h=0),p&&(p.colspan=t(p.colspan),p.rowspan=t(p.rowspan)),p}})(i),r=(d,c,h)=>{const u=n[d]=n[d]||[];if(u[c]=h,h.colspan>1||h.rowspan>1){const p=(f=>Y({},f,e))(h);for(let f=1;f<h.colspan;f++)r(d,c+f,p);for(let f=1;f<h.rowspan;f++)for(let g=0;g<h.colspan;g++)r(d+f,c+g,p)}};let a=o(),l=0;for(;a;){for(let d=0;d<s&&a;d++)n[l]&&n[l][d]||(r(l,d,a),d+=a.colspan-1,a=o());l++}return n}class hj{constructor(e,t,n){this._exportController=e,this._initialColumnWidthsByColumnIndex=t,this._selectedRowsOnly=n}_getGroupValue(e){const{key:t,data:n,rowType:s,groupIndex:o,summaryCells:r}=e,a=this._options.groupColumns[o],l=He.getDisplayValue(a,a.deserializeValue?a.deserializeValue(t[o]):t[o],n,s);let d=`${a.caption}: ${He.formatValue(l,a)}`;return r&&r[0]&&r[0].length&&(d+=` ${He.getGroupRowSummaryText(r[0],this._options.summaryTexts)}`),d}_correctCellIndex(e){return e}_initOptions(){const e=this._exportController,t=e._columnsController.getGroupColumns();this._options={columns:e._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:t,items:this._selectedRowsOnly||e._selectionOnly?e._getSelectedItems():e._getAllItems(),isHeadersVisible:e.option("showColumnHeaders"),summaryTexts:e.option("summary.texts"),rtlEnabled:e.option("rtlEnabled")}}getHeaderStyles(){return[{bold:!0,alignment:"center"},{bold:!0,alignment:"left"},{bold:!0,alignment:"right"}]}getGroupRowStyle(){return{bold:!0,alignment:Po(this._options.rtlEnabled)}}getColumnStyles(){const e=[];return this.getColumns().forEach(t=>{e.push({alignment:t.alignment||"left",format:t.format,dataType:t.dataType})}),e}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(e){var t;const n=((t=this.getColumns()[e])===null||t===void 0?void 0:t.alignment)||"right";return this.getHeaderStyles().map(s=>s.alignment).indexOf(n)}getStyleId(e,t){return e<this.getHeaderRowCount()?0:this.isTotalCell(e-this.getHeaderRowCount(),t)?this._getTotalCellStyleId(t):this.isGroupRow(e-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:t+this.getHeaderStyles().length}getColumns(e){const{columns:t}=this._options;return e?t:t[t.length-1]}getColumnsWidths(){const e=this.getColumns();return U(e)?e.map(t=>t.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(e){return e<this._options.items.length&&this._options.items[e].rowType==="group"}getGroupLevel(e){const t=this._options.items[e-this.getHeaderRowCount()],n=t&&t.groupIndex;return t&&t.rowType==="totalFooter"?0:U(n)?n:this._options.groupColumns.length}getCellType(e,t){const n=this.getColumns();if(e<this.getHeaderRowCount())return"string";if(e-=this.getHeaderRowCount(),t<n.length){const s=this._options.items.length&&this._options.items[e],o=n[t];return s&&s.rowType==="data"&&isFinite(s.values[this._correctCellIndex(t)])&&!U(o.customizeText)?U(o.lookup)?o.lookup.dataType:o.dataType:"string"}}ready(){this._initOptions();const e=this._options;return De(e.items).done(t=>{e.items=t}).fail(()=>{e.items=[]})}_convertFromGridGroupSummaryItems(e){if(U(e)&&e.length>0)return e.map(t=>({value:t.value,name:t.name}))}getCellData(e,t,n){let s,o;const r={cellSourceData:{},value:s},a=this.getColumns(),l=this._correctCellIndex(t);if(e<this.getHeaderRowCount())o=this.getColumns(!0)[e][t],r.cellSourceData.rowType="header",r.cellSourceData.column=o&&o.gridColumn,r.value=o&&o.caption;else{e-=this.getHeaderRowCount();const d=this._options.items.length&&this._options.items[e];if(d){const c=d.values;switch(r.cellSourceData.rowType=d.rowType,r.cellSourceData.column=a[t]&&a[t].gridColumn,d.rowType){case"groupFooter":case"totalFooter":l<c.length&&(s=c[l],U(s)?(r.cellSourceData.value=s.value,r.cellSourceData.totalSummaryItemName=s.name,r.value=He.getSummaryText(s,this._options.summaryTexts)):r.cellSourceData.value=void 0);break;case"group":if(r.cellSourceData.groupIndex=d.groupIndex,t<1)r.cellSourceData.column=this._options.groupColumns[d.groupIndex],r.cellSourceData.value=d.key[d.groupIndex],r.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(d.summaryCells[0]),r.value=this._getGroupValue(d);else{const h=d.values[l];if(Array.isArray(h)){r.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(h),s="";for(let u=0;u<h.length;u++)s+=(u>0?n?`
`:` 
 `:"")+He.getSummaryText(h[u],this._options.summaryTexts);r.value=s}else r.cellSourceData.value=void 0}break;default:if(o=a[t],o){const h=c[l],u=He.getDisplayValue(o,h,d.data,d.rowType);!isFinite(u)||U(o.customizeText)?n&&U(o.customizeText)&&o.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?r.value=u:r.value=He.formatValue(u,o):r.value=u,r.cellSourceData.value=h}r.cellSourceData.data=d.data}}}return r}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(e,t){const{items:n}=this._options,s=n[e],o=this._correctCellIndex(t),r=s.summaryCells&&s.summaryCells[o]&&s.summaryCells[o].length>0&&s.summaryCells[o][0].alignByColumn;return s&&s.rowType==="groupFooter"||s.rowType==="totalFooter"||r}getCellMerging(e,t){const{columns:n}=this._options,s=n[e]&&n[e][t];return s?{colspan:(s.exportColspan||1)-1,rowspan:(s.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}class pj extends He.ViewController{init(){this.throwWarningIfNoOnExportingEvent(),this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]})}_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(e,t){e.width=t}_getColumns(e){let t=[],n,s;const o=this._columnsController,r=o.getRowCount();for(n=0;n<=r;n++){const a=[];s=o.getVisibleColumns(n,!0);let l;if(n===r)if(this._updateLockCount)l=e;else{const d=this._getColumnWidths(this._headersView,this._rowsView);if(d&&d.length){l={};for(let c=0;c<s.length;c++)l[s[c].index]=d[c]}}for(let d=0;d<s.length;d++){const c=Y({},s[d],{dataType:s[d].dataType==="datetime"?"date":s[d].dataType,gridColumn:s[d]});if(this._needColumnExporting(c)){const h=this._calculateExportColspan(c);U(h)&&(c.exportColspan=h),l&&this._updateColumnWidth(c,l[c.index]),a.push(c)}}t.push(a)}return s=t[r],t=uj(t.slice(0,-1),this._getEmptyCell()),t.push(s),t}_calculateExportColspan(e){if(!e.isBand)return;const t=this._columnsController.getChildrenByBandColumn(e.index,!0);if(U(t))return t.reduce((n,s)=>this._needColumnExporting(s)?n+(this._calculateExportColspan(s)||1):n,0)}_needColumnExporting(e){return!e.command&&(e.allowExporting||e.allowExporting===void 0)}_getFooterSummaryItems(e,t){const n=[];let s=1,o=0;do{const r=[];for(let a=0;a<e.length;a++){const l=e[a],d=l.length;s<d&&(s=d),r.push(l[o])}n.push({values:r,rowType:t?"totalFooter":"groupFooter"})}while(o++<s-1);return n}_hasSummaryGroupFooters(){const e=this.option("summary.groupItems");if(U(e)){for(let t=0;t<e.length;t++)if(e[t].showInGroupFooter)return!0}return!1}_getItemsWithSummaryGroupFooters(e){let t=[],n=[],s=[];for(let o=0;o<e.length;o++){const r=e[o];r.rowType==="groupFooter"?(s=this._getFooterSummaryItems(r.summaryCells),t=t.concat(n,s),n=[]):n.push(r)}return t.length?t:n}_updateGroupValuesWithSummaryByColumn(e){let t=[];for(let n=0;n<e.length;n++){const s=e[n],{summaryCells:o}=s;if(s.rowType==="group"&&o&&o.length>1){const r=s.values.length;for(let a=1;a<o.length;a++)for(let l=0;l<o[a].length;l++){const d=o[a][l];d&&d.alignByColumn&&(Array.isArray(t[a-r])||(t[a-r]=[]),t[a-r].push(d))}t.length>0&&(s.values.push(...t),t=[])}}}_processUnExportedItems(e){const t=this._columnsController.getVisibleColumns(null,!0),n=this._columnsController.getGroupColumns();let s,o;for(let r=0;r<e.length;r++){const a=e[r];let l=!1;s=[],o=[];for(let d=0;d<t.length;d++){const c=t[d];if(l||(l=["detailExpand","buttons"].includes(c.type)),this._needColumnExporting(c)&&(a.values&&(a.rowType==="group"&&!s.length?s.push(a.key[a.groupIndex]):s.push(a.values[d])),a.summaryCells))if(a.rowType==="group"&&!o.length){const h=d-n.length+a.groupIndex;o.push(a.summaryCells[l?h:h+1])}else o.push(a.summaryCells[d])}s.length&&(a.values=s),o.length&&(a.summaryCells=o)}}_getAllItems(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this,s=new ae,o=this._dataController.footerItems(),r=o.length&&o[0],a=n.option("summary.totalItems");let l;return De(e).done(d=>{this._dataController.loadAll(d,t).done((c,h)=>{n._updateGroupValuesWithSummaryByColumn(c),n._hasSummaryGroupFooters()&&(c=n._getItemsWithSummaryGroupFooters(c)),l=r&&r.summaryCells,U(h)&&a&&(l=n._getSummaryCells(a,h));const u=r&&n._getFooterSummaryItems(l,!0);u&&(c=c.concat(u)),n._processUnExportedItems(c),s.resolve(c)}).fail(s.reject)}).fail(s.reject),s}_getSummaryCells(e,t){return this._dataController._calculateSummaryCells(e,t,this._columnsController.getVisibleColumns(null,!0),(n,s)=>this._dataController._isDataColumn(s)?s.index:-1)}_getSelectedItems(){return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(this._selectionController.loadSelectedItemsWithFilter(),!0):this._getAllItems(this._selectionController.getSelectedRowsData())}_getColumnWidths(e,t){return e&&e.isVisible()?e.getColumnWidths():t.getColumnWidths()}throwWarningIfNoOnExportingEvent(){var e,t;const n=(e=(t=this.component).hasActionSubscription)===null||e===void 0?void 0:e.call(t,"onExporting");this.option("export.enabled")&&!n&&mt.log("W1024")}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(e){const t=this._getColumnWidths(this._headersView,this._rowsView);let n;if(t&&t.length){n={};const s=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0);for(let o=0;o<s.length;o++)n[s[o].index]=t[o]}return new hj(this,n,e)}exportTo(e,t){this._selectionOnly=e;const n=this.getAction("onExporting"),s={rtlEnabled:this.option("rtlEnabled"),selectedRowsOnly:!!e,format:t,fileName:"DataGrid",cancel:!1};Ee(n)&&n(s)}publicMethods(){return["getDataProvider"]}selectionOnly(e){if(U(e))this._isSelectedRows=e,this.selectionOnlyChanged.fire();else return this._isSelectedRows}optionChanged(e){super.optionChanged(e),e.name==="export"&&this.throwWarningIfNoOnExportingEvent()}needLoadItemsOnExportingSelectedItems(){return this.option("loadItemsOnExportingSelectedItems")??this._dataController._dataSource.remoteOperations().filtering}}const fj=i=>class extends i{callbackNames(){const e=super.callbackNames();return U(e)?e.push("editingButtonsUpdated"):["editingButtonsUpdated"]}_updateEditButtons(){super._updateEditButtons(),this.editingButtonsUpdated.fire()}},mj=i=>class extends i{_getToolbarItems(){const e=super._getToolbarItems(),t=this._getExportToolbarButton();return t&&(e.push(t),this._correctItemsPosition(e)),e}_getExportToolbarButton(){const e=this._getExportToolbarItems();if(e.length===0)return null;const t=this._needDisableExportButton(),n={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:e},disabled:t};if(e.length===1){const s=ve({},e[0],{hint:e[0].text,elementAttr:{class:"dx-datagrid-export-button"}});n.widget="dxButton",n.showText="inMenu",n.options=s}else{const s={icon:"export",displayExpr:"text",items:e,hint:this.option("export.texts.exportTo"),elementAttr:{class:"dx-datagrid-export-button"},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};n.options=s,n.widget="dxDropDownButton",n.menuItemTemplate=(o,r,a)=>{this._createComponent(R(a),wa,{items:e})}}return n}_getExportToolbarItems(){const e=this.option("export"),t=this.option("export.texts"),n=this.option("export.formats")??[];if(!e.enabled)return[];const s=[];return n.forEach(o=>{let r=o.toUpperCase(),a="export";o==="xlsx"&&(r="Excel",a="xlsxfile"),o==="pdf"&&(a="pdffile"),s.push({text:vs(t.exportAll,r),icon:a,onClick:()=>{this._exportController.exportTo(!1,o)}}),e.allowExportSelectedData&&s.push({text:vs(t.exportSelectedRows,r),icon:"exportselected",onClick:()=>{this._exportController.exportTo(!0,o)}})}),s}_correctItemsPosition(e){e.sort((t,n)=>t.sortIndex-n.sortIndex)}_isExportButtonVisible(){return this.option("export.enabled")}optionChanged(e){super.optionChanged(e),e.name==="export"&&(e.handled=!0,this._invalidate())}_needDisableExportButton(){const e=!this._columnsController.hasVisibleDataColumns(),t=this._editingController.hasChanges();return e||t}_columnOptionChanged(e){if(super._columnOptionChanged(e),He.checkChanges(e.optionNames,["groupIndex","visible","all"])){const n=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",n)}}init(){super.init(),this._exportController=this.getController("export"),this._editingController.editingButtonsUpdated.add(()=>{const e=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",e)})}isVisible(){return super.isVisible()||this._isExportButtonVisible()}};He.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",formats:["xlsx"],allowExportSelectedData:!1,texts:{exportTo:re.format("dxDataGrid-exportTo"),exportAll:re.format("dxDataGrid-exportAll"),exportSelectedRows:re.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:pj},extenders:{controllers:{editing:fj},views:{headerPanel:mj}}});const gj=(i,e,t)=>{let{isRemoteFiltering:n,dateSerializationFormat:s,getSelector:o}=t;const{selector:r}=i,a=Ee(r)?r:o(r),l=a?a(e):e[r],d=n&&yn(l)?vi.serializeDate(l,s):l;return{getter:a,rawValue:l,safeValue:d}},_j={getSortFilterValue:gj},bj=".dx-row.dx-row-focused";class vj extends Yt.ViewController{getKeyboardController(){return this.getController("keyboardNavigation")}getDataController(){return this.getController("data")}init(){this.component._optionsByReference.focusedRowKey=!0}optionChanged(e){const{name:t,value:n,previousValue:s}=e;switch(t){case"focusedRowIndex":this._focusRowByIndex(n),this.getKeyboardController()._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(n)&&JSON.stringify(n)===JSON.stringify(s))return;this._focusRowByKey(n),this.getKeyboardController()._fireFocusedRowChanged(),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return["navigateToRow","isRowFocused"]}isAutoNavigateToFocusedRow(){return this.option("scrolling.mode")!=="infinite"&&this.option("autoNavigateToFocusedRow")}_focusRowByIndex(e,t){this.option("focusedRowEnabled")&&(e=e!==void 0?e:this.option("focusedRowIndex"),e<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(e,t))}_focusRowByIndexCore(e,t){const n=this.getDataController().pageSize(),s=()=>{if(this._isValidFocusedRowIndex(e)){let o=e-this.getDataController().getRowIndexOffset(!0);if(!t||t.paging&&!t.filtering){const a=this.getDataController()._getLastItemIndex();o=Math.min(o,a)}const r=this.getDataController().getKeyByRowIndex(o,!0);U(r)&&!this.isRowFocused(r)&&this.option("focusedRowKey",r)}};if(n>=0)if(this._isLocalRowIndex(e))s();else{const o=Math.floor(e/this.getDataController().pageSize());De(this.getDataController().pageIndex(o),this.getDataController().waitReady()).done(()=>{s()})}}_isLocalRowIndex(e){if(this.getKeyboardController()._isVirtualScrolling()){const n=Math.floor(e/this.getDataController().pageSize()),s=this.getDataController().virtualItemsCount(),o=s?s.begin:-1,r=this.getDataController().getVisibleRows().length+this.getDataController().getRowIndexOffset(),a=Math.ceil(r/this.getDataController().pageSize());return o<=e&&a>n}return!0}_setFocusedRowKeyByIndex(e){if(this._isValidFocusedRowIndex(e)){const t=Math.min(e-this.getDataController().getRowIndexOffset(),this.getDataController().items().length-1),n=this.getDataController().getKeyByRowIndex(t);U(n)&&!this.isRowFocused(n)&&this.option("focusedRowKey",n)}}_focusRowByKey(e){U(e)?this._navigateToRow(e,!0):this._resetFocusedRow()}_resetFocusedRow(){const e=this.option("focusedRowKey"),t=U(e);!t&&this.option("focusedRowIndex")<0||(t&&this.option("focusedRowKey",null),this.getKeyboardController().setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getDataController().updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),this.getKeyboardController()._fireFocusedRowChanged())}_isValidFocusedRowIndex(e){const t=this.getDataController().getVisibleRows()[e];return!t||t.rowType==="data"||t.rowType==="group"}navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e)}_navigateToRow(e,t){const n=this,s=n.isAutoNavigateToFocusedRow(),o=new ae;if(e===void 0||!this.getDataController().dataSource())return o.reject().promise();const r=n.getFocusedRowIndexByKey(e);return!s&&t||r>=0?n._navigateTo(e,o,t):this.getDataController().getPageIndexByKey(e).done(a=>{if(a<0){o.resolve(-1);return}a===this.getDataController().pageIndex()?this.getDataController().reload().done(()=>{n.isRowFocused(e)&&this.getDataController().getRowIndexByKey(e)>=0?o.resolve(n.getFocusedRowIndexByKey(e)):n._navigateTo(e,o,t)}).fail(o.reject):this.getDataController().pageIndex(a).done(()=>{n._navigateTo(e,o,t)}).fail(o.reject)}).fail(o.reject),o.promise()}_navigateTo(e,t,n){const s=this.getDataController().getRowIndexByKey(e),o=Ce.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&o&&s<0?this._navigateToVirtualRow(e,t,n):this._navigateToVisibleRow(e,t,n)}_navigateToVisibleRow(e,t,n){if(n)this._triggerUpdateFocusedRow(e,t);else{const s=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,t).done(()=>{t.resolve(s)})}}_navigateToVirtualRow(e,t,n){const s=this.getDataController()._rowsScrollController,o=Ce.getIndexByKey(e,this.getDataController().items(!0)),r=this.getView("rowsView").getScrollable();if(s&&r&&o>=0){const a=o+this.getDataController().getRowIndexOffset(!0),l=s.getItemOffset(a),d=()=>{this.getDataController().totalCount()&&!this.getDataController().items().length||(this.component.off("contentReady",d),n?this._triggerUpdateFocusedRow(e,t):t.resolve(a))};this.component.on("contentReady",d),this.getView("rowsView").scrollTopPosition(l)}else t.resolve(-1)}_triggerUpdateFocusedRow(e,t){const n=this.getFocusedRowIndexByKey(e);if(this._isValidFocusedRowIndex(n)){let s;this.option("focusedRowEnabled")?this.getDataController().updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):s=this.getView("rowsView").scrollToRowElement(e),De(s).done(()=>{this.getKeyboardController().setFocusedRowIndex(n),t&&t.resolve(n)})}else t&&t.resolve(-1)}getFocusedRowIndexByKey(e){const t=this.getDataController().getRowIndexByKey(e,!0);return t>=0?t+this.getDataController().getRowIndexOffset(!0):-1}_focusRowByKeyOrIndex(){const e=this.option("focusedRowKey");let t=this.option("focusedRowIndex");if(U(e)){const n=this.getDataController().getRowIndexByKey(e);n>=0?(this.getKeyboardController()._isVirtualScrolling()&&(t=n+this.getDataController().getRowIndexOffset()),this.getKeyboardController().setFocusedRowIndex(t),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(s=>{t>=0&&s<0?this._focusRowByIndex():t<0&&s>=0&&this.getKeyboardController().setFocusedRowIndex(s)})}else t>=0&&this._focusRowByIndex(t)}isRowFocused(e){const t=this.option("focusedRowKey");if(U(t))return zt(e,this.option("focusedRowKey"))}updateFocusedRow(e){const t=this,n=e.focusedRowIndex??t.getDataController().getRowIndexByKey(e.focusedRowKey),s=t.getView("rowsView");let o,r;ie(s.getTableElements(),(a,l)=>{const d=a===0;o=R(l),t._clearPreviousFocusedRow(o,n);const c=t._prepareFocusedRow({changedItem:t.getDataController().getVisibleRows()[n],$tableElement:o,focusedRowIndex:n});d&&(r=c)}),!e.preventScroll&&r&&s.scrollToElementVertically(r)}_clearPreviousFocusedRow(e,t){const n=e.find(bj).filter((s,o)=>{const r=R(o).closest(`.${this.addWidgetPrefix("table")}`);return e.is(r)});n.removeClass("dx-row-focused").removeClass("dx-cell-focus-disabled").removeAttr("tabindex"),n.children("td").removeAttr("tabindex"),t!==0&&R(this.getView("rowsView").getRowElement(0)).removeClass("dx-cell-focus-disabled").removeAttr("tabIndex")}_prepareFocusedRow(e){let t;const{changedItem:n}=e;if(n&&(n.rowType==="data"||n.rowType==="group")){const{focusedRowIndex:s}=e,{$tableElement:o}=e,r=this.option("tabindex")||0,a=this.getView("rowsView");t=R(a._getRowElements(o).eq(s)),t.addClass("dx-row-focused").attr("tabindex",r)}return t}}const yj=i=>class extends i{init(){const e=this.option("focusedRowIndex"),t=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),super.init(),this.setRowFocusType(),this._focusedCellPosition={},U(e)&&e>=0&&(this._focusedCellPosition.rowIndex=e),U(t)&&t>=0&&(this._focusedCellPosition.columnIndex=t)}setFocusedRowIndex(e){super.setFocusedRowIndex(e),this.option("focusedRowIndex",e)}setFocusedColumnIndex(e){super.setFocusedColumnIndex(e),this.option("focusedColumnIndex",e)}_escapeKeyHandler(e,t){return t||!this.option("focusedRowEnabled")?super._escapeKeyHandler(e,t):this.isCellFocusType()?(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(e.originalEvent.target),!0),!0):!1}_updateFocusedCellPosition(e,t){const n=super._updateFocusedCellPosition(e,t);return n&&n.columnIndex>=0&&this._fireFocusedCellChanged(e),n}},Cj=i=>class extends i{renderFocusOverlay(e,t){var n;const s=this.option("focusedRowEnabled");let o;!s||!((n=this._keyboardNavigationController)!==null&&n!==void 0&&n.isRowFocusType())||this._editingController.isEditing()?super.renderFocusOverlay(e,t):s&&this._keyboardNavigationController._getElementType(e)==="row"&&!e.hasClass("dx-row-focused")&&(o=this._keyboardNavigationController.getFirstValidCellInRow(e),this._keyboardNavigationController.focus(o))}},xj=i=>class extends i{getSortDataSourceParameters(e,t){let n=super.getSortDataSourceParameters.apply(this,arguments);const s=this._dataController._dataSource,o=this._dataController.store();let r=o&&o.key();const a=s&&s.remoteOperations()||{},l=Object.keys(a).every(d=>!a[d]);if(r&&(this.option("focusedRowEnabled")&&this._focusController.isAutoNavigateToFocusedRow()!==!1||t)){r=Array.isArray(r)?r:[r];const d=r.filter(c=>!this.columnOption(c,"sortOrder"));d.length&&(n=n||[],l?n.push({selector:s.getDataIndexGetter(),desc:!1}):d.forEach(c=>n.push({selector:c,desc:!1})))}return n}},wj=i=>class extends i{constructor(){super(...arguments),this._needToUpdateFocusedRowByIndex=!1}_applyChange(e){if(!(e&&e.changeType==="updateFocusedRow"))return super._applyChange.apply(this,arguments)}_fireChanged(e){if(super._fireChanged(e),this.option("focusedRowEnabled")&&this._dataSource){const n=e.changeType==="update"&&e.repaintChangesOnly&&e.changeTypes&&e.changeTypes.indexOf("remove")>=0;this._needToUpdateFocusedRowByIndex?(this._needToUpdateFocusedRowByIndex=!1,this._focusController._focusRowByIndex()):e.changeType==="refresh"&&e.items.length||n?(this._updatePageIndexes(),this._updateFocusedRow(e)):e.changeType==="append"||e.changeType==="prepend"?this._updatePageIndexes():e.changeType==="update"&&e.repaintChangesOnly&&this._updateFocusedRow(e)}}_handleDataPushed(e){super._handleDataPushed(e);const t=this.option("focusedRowKey");this._needToUpdateFocusedRowByIndex=e==null?void 0:e.some(n=>n.type==="remove"&&zt(n.key,t))}_updatePageIndexes(){const e=this._lastRenderingPageIndex||0,t=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=t,this._isPagingByRendering=t!==e}isPagingByRendering(){return this._isPagingByRendering}_updateFocusedRow(e){const t=e.operationTypes||{},{reload:n,fullReload:s,pageIndex:o,paging:r}=t,a=this._keyboardNavigationController._isVirtualScrolling(),l=r&&!a,d=this.option("focusedRowKey"),c=this._focusController.isAutoNavigateToFocusedRow();if(n&&o===!1&&!s&&U(d))this._focusController._navigateToRow(d,!0).done(u=>{u<0&&this._focusController._focusRowByIndex(void 0,t)});else if(l&&c){const u=this.getRowIndexByKey(d),p=this.option("focusedRowIndex"),f=u>=0;p>=0&&(p===u||!f)&&this._focusController._focusRowByIndex(p,t)}else l&&!c&&this.getRowIndexByKey(d)<0?this.option("focusedRowIndex",-1):t.fullReload&&this._focusController._focusRowByKeyOrIndex()}getPageIndexByKey(e){const t=this,n=new ae;return t.getGlobalRowIndexByKey(e).done(s=>{n.resolve(s>=0?Math.floor(s/t.pageSize()):-1)}).fail(n.reject),n.promise()}getGlobalRowIndexByKey(e){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(e):this._calculateGlobalRowIndexByFlatData(e)}_calculateGlobalRowIndexByFlatData(e,t,n){const s=this,o=new ae,r=s._dataSource;if(Array.isArray(e)||oL(e))return o.resolve(-1).promise();let a=s._generateFilterByKey(e);return r.load({filter:s._concatWithCombinedFilter(a),skip:0,take:1}).done(l=>{l.length>0?(a=s._generateOperationFilterByKey(e,l[0],n),r.load({filter:s._concatWithCombinedFilter(a,t),skip:0,take:1,requireTotalCount:!0}).done((d,c)=>{o.resolve(c.totalCount)})):o.resolve(-1)}),o.promise()}_concatWithCombinedFilter(e,t){const n=this.getCombinedFilter();return Ce.combineFilters([e,n,t])}_generateBooleanFilter(e,t,n){const{desc:s}=n;switch(!0){case(t===!1&&s):return[e,"=",!0];case(t===!1&&!s):return[e,"=",null];case(t===!0&&!s):case(!hl(t)&&s):return[e,"<>",t];default:return}}_generateOperationFilterByKey(e,t,n){const s=this,o=s.option("dateSerializationFormat"),r=s._dataSource.remoteOperations().filtering,a=s._dataSource.remoteOperations().sorting;let l=s._generateFilterByKey(e,"<"),d=s._columnsController.getSortDataSourceParameters(!r,!0);if(n){const c=s._columnsController.getGroupDataSourceParameters(!r);c&&(d=d?c.concat(d):c)}return d&&d.slice().reverse().forEach(c=>{const{selector:h,desc:u,compare:p}=c,{getter:f,rawValue:g,safeValue:m}=_j.getSortFilterValue(c,t,{isRemoteFiltering:r,dateSerializationFormat:o,getSelector:b=>s._columnsController.columnOption(b,"selector")});if(l=[[h,"=",m],"and",l],g===null||hl(g)){const b=s._generateBooleanFilter(h,m,u);b&&(l=[b,"or",l])}else{const b=u?">":"<";let _;p&&!a?_=w=>b==="<"?p(g,f(w))>=1:p(g,f(w))<=-1:(_=[h,b,m],u||(_=[_,"or",[h,"=",null]])),l=[_,"or",l]}}),l}_generateFilterByKey(e,t){const n=this._dataSource.key();let s=[];if(t||(t="="),Array.isArray(n))for(let o=0;o<n.length;++o){const r=e[n[o]];r&&(s.length>0&&s.push("and"),s.push([n[o],t,r]))}else s=[n,t,e];return s}_getLastItemIndex(){return this.items(!0).length-1}},Sj=i=>class extends i{_deleteRowCore(e){const t=super._deleteRowCore.apply(this,arguments),n=this._dataController.getKeyByRowIndex(e);t.done(()=>{const s=this._dataController.getRowIndexByKey(n),o=this._dataController.getVisibleRows();s===-1&&!o.length&&this._focusController._resetFocusedRow()})}},Ej=i=>class extends i{_createRow(e){const t=super._createRow.apply(this,arguments);return this.option("focusedRowEnabled")&&e&&this._focusController.isRowFocused(e.key)&&t.addClass("dx-row-focused"),t}_checkRowKeys(e){if(super._checkRowKeys.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){const t=this._dataController.store();t&&!t.key()&&this._dataController.fireError("E1042","Row focusing")}}_update(e){e.changeType==="updateFocusedRow"?this.option("focusedRowEnabled")&&this._focusController.updateFocusedRow(e):super._update(e)}updateFocusElementTabIndex(e,t){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(t):super.updateFocusElementTabIndex(e)}_setFocusedRowElementTabIndex(e){const t=this.option("focusedRowKey"),n=this.option("tabIndex")??0,s=this._columnsController;let o=this._dataController.getRowIndexByKey(t),r=this.option("focusedColumnIndex");const a=this._findRowElementForTabIndex(),l=this._dataController.dataSource(),d=l==null?void 0:l.operationTypes(),c=!d||d.paging;U(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),a.attr("tabIndex",n);const h=this.option("focusedRowIndex")-this._dataController.getRowIndexOffset(!0);!c&&o<0&&h>=0&&this._focusController.updateFocusedRow({focusedRowIndex:h,preventScroll:e}),o>=0&&!e&&(r<0&&(r=0),o+=this._dataController.getRowIndexOffset(),r+=s.getColumnIndexOffset(),this._keyboardNavigationController.setFocusedCellPosition(o,r),this._focusController.isAutoNavigateToFocusedRow()&&!c&&!this._dataController.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize)))}_findRowElementForTabIndex(){const e=this.option("focusedRowKey"),t=this._dataController.getRowIndexByKey(e);return R(this.getRowElement(t>=0?t:0))}scrollToRowElement(e){const t=this._dataController.getRowIndexByKey(e),n=R(this.getRow(t));return this.scrollToElementVertically(n)}scrollToElementVertically(e){const t=this.getScrollable();if(t&&e.length){const n=t.getScrollElementPosition(e,"vertical");return this.scrollTopPosition(n)}return new ae().resolve()}scrollTopPosition(e){const t=new ae,n=this.getScrollable();if(n){const s=n.scrollTop(),o=()=>{n.off("scroll",o),t.resolve()};if(e!==s)return n.on("scroll",o),this._dataController.resetFilterApplying(),n.scrollTo({top:e}),t.promise()}return t.resolve()}},Tc={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:vj},extenders:{controllers:{keyboardNavigation:yj,editorFactory:Cj,columns:xj,data:wj,editing:Sj},views:{rowsView:Ej}}},Ij=Number.MAX_SAFE_INTEGER||9007199254740991,Tj=i=>class extends Tc.extenders.controllers.data(i){changeRowExpand(e,t){return this.option("focusedRowEnabled")&&Array.isArray(e)&&this.isRowExpanded(e)&&(!t||!this._keyboardNavigationController.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(e)&&this.option("focusedRowKey",e),super.changeRowExpand(e,t)}_isFocusedRowInsideGroup(e){const t=this.option("focusedRowKey"),n=this.getRowIndexByKey(t),s=n>=0&&this.getVisibleRows()[n],o=this._columnsController.getGroupDataSourceParameters(!0);if(s){for(let r=0;r<e.length;++r)if(Nt(o[r]&&o[r].selector)(s.data)!==e[r])return!1}return!0}_getGroupPath(e,t){const n=[];let s=[e];for(;s&&s[0]&&t;){const o=s[0];o.key!==void 0&&n.push(o.key),s=o.items,t--}return n}_expandGroupByPath(e,t,n){const s=new ae;return n++,e.expandRow(t.slice(0,n)).done(()=>{n===t.length?s.resolve():e._expandGroupByPath(e,t,n).done(s.resolve).fail(s.reject)}).fail(s.reject),s.promise()}_calculateGlobalRowIndexByGroupedData(e){const t=this,n=t._dataSource,s=t._generateFilterByKey(e),o=new ae,r=Array.isArray(e),a=n.group();return r?o.resolve(-1).promise():n._grouping._updatePagingOptions?(n.load({filter:t._concatWithCombinedFilter(s),group:a}).done(l=>{if(!l||l.length===0||!U(l[0].key)||l[0].key===-1)return o.resolve(-1).promise();const d=t._getGroupPath(l[0],a.length);t._expandGroupByPath(t,d,0).done(()=>{t._calculateExpandedRowGlobalIndex(o,e,d,a)}).fail(o.reject)}).fail(o.reject),o.promise()):(t._calculateGlobalRowIndexByFlatData(e,null,!0).done(o.resolve).fail(o.reject),o)}_calculateExpandedRowGlobalIndex(e,t,n,s){const o=br(n,{group:s}),r=this._dataSource,a=this.option("scrolling.mode"),l=a==="virtual"||a==="infinite",d=r.pageSize();let c;r._grouping._updatePagingOptions({skip:0,take:Ij},(h,u)=>{zt(h.path,n)&&(c=u)}),this._calculateGlobalRowIndexByFlatData(t,o).done(h=>{let u,p;if(h<0){e.resolve(-1);return}u=(c%d||d)+h-n.length,l?p=0:p=Math.floor(u/(d-n.length))*n.length,u=c+h+p,e.resolve(u)}).fail(e.reject)}};He.registerModule("focus",ve({},Tc,{extenders:ve({},Tc.extenders,{controllers:ve({},Tc.extenders.controllers,{data:Tj})})}));const oC=Je(),Cs="dxDraggable",Dj=be(xl,Cs),Aj=be(ma,Cs),kj=be(wl,Cs),Oj=be(Eu,Cs),Rj=be(Iu,Cs),Mj=be(Ct.down,Cs),Pj=be("keydown",Cs);let Cp,oc;const Wf=i=>({x:i.pageX-R(oC).scrollLeft(),y:i.pageY-R(oC).scrollTop()});class rC{constructor(e,t){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=t,e==="vertical"?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,t){let n=!1;e.some(s=>{const o=R(s),r=o.hasClass("dx-overlay-wrapper"),a=o.hasClass("dx-overlay-content");return r||a?!0:(n=this._trySetScrollable(s,t),n)}),n||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return(e.css(this._overFlowAttr)==="auto"||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil(this._sizeAttr==="width"?Ge(e):st(e))}_trySetScrollable(e,t){const n=this,s=R(e);let o;const r=n._component.option("scrollSensitivity");let a=n.isScrollable(s);return a&&(o=n._calculateDistanceToBorders(s,t),r>o[n._limitProps.start]?n._preventScroll||(n._scrollSpeed=-n._calculateScrollSpeed(o[n._limitProps.start]),n._$scrollableAtPointer=s):r>o[n._limitProps.end]?n._preventScroll||(n._scrollSpeed=n._calculateScrollSpeed(o[n._limitProps.end]),n._$scrollableAtPointer=s):(a=!1,n._preventScroll=!1)),a}_calculateDistanceToBorders(e,t){const n=e.get(0);let s;return n?(s=yi(n),{left:t.x-s.left,top:t.y-s.top,right:s.right-t.x,bottom:s.bottom-t.y}):{}}_calculateScrollSpeed(e){const t=this._component,n=t.option("scrollSensitivity"),s=t.option("scrollSpeed");return Math.ceil(((n-e)/n)**2*s)}scrollByStep(){const e=this;if(e._$scrollableAtPointer&&e._scrollSpeed){if(e._$scrollableAtPointer.hasClass("dx-scrollable-container")){const n=e._$scrollableAtPointer.closest(".dx-scrollable"),s=n.data("dxScrollable")||n.data("dxScrollView");if(s){const o=s.scrollOffset()[e._limitProps.start]+e._scrollSpeed;s.scrollTo({[e._limitProps.start]:o})}}else{const n=e._$scrollableAtPointer[e._scrollValue]()+e._scrollSpeed;e._$scrollableAtPointer[e._scrollValue](n)}const t=e._component._dragMoveArgs;t&&e._component._dragMoveHandler(t)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,t){if(!e)return!1;const n=yi(e.get(0)),s=n[this._limitProps.start],o=n[this._sizeAttr],r=Wf(t),a=this._sizeAttr==="width"?r.x:r.y;return a<s||a>s+o}}const Bj=E1.inherit({ctor(i){this.callBase(),this._strategy=i},_step(){const i=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;i&&i.scrollByStep(),e&&e.scrollByStep()}}),dT=Ss.inherit({reset:ue,dragMove:ue,dragEnter:ue,dragLeave:ue,dragEnd(i){return this._getSourceDraggable()._fireRemoveEvent(i),ae().resolve()},_fireRemoveEvent:ue,_getDefaultOptions(){return Y(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),Y(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new Bj(this),this._horizontalScrollHelper=new rC("horizontal",this),this._verticalScrollHelper=new rC("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset(i){return We(i)&&(i={h:i.x,v:i.y}),i=va(i).map(e=>parseFloat(e)),{left:i[0],top:i.length===1?i[0]:i[1]}},_getNormalizedCursorOffset(i,e){return Ee(i)&&(i=i.call(this,e)),this._normalizeCursorOffset(i)},_calculateElementOffset(i){let e,t;const{event:n}=i,s=R(i.itemElement),o=R(i.dragElement),r=this._dragElementIsCloned(),a=this.option("cursorOffset");let l={left:0,top:0};const d=this._initialLocate=Hn(o);return(r||i.initialOffset||a)&&(e=i.initialOffset||s.offset(),a&&(l=this._getNormalizedCursorOffset(a,i),isFinite(l.left)&&(e.left=n.pageX),isFinite(l.top)&&(e.top=n.pageY)),t=o.offset(),e.top-=t.top+(l.top||0)-d.top,e.left-=t.left+(l.left||0)-d.left),e},_initPosition(i){const e=R(i.dragElement),t=this._calculateElementOffset(i);t&&this._move(t,e),this._startPosition=Hn(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(i){const e=this.NAME;return om(e)+(i?`-${i}`:"")},_getItemsSelector(){return this.option("filter")||""},_$content(){const i=this.$element(),e=i.children(".dx-template-wrapper");return e.length?e:i},_attachEventHandlers(){if(this.option("disabled"))return;let i=this._$content(),e=this._getItemsSelector();const t=this.option("allowMoveByClick"),n={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(s,o)=>{const r=this.option("group"),a=this._getSourceDraggable().option("group"),l=this._getScrollable(s);return this._verticalScrollHelper.isOutsideScrollable(l,o)||this._horizontalScrollHelper.isOutsideScrollable(l,o)?!1:a&&a===r}};t&&(i=this._getArea(),q.on(i,Mj,n,this._pointerDownHandler.bind(this))),e[0]===">"&&(e=e.slice(1)),q.on(i,Dj,e,n,this._dragStartHandler.bind(this)),q.on(i,Aj,n,this._dragMoveHandler.bind(this)),q.on(i,kj,n,this._dragEndHandler.bind(this)),q.on(i,Oj,n,this._dragEnterHandler.bind(this)),q.on(i,Rj,n,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&q.on(i,Pj,this._keydownHandler.bind(this))},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(i,e){return{container:ze(e),model:{itemData:this.option("itemData"),itemElement:ze(i)}}},_createDragElement(i){let e=i;const t=this.option("clone"),n=this._getContainer();let s=this.option("dragTemplate");return s?(s=this._getTemplate(s),e=R("<div>").appendTo(n),s.render(this._getDragTemplateArgs(i,e))):t&&(e=R("<div>").appendTo(n),i.clone().css({width:i.css("width"),height:i.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==i.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){q.off(this._$content(),`.${Cs}`),q.off(this._getArea(),`.${Cs}`)},_move(i,e){Bi(e||this._$dragElement,i)},_getDraggableElement(i){const e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();let n=R(i&&i.target);const s=this._getItemsSelector();if(s[0]===">"){const o=this._$content().find(s);o.is(n)||(n=n.closest(o))}return n},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(i){if(UC(i))return;const e={},t=this.$element(),n=this.option("dragDirection");(n==="horizontal"||n==="both")&&(e.left=i.pageX-t.offset().left+Hn(t).left-Ge(t)/2),(n==="vertical"||n==="both")&&(e.top=i.pageY-t.offset().top+Hn(t).top-st(t)/2),this._move(e,t),this._getAction("onDragMove")(this._getEventArgs(i))},_isValidElement(i,e){const t=this.option("handle"),n=R(i.originalEvent&&i.originalEvent.target);return t&&!n.closest(t).length||!e.length?!1:!e.is(".dx-state-disabled, .dx-state-disabled *")},_dragStartHandler(i){const e=this._getDraggableElement(i);if(this.dragInProgress=!0,!this._isValidElement(i,e)){i.cancel=!0;return}if(this._$sourceElement)return;const t=this._getDragStartArgs(i,e);if(this._getAction("onDragStart")(t),t.cancel){i.cancel=!0;return}this.option("itemData",t.itemData),this._setSourceDraggable(),this._$sourceElement=e;let n=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),n=this._getDraggableElementOffset(n.left,n.top));const s=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(s.children());const o=s.css("position")==="fixed";this._initPosition(Y({},t,{dragElement:s.get(0),initialOffset:o&&n})),this._getAction("onDraggableElementShown")(ve({},t,{dragElement:s}));const r=this._getArea(),a=this._getAreaOffset(r),l=this._getBoundOffset(),d=St(r),c=rt(r),h=Ge(s),u=st(s),p=s.offset().left-a.left,f=s.offset().top-a.top;r.length&&(i.maxLeftOffset=p-l.left,i.maxRightOffset=d-p-h-l.right,i.maxTopOffset=f-l.top,i.maxBottomOffset=c-f-u-l.bottom),this.option("autoScroll")&&this._startAnimator()},_getAreaOffset(i){return i&&Un.offset(i)||{left:0,top:0}},_toggleDraggingClass(i){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),i)},_toggleDragSourceClass(i,e){const t=e||this._$sourceElement;t&&t.toggleClass(this._addWidgetPrefix("source"),i)},_setGestureCoverCursor(i){R(".dx-gesture-cover").css("cursor",i.css("cursor"))},_getBoundOffset(){let i=this.option("boundOffset");return Ee(i)&&(i=i.call(this)),_2(i)},_getArea(){let i=this.option("boundary");return Ee(i)&&(i=i.call(this)),R(i)},_getContainer(){let i=this.option("container");return i===void 0&&(i=Do()),R(i)},_getDraggableElementOffset(i,e){var t,n;const s=this._initScrollTop,o=this._initScrollLeft,r=this._getScrollableScrollTop(),a=this._getScrollableScrollLeft(),d=R(this.element()).css("position")==="fixed",c={left:(((t=this._startPosition)===null||t===void 0?void 0:t.left)??0)+i,top:(((n=this._startPosition)===null||n===void 0?void 0:n.top)??0)+e};return d||this._hasClonedDraggable()?c:{left:Wt(a)?c.left+a-o:c.left,top:Wt(r)?c.top+r-s:c.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(i){if(this._dragMoveArgs=i,!this._$dragElement){i.cancel=!0;return}const e=this._getDraggableElementOffset(i.offset.x,i.offset.y);this._move(e),this._updateScrollable(i);const t=this._getEventArgs(i);if(this._getAction("onDragMove")(t),t.cancel===!0)return;this._getTargetDraggable().dragMove(i,scrollBy)},_updateScrollable(i){const e=this;if(e.option("autoScroll")){const t=Wf(i),n=_e.elementsFromPoint(t.x,t.y,this.$element().get(0));e._verticalScrollHelper.updateScrollable(n,t),e._horizontalScrollHelper.updateScrollable(n,t)}},_getScrollable(i){let e;return i.parents().toArray().some(t=>{const n=R(t);return this._horizontalScrollHelper.isScrollable(n)||this._verticalScrollHelper.isScrollable(n)?(e=n,!0):!1}),e},_getScrollableScrollTop(){var i;return((i=this._getScrollable(R(this.element())))===null||i===void 0?void 0:i.scrollTop())??0},_getScrollableScrollLeft(){var i;return((i=this._getScrollable(R(this.element())))===null||i===void 0?void 0:i.scrollLeft())??0},_defaultActionArgs(){const i=this.callBase.apply(this,arguments),e=this.option("component");return e&&(i.component=e,i.element=e.element()),i},_getEventArgs(i){const e=this._getSourceDraggable(),t=this._getTargetDraggable();return{event:i,itemData:e.option("itemData"),itemElement:ze(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:t.option("component")||t,fromData:e.option("data"),toData:t.option("data")}},_getDragStartArgs(i,e){const t=this._getEventArgs(i);return{event:t.event,itemData:t.itemData,itemElement:e,fromData:t.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(i){const e=ae(),t=this._getEventArgs(i),n=this._getEventArgs(i),s=this._getTargetDraggable();let o=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(t)}finally{De(Pi(t.cancel)).done(r=>{if(!r&&(s!==this&&s._getAction("onDrop")(n),!n.cancel)){o=!1,De(Pi(s.dragEnd(t))).always(e.resolve);return}e.resolve()}).fail(e.resolve),e.done(()=>{o&&this._revertItemToInitialPosition(),this._resetDragOptions(s)})}},_isTargetOverAnotherDraggable(i){const e=this._getSourceDraggable();if(this===e)return!1;const t=e._$dragElement,n=e.$element(),s=this.$element(),o=Wf(i),a=_e.elementsFromPoint(o.x,o.y,this.element()).filter(h=>{const u=R(h);return u.hasClass(this._addWidgetPrefix())?!u.closest(t).length:!1})[0],l=this._getSourceElement(),d=a===n.get(0),c=R(a).closest(l).length;return!a||a===s.get(0)&&!d&&!c},_dragEnterHandler(i){this._fireDragEnterEvent(i),this._isTargetOverAnotherDraggable(i)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(i)},_dragLeaveHandler(i){this._fireDragLeaveEvent(i),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(i)},_keydownHandler(i){this.dragInProgress&&i.key==="Escape"&&this._keydownEscapeHandler(i)},_keydownEscapeHandler(i){var e;if(!this._getSourceElement())return;const n=this._getEventArgs(i);if(this._getAction("onDragCancel")(n),n.cancel)return;this.dragInProgress=!1,(e=oc)===null||e===void 0||e._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();const s=this._getTargetDraggable();this._resetDragOptions(s),this._attachEventHandlers()},_getAction(i){return this[`_${i}Action`]||this._createActionByOption(i)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new or}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());const i=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&R(e.render({container:this.element(),transclude:i}))},_optionChanged(i){const{name:e}=i;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this[`_${e}Action`]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(i)}},_getTargetDraggable(){return Cp||this},_getSourceDraggable(){return oc||this},_setTargetDraggable(){const i=this.option("group"),e=this._getSourceDraggable();i&&i===e.option("group")&&(Cp=this)},_setSourceDraggable(){oc=this},_resetSourceDraggable(){oc=null},_resetTargetDraggable(){Cp=null},_resetDragOptions(i){this.reset(),i.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(i){const e=this._getEventArgs(i);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(i){const e=this._getEventArgs(i);this._getAction("onDragLeave")(e)}});wt(Cs,dT);const aC=Je(),Fj="dxSortable",lC=i=>R(i).is(":visible"),Vj=(i,e)=>{var t,n;if(!i)return;const s=((t=e.to)===null||t===void 0?void 0:t.left)||0,o=((n=e.to)===null||n===void 0?void 0:n.top)||0;i.style.transform=`translate(${s}px,${o}px)`,i.style.transition=`transform ${e.duration}ms ${e.easing}`},Nj=i=>{i&&(i.style.transform="",i.style.transition="")};function Lj(i){const e=i.offset(),{style:t}=i[0],n=parseFloat(t.paddingLeft)||0,s=parseFloat(t.paddingRight)||0,o=parseFloat(t.paddingTop)||0,r=i[0].clientWidth-(n+s),a=st(i),l=e.left+n,d=e.top+o;return{left:l,right:l+r,top:d,bottom:d+a}}const cT=dT.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return Y(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(i,e)=>i.slice(0,e).reverse().filter(lC)[0],_dragStartHandler(i){if(this.callBase.apply(this,arguments),i.cancel===!0)return;const e=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(i),this.option("fromIndex",this._getElementIndex(e)),this.option("fromIndexOffset",this.option("offset"))},_subscribeToSourceScroll(i){const e=this._getScrollable(R(i.target));e&&(this._sourceScrollableInfo={element:e,scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop()},q.off(e,"scroll",this._sourceScrollHandler),q.on(e,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(q.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(i){const e=this._sourceScrollableInfo;e&&["scrollLeft","scrollTop"].forEach(t=>{if(i.target[t]!==e[t]){const n=i.target[t]-e[t];this._correctItemPoints(n),this._movePlaceholder(),e[t]=i.target[t]}})},_dragEnterHandler(i){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(i),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){const e=this.option("itemPoints"),t=e[e.length-1];if(t){const n=this.$element(),s=this._getSourceElement(),o=this._isVerticalOrientation(),r=o?rt(s,!0):St(s,!0),a=n.get(0)[o?"scrollHeight":"scrollWidth"],l=n.get(0)[o?"scrollTop":"scrollLeft"],d=o?"top":"left",c=t[d],u=n.offset()[d]+a-l-c;if(u<r&&o){const p=this._getItems(),f=R(this._getPrevVisibleItem(p));this._$modifiedItem=f,this._modifiedItemMargin=f.get(0).style.marginBottom,f.css("marginBottom",r-u);const g=f.closest(".dx-sortable"),m=g.data("dxScrollable")||g.data("dxScrollView");m&&m.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(i){const t=this._getTargetDraggable().$element(),n=this._getScrollable(t);if(n){const{left:s,right:o,top:r,bottom:a}=Lj(n),l=this.option("toIndex"),d=this.option("itemPoints"),c=d==null?void 0:d.filter(h=>h.index===l)[0];if(c&&c.top!==void 0)return this._isVerticalOrientation()?r<=Math.ceil(c.top)&&Math.floor(c.top)<=a:s<=Math.ceil(c.left)&&Math.floor(c.left)<=o}return!0},dragEnd(i){this._unsubscribeFromSourceScroll();const e=this._getSourceElement(),t=this._getSourceDraggable(),n=t.NAME!==this.NAME,s=this.option("toIndex"),{event:o}=i,r=this._allowDrop(o);if(s!==null&&s>=0&&r){let a,l;if(t!==this&&(a=this._fireAddEvent(o),a||(l=this._fireRemoveEvent(o))),n&&Zl(e),this.option("moveItemOnDrop")&&!a&&this._moveItem(e,s,l),t===this)return this._fireReorderEvent(o)}return ae().resolve()},dragMove(i){const e=this.option("itemPoints");if(!e)return;const t=this._isVerticalOrientation(),n=t?"top":"left",s=t?i.pageY:i.pageX,o=this.option("rtlEnabled");let r;for(let a=e.length-1;a>=0;a--){const l=e[a+1]&&(e[a][n]+e[a+1][n])/2;if((!t&&o?s>l:l>s)||l===void 0)r=e[a];else break}r&&(this._updatePlaceholderPosition(i,r),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())},_isIndicateMode(){return this.option("dropFeedbackMode")==="indicate"||this.option("allowDropInsideItem")},_createPlaceholder(){let i;return this._isIndicateMode()&&(i=R("<div>").addClass(this._addWidgetPrefix("placeholder")).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=i,i},_getItems(){const i=this._getItemsSelector();return this._$content().find(i).not(`.${this._addWidgetPrefix("placeholder")}`).not(`.${this._addWidgetPrefix("clone")}`).toArray()},_allowReordering(){const i=this._getSourceDraggable(),e=this._getTargetDraggable();return i!==e||this.option("allowReordering")},_isValidPoint(i,e,t){const n=this.option("allowDropInsideItem");return!(t||this._allowReordering())&&(i!==0||!n)?!1:this._isIndicateMode()?e===-1||i!==e&&(t||i!==e+1):!0},_getItemPoints(){const i=this;let e=[],t,n,s;const o=i.option("rtlEnabled"),r=i._isVerticalOrientation(),a=i._getItems(),l=a.filter(lC),d=l.length,c=this._getDraggableElement(),h=l.indexOf(c.get(0));if(d){for(let u=0;u<=d;u++){const p=!r&&o^u===d,f=r&&u===d;u<d&&(t=R(l[u]),n=t.offset(),s=St(t)),e.push({dropInsideItem:!1,left:n.left+(p?s:0),top:n.top+(f?e[u-1].height:0),index:u===d?a.length:a.indexOf(t.get(0)),$item:t,width:St(t),height:rt(t),isValid:i._isValidPoint(u,h)})}if(this.option("allowDropInsideItem")){const u=e;e=[];for(let p=0;p<u.length;p++)e.push(u[p]),u[p+1]&&e.push(Y({},u[p],{dropInsideItem:!0,top:Math.floor((u[p].top+u[p+1].top)/2),left:Math.floor((u[p].left+u[p+1].left)/2),isValid:this._isValidPoint(p,h,!0)}))}}else e.push({dropInsideItem:!1,index:0,isValid:!0});return e},_updateItemPoints(i){(i||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(i){const e=this.option("itemPoints");if(i&&e&&!this.option("autoUpdate")){const n=this._isVerticalOrientation()?"top":"left";e.forEach(s=>{s[n]-=i})}},_getElementIndex(i){return this._getItems().indexOf(i.get(0))},_getDragTemplateArgs(i){const e=this.callBase.apply(this,arguments);return e.model.fromIndex=this._getElementIndex(i),e},_togglePlaceholder(i){this._$placeholderElement&&this._$placeholderElement.toggle(i)},_isVerticalOrientation(){return this.option("itemOrientation")==="vertical"},_normalizeToIndex(i,e){const t=this._getSourceDraggable()!==this._getTargetDraggable(),n=this._getActualFromIndex();return i===null?n:Math.max(t||n>=i||e?i:i-1,0)},_updatePlaceholderPosition(i,e){const t=this._getSourceDraggable(),n=this._normalizeToIndex(e.index,e.dropInsideItem),s=Y(this._getEventArgs(i),{toIndex:n,dropInsideItem:e.dropInsideItem});if(e.isValid&&this._getAction("onDragChange")(s),s.cancel||!e.isValid){e.isValid||this.option({dropInsideItem:!1,toIndex:null});return}this.option({dropInsideItem:e.dropInsideItem,toIndex:e.index}),this._getAction("onPlaceholderPrepared")(Y(this._getEventArgs(i),{placeholderElement:ze(this._$placeholderElement),dragElement:ze(t._$dragElement)})),this._updateItemPoints()},_makeWidthCorrection(i,e){if(this._$scrollable=this._getScrollable(i),this._$scrollable){const t=Ge(this._$scrollable),n=this._$scrollable.offset().left-i.offset().left,s=St(i)-n-t;n>0&&(e-=n),s>0&&(e-=s)}return e},_updatePlaceholderSizes(i,e){const t=this.option("dropInsideItem"),n=R(e),s=this._isVerticalOrientation();let o="",r="";i.toggleClass(this._addWidgetPrefix("placeholder-inside"),t),(s||t)&&(o=St(n)),(!s||t)&&(r=rt(n)),o=this._makeWidthCorrection(n,o),i.css({width:o,height:r})},_moveItem(i,e,t){let n;const s=this._getItems(),o=s[e],r=this._getSourceDraggable();t&&(i=i.clone(),r._toggleDragSourceClass(!1,i)),o||(n=s[e-1]),this._moveItemCore(i,o,n)},_moveItemCore(i,e,t){!e&&!t?i.appendTo(this.$element()):t?i.insertAfter(R(t)):i.insertBefore(R(e))},_getDragStartArgs(i,e){return Y(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(e)})},_getEventArgs(i){const e=this._getSourceDraggable(),t=this._getTargetDraggable(),n=t.option("dropInsideItem");return Y(this.callBase.apply(this,arguments),{fromIndex:e.option("fromIndex"),toIndex:this._normalizeToIndex(t.option("toIndex"),n),dropInsideItem:n})},_optionChanged(i){const{name:e}=i;switch(e){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this[`_${e}Action`]=this._createActionByOption(e);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(t=>{const n=t?i.value:i.previousValue;if(n!==null){const s=R(this._getItems()[n]);this._toggleDragSourceClass(t,s)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(i);break;case"toIndex":this._optionChangedToIndex(i);break;default:this.callBase(i)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(i){const e=this.$element();let t;if(e.css("overflow")!=="hidden"?t=e.get(0):e.parents().each(function(){if(R(this).css("overflow")!=="visible")return t=this,!1}),t){const n=yi(t),s=this._isVerticalOrientation(),o=s?"top":"left",r=s?"bottom":"right",a=s?aC.pageYOffset:aC.pageXOffset;if(i[o]<n[o]+a||i[o]>n[r]+a)return!1}return!0},_optionChangedToIndex(i){const e=i.value;if(this._isIndicateMode()){const t=e!==null&&e>=0;this._togglePlaceholder(t),t&&this._movePlaceholder()}else this._moveItems(i.previousValue,i.value,i.fullUpdate)},update(){if(this.option("fromIndex")===null&&this.option("toIndex")===null)return;this._updateItemPoints(!0),this._updateDragSourceClass();const i=this.option("toIndex");this._optionChangedToIndex({value:i,fullUpdate:!0})},_updateDragSourceClass(){const i=this._getActualFromIndex(),e=R(this._getItems()[i]);e.length&&(this._$sourceElement=e,this._toggleDragSourceClass(!0,e))},_makeLeftCorrection(i){const e=this._$scrollable;if(e&&this._isVerticalOrientation()){const t=e.offset().left-i;t>0&&(i+=t)}return i},_movePlaceholder(){const i=this,e=i._$placeholderElement||i._createPlaceholder();if(!e)return;const t=i._getItems(),n=i.option("toIndex"),s=i._isVerticalOrientation(),o=this.option("rtlEnabled"),r=i.option("dropInsideItem");let a=null,l=t[n];if(l){const d=R(l);a=d.offset(),!s&&o&&!r&&(a.left+=St(d,!0))}else{const d=l=this._getPrevVisibleItem(t,n);d&&(a=R(d).offset(),s?a.top+=rt(d,!0):o||(a.left+=St(d,!0)))}if(i._updatePlaceholderSizes(e,l),a&&!i._isPositionVisible(a)&&(a=null),a){const d=s&&n===t.length,c=rt(e);a.left=i._makeLeftCorrection(a.left),a.top=d&&a.top>=c?a.top-c:a.top,i._move(a,e)}e.toggle(!!a)},_getPositions(i,e,t,n){const s=[];for(let o=0;o<i.length;o++){let r=0;if(n===null||t===null){s.push(r);continue}t===-1?o>=n&&(r=e):n===-1?o>t&&(r=-e):t<n?o>t&&o<n&&(r=-e):t>n&&o>=n&&o<t&&(r=e),s.push(r)}return s},_getDraggableElementSize(i){const e=this._getDraggableElement();let t=this.option("draggableElementSize");return t||(t=i?(rt(e)+rt(e,!0))/2:(St(e)+St(e,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",t)),t},_getActualFromIndex(){const{fromIndex:i,fromIndexOffset:e,offset:t}=this.option();return i==null?null:i+e-t},_moveItems(i,e,t){const n=this._getActualFromIndex(),s=this._isVerticalOrientation(),o=s?"top":"left",r=this._getDraggableElementSize(s),a=this._getItems(),l=this._getPositions(a,r,n,i),d=this._getPositions(a,r,n,e),c=this.option("animation"),h=this.option("rtlEnabled");for(let u=0;u<a.length;u++){const p=a[u],f=l[u],g=d[u];e===null||n===null?Nj(p):(f!==g||t&&U(g))&&Vj(p,Y({},c,{to:{[o]:!s&&h?-g:g}}))}},_toggleDragSourceClass(i,e){const t=e||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||t&&t.toggleClass(this._addWidgetPrefix("source-hidden"),i)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(i){const e=this._getEventArgs(i);return this._getAction("onAdd")(e),e.cancel},_fireRemoveEvent(i){const e=this._getSourceDraggable(),t=this._getEventArgs(i);return e._getAction("onRemove")(t),t.cancel},_fireReorderEvent(i){const e=this._getEventArgs(i);return this._getAction("onReorder")(e),e.promise||ae().resolve()}});wt(Fj,cT);const $j={dragCell:"dx-drag-cell"},Xo={cellFocusDisabled:"dx-cell-focus-disabled",handleIcon:"drag-icon",commandDrag:"dx-command-drag",sortableWithoutHandle:"dx-sortable-without-handle",rowsView:"rowsview",dragView:"dragview"},Hj=i=>(e,t)=>{const n=R(e);if(t.rowType==="data")return n.addClass(Xo.cellFocusDisabled),R("<span>").addClass(i(Xo.handleIcon));Ce.setEmptyText(n)},zj={createHandleTemplateFunc:Hj},Wj=i=>class extends i{init(){super.init.apply(this,arguments),this._updateHandleColumn()}optionChanged(e){e.name==="rowDragging"&&(this._updateHandleColumn(),this._invalidate(!0,!0),e.handled=!0),super.optionChanged.apply(this,arguments)}_allowReordering(){const e=this.option("rowDragging");return!!(e&&(e.allowReordering||e.allowDropInsideItem||e.group))}_updateHandleColumn(){const e=this.option("rowDragging"),t=this._allowReordering(),n=this._columnsController,s=t&&e.showDragIcons;n==null||n.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:$j.dragCell,value:""}],cssClass:Xo.commandDrag,width:"auto",cellTemplate:this._getHandleTemplate(),visible:s}),n==null||n.columnOption("type:drag","visible",s)}_renderContent(){const e=this.option("rowDragging"),t=this._allowReordering(),n=super._renderContent.apply(this,arguments),s=this._isFixedTableRendering,o=s?"_sortableFixed":"_sortable",r=s?"_sortable":"_sortableFixed",a=c=>{var h;(h=this._sortableFixed)===null||h===void 0||h.$element().css("pointerEvents",c?"auto":"")},l=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",d=this.option("dataRowTemplate")?`> table > tbody${l}`:`> table > tbody > ${l}`;return(t||this[o])&&n.length&&(this[o]=this._createComponent(n,cT,Y({component:this.component,contentTemplate:null,filter:d,cursorOffset:c=>{const{event:h}=c,u=R(this.element()).offset();return{x:h.pageX-u.left}},onDraggableElementShown:c=>{if(e.dragTemplate)return;const u=R(c.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(u)},dragTemplate:this._getDraggableRowTemplate(),handle:e.showDragIcons&&`.${Xo.commandDrag}`,dropFeedbackMode:"indicate"},e,{onDragStart:c=>{var h,u;(h=this.getController("keyboardNavigation"))===null||h===void 0||h._resetFocusedCell();const p=c.component.getVisibleRows()[c.fromIndex];c.itemData=p&&p.data;const f=p&&p.rowType==="data";c.cancel=!t||!f,(u=e.onDragStart)===null||u===void 0||u.call(e,c)},onDragEnter:c=>{c.fromComponent!==c.toComponent&&a(!0)},onDragLeave:()=>{a(!1)},onDragEnd:c=>{var h;a(!1),(h=e.onDragEnd)===null||h===void 0||h.call(e,c)},onAdd:c=>{var h;a(!1),(h=e.onAdd)===null||h===void 0||h.call(e,c)},dropFeedbackMode:e.dropFeedbackMode,onOptionChanged:c=>{this._sortableFixed&&(c.name==="fromIndex"||c.name==="toIndex")&&this[r].option(c.name,c.value)}})),n.toggleClass("dx-scrollable-container",s),n.toggleClass(Xo.sortableWithoutHandle,t&&!e.showDragIcons)),n}_renderCore(e){super._renderCore.apply(this,arguments),e&&e.changeType==="update"&&e.repaintChangesOnly&&Ce.isVirtualRowRendering(this)&&rn(()=>{this._updateSortable()})}_updateSortable(){const e=this._dataController.getRowIndexOffset(),t=e-this._previousOffset;[this._sortable,this._sortableFixed].forEach(n=>{const s=n==null?void 0:n.option("toIndex");U(s)&&U(this._previousOffset)&&(n==null||n.option("toIndex",s-t)),n==null||n.option("offset",e),n==null||n.update()}),this._previousOffset=e}_resizeCore(){super._resizeCore.apply(this,arguments),this._updateSortable()}_getDraggableGridOptions(e){const t=this.option(),n=this.getColumns(),s=R(this.getRowElement(e.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:t.columnFixing,columnAutoWidth:t.columnAutoWidth,showColumnLines:t.showColumnLines,columns:n.map(o=>({width:o.width||o.visibleWidth,fixed:o.fixed,fixedPosition:o.fixedPosition})),onRowPrepared:o=>{const r=o.component.getView("rowsView");R(o.rowElement).replaceWith(s.eq(r._isFixedTableRendering?1:0).clone())}}}_synchronizeScrollLeftPosition(e){const t=e==null?void 0:e.getScrollable();t==null||t.scrollTo({x:this._scrollLeft})}_getDraggableRowTemplate(){return e=>{const t=this.component.$element(),n=R("<div>");rm(n,Ge(t));const s=this._dataController.items(),o=s&&s[e.fromIndex],r=this._getDraggableGridOptions(o);return this._createComponent(n,this.component.NAME,r),n.find(".dx-gridbase-container").children(`:not(.${this.addWidgetPrefix(Xo.rowsView)})`).hide(),n.addClass(this.addWidgetPrefix(Xo.dragView)),n}}_getHandleTemplate(){return zj.createHandleTemplateFunc(e=>this.addWidgetPrefix(e))}},jj={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:Wj}}};He.registerModule("rowDragging",jj);/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function Kj(){throw new Error("Since v23.2, devextreme-vue no longer supports Vue 2. See: https://supportcenter.devexpress.com/ticket/details/T1186771")}function Gj(){}function Uj(){}const qj=Object.freeze(Object.defineProperty({__proto__:null,createComponent:Kj,createConfigurationComponent:Gj,createExtensionComponent:Uj},Symbol.toStringTag,{value:"Module"}));q.on;const dC=q.one;q.off;q.trigger;const Yj=q.triggerHandler;q.Event;/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function cC(i,e){for(const t in i)if(i[t]===e)return t;return e}function Xj(i){return i[0].toUpperCase()+i.substr(1)}function Zj(i){return i[0].toLowerCase()+i.substr(1)}function uT(i){return Zj(i.split("-").map(e=>Xj(e)).join(""))}function du(i){return i instanceof Date?i.getTime():i}function hT(i,e){return du(i)===du(e)?!0:Array.isArray(i)&&Array.isArray(e)?i.length===0&&e.length===0:!1}function Jj(i,e){Array.prototype.slice.call(i.childNodes).forEach(e)}function Qj(i,e){const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(const n of t)if(!e.hasOwnProperty(n))return!1;return!0}function eK(i,e){let t=i;return e.split(".").forEach(n=>{const s=pT(n);t&&(t=s.isCollection?t[s.name]&&t[s.name][s.index]:t[s.name])}),t}function pT(i){const e=i.split("[");return e.length===1?{isCollection:!1,name:i,fullName:i}:{isCollection:!0,name:e[0],fullName:i,index:Number(e[1].slice(0,-1))}}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function tK(i,e,t){!i||i.length===0||jf(i,e,t)}function Ml(i){const{patchFlag:e}=i;return e===128||e===256||e===64||e===-2}function jf(i,e,t){i.forEach(n=>{if(Ml(n)&&Array.isArray(n.children)&&jf(n.children,e,t),Ml(n)||e.push(n),!n)return;const s=iK(n);if(!s||!s.$_optionName)return;const o=nK(n),r={...s.$_predefinedProps,...fT(n.props||{})},a=t.createNested(s.$_optionName,r,s.$_isCollectionItem,s.$_expectedChildren);n.$_config=a,n.$_innerChanges={},o&&jf(o,e,a)})}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const Ro="modelValue";function Fg(i){if(!mK(i)||!i.$_config)return[];const e=i.$.subTree&&i.$.subTree.children;return Array.isArray(e)?e.filter(t=>{if(!Ml(t))return t}):[]}function iK(i){return bT(i)}function fT(i){const e={};for(const t in i)i.hasOwnProperty(t)&&(e[uT(t)]=i[t]);return e}function nK(i){return!i.children||!i.children.default?[]:_T(i.children.default())}function mT(i){if(!(!i.children||i.children==="object"||!i.children.default))return hK(i.children.default())?i.children.default:void 0}function sK(i){return mT(i)}function gT(i){return i.$slots}function oK(i){const e=gT(i);return e.default?e.default():[]}function rK(i,e,t){const n=e2(i);return n.provide("eventBus",e.eventBus),uK(n,e),n.mount(t)}function uC(i){const e=i.$.vnode.props||{};return fT(e)}function Vg(i){return i.$?i.$.vnode:i}function aK(i){return i.$.vnode.type}function lK(i){return i[Ro]}function Ng(i){i.compatConfig={MODE:3}}function dK(i){const e=`update:${Ro}`;i.model.prop=Ro,i.model.event=e,i.props.modelValue={},i.emits={...i.emits,[`${e}`]:null}}function cK(i,e){for(const t in e)!i.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(i[t]=e[t])}function uK(i,e){i._context.components=Object.assign(e.$.appContext.components,i._context.components),Object.setPrototypeOf(i._context.provides,Object.getPrototypeOf(e.$.provides)),Object.assign(i._context.provides,e.$.appContext.provides),i._context.config=e.$.appContext.config,i._context.directives=e.$.appContext.directives,i._context.mixins=e.$.appContext.mixins,cK(i._context.app,e.$.appContext.app)}function _T(i){return i.filter(e=>{if(Ml(e))return _T(e.children||[]);const t=e.type;if(t&&typeof t=="object"&&t.$_optionName)return delete e.$_config,delete e.$_innerChanges,e})}function hK(i){let e=!1;return i.forEach(t=>{!fK(t)&&!Ml(t)&&!pK(t)&&(e=!0)}),e}function pK(i){return i.type===t2||i.type.toString()==="Symbol()"&&!i.children}function fK(i){return i.type&&typeof i.type=="object"&&i.type.$_optionName}function bT(i){return i.type}function mK(i){return i.$.vnode&&i.$.vnode.children&&i.$.vnode.children.default}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */let gK={deepWatch:!1};function _K(i){return gK[i]}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */class Lg{constructor(e,t,n,s,o,r,a){this._updateFunc=e,this._name=t,this._initialValues=n||{},this._nestedConfigurations=[],this._isCollectionItem=!!o,this._collectionItemIndex=r,this._expectedChildren=s||{},this._ownerConfig=a,this._componentChanges=[],this.updateValue=this.updateValue.bind(this)}get name(){return this._name}get fullName(){return this._name&&this._isCollectionItem?`${this._name}[${this._collectionItemIndex}]`:this._name}get componentsCountChanged(){return this._componentChanges}cleanComponentsCountChanged(){this._componentChanges=[]}get fullPath(){return this._ownerConfig&&this._ownerConfig.fullPath?`${this._ownerConfig.fullPath}.${this.fullName}`:this.fullName}get ownerConfig(){return this._ownerConfig}get options(){return this._options}get initialValues(){return this._initialValues}get expectedChildren(){return this._expectedChildren}get nested(){return this._nestedConfigurations}get prevNestedOptions(){return this._prevNestedConfigOptions}get collectionItemIndex(){return this._collectionItemIndex}get isCollectionItem(){return this._isCollectionItem}get updateFunc(){return this._updateFunc}init(e){this._options=e||[]}set emitOptionChanged(e){this._emitOptionChanged=e}setPrevNestedOptions(e){this._prevNestedConfigOptions=e}onOptionChanged(e){hT(e.value,e.previousValue)||this._onOptionChanged(e.fullName.split("."),e)}cleanNested(){this._nestedConfigurations=[]}createNested(e,t,n,s){const o=this._expectedChildren[e];let r=e,a=n;o&&(a=o.isCollectionItem,o.optionName&&(r=o.optionName));let l=-1;a&&r&&(l=this._nestedConfigurations.filter(c=>c._name&&c._name===r).length);const d=new Lg(this._updateFunc,r,t,s,a,l,this);return this._nestedConfigurations.push(d),d}updateValue(e,t){const n=[this.fullPath,e].filter(s=>s).join(".");this._updateFunc(n,t)}getNestedOptionValues(){const e={};return this._nestedConfigurations.forEach(t=>{if(!t._name)return;const n={...t.initialValues,...t.getNestedOptionValues()};if(n)if(!t._isCollectionItem)e[t._name]=n;else{let s=e[t._name];(!s||!Array.isArray(s))&&(s=[],e[t._name]=s),s.push(n)}}),e}getOptionsToWatch(){const e={};return this._nestedConfigurations.forEach(t=>t._name&&(e[t._name]=!0)),this._options.filter(t=>!e[t])}_onOptionChanged(e,t){if(e.length===0)return;const n=pT(e[0]);if(n.isCollection||e.length>1){const s=this._getNestedConfig(n.fullName);if(s){s._onOptionChanged(e.slice(1),t);return}this._tryEmitOptionChanged(n.name,t.component.option(this.fullPath?`${this.fullPath}.${n.name}`:n.name))}else this._tryEmitOptionChanged(n.name,t.value)}_getNestedConfig(e){for(const t of this._nestedConfigurations)if(t.fullName===e)return t}_tryEmitOptionChanged(e,t){this._emitOptionChanged&&this._emitOptionChanged(e,t)}}function vT(i,e,t){const n=i&&i.getOptionsToWatch();n&&n.forEach(s=>{e.$watch(s,o=>{const r=pC(o);(!t.hasOwnProperty(s)||t[s]!==r)&&i.updateValue(s,o),delete t[s]},{deep:_K("deepWatch")})})}function bK(i,e){const{props:t}=i.$options;return t&&t.hasOwnProperty(e)}function vK(i,e,t){var n;return i.model&&e.hasOwnProperty(Ro)&&((n=t==null?void 0:t.props)==null?void 0:n.hasOwnProperty(Ro))}function yT(i,e,t){i.emitOptionChanged=(n,s)=>{var a;const o=e.$props,r=(a=e==null?void 0:e.$)==null?void 0:a.vnode;if(bK(e,n)&&!hT(s,o[n])&&e.$emit){t[n]=pC(s);const l=n==="value"&&vK(e.$options,o,r)?`update:${Ro}`:`update:${n}`;e.$emit(l,s)}}}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function xp(i){const e=Vg(i);if(e)return e.$_config||i.$_config}function yK(i){const e=Vg(i);if(e)return e.$_innerChanges||i.$_innerChanges}function CT(i,e,t,n){i&&(i.init(Object.keys(e)),t&&yT(i,t,n))}function hC({name:i,isCollectionItem:e,ownerConfig:t},n){const s=t&&t.fullPath;return{optionPath:i&&s?`${s}.${i}`:i||"",isCollection:e,removed:n}}function CK(){return yr({beforeMount(){const i=this,e=xp(i),t=yK(i);CT(e,aK(i).props,i,t),vT(e,this,t)},mounted(){this.$parent.$_instance&&this.$parent.$_config.componentsCountChanged.push(hC(xp(this)))},beforeUnmount(){const i=xp(this);i&&this.$parent.$_config.componentsCountChanged.push(hC(i,!0))},render(){return null}})}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const xK="dx-template-wrapper",Kf="dxremove";/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const xT="template";function wK(i){const e=i;if(e&&!(!e.$_config||!e.$_config.name))return e}function SK(i){return xT in i.type.props&&sK(i)}function EK(i){const e={},t=gT(i);for(const s in t){if(s==="default"&&i.$slots.default)continue;const o=t[s];o&&(e[s]=o)}const n=Fg(i);for(const s of n){const o=wK(s);if(!o)continue;const r=mT(s);if(!r||!SK(s))continue;const a=`${o.$_config.fullPath}.${xT}`;e[a]=r}return e}function IK(i){const e=[];return i.forEach(t=>{const n=bT(t);(!n||!n.$_optionName)&&e.push(t)}),e}function TK(i,e,t,n,s){return rK({name:n,inject:["eventBus"],created(){this.eventBus.add(this.$_updatedHandler)},mounted(){t.onRendered()},unmounted(){this.eventBus.remove(this.$_updatedHandler)},methods:{$_updatedHandler(){this.$forceUpdate()}},render:()=>{const o=IK(i()(t));return o?o.length>1?o:o[0]:fC("div")}},e,s)}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */class DK{constructor(e){this._slots={},this._templates={},this._isDirty=!1,this._component=e,this.discover()}discover(){this._slots={...EK(this._component)},Qj(this._templates,this._slots)||this._prepareTemplates()}get templates(){return this._templates}get isDirty(){return this._isDirty}resetDirtyFlag(){this._isDirty=!1}_prepareTemplates(){this._templates={};for(const e of Object.keys(this._slots))this._templates[e]=this.createDxTemplate(e);this._isDirty=!0}createDxTemplate(e){return{render:t=>{const n=((d,c=0)=>()=>{c===1&&d&&d(),c++})(t.onRendered),s={data:t.model,index:t.index,onRendered:n},o=document.createElement("div"),r=t.container.get?t.container.get(0):t.container;r.appendChild(o);const a=TK(()=>this._slots[e],this._component,s,e,o),l=a.$el;for(r.removeChild(o);o.firstChild;)r.appendChild(o.firstChild);if(_e.setClass(l,xK,!0),l.nodeType===Node.TEXT_NODE){const d=document.createElement(r.nodeName==="TABLE"?"tbody":"span");d.style.display="none",r.insertBefore(d,r.firstChild),dC(d,Kf,()=>{a.$.appContext.app.unmount.bind(a)(),d.remove()})}else dC(l,Kf,a.$.appContext.app.unmount.bind(a));return n(),l}}}}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const AK=["id","class","style"];$t({buyNowLink:"https://go.devexpress.com/Licensing_Installer_Watermark_DevExtremeVue.aspx"});function kK(i,e){const t={};return AK.forEach(n=>{const s=i[n];s&&(t[n]=n==="class"&&e.length?`${s} ${e.join(" ")}`:s)}),t}function wT(){return yr({inheritAttrs:!1,data(){return{eventBus:Tt()}},provide(){return{eventBus:this.eventBus}},render(){const i=this,e=[],t=OK(this.$el)||[];return i.$_config.cleanNested&&i.$_config.cleanNested(),tK(oK(this),e,i.$_config),this.$_processChildren(e),fC("div",{...kK(this.$attrs,t)},e)},beforeUpdate(){const i=this;i.$_config.setPrevNestedOptions(i.$_config.getNestedOptionValues())},updated(){const i=this,e=ST(this.$el);if(Fg(i).forEach(t=>{var n;CT(t.$_config,t.type.props||{},(n=t==null?void 0:t.component)==null?void 0:n.proxy,t.$_innerChanges)}),i.$_templatesManager.discover(),i.$_instance.beginUpdate(),this.$_applyConfigurationChanges(),i.$_templatesManager.isDirty){i.$_instance.option("integrationOptions.templates",i.$_templatesManager.templates);const{props:t}=i.$.vnode;for(const n of Object.keys(i.$_templatesManager.templates))i.$_instance.option(cC(t,n),n);i.$_templatesManager.resetDirtyFlag()}for(const t of Object.keys(i.$_pendingOptions))i.$_instance.option(t,i.$_pendingOptions[t]);i.$_pendingOptions={},i.$_instance.endUpdate(),ET(this.$el,e),this.eventBus.fire()},beforeUnmount(){const e=this.$_instance;e&&(Yj(this.$el,Kf),e.dispose())},created(){const i=this,e=uC(this);i.$_config=new Lg((t,n)=>{Array.isArray(n)?i.$_instance.option(t,n):i.$_pendingOptions[t===Ro?"value":t]=n},null,e&&{...e},i.$_expectedChildren),i.$_innerChanges={},i.$_config.init(this.$props&&Object.keys(this.$props))},methods:{$_applyConfigurationChanges(){const i=this;i.$_config.componentsCountChanged.forEach(({optionPath:e,isCollection:t,removed:n})=>{const s=i.$_config.getNestedOptionValues();!t&&n?i.$_instance.resetOption(e):i.$_instance.option(e,eK(s,e))}),i.$_config.cleanComponentsCountChanged()},$_createWidget(i){const e=this;e.$_pendingOptions={},e.$_templatesManager=new DK(this);const t=e.$_config;t.initialValues.hasOwnProperty(Ro)&&(t.initialValues.value=lK(t.initialValues));const n={templatesRenderAsynchronously:e.$_hasAsyncTemplate,...uC(e),...t.initialValues,...t.getNestedOptionValues(),...this.$_getIntegrationOptions()},s=new e.$_WidgetClass(i,n);e.$_instance=s,s.on("optionChanged",o=>t.onOptionChanged(o)),yT(t,e,e.$_innerChanges),vT(t,e,e.$_innerChanges),this.$_createEmitters(s)},$_getIntegrationOptions(){const i=this,e={integrationOptions:{watchMethod:this.$_getWatchMethod()},...this.$_getExtraIntegrationOptions()};if(i.$_templatesManager.isDirty){const{templates:t}=i.$_templatesManager;e.integrationOptions.templates=t;const{props:n}=i.$.vnode;for(const s of Object.keys(t))e[cC(n,s)]=s;i.$_templatesManager.resetDirtyFlag()}return e},$_getWatchMethod(){return(i,e,t)=>(t=t||{},t.skipImmediate||e(i()),this.$watch(()=>i(),(n,s)=>{(du(s)!==du(n)||t.deep)&&e(n)},{deep:t.deep}))},$_getExtraIntegrationOptions(){return{}},$_processChildren(i){},$_createEmitters(i){this.$attrs&&Object.keys(this.$attrs).forEach(e=>{const t=uT(e);i.on(t,n=>{this.$emit(e,n)})})}}})}function ST(i){const e=[];return Jj(i,t=>{const n=t.parentNode,s=t.hasAttribute&&t.hasAttribute("isExtension");(t.nodeName==="#comment"||s)&&n&&(e.push(t),n.removeChild(t))}),e}function OK(i){return i&&Array.from(i.classList).filter(e=>e.startsWith("dx-"))}function ET(i,e){e.forEach(t=>{i.appendChild(t)})}function RK(){return yr({extends:wT(),methods:{$_getExtraIntegrationOptions(){return{onInitializing(){this.beginUpdate()}}},$_processChildren(i){i.forEach(e=>{!e||typeof e!="object"||(e.$_hasOwner=!0)})}},mounted(){const i=ST(this.$el),e=this;this.$_createWidget(this.$el),e.$_instance.endUpdate(),ET(this.$el,i),this.$slots&&this.$slots.default&&Fg(e).forEach(t=>{const n=t;n&&n.$_isExtension&&n.$_attachTo(this.$el)})}})}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function MK(){return yr({extends:wT(),mounted(){this.$el.setAttribute("isExtension","true");const i=Vg(this);i.$_isExtension=!0,i.$_attachTo=this.attachTo.bind(this),!(i&&i.$_hasOwner)&&this.attachTo(this.$el)},methods:{attachTo(i){this.$_createWidget(i)}}})}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function PK(i){return i.extends=RK(),Ng(i),i.model&&dK(i),yr(i)}function BK(i){return i.extends=CK(),Ng(i),yr(i)}function FK(i){return i.extends=MK(),Ng(i),yr(i)}const VK=Object.freeze(Object.defineProperty({__proto__:null,createComponent:PK,createConfigurationComponent:BK,createExtensionComponent:FK},Symbol.toStringTag,{value:"Module"}));/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function NK(){const i=i2;return i?Number(i.split(".")[0]):2}function LK(){return NK()===3}/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const IT=LK()?VK:qj,{createComponent:$K}=IT,{createConfigurationComponent:Me}=IT;/*!
 * devextreme-vue
 * Version: 24.1.7
 * Build date: Wed Oct 30 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const HK=$K({props:{accessKey:String,activeStateEnabled:Boolean,allowColumnReordering:Boolean,allowColumnResizing:Boolean,autoNavigateToFocusedRow:Boolean,cacheEnabled:Boolean,cellHintEnabled:Boolean,columnAutoWidth:Boolean,columnChooser:Object,columnFixing:Object,columnHidingEnabled:Boolean,columnMinWidth:Number,columnResizingMode:String,columns:Array,columnWidth:[Number,String],customizeColumns:Function,dataRowTemplate:{},dataSource:{},dateSerializationFormat:String,disabled:Boolean,editing:Object,elementAttr:Object,errorRowEnabled:Boolean,export:Object,filterBuilder:Object,filterBuilderPopup:Object,filterPanel:Object,filterRow:Object,filterSyncEnabled:[Boolean,String],filterValue:[Array,Function,String],focusedColumnIndex:Number,focusedRowEnabled:Boolean,focusedRowIndex:Number,focusedRowKey:{},grouping:Object,groupPanel:Object,headerFilter:Object,height:[Function,Number,String],highlightChanges:Boolean,hint:String,hoverStateEnabled:Boolean,keyboardNavigation:Object,keyExpr:[Array,String],loadPanel:Object,masterDetail:Object,noDataText:String,onAdaptiveDetailRowPreparing:Function,onCellClick:Function,onCellDblClick:Function,onCellHoverChanged:Function,onCellPrepared:Function,onContentReady:Function,onContextMenuPreparing:Function,onDataErrorOccurred:Function,onDisposing:Function,onEditCanceled:Function,onEditCanceling:Function,onEditingStart:Function,onEditorPrepared:Function,onEditorPreparing:Function,onExporting:Function,onFocusedCellChanged:Function,onFocusedCellChanging:Function,onFocusedRowChanged:Function,onFocusedRowChanging:Function,onInitialized:Function,onInitNewRow:Function,onKeyDown:Function,onOptionChanged:Function,onRowClick:Function,onRowCollapsed:Function,onRowCollapsing:Function,onRowDblClick:Function,onRowExpanded:Function,onRowExpanding:Function,onRowInserted:Function,onRowInserting:Function,onRowPrepared:Function,onRowRemoved:Function,onRowRemoving:Function,onRowUpdated:Function,onRowUpdating:Function,onRowValidating:Function,onSaved:Function,onSaving:Function,onSelectionChanged:Function,onToolbarPreparing:Function,pager:Object,paging:Object,remoteOperations:[Boolean,Object,String],renderAsync:Boolean,repaintChangesOnly:Boolean,rowAlternationEnabled:Boolean,rowDragging:Object,rowTemplate:{},rtlEnabled:Boolean,scrolling:Object,searchPanel:Object,selectedRowKeys:Array,selection:Object,selectionFilter:[Array,Function,String],showBorders:Boolean,showColumnHeaders:Boolean,showColumnLines:Boolean,showRowLines:Boolean,sortByGroupSummaryInfo:Array,sorting:Object,stateStoring:Object,summary:Object,syncLookupFilterValues:Boolean,tabIndex:Number,toolbar:Object,twoWayBindingEnabled:Boolean,visible:Boolean,width:[Function,Number,String],wordWrapEnabled:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowColumnReordering":null,"update:allowColumnResizing":null,"update:autoNavigateToFocusedRow":null,"update:cacheEnabled":null,"update:cellHintEnabled":null,"update:columnAutoWidth":null,"update:columnChooser":null,"update:columnFixing":null,"update:columnHidingEnabled":null,"update:columnMinWidth":null,"update:columnResizingMode":null,"update:columns":null,"update:columnWidth":null,"update:customizeColumns":null,"update:dataRowTemplate":null,"update:dataSource":null,"update:dateSerializationFormat":null,"update:disabled":null,"update:editing":null,"update:elementAttr":null,"update:errorRowEnabled":null,"update:export":null,"update:filterBuilder":null,"update:filterBuilderPopup":null,"update:filterPanel":null,"update:filterRow":null,"update:filterSyncEnabled":null,"update:filterValue":null,"update:focusedColumnIndex":null,"update:focusedRowEnabled":null,"update:focusedRowIndex":null,"update:focusedRowKey":null,"update:grouping":null,"update:groupPanel":null,"update:headerFilter":null,"update:height":null,"update:highlightChanges":null,"update:hint":null,"update:hoverStateEnabled":null,"update:keyboardNavigation":null,"update:keyExpr":null,"update:loadPanel":null,"update:masterDetail":null,"update:noDataText":null,"update:onAdaptiveDetailRowPreparing":null,"update:onCellClick":null,"update:onCellDblClick":null,"update:onCellHoverChanged":null,"update:onCellPrepared":null,"update:onContentReady":null,"update:onContextMenuPreparing":null,"update:onDataErrorOccurred":null,"update:onDisposing":null,"update:onEditCanceled":null,"update:onEditCanceling":null,"update:onEditingStart":null,"update:onEditorPrepared":null,"update:onEditorPreparing":null,"update:onExporting":null,"update:onFocusedCellChanged":null,"update:onFocusedCellChanging":null,"update:onFocusedRowChanged":null,"update:onFocusedRowChanging":null,"update:onInitialized":null,"update:onInitNewRow":null,"update:onKeyDown":null,"update:onOptionChanged":null,"update:onRowClick":null,"update:onRowCollapsed":null,"update:onRowCollapsing":null,"update:onRowDblClick":null,"update:onRowExpanded":null,"update:onRowExpanding":null,"update:onRowInserted":null,"update:onRowInserting":null,"update:onRowPrepared":null,"update:onRowRemoved":null,"update:onRowRemoving":null,"update:onRowUpdated":null,"update:onRowUpdating":null,"update:onRowValidating":null,"update:onSaved":null,"update:onSaving":null,"update:onSelectionChanged":null,"update:onToolbarPreparing":null,"update:pager":null,"update:paging":null,"update:remoteOperations":null,"update:renderAsync":null,"update:repaintChangesOnly":null,"update:rowAlternationEnabled":null,"update:rowDragging":null,"update:rowTemplate":null,"update:rtlEnabled":null,"update:scrolling":null,"update:searchPanel":null,"update:selectedRowKeys":null,"update:selection":null,"update:selectionFilter":null,"update:showBorders":null,"update:showColumnHeaders":null,"update:showColumnLines":null,"update:showRowLines":null,"update:sortByGroupSummaryInfo":null,"update:sorting":null,"update:stateStoring":null,"update:summary":null,"update:syncLookupFilterValues":null,"update:tabIndex":null,"update:toolbar":null,"update:twoWayBindingEnabled":null,"update:visible":null,"update:width":null,"update:wordWrapEnabled":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=jS,this.$_hasAsyncTemplate=!1,this.$_expectedChildren={column:{isCollectionItem:!0,optionName:"columns"},columnChooser:{isCollectionItem:!1,optionName:"columnChooser"},columnFixing:{isCollectionItem:!1,optionName:"columnFixing"},dataGridHeaderFilter:{isCollectionItem:!1,optionName:"headerFilter"},dataGridSelection:{isCollectionItem:!1,optionName:"selection"},editing:{isCollectionItem:!1,optionName:"editing"},export:{isCollectionItem:!1,optionName:"export"},filterBuilder:{isCollectionItem:!1,optionName:"filterBuilder"},filterBuilderPopup:{isCollectionItem:!1,optionName:"filterBuilderPopup"},filterPanel:{isCollectionItem:!1,optionName:"filterPanel"},filterRow:{isCollectionItem:!1,optionName:"filterRow"},grouping:{isCollectionItem:!1,optionName:"grouping"},groupPanel:{isCollectionItem:!1,optionName:"groupPanel"},headerFilter:{isCollectionItem:!1,optionName:"headerFilter"},keyboardNavigation:{isCollectionItem:!1,optionName:"keyboardNavigation"},loadPanel:{isCollectionItem:!1,optionName:"loadPanel"},masterDetail:{isCollectionItem:!1,optionName:"masterDetail"},pager:{isCollectionItem:!1,optionName:"pager"},paging:{isCollectionItem:!1,optionName:"paging"},remoteOperations:{isCollectionItem:!1,optionName:"remoteOperations"},rowDragging:{isCollectionItem:!1,optionName:"rowDragging"},scrolling:{isCollectionItem:!1,optionName:"scrolling"},searchPanel:{isCollectionItem:!1,optionName:"searchPanel"},selection:{isCollectionItem:!1,optionName:"selection"},sortByGroupSummaryInfo:{isCollectionItem:!0,optionName:"sortByGroupSummaryInfo"},sorting:{isCollectionItem:!1,optionName:"sorting"},stateStoring:{isCollectionItem:!1,optionName:"stateStoring"},summary:{isCollectionItem:!1,optionName:"summary"},toolbar:{isCollectionItem:!1,optionName:"toolbar"}}}}),TT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}});TT.$_optionName="animation";TT.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};const $g=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:reevaluate":null,"update:type":null,"update:validationCallback":null},props:{ignoreEmptyValue:Boolean,message:String,reevaluate:Boolean,type:String,validationCallback:Function}});$g.$_optionName="validationRules";$g.$_isCollectionItem=!0;$g.$_predefinedProps={type:"async"};const zK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});zK.$_optionName="at";const WK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});WK.$_optionName="boundaryOffset";const DT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:hint":null,"update:icon":null,"update:name":null,"update:onClick":null,"update:template":null,"update:text":null,"update:visible":null},props:{cssClass:String,disabled:[Boolean,Function],hint:String,icon:String,name:String,onClick:Function,template:{},text:String,visible:[Boolean,Function]}});DT.$_optionName="buttons";DT.$_isCollectionItem=!0;const AT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:data":null,"update:insertAfterKey":null,"update:insertBeforeKey":null,"update:type":null},props:{data:{},insertAfterKey:{},insertBeforeKey:{},type:String}});AT.$_optionName="changes";AT.$_isCollectionItem=!0;const jK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:lg":null,"update:md":null,"update:sm":null,"update:xs":null},props:{lg:Number,md:Number,sm:Number,xs:Number}});jK.$_optionName="colCountByScreen";const KK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});KK.$_optionName="collision";const _o=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignment":null,"update:allowEditing":null,"update:allowExporting":null,"update:allowFiltering":null,"update:allowFixing":null,"update:allowGrouping":null,"update:allowHeaderFiltering":null,"update:allowHiding":null,"update:allowReordering":null,"update:allowResizing":null,"update:allowSearch":null,"update:allowSorting":null,"update:autoExpandGroup":null,"update:buttons":null,"update:calculateCellValue":null,"update:calculateDisplayValue":null,"update:calculateFilterExpression":null,"update:calculateGroupValue":null,"update:calculateSortValue":null,"update:caption":null,"update:cellTemplate":null,"update:columns":null,"update:cssClass":null,"update:customizeText":null,"update:dataField":null,"update:dataType":null,"update:editCellTemplate":null,"update:editorOptions":null,"update:encodeHtml":null,"update:falseText":null,"update:filterOperations":null,"update:filterType":null,"update:filterValue":null,"update:filterValues":null,"update:fixed":null,"update:fixedPosition":null,"update:format":null,"update:formItem":null,"update:groupCellTemplate":null,"update:groupIndex":null,"update:headerCellTemplate":null,"update:headerFilter":null,"update:hidingPriority":null,"update:isBand":null,"update:lookup":null,"update:minWidth":null,"update:name":null,"update:ownerBand":null,"update:renderAsync":null,"update:selectedFilterOperation":null,"update:setCellValue":null,"update:showEditorAlways":null,"update:showInColumnChooser":null,"update:showWhenGrouped":null,"update:sortIndex":null,"update:sortingMethod":null,"update:sortOrder":null,"update:trueText":null,"update:type":null,"update:validationRules":null,"update:visible":null,"update:visibleIndex":null,"update:width":null},props:{alignment:String,allowEditing:Boolean,allowExporting:Boolean,allowFiltering:Boolean,allowFixing:Boolean,allowGrouping:Boolean,allowHeaderFiltering:Boolean,allowHiding:Boolean,allowReordering:Boolean,allowResizing:Boolean,allowSearch:Boolean,allowSorting:Boolean,autoExpandGroup:Boolean,buttons:Array,calculateCellValue:Function,calculateDisplayValue:[Function,String],calculateFilterExpression:Function,calculateGroupValue:[Function,String],calculateSortValue:[Function,String],caption:String,cellTemplate:{},columns:Array,cssClass:String,customizeText:Function,dataField:String,dataType:String,editCellTemplate:{},editorOptions:{},encodeHtml:Boolean,falseText:String,filterOperations:Array,filterType:String,filterValue:{},filterValues:Array,fixed:Boolean,fixedPosition:String,format:[Object,Function,String],formItem:Object,groupCellTemplate:{},groupIndex:Number,headerCellTemplate:{},headerFilter:Object,hidingPriority:Number,isBand:Boolean,lookup:Object,minWidth:Number,name:String,ownerBand:Number,renderAsync:Boolean,selectedFilterOperation:String,setCellValue:Function,showEditorAlways:Boolean,showInColumnChooser:Boolean,showWhenGrouped:Boolean,sortIndex:Number,sortingMethod:Function,sortOrder:String,trueText:String,type:String,validationRules:Array,visible:Boolean,visibleIndex:Number,width:[Number,String]}});_o.$_optionName="columns";_o.$_isCollectionItem=!0;_o.$_expectedChildren={AsyncRule:{isCollectionItem:!0,optionName:"validationRules"},button:{isCollectionItem:!0,optionName:"buttons"},columnHeaderFilter:{isCollectionItem:!1,optionName:"headerFilter"},columnLookup:{isCollectionItem:!1,optionName:"lookup"},CompareRule:{isCollectionItem:!0,optionName:"validationRules"},CustomRule:{isCollectionItem:!0,optionName:"validationRules"},EmailRule:{isCollectionItem:!0,optionName:"validationRules"},format:{isCollectionItem:!1,optionName:"format"},formItem:{isCollectionItem:!1,optionName:"formItem"},headerFilter:{isCollectionItem:!1,optionName:"headerFilter"},lookup:{isCollectionItem:!1,optionName:"lookup"},NumericRule:{isCollectionItem:!0,optionName:"validationRules"},PatternRule:{isCollectionItem:!0,optionName:"validationRules"},RangeRule:{isCollectionItem:!0,optionName:"validationRules"},RequiredRule:{isCollectionItem:!0,optionName:"validationRules"},StringLengthRule:{isCollectionItem:!0,optionName:"validationRules"},validationRule:{isCollectionItem:!0,optionName:"validationRules"}};const kT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSearch":null,"update:container":null,"update:emptyPanelText":null,"update:enabled":null,"update:height":null,"update:mode":null,"update:position":null,"update:search":null,"update:searchTimeout":null,"update:selection":null,"update:sortOrder":null,"update:title":null,"update:width":null},props:{allowSearch:Boolean,container:{},emptyPanelText:String,enabled:Boolean,height:[Number,String],mode:String,position:Object,search:Object,searchTimeout:Number,selection:Object,sortOrder:String,title:String,width:[Number,String]}});kT.$_optionName="columnChooser";kT.$_expectedChildren={columnChooserSearch:{isCollectionItem:!1,optionName:"search"},columnChooserSelection:{isCollectionItem:!1,optionName:"selection"},position:{isCollectionItem:!1,optionName:"position"},search:{isCollectionItem:!1,optionName:"search"},selection:{isCollectionItem:!1,optionName:"selection"}};const GK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:editorOptions":null,"update:enabled":null,"update:timeout":null},props:{editorOptions:{},enabled:Boolean,timeout:Number}});GK.$_optionName="search";const UK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSelectAll":null,"update:recursive":null,"update:selectByClick":null},props:{allowSelectAll:Boolean,recursive:Boolean,selectByClick:Boolean}});UK.$_optionName="selection";const OT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:enabled":null,"update:texts":null},props:{enabled:Boolean,texts:Object}});OT.$_optionName="columnFixing";OT.$_expectedChildren={columnFixingTexts:{isCollectionItem:!1,optionName:"texts"},texts:{isCollectionItem:!1,optionName:"texts"}};const qK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:fix":null,"update:leftPosition":null,"update:rightPosition":null,"update:unfix":null},props:{fix:String,leftPosition:String,rightPosition:String,unfix:String}});qK.$_optionName="texts";const RT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSearch":null,"update:allowSelectAll":null,"update:dataSource":null,"update:groupInterval":null,"update:height":null,"update:search":null,"update:searchMode":null,"update:width":null},props:{allowSearch:Boolean,allowSelectAll:Boolean,dataSource:{},groupInterval:[Number,String],height:[Number,String],search:Object,searchMode:String,width:[Number,String]}});RT.$_optionName="headerFilter";RT.$_expectedChildren={columnHeaderFilterSearch:{isCollectionItem:!1,optionName:"search"},search:{isCollectionItem:!1,optionName:"search"}};const YK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:editorOptions":null,"update:enabled":null,"update:mode":null,"update:searchExpr":null,"update:timeout":null},props:{editorOptions:{},enabled:Boolean,mode:String,searchExpr:[Array,Function,String],timeout:Number}});YK.$_optionName="search";const XK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowClearing":null,"update:calculateCellValue":null,"update:dataSource":null,"update:displayExpr":null,"update:valueExpr":null},props:{allowClearing:Boolean,calculateCellValue:Function,dataSource:{},displayExpr:[Function,String],valueExpr:String}});XK.$_optionName="lookup";const Hg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:comparisonTarget":null,"update:comparisonType":null,"update:ignoreEmptyValue":null,"update:message":null,"update:type":null},props:{comparisonTarget:Function,comparisonType:String,ignoreEmptyValue:Boolean,message:String,type:String}});Hg.$_optionName="validationRules";Hg.$_isCollectionItem=!0;Hg.$_predefinedProps={type:"compare"};const ZK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});ZK.$_optionName="cursorOffset";const MT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:calculateFilterExpression":null,"update:caption":null,"update:customizeText":null,"update:dataTypes":null,"update:editorTemplate":null,"update:hasValue":null,"update:icon":null,"update:name":null},props:{calculateFilterExpression:Function,caption:String,customizeText:Function,dataTypes:Array,editorTemplate:{},hasValue:Boolean,icon:String,name:String}});MT.$_optionName="customOperations";MT.$_isCollectionItem=!0;const zg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:reevaluate":null,"update:type":null,"update:validationCallback":null},props:{ignoreEmptyValue:Boolean,message:String,reevaluate:Boolean,type:String,validationCallback:Function}});zg.$_optionName="validationRules";zg.$_isCollectionItem=!0;zg.$_predefinedProps={type:"custom"};const PT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSearch":null,"update:allowSelectAll":null,"update:height":null,"update:search":null,"update:searchTimeout":null,"update:texts":null,"update:visible":null,"update:width":null},props:{allowSearch:Boolean,allowSelectAll:Boolean,height:[Number,String],search:Object,searchTimeout:Number,texts:Object,visible:Boolean,width:[Number,String]}});PT.$_optionName="headerFilter";PT.$_expectedChildren={dataGridHeaderFilterSearch:{isCollectionItem:!1,optionName:"search"},dataGridHeaderFilterTexts:{isCollectionItem:!1,optionName:"texts"},search:{isCollectionItem:!1,optionName:"search"},texts:{isCollectionItem:!1,optionName:"texts"}};const JK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:editorOptions":null,"update:enabled":null,"update:mode":null,"update:timeout":null},props:{editorOptions:{},enabled:Boolean,mode:String,timeout:Number}});JK.$_optionName="search";const QK=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cancel":null,"update:emptyValue":null,"update:ok":null},props:{cancel:String,emptyValue:String,ok:String}});QK.$_optionName="texts";const eG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSelectAll":null,"update:deferred":null,"update:mode":null,"update:selectAllMode":null,"update:sensitivity":null,"update:showCheckBoxesMode":null},props:{allowSelectAll:Boolean,deferred:Boolean,mode:String,selectAllMode:String,sensitivity:String,showCheckBoxesMode:String}});eG.$_optionName="selection";const BT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowAdding":null,"update:allowDeleting":null,"update:allowUpdating":null,"update:changes":null,"update:confirmDelete":null,"update:editColumnName":null,"update:editRowKey":null,"update:form":null,"update:mode":null,"update:newRowPosition":null,"update:popup":null,"update:refreshMode":null,"update:selectTextOnEditStart":null,"update:startEditAction":null,"update:texts":null,"update:useIcons":null},props:{allowAdding:Boolean,allowDeleting:[Boolean,Function],allowUpdating:[Boolean,Function],changes:Array,confirmDelete:Boolean,editColumnName:String,editRowKey:{},form:Object,mode:String,newRowPosition:String,popup:Object,refreshMode:String,selectTextOnEditStart:Boolean,startEditAction:String,texts:{},useIcons:Boolean}});BT.$_optionName="editing";BT.$_expectedChildren={change:{isCollectionItem:!0,optionName:"changes"},editingTexts:{isCollectionItem:!1,optionName:"texts"},form:{isCollectionItem:!1,optionName:"form"},popup:{isCollectionItem:!1,optionName:"popup"},texts:{isCollectionItem:!1,optionName:"texts"}};const tG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:addRow":null,"update:cancelAllChanges":null,"update:cancelRowChanges":null,"update:confirmDeleteMessage":null,"update:confirmDeleteTitle":null,"update:deleteRow":null,"update:editRow":null,"update:saveAllChanges":null,"update:saveRowChanges":null,"update:undeleteRow":null,"update:validationCancelChanges":null},props:{addRow:String,cancelAllChanges:String,cancelRowChanges:String,confirmDeleteMessage:String,confirmDeleteTitle:String,deleteRow:String,editRow:String,saveAllChanges:String,saveRowChanges:String,undeleteRow:String,validationCancelChanges:String}});tG.$_optionName="texts";const Wg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:type":null},props:{ignoreEmptyValue:Boolean,message:String,type:String}});Wg.$_optionName="validationRules";Wg.$_isCollectionItem=!0;Wg.$_predefinedProps={type:"email"};const FT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowExportSelectedData":null,"update:enabled":null,"update:formats":null,"update:texts":null},props:{allowExportSelectedData:Boolean,enabled:Boolean,formats:Array,texts:Object}});FT.$_optionName="export";FT.$_expectedChildren={exportTexts:{isCollectionItem:!1,optionName:"texts"},texts:{isCollectionItem:!1,optionName:"texts"}};const iG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:exportAll":null,"update:exportSelectedRows":null,"update:exportTo":null},props:{exportAll:String,exportSelectedRows:String,exportTo:String}});iG.$_optionName="texts";const jg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:calculateFilterExpression":null,"update:caption":null,"update:customizeText":null,"update:dataField":null,"update:dataType":null,"update:editorOptions":null,"update:editorTemplate":null,"update:falseText":null,"update:filterOperations":null,"update:format":null,"update:lookup":null,"update:name":null,"update:trueText":null},props:{calculateFilterExpression:Function,caption:String,customizeText:Function,dataField:String,dataType:String,editorOptions:{},editorTemplate:{},falseText:String,filterOperations:Array,format:[Object,Function,String],lookup:Object,name:String,trueText:String}});jg.$_optionName="fields";jg.$_isCollectionItem=!0;jg.$_expectedChildren={fieldLookup:{isCollectionItem:!1,optionName:"lookup"},format:{isCollectionItem:!1,optionName:"format"},lookup:{isCollectionItem:!1,optionName:"lookup"}};const nG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowClearing":null,"update:dataSource":null,"update:displayExpr":null,"update:valueExpr":null},props:{allowClearing:Boolean,dataSource:[Array,Object],displayExpr:[Function,String],valueExpr:[Function,String]}});nG.$_optionName="lookup";const VT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowHierarchicalFields":null,"update:bindingOptions":null,"update:customOperations":null,"update:disabled":null,"update:elementAttr":null,"update:fields":null,"update:filterOperationDescriptions":null,"update:focusStateEnabled":null,"update:groupOperationDescriptions":null,"update:groupOperations":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxGroupLevel":null,"update:onContentReady":null,"update:onDisposing":null,"update:onEditorPrepared":null,"update:onEditorPreparing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:rtlEnabled":null,"update:tabIndex":null,"update:value":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,allowHierarchicalFields:Boolean,bindingOptions:Object,customOperations:Array,disabled:Boolean,elementAttr:Object,fields:Array,filterOperationDescriptions:Object,focusStateEnabled:Boolean,groupOperationDescriptions:Object,groupOperations:Array,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,maxGroupLevel:Number,onContentReady:Function,onDisposing:Function,onEditorPrepared:Function,onEditorPreparing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,rtlEnabled:Boolean,tabIndex:Number,value:[Array,Function,String],visible:Boolean,width:[Function,Number,String]}});VT.$_optionName="filterBuilder";VT.$_expectedChildren={customOperation:{isCollectionItem:!0,optionName:"customOperations"},field:{isCollectionItem:!0,optionName:"fields"},filterOperationDescriptions:{isCollectionItem:!1,optionName:"filterOperationDescriptions"},groupOperationDescriptions:{isCollectionItem:!1,optionName:"groupOperationDescriptions"}};const sG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:animation":null,"update:bindingOptions":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:enableBodyScroll":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},props:{accessKey:String,animation:Object,bindingOptions:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,enableBodyScroll:Boolean,focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}}});sG.$_optionName="filterBuilderPopup";const oG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:between":null,"update:contains":null,"update:endsWith":null,"update:equal":null,"update:greaterThan":null,"update:greaterThanOrEqual":null,"update:isBlank":null,"update:isNotBlank":null,"update:lessThan":null,"update:lessThanOrEqual":null,"update:notContains":null,"update:notEqual":null,"update:startsWith":null},props:{between:String,contains:String,endsWith:String,equal:String,greaterThan:String,greaterThanOrEqual:String,isBlank:String,isNotBlank:String,lessThan:String,lessThanOrEqual:String,notContains:String,notEqual:String,startsWith:String}});oG.$_optionName="filterOperationDescriptions";const NT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:filterEnabled":null,"update:texts":null,"update:visible":null},props:{customizeText:Function,filterEnabled:Boolean,texts:Object,visible:Boolean}});NT.$_optionName="filterPanel";NT.$_expectedChildren={filterPanelTexts:{isCollectionItem:!1,optionName:"texts"},texts:{isCollectionItem:!1,optionName:"texts"}};const rG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:clearFilter":null,"update:createFilter":null,"update:filterEnabledHint":null},props:{clearFilter:String,createFilter:String,filterEnabledHint:String}});rG.$_optionName="texts";const LT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:applyFilter":null,"update:applyFilterText":null,"update:betweenEndText":null,"update:betweenStartText":null,"update:operationDescriptions":null,"update:resetOperationText":null,"update:showAllText":null,"update:showOperationChooser":null,"update:visible":null},props:{applyFilter:String,applyFilterText:String,betweenEndText:String,betweenStartText:String,operationDescriptions:Object,resetOperationText:String,showAllText:String,showOperationChooser:Boolean,visible:Boolean}});LT.$_optionName="filterRow";LT.$_expectedChildren={operationDescriptions:{isCollectionItem:!1,optionName:"operationDescriptions"}};const $T=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:alignItemLabels":null,"update:alignItemLabelsInAllGroups":null,"update:bindingOptions":null,"update:colCount":null,"update:colCountByScreen":null,"update:customizeItem":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:formData":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:isDirty":null,"update:items":null,"update:labelLocation":null,"update:labelMode":null,"update:minColWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onEditorEnterKey":null,"update:onFieldDataChanged":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:optionalMark":null,"update:readOnly":null,"update:requiredMark":null,"update:requiredMessage":null,"update:rtlEnabled":null,"update:screenByWidth":null,"update:scrollingEnabled":null,"update:showColonAfterLabel":null,"update:showOptionalMark":null,"update:showRequiredMark":null,"update:showValidationSummary":null,"update:tabIndex":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,alignItemLabels:Boolean,alignItemLabelsInAllGroups:Boolean,bindingOptions:Object,colCount:[Number,String],colCountByScreen:Object,customizeItem:Function,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,formData:{},height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,isDirty:Boolean,items:Array,labelLocation:String,labelMode:String,minColWidth:Number,onContentReady:Function,onDisposing:Function,onEditorEnterKey:Function,onFieldDataChanged:Function,onInitialized:Function,onOptionChanged:Function,optionalMark:String,readOnly:Boolean,requiredMark:String,requiredMessage:String,rtlEnabled:Boolean,screenByWidth:Function,scrollingEnabled:Boolean,showColonAfterLabel:Boolean,showOptionalMark:Boolean,showRequiredMark:Boolean,showValidationSummary:Boolean,tabIndex:Number,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});$T.$_optionName="form";$T.$_expectedChildren={colCountByScreen:{isCollectionItem:!1,optionName:"colCountByScreen"}};const aG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null,"update:useCurrencyAccountingStyle":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String,useCurrencyAccountingStyle:Boolean}});aG.$_optionName="format";const HT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:colSpan":null,"update:cssClass":null,"update:dataField":null,"update:editorOptions":null,"update:editorType":null,"update:helpText":null,"update:isRequired":null,"update:itemType":null,"update:label":null,"update:name":null,"update:template":null,"update:validationRules":null,"update:visible":null,"update:visibleIndex":null},props:{colSpan:Number,cssClass:String,dataField:String,editorOptions:{},editorType:String,helpText:String,isRequired:Boolean,itemType:String,label:Object,name:String,template:{},validationRules:Array,visible:Boolean,visibleIndex:Number}});HT.$_optionName="formItem";HT.$_expectedChildren={AsyncRule:{isCollectionItem:!0,optionName:"validationRules"},CompareRule:{isCollectionItem:!0,optionName:"validationRules"},CustomRule:{isCollectionItem:!0,optionName:"validationRules"},EmailRule:{isCollectionItem:!0,optionName:"validationRules"},label:{isCollectionItem:!1,optionName:"label"},NumericRule:{isCollectionItem:!0,optionName:"validationRules"},PatternRule:{isCollectionItem:!0,optionName:"validationRules"},RangeRule:{isCollectionItem:!0,optionName:"validationRules"},RequiredRule:{isCollectionItem:!0,optionName:"validationRules"},StringLengthRule:{isCollectionItem:!0,optionName:"validationRules"},validationRule:{isCollectionItem:!0,optionName:"validationRules"}};const zT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});zT.$_optionName="from";zT.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};const WT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowCollapsing":null,"update:autoExpandAll":null,"update:contextMenuEnabled":null,"update:expandMode":null,"update:texts":null},props:{allowCollapsing:Boolean,autoExpandAll:Boolean,contextMenuEnabled:Boolean,expandMode:String,texts:Object}});WT.$_optionName="grouping";WT.$_expectedChildren={groupingTexts:{isCollectionItem:!1,optionName:"texts"},texts:{isCollectionItem:!1,optionName:"texts"}};const lG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:groupByThisColumn":null,"update:groupContinuedMessage":null,"update:groupContinuesMessage":null,"update:ungroup":null,"update:ungroupAll":null},props:{groupByThisColumn:String,groupContinuedMessage:String,groupContinuesMessage:String,ungroup:String,ungroupAll:String}});lG.$_optionName="texts";const Kg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignByColumn":null,"update:column":null,"update:customizeText":null,"update:displayFormat":null,"update:name":null,"update:showInColumn":null,"update:showInGroupFooter":null,"update:skipEmptyValues":null,"update:summaryType":null,"update:valueFormat":null},props:{alignByColumn:Boolean,column:String,customizeText:Function,displayFormat:String,name:String,showInColumn:String,showInGroupFooter:Boolean,skipEmptyValues:Boolean,summaryType:String,valueFormat:[Object,Function,String]}});Kg.$_optionName="groupItems";Kg.$_isCollectionItem=!0;Kg.$_expectedChildren={valueFormat:{isCollectionItem:!1,optionName:"valueFormat"}};const dG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:and":null,"update:notAnd":null,"update:notOr":null,"update:or":null},props:{and:String,notAnd:String,notOr:String,or:String}});dG.$_optionName="groupOperationDescriptions";const cG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowColumnDragging":null,"update:emptyPanelText":null,"update:visible":null},props:{allowColumnDragging:Boolean,emptyPanelText:String,visible:[Boolean,String]}});cG.$_optionName="groupPanel";const uG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSearch":null,"update:allowSelectAll":null,"update:dataSource":null,"update:groupInterval":null,"update:height":null,"update:search":null,"update:searchMode":null,"update:searchTimeout":null,"update:texts":null,"update:visible":null,"update:width":null},props:{allowSearch:Boolean,allowSelectAll:Boolean,dataSource:{},groupInterval:[Number,String],height:[Number,String],search:Object,searchMode:String,searchTimeout:Number,texts:Object,visible:Boolean,width:[Number,String]}});uG.$_optionName="headerFilter";const jT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});jT.$_optionName="hide";jT.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};const KT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:{},showText:String,template:{},text:String,visible:Boolean,widget:String}});KT.$_optionName="items";KT.$_isCollectionItem=!0;const hG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:editOnKeyPress":null,"update:enabled":null,"update:enterKeyAction":null,"update:enterKeyDirection":null},props:{editOnKeyPress:Boolean,enabled:Boolean,enterKeyAction:String,enterKeyDirection:String}});hG.$_optionName="keyboardNavigation";const pG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignment":null,"update:location":null,"update:showColon":null,"update:template":null,"update:text":null,"update:visible":null},props:{alignment:String,location:String,showColon:Boolean,template:{},text:String,visible:Boolean}});pG.$_optionName="label";const fG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:enabled":null,"update:height":null,"update:indicatorSrc":null,"update:shading":null,"update:shadingColor":null,"update:showIndicator":null,"update:showPane":null,"update:text":null,"update:width":null},props:{enabled:[Boolean,String],height:[Number,String],indicatorSrc:String,shading:Boolean,shadingColor:String,showIndicator:Boolean,showPane:Boolean,text:String,width:[Number,String]}});fG.$_optionName="loadPanel";const mG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowClearing":null,"update:calculateCellValue":null,"update:dataSource":null,"update:displayExpr":null,"update:valueExpr":null},props:{allowClearing:Boolean,calculateCellValue:Function,dataSource:{},displayExpr:[Function,String],valueExpr:[String,Function]}});mG.$_optionName="lookup";const gG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:autoExpandAll":null,"update:enabled":null,"update:template":null},props:{autoExpandAll:Boolean,enabled:Boolean,template:{}}});gG.$_optionName="masterDetail";const _G=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});_G.$_optionName="my";const Gg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:type":null},props:{ignoreEmptyValue:Boolean,message:String,type:String}});Gg.$_optionName="validationRules";Gg.$_isCollectionItem=!0;Gg.$_predefinedProps={type:"numeric"};const bG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});bG.$_optionName="offset";const vG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:between":null,"update:contains":null,"update:endsWith":null,"update:equal":null,"update:greaterThan":null,"update:greaterThanOrEqual":null,"update:lessThan":null,"update:lessThanOrEqual":null,"update:notContains":null,"update:notEqual":null,"update:startsWith":null},props:{between:String,contains:String,endsWith:String,equal:String,greaterThan:String,greaterThanOrEqual:String,lessThan:String,lessThanOrEqual:String,notContains:String,notEqual:String,startsWith:String}});vG.$_optionName="operationDescriptions";const yG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowedPageSizes":null,"update:displayMode":null,"update:infoText":null,"update:label":null,"update:showInfo":null,"update:showNavigationButtons":null,"update:showPageSizeSelector":null,"update:visible":null},props:{allowedPageSizes:[Array,String],displayMode:String,infoText:String,label:String,showInfo:Boolean,showNavigationButtons:Boolean,showPageSizeSelector:Boolean,visible:[Boolean,String]}});yG.$_optionName="pager";const CG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:enabled":null,"update:pageIndex":null,"update:pageSize":null},props:{enabled:Boolean,pageIndex:Number,pageSize:Number}});CG.$_optionName="paging";const Ug=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:pattern":null,"update:type":null},props:{ignoreEmptyValue:Boolean,message:String,pattern:[RegExp,String],type:String}});Ug.$_optionName="validationRules";Ug.$_isCollectionItem=!0;Ug.$_predefinedProps={type:"pattern"};const GT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:animation":null,"update:bindingOptions":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:enableBodyScroll":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},props:{accessKey:String,animation:Object,bindingOptions:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,enableBodyScroll:Boolean,focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}}});GT.$_optionName="popup";GT.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},position:{isCollectionItem:!1,optionName:"position"},toolbarItem:{isCollectionItem:!0,optionName:"toolbarItems"}};const xG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[Object,String],my:[Object,String],of:{},offset:[Object,String]}});xG.$_optionName="position";const qg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:max":null,"update:message":null,"update:min":null,"update:reevaluate":null,"update:type":null},props:{ignoreEmptyValue:Boolean,max:[Date,Number,String],message:String,min:[Date,Number,String],reevaluate:Boolean,type:String}});qg.$_optionName="validationRules";qg.$_isCollectionItem=!0;qg.$_predefinedProps={type:"range"};const wG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:filtering":null,"update:grouping":null,"update:groupPaging":null,"update:paging":null,"update:sorting":null,"update:summary":null},props:{filtering:Boolean,grouping:Boolean,groupPaging:Boolean,paging:Boolean,sorting:Boolean,summary:Boolean}});wG.$_optionName="remoteOperations";const Yg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:message":null,"update:trim":null,"update:type":null},props:{message:String,trim:Boolean,type:String}});Yg.$_optionName="validationRules";Yg.$_isCollectionItem=!0;Yg.$_predefinedProps={type:"required"};const UT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDropInsideItem":null,"update:allowReordering":null,"update:autoScroll":null,"update:boundary":null,"update:container":null,"update:cursorOffset":null,"update:data":null,"update:dragDirection":null,"update:dragTemplate":null,"update:dropFeedbackMode":null,"update:filter":null,"update:group":null,"update:handle":null,"update:onAdd":null,"update:onDragChange":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onRemove":null,"update:onReorder":null,"update:scrollSensitivity":null,"update:scrollSpeed":null,"update:showDragIcons":null},props:{allowDropInsideItem:Boolean,allowReordering:Boolean,autoScroll:Boolean,boundary:{},container:{},cursorOffset:[Object,String],data:{},dragDirection:String,dragTemplate:{},dropFeedbackMode:String,filter:String,group:String,handle:String,onAdd:Function,onDragChange:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onRemove:Function,onReorder:Function,scrollSensitivity:Number,scrollSpeed:Number,showDragIcons:Boolean}});UT.$_optionName="rowDragging";UT.$_expectedChildren={cursorOffset:{isCollectionItem:!1,optionName:"cursorOffset"}};const SG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:columnRenderingMode":null,"update:mode":null,"update:preloadEnabled":null,"update:renderAsync":null,"update:rowRenderingMode":null,"update:scrollByContent":null,"update:scrollByThumb":null,"update:showScrollbar":null,"update:useNative":null},props:{columnRenderingMode:String,mode:String,preloadEnabled:Boolean,renderAsync:Boolean,rowRenderingMode:String,scrollByContent:Boolean,scrollByThumb:Boolean,showScrollbar:String,useNative:[Boolean,String]}});SG.$_optionName="scrolling";const EG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:editorOptions":null,"update:enabled":null,"update:mode":null,"update:searchExpr":null,"update:timeout":null},props:{editorOptions:{},enabled:Boolean,mode:String,searchExpr:[Array,Function,String],timeout:Number}});EG.$_optionName="search";const IG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:highlightCaseSensitive":null,"update:highlightSearchText":null,"update:placeholder":null,"update:searchVisibleColumnsOnly":null,"update:text":null,"update:visible":null,"update:width":null},props:{highlightCaseSensitive:Boolean,highlightSearchText:Boolean,placeholder:String,searchVisibleColumnsOnly:Boolean,text:String,visible:Boolean,width:[Number,String]}});IG.$_optionName="searchPanel";const TG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowSelectAll":null,"update:deferred":null,"update:mode":null,"update:recursive":null,"update:selectAllMode":null,"update:selectByClick":null,"update:sensitivity":null,"update:showCheckBoxesMode":null},props:{allowSelectAll:Boolean,deferred:Boolean,mode:String,recursive:Boolean,selectAllMode:String,selectByClick:Boolean,sensitivity:String,showCheckBoxesMode:String}});TG.$_optionName="selection";const DG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});DG.$_optionName="show";const qT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:groupColumn":null,"update:sortOrder":null,"update:summaryItem":null},props:{groupColumn:String,sortOrder:String,summaryItem:[Number,String]}});qT.$_optionName="sortByGroupSummaryInfo";qT.$_isCollectionItem=!0;const AG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ascendingText":null,"update:clearText":null,"update:descendingText":null,"update:mode":null,"update:showSortIndexes":null},props:{ascendingText:String,clearText:String,descendingText:String,mode:String,showSortIndexes:Boolean}});AG.$_optionName="sorting";const kG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:customLoad":null,"update:customSave":null,"update:enabled":null,"update:savingTimeout":null,"update:storageKey":null,"update:type":null},props:{customLoad:Function,customSave:Function,enabled:Boolean,savingTimeout:Number,storageKey:String,type:String}});kG.$_optionName="stateStoring";const Xg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:max":null,"update:message":null,"update:min":null,"update:trim":null,"update:type":null},props:{ignoreEmptyValue:Boolean,max:Number,message:String,min:Number,trim:Boolean,type:String}});Xg.$_optionName="validationRules";Xg.$_isCollectionItem=!0;Xg.$_predefinedProps={type:"stringLength"};const YT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:calculateCustomSummary":null,"update:groupItems":null,"update:recalculateWhileEditing":null,"update:skipEmptyValues":null,"update:texts":null,"update:totalItems":null},props:{calculateCustomSummary:Function,groupItems:Array,recalculateWhileEditing:Boolean,skipEmptyValues:Boolean,texts:Object,totalItems:Array}});YT.$_optionName="summary";YT.$_expectedChildren={groupItem:{isCollectionItem:!0,optionName:"groupItems"},summaryTexts:{isCollectionItem:!1,optionName:"texts"},texts:{isCollectionItem:!1,optionName:"texts"},totalItem:{isCollectionItem:!0,optionName:"totalItems"}};const OG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:avg":null,"update:avgOtherColumn":null,"update:count":null,"update:max":null,"update:maxOtherColumn":null,"update:min":null,"update:minOtherColumn":null,"update:sum":null,"update:sumOtherColumn":null},props:{avg:String,avgOtherColumn:String,count:String,max:String,maxOtherColumn:String,min:String,minOtherColumn:String,sum:String,sumOtherColumn:String}});OG.$_optionName="texts";const RG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:addRow":null,"update:avg":null,"update:avgOtherColumn":null,"update:cancel":null,"update:cancelAllChanges":null,"update:cancelRowChanges":null,"update:clearFilter":null,"update:confirmDeleteMessage":null,"update:confirmDeleteTitle":null,"update:count":null,"update:createFilter":null,"update:deleteRow":null,"update:editRow":null,"update:emptyValue":null,"update:exportAll":null,"update:exportSelectedRows":null,"update:exportTo":null,"update:filterEnabledHint":null,"update:fix":null,"update:groupByThisColumn":null,"update:groupContinuedMessage":null,"update:groupContinuesMessage":null,"update:leftPosition":null,"update:max":null,"update:maxOtherColumn":null,"update:min":null,"update:minOtherColumn":null,"update:ok":null,"update:rightPosition":null,"update:saveAllChanges":null,"update:saveRowChanges":null,"update:sum":null,"update:sumOtherColumn":null,"update:undeleteRow":null,"update:unfix":null,"update:ungroup":null,"update:ungroupAll":null,"update:validationCancelChanges":null},props:{addRow:String,avg:String,avgOtherColumn:String,cancel:String,cancelAllChanges:String,cancelRowChanges:String,clearFilter:String,confirmDeleteMessage:String,confirmDeleteTitle:String,count:String,createFilter:String,deleteRow:String,editRow:String,emptyValue:String,exportAll:String,exportSelectedRows:String,exportTo:String,filterEnabledHint:String,fix:String,groupByThisColumn:String,groupContinuedMessage:String,groupContinuesMessage:String,leftPosition:String,max:String,maxOtherColumn:String,min:String,minOtherColumn:String,ok:String,rightPosition:String,saveAllChanges:String,saveRowChanges:String,sum:String,sumOtherColumn:String,undeleteRow:String,unfix:String,ungroup:String,ungroupAll:String,validationCancelChanges:String}});RG.$_optionName="texts";const MG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});MG.$_optionName="to";const XT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:items":null,"update:visible":null},props:{disabled:Boolean,items:Array,visible:Boolean}});XT.$_optionName="toolbar";XT.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"}};const ZT=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:toolbar":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},options:{},showText:String,template:{},text:String,toolbar:String,visible:Boolean,widget:String}});ZT.$_optionName="toolbarItems";ZT.$_isCollectionItem=!0;const Zg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignment":null,"update:column":null,"update:cssClass":null,"update:customizeText":null,"update:displayFormat":null,"update:name":null,"update:showInColumn":null,"update:skipEmptyValues":null,"update:summaryType":null,"update:valueFormat":null},props:{alignment:String,column:String,cssClass:String,customizeText:Function,displayFormat:String,name:String,showInColumn:String,skipEmptyValues:Boolean,summaryType:String,valueFormat:[Object,Function,String]}});Zg.$_optionName="totalItems";Zg.$_isCollectionItem=!0;Zg.$_expectedChildren={valueFormat:{isCollectionItem:!1,optionName:"valueFormat"}};const Jg=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:comparisonTarget":null,"update:comparisonType":null,"update:ignoreEmptyValue":null,"update:max":null,"update:message":null,"update:min":null,"update:pattern":null,"update:reevaluate":null,"update:trim":null,"update:type":null,"update:validationCallback":null},props:{comparisonTarget:Function,comparisonType:String,ignoreEmptyValue:Boolean,max:[Date,Number,String],message:String,min:[Date,Number,String],pattern:[RegExp,String],reevaluate:Boolean,trim:Boolean,type:String,validationCallback:Function}});Jg.$_optionName="validationRules";Jg.$_isCollectionItem=!0;Jg.$_predefinedProps={type:"required"};const PG=Me({emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null,"update:useCurrencyAccountingStyle":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String,useCurrencyAccountingStyle:Boolean}});PG.$_optionName="valueFormat";var JT={exports:{}};(function(i,e){(function(t,n){n()})(Dt,function(){function t(d,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function n(d,c,h){var u=new XMLHttpRequest;u.open("GET",d),u.responseType="blob",u.onload=function(){l(u.response,c,h)},u.onerror=function(){console.error("could not download file")},u.send()}function s(d){var c=new XMLHttpRequest;c.open("HEAD",d,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(c)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Dt=="object"&&Dt.global===Dt?Dt:void 0,a=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(d,c,h){var u=r.URL||r.webkitURL,p=document.createElement("a");c=c||d.name||"download",p.download=c,p.rel="noopener",typeof d=="string"?(p.href=d,p.origin===location.origin?o(p):s(p.href)?n(d,c,h):o(p,p.target="_blank")):(p.href=u.createObjectURL(d),setTimeout(function(){u.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(d,c,h){if(c=c||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,h),c);else if(s(d))n(d,c,h);else{var u=document.createElement("a");u.href=d,u.target="_blank",setTimeout(function(){o(u)})}}:function(d,c,h,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof d=="string")return n(d,c,h);var p=d.type==="application/octet-stream",f=/constructor/i.test(r.HTMLElement)||r.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||p&&f||a)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var w=m.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=w:location=w,u=null},m.readAsDataURL(d)}else{var b=r.URL||r.webkitURL,_=b.createObjectURL(d);u?u.location=_:location.href=_,u=null,setTimeout(function(){b.revokeObjectURL(_)},4e4)}});r.saveAs=l.saveAs=l,i.exports=l})})(JT);var BG=JT.exports,QT={exports:{}};/*! ExcelJS 19-10-2023 */(function(i,e){(function(t){i.exports=t()})(function(){return function t(n,s,o){function r(d,c){if(!s[d]){if(!n[d]){var h=typeof Cd=="function"&&Cd;if(!c&&h)return h(d,!0);if(a)return a(d,!0);var u=new Error("Cannot find module '"+d+"'");throw u.code="MODULE_NOT_FOUND",u}var p=s[d]={exports:{}};n[d][0].call(p.exports,function(f){return r(n[d][1][f]||f)},p,p.exports,t,n,s,o)}return s[d].exports}for(var a=typeof Cd=="function"&&Cd,l=0;l<o.length;l++)r(o[l]);return r}({1:[function(t,n,s){const o=t("fs"),r=t("fast-csv"),a=t("dayjs/plugin/customParseFormat"),l=t("dayjs/plugin/utc"),d=t("dayjs").extend(a).extend(l),c=t("../utils/stream-buf"),{fs:{exists:h}}=t("../utils/utils"),u={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};n.exports=class{constructor(p){this.workbook=p,this.worksheet=null}async readFile(p,f){if(f=f||{},!await h(p))throw new Error("File not found: "+p);const g=o.createReadStream(p),m=await this.read(g,f);return g.close(),m}read(p,f){return f=f||{},new Promise((g,m)=>{const b=this.workbook.addWorksheet(f.sheetName),_=f.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],w=f.map||function(D){if(D==="")return null;const B=Number(D);if(!Number.isNaN(B)&&B!==1/0)return B;const $=_.reduce((N,L)=>{if(N)return N;const j=d(D,L,!0);return j.isValid()?j:null},null);if($)return new Date($.valueOf());const F=u[D];return F!==void 0?F:D},E=r.parse(f.parserOptions).on("data",D=>{b.addRow(D.map(w))}).on("end",()=>{E.emit("worksheet",b)});E.on("worksheet",g).on("error",m),p.pipe(E)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(p,f){return new Promise((g,m)=>{f=f||{};const b=this.workbook.getWorksheet(f.sheetName||f.sheetId),_=r.format(f.formatterOptions);p.on("finish",()=>{g()}),_.on("error",m),_.pipe(p);const{dateFormat:w,dateUTC:E}=f,D=f.map||(F=>{if(F){if(F.text||F.hyperlink)return F.hyperlink||F.text||"";if(F.formula||F.result)return F.result||"";if(F instanceof Date)return w?E?d.utc(F).format(w):d(F).format(w):E?d.utc(F).format():d(F).format();if(F.error)return F.error;if(typeof F=="object")return JSON.stringify(F)}return F}),B=f.includeEmptyRows===void 0||f.includeEmptyRows;let $=1;b&&b.eachRow((F,N)=>{if(B)for(;$++<N-1;)_.write([]);const{values:L}=F;L.shift(),_.write(L.map(D)),$=N}),_.end()})}writeFile(p,f){const g={encoding:(f=f||{}).encoding||"utf8"},m=o.createWriteStream(p,g);return this.write(m,f)}async writeBuffer(p){const f=new c;return await this.write(f,p),f.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,n,s){const o=t("../utils/col-cache");class r{constructor(l,d){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=l,d)if(typeof d=="string"){const h=o.decodeAddress(d);this.nativeCol=h.col+c,this.nativeColOff=0,this.nativeRow=h.row+c,this.nativeRowOff=0}else d.nativeCol!==void 0?(this.nativeCol=d.nativeCol||0,this.nativeColOff=d.nativeColOff||0,this.nativeRow=d.nativeRow||0,this.nativeRowOff=d.nativeRowOff||0):d.col!==void 0?(this.col=d.col+c,this.row=d.row+c):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(l){return l instanceof r||l==null?l:new r(l)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(l){this.nativeCol=Math.floor(l),this.nativeColOff=Math.floor((l-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(l){this.nativeRow=Math.floor(l),this.nativeRowOff=Math.floor((l-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(l){this.nativeCol=l.nativeCol,this.nativeColOff=l.nativeColOff,this.nativeRow=l.nativeRow,this.nativeRowOff=l.nativeRowOff}}n.exports=r},{"../utils/col-cache":19}],3:[function(t,n,s){const o=t("../utils/col-cache"),r=t("../utils/under-dash"),a=t("./enums"),{slideFormula:l}=t("../utils/shared-formula"),d=t("./note");class c{constructor(p,f,g){if(!p||!f)throw new Error("A Cell needs a Row");this._row=p,this._column=f,o.validateAddress(g),this._address=g,this._value=h.create(c.Types.Null,this),this.style=this._mergeStyle(p.style,f.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(p){this.style.numFmt=p}get font(){return this.style.font}set font(p){this.style.font=p}get alignment(){return this.style.alignment}set alignment(p){this.style.alignment=p}get border(){return this.style.border}set border(p){this.style.border=p}get fill(){return this.style.fill}set fill(p){this.style.fill=p}get protection(){return this.style.protection}set protection(p){this.style.protection=p}_mergeStyle(p,f,g){const m=p&&p.numFmt||f&&f.numFmt;m&&(g.numFmt=m);const b=p&&p.font||f&&f.font;b&&(g.font=b);const _=p&&p.alignment||f&&f.alignment;_&&(g.alignment=_);const w=p&&p.border||f&&f.border;w&&(g.border=w);const E=p&&p.fill||f&&f.fill;E&&(g.fill=E);const D=p&&p.protection||f&&f.protection;return D&&(g.protection=D),g}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===c.Types.Merge}merge(p,f){this._value.release(),this._value=h.create(c.Types.Merge,this,p),f||(this.style=p.style)}unmerge(){this.type===c.Types.Merge&&(this._value.release(),this._value=h.create(c.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(p){return this._value.type===c.Types.Merge&&this._value.isMergedTo(p)}get master(){return this.type===c.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===c.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(p){this.type!==c.Types.Merge?(this._value.release(),this._value=h.create(h.getType(p),this,p)):this._value.master.value=p}get note(){return this._comment&&this._comment.note}set note(p){this._comment=new d(p)}get text(){return this._value.toString()}get html(){return r.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(p){this.type===c.Types.String&&(this._value=h.create(c.Types.Hyperlink,this,{text:this._value.value,hyperlink:p}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:p}=this._row;return{sheetName:p.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(p){this.names=[p]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(p){const{definedNames:f}=this.workbook;f.removeAllNames(this.fullAddress),p.forEach(g=>{f.addEx(this.fullAddress,g)})}addName(p){this.workbook.definedNames.addEx(this.fullAddress,p)}removeName(p){this.workbook.definedNames.removeEx(this.fullAddress,p)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(p){this._dataValidations.add(this.address,p)}get model(){const{model:p}=this._value;return p.style=this.style,this._comment&&(p.comment=this._comment.model),p}set model(p){if(this._value.release(),this._value=h.create(p.type,this),this._value.model=p,p.comment)switch(p.comment.type){case"note":this._comment=d.fromModel(p.comment)}p.style?this.style=p.style:this.style={}}}c.Types=a.ValueType;const h={getType:u=>u==null?c.Types.Null:u instanceof String||typeof u=="string"?c.Types.String:typeof u=="number"?c.Types.Number:typeof u=="boolean"?c.Types.Boolean:u instanceof Date?c.Types.Date:u.text&&u.hyperlink?c.Types.Hyperlink:u.formula||u.sharedFormula?c.Types.Formula:u.richText?c.Types.RichText:u.sharedString?c.Types.SharedString:u.error?c.Types.Error:c.Types.JSON,types:[{t:c.Types.Null,f:class{constructor(u){this.model={address:u.address,type:c.Types.Null}}get value(){return null}set value(u){}get type(){return c.Types.Null}get effectiveType(){return c.Types.Null}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return""}release(){}toString(){return""}}},{t:c.Types.Number,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.Number,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Number}get effectiveType(){return c.Types.Number}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.String,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.String,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.String}get effectiveType(){return c.Types.String}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:c.Types.Date,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.Date,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Date}get effectiveType(){return c.Types.Date}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.Hyperlink,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.Hyperlink,text:p?p.text:void 0,hyperlink:p?p.hyperlink:void 0},p&&p.tooltip&&(this.model.tooltip=p.tooltip)}get value(){const u={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(u.tooltip=this.model.tooltip),u}set value(u){this.model={text:u.text,hyperlink:u.hyperlink},u.tooltip&&(this.model.tooltip=u.tooltip)}get text(){return this.model.text}set text(u){this.model.text=u}get hyperlink(){return this.model.hyperlink}set hyperlink(u){this.model.hyperlink=u}get type(){return c.Types.Hyperlink}get effectiveType(){return c.Types.Hyperlink}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:c.Types.Formula,f:class{constructor(u,p){this.cell=u,this.model={address:u.address,type:c.Types.Formula,shareType:p?p.shareType:void 0,ref:p?p.ref:void 0,formula:p?p.formula:void 0,sharedFormula:p?p.sharedFormula:void 0,result:p?p.result:void 0}}_copyModel(u){const p={},f=g=>{const m=u[g];m&&(p[g]=m)};return f("formula"),f("result"),f("ref"),f("shareType"),f("sharedFormula"),p}get value(){return this._copyModel(this.model)}set value(u){this.model=this._copyModel(u)}validate(u){switch(h.getType(u)){case c.Types.Null:case c.Types.String:case c.Types.Number:case c.Types.Date:break;case c.Types.Hyperlink:case c.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(u){this.model.formula=u}get formulaType(){return this.model.formula?a.FormulaType.Master:this.model.sharedFormula?a.FormulaType.Shared:a.FormulaType.None}get result(){return this.model.result}set result(u){this.model.result=u}get type(){return c.Types.Formula}get effectiveType(){const u=this.model.result;return u==null?a.ValueType.Null:u instanceof String||typeof u=="string"?a.ValueType.String:typeof u=="number"?a.ValueType.Number:u instanceof Date?a.ValueType.Date:u.text&&u.hyperlink?a.ValueType.Hyperlink:u.formula?a.ValueType.Formula:a.ValueType.Null}get address(){return this.model.address}set address(u){this.model.address=u}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:u}=this.cell,p=u.findCell(this.model.sharedFormula);this._translatedFormula=p&&l(p.formula,p.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:c.Types.Merge,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.Merge,master:p?p.address:void 0},this._master=p,p&&p.addMergeRef()}get value(){return this._master.value}set value(u){u instanceof c?(this._master&&this._master.releaseMergeRef(),u.addMergeRef(),this._master=u):this._master.value=u}isMergedTo(u){return u===this._master}get master(){return this._master}get type(){return c.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:c.Types.JSON,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.String,value:JSON.stringify(p),rawValue:p}}get value(){return this.model.rawValue}set value(u){this.model.rawValue=u,this.model.value=JSON.stringify(u)}get type(){return c.Types.String}get effectiveType(){return c.Types.String}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:c.Types.SharedString,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.SharedString,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.SharedString}get effectiveType(){return c.Types.SharedString}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.RichText,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.String,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}toString(){return this.model.value.richText.map(u=>u.text).join("")}get type(){return c.Types.RichText}get effectiveType(){return c.Types.RichText}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:c.Types.Boolean,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.Boolean,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Boolean}get effectiveType(){return c.Types.Boolean}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.Error,f:class{constructor(u,p){this.model={address:u.address,type:c.Types.Error,value:p}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Error}get effectiveType(){return c.Types.Error}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((u,p)=>(u[p.t]=p.f,u),[]),create(u,p,f){const g=this.types[u];if(!g)throw new Error("Could not create Value of type "+u);return new g(p,f)}};n.exports=c},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,n,s){const o=t("../utils/under-dash"),r=t("./enums"),a=t("../utils/col-cache");class l{constructor(c,h,u){this._worksheet=c,this._number=h,u!==!1&&(this.defn=u)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return a.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(c){c?(this.key=c.key,this.width=c.width!==void 0?c.width:9,this.outlineLevel=c.outlineLevel,c.style?this.style=c.style:this.style={},this.header=c.header,this._hidden=!!c.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(c){c!==void 0?(this._header=c,this.headers.forEach((h,u)=>{this._worksheet.getCell(u+1,this.number).value=h})):this._header=void 0}get key(){return this._key}set key(c){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=c,c&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(c){this._hidden=c}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(c){this._outlineLevel=c}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(c){return this.width===c.width&&this.hidden===c.hidden&&this.outlineLevel===c.outlineLevel&&o.isEqual(this.style,c.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const c=this.style;return!c||!(c.font||c.numFmt||c.alignment||c.border||c.fill||c.protection)}get headerCount(){return this.headers.length}eachCell(c,h){const u=this.number;h||(h=c,c=null),this._worksheet.eachRow(c,(p,f)=>{h(p.getCell(u),f)})}get values(){const c=[];return this.eachCell((h,u)=>{h&&h.type!==r.ValueType.Null&&(c[u]=h.value)}),c}set values(c){if(!c)return;const h=this.number;let u=0;c.hasOwnProperty("0")&&(u=1),c.forEach((p,f)=>{this._worksheet.getCell(f+u,h).value=p})}_applyStyle(c,h){return this.style[c]=h,this.eachCell(u=>{u[c]=h}),h}get numFmt(){return this.style.numFmt}set numFmt(c){this._applyStyle("numFmt",c)}get font(){return this.style.font}set font(c){this._applyStyle("font",c)}get alignment(){return this.style.alignment}set alignment(c){this._applyStyle("alignment",c)}get protection(){return this.style.protection}set protection(c){this._applyStyle("protection",c)}get border(){return this.style.border}set border(c){this._applyStyle("border",c)}get fill(){return this.style.fill}set fill(c){this._applyStyle("fill",c)}static toModel(c){const h=[];let u=null;return c&&c.forEach((p,f)=>{p.isDefault?u&&(u=null):u&&p.equivalentTo(u)?u.max=f+1:(u={min:f+1,max:f+1,width:p.width!==void 0?p.width:9,style:p.style,isCustomWidth:p.isCustomWidth,hidden:p.hidden,outlineLevel:p.outlineLevel,collapsed:p.collapsed},h.push(u))}),h.length?h:void 0}static fromModel(c,h){const u=[];let p=1,f=0;for(h=(h=h||[]).sort(function(g,m){return g.min-m.min});f<h.length;){const g=h[f++];for(;p<g.min;)u.push(new l(c,p++));for(;p<=g.max;)u.push(new l(c,p++,g))}return u.length?u:null}}n.exports=l},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,n,s){n.exports=class{constructor(o){this.model=o||{}}add(o,r){return this.model[o]=r}find(o){return this.model[o]}remove(o){this.model[o]=void 0}}},{}],6:[function(t,n,s){const o=t("../utils/under-dash"),r=t("../utils/col-cache"),a=t("../utils/cell-matrix"),l=t("./range"),d=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;n.exports=class{constructor(){this.matrixMap={}}getMatrix(c){return this.matrixMap[c]||(this.matrixMap[c]=new a)}add(c,h){const u=r.decodeEx(c);this.addEx(u,h)}addEx(c,h){const u=this.getMatrix(h);if(c.top)for(let p=c.left;p<=c.right;p++)for(let f=c.top;f<=c.bottom;f++){const g={sheetName:c.sheetName,address:r.n2l(p)+f,row:f,col:p};u.addCellEx(g)}else u.addCellEx(c)}remove(c,h){const u=r.decodeEx(c);this.removeEx(u,h)}removeEx(c,h){this.getMatrix(h).removeCellEx(c)}removeAllNames(c){o.each(this.matrixMap,h=>{h.removeCellEx(c)})}forEach(c){o.each(this.matrixMap,(h,u)=>{h.forEach(p=>{c(u,p)})})}getNames(c){return this.getNamesEx(r.decodeEx(c))}getNamesEx(c){return o.map(this.matrixMap,(h,u)=>h.findCellEx(c)&&u).filter(Boolean)}_explore(c,h){h.mark=!1;const{sheetName:u}=h,p=new l(h.row,h.col,h.row,h.col,u);let f,g;function m(_,w){const E=c.findCellAt(u,_,h.col);return!(!E||!E.mark)&&(p[w]=_,E.mark=!1,!0)}for(g=h.row-1;m(g,"top");g--);for(g=h.row+1;m(g,"bottom");g++);function b(_,w){const E=[];for(g=p.top;g<=p.bottom;g++){const D=c.findCellAt(u,g,_);if(!D||!D.mark)return!1;E.push(D)}p[w]=_;for(let D=0;D<E.length;D++)E[D].mark=!1;return!0}for(f=h.col-1;b(f,"left");f--);for(f=h.col+1;b(f,"right");f++);return p}getRanges(c,h){return(h=h||this.matrixMap[c])?(h.forEach(u=>{u.mark=!0}),{name:c,ranges:h.map(u=>u.mark&&this._explore(h,u)).filter(Boolean).map(u=>u.$shortRange)}):{name:c,ranges:[]}}normaliseMatrix(c,h){c.forEachInSheet(h,(u,p,f)=>{u&&(u.row===p&&u.col===f||(u.row=p,u.col=f,u.address=r.n2l(f)+p))})}spliceRows(c,h,u,p){o.each(this.matrixMap,f=>{f.spliceRows(c,h,u,p),this.normaliseMatrix(f,c)})}spliceColumns(c,h,u,p){o.each(this.matrixMap,f=>{f.spliceColumns(c,h,u,p),this.normaliseMatrix(f,c)})}get model(){return o.map(this.matrixMap,(c,h)=>this.getRanges(h,c)).filter(c=>c.ranges.length)}set model(c){const h=this.matrixMap={};c.forEach(u=>{const p=h[u.name]=new a;u.ranges.forEach(f=>{d.test(f.split("!").pop()||"")&&p.addCell(f)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,n,s){n.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,n,s){const o=t("../utils/col-cache"),r=t("./anchor");n.exports=class{constructor(a,l){this.worksheet=a,this.model=l}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(a){let{type:l,imageId:d,range:c,hyperlinks:h}=a;if(this.type=l,this.imageId=d,l==="image")if(typeof c=="string"){const u=o.decode(c);this.range={tl:new r(this.worksheet,{col:u.left,row:u.top},-1),br:new r(this.worksheet,{col:u.right,row:u.bottom},0),editAs:"oneCell"}}else this.range={tl:new r(this.worksheet,c.tl,0),br:c.br&&new r(this.worksheet,c.br,0),ext:c.ext,editAs:c.editAs,hyperlinks:h||c.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,n,s){const o=t("../utils/under-dash");class r{constructor(l){this.note=l}get model(){let l=null;switch(typeof this.note){case"string":l={type:"note",note:{texts:[{text:this.note}]}};break;default:l={type:"note",note:this.note}}return o.deepMerge({},r.DEFAULT_CONFIGS,l)}set model(l){const{note:d}=l,{texts:c}=d;c.length===1&&Object.keys(c[0]).length===1?this.note=c[0].text:this.note=d}static fromModel(l){const d=new r;return d.model=l,d}}r.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},n.exports=r},{"../utils/under-dash":26}],10:[function(t,n,s){const o=t("../utils/col-cache");class r{constructor(){this.decode(arguments)}setTLBR(l,d,c,h,u){if(arguments.length<4){const p=o.decodeAddress(l),f=o.decodeAddress(d);this.model={top:Math.min(p.row,f.row),left:Math.min(p.col,f.col),bottom:Math.max(p.row,f.row),right:Math.max(p.col,f.col),sheetName:c},this.setTLBR(p.row,p.col,f.row,f.col,u)}else this.model={top:Math.min(l,c),left:Math.min(d,h),bottom:Math.max(l,c),right:Math.max(d,h),sheetName:u}}decode(l){switch(l.length){case 5:this.setTLBR(l[0],l[1],l[2],l[3],l[4]);break;case 4:this.setTLBR(l[0],l[1],l[2],l[3]);break;case 3:this.setTLBR(l[0],l[1],l[2]);break;case 2:this.setTLBR(l[0],l[1]);break;case 1:{const d=l[0];if(d instanceof r)this.model={top:d.model.top,left:d.model.left,bottom:d.model.bottom,right:d.model.right,sheetName:d.sheetName};else if(d instanceof Array)this.decode(d);else if(d.top&&d.left&&d.bottom&&d.right)this.model={top:d.top,left:d.left,bottom:d.bottom,right:d.right,sheetName:d.sheetName};else{const c=o.decodeEx(d);c.top?this.model={top:c.top,left:c.left,bottom:c.bottom,right:c.right,sheetName:c.sheetName}:this.model={top:c.row,left:c.col,bottom:c.row,right:c.col,sheetName:c.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+l.length)}}get top(){return this.model.top||1}set top(l){this.model.top=l}get left(){return this.model.left||1}set left(l){this.model.left=l}get bottom(){return this.model.bottom||1}set bottom(l){this.model.bottom=l}get right(){return this.model.right||1}set right(l){this.model.right=l}get sheetName(){return this.model.sheetName}set sheetName(l){this.model.sheetName=l}get _serialisedSheetName(){const{sheetName:l}=this.model;return l?/^[a-zA-Z0-9]*$/.test(l)?l+"!":`'${l}'!`:""}expand(l,d,c,h){(!this.model.top||l<this.top)&&(this.top=l),(!this.model.left||d<this.left)&&(this.left=d),(!this.model.bottom||c>this.bottom)&&(this.bottom=c),(!this.model.right||h>this.right)&&(this.right=h)}expandRow(l){if(l){const{dimensions:d,number:c}=l;d&&this.expand(c,d.min,c,d.max)}}expandToAddress(l){const d=o.decodeEx(l);this.expand(d.row,d.col,d.row,d.col)}get tl(){return o.n2l(this.left)+this.top}get $t$l(){return`$${o.n2l(this.left)}$${this.top}`}get br(){return o.n2l(this.right)+this.bottom}get $b$r(){return`$${o.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&!(l.bottom<this.top)&&!(l.top>this.bottom)&&!(l.right<this.left)&&!(l.left>this.right)}contains(l){const d=o.decodeEx(l);return this.containsEx(d)}containsEx(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&l.row>=this.top&&l.row<=this.bottom&&l.col>=this.left&&l.col<=this.right}forEachAddress(l){for(let d=this.left;d<=this.right;d++)for(let c=this.top;c<=this.bottom;c++)l(o.encodeAddress(c,d),c,d)}}n.exports=r},{"../utils/col-cache":19}],11:[function(t,n,s){const o=t("../utils/under-dash"),r=t("./enums"),a=t("../utils/col-cache"),l=t("./cell");n.exports=class{constructor(d,c){this._worksheet=d,this._number=c,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(d){return this._cells[d-1]}getCellEx(d){let c=this._cells[d.col-1];if(!c){const h=this._worksheet.getColumn(d.col);c=new l(this,h,d.address),this._cells[d.col-1]=c}return c}getCell(d){if(typeof d=="string"){const c=this._worksheet.getColumnKey(d);d=c?c.number:a.l2n(d)}return this._cells[d-1]||this.getCellEx({address:a.encodeAddress(this._number,d),row:this._number,col:d})}splice(d,c){const h=d+c;for(var u=arguments.length,p=new Array(u>2?u-2:0),f=2;f<u;f++)p[f-2]=arguments[f];const g=p.length-c,m=this._cells.length;let b,_,w;if(g<0)for(b=d+p.length;b<=m;b++)w=this._cells[b-1],_=this._cells[b-g-1],_?(w=this.getCell(b),w.value=_.value,w.style=_.style,w._comment=_._comment):w&&(w.value=null,w.style={},w._comment=void 0);else if(g>0)for(b=m;b>=h;b--)_=this._cells[b-1],_?(w=this.getCell(b+g),w.value=_.value,w.style=_.style,w._comment=_._comment):this._cells[b+g-1]=void 0;for(b=0;b<p.length;b++)w=this.getCell(d+b),w.value=p[b],w.style={},w._comment=void 0}eachCell(d,c){if(c||(c=d,d=null),d&&d.includeEmpty){const h=this._cells.length;for(let u=1;u<=h;u++)c(this.getCell(u),u)}else this._cells.forEach((h,u)=>{h&&h.type!==r.ValueType.Null&&c(h,u+1)})}addPageBreak(d,c){const h=this._worksheet,u=Math.max(0,d-1)||0,p=Math.max(0,c-1)||16838,f={id:this._number,max:p,man:1};u&&(f.min=u),h.rowBreaks.push(f)}get values(){const d=[];return this._cells.forEach(c=>{c&&c.type!==r.ValueType.Null&&(d[c.col]=c.value)}),d}set values(d){if(this._cells=[],d)if(d instanceof Array){let c=0;d.hasOwnProperty("0")&&(c=1),d.forEach((h,u)=>{h!==void 0&&(this.getCellEx({address:a.encodeAddress(this._number,u+c),row:this._number,col:u+c}).value=h)})}else this._worksheet.eachColumnKey((c,h)=>{d[h]!==void 0&&(this.getCellEx({address:a.encodeAddress(this._number,c.number),row:this._number,col:c.number}).value=d[h])})}get hasValues(){return o.some(this._cells,d=>d&&d.type!==r.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let d=0;return this.eachCell(()=>{d++}),d}get dimensions(){let d=0,c=0;return this._cells.forEach(h=>{h&&h.type!==r.ValueType.Null&&((!d||d>h.col)&&(d=h.col),c<h.col&&(c=h.col))}),d>0?{min:d,max:c}:null}_applyStyle(d,c){return this.style[d]=c,this._cells.forEach(h=>{h&&(h[d]=c)}),c}get numFmt(){return this.style.numFmt}set numFmt(d){this._applyStyle("numFmt",d)}get font(){return this.style.font}set font(d){this._applyStyle("font",d)}get alignment(){return this.style.alignment}set alignment(d){this._applyStyle("alignment",d)}get protection(){return this.style.protection}set protection(d){this._applyStyle("protection",d)}get border(){return this.style.border}set border(d){this._applyStyle("border",d)}get fill(){return this.style.fill}set fill(d){this._applyStyle("fill",d)}get hidden(){return!!this._hidden}set hidden(d){this._hidden=d}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(d){this._outlineLevel=d}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const d=[];let c=0,h=0;return this._cells.forEach(u=>{if(u){const p=u.model;p&&((!c||c>u.col)&&(c=u.col),h<u.col&&(h=u.col),d.push(p))}}),this.height||d.length?{cells:d,number:this.number,min:c,max:h,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(d){if(d.number!==this._number)throw new Error("Invalid row number in model");let c;this._cells=[],d.cells.forEach(h=>{switch(h.type){case l.Types.Merge:break;default:{let u;if(h.address)u=a.decodeAddress(h.address);else if(c){const{row:p}=c,f=c.col+1;u={row:p,col:f,address:a.encodeAddress(p,f),$col$row:`$${a.n2l(f)}$${p}`}}c=u,this.getCellEx(u).model=h;break}}}),d.height?this.height=d.height:delete this.height,this.hidden=d.hidden,this.outlineLevel=d.outlineLevel||0,this.style=d.style&&JSON.parse(JSON.stringify(d.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,n,s){const o=t("../utils/col-cache");class r{constructor(l,d,c){this.table=l,this.column=d,this.index=c}_set(l,d){this.table.cacheState(),this.column[l]=d}get name(){return this.column.name}set name(l){this._set("name",l)}get filterButton(){return this.column.filterButton}set filterButton(l){this.column.filterButton=l}get style(){return this.column.style}set style(l){this.column.style=l}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(l){this._set("totalsRowLabel",l)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(l){this._set("totalsRowFunction",l)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(l){this._set("totalsRowResult",l)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(l){this._set("totalsRowFormula",l)}}n.exports=class{constructor(a,l){this.worksheet=a,l&&(this.table=l,this.validate(),this.store())}getFormula(a){switch(a.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${a.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${a.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${a.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${a.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${a.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${a.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${a.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${a.name}])`;case"custom":return a.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+a.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:a}=this,l=(g,m,b)=>{g[m]===void 0&&(g[m]=b)};l(a,"headerRow",!0),l(a,"totalsRow",!1),l(a,"style",{}),l(a.style,"theme","TableStyleMedium2"),l(a.style,"showFirstColumn",!1),l(a.style,"showLastColumn",!1),l(a.style,"showRowStripes",!1),l(a.style,"showColumnStripes",!1);const d=(g,m)=>{if(!g)throw new Error(m)};d(a.ref,"Table must have ref"),d(a.columns,"Table must have column definitions"),d(a.rows,"Table must have row definitions"),a.tl=o.decodeAddress(a.ref);const{row:c,col:h}=a.tl;d(c>0,"Table must be on valid row"),d(h>0,"Table must be on valid col");const{width:u,filterHeight:p,tableHeight:f}=this;a.autoFilterRef=o.encode(c,h,c+p-1,h+u-1),a.tableRef=o.encode(c,h,c+f-1,h+u-1),a.columns.forEach((g,m)=>{d(g.name,`Column ${m} must have a name`),m===0?l(g,"totalsRowLabel","Total"):(l(g,"totalsRowFunction","none"),g.totalsRowFormula=this.getFormula(g))})}store(){const a=(p,f)=>{f&&Object.keys(f).forEach(g=>{p[g]=f[g]})},{worksheet:l,table:d}=this,{row:c,col:h}=d.tl;let u=0;if(d.headerRow){const p=l.getRow(c+u++);d.columns.forEach((f,g)=>{const{style:m,name:b}=f,_=p.getCell(h+g);_.value=b,a(_,m)})}if(d.rows.forEach(p=>{const f=l.getRow(c+u++);p.forEach((g,m)=>{const b=f.getCell(h+m);b.value=g,a(b,d.columns[m].style)})}),d.totalsRow){const p=l.getRow(c+u++);d.columns.forEach((f,g)=>{const m=p.getCell(h+g);if(g===0)m.value=f.totalsRowLabel;else{const b=this.getFormula(f);m.value=b?{formula:f.totalsRowFormula,result:f.totalsRowResult}:null}a(m,f.style)})}}load(a){const{table:l}=this,{row:d,col:c}=l.tl;let h=0;if(l.headerRow){const u=a.getRow(d+h++);l.columns.forEach((p,f)=>{u.getCell(c+f).value=p.name})}if(l.rows.forEach(u=>{const p=a.getRow(d+h++);u.forEach((f,g)=>{p.getCell(c+g).value=f})}),l.totalsRow){const u=a.getRow(d+h++);l.columns.forEach((p,f)=>{const g=u.getCell(c+f);f===0?g.value=p.totalsRowLabel:this.getFormula(p)&&(g.value={formula:p.totalsRowFormula,result:p.totalsRowResult})})}}get model(){return this.table}set model(a){this.table=a}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const a=o.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let l=0;l<this._cache.tableHeight;l++){const d=this.worksheet.getRow(a.row+l);for(let c=0;c<this._cache.width;c++)d.getCell(a.col+c).value=null}else{for(let l=this.tableHeight;l<this._cache.tableHeight;l++){const d=this.worksheet.getRow(a.row+l);for(let c=0;c<this._cache.width;c++)d.getCell(a.col+c).value=null}for(let l=0;l<this.tableHeight;l++){const d=this.worksheet.getRow(a.row+l);for(let c=this.width;c<this._cache.width;c++)d.getCell(a.col+c).value=null}}this.store()}addRow(a,l){this.cacheState(),l===void 0?this.table.rows.push(a):this.table.rows.splice(l,0,a)}removeRows(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(a,l)}getColumn(a){const l=this.table.columns[a];return new r(this,l,a)}addColumn(a,l,d){this.cacheState(),d===void 0?(this.table.columns.push(a),this.table.rows.forEach((c,h)=>{c.push(l[h])})):(this.table.columns.splice(d,0,a),this.table.rows.forEach((c,h)=>{c.splice(d,0,l[h])}))}removeColumns(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(a,l),this.table.rows.forEach(d=>{d.splice(a,l)})}_assign(a,l,d){this.cacheState(),a[l]=d}get ref(){return this.table.ref}set ref(a){this._assign(this.table,"ref",a)}get name(){return this.table.name}set name(a){this.table.name=a}get displayName(){return this.table.displyName||this.table.name}set displayNamename(a){this.table.displayName=a}get headerRow(){return this.table.headerRow}set headerRow(a){this._assign(this.table,"headerRow",a)}get totalsRow(){return this.table.totalsRow}set totalsRow(a){this._assign(this.table,"totalsRow",a)}get theme(){return this.table.style.name}set theme(a){this.table.style.name=a}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(a){this.table.style.showFirstColumn=a}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(a){this.table.style.showLastColumn=a}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(a){this.table.style.showRowStripes=a}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(a){this.table.style.showColumnStripes=a}}},{"../utils/col-cache":19}],13:[function(t,n,s){const o=t("./worksheet"),r=t("./defined-names"),a=t("../xlsx/xlsx"),l=t("../csv/csv");n.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new r}get xlsx(){return this._xlsx||(this._xlsx=new a(this)),this._xlsx}get csv(){return this._csv||(this._csv=new l(this)),this._csv}get nextId(){for(let d=1;d<this._worksheets.length;d++)if(!this._worksheets[d])return d;return this._worksheets.length||1}addWorksheet(d,c){const h=this.nextId;c&&(typeof c=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),c={properties:{tabColor:{argb:c}}}):(c.argb||c.theme||c.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),c={properties:{tabColor:c}}));const u=this._worksheets.reduce((g,m)=>(m&&m.orderNo)>g?m.orderNo:g,0),p=Object.assign({},c,{id:h,name:d,orderNo:u+1,workbook:this}),f=new o(p);return this._worksheets[h]=f,f}removeWorksheetEx(d){delete this._worksheets[d.id]}removeWorksheet(d){const c=this.getWorksheet(d);c&&c.destroy()}getWorksheet(d){return d===void 0?this._worksheets.find(Boolean):typeof d=="number"?this._worksheets[d]:typeof d=="string"?this._worksheets.find(c=>c&&c.name===d):void 0}get worksheets(){return this._worksheets.slice(1).sort((d,c)=>d.orderNo-c.orderNo).filter(Boolean)}eachSheet(d){this.worksheets.forEach(c=>{d(c,c.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(d){const c=this.media.length;return this.media.push(Object.assign({},d,{type:"image"})),c}getImage(d){return this.media[d]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(d=>d.model),sheets:this.worksheets.map(d=>d.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(d){this.creator=d.creator,this.lastModifiedBy=d.lastModifiedBy,this.lastPrinted=d.lastPrinted,this.created=d.created,this.modified=d.modified,this.company=d.company,this.manager=d.manager,this.title=d.title,this.subject=d.subject,this.keywords=d.keywords,this.category=d.category,this.description=d.description,this.language=d.language,this.revision=d.revision,this.contentStatus=d.contentStatus,this.properties=d.properties,this.calcProperties=d.calcProperties,this._worksheets=[],d.worksheets.forEach(c=>{const{id:h,name:u,state:p}=c,f=d.sheets&&d.sheets.findIndex(g=>g.id===h);(this._worksheets[h]=new o({id:h,name:u,orderNo:f,state:p,workbook:this})).model=c}),this._definedNames.model=d.definedNames,this.views=d.views,this._themes=d.themes,this.media=d.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,n,s){const o=t("../utils/under-dash"),r=t("../utils/col-cache"),a=t("./range"),l=t("./row"),d=t("./column"),c=t("./enums"),h=t("./image"),u=t("./table"),p=t("./data-validations"),f=t("../utils/encryptor"),{copyStyle:g}=t("../utils/copy-style");n.exports=class{constructor(m){m=m||{},this._workbook=m.workbook,this.id=m.id,this.orderNo=m.orderNo,this.name=m.name,this.state=m.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},m.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!m.pageSetup||!m.pageSetup.fitToWidth&&!m.pageSetup.fitToHeight||m.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},m.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},m.headerFooter),this.dataValidations=new p,this.views=m.views||[],this.autoFilter=m.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(m){if(m===void 0&&(m="sheet"+this.id),this._name!==m){if(typeof m!="string")throw new Error("The name has to be a string.");if(m==="")throw new Error("The name can't be empty.");if(m==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(m))throw new Error(`Worksheet name ${m} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(m))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+m);if(m&&m.length>31&&(console.warn(`Worksheet name ${m} exceeds 31 chars. This will be truncated`),m=m.substring(0,31)),this._workbook._worksheets.find(b=>b&&b.name.toLowerCase()===m.toLowerCase()))throw new Error("Worksheet name already exists: "+m);this._name=m}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const m=new a;return this._rows.forEach(b=>{if(b){const _=b.dimensions;_&&m.expand(b.number,_.min,b.number,_.max)}}),m}get columns(){return this._columns}set columns(m){this._headerRowCount=m.reduce((w,E)=>{const D=(E.header?1:E.headers&&E.headers.length)||0;return Math.max(w,D)},0);let b=1;const _=this._columns=[];m.forEach(w=>{const E=new d(this,b++,!1);_.push(E),E.defn=w})}getColumnKey(m){return this._keys[m]}setColumnKey(m,b){this._keys[m]=b}deleteColumnKey(m){delete this._keys[m]}eachColumnKey(m){o.each(this._keys,m)}getColumn(m){if(typeof m=="string"){const b=this._keys[m];if(b)return b;m=r.l2n(m)}if(this._columns||(this._columns=[]),m>this._columns.length){let b=this._columns.length+1;for(;b<=m;)this._columns.push(new d(this,b++))}return this._columns[m-1]}spliceColumns(m,b){const _=this._rows.length;for(var w=arguments.length,E=new Array(w>2?w-2:0),D=2;D<w;D++)E[D-2]=arguments[D];if(E.length>0)for(let N=0;N<_;N++){const L=[m,b];E.forEach(H=>{L.push(H[N]||null)});const j=this.getRow(N+1);j.splice.apply(j,L)}else this._rows.forEach(N=>{N&&N.splice(m,b)});const B=E.length-b,$=m+b,F=this._columns.length;if(B<0)for(let N=m+E.length;N<=F;N++)this.getColumn(N).defn=this.getColumn(N-B).defn;else if(B>0)for(let N=F;N>=$;N--)this.getColumn(N+B).defn=this.getColumn(N).defn;for(let N=m;N<m+E.length;N++)this.getColumn(N).defn=null;this.workbook.definedNames.spliceColumns(this.name,m,b,E.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let m=0;return this.eachRow(b=>{m=Math.max(m,b.cellCount)}),m}get actualColumnCount(){const m=[];let b=0;return this.eachRow(_=>{_.eachCell(w=>{let{col:E}=w;m[E]||(m[E]=!0,b++)})}),b}_commitRow(){}get _lastRowNumber(){const m=this._rows;let b=m.length;for(;b>0&&m[b-1]===void 0;)b--;return b}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(m){return this._rows[m-1]}findRows(m,b){return this._rows.slice(m-1,m-1+b)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let m=0;return this.eachRow(()=>{m++}),m}getRow(m){let b=this._rows[m-1];return b||(b=this._rows[m-1]=new l(this,m)),b}getRows(m,b){if(b<1)return;const _=[];for(let w=m;w<m+b;w++)_.push(this.getRow(w));return _}addRow(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const _=this._nextRow,w=this.getRow(_);return w.values=m,this._setStyleOption(_,b[0]==="i"?b:"n"),w}addRows(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const _=[];return m.forEach(w=>{_.push(this.addRow(w,b))}),_}insertRow(m,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(m,0,b),this._setStyleOption(m,_),this.getRow(m)}insertRows(m,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(m,0,...b),_!=="n")for(let w=0;w<b.length;w++)_[0]==="o"&&this.findRow(b.length+m+w)!==void 0?this._copyStyle(b.length+m+w,m+w,_[1]==="+"):_[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m+w,_[1]==="+");return this.getRows(m,b.length)}_setStyleOption(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";b[0]==="o"&&this.findRow(m+1)!==void 0?this._copyStyle(m+1,m,b[1]==="+"):b[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m,b[1]==="+")}_copyStyle(m,b){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const w=this.getRow(m),E=this.getRow(b);E.style=g(w.style),w.eachCell({includeEmpty:_},(D,B)=>{E.getCell(B).style=g(D.style)}),E.height=w.height}duplicateRow(m,b){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const w=this._rows[m-1],E=new Array(b).fill(w.values);this.spliceRows(m+1,_?0:b,...E);for(let D=0;D<b;D++){const B=this._rows[m+D];B.style=w.style,B.height=w.height,w.eachCell({includeEmpty:!0},($,F)=>{B.getCell(F).style=$.style})}}spliceRows(m,b){const _=m+b;for(var w=arguments.length,E=new Array(w>2?w-2:0),D=2;D<w;D++)E[D-2]=arguments[D];const B=E.length,$=B-b,F=this._rows.length;let N,L;if($<0)for(m===F&&(this._rows[F-1]=void 0),N=_;N<=F;N++)if(L=this._rows[N-1],L){const j=this.getRow(N+$);j.values=L.values,j.style=L.style,j.height=L.height,L.eachCell({includeEmpty:!0},(H,I)=>{j.getCell(I).style=H.style}),this._rows[N-1]=void 0}else this._rows[N+$-1]=void 0;else if($>0)for(N=F;N>=_;N--)if(L=this._rows[N-1],L){const j=this.getRow(N+$);j.values=L.values,j.style=L.style,j.height=L.height,L.eachCell({includeEmpty:!0},(H,I)=>{if(j.getCell(I).style=H.style,H._value.constructor.name==="MergeValue"){const k=this.getRow(H._row._number+B).getCell(I),S=H._value._master,v=this.getRow(S._row._number+B).getCell(S._column._number);k.merge(v)}})}else this._rows[N+$-1]=void 0;for(N=0;N<B;N++){const j=this.getRow(m+N);j.style={},j.values=E[N]}this.workbook.definedNames.spliceRows(this.name,m,b,B)}eachRow(m,b){if(b||(b=m,m=void 0),m&&m.includeEmpty){const _=this._rows.length;for(let w=1;w<=_;w++)b(this.getRow(w),w)}else this._rows.forEach(_=>{_&&_.hasValues&&b(_,_.number)})}getSheetValues(){const m=[];return this._rows.forEach(b=>{b&&(m[b.number]=b.values)}),m}findCell(m,b){const _=r.getAddress(m,b),w=this._rows[_.row-1];return w?w.findCell(_.col):void 0}getCell(m,b){const _=r.getAddress(m,b);return this.getRow(_.row).getCellEx(_)}mergeCells(){for(var m=arguments.length,b=new Array(m),_=0;_<m;_++)b[_]=arguments[_];const w=new a(b);this._mergeCellsInternal(w)}mergeCellsWithoutStyle(){for(var m=arguments.length,b=new Array(m),_=0;_<m;_++)b[_]=arguments[_];const w=new a(b);this._mergeCellsInternal(w,!0)}_mergeCellsInternal(m,b){o.each(this._merges,w=>{if(w.intersects(m))throw new Error("Cannot merge already merged cells")});const _=this.getCell(m.top,m.left);for(let w=m.top;w<=m.bottom;w++)for(let E=m.left;E<=m.right;E++)(w>m.top||E>m.left)&&this.getCell(w,E).merge(_,b);this._merges[_.address]=m}_unMergeMaster(m){const b=this._merges[m.address];if(b){for(let _=b.top;_<=b.bottom;_++)for(let w=b.left;w<=b.right;w++)this.getCell(_,w).unmerge();delete this._merges[m.address]}}get hasMerges(){return o.some(this._merges,Boolean)}unMergeCells(){for(var m=arguments.length,b=new Array(m),_=0;_<m;_++)b[_]=arguments[_];const w=new a(b);for(let E=w.top;E<=w.bottom;E++)for(let D=w.left;D<=w.right;D++){const B=this.findCell(E,D);B&&(B.type===c.ValueType.Merge?this._unMergeMaster(B.master):this._merges[B.address]&&this._unMergeMaster(B))}}fillFormula(m,b,_){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const E=r.decode(m),{top:D,left:B,bottom:$,right:F}=E,N=F-B+1,L=r.encodeAddress(D,B),j=w==="shared";let H;H=typeof _=="function"?_:Array.isArray(_)?Array.isArray(_[0])?(k,S)=>_[k-D][S-B]:(k,S)=>_[(k-D)*N+(S-B)]:()=>{};let I=!0;for(let k=D;k<=$;k++)for(let S=B;S<=F;S++)I?(this.getCell(k,S).value={shareType:w,formula:b,ref:m,result:H(k,S)},I=!1):this.getCell(k,S).value=j?{sharedFormula:L,result:H(k,S)}:H(k,S)}addImage(m,b){const _={type:"image",imageId:m,range:b};this._media.push(new h(this,_))}getImages(){return this._media.filter(m=>m.type==="image")}addBackgroundImage(m){const b={type:"background",imageId:m};this._media.push(new h(this,b))}getBackgroundImageId(){const m=this._media.find(b=>b.type==="background");return m&&m.imageId}protect(m,b){return new Promise(_=>{this.sheetProtection={sheet:!0},b&&"spinCount"in b&&(b.spinCount=Number.isFinite(b.spinCount)?Math.round(Math.max(0,b.spinCount)):1e5),m&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=f.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=b&&"spinCount"in b?b.spinCount:1e5,this.sheetProtection.hashValue=f.convertPasswordToHash(m,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),b&&(this.sheetProtection=Object.assign(this.sheetProtection,b),!m&&"spinCount"in b&&delete this.sheetProtection.spinCount),_()})}unprotect(){this.sheetProtection=null}addTable(m){const b=new u(this,m);return this.tables[m.name]=b,b}getTable(m){return this.tables[m]}removeTable(m){delete this.tables[m]}getTables(){return Object.values(this.tables)}addConditionalFormatting(m){this.conditionalFormattings.push(m)}removeConditionalFormatting(m){typeof m=="number"?this.conditionalFormattings.splice(m,1):this.conditionalFormattings=m instanceof Function?this.conditionalFormattings.filter(m):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(m){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=m}get model(){const m={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(w=>w.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(w=>w.model),conditionalFormattings:this.conditionalFormattings};m.cols=d.toModel(this.columns);const b=m.rows=[],_=m.dimensions=new a;return this._rows.forEach(w=>{const E=w&&w.model;E&&(_.expand(E.number,E.min,E.number,E.max),b.push(E))}),m.merges=[],o.each(this._merges,w=>{m.merges.push(w.range)}),m}_parseRows(m){this._rows=[],m.rows.forEach(b=>{const _=new l(this,b.number);this._rows[_.number-1]=_,_.model=b})}_parseMergeCells(m){o.each(m.mergeCells,b=>{this.mergeCellsWithoutStyle(b)})}set model(m){this.name=m.name,this._columns=d.fromModel(this,m.cols),this._parseRows(m),this._parseMergeCells(m),this.dataValidations=new p(m.dataValidations),this.properties=m.properties,this.pageSetup=m.pageSetup,this.headerFooter=m.headerFooter,this.views=m.views,this.autoFilter=m.autoFilter,this._media=m.media.map(b=>new h(this,b)),this.sheetProtection=m.sheetProtection,this.tables=m.tables.reduce((b,_)=>{const w=new u;return w.model=_,b[_.name]=w,b},{}),this.conditionalFormattings=m.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,n,s){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const o={Workbook:t("./doc/workbook")},r=t("./doc/enums");Object.keys(r).forEach(a=>{o[a]=r[a]}),n.exports=o},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,n,s){const o=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");s.bufferToString=function(r){return typeof r=="string"?r:o?o.decode(r):r.toString()}},{}],17:[function(t,n,s){const o=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:r}=t("buffer");s.stringToBuffer=function(a){return typeof a!="string"?a:o?r.from(o.encode(a).buffer):r.from(a)}},{buffer:220}],18:[function(t,n,s){const o=t("./under-dash"),r=t("./col-cache");n.exports=class{constructor(a){this.template=a,this.sheets={}}addCell(a){this.addCellEx(r.decodeEx(a))}getCell(a){return this.findCellEx(r.decodeEx(a),!0)}findCell(a){return this.findCellEx(r.decodeEx(a),!1)}findCellAt(a,l,d){const c=this.sheets[a],h=c&&c[l];return h&&h[d]}addCellEx(a){if(a.top)for(let l=a.top;l<=a.bottom;l++)for(let d=a.left;d<=a.right;d++)this.getCellAt(a.sheetName,l,d);else this.findCellEx(a,!0)}getCellEx(a){return this.findCellEx(a,!0)}findCellEx(a,l){const d=this.findSheet(a,l),c=this.findSheetRow(d,a,l);return this.findRowCell(c,a,l)}getCellAt(a,l,d){const c=this.sheets[a]||(this.sheets[a]=[]),h=c[l]||(c[l]=[]);return h[d]||(h[d]={sheetName:a,address:r.n2l(d)+l,row:l,col:d})}removeCellEx(a){const l=this.findSheet(a);if(!l)return;const d=this.findSheetRow(l,a);d&&delete d[a.col]}forEachInSheet(a,l){const d=this.sheets[a];d&&d.forEach((c,h)=>{c&&c.forEach((u,p)=>{u&&l(u,h,p)})})}forEach(a){o.each(this.sheets,(l,d)=>{this.forEachInSheet(d,a)})}map(a){const l=[];return this.forEach(d=>{l.push(a(d))}),l}findSheet(a,l){const d=a.sheetName;return this.sheets[d]?this.sheets[d]:l?this.sheets[d]=[]:void 0}findSheetRow(a,l,d){const{row:c}=l;return a&&a[c]?a[c]:d?a[c]=[]:void 0}findRowCell(a,l,d){const{col:c}=l;return a&&a[c]?a[c]:d?a[c]=this.template?Object.assign(l,JSON.parse(JSON.stringify(this.template))):l:void 0}spliceRows(a,l,d,c){const h=this.sheets[a];if(h){const u=[];for(let p=0;p<c;p++)u.push([]);h.splice(l,d,...u)}}spliceColumns(a,l,d,c){const h=this.sheets[a];if(h){const u=[];for(let p=0;p<c;p++)u.push(null);o.each(h,p=>{p.splice(l,d,...u)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,n,s){const o=/^[A-Z]+\d+$/,r={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:a=>a<=26?1:a<=676?2:3,_fill(a){let l,d,c,h,u,p=1;if(a>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&a>=1){for(;p<=26;)l=this._dictionary[p-1],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=1}if(this._l2nFill<2&&a>=2){for(p=27;p<=702;)d=p-27,c=d%26,h=Math.floor(d/26),l=this._dictionary[h]+this._dictionary[c],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=2}if(this._l2nFill<3&&a>=3){for(p=703;p<=16384;)d=p-703,c=d%26,h=Math.floor(d/26)%26,u=Math.floor(d/676),l=this._dictionary[u]+this._dictionary[h]+this._dictionary[c],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=3}},l2n(a){if(this._l2n[a]||this._fill(a.length),!this._l2n[a])throw new Error("Out of bounds. Invalid column letter: "+a);return this._l2n[a]},n2l(a){if(a<1||a>16384)throw new Error(a+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[a]||this._fill(this._level(a)),this._n2l[a]},_hash:{},validateAddress(a){if(!o.test(a))throw new Error("Invalid Address: "+a);return!0},decodeAddress(a){const l=a.length<5&&this._hash[a];if(l)return l;let d=!1,c="",h=0,u=!1,p="",f=0;for(let m,b=0;b<a.length;b++)if(m=a.charCodeAt(b),!u&&m>=65&&m<=90)d=!0,c+=a[b],h=26*h+m-64;else if(m>=48&&m<=57)u=!0,p+=a[b],f=10*f+m-48;else if(u&&d&&m!==36)break;if(d){if(h>16384)throw new Error("Out of bounds. Invalid column letter: "+c)}else h=void 0;u||(f=void 0);const g={address:a=c+p,col:h,row:f,$col$row:`$${c}$${p}`};return h<=100&&f<=100&&(this._hash[a]=g,this._hash[g.$col$row]=g),g},getAddress(a,l){if(l){const d=this.n2l(l)+a;return this.decodeAddress(d)}return this.decodeAddress(a)},decode(a){const l=a.split(":");if(l.length===2){const d=this.decodeAddress(l[0]),c=this.decodeAddress(l[1]),h={top:Math.min(d.row,c.row),left:Math.min(d.col,c.col),bottom:Math.max(d.row,c.row),right:Math.max(d.col,c.col)};return h.tl=this.n2l(h.left)+h.top,h.br=this.n2l(h.right)+h.bottom,h.dimensions=`${h.tl}:${h.br}`,h}return this.decodeAddress(a)},decodeEx(a){const l=a.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),d=l[1]||l[2],c=l[3],h=c.split(":");if(h.length>1){let p=this.decodeAddress(h[0]),f=this.decodeAddress(h[1]);const g=Math.min(p.row,f.row),m=Math.min(p.col,f.col),b=Math.max(p.row,f.row),_=Math.max(p.col,f.col);return p=this.n2l(m)+g,f=this.n2l(_)+b,{top:g,left:m,bottom:b,right:_,sheetName:d,tl:{address:p,col:m,row:g,$col$row:`$${this.n2l(m)}$${g}`,sheetName:d},br:{address:f,col:_,row:b,$col$row:`$${this.n2l(_)}$${b}`,sheetName:d},dimensions:`${p}:${f}`}}if(c.startsWith("#"))return d?{sheetName:d,error:c}:{error:c};const u=this.decodeAddress(c);return d?{sheetName:d,...u}:u},encodeAddress:(a,l)=>r.n2l(l)+a,encode(){switch(arguments.length){case 2:return r.encodeAddress(arguments[0],arguments[1]);case 4:return`${r.encodeAddress(arguments[0],arguments[1])}:${r.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(a,l){const[d,c,,h,u]=a,[p,f]=l;return p>=d&&p<=h&&f>=c&&f<=u}};n.exports=r},{}],20:[function(t,n,s){const o=(a,l)=>({...a,...l.reduce((d,c)=>(a[c]&&(d[c]={...a[c]}),d),{})}),r=function(a,l,d){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];a[d]&&(l[d]=o(a[d],c))};s.copyStyle=a=>{if(!a)return a;if(l=a,Object.keys(l).length===0)return{};var l;const d={...a};return r(a,d,"font",["color"]),r(a,d,"alignment"),r(a,d,"protection"),a.border&&(r(a,d,"border"),r(a.border,d.border,"top",["color"]),r(a.border,d.border,"left",["color"]),r(a.border,d.border,"bottom",["color"]),r(a.border,d.border,"right",["color"]),r(a.border,d.border,"diagonal",["color"])),a.fill&&(r(a,d,"fill",["fgColor","bgColor","center"]),a.fill.stops&&(d.fill.stops=a.fill.stops.map(c=>o(c,["color"])))),d}},{}],21:[function(t,n,s){(function(o){(function(){const r=t("crypto"),a={hash(l){const d=r.createHash(l);for(var c=arguments.length,h=new Array(c>1?c-1:0),u=1;u<c;u++)h[u-1]=arguments[u];return d.update(o.concat(h)),d.digest()},convertPasswordToHash(l,d,c,h){if(d=d.toLowerCase(),r.getHashes().indexOf(d)<0)throw new Error(`Hash algorithm '${d}' not supported!`);const u=o.from(l,"utf16le");let p=this.hash(d,o.from(c,"base64"),u);for(let f=0;f<h;f++){const g=o.alloc(4);g.writeUInt32LE(f,0),p=this.hash(d,p,g)}return p.toString("base64")},randomBytes:l=>r.randomBytes(l)};n.exports=a}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,n,s){const{SaxesParser:o}=t("saxes"),{PassThrough:r}=t("readable-stream"),{bufferToString:a}=t("./browser-buffer-decode");n.exports=async function*(l){l.pipe&&!l[Symbol.asyncIterator]&&(l=l.pipe(new r));const d=new o;let c;d.on("error",u=>{c=u});let h=[];d.on("opentag",u=>h.push({eventType:"opentag",value:u})),d.on("text",u=>h.push({eventType:"text",value:u})),d.on("closetag",u=>h.push({eventType:"closetag",value:u}));for await(const u of l){if(d.write(a(u)),c)throw c;yield h,h=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,n,s){const o=t("./col-cache"),r=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,a=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;n.exports={slideFormula:function(l,d,c){const h=o.decode(d),u=o.decode(c);return l.replace(r,(p,f,g,m,b)=>{if(b)return p;const _=a.exec(m);if(_){const w=_[1],E=_[2].toUpperCase(),D=_[3],B=_[4];if(E.length>3||E.length===3&&E>"XFD")return p;let $=o.l2n(E),F=parseInt(B,10);return w||($+=u.col-h.col),D||(F+=u.row-h.row),(f||"")+(w||"")+o.n2l($)+(D||"")+F}return p})}}},{"./col-cache":19}],24:[function(t,n,s){(function(o,r){(function(){const a=t("readable-stream"),l=t("./utils"),d=t("./string-buf");class c{constructor(m,b){this._data=m,this._encoding=b}get length(){return this.toBuffer().length}copy(m,b,_,w){return this.toBuffer().copy(m,b,_,w)}toBuffer(){return this._buffer||(this._buffer=r.from(this._data,this._encoding)),this._buffer}}class h{constructor(m){this._data=m}get length(){return this._data.length}copy(m,b,_,w){return this._data._buf.copy(m,b,_,w)}toBuffer(){return this._data.toBuffer()}}class u{constructor(m){this._data=m}get length(){return this._data.length}copy(m,b,_,w){this._data.copy(m,b,_,w)}toBuffer(){return this._data}}class p{constructor(m){this.size=m,this.buffer=r.alloc(m),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const m=r.alloc(this.iWrite-this.iRead);return this.buffer.copy(m,0,this.iRead,this.iWrite),m}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(m){let b;return m===0?null:m===void 0||m>=this.length?(b=this.toBuffer(),this.iRead=this.iWrite,b):(b=r.alloc(m),this.buffer.copy(b,0,this.iRead,m),this.iRead+=m,b)}write(m,b,_){const w=Math.min(_,this.size-this.iWrite);return m.copy(this.buffer,this.iWrite,b,b+w),this.iWrite+=w,w}}const f=function(g){g=g||{},this.bufSize=g.bufSize||1048576,this.buffers=[],this.batch=g.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};l.inherits(f,a.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return r.concat(this.buffers.map(g=>g.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const m=this.buffers[this.buffers.length-1];if(!m.full)return m}const g=new p(this.bufSize);return this.buffers.push(g),g},async _pipe(g){await Promise.all(this.pipes.map(function(m){return new Promise(b=>{m.write(g.toBuffer(),()=>{b()})})}))},_writeToBuffers(g){let m=0;const b=g.length;for(;m<b;)m+=this._getWritableBuffer().write(g,m,b-m)},async write(g,m,b){let _;if(m instanceof Function&&(b=m,m="utf8"),b=b||l.nop,g instanceof d)_=new h(g);else if(g instanceof r)_=new u(g);else{if(!(typeof g=="string"||g instanceof String||g instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");_=new c(g,m)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(_);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(_),o.nextTick(b)):(await this._pipe(_),b());else this.paused||this.emit("data",_.toBuffer()),this._writeToBuffers(_),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(g,m,b){const _=w=>{w?b(w):(this._flush(),this.pipes.forEach(E=>{E.end()}),this.emit("finish"))};g?this.write(g,m,_):_()},read(g){let m;if(g){for(m=[];g&&this.buffers.length&&!this.buffers[0].eod;){const b=this.buffers[0],_=b.read(g);g-=_.length,m.push(_),b.eod&&b.full&&this.buffers.shift()}return r.concat(m)}return m=this.buffers.map(b=>b.toBuffer()).filter(Boolean),this.buffers=[],r.concat(m)},setEncoding(g){this.encoding=g},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(g){this.pipes.push(g),!this.paused&&this.buffers.length&&this.end()},unpipe(g){this.pipes=this.pipes.filter(m=>m!==g)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),n.exports=f}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,n,s){(function(o){(function(){n.exports=class{constructor(r){this._buf=o.alloc(r&&r.size||16384),this._encoding=r&&r.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=o.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(r){r=r||0,this._buffer=void 0,this._inPos=r}_grow(r){let a=2*this._buf.length;for(;a<r;)a*=2;const l=o.alloc(a);this._buf.copy(l,0),this._buf=l}addText(r){this._buffer=void 0;let a=this._inPos+this._buf.write(r,this._inPos,this._encoding);for(;a>=this._buf.length-4;)this._grow(this._inPos+r.length),a=this._inPos+this._buf.write(r,this._inPos,this._encoding);this._inPos=a}addStringBuf(r){r.length&&(this._buffer=void 0,this.length+r.length>this.capacity&&this._grow(this.length+r.length),r._buf.copy(this._buf,this._inPos,0,r.length),this._inPos+=r.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,n,s){const{toString:o}=Object.prototype,r=/["&<>]/,a={each:function(l,d){l&&(Array.isArray(l)?l.forEach(d):Object.keys(l).forEach(c=>{d(l[c],c)}))},some:function(l,d){return!!l&&(Array.isArray(l)?l.some(d):Object.keys(l).some(c=>d(l[c],c)))},every:function(l,d){return!l||(Array.isArray(l)?l.every(d):Object.keys(l).every(c=>d(l[c],c)))},map:function(l,d){return l?Array.isArray(l)?l.map(d):Object.keys(l).map(c=>d(l[c],c)):[]},keyBy:(l,d)=>l.reduce((c,h)=>(c[h[d]]=h,c),{}),isEqual:function(l,d){const c=typeof l,h=typeof d,u=Array.isArray(l),p=Array.isArray(d);let f;if(c!==h)return!1;switch(typeof l){case"object":if(u||p)return!(!u||!p)&&l.length===d.length&&l.every((g,m)=>{const b=d[m];return a.isEqual(g,b)});if(l===null||d===null)return l===d;if(f=Object.keys(l),Object.keys(d).length!==f.length)return!1;for(const g of f)if(!d.hasOwnProperty(g))return!1;return a.every(l,(g,m)=>{const b=d[m];return a.isEqual(g,b)});default:return l===d}},escapeHtml(l){const d=r.exec(l);if(!d)return l;let c="",h="",u=0,p=d.index;for(;p<l.length;p++){switch(l.charAt(p)){case'"':h="&quot;";break;case"&":h="&amp;";break;case"'":h="&apos;";break;case"<":h="&lt;";break;case">":h="&gt;";break;default:continue}u!==p&&(c+=l.substring(u,p)),u=p+1,c+=h}return u!==p?c+l.substring(u,p):c},strcmp:(l,d)=>l<d?-1:l>d?1:0,isUndefined:l=>o.call(l)==="[object Undefined]",isObject:l=>o.call(l)==="[object Object]",deepMerge(){const l=arguments[0]||{},{length:d}=arguments;let c,h,u;function p(f,g){c=l[g],u=Array.isArray(f),a.isObject(f)||u?(u?(u=!1,h=c&&Array.isArray(c)?c:[]):h=c&&a.isObject(c)?c:{},l[g]=a.deepMerge(h,f)):a.isUndefined(f)||(l[g]=f)}for(let f=0;f<d;f++)a.each(arguments[f],p);return l}};n.exports=a},{}],27:[function(t,n,s){(function(o,r){(function(){const a=t("fs"),l=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,d={nop(){},promiseImmediate:c=>new Promise(h=>{o.setImmediate?r(()=>{h(c)}):setTimeout(()=>{h(c)},1)}),inherits:function(c,h,u,p){c.super_=h,p||(p=u,u=null),u&&Object.keys(u).forEach(g=>{Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(u,g))});const f={constructor:{value:c,enumerable:!1,writable:!1,configurable:!0}};p&&Object.keys(p).forEach(g=>{f[g]=Object.getOwnPropertyDescriptor(p,g)}),c.prototype=Object.create(h.prototype,f)},dateToExcel:(c,h)=>25569+c.getTime()/864e5-(h?1462:0),excelToDate(c,h){const u=Math.round(24*(c-25569+(h?1462:0))*3600*1e3);return new Date(u)},parsePath(c){const h=c.lastIndexOf("/");return{path:c.substring(0,h),name:c.substring(h+1)}},getRelsPath(c){const h=d.parsePath(c);return`${h.path}/_rels/${h.name}.rels`},xmlEncode(c){const h=l.exec(c);if(!h)return c;let u="",p="",f=0,g=h.index;for(;g<c.length;g++){const m=c.charCodeAt(g);switch(m){case 34:p="&quot;";break;case 38:p="&amp;";break;case 39:p="&apos;";break;case 60:p="&lt;";break;case 62:p="&gt;";break;case 127:p="";break;default:if(m<=31&&(m<=8||m>=11&&m!==13)){p="";break}continue}f!==g&&(u+=c.substring(f,g)),f=g+1,p&&(u+=p)}return f!==g?u+c.substring(f,g):u},xmlDecode:c=>c.replace(/&([a-z]*);/g,h=>{switch(h){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return h}}),validInt(c){const h=parseInt(c,10);return Number.isNaN(h)?0:h},isDateFmt(c){return c?(c=(c=c.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:c=>new Promise(h=>{a.access(c,a.constants.F_OK,u=>{h(!u)})})},toIsoDateString:c=>c.toIsoString().subsstr(0,10),parseBoolean:c=>c===!0||c==="true"||c===1||c==="1"};n.exports=d}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,n,s){const o=t("./under-dash"),r=t("./utils");function a(c,h,u){c.push(` ${h}="${r.xmlEncode(u.toString())}"`)}function l(c,h){if(h){const u=[];o.each(h,(p,f)=>{p!==void 0&&a(u,f,p)}),c.push(u.join(""))}}class d{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(h){const u=this._xml;u.push("<?xml"),l(u,h),u.push(`?>
`)}openNode(h,u){const p=this.tos,f=this._xml;p&&this.open&&f.push(">"),this._stack.push(h),f.push("<"),f.push(h),l(f,u),this.leaf=!0,this.open=!0}addAttribute(h,u){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");u!==void 0&&a(this._xml,h,u)}addAttributes(h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");l(this._xml,h)}writeText(h){const u=this._xml;this.open&&(u.push(">"),this.open=!1),this.leaf=!1,u.push(r.xmlEncode(h.toString()))}writeXml(h){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(h)}closeNode(){const h=this._stack.pop(),u=this._xml;this.leaf?u.push("/>"):(u.push("</"),u.push(h),u.push(">")),this.open=!1,this.leaf=!1}leafNode(h,u,p){this.openNode(h,u),p!==void 0&&this.writeText(p),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const h=this._rollbacks.pop();this._xml.length>h.xml&&this._xml.splice(h.xml,this._xml.length-h.xml),this._stack.length>h.stack&&this._stack.splice(h.stack,this._stack.length-h.stack),this.leaf=h.leaf,this.open=h.open}get xml(){return this.closeAll(),this._xml.join("")}}d.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},n.exports=d},{"./under-dash":26,"./utils":27}],29:[function(t,n,s){(function(o){(function(){const r=t("events"),a=t("jszip"),l=t("./stream-buf"),{stringToBuffer:d}=t("./browser-buffer-encode");class c extends r.EventEmitter{constructor(u){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},u),this.zip=new a,this.stream=new l}append(u,p){p.hasOwnProperty("base64")&&p.base64?this.zip.file(p.name,u,{base64:!0}):(o.browser&&typeof u=="string"&&(u=d(u)),this.zip.file(p.name,u))}async finalize(){const u=await this.zip.generateAsync(this.options);this.stream.end(u),this.emit("finish")}read(u){return this.stream.read(u)}setEncoding(u){return this.stream.setEncoding(u)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(u,p){return this.stream.pipe(u,p)}unpipe(u){return this.stream.unpipe(u)}unshift(u){return this.stream.unshift(u)}wrap(u){return this.stream.wrap(u)}}n.exports={ZipWriter:c}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,n,s){n.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},28:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"年"m"月"d"日"',"zh-cn":'yyyy"年"m"月"d"日"',"ja-jp":'yyyy"年"m"月"d"日"',"ko-kr":'yyyy"년" mm"월" dd"일"'},32:{"zh-tw":'hh"時"mm"分"',"zh-cn":'h"时"mm"分"',"ja-jp":'h"時"mm"分"',"ko-kr":'h"시" mm"분"'},33:{"zh-tw":'hh"時"mm"分"ss"秒"',"zh-cn":'h"时"mm"分"ss"秒"',"ja-jp":'h"時"mm"分"ss"秒"',"ko-kr":'h"시" mm"분" ss"초"'},34:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},51:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},52:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'yyyy"年"m"月"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'m"月"d"日"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},55:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},58:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,n,s){n.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,n,s){const o=t("../../utils/parse-sax"),r=t("../../utils/xml-stream");class a{prepare(){}render(){}parseOpen(d){}parseText(d){}parseClose(d){}reconcile(d,c){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(d=>{d instanceof a?d.reset():d.xform&&d.xform.reset()})}mergeModel(d){this.model=Object.assign(this.model||{},d)}async parse(d){for await(const c of d)for(const{eventType:h,value:u}of c)if(h==="opentag")this.parseOpen(u);else if(h==="text")this.parseText(u);else if(h==="closetag"&&!this.parseClose(u.name))return this.model;return this.model}async parseStream(d){return this.parse(o(d))}get xml(){return this.toXml(this.model)}toXml(d){const c=new r;return this.render(c,d),c.xml}static toAttribute(d,c){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(d===void 0){if(h)return c}else if(h||d!==c)return d.toString()}static toStringAttribute(d,c){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(d,c,h)}static toStringValue(d,c){return d===void 0?c:d}static toBoolAttribute(d,c){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(d===void 0){if(h)return c}else if(h||d!==c)return d?"1":"0"}static toBoolValue(d,c){return d===void 0?c:d==="1"}static toIntAttribute(d,c){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(d,c,h)}static toIntValue(d,c){return d===void 0?c:parseInt(d,10)}static toFloatAttribute(d,c){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(d,c,h)}static toFloatValue(d,c){return d===void 0?c:parseFloat(d)}}n.exports=a},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,n,s){const o=t("../base-xform"),r=t("../../../utils/col-cache");function a(d){try{return r.decodeEx(d),!0}catch{return!1}}function l(d){const c=[];let h=!1,u="";return d.split(",").forEach(p=>{if(!p)return;const f=(p.match(/'/g)||[]).length;if(!f)return void(h?u+=p+",":a(p)&&c.push(p));const g=f%2==0;!h&&g&&a(p)?c.push(p):h&&!g?(h=!1,a(u+p)&&c.push(u+p),u=""):(h=!0,u+=p+",")}),c}n.exports=class extends o{render(d,c){d.openNode("definedName",{name:c.name,localSheetId:c.localSheetId}),d.writeText(c.ranges.join(",")),d.closeNode()}parseOpen(d){switch(d.name){case"definedName":return this._parsedName=d.attributes.name,this._parsedLocalSheetId=d.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(d){this._parsedText.push(d)}parseClose(){return this.model={name:this._parsedName,ranges:l(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,n,s){const o=t("../../../utils/utils"),r=t("../base-xform");n.exports=class extends r{render(a,l){a.leafNode("sheet",{sheetId:l.id,name:l.name,state:l.state,"r:id":l.rId})}parseOpen(a){return a.name==="sheet"&&(this.model={name:o.xmlDecode(a.attributes.name),id:parseInt(a.attributes.sheetId,10),state:a.attributes.state,rId:a.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{render(r,a){r.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:a.fullCalcOnLoad?1:void 0})}parseOpen(r){return r.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{render(r,a){r.leafNode("workbookPr",{date1904:a.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(r){return r.name==="workbookPr"&&(this.model={date1904:r.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{render(r,a){const l={xWindow:a.x||0,yWindow:a.y||0,windowWidth:a.width||12e3,windowHeight:a.height||24e3,firstSheet:a.firstSheet,activeTab:a.activeTab};a.visibility&&a.visibility!=="visible"&&(l.visibility=a.visibility),r.leafNode("workbookView",l)}parseOpen(r){if(r.name==="workbookView"){const a=this.model={},l=function(c,h,u){const p=h!==void 0?a[c]=h:u;p!==void 0&&(a[c]=p)},d=function(c,h,u){const p=h!==void 0?a[c]=parseInt(h,10):u;p!==void 0&&(a[c]=p)};return d("x",r.attributes.xWindow,0),d("y",r.attributes.yWindow,0),d("width",r.attributes.windowWidth,25e3),d("height",r.attributes.windowHeight,1e4),l("visibility",r.attributes.visibility,"visible"),d("activeTab",r.attributes.activeTab,void 0),d("firstSheet",r.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../../../utils/col-cache"),a=t("../../../utils/xml-stream"),l=t("../base-xform"),d=t("../static-xform"),c=t("../list-xform"),h=t("./defined-name-xform"),u=t("./sheet-xform"),p=t("./workbook-view-xform"),f=t("./workbook-properties-xform"),g=t("./workbook-calc-properties-xform");class m extends l{constructor(){super(),this.map={fileVersion:m.STATIC_XFORMS.fileVersion,workbookPr:new f,bookViews:new c({tag:"bookViews",count:!1,childXform:new p}),sheets:new c({tag:"sheets",count:!1,childXform:new u}),definedNames:new c({tag:"definedNames",count:!1,childXform:new h}),calcPr:new g}}prepare(_){_.sheets=_.worksheets;const w=[];let E=0;_.sheets.forEach(D=>{if(D.pageSetup&&D.pageSetup.printArea&&D.pageSetup.printArea.split("&&").forEach(B=>{const $=B.split(":"),F={name:"_xlnm.Print_Area",ranges:[`'${D.name}'!$${$[0]}:$${$[1]}`],localSheetId:E};w.push(F)}),D.pageSetup&&(D.pageSetup.printTitlesRow||D.pageSetup.printTitlesColumn)){const B=[];if(D.pageSetup.printTitlesColumn){const F=D.pageSetup.printTitlesColumn.split(":");B.push(`'${D.name}'!$${F[0]}:$${F[1]}`)}if(D.pageSetup.printTitlesRow){const F=D.pageSetup.printTitlesRow.split(":");B.push(`'${D.name}'!$${F[0]}:$${F[1]}`)}const $={name:"_xlnm.Print_Titles",ranges:B,localSheetId:E};w.push($)}E++}),w.length&&(_.definedNames=_.definedNames.concat(w)),(_.media||[]).forEach((D,B)=>{D.name=D.type+(B+1)})}render(_,w){_.openXml(a.StdDocAttributes),_.openNode("workbook",m.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(_),this.map.workbookPr.render(_,w.properties),this.map.bookViews.render(_,w.views),this.map.sheets.render(_,w.sheets),this.map.definedNames.render(_,w.definedNames),this.map.calcPr.render(_,w.calcProperties),_.closeNode()}parseOpen(_){if(this.parser)return this.parser.parseOpen(_),!0;switch(_.name){case"workbook":return!0;default:return this.parser=this.map[_.name],this.parser&&this.parser.parseOpen(_),!0}}parseText(_){this.parser&&this.parser.parseText(_)}parseClose(_){if(this.parser)return this.parser.parseClose(_)||(this.parser=void 0),!0;switch(_){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(_){const w=(_.workbookRels||[]).reduce((F,N)=>(F[N.Id]=N,F),{}),E=[];let D,B=0;(_.sheets||[]).forEach(F=>{const N=w[F.rId];N&&(D=_.worksheetHash["xl/"+N.Target.replace(/^(\s|\/xl\/)+/,"")],D&&(D.name=F.name,D.id=F.id,D.state=F.state,E[B++]=D))});const $=[];o.each(_.definedNames,F=>{if(F.name==="_xlnm.Print_Area"){if(D=E[F.localSheetId],D){D.pageSetup||(D.pageSetup={});const N=r.decodeEx(F.ranges[0]);D.pageSetup.printArea=D.pageSetup.printArea?`${D.pageSetup.printArea}&&${N.dimensions}`:N.dimensions}}else if(F.name==="_xlnm.Print_Titles"){if(D=E[F.localSheetId],D){D.pageSetup||(D.pageSetup={});const N=F.ranges.join(","),L=/\$/g,j=/\$\d+:\$\d+/,H=N.match(j);if(H&&H.length){const S=H[0];D.pageSetup.printTitlesRow=S.replace(L,"")}const I=/\$[A-Z]+:\$[A-Z]+/,k=N.match(I);if(k&&k.length){const S=k[0];D.pageSetup.printTitlesColumn=S.replace(L,"")}}}else $.push(F)}),_.definedNames=$,_.media.forEach((F,N)=>{F.index=N})}}m.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},m.STATIC_XFORMS={fileVersion:new d({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},n.exports=m},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,n,s){const o=t("../strings/rich-text-xform"),r=t("../../../utils/utils"),a=t("../base-xform"),l=n.exports=function(d){this.model=d};r.inherits(l,a,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new o),this._richTextXform},render(d,c){c=c||this.model,d.openNode("comment",{ref:c.ref,authorId:0}),d.openNode("text"),c&&c.note&&c.note.texts&&c.note.texts.forEach(h=>{this.richTextXform.render(d,h)}),d.closeNode(),d.closeNode()},parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"comment":return this.model={type:"note",note:{texts:[]},...d.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(d),!0;default:return!1}},parseText(d){this.parser&&this.parser.parseText(d)},parseClose(d){switch(d){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(d),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../../../utils/utils"),a=t("../base-xform"),l=t("./comment-xform"),d=n.exports=function(){this.map={comment:new l}};r.inherits(d,a,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(c,h){h=h||this.model,c.openXml(o.StdDocAttributes),c.openNode("comments",d.COMMENTS_ATTRIBUTES),c.openNode("authors"),c.leafNode("author",null,"Author"),c.closeNode(),c.openNode("commentList"),h.comments.forEach(u=>{this.map.comment.render(c,u)}),c.closeNode(),c.closeNode()},parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(c),!0;default:return!1}},parseText(c){this.parser&&this.parser.parseText(c)},parseClose(c){switch(c){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,a,l){(a===l[2]||this.tag==="x:SizeWithCells"&&a===l[1])&&r.leafNode(this.tag)}parseOpen(r){switch(r.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,a){r.leafNode(this.tag,null,a)}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"x:Anchor"}getAnchorRect(r){const a=Math.floor(r.left),l=Math.floor(68*(r.left-a)),d=Math.floor(r.top),c=Math.floor(18*(r.top-d)),h=Math.floor(r.right),u=Math.floor(68*(r.right-h)),p=Math.floor(r.bottom);return[a,l,d,c,h,u,p,Math.floor(18*(r.bottom-p))]}getDefaultRect(r){const a=r.col,l=Math.max(r.row-2,0);return[a,6,l,14,a+2,2,l+4,16]}render(r,a){const l=a.anchor?this.getAnchorRect(a.anchor):this.getDefaultRect(a.refAddress);r.leafNode("x:Anchor",null,l.join(", "))}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,n,s){const o=t("../base-xform"),r=t("./vml-anchor-xform"),a=t("./style/vml-protection-xform"),l=t("./style/vml-position-xform"),d=["twoCells","oneCells","absolute"];n.exports=class extends o{constructor(){super(),this.map={"x:Anchor":new r,"x:Locked":new a({tag:"x:Locked"}),"x:LockText":new a({tag:"x:LockText"}),"x:SizeWithCells":new l({tag:"x:SizeWithCells"}),"x:MoveWithCells":new l({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(c,h){const{protection:u,editAs:p}=h.note;c.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(c,p,d),this.map["x:SizeWithCells"].render(c,p,d),this.map["x:Anchor"].render(c,h),this.map["x:Locked"].render(c,u.locked),c.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(c,u.lockText),c.leafNode("x:Row",null,h.refAddress.row-1),c.leafNode("x:Column",null,h.refAddress.col-1),c.closeNode()}parseOpen(c){switch(c.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const c=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),h=Object.keys(c).length;this.model.editAs=d[h],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),a=t("./vml-shape-xform");class l extends r{constructor(){super(),this.map={"v:shape":new a}}get tag(){return"xml"}render(c,h){c.openXml(o.StdDocAttributes),c.openNode(this.tag,l.DRAWING_ATTRIBUTES),c.openNode("o:shapelayout",{"v:ext":"edit"}),c.leafNode("o:idmap",{"v:ext":"edit",data:1}),c.closeNode(),c.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),c.leafNode("v:stroke",{joinstyle:"miter"}),c.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),c.closeNode(),h.comments.forEach((u,p)=>{this.map["v:shape"].render(c,u,p)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}reconcile(c,h){c.anchors.forEach(u=>{u.br?this.map["xdr:twoCellAnchor"].reconcile(u,h):this.map["xdr:oneCellAnchor"].reconcile(u,h)})}}l.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,n,s){const o=t("../base-xform"),r=t("./vml-textbox-xform"),a=t("./vml-client-data-xform");class l extends o{constructor(){super(),this.map={"v:textbox":new r,"x:ClientData":new a}}get tag(){return"v:shape"}render(c,h,u){c.openNode("v:shape",l.V_SHAPE_ATTRIBUTES(h,u)),c.leafNode("v:fill",{color2:"infoBackground [80]"}),c.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),c.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(c,h),this.map["x:ClientData"].render(c,h),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={margins:{insetmode:c.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}l.V_SHAPE_ATTRIBUTES=(d,c)=>({id:"_x0000_s"+(1025+c),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":d.note.margins&&d.note.margins.insetmode}),n.exports=l},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"v:textbox"}conversionUnit(r,a,l){return`${parseFloat(r)*a.toFixed(2)}${l}`}reverseConversionUnit(r){return(r||"").split(",").map(a=>Number(parseFloat(this.conversionUnit(parseFloat(a),.1,"")).toFixed(2)))}render(r,a){const l={style:"mso-direction-alt:auto"};if(a&&a.note){let{inset:d}=a.note&&a.note.margins;Array.isArray(d)&&(d=d.map(c=>this.conversionUnit(c,10,"mm")).join(",")),d&&(l.inset=d)}r.openNode("v:textbox",l),r.leafNode("div",{style:"text-align:left"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:return this.model={inset:this.reverseConversionUnit(r.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,n,s){const o=t("./base-xform");n.exports=class extends o{createNewModel(r){return{}}parseOpen(r){return this.parser=this.parser||this.map[r.name],this.parser?(this.parser.parseOpen(r),!0):r.name===this.tag&&(this.model=this.createNewModel(r),!0)}parseText(r){this.parser&&this.parser.parseText(r)}onParserClose(r,a){this.model[r]=a.model}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.onParserClose(r,this.parser),this.parser=void 0),!0):r!==this.tag}}},{"./base-xform":32}],49:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{render(r,a){r.openNode("HeadingPairs"),r.openNode("vt:vector",{size:2,baseType:"variant"}),r.openNode("vt:variant"),r.leafNode("vt:lpstr",void 0,"Worksheets"),r.closeNode(),r.openNode("vt:variant"),r.leafNode("vt:i4",void 0,a.length),r.closeNode(),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="HeadingPairs"}parseText(){}parseClose(r){return r!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{render(r,a){r.openNode("TitlesOfParts"),r.openNode("vt:vector",{size:a.length,baseType:"lpstr"}),a.forEach(l=>{r.leafNode("vt:lpstr",void 0,l.name)}),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="TitlesOfParts"}parseText(){}parseClose(r){return r!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),a=t("../simple/string-xform"),l=t("./app-heading-pairs-xform"),d=t("./app-titles-of-parts-xform");class c extends r{constructor(){super(),this.map={Company:new a({tag:"Company"}),Manager:new a({tag:"Manager"}),HeadingPairs:new l,TitleOfParts:new d}}render(u,p){u.openXml(o.StdDocAttributes),u.openNode("Properties",c.PROPERTY_ATTRIBUTES),u.leafNode("Application",void 0,"Microsoft Excel"),u.leafNode("DocSecurity",void 0,"0"),u.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(u,p.worksheets),this.map.TitleOfParts.render(u,p.worksheets),this.map.Company.render(u,p.company||""),this.map.Manager.render(u,p.manager),u.leafNode("LinksUpToDate",void 0,"false"),u.leafNode("SharedDoc",void 0,"false"),u.leafNode("HyperlinksChanged",void 0,"false"),u.leafNode("AppVersion",void 0,"16.0300"),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Properties":return!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}c.DateFormat=function(h){return h.toISOString().replace(/[.]\d{3,6}/,"")},c.DateAttrs={"xsi:type":"dcterms:W3CDTF"},c.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},n.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform");class a extends r{render(d,c){d.openXml(o.StdDocAttributes),d.openNode("Types",a.PROPERTY_ATTRIBUTES);const h={};(c.media||[]).forEach(u=>{if(u.type==="image"){const p=u.extension;h[p]||(h[p]=!0,d.leafNode("Default",{Extension:p,ContentType:"image/"+p}))}}),d.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),d.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),d.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),c.worksheets.forEach(u=>{const p=`/xl/worksheets/sheet${u.id}.xml`;d.leafNode("Override",{PartName:p,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),d.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),d.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),c.sharedStrings&&c.sharedStrings.count&&d.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),c.tables&&c.tables.forEach(u=>{d.leafNode("Override",{PartName:"/xl/tables/"+u.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),c.drawings&&c.drawings.forEach(u=>{d.leafNode("Override",{PartName:`/xl/drawings/${u.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),c.commentRefs&&(d.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),c.commentRefs.forEach(u=>{let{commentName:p}=u;d.leafNode("Override",{PartName:`/xl/${p}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),d.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),d.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),d.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}a.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},n.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),a=t("../simple/date-xform"),l=t("../simple/string-xform"),d=t("../simple/integer-xform");class c extends r{constructor(){super(),this.map={"dc:creator":new l({tag:"dc:creator"}),"dc:title":new l({tag:"dc:title"}),"dc:subject":new l({tag:"dc:subject"}),"dc:description":new l({tag:"dc:description"}),"dc:identifier":new l({tag:"dc:identifier"}),"dc:language":new l({tag:"dc:language"}),"cp:keywords":new l({tag:"cp:keywords"}),"cp:category":new l({tag:"cp:category"}),"cp:lastModifiedBy":new l({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new a({tag:"cp:lastPrinted",format:c.DateFormat}),"cp:revision":new d({tag:"cp:revision"}),"cp:version":new l({tag:"cp:version"}),"cp:contentStatus":new l({tag:"cp:contentStatus"}),"cp:contentType":new l({tag:"cp:contentType"}),"dcterms:created":new a({tag:"dcterms:created",attrs:c.DateAttrs,format:c.DateFormat}),"dcterms:modified":new a({tag:"dcterms:modified",attrs:c.DateAttrs,format:c.DateFormat})}}render(u,p){u.openXml(o.StdDocAttributes),u.openNode("cp:coreProperties",c.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(u,p.creator),this.map["dc:title"].render(u,p.title),this.map["dc:subject"].render(u,p.subject),this.map["dc:description"].render(u,p.description),this.map["dc:identifier"].render(u,p.identifier),this.map["dc:language"].render(u,p.language),this.map["cp:keywords"].render(u,p.keywords),this.map["cp:category"].render(u,p.category),this.map["cp:lastModifiedBy"].render(u,p.lastModifiedBy),this.map["cp:lastPrinted"].render(u,p.lastPrinted),this.map["cp:revision"].render(u,p.revision),this.map["cp:version"].render(u,p.version),this.map["cp:contentStatus"].render(u,p.contentStatus),this.map["cp:contentType"].render(u,p.contentType),this.map["dcterms:created"].render(u,p.created),this.map["dcterms:modified"].render(u,p.modified),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}c.DateFormat=function(h){return h.toISOString().replace(/[.]\d{3}/,"")},c.DateAttrs={"xsi:type":"dcterms:W3CDTF"},c.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},n.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{render(r,a){r.leafNode("Relationship",a)}parseOpen(r){switch(r.name){case"Relationship":return this.model=r.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),a=t("./relationship-xform");class l extends r{constructor(){super(),this.map={Relationship:new a}}render(c,h){h=h||this._values,c.openXml(o.StdDocAttributes),c.openNode("Relationships",l.RELATIONSHIPS_ATTRIBUTES),h.forEach(u=>{this.map.Relationship.render(c,u)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[c.name],this.parser)return this.parser.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(c){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}l.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset(),this.model={range:{editAs:r.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(r){this.parser&&this.parser.parseText(r)}reconcilePicture(r,a){if(r&&r.rId){const l=a.rels[r.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(l){const d=l[1],c=a.mediaIndex[d];return a.media[c]}}}}},{"../base-xform":32}],57:[function(t,n,s){const o=t("../base-xform"),r=t("./blip-xform");n.exports=class extends o{constructor(){super(),this.map={"a:blip":new r}}get tag(){return"xdr:blipFill"}render(a,l){a.openNode(this.tag),this.map["a:blip"].render(a,l),a.openNode("a:stretch"),a.leafNode("a:fillRect"),a.closeNode(),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"a:blip"}render(r,a){r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":a.rId,cstate:"print"})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"xdr:cNvPicPr"}render(r){r.openNode(this.tag),r.leafNode("a:picLocks",{noChangeAspect:"1"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,n,s){const o=t("../base-xform"),r=t("./hlink-click-xform"),a=t("./ext-lst-xform");n.exports=class extends o{constructor(){super(),this.map={"a:hlinkClick":new r,"a:extLst":new a}}get tag(){return"xdr:cNvPr"}render(l,d){l.openNode(this.tag,{id:d.index,name:"Picture "+d.index}),this.map["a:hlinkClick"].render(l,d),this.map["a:extLst"].render(l,d),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,n,s){const o=t("../base-xform"),r=t("../simple/integer-xform");n.exports=class extends o{constructor(a){super(),this.tag=a.tag,this.map={"xdr:col":new r({tag:"xdr:col",zero:!0}),"xdr:colOff":new r({tag:"xdr:colOff",zero:!0}),"xdr:row":new r({tag:"xdr:row",zero:!0}),"xdr:rowOff":new r({tag:"xdr:rowOff",zero:!0})}}render(a,l){a.openNode(this.tag),this.map["xdr:col"].render(a,l.nativeCol),this.map["xdr:colOff"].render(a,l.nativeColOff),this.map["xdr:row"].render(a,l.nativeRow),this.map["xdr:rowOff"].render(a,l.nativeRowOff),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,n,s){const o=t("../../../utils/col-cache"),r=t("../../../utils/xml-stream"),a=t("../base-xform"),l=t("./two-cell-anchor-xform"),d=t("./one-cell-anchor-xform");class c extends a{constructor(){super(),this.map={"xdr:twoCellAnchor":new l,"xdr:oneCellAnchor":new d}}prepare(u){u.anchors.forEach((p,f)=>{p.anchorType=function(g){return(typeof g.range=="string"?o.decode(g.range):g.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(p),this.map[p.anchorType].prepare(p,{index:f})})}get tag(){return"xdr:wsDr"}render(u,p){u.openXml(r.StdDocAttributes),u.openNode(this.tag,c.DRAWING_ATTRIBUTES),p.anchors.forEach(f=>{this.map[f.anchorType].render(u,f)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,p){u.anchors.forEach(f=>{f.br?this.map["xdr:twoCellAnchor"].reconcile(f,p):this.map["xdr:oneCellAnchor"].reconcile(f,p)})}}c.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},n.exports=c},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"a:extLst"}render(r){r.openNode(this.tag),r.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),r.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),r.closeNode(),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.map={}}render(r,a){r.openNode(this.tag);const l=Math.floor(9525*a.width),d=Math.floor(9525*a.height);r.addAttribute("cx",l),r.addAttribute("cy",d),r.closeNode()}parseOpen(r){return r.name===this.tag&&(this.model={width:parseInt(r.attributes.cx||"0",10)/9525,height:parseInt(r.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"a:hlinkClick"}render(r,a){a.hyperlinks&&a.hyperlinks.rId&&r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":a.hyperlinks.rId,tooltip:a.hyperlinks.tooltip})}parseOpen(r){switch(r.name){case this.tag:return this.model={hyperlinks:{rId:r.attributes["r:id"],tooltip:r.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,n,s){const o=t("../base-xform"),r=t("./c-nv-pr-xform"),a=t("./c-nv-pic-pr-xform");n.exports=class extends o{constructor(){super(),this.map={"xdr:cNvPr":new r,"xdr:cNvPicPr":new a}}get tag(){return"xdr:nvPicPr"}render(l,d){l.openNode(this.tag),this.map["xdr:cNvPr"].render(l,d),this.map["xdr:cNvPicPr"].render(l,d),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,n,s){const o=t("./base-cell-anchor-xform"),r=t("../static-xform"),a=t("./cell-position-xform"),l=t("./ext-xform"),d=t("./pic-xform");n.exports=class extends o{constructor(){super(),this.map={"xdr:from":new a({tag:"xdr:from"}),"xdr:ext":new l({tag:"xdr:ext"}),"xdr:pic":new d,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(c,h){this.map["xdr:pic"].prepare(c.picture,h)}render(c,h){c.openNode(this.tag,{editAs:h.range.editAs||"oneCell"}),this.map["xdr:from"].render(c,h.range.tl),this.map["xdr:ext"].render(c,h.range.ext),this.map["xdr:pic"].render(c,h.picture),this.map["xdr:clientData"].render(c,{}),c.closeNode()}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(c,h){c.medium=this.reconcilePicture(c.picture,h)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,n,s){const o=t("../base-xform"),r=t("../static-xform"),a=t("./blip-fill-xform"),l=t("./nv-pic-pr-xform"),d=t("./sp-pr");n.exports=class extends o{constructor(){super(),this.map={"xdr:nvPicPr":new l,"xdr:blipFill":new a,"xdr:spPr":new r(d)}}get tag(){return"xdr:pic"}prepare(c,h){c.index=h.index+1}render(c,h){c.openNode(this.tag),this.map["xdr:nvPicPr"].render(c,h),this.map["xdr:blipFill"].render(c,h),this.map["xdr:spPr"].render(c,h),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,n,s){n.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,n,s){const o=t("./base-cell-anchor-xform"),r=t("../static-xform"),a=t("./cell-position-xform"),l=t("./pic-xform");n.exports=class extends o{constructor(){super(),this.map={"xdr:from":new a({tag:"xdr:from"}),"xdr:to":new a({tag:"xdr:to"}),"xdr:pic":new l,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(d,c){this.map["xdr:pic"].prepare(d.picture,c)}render(d,c){d.openNode(this.tag,{editAs:c.range.editAs||"oneCell"}),this.map["xdr:from"].render(d,c.range.tl),this.map["xdr:to"].render(d,c.range.br),this.map["xdr:pic"].render(d,c.picture),this.map["xdr:clientData"].render(d,{}),d.closeNode()}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(d,c){d.medium=this.reconcilePicture(d.picture,c)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,n,s){const o=t("./base-xform");n.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.always=!!r.always,this.count=r.count,this.empty=r.empty,this.$count=r.$count||"count",this.$=r.$,this.childXform=r.childXform,this.maxItems=r.maxItems}prepare(r,a){const{childXform:l}=this;r&&r.forEach((d,c)=>{a.index=c,l.prepare(d,a)})}render(r,a){if(this.always||a&&a.length){r.openNode(this.tag,this.$),this.count&&r.addAttribute(this.$count,a&&a.length||0);const{childXform:l}=this;(a||[]).forEach((d,c)=>{l.render(r,d,c)}),r.closeNode()}else this.empty&&r.leafNode(this.tag)}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(r)&&(this.parser=this.childXform,!0)}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(r,a){if(r){const{childXform:l}=this;r.forEach(d=>{l.reconcile(d,a)})}}}},{"./base-xform":32}],72:[function(t,n,s){const o=t("../../../utils/col-cache"),r=t("../base-xform");n.exports=class extends r{get tag(){return"autoFilter"}render(a,l){if(l)if(typeof l=="string")a.leafNode("autoFilter",{ref:l});else{const d=function(u){return typeof u=="string"?u:o.getAddress(u.row,u.column).address},c=d(l.from),h=d(l.to);c&&h&&a.leafNode("autoFilter",{ref:`${c}:${h}`})}}parseOpen(a){a.name==="autoFilter"&&(this.model=a.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,n,s){const o=t("../../../utils/utils"),r=t("../base-xform"),a=t("../../../doc/range"),l=t("../../../doc/enums"),d=t("../strings/rich-text-xform");function c(h){if(h==null)return l.ValueType.Null;if(h instanceof String||typeof h=="string")return l.ValueType.String;if(typeof h=="number")return l.ValueType.Number;if(typeof h=="boolean")return l.ValueType.Boolean;if(h instanceof Date)return l.ValueType.Date;if(h.text&&h.hyperlink)return l.ValueType.Hyperlink;if(h.formula)return l.ValueType.Formula;if(h.error)return l.ValueType.Error;throw new Error("I could not understand type of value")}n.exports=class extends r{constructor(){super(),this.richTextXForm=new d}get tag(){return"c"}prepare(h,u){const p=u.styles.addStyleModel(h.style||{},function(f){switch(f.type){case l.ValueType.Formula:return c(f.result);default:return f.type}}(h));switch(p&&(h.styleId=p),h.comment&&u.comments.push({...h.comment,ref:h.address}),h.type){case l.ValueType.String:case l.ValueType.RichText:u.sharedStrings&&(h.ssId=u.sharedStrings.add(h.value));break;case l.ValueType.Date:u.date1904&&(h.date1904=!0);break;case l.ValueType.Hyperlink:u.sharedStrings&&h.text!==void 0&&h.text!==null&&(h.ssId=u.sharedStrings.add(h.text)),u.hyperlinks.push({address:h.address,target:h.hyperlink,tooltip:h.tooltip});break;case l.ValueType.Merge:u.merges.add(h);break;case l.ValueType.Formula:if(u.date1904&&(h.date1904=!0),h.shareType==="shared"&&(h.si=u.siFormulae++),h.formula)u.formulae[h.address]=h;else if(h.sharedFormula){const f=u.formulae[h.sharedFormula];if(!f)throw new Error("Shared Formula master must exist above and or left of clone for cell "+h.address);f.si===void 0?(f.shareType="shared",f.si=u.siFormulae++,f.range=new a(f.address,h.address)):f.range&&f.range.expandToAddress(h.address),h.si=f.si}}}renderFormula(h,u){let p=null;switch(u.shareType){case"shared":p={t:"shared",ref:u.ref||u.range.range,si:u.si};break;case"array":p={t:"array",ref:u.ref};break;default:u.si!==void 0&&(p={t:"shared",si:u.si})}switch(c(u.result)){case l.ValueType.Null:h.leafNode("f",p,u.formula);break;case l.ValueType.String:h.addAttribute("t","str"),h.leafNode("f",p,u.formula),h.leafNode("v",null,u.result);break;case l.ValueType.Number:h.leafNode("f",p,u.formula),h.leafNode("v",null,u.result);break;case l.ValueType.Boolean:h.addAttribute("t","b"),h.leafNode("f",p,u.formula),h.leafNode("v",null,u.result?1:0);break;case l.ValueType.Error:h.addAttribute("t","e"),h.leafNode("f",p,u.formula),h.leafNode("v",null,u.result.error);break;case l.ValueType.Date:h.leafNode("f",p,u.formula),h.leafNode("v",null,o.dateToExcel(u.result,u.date1904));break;default:throw new Error("I could not understand type of value")}}render(h,u){if(u.type!==l.ValueType.Null||u.styleId){switch(h.openNode("c"),h.addAttribute("r",u.address),u.styleId&&h.addAttribute("s",u.styleId),u.type){case l.ValueType.Null:break;case l.ValueType.Number:h.leafNode("v",null,u.value);break;case l.ValueType.Boolean:h.addAttribute("t","b"),h.leafNode("v",null,u.value?"1":"0");break;case l.ValueType.Error:h.addAttribute("t","e"),h.leafNode("v",null,u.value.error);break;case l.ValueType.String:case l.ValueType.RichText:u.ssId!==void 0?(h.addAttribute("t","s"),h.leafNode("v",null,u.ssId)):u.value&&u.value.richText?(h.addAttribute("t","inlineStr"),h.openNode("is"),u.value.richText.forEach(p=>{this.richTextXForm.render(h,p)}),h.closeNode("is")):(h.addAttribute("t","str"),h.leafNode("v",null,u.value));break;case l.ValueType.Date:h.leafNode("v",null,o.dateToExcel(u.value,u.date1904));break;case l.ValueType.Hyperlink:u.ssId!==void 0?(h.addAttribute("t","s"),h.leafNode("v",null,u.ssId)):(h.addAttribute("t","str"),h.leafNode("v",null,u.text));break;case l.ValueType.Formula:this.renderFormula(h,u);break;case l.ValueType.Merge:}h.closeNode()}}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"c":return this.model={address:h.attributes.r},this.t=h.attributes.t,h.attributes.s&&(this.model.styleId=parseInt(h.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=h.attributes.si,this.model.shareType=h.attributes.t,this.model.ref=h.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){if(this.parser)this.parser.parseText(h);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+h:h;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+h:h:this.model.value=this.model.value?this.model.value+h:h}}parseClose(h){switch(h){case"c":{const{model:u}=this;if(u.formula||u.shareType)u.type=l.ValueType.Formula,u.value&&(this.t==="str"?u.result=o.xmlDecode(u.value):this.t==="b"?u.result=parseInt(u.value,10)!==0:this.t==="e"?u.result={error:u.value}:u.result=parseFloat(u.value),u.value=void 0);else if(u.value!==void 0)switch(this.t){case"s":u.type=l.ValueType.String,u.value=parseInt(u.value,10);break;case"str":u.type=l.ValueType.String,u.value=o.xmlDecode(u.value);break;case"inlineStr":u.type=l.ValueType.String;break;case"b":u.type=l.ValueType.Boolean,u.value=parseInt(u.value,10)!==0;break;case"e":u.type=l.ValueType.Error,u.value={error:u.value};break;default:u.type=l.ValueType.Number,u.value=parseFloat(u.value)}else u.styleId?u.type=l.ValueType.Null:u.type=l.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(h),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(h),!0)}}reconcile(h,u){const p=h.styleId&&u.styles&&u.styles.getStyleModel(h.styleId);switch(p&&(h.style=p),h.styleId!==void 0&&(h.styleId=void 0),h.type){case l.ValueType.String:typeof h.value=="number"&&u.sharedStrings&&(h.value=u.sharedStrings.getString(h.value)),h.value.richText&&(h.type=l.ValueType.RichText);break;case l.ValueType.Number:p&&o.isDateFmt(p.numFmt)&&(h.type=l.ValueType.Date,h.value=o.excelToDate(h.value,u.date1904));break;case l.ValueType.Formula:h.result!==void 0&&p&&o.isDateFmt(p.numFmt)&&(h.result=o.excelToDate(h.result,u.date1904)),h.shareType==="shared"&&(h.ref?u.formulae[h.si]=h.address:(h.sharedFormula=u.formulae[h.si],delete h.shareType),delete h.si)}const f=u.hyperlinkMap[h.address];f&&(h.type===l.ValueType.Formula?(h.text=h.result,h.result=void 0):(h.text=h.value,h.value=void 0),h.type=l.ValueType.Hyperlink,h.hyperlink=f);const g=u.commentsMap&&u.commentsMap[h.address];g&&(h.comment=g)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{get tag(){return"x14:cfIcon"}render(r,a){r.leafNode(this.tag,{iconSet:a.iconSet,iconId:a.iconId})}parseOpen(r){let{attributes:a}=r;this.model={iconSet:a.iconSet,iconId:o.toIntValue(a.iconId)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],75:[function(t,n,s){const{v4:o}=t("uuid"),r=t("../../base-xform"),a=t("../../composite-xform"),l=t("./databar-ext-xform"),d=t("./icon-set-ext-xform"),c={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class h extends a{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new l,"x14:iconSet":this.iconSetXform=new d}}get tag(){return"x14:cfRule"}static isExt(p){return p.type==="dataBar"?l.isExt(p):!(p.type!=="iconSet"||!p.custom&&!c[p.iconSet])}prepare(p){h.isExt(p)&&(p.x14Id=`{${o()}}`.toUpperCase())}render(p,f){if(h.isExt(f))switch(f.type){case"dataBar":this.renderDataBar(p,f);break;case"iconSet":this.renderIconSet(p,f)}}renderDataBar(p,f){p.openNode(this.tag,{type:"dataBar",id:f.x14Id}),this.databarXform.render(p,f),p.closeNode()}renderIconSet(p,f){p.openNode(this.tag,{type:"iconSet",priority:f.priority,id:f.x14Id||`{${o()}}`}),this.iconSetXform.render(p,f),p.closeNode()}createNewModel(p){let{attributes:f}=p;return{type:f.type,x14Id:f.id,priority:r.toIntValue(f.priority)}}onParserClose(p,f){Object.assign(this.model,f.model)}}n.exports=h},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,n,s){const o=t("../../composite-xform"),r=t("./f-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"xm:f":this.fExtXform=new r}}get tag(){return"x14:cfvo"}render(a,l){a.openNode(this.tag,{type:l.type}),l.value!==void 0&&this.fExtXform.render(a,l.value),a.closeNode()}createNewModel(a){return{type:a.attributes.type}}onParserClose(a,l){switch(a){case"xm:f":this.model.value=l.model?parseFloat(l.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,n,s){const o=t("../../composite-xform"),r=t("./sqref-ext-xform"),a=t("./cf-rule-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"xm:sqref":this.sqRef=new r,"x14:cfRule":this.cfRule=new a}}get tag(){return"x14:conditionalFormatting"}prepare(l,d){l.rules.forEach(c=>{this.cfRule.prepare(c,d)})}render(l,d){d.rules.some(a.isExt)&&(l.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),d.rules.filter(a.isExt).forEach(c=>this.cfRule.render(l,c)),this.sqRef.render(l,d.ref),l.closeNode())}createNewModel(){return{rules:[]}}onParserClose(l,d){switch(l){case"xm:sqref":this.model.ref=d.model;break;case"x14:cfRule":this.model.rules.push(d.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,n,s){const o=t("../../composite-xform"),r=t("./cf-rule-ext-xform"),a=t("./conditional-formatting-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new a}}get tag(){return"x14:conditionalFormattings"}hasContent(l){return l.hasExtContent===void 0&&(l.hasExtContent=l.some(d=>d.rules.some(r.isExt))),l.hasExtContent}prepare(l,d){l.forEach(c=>{this.cfXform.prepare(c,d)})}render(l,d){this.hasContent(d)&&(l.openNode(this.tag),d.forEach(c=>this.cfXform.render(l,c)),l.closeNode())}createNewModel(){return[]}onParserClose(l,d){this.model.push(d.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,n,s){const o=t("../../base-xform"),r=t("../../composite-xform"),a=t("../../style/color-xform"),l=t("./cfvo-ext-xform");n.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:borderColor":this.borderColorXform=new a("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new a("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new a("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new a("x14:axisColor")}}static isExt(d){return!d.gradient}get tag(){return"x14:dataBar"}render(d,c){d.openNode(this.tag,{minLength:o.toIntAttribute(c.minLength,0,!0),maxLength:o.toIntAttribute(c.maxLength,100,!0),border:o.toBoolAttribute(c.border,!1),gradient:o.toBoolAttribute(c.gradient,!0),negativeBarColorSameAsPositive:o.toBoolAttribute(c.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:o.toBoolAttribute(c.negativeBarBorderColorSameAsPositive,!0),axisPosition:o.toAttribute(c.axisPosition,"auto"),direction:o.toAttribute(c.direction,"leftToRight")}),c.cfvo.forEach(h=>{this.cfvoXform.render(d,h)}),this.borderColorXform.render(d,c.borderColor),this.negativeBorderColorXform.render(d,c.negativeBorderColor),this.negativeFillColorXform.render(d,c.negativeFillColor),this.axisColorXform.render(d,c.axisColor),d.closeNode()}createNewModel(d){let{attributes:c}=d;return{cfvo:[],minLength:o.toIntValue(c.minLength,0),maxLength:o.toIntValue(c.maxLength,100),border:o.toBoolValue(c.border,!1),gradient:o.toBoolValue(c.gradient,!0),negativeBarColorSameAsPositive:o.toBoolValue(c.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:o.toBoolValue(c.negativeBarBorderColorSameAsPositive,!0),axisPosition:o.toStringValue(c.axisPosition,"auto"),direction:o.toStringValue(c.direction,"leftToRight")}}onParserClose(d,c){const[,h]=d.split(":");switch(h){case"cfvo":this.model.cfvo.push(c.model);break;default:this.model[h]=c.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{get tag(){return"xm:f"}render(r,a){r.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],81:[function(t,n,s){const o=t("../../base-xform"),r=t("../../composite-xform"),a=t("./cfvo-ext-xform"),l=t("./cf-icon-ext-xform");n.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new a,"x14:cfIcon":this.cfIconXform=new l}}get tag(){return"x14:iconSet"}render(d,c){d.openNode(this.tag,{iconSet:o.toStringAttribute(c.iconSet),reverse:o.toBoolAttribute(c.reverse,!1),showValue:o.toBoolAttribute(c.showValue,!0),custom:o.toBoolAttribute(c.icons,!1)}),c.cfvo.forEach(h=>{this.cfvoXform.render(d,h)}),c.icons&&c.icons.forEach((h,u)=>{h.iconId=u,this.cfIconXform.render(d,h)}),d.closeNode()}createNewModel(d){let{attributes:c}=d;return{cfvo:[],iconSet:o.toStringValue(c.iconSet,"3TrafficLights"),reverse:o.toBoolValue(c.reverse,!1),showValue:o.toBoolValue(c.showValue,!0)}}onParserClose(d,c){const[,h]=d.split(":");switch(h){case"cfvo":this.model.cfvo.push(c.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(c.model);break;default:this.model[h]=c.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{get tag(){return"xm:sqref"}render(r,a){r.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],83:[function(t,n,s){const o=t("../../base-xform"),r=t("../../composite-xform"),a=t("../../../../doc/range"),l=t("./databar-xform"),d=t("./ext-lst-ref-xform"),c=t("./formula-xform"),h=t("./color-scale-xform"),u=t("./icon-set-xform"),p={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},f=m=>{const{type:b,operator:_}=m;switch(b){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:b};default:return{type:b,operator:_}}};class g extends r{constructor(){super(),this.map={dataBar:this.databarXform=new l,extLst:this.extLstRefXform=new d,formula:this.formulaXform=new c,colorScale:this.colorScaleXform=new h,iconSet:this.iconSetXform=new u}}get tag(){return"cfRule"}static isPrimitive(b){return b.type!=="iconSet"||!b.custom&&!p[b.iconSet]}render(b,_){switch(_.type){case"expression":this.renderExpression(b,_);break;case"cellIs":this.renderCellIs(b,_);break;case"top10":this.renderTop10(b,_);break;case"aboveAverage":this.renderAboveAverage(b,_);break;case"dataBar":this.renderDataBar(b,_);break;case"colorScale":this.renderColorScale(b,_);break;case"iconSet":this.renderIconSet(b,_);break;case"containsText":this.renderText(b,_);break;case"timePeriod":this.renderTimePeriod(b,_)}}renderExpression(b,_){b.openNode(this.tag,{type:"expression",dxfId:_.dxfId,priority:_.priority}),this.formulaXform.render(b,_.formulae[0]),b.closeNode()}renderCellIs(b,_){b.openNode(this.tag,{type:"cellIs",dxfId:_.dxfId,priority:_.priority,operator:_.operator}),_.formulae.forEach(w=>{this.formulaXform.render(b,w)}),b.closeNode()}renderTop10(b,_){b.leafNode(this.tag,{type:"top10",dxfId:_.dxfId,priority:_.priority,percent:o.toBoolAttribute(_.percent,!1),bottom:o.toBoolAttribute(_.bottom,!1),rank:o.toIntValue(_.rank,10,!0)})}renderAboveAverage(b,_){b.leafNode(this.tag,{type:"aboveAverage",dxfId:_.dxfId,priority:_.priority,aboveAverage:o.toBoolAttribute(_.aboveAverage,!0)})}renderDataBar(b,_){b.openNode(this.tag,{type:"dataBar",priority:_.priority}),this.databarXform.render(b,_),this.extLstRefXform.render(b,_),b.closeNode()}renderColorScale(b,_){b.openNode(this.tag,{type:"colorScale",priority:_.priority}),this.colorScaleXform.render(b,_),b.closeNode()}renderIconSet(b,_){g.isPrimitive(_)&&(b.openNode(this.tag,{type:"iconSet",priority:_.priority}),this.iconSetXform.render(b,_),b.closeNode())}renderText(b,_){b.openNode(this.tag,{type:_.operator,dxfId:_.dxfId,priority:_.priority,operator:o.toStringAttribute(_.operator,"containsText")});const w=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const D=new a(E.ref),{tl:B}=D;switch(E.operator){case"containsText":return`NOT(ISERROR(SEARCH("${E.text}",${B})))`;case"containsBlanks":return`LEN(TRIM(${B}))=0`;case"notContainsBlanks":return`LEN(TRIM(${B}))>0`;case"containsErrors":return`ISERROR(${B})`;case"notContainsErrors":return`NOT(ISERROR(${B}))`;default:return}})(_);w&&this.formulaXform.render(b,w),b.closeNode()}renderTimePeriod(b,_){b.openNode(this.tag,{type:"timePeriod",dxfId:_.dxfId,priority:_.priority,timePeriod:_.timePeriod});const w=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const D=new a(E.ref),{tl:B}=D;switch(E.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${B},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${B},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${B},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${B},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${B},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${B},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${B},1)=TODAY()-1`;case"today":return`FLOOR(${B},1)=TODAY()`;case"tomorrow":return`FLOOR(${B},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${B},1)<=6,FLOOR(${B},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${B})=MONTH(EDATE(TODAY(),0-1)),YEAR(${B})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${B})=MONTH(TODAY()),YEAR(${B})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${B})=MONTH(EDATE(TODAY(),0+1)),YEAR(${B})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(_);w&&this.formulaXform.render(b,w),b.closeNode()}createNewModel(b){let{attributes:_}=b;return{...f(_),dxfId:o.toIntValue(_.dxfId),priority:o.toIntValue(_.priority),timePeriod:_.timePeriod,percent:o.toBoolValue(_.percent),bottom:o.toBoolValue(_.bottom),rank:o.toIntValue(_.rank),aboveAverage:o.toBoolValue(_.aboveAverage)}}onParserClose(b,_){switch(b){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,_.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(_.model)}}}n.exports=g},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{get tag(){return"cfvo"}render(r,a){r.leafNode(this.tag,{type:a.type,val:a.value})}parseOpen(r){this.model={type:r.attributes.type,value:o.toFloatValue(r.attributes.val)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],85:[function(t,n,s){const o=t("../../composite-xform"),r=t("../../style/color-xform"),a=t("./cfvo-xform");n.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new a,color:this.colorXform=new r}}get tag(){return"colorScale"}render(l,d){l.openNode(this.tag),d.cfvo.forEach(c=>{this.cfvoXform.render(l,c)}),d.color.forEach(c=>{this.colorXform.render(l,c)}),l.closeNode()}createNewModel(l){return{cfvo:[],color:[]}}onParserClose(l,d){this.model[l].push(d.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,n,s){const o=t("../../composite-xform"),r=t("./cf-rule-xform");n.exports=class extends o{constructor(){super(),this.map={cfRule:new r}}get tag(){return"conditionalFormatting"}render(a,l){l.rules.some(r.isPrimitive)&&(a.openNode(this.tag,{sqref:l.ref}),l.rules.forEach(d=>{r.isPrimitive(d)&&(d.ref=l.ref,this.map.cfRule.render(a,d))}),a.closeNode())}createNewModel(a){let{attributes:l}=a;return{ref:l.sqref,rules:[]}}onParserClose(a,l){this.model.rules.push(l.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,n,s){const o=t("../../base-xform"),r=t("./conditional-formatting-xform");n.exports=class extends o{constructor(){super(),this.cfXform=new r}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(a,l){let d=a.reduce((c,h)=>Math.max(c,...h.rules.map(u=>u.priority||0)),1);a.forEach(c=>{c.rules.forEach(h=>{h.priority||(h.priority=d++),h.style&&(h.dxfId=l.styles.addDxfStyle(h.style))})})}render(a,l){l.forEach(d=>{this.cfXform.render(a,d)})}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(a),!0;default:return!1}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return!!this.parser&&(!!this.parser.parseClose(a)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(a,l){a.forEach(d=>{d.rules.forEach(c=>{c.dxfId!==void 0&&(c.style=l.styles.getDxfStyle(c.dxfId),delete c.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,n,s){const o=t("../../composite-xform"),r=t("../../style/color-xform"),a=t("./cfvo-xform");n.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new a,color:this.colorXform=new r}}get tag(){return"dataBar"}render(l,d){l.openNode(this.tag),d.cfvo.forEach(c=>{this.cfvoXform.render(l,c)}),this.colorXform.render(l,d.color),l.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(l,d){switch(l){case"cfvo":this.model.cfvo.push(d.model);break;case"color":this.model.color=d.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,n,s){const o=t("../../base-xform"),r=t("../../composite-xform");class a extends o{get tag(){return"x14:id"}render(c,h){c.leafNode(this.tag,null,h)}parseOpen(){this.model=""}parseText(c){this.model+=c}parseClose(c){return c!==this.tag}}class l extends r{constructor(){super(),this.map={"x14:id":this.idXform=new a}}get tag(){return"ext"}render(c,h){c.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(c,h.x14Id),c.closeNode()}createNewModel(){return{}}onParserClose(c,h){this.model.x14Id=h.model}}n.exports=class extends r{constructor(){super(),this.map={ext:new l}}get tag(){return"extLst"}render(d,c){d.openNode(this.tag),this.map.ext.render(d,c),d.closeNode()}createNewModel(){return{}}onParserClose(d,c){Object.assign(this.model,c.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,n,s){const o=t("../../base-xform");n.exports=class extends o{get tag(){return"formula"}render(r,a){r.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],91:[function(t,n,s){const o=t("../../base-xform"),r=t("../../composite-xform"),a=t("./cfvo-xform");n.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new a}}get tag(){return"iconSet"}render(l,d){l.openNode(this.tag,{iconSet:o.toStringAttribute(d.iconSet,"3TrafficLights"),reverse:o.toBoolAttribute(d.reverse,!1),showValue:o.toBoolAttribute(d.showValue,!0)}),d.cfvo.forEach(c=>{this.cfvoXform.render(l,c)}),l.closeNode()}createNewModel(l){let{attributes:d}=l;return{iconSet:o.toStringValue(d.iconSet,"3TrafficLights"),reverse:o.toBoolValue(d.reverse),showValue:o.toBoolValue(d.showValue),cfvo:[]}}onParserClose(l,d){this.model[l].push(d.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,n,s){const o=t("../../../utils/utils"),r=t("../base-xform");n.exports=class extends r{get tag(){return"col"}prepare(a,l){const d=l.styles.addStyleModel(a.style||{});d&&(a.styleId=d)}render(a,l){a.openNode("col"),a.addAttribute("min",l.min),a.addAttribute("max",l.max),l.width&&a.addAttribute("width",l.width),l.styleId&&a.addAttribute("style",l.styleId),l.hidden&&a.addAttribute("hidden","1"),l.bestFit&&a.addAttribute("bestFit","1"),l.outlineLevel&&a.addAttribute("outlineLevel",l.outlineLevel),l.collapsed&&a.addAttribute("collapsed","1"),a.addAttribute("customWidth","1"),a.closeNode()}parseOpen(a){if(a.name==="col"){const l=this.model={min:parseInt(a.attributes.min||"0",10),max:parseInt(a.attributes.max||"0",10),width:a.attributes.width===void 0?void 0:parseFloat(a.attributes.width||"0")};return a.attributes.style&&(l.styleId=parseInt(a.attributes.style,10)),o.parseBoolean(a.attributes.hidden)&&(l.hidden=!0),o.parseBoolean(a.attributes.bestFit)&&(l.bestFit=!0),a.attributes.outlineLevel&&(l.outlineLevel=parseInt(a.attributes.outlineLevel,10)),o.parseBoolean(a.attributes.collapsed)&&(l.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(a,l){a.styleId&&(a.style=l.styles.getStyleModel(a.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../../../utils/utils"),a=t("../../../utils/col-cache"),l=t("../base-xform"),d=t("../../../doc/range");function c(u,p,f,g){const m=p[f];m!==void 0?u[f]=m:g!==void 0&&(u[f]=g)}function h(u,p,f,g){const m=p[f];m!==void 0?u[f]=r.parseBoolean(m):g!==void 0&&(u[f]=g)}n.exports=class extends l{get tag(){return"dataValidations"}render(u,p){const f=function(g){const m=o.map(g,(w,E)=>({address:E,dataValidation:w,marked:!1})).sort((w,E)=>o.strcmp(w.address,E.address)),b=o.keyBy(m,"address"),_=(w,E,D)=>{for(let B=0;B<E;B++){const $=a.encodeAddress(w.row+B,D);if(!g[$]||!o.isEqual(g[w.address],g[$]))return!1}return!0};return m.map(w=>{if(!w.marked){const E=a.decodeEx(w.address);if(E.dimensions)return b[E.dimensions].marked=!0,{...w.dataValidation,sqref:w.address};let D=1,B=a.encodeAddress(E.row+D,E.col);for(;g[B]&&o.isEqual(w.dataValidation,g[B]);)D++,B=a.encodeAddress(E.row+D,E.col);let $=1;for(;_(E,D,E.col+$);)$++;for(let F=0;F<D;F++)for(let N=0;N<$;N++)B=a.encodeAddress(E.row+F,E.col+N),b[B].marked=!0;if(D>1||$>1){const F=E.row+(D-1),N=E.col+($-1);return{...w.dataValidation,sqref:`${w.address}:${a.encodeAddress(F,N)}`}}return{...w.dataValidation,sqref:w.address}}return null}).filter(Boolean)}(p);f.length&&(u.openNode("dataValidations",{count:f.length}),f.forEach(g=>{u.openNode("dataValidation"),g.type!=="any"&&(u.addAttribute("type",g.type),g.operator&&g.type!=="list"&&g.operator!=="between"&&u.addAttribute("operator",g.operator),g.allowBlank&&u.addAttribute("allowBlank","1")),g.showInputMessage&&u.addAttribute("showInputMessage","1"),g.promptTitle&&u.addAttribute("promptTitle",g.promptTitle),g.prompt&&u.addAttribute("prompt",g.prompt),g.showErrorMessage&&u.addAttribute("showErrorMessage","1"),g.errorStyle&&u.addAttribute("errorStyle",g.errorStyle),g.errorTitle&&u.addAttribute("errorTitle",g.errorTitle),g.error&&u.addAttribute("error",g.error),u.addAttribute("sqref",g.sqref),(g.formulae||[]).forEach((m,b)=>{u.openNode("formula"+(b+1)),g.type==="date"?u.writeText(r.dateToExcel(new Date(m))):u.writeText(m),u.closeNode()}),u.closeNode()}),u.closeNode())}parseOpen(u){switch(u.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=u.attributes.sqref;const p={type:u.attributes.type||"any",formulae:[]};switch(u.attributes.type&&h(p,u.attributes,"allowBlank"),h(p,u.attributes,"showInputMessage"),h(p,u.attributes,"showErrorMessage"),p.type){case"any":case"list":case"custom":break;default:c(p,u.attributes,"operator","between")}return c(p,u.attributes,"promptTitle"),c(p,u.attributes,"prompt"),c(p,u.attributes,"errorStyle"),c(p,u.attributes,"errorTitle"),c(p,u.attributes,"error"),this._dataValidation=p,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(u){this._formula&&this._formula.push(u)}parseClose(u){switch(u){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(p=>{p.includes(":")?new d(p).forEachAddress(f=>{this.model[f]=this._dataValidation}):this.model[p]=this._dataValidation}),!0;case"formula1":case"formula2":{let p=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":p=parseInt(p,10);break;case"decimal":p=parseFloat(p);break;case"date":p=r.excelToDate(parseFloat(p))}return this._dataValidation.formulae.push(p),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"dimension"}render(r,a){a&&r.leafNode("dimension",{ref:a})}parseOpen(r){return r.name==="dimension"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"drawing"}render(r,a){a&&r.leafNode(this.tag,{"r:id":a.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,n,s){const o=t("../composite-xform"),r=t("./cf-ext/conditional-formattings-ext-xform");class a extends o{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new r}}get tag(){return"ext"}hasContent(d){return this.conditionalFormattings.hasContent(d.conditionalFormattings)}prepare(d,c){this.conditionalFormattings.prepare(d.conditionalFormattings,c)}render(d,c){d.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(d,c.conditionalFormattings),d.closeNode()}createNewModel(){return{}}onParserClose(d,c){this.model[d]=c.model}}n.exports=class extends o{constructor(){super(),this.map={ext:this.ext=new a}}get tag(){return"extLst"}prepare(l,d){this.ext.prepare(l,d)}hasContent(l){return this.ext.hasContent(l)}render(l,d){this.hasContent(d)&&(l.openNode("extLst"),this.ext.render(l,d),l.closeNode())}createNewModel(){return{}}onParserClose(l,d){Object.assign(this.model,d.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"headerFooter"}render(r,a){if(a){r.addRollback();let l=!1;r.openNode("headerFooter"),a.differentFirst&&(r.addAttribute("differentFirst","1"),l=!0),a.differentOddEven&&(r.addAttribute("differentOddEven","1"),l=!0),a.oddHeader&&typeof a.oddHeader=="string"&&(r.leafNode("oddHeader",null,a.oddHeader),l=!0),a.oddFooter&&typeof a.oddFooter=="string"&&(r.leafNode("oddFooter",null,a.oddFooter),l=!0),a.evenHeader&&typeof a.evenHeader=="string"&&(r.leafNode("evenHeader",null,a.evenHeader),l=!0),a.evenFooter&&typeof a.evenFooter=="string"&&(r.leafNode("evenFooter",null,a.evenFooter),l=!0),a.firstHeader&&typeof a.firstHeader=="string"&&(r.leafNode("firstHeader",null,a.firstHeader),l=!0),a.firstFooter&&typeof a.firstFooter=="string"&&(r.leafNode("firstFooter",null,a.firstFooter),l=!0),l?(r.closeNode(),r.commit()):r.rollback()}}parseOpen(r){switch(r.name){case"headerFooter":return this.model={},r.attributes.differentFirst&&(this.model.differentFirst=parseInt(r.attributes.differentFirst,0)===1),r.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(r.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(r){switch(this.currentNode){case"oddHeader":this.model.oddHeader=r;break;case"oddFooter":this.model.oddFooter=r;break;case"evenHeader":this.model.evenHeader=r;break;case"evenFooter":this.model.evenFooter=r;break;case"firstHeader":this.model.firstHeader=r;break;case"firstFooter":this.model.firstFooter=r}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"hyperlink"}render(r,a){this.isInternalLink(a)?r.leafNode("hyperlink",{ref:a.address,"r:id":a.rId,tooltip:a.tooltip,location:a.target}):r.leafNode("hyperlink",{ref:a.address,"r:id":a.rId,tooltip:a.tooltip})}parseOpen(r){return r.name==="hyperlink"&&(this.model={address:r.attributes.ref,rId:r.attributes["r:id"],tooltip:r.attributes.tooltip},r.attributes.location&&(this.model.target=r.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(r){return r.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(r.target)}}},{"../base-xform":32}],99:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"mergeCell"}render(r,a){r.leafNode("mergeCell",{ref:a})}parseOpen(r){return r.name==="mergeCell"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../../../doc/range"),a=t("../../../utils/col-cache"),l=t("../../../doc/enums");n.exports=class{constructor(){this.merges={}}add(d){if(this.merges[d.master])this.merges[d.master].expandToAddress(d.address);else{const c=`${d.master}:${d.address}`;this.merges[d.master]=new r(c)}}get mergeCells(){return o.map(this.merges,d=>d.range)}reconcile(d,c){o.each(d,h=>{const u=a.decode(h);for(let p=u.top;p<=u.bottom;p++){const f=c[p-1];for(let g=u.left;g<=u.right;g++){const m=f.cells[g-1];m?m.type===l.ValueType.Merge&&(m.master=u.tl):f.cells[g]={type:l.ValueType.Null,address:a.encodeAddress(p,g)}}}})}getMasterAddress(d){const c=this.hash[d];return c&&c.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,n,s){const o=t("../base-xform"),r=a=>a!==void 0;n.exports=class extends o{get tag(){return"outlinePr"}render(a,l){return!(!l||!r(l.summaryBelow)&&!r(l.summaryRight))&&(a.leafNode(this.tag,{summaryBelow:r(l.summaryBelow)?Number(l.summaryBelow):void 0,summaryRight:r(l.summaryRight)?Number(l.summaryRight):void 0}),!0)}parseOpen(a){return a.name===this.tag&&(this.model={summaryBelow:r(a.attributes.summaryBelow)?!!Number(a.attributes.summaryBelow):void 0,summaryRight:r(a.attributes.summaryRight)?!!Number(a.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"brk"}render(r,a){r.leafNode("brk",a)}parseOpen(r){return r.name==="brk"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../base-xform");n.exports=class extends r{get tag(){return"pageMargins"}render(a,l){if(l){const d={left:l.left,right:l.right,top:l.top,bottom:l.bottom,header:l.header,footer:l.footer};o.some(d,c=>c!==void 0)&&a.leafNode(this.tag,d)}}parseOpen(a){switch(a.name){case this.tag:return this.model={left:parseFloat(a.attributes.left||.7),right:parseFloat(a.attributes.right||.7),top:parseFloat(a.attributes.top||.75),bottom:parseFloat(a.attributes.bottom||.75),header:parseFloat(a.attributes.header||.3),footer:parseFloat(a.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"pageSetUpPr"}render(r,a){return!(!a||!a.fitToPage)&&(r.leafNode(this.tag,{fitToPage:a.fitToPage?"1":void 0}),!0)}parseOpen(r){return r.name===this.tag&&(this.model={fitToPage:r.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../base-xform");function a(h){return h?"1":void 0}function l(h){switch(h){case"overThenDown":return h;default:return}}function d(h){switch(h){case"atEnd":case"asDisplyed":return h;default:return}}function c(h){switch(h){case"dash":case"blank":case"NA":return h;default:return}}n.exports=class extends r{get tag(){return"pageSetup"}render(h,u){if(u){const p={paperSize:u.paperSize,orientation:u.orientation,horizontalDpi:u.horizontalDpi,verticalDpi:u.verticalDpi,pageOrder:l(u.pageOrder),blackAndWhite:a(u.blackAndWhite),draft:a(u.draft),cellComments:d(u.cellComments),errors:c(u.errors),scale:u.scale,fitToWidth:u.fitToWidth,fitToHeight:u.fitToHeight,firstPageNumber:u.firstPageNumber,useFirstPageNumber:a(u.firstPageNumber),usePrinterDefaults:a(u.usePrinterDefaults),copies:u.copies};o.some(p,f=>f!==void 0)&&h.leafNode(this.tag,p)}}parseOpen(h){switch(h.name){case this.tag:return this.model={paperSize:(u=h.attributes.paperSize,u!==void 0?parseInt(u,10):void 0),orientation:h.attributes.orientation||"portrait",horizontalDpi:parseInt(h.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(h.attributes.verticalDpi||"4294967295",10),pageOrder:h.attributes.pageOrder||"downThenOver",blackAndWhite:h.attributes.blackAndWhite==="1",draft:h.attributes.draft==="1",cellComments:h.attributes.cellComments||"None",errors:h.attributes.errors||"displayed",scale:parseInt(h.attributes.scale||"100",10),fitToWidth:parseInt(h.attributes.fitToWidth||"1",10),fitToHeight:parseInt(h.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(h.attributes.firstPageNumber||"1",10),useFirstPageNumber:h.attributes.useFirstPageNumber==="1",usePrinterDefaults:h.attributes.usePrinterDefaults==="1",copies:parseInt(h.attributes.copies||"1",10)},!0;default:return!1}var u}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"picture"}render(r,a){a&&r.leafNode(this.tag,{"r:id":a.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../base-xform");function a(l){return l?"1":void 0}n.exports=class extends r{get tag(){return"printOptions"}render(l,d){if(d){const c={headings:a(d.showRowColHeaders),gridLines:a(d.showGridLines),horizontalCentered:a(d.horizontalCentered),verticalCentered:a(d.verticalCentered)};o.some(c,h=>h!==void 0)&&l.leafNode(this.tag,c)}}parseOpen(l){switch(l.name){case this.tag:return this.model={showRowColHeaders:l.attributes.headings==="1",showGridLines:l.attributes.gridLines==="1",horizontalCentered:l.attributes.horizontalCentered==="1",verticalCentered:l.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,n,s){const o=t("./page-breaks-xform"),r=t("../list-xform");n.exports=class extends r{constructor(){super({tag:"rowBreaks",count:!0,childXform:new o})}render(a,l){if(l&&l.length){a.openNode(this.tag,this.$),this.count&&(a.addAttribute(this.$count,l.length),a.addAttribute("manualBreakCount",l.length));const{childXform:d}=this;l.forEach(c=>{d.render(a,c)}),a.closeNode()}else this.empty&&a.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,n,s){const o=t("../base-xform"),r=t("../../../utils/utils"),a=t("./cell-xform");n.exports=class extends o{constructor(l){super(),this.maxItems=l&&l.maxItems,this.map={c:new a}}get tag(){return"row"}prepare(l,d){const c=d.styles.addStyleModel(l.style);c&&(l.styleId=c);const h=this.map.c;l.cells.forEach(u=>{h.prepare(u,d)})}render(l,d,c){l.openNode("row"),l.addAttribute("r",d.number),d.height&&(l.addAttribute("ht",d.height),l.addAttribute("customHeight","1")),d.hidden&&l.addAttribute("hidden","1"),d.min>0&&d.max>0&&d.min<=d.max&&l.addAttribute("spans",`${d.min}:${d.max}`),d.styleId&&(l.addAttribute("s",d.styleId),l.addAttribute("customFormat","1")),l.addAttribute("x14ac:dyDescent","0.25"),d.outlineLevel&&l.addAttribute("outlineLevel",d.outlineLevel),d.collapsed&&l.addAttribute("collapsed","1");const h=this.map.c;d.cells.forEach(u=>{h.render(l,u,c)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;if(l.name==="row"){this.numRowsSeen+=1;const d=l.attributes.spans?l.attributes.spans.split(":").map(h=>parseInt(h,10)):[void 0,void 0],c=this.model={number:parseInt(l.attributes.r,10),min:d[0],max:d[1],cells:[]};return l.attributes.s&&(c.styleId=parseInt(l.attributes.s,10)),r.parseBoolean(l.attributes.hidden)&&(c.hidden=!0),r.parseBoolean(l.attributes.bestFit)&&(c.bestFit=!0),l.attributes.ht&&(c.height=parseFloat(l.attributes.ht)),l.attributes.outlineLevel&&(c.outlineLevel=parseInt(l.attributes.outlineLevel,10)),r.parseBoolean(l.attributes.collapsed)&&(c.collapsed=!0),!0}return this.parser=this.map[l.name],!!this.parser&&(this.parser.parseOpen(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(l,d){l.style=l.styleId?d.styles.getStyleModel(l.styleId):{},l.styleId!==void 0&&(l.styleId=void 0);const c=this.map.c;l.cells.forEach(h=>{c.reconcile(h,d)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../base-xform");n.exports=class extends r{get tag(){return"sheetFormatPr"}render(a,l){if(l){const d={defaultRowHeight:l.defaultRowHeight,outlineLevelRow:l.outlineLevelRow,outlineLevelCol:l.outlineLevelCol,"x14ac:dyDescent":l.dyDescent};l.defaultColWidth&&(d.defaultColWidth=l.defaultColWidth),l.defaultRowHeight&&l.defaultRowHeight===15||(d.customHeight="1"),o.some(d,c=>c!==void 0)&&a.leafNode("sheetFormatPr",d)}}parseOpen(a){return a.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(a.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(a.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(a.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(a.attributes.outlineLevelCol||"0",10)},a.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(a.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,n,s){const o=t("../base-xform"),r=t("../style/color-xform"),a=t("./page-setup-properties-xform"),l=t("./outline-properties-xform");n.exports=class extends o{constructor(){super(),this.map={tabColor:new r("tabColor"),pageSetUpPr:new a,outlinePr:new l}}get tag(){return"sheetPr"}render(d,c){if(c){d.addRollback(),d.openNode("sheetPr");let h=!1;h=this.map.tabColor.render(d,c.tabColor)||h,h=this.map.pageSetUpPr.render(d,c.pageSetup)||h,h=this.map.outlinePr.render(d,c.outlineProperties)||h,h?(d.closeNode(),d.commit()):d.rollback()}}parseOpen(d){return this.parser?(this.parser.parseOpen(d),!0):d.name===this.tag?(this.reset(),!0):!!this.map[d.name]&&(this.parser=this.map[d.name],this.parser.parseOpen(d),!0)}parseText(d){return!!this.parser&&(this.parser.parseText(d),!0)}parseClose(d){return this.parser?(this.parser.parseClose(d)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../base-xform");function a(d,c){return d?c:void 0}function l(d,c){return d===c||void 0}n.exports=class extends r{get tag(){return"sheetProtection"}render(d,c){if(c){const h={sheet:a(c.sheet,"1"),selectLockedCells:c.selectLockedCells===!1?"1":void 0,selectUnlockedCells:c.selectUnlockedCells===!1?"1":void 0,formatCells:a(c.formatCells,"0"),formatColumns:a(c.formatColumns,"0"),formatRows:a(c.formatRows,"0"),insertColumns:a(c.insertColumns,"0"),insertRows:a(c.insertRows,"0"),insertHyperlinks:a(c.insertHyperlinks,"0"),deleteColumns:a(c.deleteColumns,"0"),deleteRows:a(c.deleteRows,"0"),sort:a(c.sort,"0"),autoFilter:a(c.autoFilter,"0"),pivotTables:a(c.pivotTables,"0")};c.sheet&&(h.algorithmName=c.algorithmName,h.hashValue=c.hashValue,h.saltValue=c.saltValue,h.spinCount=c.spinCount,h.objects=a(c.objects===!1,"1"),h.scenarios=a(c.scenarios===!1,"1")),o.some(h,u=>u!==void 0)&&d.leafNode(this.tag,h)}}parseOpen(d){switch(d.name){case this.tag:return this.model={sheet:l(d.attributes.sheet,"1"),objects:d.attributes.objects!=="1"&&void 0,scenarios:d.attributes.scenarios!=="1"&&void 0,selectLockedCells:d.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:d.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:l(d.attributes.formatCells,"0"),formatColumns:l(d.attributes.formatColumns,"0"),formatRows:l(d.attributes.formatRows,"0"),insertColumns:l(d.attributes.insertColumns,"0"),insertRows:l(d.attributes.insertRows,"0"),insertHyperlinks:l(d.attributes.insertHyperlinks,"0"),deleteColumns:l(d.attributes.deleteColumns,"0"),deleteRows:l(d.attributes.deleteRows,"0"),sort:l(d.attributes.sort,"0"),autoFilter:l(d.attributes.autoFilter,"0"),pivotTables:l(d.attributes.pivotTables,"0")},d.attributes.algorithmName&&(this.model.algorithmName=d.attributes.algorithmName,this.model.hashValue=d.attributes.hashValue,this.model.saltValue=d.attributes.saltValue,this.model.spinCount=parseInt(d.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,n,s){const o=t("../../../utils/col-cache"),r=t("../base-xform"),a={frozen:"frozen",frozenSplit:"frozen",split:"split"};n.exports=class extends r{get tag(){return"sheetView"}prepare(l){switch(l.state){case"frozen":case"split":break;default:l.state="normal"}}render(l,d){l.openNode("sheetView",{workbookViewId:d.workbookViewId||0});const c=function(g,m,b){b&&l.addAttribute(g,m)};let h,u,p,f;switch(c("rightToLeft","1",d.rightToLeft===!0),c("tabSelected","1",d.tabSelected),c("showRuler","0",d.showRuler===!1),c("showRowColHeaders","0",d.showRowColHeaders===!1),c("showGridLines","0",d.showGridLines===!1),c("zoomScale",d.zoomScale,d.zoomScale),c("zoomScaleNormal",d.zoomScaleNormal,d.zoomScaleNormal),c("view",d.style,d.style),d.state){case"frozen":u=d.xSplit||0,p=d.ySplit||0,h=d.topLeftCell||o.getAddress(p+1,u+1).address,f=(d.xSplit&&d.ySplit?"bottomRight":d.xSplit&&"topRight")||"bottomLeft",l.leafNode("pane",{xSplit:d.xSplit||void 0,ySplit:d.ySplit||void 0,topLeftCell:h,activePane:f,state:"frozen"}),l.leafNode("selection",{pane:f,activeCell:d.activeCell,sqref:d.activeCell});break;case"split":d.activePane==="topLeft"&&(d.activePane=void 0),l.leafNode("pane",{xSplit:d.xSplit||void 0,ySplit:d.ySplit||void 0,topLeftCell:d.topLeftCell,activePane:d.activePane}),l.leafNode("selection",{pane:d.activePane,activeCell:d.activeCell,sqref:d.activeCell});break;case"normal":d.activeCell&&l.leafNode("selection",{activeCell:d.activeCell,sqref:d.activeCell})}l.closeNode()}parseOpen(l){switch(l.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(l.attributes.workbookViewId,10),rightToLeft:l.attributes.rightToLeft==="1",tabSelected:l.attributes.tabSelected==="1",showRuler:l.attributes.showRuler!=="0",showRowColHeaders:l.attributes.showRowColHeaders!=="0",showGridLines:l.attributes.showGridLines!=="0",zoomScale:parseInt(l.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(l.attributes.zoomScaleNormal||"100",10),style:l.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(l.attributes.xSplit||"0",10),ySplit:parseInt(l.attributes.ySplit||"0",10),topLeftCell:l.attributes.topLeftCell,activePane:l.attributes.activePane||"topLeft",state:l.attributes.state},!0;case"selection":{const d=l.attributes.pane||"topLeft";return this.selections[d]={pane:d,activeCell:l.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(l){let d,c;switch(l){case"sheetView":return this.sheetView&&this.pane?(d=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:a[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(d.activePane=this.pane.activePane),c=this.selections[this.pane.activePane],c&&c.activeCell&&(d.activeCell=c.activeCell),this.sheetView.style&&(d.style=this.sheetView.style)):(d=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},c=this.selections.topLeft,c&&c.activeCell&&(d.activeCell=c.activeCell),this.sheetView.style&&(d.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"tablePart"}render(r,a){a&&r.leafNode(this.tag,{"r:id":a.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../../../utils/col-cache"),a=t("../../../utils/xml-stream"),l=t("../../rel-type"),d=t("./merges"),c=t("../base-xform"),h=t("../list-xform"),u=t("./row-xform"),p=t("./col-xform"),f=t("./dimension-xform"),g=t("./hyperlink-xform"),m=t("./merge-cell-xform"),b=t("./data-validations-xform"),_=t("./sheet-properties-xform"),w=t("./sheet-format-properties-xform"),E=t("./sheet-view-xform"),D=t("./sheet-protection-xform"),B=t("./page-margins-xform"),$=t("./page-setup-xform"),F=t("./print-options-xform"),N=t("./auto-filter-xform"),L=t("./picture-xform"),j=t("./drawing-xform"),H=t("./table-part-xform"),I=t("./row-breaks-xform"),k=t("./header-footer-xform"),S=t("./cf/conditional-formattings-xform"),v=t("./ext-lst-xform"),y=(x,T)=>{if(!T||!T.length)return x;if(!x||!x.length)return T;const M={},V={};return x.forEach(W=>{M[W.ref]=W,W.rules.forEach(K=>{const{x14Id:Z}=K;Z&&(V[Z]=K)})}),T.forEach(W=>{W.rules.forEach(K=>{const Z=V[K.x14Id];Z?((P,G)=>{Object.keys(G).forEach(O=>{const A=P[O],z=G[O];A===void 0&&z!==void 0&&(P[O]=z)})})(Z,K):M[W.ref]?M[W.ref].rules.push(K):x.push({ref:W.ref,rules:[K]})})}),x};class C extends c{constructor(T){super();const{maxRows:M,maxCols:V,ignoreNodes:W}=T||{};this.ignoreNodes=W||[],this.map={sheetPr:new _,dimension:new f,sheetViews:new h({tag:"sheetViews",count:!1,childXform:new E}),sheetFormatPr:new w,cols:new h({tag:"cols",count:!1,childXform:new p}),sheetData:new h({tag:"sheetData",count:!1,empty:!0,childXform:new u({maxItems:V}),maxItems:M}),autoFilter:new N,mergeCells:new h({tag:"mergeCells",count:!0,childXform:new m}),rowBreaks:new I,hyperlinks:new h({tag:"hyperlinks",count:!1,childXform:new g}),pageMargins:new B,dataValidations:new b,pageSetup:new $,headerFooter:new k,printOptions:new F,picture:new L,drawing:new j,sheetProtection:new D,tableParts:new h({tag:"tableParts",count:!0,childXform:new H}),conditionalFormatting:new S,extLst:new v}}prepare(T,M){M.merges=new d,T.hyperlinks=M.hyperlinks=[],T.comments=M.comments=[],M.formulae={},M.siFormulae=0,this.map.cols.prepare(T.cols,M),this.map.sheetData.prepare(T.rows,M),this.map.conditionalFormatting.prepare(T.conditionalFormattings,M),T.mergeCells=M.merges.mergeCells;const V=T.rels=[];function W(P){return"rId"+(P.length+1)}if(T.hyperlinks.forEach(P=>{const G=W(V);P.rId=G,V.push({Id:G,Type:l.Hyperlink,Target:P.target,TargetMode:"External"})}),T.comments.length>0){const P={Id:W(V),Type:l.Comments,Target:`../comments${T.id}.xml`};V.push(P);const G={Id:W(V),Type:l.VmlDrawing,Target:`../drawings/vmlDrawing${T.id}.vml`};V.push(G),T.comments.forEach(O=>{O.refAddress=r.decodeAddress(O.ref)}),M.commentRefs.push({commentName:"comments"+T.id,vmlDrawing:"vmlDrawing"+T.id})}const K=[];let Z;T.media.forEach(P=>{if(P.type==="background"){const G=W(V);Z=M.media[P.imageId],V.push({Id:G,Type:l.Image,Target:`../media/${Z.name}.${Z.extension}`}),T.background={rId:G},T.image=M.media[P.imageId]}else if(P.type==="image"){let{drawing:G}=T;Z=M.media[P.imageId],G||(G=T.drawing={rId:W(V),name:"drawing"+ ++M.drawingsCount,anchors:[],rels:[]},M.drawings.push(G),V.push({Id:G.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${G.name}.xml`}));let O=this.preImageId===P.imageId?K[P.imageId]:K[G.rels.length];O||(O=W(G.rels),K[G.rels.length]=O,G.rels.push({Id:O,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${Z.name}.${Z.extension}`}));const A={picture:{rId:O},range:P.range};if(P.hyperlinks&&P.hyperlinks.hyperlink){const z=W(G.rels);K[G.rels.length]=z,A.picture.hyperlinks={tooltip:P.hyperlinks.tooltip,rId:z},G.rels.push({Id:z,Type:l.Hyperlink,Target:P.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=P.imageId,G.anchors.push(A)}}),T.tables.forEach(P=>{const G=W(V);P.rId=G,V.push({Id:G,Type:l.Table,Target:"../tables/"+P.target}),P.columns.forEach(O=>{const{style:A}=O;A&&(O.dxfId=M.styles.addDxfStyle(A))})}),this.map.extLst.prepare(T,M)}render(T,M){T.openXml(a.StdDocAttributes),T.openNode("worksheet",C.WORKSHEET_ATTRIBUTES);const V=M.properties?{defaultRowHeight:M.properties.defaultRowHeight,dyDescent:M.properties.dyDescent,outlineLevelCol:M.properties.outlineLevelCol,outlineLevelRow:M.properties.outlineLevelRow}:void 0;M.properties&&M.properties.defaultColWidth&&(V.defaultColWidth=M.properties.defaultColWidth);const W={outlineProperties:M.properties&&M.properties.outlineProperties,tabColor:M.properties&&M.properties.tabColor,pageSetup:M.pageSetup&&M.pageSetup.fitToPage?{fitToPage:M.pageSetup.fitToPage}:void 0},K=M.pageSetup&&M.pageSetup.margins,Z={showRowColHeaders:M.pageSetup&&M.pageSetup.showRowColHeaders,showGridLines:M.pageSetup&&M.pageSetup.showGridLines,horizontalCentered:M.pageSetup&&M.pageSetup.horizontalCentered,verticalCentered:M.pageSetup&&M.pageSetup.verticalCentered},P=M.sheetProtection;this.map.sheetPr.render(T,W),this.map.dimension.render(T,M.dimensions),this.map.sheetViews.render(T,M.views),this.map.sheetFormatPr.render(T,V),this.map.cols.render(T,M.cols),this.map.sheetData.render(T,M.rows),this.map.sheetProtection.render(T,P),this.map.autoFilter.render(T,M.autoFilter),this.map.mergeCells.render(T,M.mergeCells),this.map.conditionalFormatting.render(T,M.conditionalFormattings),this.map.dataValidations.render(T,M.dataValidations),this.map.hyperlinks.render(T,M.hyperlinks),this.map.printOptions.render(T,Z),this.map.pageMargins.render(T,K),this.map.pageSetup.render(T,M.pageSetup),this.map.headerFooter.render(T,M.headerFooter),this.map.rowBreaks.render(T,M.rowBreaks),this.map.drawing.render(T,M.drawing),this.map.picture.render(T,M.background),this.map.tableParts.render(T,M.tables),this.map.extLst.render(T,M),M.rels&&M.rels.forEach(G=>{G.Type===l.VmlDrawing&&T.leafNode("legacyDrawing",{"r:id":G.Id})}),T.closeNode()}parseOpen(T){return this.parser?(this.parser.parseOpen(T),!0):T.name==="worksheet"?(o.each(this.map,M=>{M.reset()}),!0):(this.map[T.name]&&!this.ignoreNodes.includes(T.name)&&(this.parser=this.map[T.name],this.parser.parseOpen(T)),!0)}parseText(T){this.parser&&this.parser.parseText(T)}parseClose(T){if(this.parser)return this.parser.parseClose(T)||(this.parser=void 0),!0;switch(T){case"worksheet":{const M=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(M.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(M.outlineProperties=this.map.sheetPr.model.outlineProperties);const V={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},W=Object.assign(V,this.map.pageSetup.model,this.map.printOptions.model),K=y(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:M,views:this.map.sheetViews.model,pageSetup:W,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:K},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(T,M){const V=(T.relationships||[]).reduce((K,Z)=>{if(K[Z.Id]=Z,Z.Type===l.Comments&&(T.comments=M.comments[Z.Target].comments),Z.Type===l.VmlDrawing&&T.comments&&T.comments.length){const P=M.vmlDrawings[Z.Target].comments;T.comments.forEach((G,O)=>{G.note=Object.assign({},G.note,P[O])})}return K},{});if(M.commentsMap=(T.comments||[]).reduce((K,Z)=>(Z.ref&&(K[Z.ref]=Z),K),{}),M.hyperlinkMap=(T.hyperlinks||[]).reduce((K,Z)=>(Z.rId&&(K[Z.address]=V[Z.rId].Target),K),{}),M.formulae={},T.rows=T.rows&&T.rows.filter(Boolean)||[],T.rows.forEach(K=>{K.cells=K.cells&&K.cells.filter(Boolean)||[]}),this.map.cols.reconcile(T.cols,M),this.map.sheetData.reconcile(T.rows,M),this.map.conditionalFormatting.reconcile(T.conditionalFormattings,M),T.media=[],T.drawing){const K=V[T.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(K){const Z=K[1];M.drawings[Z].anchors.forEach(P=>{if(P.medium){const G={type:"image",imageId:P.medium.index,range:P.range,hyperlinks:P.picture.hyperlinks};T.media.push(G)}})}}const W=T.background&&V[T.background.rId];if(W){const K=W.Target.split("/media/")[1],Z=M.mediaIndex&&M.mediaIndex[K];Z!==void 0&&T.media.push({type:"background",imageId:Z})}T.tables=(T.tables||[]).map(K=>{const Z=V[K.rId];return M.tables[Z.Target]}),delete T.relationships,delete T.hyperlinks,delete T.comments}}C.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},n.exports=C},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr}render(r,a){a&&(r.openNode(this.tag),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this._format=r.format||function(a){try{return Number.isNaN(a.getTime())?"":a.toISOString()}catch{return""}},this._parse=r.parse||function(a){return new Date(a)}}render(r,a){a&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,this._format(a)):r.writeText(this._format(a)),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=this._parse(r.attributes[this.attr]):this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this.zero=r.zero}render(r,a){(a||this.zero)&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,a):r.writeText(a),r.closeNode())}parseOpen(r){return r.name===this.tag&&(this.attr?this.model=parseInt(r.attributes[this.attr],10):this.text=[],!0)}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs}render(r,a){a!==void 0&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,a):r.writeText(a),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=r.attributes[this.attr]:this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,n,s){const o=t("./base-xform"),r=t("../../utils/xml-stream");n.exports=class extends o{constructor(a){super(),this._model=a}render(a){if(!this._xml){const l=new r;(function d(c,h){c.openNode(h.tag,h.$),h.c&&h.c.forEach(u=>{d(c,u)}),h.t&&c.writeText(h.t),c.closeNode()})(l,this._model),this._xml=l.xml}a.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(a){switch(a){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,n,s){const o=t("./text-xform"),r=t("./rich-text-xform"),a=t("../base-xform");n.exports=class extends a{constructor(){super(),this.map={r:new r,t:new o}}get tag(){return"rPh"}render(l,d){if(l.openNode(this.tag,{sb:d.sb||0,eb:d.eb||0}),d&&d.hasOwnProperty("richText")&&d.richText){const{r:c}=this.map;d.richText.forEach(h=>{c.render(l,h)})}else d&&this.map.t.render(l,d.text);l.closeNode()}parseOpen(l){const{name:d}=l;return this.parser?(this.parser.parseOpen(l),!0):d===this.tag?(this.model={sb:parseInt(l.attributes.sb,10),eb:parseInt(l.attributes.eb,10)},!0):(this.parser=this.map[d],!!this.parser&&(this.parser.parseOpen(l),!0))}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){switch(l){case"r":{let d=this.model.richText;d||(d=this.model.richText=[]),d.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,n,s){const o=t("./text-xform"),r=t("../style/font-xform"),a=t("../base-xform");class l extends a{constructor(c){super(),this.model=c}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new o)}get fontXform(){return this._fontXform||(this._fontXform=new r(l.FONT_OPTIONS))}render(c,h){h=h||this.model,c.openNode("r"),h.font&&this.fontXform.render(c,h.font),this.textXform.render(c,h.text),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(c),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){switch(c){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}}l.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},n.exports=l},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,n,s){const o=t("./text-xform"),r=t("./rich-text-xform"),a=t("./phonetic-text-xform"),l=t("../base-xform");n.exports=class extends l{constructor(d){super(),this.model=d,this.map={r:new r,t:new o,rPh:new a}}get tag(){return"si"}render(d,c){d.openNode(this.tag),c&&c.hasOwnProperty("richText")&&c.richText?c.richText.length?c.richText.forEach(h=>{this.map.r.render(d,h)}):this.map.t.render(d,""):c!=null&&this.map.t.render(d,c),d.closeNode()}parseOpen(d){const{name:c}=d;return this.parser?(this.parser.parseOpen(d),!0):c===this.tag?(this.model={},!0):(this.parser=this.map[c],!!this.parser&&(this.parser.parseOpen(d),!0))}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser){if(!this.parser.parseClose(d)){switch(d){case"r":{let c=this.model.richText;c||(c=this.model.richText=[]),c.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(d){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),a=t("./shared-string-xform");n.exports=class extends r{constructor(l){super(),this.model=l||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new a)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(l){return this.model.values[l]}add(l){return l.richText?this.addRichText(l):this.addText(l)}addText(l){let d=this.hash[l];return d===void 0&&(d=this.hash[l]=this.model.values.length,this.model.values.push(l)),this.model.count++,d}addRichText(l){const d=this.sharedStringXform.toXml(l);let c=this.rich[d];return c===void 0&&(c=this.rich[d]=this.model.values.length,this.model.values.push(l)),this.model.count++,c}render(l,d){d=d||this._values,l.openXml(o.StdDocAttributes),l.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:d.count,uniqueCount:d.values.length});const c=this.sharedStringXform;d.values.forEach(h=>{c.render(l,h)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(l),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(l){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"t"}render(r,a){r.openNode("t"),/^\s|\n|\s$/.test(a)&&r.addAttribute("xml:space","preserve"),r.writeText(a),r.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(r,a)=>String.fromCharCode(parseInt(a,16)))}parseOpen(r){switch(r.name){case"t":return this._text=[],!0;default:return!1}}parseText(r){this._text.push(r)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,n,s){const o=t("../../../doc/enums"),r=t("../../../utils/utils"),a=t("../base-xform"),l={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((c,h)=>(c[h]=!0,c),{}),horizontal(c){return this.horizontalValues[c]?c:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((c,h)=>(c[h]=!0,c),{}),vertical(c){return c==="middle"?"center":this.verticalValues[c]?c:void 0},wrapText:c=>!!c||void 0,shrinkToFit:c=>!!c||void 0,textRotation(c){switch(c){case"vertical":return c;default:return(c=r.validInt(c))>=-90&&c<=90?c:void 0}},indent:c=>(c=r.validInt(c),Math.max(0,c)),readingOrder(c){switch(c){case"ltr":return o.ReadingOrder.LeftToRight;case"rtl":return o.ReadingOrder.RightToLeft;default:return}}},d={toXml(c){if(c=l.textRotation(c)){if(c==="vertical")return 255;const h=Math.round(c);if(h>=0&&h<=90)return h;if(h<0&&h>=-90)return 90-h}},toModel(c){const h=r.validInt(c);if(h!==void 0){if(h===255)return"vertical";if(h>=0&&h<=90)return h;if(h>90&&h<=180)return 90-h}}};n.exports=class extends a{get tag(){return"alignment"}render(c,h){c.addRollback(),c.openNode("alignment");let u=!1;function p(f,g){g&&(c.addAttribute(f,g),u=!0)}p("horizontal",l.horizontal(h.horizontal)),p("vertical",l.vertical(h.vertical)),p("wrapText",!!l.wrapText(h.wrapText)&&"1"),p("shrinkToFit",!!l.shrinkToFit(h.shrinkToFit)&&"1"),p("indent",l.indent(h.indent)),p("textRotation",d.toXml(h.textRotation)),p("readingOrder",l.readingOrder(h.readingOrder)),c.closeNode(),u?c.commit():c.rollback()}parseOpen(c){const h={};let u=!1;function p(f,g,m){f&&(h[g]=m,u=!0)}p(c.attributes.horizontal,"horizontal",c.attributes.horizontal),p(c.attributes.vertical,"vertical",c.attributes.vertical==="center"?"middle":c.attributes.vertical),p(c.attributes.wrapText,"wrapText",r.parseBoolean(c.attributes.wrapText)),p(c.attributes.shrinkToFit,"shrinkToFit",r.parseBoolean(c.attributes.shrinkToFit)),p(c.attributes.indent,"indent",parseInt(c.attributes.indent,10)),p(c.attributes.textRotation,"textRotation",d.toModel(c.attributes.textRotation)),p(c.attributes.readingOrder,"readingOrder",c.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=u?h:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,n,s){const o=t("../base-xform"),r=t("../../../utils/utils"),a=t("./color-xform");class l extends o{constructor(c){super(),this.name=c,this.map={color:new a}}get tag(){return this.name}render(c,h,u){const p=h&&h.color||u||this.defaultColor;c.openNode(this.name),h&&h.style&&(c.addAttribute("style",h.style),p&&this.map.color.render(c,p)),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.name:{const{style:h}=c.attributes;return this.model=h?{style:h}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):(c===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(c){return l.validStyleValues[c]}}l.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((d,c)=>(d[c]=!0,d),{}),n.exports=class extends o{constructor(){super(),this.map={top:new l("top"),left:new l("left"),bottom:new l("bottom"),right:new l("right"),diagonal:new l("diagonal")}}render(d,c){const{color:h}=c;function u(p,f){p&&!p.color&&c.color&&(p={...p,color:c.color}),f.render(d,p,h)}d.openNode("border"),c.diagonal&&c.diagonal.style&&(c.diagonal.up&&d.addAttribute("diagonalUp","1"),c.diagonal.down&&d.addAttribute("diagonalDown","1")),u(c.left,this.map.left),u(c.right,this.map.right),u(c.top,this.map.top),u(c.bottom,this.map.bottom),u(c.diagonal,this.map.diagonal),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"border":return this.reset(),this.diagonalUp=r.parseBoolean(d.attributes.diagonalUp),this.diagonalDown=r.parseBoolean(d.attributes.diagonalDown),!0;default:return this.parser=this.map[d.name],!!this.parser&&(this.parser.parseOpen(d),!0)}}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;if(d==="border"){const c=this.model={},h=function(u,p,f){p&&(f&&Object.assign(p,f),c[u]=p)};h("left",this.map.left.model),h("right",this.map.right.model),h("top",this.map.top.model),h("bottom",this.map.bottom.model),h("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{constructor(r){super(),this.name=r||"color"}get tag(){return this.name}render(r,a){return!!a&&(r.openNode(this.name),a.argb?r.addAttribute("rgb",a.argb):a.theme!==void 0?(r.addAttribute("theme",a.theme),a.tint!==void 0&&r.addAttribute("tint",a.tint)):a.indexed!==void 0?r.addAttribute("indexed",a.indexed):r.addAttribute("auto","1"),r.closeNode(),!0)}parseOpen(r){return r.name===this.name&&(r.attributes.rgb?this.model={argb:r.attributes.rgb}:r.attributes.theme?(this.model={theme:parseInt(r.attributes.theme,10)},r.attributes.tint&&(this.model.tint=parseFloat(r.attributes.tint))):r.attributes.indexed?this.model={indexed:parseInt(r.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,n,s){const o=t("../base-xform"),r=t("./alignment-xform"),a=t("./border-xform"),l=t("./fill-xform"),d=t("./font-xform"),c=t("./numfmt-xform"),h=t("./protection-xform");n.exports=class extends o{constructor(){super(),this.map={alignment:new r,border:new a,fill:new l,font:new d,numFmt:new c,protection:new h}}get tag(){return"dxf"}render(u,p){if(u.openNode(this.tag),p.font&&this.map.font.render(u,p.font),p.numFmt&&p.numFmtId){const f={id:p.numFmtId,formatCode:p.numFmt};this.map.numFmt.render(u,f)}p.fill&&this.map.fill.render(u,p.fill),p.alignment&&this.map.alignment.render(u,p.alignment),p.border&&this.map.border.render(u,p.border),p.protection&&this.map.protection.render(u,p.protection),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u),!0}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):u!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,n,s){const o=t("../base-xform"),r=t("./color-xform");class a extends o{constructor(){super(),this.map={color:new r}}get tag(){return"stop"}render(u,p){u.openNode("stop"),u.addAttribute("position",p.position),this.map.color.render(u,p.color),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"stop":return this.model={position:parseFloat(u.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(){}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class l extends o{constructor(){super(),this.map={fgColor:new r("fgColor"),bgColor:new r("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(u,p){u.openNode("patternFill"),u.addAttribute("patternType",p.pattern),p.fgColor&&this.map.fgColor.render(u,p.fgColor),p.bgColor&&this.map.bgColor.render(u,p.bgColor),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"patternFill":return this.model={type:"pattern",pattern:u.attributes.patternType},!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.parser.model&&(this.model[u]=this.parser.model),this.parser=void 0),!0)}}class d extends o{constructor(){super(),this.map={stop:new a}}get name(){return"gradient"}get tag(){return"gradientFill"}render(u,p){switch(u.openNode("gradientFill"),p.gradient){case"angle":u.addAttribute("degree",p.degree);break;case"path":u.addAttribute("type","path"),p.center.left&&(u.addAttribute("left",p.center.left),p.center.right===void 0&&u.addAttribute("right",p.center.left)),p.center.right&&u.addAttribute("right",p.center.right),p.center.top&&(u.addAttribute("top",p.center.top),p.center.bottom===void 0&&u.addAttribute("bottom",p.center.top)),p.center.bottom&&u.addAttribute("bottom",p.center.bottom)}const f=this.map.stop;p.stops.forEach(g=>{f.render(u,g)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"gradientFill":{const p=this.model={stops:[]};return u.attributes.degree?(p.gradient="angle",p.degree=parseInt(u.attributes.degree,10)):u.attributes.type==="path"&&(p.gradient="path",p.center={left:u.attributes.left?parseFloat(u.attributes.left):0,top:u.attributes.top?parseFloat(u.attributes.top):0},u.attributes.right!==u.attributes.left&&(p.center.right=u.attributes.right?parseFloat(u.attributes.right):0),u.attributes.bottom!==u.attributes.top&&(p.center.bottom=u.attributes.bottom?parseFloat(u.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class c extends o{constructor(){super(),this.map={patternFill:new l,gradientFill:new d}}get tag(){return"fill"}render(u,p){switch(u.addRollback(),u.openNode("fill"),p.type){case"pattern":this.map.patternFill.render(u,p);break;case"gradient":this.map.gradientFill.render(u,p);break;default:return void u.rollback()}u.closeNode(),u.commit()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"fill":return this.model={},!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(u){return c.validPatternValues[u]}}c.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((h,u)=>(h[u]=!0,h),{}),c.StopXform=a,c.PatternFillXform=l,c.GradientFillXform=d,n.exports=c},{"../base-xform":32,"./color-xform":128}],131:[function(t,n,s){const o=t("./color-xform"),r=t("../simple/boolean-xform"),a=t("../simple/integer-xform"),l=t("../simple/string-xform"),d=t("./underline-xform"),c=t("../../../utils/under-dash"),h=t("../base-xform");class u extends h{constructor(f){super(),this.options=f||u.OPTIONS,this.map={b:{prop:"bold",xform:new r({tag:"b",attr:"val"})},i:{prop:"italic",xform:new r({tag:"i",attr:"val"})},u:{prop:"underline",xform:new d},charset:{prop:"charset",xform:new a({tag:"charset",attr:"val"})},color:{prop:"color",xform:new o},condense:{prop:"condense",xform:new r({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new r({tag:"extend",attr:"val"})},family:{prop:"family",xform:new a({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new r({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new l({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new l({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new r({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new r({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new a({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new l({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(f,g){const{map:m}=this;f.openNode(this.options.tagName),c.each(this.map,(b,_)=>{m[_].xform.render(f,g[b.prop])}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;if(this.map[f.name])return this.parser=this.map[f.name].xform,this.parser.parseOpen(f);switch(f.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser&&!this.parser.parseClose(f)){const g=this.map[f];return this.parser.model&&(this.model[g.prop]=this.parser.model),this.parser=void 0,!0}switch(f){case this.options.tagName:return!1;default:return!0}}}u.OPTIONS={tagName:"font",fontNameTag:"name"},n.exports=u},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,n,s){const o=t("../../../utils/under-dash"),r=t("../../defaultnumformats"),a=t("../base-xform"),l=function(){const c={};return o.each(r,(h,u)=>{h.f&&(c[h.f]=parseInt(u,10))}),c}();class d extends a{constructor(h,u){super(),this.id=h,this.formatCode=u}get tag(){return"numFmt"}render(h,u){h.leafNode("numFmt",{numFmtId:u.id,formatCode:u.formatCode})}parseOpen(h){switch(h.name){case"numFmt":return this.model={id:parseInt(h.attributes.numFmtId,10),formatCode:h.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}d.getDefaultFmtId=function(c){return l[c]},d.getDefaultFmtCode=function(c){return r[c]&&r[c].f},n.exports=d},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,n,s){const o=t("../base-xform"),r={boolean:(a,l)=>a===void 0?l:a};n.exports=class extends o{get tag(){return"protection"}render(a,l){a.addRollback(),a.openNode("protection");let d=!1;function c(h,u){u!==void 0&&(a.addAttribute(h,u),d=!0)}c("locked",r.boolean(l.locked,!0)?void 0:"0"),c("hidden",r.boolean(l.hidden,!1)?"1":void 0),a.closeNode(),d?a.commit():a.rollback()}parseOpen(a){const l={locked:a.attributes.locked!=="0",hidden:a.attributes.hidden==="1"},d=!l.locked||l.hidden;this.model=d?l:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,n,s){const o=t("../base-xform"),r=t("./alignment-xform"),a=t("./protection-xform");n.exports=class extends o{constructor(l){super(),this.xfId=!(!l||!l.xfId),this.map={alignment:new r,protection:new a}}get tag(){return"xf"}render(l,d){l.openNode("xf",{numFmtId:d.numFmtId||0,fontId:d.fontId||0,fillId:d.fillId||0,borderId:d.borderId||0}),this.xfId&&l.addAttribute("xfId",d.xfId||0),d.numFmtId&&l.addAttribute("applyNumberFormat","1"),d.fontId&&l.addAttribute("applyFont","1"),d.fillId&&l.addAttribute("applyFill","1"),d.borderId&&l.addAttribute("applyBorder","1"),d.alignment&&l.addAttribute("applyAlignment","1"),d.protection&&l.addAttribute("applyProtection","1"),d.alignment&&this.map.alignment.render(l,d.alignment),d.protection&&this.map.protection.render(l,d.protection),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"xf":return this.model={numFmtId:parseInt(l.attributes.numFmtId,10),fontId:parseInt(l.attributes.fontId,10),fillId:parseInt(l.attributes.fillId,10),borderId:parseInt(l.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(l.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(l),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):l!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,n,s){const o=t("../../../doc/enums"),r=t("../../../utils/xml-stream"),a=t("../base-xform"),l=t("../static-xform"),d=t("../list-xform"),c=t("./font-xform"),h=t("./fill-xform"),u=t("./border-xform"),p=t("./numfmt-xform"),f=t("./style-xform"),g=t("./dxf-xform");class m extends a{constructor(_){super(),this.map={numFmts:new d({tag:"numFmts",count:!0,childXform:new p}),fonts:new d({tag:"fonts",count:!0,childXform:new c,$:{"x14ac:knownFonts":1}}),fills:new d({tag:"fills",count:!0,childXform:new h}),borders:new d({tag:"borders",count:!0,childXform:new u}),cellStyleXfs:new d({tag:"cellStyleXfs",count:!0,childXform:new f}),cellXfs:new d({tag:"cellXfs",count:!0,childXform:new f({xfId:!0})}),dxfs:new d({tag:"dxfs",always:!0,count:!0,childXform:new g}),numFmt:new p,font:new c,fill:new h,border:new u,style:new f({xfId:!0}),cellStyles:m.STATIC_XFORMS.cellStyles,tableStyles:m.STATIC_XFORMS.tableStyles,extLst:m.STATIC_XFORMS.extLst},_&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(_,w){w=w||this.model,_.openXml(r.StdDocAttributes),_.openNode("styleSheet",m.STYLESHEET_ATTRIBUTES),this.index?(w.numFmts&&w.numFmts.length&&(_.openNode("numFmts",{count:w.numFmts.length}),w.numFmts.forEach(E=>{_.writeXml(E)}),_.closeNode()),w.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),_.openNode("fonts",{count:w.fonts.length,"x14ac:knownFonts":1}),w.fonts.forEach(E=>{_.writeXml(E)}),_.closeNode(),_.openNode("fills",{count:w.fills.length}),w.fills.forEach(E=>{_.writeXml(E)}),_.closeNode(),_.openNode("borders",{count:w.borders.length}),w.borders.forEach(E=>{_.writeXml(E)}),_.closeNode(),this.map.cellStyleXfs.render(_,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),_.openNode("cellXfs",{count:w.styles.length}),w.styles.forEach(E=>{_.writeXml(E)}),_.closeNode()):(this.map.numFmts.render(_,w.numFmts),this.map.fonts.render(_,w.fonts),this.map.fills.render(_,w.fills),this.map.borders.render(_,w.borders),this.map.cellStyleXfs.render(_,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(_,w.styles)),m.STATIC_XFORMS.cellStyles.render(_),this.map.dxfs.render(_,w.dxfs),m.STATIC_XFORMS.tableStyles.render(_),m.STATIC_XFORMS.extLst.render(_),_.closeNode()}parseOpen(_){if(this.parser)return this.parser.parseOpen(_),!0;switch(_.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[_.name],this.parser&&this.parser.parseOpen(_),!0}}parseText(_){this.parser&&this.parser.parseText(_)}parseClose(_){if(this.parser)return this.parser.parseClose(_)||(this.parser=void 0),!0;switch(_){case"styleSheet":{this.model={};const w=(E,D)=>{D.model&&D.model.length&&(this.model[E]=D.model)};if(w("numFmts",this.map.numFmts),w("fonts",this.map.fonts),w("fills",this.map.fills),w("borders",this.map.borders),w("styles",this.map.cellXfs),w("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const E=this.index.numFmt;this.model.numFmts.forEach(D=>{E[D.id]=D.formatCode})}return!1}default:return!0}}addStyleModel(_,w){if(!_)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(_))return this.weakMap.get(_);const E={};if(w=w||o.ValueType.Number,_.numFmt)E.numFmtId=this._addNumFmtStr(_.numFmt);else switch(w){case o.ValueType.Number:E.numFmtId=this._addNumFmtStr("General");break;case o.ValueType.Date:E.numFmtId=this._addNumFmtStr("mm-dd-yy")}_.font&&(E.fontId=this._addFont(_.font)),_.border&&(E.borderId=this._addBorder(_.border)),_.fill&&(E.fillId=this._addFill(_.fill)),_.alignment&&(E.alignment=_.alignment),_.protection&&(E.protection=_.protection);const D=this._addStyle(E);return this.weakMap&&this.weakMap.set(_,D),D}getStyleModel(_){const w=this.model.styles[_];if(!w)return null;let E=this.index.model[_];if(E)return E;if(E=this.index.model[_]={},w.numFmtId){const B=this.index.numFmt[w.numFmtId]||p.getDefaultFmtCode(w.numFmtId);B&&(E.numFmt=B)}function D(B,$,F){if(F||F===0){const N=$[F];N&&(E[B]=N)}}return D("font",this.model.fonts,w.fontId),D("border",this.model.borders,w.borderId),D("fill",this.model.fills,w.fillId),w.alignment&&(E.alignment=w.alignment),w.protection&&(E.protection=w.protection),E}addDxfStyle(_){return _.numFmt&&(_.numFmtId=this._addNumFmtStr(_.numFmt)),this.model.dxfs.push(_),this.model.dxfs.length-1}getDxfStyle(_){return this.model.dxfs[_]}_addStyle(_){const w=this.map.style.toXml(_);let E=this.index.style[w];return E===void 0&&(E=this.index.style[w]=this.model.styles.length,this.model.styles.push(w)),E}_addNumFmtStr(_){let w=p.getDefaultFmtId(_);if(w!==void 0||(w=this.index.numFmt[_],w!==void 0))return w;w=this.index.numFmt[_]=164+this.model.numFmts.length;const E=this.map.numFmt.toXml({id:w,formatCode:_});return this.model.numFmts.push(E),w}_addFont(_){const w=this.map.font.toXml(_);let E=this.index.font[w];return E===void 0&&(E=this.index.font[w]=this.model.fonts.length,this.model.fonts.push(w)),E}_addBorder(_){const w=this.map.border.toXml(_);let E=this.index.border[w];return E===void 0&&(E=this.index.border[w]=this.model.borders.length,this.model.borders.push(w)),E}_addFill(_){const w=this.map.fill.toXml(_);let E=this.index.fill[w];return E===void 0&&(E=this.index.fill[w]=this.model.fills.length,this.model.fills.push(w)),E}}m.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},m.STATIC_XFORMS={cellStyles:new l({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new l({tag:"dxfs",$:{count:0}}),tableStyles:new l({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new l({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},m.Mock=class extends m{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(b){return b.autodrain(),Promise.resolve()}addStyleModel(b,_){switch(_){case o.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const b={numFmtId:p.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(b)}return this._dateStyleId}getStyleModel(){return{}}},n.exports=m},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,n,s){const o=t("../base-xform");class r extends o{constructor(l){super(),this.model=l}get tag(){return"u"}render(l,d){if((d=d||this.model)===!0)l.leafNode("u");else{const c=r.Attributes[d];c&&l.leafNode("u",c)}}parseOpen(l){l.name==="u"&&(this.model=l.attributes.val||!0)}parseText(){}parseClose(){return!1}}r.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},n.exports=r},{"../base-xform":32}],137:[function(t,n,s){const o=t("../base-xform"),r=t("./filter-column-xform");n.exports=class extends o{constructor(){super(),this.map={filterColumn:new r}}get tag(){return"autoFilter"}prepare(a){a.columns.forEach((l,d)=>{this.map.filterColumn.prepare(l,{index:d})})}render(a,l){return a.openNode(this.tag,{ref:l.autoFilterRef}),l.columns.forEach(d=>{this.map.filterColumn.render(a,d)}),a.closeNode(),!0}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:return this.model={autoFilterRef:a.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(a){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+a)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"customFilter"}render(r,a){r.leafNode(this.tag,{val:a.val,operator:a.operator})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val,operator:r.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,n,s){const o=t("../base-xform"),r=t("../list-xform"),a=t("./custom-filter-xform"),l=t("./filter-xform");n.exports=class extends o{constructor(){super(),this.map={customFilters:new r({tag:"customFilters",count:!1,empty:!0,childXform:new a}),filters:new r({tag:"filters",count:!1,empty:!0,childXform:new l})}}get tag(){return"filterColumn"}prepare(d,c){d.colId=c.index.toString()}render(d,c){return c.customFilters?(d.openNode(this.tag,{colId:c.colId,hiddenButton:c.filterButton?"0":"1"}),this.map.customFilters.render(d,c.customFilters),d.closeNode(),!0):(d.leafNode(this.tag,{colId:c.colId,hiddenButton:c.filterButton?"0":"1"}),!0)}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;const{attributes:c}=d;switch(d.name){case this.tag:return this.model={filterButton:c.hiddenButton==="0"},!0;default:if(this.parser=this.map[d.name],this.parser)return this.parseOpen(d),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(d))}}parseText(){}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"filter"}render(r,a){r.leafNode(this.tag,{val:a.val})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"tableColumn"}prepare(r,a){r.id=a.index+1}render(r,a){return r.leafNode(this.tag,{id:a.id.toString(),name:a.name,totalsRowLabel:a.totalsRowLabel,totalsRowFunction:a.totalsRowFunction,dxfId:a.dxfId}),!0}parseOpen(r){if(r.name===this.tag){const{attributes:a}=r;return this.model={name:a.name,totalsRowLabel:a.totalsRowLabel,totalsRowFunction:a.totalsRowFunction,dxfId:a.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,n,s){const o=t("../base-xform");n.exports=class extends o{get tag(){return"tableStyleInfo"}render(r,a){return r.leafNode(this.tag,{name:a.theme?a.theme:void 0,showFirstColumn:a.showFirstColumn?"1":"0",showLastColumn:a.showLastColumn?"1":"0",showRowStripes:a.showRowStripes?"1":"0",showColumnStripes:a.showColumnStripes?"1":"0"}),!0}parseOpen(r){if(r.name===this.tag){const{attributes:a}=r;return this.model={theme:a.name?a.name:null,showFirstColumn:a.showFirstColumn==="1",showLastColumn:a.showLastColumn==="1",showRowStripes:a.showRowStripes==="1",showColumnStripes:a.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,n,s){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),a=t("../list-xform"),l=t("./auto-filter-xform"),d=t("./table-column-xform"),c=t("./table-style-info-xform");class h extends r{constructor(){super(),this.map={autoFilter:new l,tableColumns:new a({tag:"tableColumns",count:!0,empty:!0,childXform:new d}),tableStyleInfo:new c}}prepare(p,f){this.map.autoFilter.prepare(p),this.map.tableColumns.prepare(p.columns,f)}get tag(){return"table"}render(p,f){p.openXml(o.StdDocAttributes),p.openNode(this.tag,{...h.TABLE_ATTRIBUTES,id:f.id,name:f.name,displayName:f.displayName||f.name,ref:f.tableRef,totalsRowCount:f.totalsRow?"1":void 0,totalsRowShown:f.totalsRow?void 0:"1",headerRowCount:f.headerRow?"1":"0"}),this.map.autoFilter.render(p,f),this.map.tableColumns.render(p,f.columns),this.map.tableStyleInfo.render(p,f.style),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;const{name:f,attributes:g}=p;switch(f){case this.tag:this.reset(),this.model={name:g.name,displayName:g.displayName||g.name,tableRef:g.ref,totalsRow:g.totalsRowCount==="1",headerRow:g.headerRowCount==="1"};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((f,g)=>{this.model.columns[g].filterButton=f.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(p,f){p.columns.forEach(g=>{g.dxfId!==void 0&&(g.style=f.styles.getDxfStyle(g.dxfId))})}}h.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},n.exports=h},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,n,s){(function(o,r){(function(){const a=t("fs"),l=t("jszip"),{PassThrough:d}=t("readable-stream"),c=t("../utils/zip-stream"),h=t("../utils/stream-buf"),u=t("../utils/utils"),p=t("../utils/xml-stream"),{bufferToString:f}=t("../utils/browser-buffer-decode"),g=t("./xform/style/styles-xform"),m=t("./xform/core/core-xform"),b=t("./xform/strings/shared-strings-xform"),_=t("./xform/core/relationships-xform"),w=t("./xform/core/content-types-xform"),E=t("./xform/core/app-xform"),D=t("./xform/book/workbook-xform"),B=t("./xform/sheet/worksheet-xform"),$=t("./xform/drawing/drawing-xform"),F=t("./xform/table/table-xform"),N=t("./xform/comment/comments-xform"),L=t("./xform/comment/vml-notes-xform"),j=t("./xml/theme1");class H{constructor(k){this.workbook=k}async readFile(k,S){if(!await u.fs.exists(k))throw new Error("File not found: "+k);const v=a.createReadStream(k);try{const y=await this.read(v,S);return v.close(),y}catch(y){throw v.close(),y}}parseRels(k){return new _().parseStream(k)}parseWorkbook(k){return new D().parseStream(k)}parseSharedStrings(k){return new b().parseStream(k)}reconcile(k,S){const v=new D,y=new B(S),C=new $,x=new F;v.reconcile(k);const T={media:k.media,mediaIndex:k.mediaIndex};Object.keys(k.drawings).forEach(W=>{const K=k.drawings[W],Z=k.drawingRels[W];Z&&(T.rels=Z.reduce((P,G)=>(P[G.Id]=G,P),{}),(K.anchors||[]).forEach(P=>{const G=P.picture&&P.picture.hyperlinks;G&&T.rels[G.rId]&&(G.hyperlink=T.rels[G.rId].Target,delete G.rId)}),C.reconcile(K,T))});const M={styles:k.styles};Object.values(k.tables).forEach(W=>{x.reconcile(W,M)});const V={styles:k.styles,sharedStrings:k.sharedStrings,media:k.media,mediaIndex:k.mediaIndex,date1904:k.properties&&k.properties.date1904,drawings:k.drawings,comments:k.comments,tables:k.tables,vmlDrawings:k.vmlDrawings};k.worksheets.forEach(W=>{W.relationships=k.worksheetRels[W.sheetNo],y.reconcile(W,V)}),delete k.worksheetHash,delete k.worksheetRels,delete k.globalRels,delete k.sharedStrings,delete k.workbookRels,delete k.sheetDefs,delete k.styles,delete k.mediaIndex,delete k.drawings,delete k.drawingRels,delete k.vmlDrawings}async _processWorksheetEntry(k,S,v,y,C){const x=new B(y),T=await x.parseStream(k);T.sheetNo=v,S.worksheetHash[C]=T,S.worksheets.push(T)}async _processCommentEntry(k,S,v){const y=new N,C=await y.parseStream(k);S.comments[`../${v}.xml`]=C}async _processTableEntry(k,S,v){const y=new F,C=await y.parseStream(k);S.tables[`../tables/${v}.xml`]=C}async _processWorksheetRelsEntry(k,S,v){const y=new _,C=await y.parseStream(k);S.worksheetRels[v]=C}async _processMediaEntry(k,S,v){const y=v.lastIndexOf(".");if(y>=1){const C=v.substr(y+1),x=v.substr(0,y);await new Promise((T,M)=>{const V=new h;V.on("finish",()=>{S.mediaIndex[v]=S.media.length,S.mediaIndex[x]=S.media.length;const W={type:"image",name:x,extension:C,buffer:V.toBuffer()};S.media.push(W),T()}),k.on("error",W=>{M(W)}),k.pipe(V)})}}async _processDrawingEntry(k,S,v){const y=new $,C=await y.parseStream(k);S.drawings[v]=C}async _processDrawingRelsEntry(k,S,v){const y=new _,C=await y.parseStream(k);S.drawingRels[v]=C}async _processVmlDrawingEntry(k,S,v){const y=new L,C=await y.parseStream(k);S.vmlDrawings[`../drawings/${v}.vml`]=C}async _processThemeEntry(k,S,v){await new Promise((y,C)=>{const x=new h;k.on("error",C),x.on("error",C),x.on("finish",()=>{S.themes[v]=x.read().toString(),y()}),k.pipe(x)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(k,S){!k[Symbol.asyncIterator]&&k.pipe&&(k=k.pipe(new d));const v=[];for await(const y of k)v.push(y);return this.load(r.concat(v),S)}async load(k,S){let v;v=S&&S.base64?r.from(k.toString(),"base64"):k;const y={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},C=await l.loadAsync(v);for(const x of Object.values(C.files))if(!x.dir){let T,M=x.name;if(M[0]==="/"&&(M=M.substr(1)),M.match(/xl\/media\//)||M.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))T=new d,T.write(await x.async("nodebuffer"));else{let V;T=new d({writableObjectMode:!0,readableObjectMode:!0}),V=o.browser?f(await x.async("nodebuffer")):await x.async("string");const W=16384;for(let K=0;K<V.length;K+=W)T.write(V.substring(K,K+W))}switch(T.end(),M){case"_rels/.rels":y.globalRels=await this.parseRels(T);break;case"xl/workbook.xml":{const V=await this.parseWorkbook(T);y.sheets=V.sheets,y.definedNames=V.definedNames,y.views=V.views,y.properties=V.properties,y.calcProperties=V.calcProperties;break}case"xl/_rels/workbook.xml.rels":y.workbookRels=await this.parseRels(T);break;case"xl/sharedStrings.xml":y.sharedStrings=new b,await y.sharedStrings.parseStream(T);break;case"xl/styles.xml":y.styles=new g,await y.styles.parseStream(T);break;case"docProps/app.xml":{const V=new E,W=await V.parseStream(T);y.company=W.company,y.manager=W.manager;break}case"docProps/core.xml":{const V=new m,W=await V.parseStream(T);Object.assign(y,W);break}default:{let V=M.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(V){await this._processWorksheetEntry(T,y,V[1],S,M);break}if(V=M.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),V){await this._processWorksheetRelsEntry(T,y,V[1]);break}if(V=M.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),V){await this._processThemeEntry(T,y,V[1]);break}if(V=M.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),V){await this._processMediaEntry(T,y,V[1]);break}if(V=M.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),V){await this._processDrawingEntry(T,y,V[1]);break}if(V=M.match(/xl\/(comments\d+)[.]xml/),V){await this._processCommentEntry(T,y,V[1]);break}if(V=M.match(/xl\/tables\/(table\d+)[.]xml/),V){await this._processTableEntry(T,y,V[1]);break}if(V=M.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),V){await this._processDrawingRelsEntry(T,y,V[1]);break}if(V=M.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),V){await this._processVmlDrawingEntry(T,y,V[1]);break}}}}return this.reconcile(y,S),this.workbook.model=y,this.workbook}async addMedia(k,S){await Promise.all(S.media.map(async v=>{if(v.type==="image"){const y=`xl/media/${v.name}.${v.extension}`;if(v.filename){const C=await function(x,T){return new Promise((M,V)=>{a.readFile(x,T,(W,K)=>{W?V(W):M(K)})})}(v.filename);return k.append(C,{name:y})}if(v.buffer)return k.append(v.buffer,{name:y});if(v.base64){const C=v.base64,x=C.substring(C.indexOf(",")+1);return k.append(x,{name:y,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(k,S){const v=new $,y=new _;S.worksheets.forEach(C=>{const{drawing:x}=C;if(x){v.prepare(x,{});let T=v.toXml(x);k.append(T,{name:`xl/drawings/${x.name}.xml`}),T=y.toXml(x.rels),k.append(T,{name:`xl/drawings/_rels/${x.name}.xml.rels`})}})}addTables(k,S){const v=new F;S.worksheets.forEach(y=>{const{tables:C}=y;C.forEach(x=>{v.prepare(x,{});const T=v.toXml(x);k.append(T,{name:"xl/tables/"+x.target})})})}async addContentTypes(k,S){const v=new w().toXml(S);k.append(v,{name:"[Content_Types].xml"})}async addApp(k,S){const v=new E().toXml(S);k.append(v,{name:"docProps/app.xml"})}async addCore(k,S){const v=new m;k.append(v.toXml(S),{name:"docProps/core.xml"})}async addThemes(k,S){const v=S.themes||{theme1:j};Object.keys(v).forEach(y=>{const C=v[y],x=`xl/theme/${y}.xml`;k.append(C,{name:x})})}async addOfficeRels(k){const S=new _().toXml([{Id:"rId1",Type:H.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:H.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:H.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);k.append(S,{name:"_rels/.rels"})}async addWorkbookRels(k,S){let v=1;const y=[{Id:"rId"+v++,Type:H.RelType.Styles,Target:"styles.xml"},{Id:"rId"+v++,Type:H.RelType.Theme,Target:"theme/theme1.xml"}];S.sharedStrings.count&&y.push({Id:"rId"+v++,Type:H.RelType.SharedStrings,Target:"sharedStrings.xml"}),S.worksheets.forEach(x=>{x.rId="rId"+v++,y.push({Id:x.rId,Type:H.RelType.Worksheet,Target:`worksheets/sheet${x.id}.xml`})});const C=new _().toXml(y);k.append(C,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(k,S){S.sharedStrings&&S.sharedStrings.count&&k.append(S.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(k,S){const{xml:v}=S.styles;v&&k.append(v,{name:"xl/styles.xml"})}async addWorkbook(k,S){const v=new D;k.append(v.toXml(S),{name:"xl/workbook.xml"})}async addWorksheets(k,S){const v=new B,y=new _,C=new N,x=new L;S.worksheets.forEach(T=>{let M=new p;v.render(M,T),k.append(M.xml,{name:`xl/worksheets/sheet${T.id}.xml`}),T.rels&&T.rels.length&&(M=new p,y.render(M,T.rels),k.append(M.xml,{name:`xl/worksheets/_rels/sheet${T.id}.xml.rels`})),T.comments.length>0&&(M=new p,C.render(M,T),k.append(M.xml,{name:`xl/comments${T.id}.xml`}),M=new p,x.render(M,T),k.append(M.xml,{name:`xl/drawings/vmlDrawing${T.id}.vml`}))})}_finalize(k){return new Promise((S,v)=>{k.on("finish",()=>{S(this)}),k.on("error",v),k.finalize()})}prepareModel(k,S){k.creator=k.creator||"ExcelJS",k.lastModifiedBy=k.lastModifiedBy||"ExcelJS",k.created=k.created||new Date,k.modified=k.modified||new Date,k.useSharedStrings=S.useSharedStrings===void 0||S.useSharedStrings,k.useStyles=S.useStyles===void 0||S.useStyles,k.sharedStrings=new b,k.styles=k.useStyles?new g(!0):new g.Mock;const v=new D,y=new B;v.prepare(k);const C={sharedStrings:k.sharedStrings,styles:k.styles,date1904:k.properties.date1904,drawingsCount:0,media:k.media};C.drawings=k.drawings=[],C.commentRefs=k.commentRefs=[];let x=0;k.tables=[],k.worksheets.forEach(T=>{T.tables.forEach(M=>{x++,M.target=`table${x}.xml`,M.id=x,k.tables.push(M)}),y.prepare(T,C)})}async write(k,S){S=S||{};const{model:v}=this.workbook,y=new c.ZipWriter(S.zip);return y.pipe(k),this.prepareModel(v,S),await this.addContentTypes(y,v),await this.addOfficeRels(y,v),await this.addWorkbookRels(y,v),await this.addWorksheets(y,v),await this.addSharedStrings(y,v),await this.addDrawings(y,v),await this.addTables(y,v),await Promise.all([this.addThemes(y,v),this.addStyles(y,v)]),await this.addMedia(y,v),await Promise.all([this.addApp(y,v),this.addCore(y,v)]),await this.addWorkbook(y,v),this._finalize(y)}writeFile(k,S){const v=a.createWriteStream(k);return new Promise((y,C)=>{v.on("finish",()=>{y()}),v.on("error",x=>{C(x)}),this.write(v,S).then(()=>{v.end()}).catch(x=>{C(x)})})}async writeBuffer(k){const S=new h;return await this.write(S,k),S.read()}}H.RelType=t("./rel-type"),n.exports=H}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,n,s){n.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,n,s){(function(o){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.CsvFormatterStream=void 0;const r=t("stream"),a=t("./formatter");class l extends r.Transform{constructor(c){super({writableObjectMode:c.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=c,this.rowFormatter=new a.RowFormatter(c),this.hasWrittenBOM=!c.writeBOM}transform(c){return this.rowFormatter.rowTransform=c,this}_transform(c,h,u){let p=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(c,(f,g)=>f?(p=!0,u(f)):(g&&g.forEach(m=>{this.push(o.from(m,"utf8"))}),p=!0,u()))}catch(f){if(p)throw f;u(f)}}_flush(c){this.rowFormatter.finish((h,u)=>h?c(h):(u&&u.forEach(p=>{this.push(o.from(p,"utf8"))}),c()))}}s.CsvFormatterStream=l}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.FormatterOptions=void 0,s.FormatterOptions=class{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,o||{}),(o==null?void 0:o.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(o==null?void 0:o.quote)===!0?this.quote='"':(o==null?void 0:o.quote)===!1&&(this.quote=""),typeof(o==null?void 0:o.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((r=o.writeHeaders)===null||r===void 0||r),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,n,s){var o=function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0}),s.FieldFormatter=void 0;const r=o(t("lodash.isboolean")),a=o(t("lodash.isnil")),l=o(t("lodash.escaperegexp"));s.FieldFormatter=class{constructor(d){this._headers=null,this.formatterOptions=d,d.headers!==null&&(this.headers=d.headers),this.REPLACE_REGEXP=new RegExp(d.quote,"g");const c=`[${d.delimiter}${l.default(d.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(c)}set headers(d){this._headers=d}shouldQuote(d,c){const h=c?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return r.default(h)?h:Array.isArray(h)?h[d]:this._headers!==null&&h[this._headers[d]]}format(d,c,h){const u=(""+(a.default(d)?"":d)).replace(/\0/g,""),{formatterOptions:p}=this;return p.quote!==""&&u.indexOf(p.quote)!==-1?this.quoteField(u.replace(this.REPLACE_REGEXP,p.escapedQuote)):u.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(c,h)?this.quoteField(u):u}quoteField(d){const{quote:c}=this.formatterOptions;return`${c}${d}${c}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,n,s){var o=function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0}),s.RowFormatter=void 0;const r=o(t("lodash.isfunction")),a=o(t("lodash.isequal")),l=t("./FieldFormatter"),d=t("../types");class c{constructor(u){this.rowCount=0,this.formatterOptions=u,this.fieldFormatter=new l.FieldFormatter(u),this.headers=u.headers,this.shouldWriteHeaders=u.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),u.transform&&(this.rowTransform=u.transform)}static isRowHashArray(u){return!!Array.isArray(u)&&Array.isArray(u[0])&&u[0].length===2}static isRowArray(u){return Array.isArray(u)&&!this.isRowHashArray(u)}static gatherHeaders(u){return c.isRowHashArray(u)?u.map(p=>p[0]):Array.isArray(u)?u:Object.keys(u)}static createTransform(u){return d.isSyncTransform(u)?(p,f)=>{let g=null;try{g=u(p)}catch(m){return f(m)}return f(null,g)}:(p,f)=>{u(p,f)}}set rowTransform(u){if(!r.default(u))throw new TypeError("The transform should be a function");this._rowTransform=c.createTransform(u)}format(u,p){this.callTransformer(u,(f,g)=>{if(f)return p(f);if(!u)return p(null);const m=[];if(g){const{shouldFormatColumns:b,headers:_}=this.checkHeaders(g);if(this.shouldWriteHeaders&&_&&!this.hasWrittenHeaders&&(m.push(this.formatColumns(_,!0)),this.hasWrittenHeaders=!0),b){const w=this.gatherColumns(g);m.push(this.formatColumns(w,!1))}}return p(null,m)})}finish(u){const p=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return u(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));p.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&p.push(this.formatterOptions.rowDelimiter),u(null,p)}checkHeaders(u){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const p=c.gatherHeaders(u);return this.headers=p,this.fieldFormatter.headers=p,this.shouldWriteHeaders?{shouldFormatColumns:!a.default(p,u),headers:p}:{shouldFormatColumns:!0,headers:null}}gatherColumns(u){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(u)?c.isRowHashArray(u)?this.headers.map((p,f)=>{const g=u[f];return g?g[1]:""}):c.isRowArray(u)&&!this.shouldWriteHeaders?u:this.headers.map((p,f)=>u[f]):this.headers.map(p=>u[p])}callTransformer(u,p){return this._rowTransform?this._rowTransform(u,p):p(null,u)}formatColumns(u,p){const f=u.map((m,b)=>this.fieldFormatter.format(m,b,p)).join(this.formatterOptions.delimiter),{rowCount:g}=this;return this.rowCount+=1,g?[this.formatterOptions.rowDelimiter,f].join(""):f}}s.RowFormatter=c},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.FieldFormatter=s.RowFormatter=void 0;var o=t("./RowFormatter");Object.defineProperty(s,"RowFormatter",{enumerable:!0,get:function(){return o.RowFormatter}});var r=t("./FieldFormatter");Object.defineProperty(s,"FieldFormatter",{enumerable:!0,get:function(){return r.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,n,s){(function(o){(function(){var r=Object.create?function(b,_,w,E){E===void 0&&(E=w),Object.defineProperty(b,E,{enumerable:!0,get:function(){return _[w]}})}:function(b,_,w,E){E===void 0&&(E=w),b[E]=_[w]},a=Object.create?function(b,_){Object.defineProperty(b,"default",{enumerable:!0,value:_})}:function(b,_){b.default=_},l=function(b){if(b&&b.__esModule)return b;var _={};if(b!=null)for(var w in b)w!=="default"&&Object.prototype.hasOwnProperty.call(b,w)&&r(_,b,w);return a(_,b),_},d=function(b,_){for(var w in b)w==="default"||Object.prototype.hasOwnProperty.call(_,w)||r(_,b,w)};Object.defineProperty(s,"__esModule",{value:!0}),s.writeToPath=s.writeToString=s.writeToBuffer=s.writeToStream=s.write=s.format=s.FormatterOptions=s.CsvFormatterStream=void 0;const c=t("util"),h=t("stream"),u=l(t("fs")),p=t("./FormatterOptions"),f=t("./CsvFormatterStream");d(t("./types"),s);var g=t("./CsvFormatterStream");Object.defineProperty(s,"CsvFormatterStream",{enumerable:!0,get:function(){return g.CsvFormatterStream}});var m=t("./FormatterOptions");Object.defineProperty(s,"FormatterOptions",{enumerable:!0,get:function(){return m.FormatterOptions}}),s.format=b=>new f.CsvFormatterStream(new p.FormatterOptions(b)),s.write=(b,_)=>{const w=s.format(_),E=c.promisify((D,B)=>{w.write(D,void 0,B)});return b.reduce((D,B)=>D.then(()=>E(B)),Promise.resolve()).then(()=>w.end()).catch(D=>{w.emit("error",D)}),w},s.writeToStream=(b,_,w)=>s.write(_,w).pipe(b),s.writeToBuffer=function(b){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const w=[],E=new h.Writable({write(D,B,$){w.push(D),$()}});return new Promise((D,B)=>{E.on("error",B).on("finish",()=>D(o.concat(w))),s.write(b,_).pipe(E)})},s.writeToString=(b,_)=>s.writeToBuffer(b,_).then(w=>w.toString()),s.writeToPath=(b,_,w)=>{const E=u.createWriteStream(b,{encoding:"utf8"});return s.write(_,w).pipe(E)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isSyncTransform=void 0,s.isSyncTransform=o=>o.length===1},{}],153:[function(t,n,s){(function(o){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.CsvParserStream=void 0;const r=t("string_decoder"),a=t("stream"),l=t("./transforms"),d=t("./parser");class c extends a.Transform{constructor(u){super({objectMode:u.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=u,this.parser=new d.Parser(u),this.headerTransformer=new l.HeaderTransformer(u),this.decoder=new r.StringDecoder(u.encoding),this.rowTransformerValidator=new l.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(u){return this.rowTransformerValidator.rowTransform=u,this}validate(u){return this.rowTransformerValidator.rowValidator=u,this}emit(u){if(u==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];return super.emit(u,...f)}_transform(u,p,f){if(this.hasHitRowLimit)return f();const g=c.wrapDoneCallback(f);try{const{lines:m}=this,b=m+this.decoder.write(u),_=this.parse(b,!0);return this.processRows(_,g)}catch(m){return g(m)}}_flush(u){const p=c.wrapDoneCallback(u);if(this.hasHitRowLimit)return p();try{const f=this.lines+this.decoder.end(),g=this.parse(f,!1);return this.processRows(g,p)}catch(f){return p(f)}}parse(u,p){if(!u)return[];const{line:f,rows:g}=this.parser.parse(u,p);return this.lines=f,g}processRows(u,p){const f=u.length,g=m=>{const b=E=>E?p(E):m%100!=0?g(m+1):void o(()=>g(m+1));if(this.checkAndEmitHeaders(),m>=f||this.hasHitRowLimit)return p();if(this.parsedLineCount+=1,this.shouldSkipLine)return b();const _=u[m];this.rowCount+=1,this.parsedRowCount+=1;const w=this.rowCount;return this.transformRow(_,(E,D)=>{if(E)return this.rowCount-=1,b(E);if(!D)return b(new Error("expected transform result"));if(D.isValid){if(D.row)return this.pushRow(D.row,b)}else this.emit("data-invalid",D.row,w,D.reason);return b()})};g(0)}transformRow(u,p){try{this.headerTransformer.transform(u,(f,g)=>f?p(f):g?g.isValid?g.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(g.row,p):this.skipRow(p):(this.rowCount-=1,this.parsedRowCount-=1,p(null,{row:null,isValid:!0})):this.shouldEmitRows?p(null,{isValid:!1,row:u}):this.skipRow(p):p(new Error("Expected result from header transform")))}catch(f){p(f)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(u){return this.rowCount-=1,u(null,{row:null,isValid:!0})}pushRow(u,p){try{this.parserOptions.objectMode?this.push(u):this.push(JSON.stringify(u)),p()}catch(f){p(f)}}static wrapDoneCallback(u){let p=!1;return function(f){if(f){if(p)throw f;return p=!0,void u(f)}for(var g=arguments.length,m=new Array(g>1?g-1:0),b=1;b<g;b++)m[b-1]=arguments[b];u(...m)}}}s.CsvParserStream=c}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,n,s){var o=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(s,"__esModule",{value:!0}),s.ParserOptions=void 0;const r=o(t("lodash.escaperegexp")),a=o(t("lodash.isnil"));s.ParserOptions=class{constructor(l){var d;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,l||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=r.default(this.delimiter),this.escapeChar=(d=this.escape)!==null&&d!==void 0?d:this.quote,this.supportsComments=!a.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,n,s){var o=Object.create?function(g,m,b,_){_===void 0&&(_=b),Object.defineProperty(g,_,{enumerable:!0,get:function(){return m[b]}})}:function(g,m,b,_){_===void 0&&(_=b),g[_]=m[b]},r=Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m},a=function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var b in g)b!=="default"&&Object.prototype.hasOwnProperty.call(g,b)&&o(m,g,b);return r(m,g),m},l=function(g,m){for(var b in g)b==="default"||Object.prototype.hasOwnProperty.call(m,b)||o(m,g,b)};Object.defineProperty(s,"__esModule",{value:!0}),s.parseString=s.parseFile=s.parseStream=s.parse=s.ParserOptions=s.CsvParserStream=void 0;const d=a(t("fs")),c=t("stream"),h=t("./ParserOptions"),u=t("./CsvParserStream");l(t("./types"),s);var p=t("./CsvParserStream");Object.defineProperty(s,"CsvParserStream",{enumerable:!0,get:function(){return p.CsvParserStream}});var f=t("./ParserOptions");Object.defineProperty(s,"ParserOptions",{enumerable:!0,get:function(){return f.ParserOptions}}),s.parse=g=>new u.CsvParserStream(new h.ParserOptions(g)),s.parseStream=(g,m)=>g.pipe(new u.CsvParserStream(new h.ParserOptions(m))),s.parseFile=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.createReadStream(g).pipe(new u.CsvParserStream(new h.ParserOptions(m)))},s.parseString=(g,m)=>{const b=new c.Readable;return b.push(g),b.push(null),b.pipe(new u.CsvParserStream(new h.ParserOptions(m)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Parser=void 0;const o=t("./Scanner"),r=t("./RowParser"),a=t("./Token");class l{constructor(c){this.parserOptions=c,this.rowParser=new r.RowParser(this.parserOptions)}static removeBOM(c){return c&&c.charCodeAt(0)===65279?c.slice(1):c}parse(c,h){const u=new o.Scanner({line:l.removeBOM(c),parserOptions:this.parserOptions,hasMoreData:h});return this.parserOptions.supportsComments?this.parseWithComments(u):this.parseWithoutComments(u)}parseWithoutComments(c){const h=[];let u=!0;for(;u;)u=this.parseRow(c,h);return{line:c.line,rows:h}}parseWithComments(c){const{parserOptions:h}=this,u=[];for(let p=c.nextCharacterToken;p!==null;p=c.nextCharacterToken)if(a.Token.isTokenComment(p,h)){if(c.advancePastLine()===null)return{line:c.lineFromCursor,rows:u};if(!c.hasMoreCharacters)return{line:c.lineFromCursor,rows:u};c.truncateToCursor()}else if(!this.parseRow(c,u))break;return{line:c.line,rows:u}}parseRow(c,h){if(!c.nextNonSpaceToken)return!1;const u=this.rowParser.parse(c);return u!==null&&(this.parserOptions.ignoreEmpty&&r.RowParser.isEmptyRow(u)||h.push(u),!0)}}s.Parser=l},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.RowParser=void 0;const o=t("./column"),r=t("./Token");s.RowParser=class{constructor(a){this.parserOptions=a,this.columnParser=new o.ColumnParser(a)}static isEmptyRow(a){return a.join("").replace(/\s+/g,"")===""}parse(a){const{parserOptions:l}=this,{hasMoreData:d}=a,c=a,h=[];let u=this.getStartToken(c,h);for(;u;){if(r.Token.isTokenRowDelimiter(u))return c.advancePastToken(u),!c.hasMoreCharacters&&r.Token.isTokenCarriageReturn(u,l)&&d?null:(c.truncateToCursor(),h);if(!this.shouldSkipColumnParse(c,u,h)){const p=this.columnParser.parse(c);if(p===null)return null;h.push(p)}u=c.nextNonSpaceToken}return d?null:(c.truncateToCursor(),h)}getStartToken(a,l){const d=a.nextNonSpaceToken;return d!==null&&r.Token.isTokenDelimiter(d,this.parserOptions)?(l.push(""),a.nextNonSpaceToken):d}shouldSkipColumnParse(a,l,d){const{parserOptions:c}=this;if(r.Token.isTokenDelimiter(l,c)){a.advancePastToken(l);const h=a.nextCharacterToken;if(!a.hasMoreCharacters||h!==null&&r.Token.isTokenRowDelimiter(h)||h!==null&&r.Token.isTokenDelimiter(h,c))return d.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Scanner=void 0;const o=t("./Token"),r=/((?:\r\n)|\n|\r)/;s.Scanner=class{constructor(a){this.cursor=0,this.line=a.line,this.lineLength=this.line.length,this.parserOptions=a.parserOptions,this.hasMoreData=a.hasMoreData,this.cursor=a.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:a}=this,l=this.parserOptions.NEXT_TOKEN_REGEXP;if(a.search(l)===-1)return null;const d=l.exec(a);if(d==null)return null;const c=d[1],h=this.cursor+(d.index||0);return new o.Token({token:c,startCursor:h,endCursor:h+c.length-1})}get nextCharacterToken(){const{cursor:a,lineLength:l}=this;return l<=a?null:new o.Token({token:this.line[a],startCursor:a,endCursor:a})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const a=r.exec(this.lineFromCursor);return a?(this.cursor+=(a.index||0)+a[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(a){return this.cursor=a,this}advanceToToken(a){return this.cursor=a.startCursor,this}advancePastToken(a){return this.cursor=a.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Token=void 0,s.Token=class{constructor(o){this.token=o.token,this.startCursor=o.startCursor,this.endCursor=o.endCursor}static isTokenRowDelimiter(o){const r=o.token;return r==="\r"||r===`
`||r===`\r
`}static isTokenCarriageReturn(o,r){return o.token===r.carriageReturn}static isTokenComment(o,r){return r.supportsComments&&!!o&&o.token===r.comment}static isTokenEscapeCharacter(o,r){return o.token===r.escapeChar}static isTokenQuote(o,r){return o.token===r.quote}static isTokenDelimiter(o,r){return o.token===r.delimiter}}},{}],160:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ColumnFormatter=void 0,s.ColumnFormatter=class{constructor(o){o.trim?this.format=r=>r.trim():o.ltrim?this.format=r=>r.trimLeft():o.rtrim?this.format=r=>r.trimRight():this.format=r=>r}}},{}],161:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ColumnParser=void 0;const o=t("./NonQuotedColumnParser"),r=t("./QuotedColumnParser"),a=t("../Token");s.ColumnParser=class{constructor(l){this.parserOptions=l,this.quotedColumnParser=new r.QuotedColumnParser(l),this.nonQuotedColumnParser=new o.NonQuotedColumnParser(l)}parse(l){const{nextNonSpaceToken:d}=l;return d!==null&&a.Token.isTokenQuote(d,this.parserOptions)?(l.advanceToToken(d),this.quotedColumnParser.parse(l)):this.nonQuotedColumnParser.parse(l)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.NonQuotedColumnParser=void 0;const o=t("./ColumnFormatter"),r=t("../Token");s.NonQuotedColumnParser=class{constructor(a){this.parserOptions=a,this.columnFormatter=new o.ColumnFormatter(a)}parse(a){if(!a.hasMoreCharacters)return null;const{parserOptions:l}=this,d=[];let c=a.nextCharacterToken;for(;c&&!r.Token.isTokenDelimiter(c,l)&&!r.Token.isTokenRowDelimiter(c);c=a.nextCharacterToken)d.push(c.token),a.advancePastToken(c);return this.columnFormatter.format(d.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.QuotedColumnParser=void 0;const o=t("./ColumnFormatter"),r=t("../Token");s.QuotedColumnParser=class{constructor(a){this.parserOptions=a,this.columnFormatter=new o.ColumnFormatter(a)}parse(a){if(!a.hasMoreCharacters)return null;const l=a.cursor,{foundClosingQuote:d,col:c}=this.gatherDataBetweenQuotes(a);if(!d){if(a.advanceTo(l),!a.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${a.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(a),c}gatherDataBetweenQuotes(a){const{parserOptions:l}=this;let d=!1,c=!1;const h=[];let u=a.nextCharacterToken;for(;!c&&u!==null;u=a.nextCharacterToken){const p=r.Token.isTokenQuote(u,l);if(!d&&p)d=!0;else if(d)if(r.Token.isTokenEscapeCharacter(u,l)){a.advancePastToken(u);const f=a.nextCharacterToken;f!==null&&(r.Token.isTokenQuote(f,l)||r.Token.isTokenEscapeCharacter(f,l))?(h.push(f.token),u=f):p?c=!0:h.push(u.token)}else p?c=!0:h.push(u.token);a.advancePastToken(u)}return{col:this.columnFormatter.format(h.join("")),foundClosingQuote:c}}checkForMalformedColumn(a){const{parserOptions:l}=this,{nextNonSpaceToken:d}=a;if(d){const c=r.Token.isTokenDelimiter(d,l),h=r.Token.isTokenRowDelimiter(d);if(!c&&!h){const u=a.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${l.escapedDelimiter}' OR new line got: '${d.token}'. at '${u}`)}a.advanceToToken(d)}else a.hasMoreData||a.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ColumnFormatter=s.QuotedColumnParser=s.NonQuotedColumnParser=s.ColumnParser=void 0;var o=t("./ColumnParser");Object.defineProperty(s,"ColumnParser",{enumerable:!0,get:function(){return o.ColumnParser}});var r=t("./NonQuotedColumnParser");Object.defineProperty(s,"NonQuotedColumnParser",{enumerable:!0,get:function(){return r.NonQuotedColumnParser}});var a=t("./QuotedColumnParser");Object.defineProperty(s,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}});var l=t("./ColumnFormatter");Object.defineProperty(s,"ColumnFormatter",{enumerable:!0,get:function(){return l.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.QuotedColumnParser=s.NonQuotedColumnParser=s.ColumnParser=s.Token=s.Scanner=s.RowParser=s.Parser=void 0;var o=t("./Parser");Object.defineProperty(s,"Parser",{enumerable:!0,get:function(){return o.Parser}});var r=t("./RowParser");Object.defineProperty(s,"RowParser",{enumerable:!0,get:function(){return r.RowParser}});var a=t("./Scanner");Object.defineProperty(s,"Scanner",{enumerable:!0,get:function(){return a.Scanner}});var l=t("./Token");Object.defineProperty(s,"Token",{enumerable:!0,get:function(){return l.Token}});var d=t("./column");Object.defineProperty(s,"ColumnParser",{enumerable:!0,get:function(){return d.ColumnParser}}),Object.defineProperty(s,"NonQuotedColumnParser",{enumerable:!0,get:function(){return d.NonQuotedColumnParser}}),Object.defineProperty(s,"QuotedColumnParser",{enumerable:!0,get:function(){return d.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,n,s){var o=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(s,"__esModule",{value:!0}),s.HeaderTransformer=void 0;const r=o(t("lodash.isundefined")),a=o(t("lodash.isfunction")),l=o(t("lodash.uniq")),d=o(t("lodash.groupby"));s.HeaderTransformer=class{constructor(c){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=c,c.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(c.headers)?this.setHeaders(c.headers):a.default(c.headers)&&(this.headersTransform=c.headers)}transform(c,h){return this.shouldMapRow(c)?h(null,this.processRow(c)):h(null,{row:null,isValid:!0})}shouldMapRow(c){const{parserOptions:h}=this;if(!this.headersTransform&&h.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(c)){if(this.headersTransform)this.setHeaders(this.headersTransform(c));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(c)}return!1}return!0}processRow(c){if(!this.headers)return{row:c,isValid:!0};const{parserOptions:h}=this;if(!h.discardUnmappedColumns&&c.length>this.headersLength){if(!h.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${c.length}`);return{row:c,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${c.length}`}}return h.strictColumnHandling&&c.length<this.headersLength?{row:c,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${c.length}`}:{row:this.mapHeaders(c),isValid:!0}}mapHeaders(c){const h={},{headers:u,headersLength:p}=this;for(let f=0;f<p;f+=1){const g=u[f];if(!r.default(g)){const m=c[f];r.default(m)?h[g]="":h[g]=m}}return h}setHeaders(c){var h;const u=c.filter(p=>!!p);if(l.default(u).length!==u.length){const p=d.default(u),f=Object.keys(p).filter(g=>p[g].length>1);throw new Error("Duplicate headers found "+JSON.stringify(f))}this.headers=c,this.receivedHeaders=!0,this.headersLength=((h=this.headers)===null||h===void 0?void 0:h.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,n,s){var o=function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0}),s.RowTransformerValidator=void 0;const r=o(t("lodash.isfunction")),a=t("../types");class l{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(c){return a.isSyncTransform(c)?(h,u)=>{let p=null;try{p=c(h)}catch(f){return u(f)}return u(null,p)}:c}static createValidator(c){return a.isSyncValidate(c)?(h,u)=>{u(null,{row:h,isValid:c(h)})}:(h,u)=>{c(h,(p,f,g)=>p?u(p):u(null,f?{row:h,isValid:f,reason:g}:{row:h,isValid:!1,reason:g}))}}set rowTransform(c){if(!r.default(c))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(c)}set rowValidator(c){if(!r.default(c))throw new TypeError("The validate should be a function");this._rowValidator=l.createValidator(c)}transformAndValidate(c,h){return this.callTransformer(c,(u,p)=>u?h(u):p?this.callValidator(p,(f,g)=>f?h(f):g&&!g.isValid?h(null,{row:p,isValid:!1,reason:g.reason}):h(null,{row:p,isValid:!0})):h(null,{row:null,isValid:!0}))}callTransformer(c,h){return this._rowTransform?this._rowTransform(c,h):h(null,c)}callValidator(c,h){return this._rowValidator?this._rowValidator(c,h):h(null,{row:c,isValid:!0})}}s.RowTransformerValidator=l},{"../types":169,"lodash.isfunction":446}],168:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.HeaderTransformer=s.RowTransformerValidator=void 0;var o=t("./RowTransformerValidator");Object.defineProperty(s,"RowTransformerValidator",{enumerable:!0,get:function(){return o.RowTransformerValidator}});var r=t("./HeaderTransformer");Object.defineProperty(s,"HeaderTransformer",{enumerable:!0,get:function(){return r.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isSyncValidate=s.isSyncTransform=void 0,s.isSyncTransform=o=>o.length===1,s.isSyncValidate=o=>o.length===1},{}],170:[function(t,n,s){const o=s;o.bignum=t("bn.js"),o.define=t("./asn1/api").define,o.base=t("./asn1/base"),o.constants=t("./asn1/constants"),o.decoders=t("./asn1/decoders"),o.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,n,s){const o=t("./encoders"),r=t("./decoders"),a=t("inherits");function l(d,c){this.name=d,this.body=c,this.decoders={},this.encoders={}}s.define=function(d,c){return new l(d,c)},l.prototype._createNamed=function(d){const c=this.name;function h(u){this._initNamed(u,c)}return a(h,d),h.prototype._initNamed=function(u,p){d.call(this,u,p)},new h(this)},l.prototype._getDecoder=function(d){return d=d||"der",this.decoders.hasOwnProperty(d)||(this.decoders[d]=this._createNamed(r[d])),this.decoders[d]},l.prototype.decode=function(d,c,h){return this._getDecoder(c).decode(d,h)},l.prototype._getEncoder=function(d){return d=d||"der",this.encoders.hasOwnProperty(d)||(this.encoders[d]=this._createNamed(o[d])),this.encoders[d]},l.prototype.encode=function(d,c,h){return this._getEncoder(c).encode(d,h)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,n,s){const o=t("inherits"),r=t("../base/reporter").Reporter,a=t("safer-buffer").Buffer;function l(c,h){r.call(this,h),a.isBuffer(c)?(this.base=c,this.offset=0,this.length=c.length):this.error("Input not Buffer")}function d(c,h){if(Array.isArray(c))this.length=0,this.value=c.map(function(u){return d.isEncoderBuffer(u)||(u=new d(u,h)),this.length+=u.length,u},this);else if(typeof c=="number"){if(!(0<=c&&c<=255))return h.error("non-byte EncoderBuffer value");this.value=c,this.length=1}else if(typeof c=="string")this.value=c,this.length=a.byteLength(c);else{if(!a.isBuffer(c))return h.error("Unsupported type: "+typeof c);this.value=c,this.length=c.length}}o(l,r),s.DecoderBuffer=l,l.isDecoderBuffer=function(c){return c instanceof l?!0:typeof c=="object"&&a.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"},l.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},l.prototype.restore=function(c){const h=new l(this.base);return h.offset=c.offset,h.length=this.offset,this.offset=c.offset,r.prototype.restore.call(this,c.reporter),h},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},l.prototype.skip=function(c,h){if(!(this.offset+c<=this.length))return this.error(h||"DecoderBuffer overrun");const u=new l(this.base);return u._reporterState=this._reporterState,u.offset=this.offset,u.length=this.offset+c,this.offset+=c,u},l.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)},s.EncoderBuffer=d,d.isEncoderBuffer=function(c){return c instanceof d?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"},d.prototype.join=function(c,h){return c||(c=a.alloc(this.length)),h||(h=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(u){u.join(c,h),h+=u.length}):(typeof this.value=="number"?c[h]=this.value:typeof this.value=="string"?c.write(this.value,h):a.isBuffer(this.value)&&this.value.copy(c,h),h+=this.length)),c}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,n,s){const o=s;o.Reporter=t("./reporter").Reporter,o.DecoderBuffer=t("./buffer").DecoderBuffer,o.EncoderBuffer=t("./buffer").EncoderBuffer,o.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,n,s){const o=t("../base/reporter").Reporter,r=t("../base/buffer").EncoderBuffer,a=t("../base/buffer").DecoderBuffer,l=t("minimalistic-assert"),d=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(d);function h(p,f,g){const m={};this._baseState=m,m.name=g,m.enc=p,m.parent=f||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}n.exports=h;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const p=this._baseState,f={};u.forEach(function(m){f[m]=p[m]});const g=new this.constructor(f.parent);return g._baseState=f,g},h.prototype._wrap=function(){const p=this._baseState;c.forEach(function(f){this[f]=function(){const g=new this.constructor(this);return p.children.push(g),g[f].apply(g,arguments)}},this)},h.prototype._init=function(p){const f=this._baseState;l(f.parent===null),p.call(this),f.children=f.children.filter(function(g){return g._baseState.parent===this},this),l.equal(f.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(p){const f=this._baseState,g=p.filter(function(m){return m instanceof this.constructor},this);p=p.filter(function(m){return!(m instanceof this.constructor)},this),g.length!==0&&(l(f.children===null),f.children=g,g.forEach(function(m){m._baseState.parent=this},this)),p.length!==0&&(l(f.args===null),f.args=p,f.reverseArgs=p.map(function(m){if(typeof m!="object"||m.constructor!==Object)return m;const b={};return Object.keys(m).forEach(function(_){_==(0|_)&&(_|=0);const w=m[_];b[w]=_}),b}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(p){h.prototype[p]=function(){const f=this._baseState;throw new Error(p+" not implemented for encoding: "+f.enc)}}),d.forEach(function(p){h.prototype[p]=function(){const f=this._baseState,g=Array.prototype.slice.call(arguments);return l(f.tag===null),f.tag=p,this._useArgs(g),this}}),h.prototype.use=function(p){l(p);const f=this._baseState;return l(f.use===null),f.use=p,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(p){const f=this._baseState;return l(f.default===null),f.default=p,f.optional=!0,this},h.prototype.explicit=function(p){const f=this._baseState;return l(f.explicit===null&&f.implicit===null),f.explicit=p,this},h.prototype.implicit=function(p){const f=this._baseState;return l(f.explicit===null&&f.implicit===null),f.implicit=p,this},h.prototype.obj=function(){const p=this._baseState,f=Array.prototype.slice.call(arguments);return p.obj=!0,f.length!==0&&this._useArgs(f),this},h.prototype.key=function(p){const f=this._baseState;return l(f.key===null),f.key=p,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(p){const f=this._baseState;return l(f.choice===null),f.choice=p,this._useArgs(Object.keys(p).map(function(g){return p[g]})),this},h.prototype.contains=function(p){const f=this._baseState;return l(f.use===null),f.contains=p,this},h.prototype._decode=function(p,f){const g=this._baseState;if(g.parent===null)return p.wrapResult(g.children[0]._decode(p,f));let m,b=g.default,_=!0,w=null;if(g.key!==null&&(w=p.enterKey(g.key)),g.optional){let E=null;if(g.explicit!==null?E=g.explicit:g.implicit!==null?E=g.implicit:g.tag!==null&&(E=g.tag),E!==null||g.any){if(_=this._peekTag(p,E,g.any),p.isError(_))return _}else{const D=p.save();try{g.choice===null?this._decodeGeneric(g.tag,p,f):this._decodeChoice(p,f),_=!0}catch{_=!1}p.restore(D)}}if(g.obj&&_&&(m=p.enterObject()),_){if(g.explicit!==null){const D=this._decodeTag(p,g.explicit);if(p.isError(D))return D;p=D}const E=p.offset;if(g.use===null&&g.choice===null){let D;g.any&&(D=p.save());const B=this._decodeTag(p,g.implicit!==null?g.implicit:g.tag,g.any);if(p.isError(B))return B;g.any?b=p.raw(D):p=B}if(f&&f.track&&g.tag!==null&&f.track(p.path(),E,p.length,"tagged"),f&&f.track&&g.tag!==null&&f.track(p.path(),p.offset,p.length,"content"),g.any||(b=g.choice===null?this._decodeGeneric(g.tag,p,f):this._decodeChoice(p,f)),p.isError(b))return b;if(g.any||g.choice!==null||g.children===null||g.children.forEach(function(D){D._decode(p,f)}),g.contains&&(g.tag==="octstr"||g.tag==="bitstr")){const D=new a(b);b=this._getUse(g.contains,p._reporterState.obj)._decode(D,f)}}return g.obj&&_&&(b=p.leaveObject(m)),g.key===null||b===null&&_!==!0?w!==null&&p.exitKey(w):p.leaveKey(w,g.key,b),b},h.prototype._decodeGeneric=function(p,f,g){const m=this._baseState;return p==="seq"||p==="set"?null:p==="seqof"||p==="setof"?this._decodeList(f,p,m.args[0],g):/str$/.test(p)?this._decodeStr(f,p,g):p==="objid"&&m.args?this._decodeObjid(f,m.args[0],m.args[1],g):p==="objid"?this._decodeObjid(f,null,null,g):p==="gentime"||p==="utctime"?this._decodeTime(f,p,g):p==="null_"?this._decodeNull(f,g):p==="bool"?this._decodeBool(f,g):p==="objDesc"?this._decodeStr(f,p,g):p==="int"||p==="enum"?this._decodeInt(f,m.args&&m.args[0],g):m.use!==null?this._getUse(m.use,f._reporterState.obj)._decode(f,g):f.error("unknown tag: "+p)},h.prototype._getUse=function(p,f){const g=this._baseState;return g.useDecoder=this._use(p,f),l(g.useDecoder._baseState.parent===null),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},h.prototype._decodeChoice=function(p,f){const g=this._baseState;let m=null,b=!1;return Object.keys(g.choice).some(function(_){const w=p.save(),E=g.choice[_];try{const D=E._decode(p,f);if(p.isError(D))return!1;m={type:_,value:D},b=!0}catch{return p.restore(w),!1}return!0},this),b?m:p.error("Choice not matched")},h.prototype._createEncoderBuffer=function(p){return new r(p,this.reporter)},h.prototype._encode=function(p,f,g){const m=this._baseState;if(m.default!==null&&m.default===p)return;const b=this._encodeValue(p,f,g);return b===void 0||this._skipDefault(b,f,g)?void 0:b},h.prototype._encodeValue=function(p,f,g){const m=this._baseState;if(m.parent===null)return m.children[0]._encode(p,f||new o);let b=null;if(this.reporter=f,m.optional&&p===void 0){if(m.default===null)return;p=m.default}let _=null,w=!1;if(m.any)b=this._createEncoderBuffer(p);else if(m.choice)b=this._encodeChoice(p,f);else if(m.contains)_=this._getUse(m.contains,g)._encode(p,f),w=!0;else if(m.children)_=m.children.map(function(E){if(E._baseState.tag==="null_")return E._encode(null,f,p);if(E._baseState.key===null)return f.error("Child should have a key");const D=f.enterKey(E._baseState.key);if(typeof p!="object")return f.error("Child expected, but input is not object");const B=E._encode(p[E._baseState.key],f,p);return f.leaveKey(D),B},this).filter(function(E){return E}),_=this._createEncoderBuffer(_);else if(m.tag==="seqof"||m.tag==="setof"){if(!m.args||m.args.length!==1)return f.error("Too many args for : "+m.tag);if(!Array.isArray(p))return f.error("seqof/setof, but data is not Array");const E=this.clone();E._baseState.implicit=null,_=this._createEncoderBuffer(p.map(function(D){const B=this._baseState;return this._getUse(B.args[0],p)._encode(D,f)},E))}else m.use!==null?b=this._getUse(m.use,g)._encode(p,f):(_=this._encodePrimitive(m.tag,p),w=!0);if(!m.any&&m.choice===null){const E=m.implicit!==null?m.implicit:m.tag,D=m.implicit===null?"universal":"context";E===null?m.use===null&&f.error("Tag could be omitted only for .use()"):m.use===null&&(b=this._encodeComposite(E,w,D,_))}return m.explicit!==null&&(b=this._encodeComposite(m.explicit,!1,"context",b)),b},h.prototype._encodeChoice=function(p,f){const g=this._baseState,m=g.choice[p.type];return m||l(!1,p.type+" not found in "+JSON.stringify(Object.keys(g.choice))),m._encode(p.value,f)},h.prototype._encodePrimitive=function(p,f){const g=this._baseState;if(/str$/.test(p))return this._encodeStr(f,p);if(p==="objid"&&g.args)return this._encodeObjid(f,g.reverseArgs[0],g.args[1]);if(p==="objid")return this._encodeObjid(f,null,null);if(p==="gentime"||p==="utctime")return this._encodeTime(f,p);if(p==="null_")return this._encodeNull();if(p==="int"||p==="enum")return this._encodeInt(f,g.args&&g.reverseArgs[0]);if(p==="bool")return this._encodeBool(f);if(p==="objDesc")return this._encodeStr(f,p);throw new Error("Unsupported tag: "+p)},h.prototype._isNumstr=function(p){return/^[0-9 ]*$/.test(p)},h.prototype._isPrintstr=function(p){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(p)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,n,s){const o=t("inherits");function r(l){this._reporterState={obj:null,path:[],options:l||{},errors:[]}}function a(l,d){this.path=l,this.rethrow(d)}s.Reporter=r,r.prototype.isError=function(l){return l instanceof a},r.prototype.save=function(){const l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},r.prototype.restore=function(l){const d=this._reporterState;d.obj=l.obj,d.path=d.path.slice(0,l.pathLen)},r.prototype.enterKey=function(l){return this._reporterState.path.push(l)},r.prototype.exitKey=function(l){const d=this._reporterState;d.path=d.path.slice(0,l-1)},r.prototype.leaveKey=function(l,d,c){const h=this._reporterState;this.exitKey(l),h.obj!==null&&(h.obj[d]=c)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){const l=this._reporterState,d=l.obj;return l.obj={},d},r.prototype.leaveObject=function(l){const d=this._reporterState,c=d.obj;return d.obj=l,c},r.prototype.error=function(l){let d;const c=this._reporterState,h=l instanceof a;if(d=h?l:new a(c.path.map(function(u){return"["+JSON.stringify(u)+"]"}).join(""),l.message||l,l.stack),!c.options.partial)throw d;return h||c.errors.push(d),d},r.prototype.wrapResult=function(l){const d=this._reporterState;return d.options.partial?{result:this.isError(l)?null:l,errors:d.errors}:l},o(a,Error),a.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(d){this.stack=d.stack}return this}},{inherits:440}],176:[function(t,n,s){function o(r){const a={};return Object.keys(r).forEach(function(l){(0|l)==l&&(l|=0);const d=r[l];a[d]=l}),a}s.tagClass={0:"universal",1:"application",2:"context",3:"private"},s.tagClassByName=o(s.tagClass),s.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},s.tagByName=o(s.tag)},{}],177:[function(t,n,s){const o=s;o._reverse=function(r){const a={};return Object.keys(r).forEach(function(l){(0|l)==l&&(l|=0);const d=r[l];a[d]=l}),a},o.der=t("./der")},{"./der":176}],178:[function(t,n,s){const o=t("inherits"),r=t("bn.js"),a=t("../base/buffer").DecoderBuffer,l=t("../base/node"),d=t("../constants/der");function c(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new h,this.tree._init(f.body)}function h(f){l.call(this,"der",f)}function u(f,g){let m=f.readUInt8(g);if(f.isError(m))return m;const b=d.tagClass[m>>6],_=(32&m)==0;if((31&m)==31){let w=m;for(m=0;(128&w)==128;){if(w=f.readUInt8(g),f.isError(w))return w;m<<=7,m|=127&w}}else m&=31;return{cls:b,primitive:_,tag:m,tagStr:d.tag[m]}}function p(f,g,m){let b=f.readUInt8(m);if(f.isError(b))return b;if(!g&&b===128)return null;if(!(128&b))return b;const _=127&b;if(_>4)return f.error("length octect is too long");b=0;for(let w=0;w<_;w++){b<<=8;const E=f.readUInt8(m);if(f.isError(E))return E;b|=E}return b}n.exports=c,c.prototype.decode=function(f,g){return a.isDecoderBuffer(f)||(f=new a(f,g)),this.tree._decode(f,g)},o(h,l),h.prototype._peekTag=function(f,g,m){if(f.isEmpty())return!1;const b=f.save(),_=u(f,'Failed to peek tag: "'+g+'"');return f.isError(_)?_:(f.restore(b),_.tag===g||_.tagStr===g||_.tagStr+"of"===g||m)},h.prototype._decodeTag=function(f,g,m){const b=u(f,'Failed to decode tag of "'+g+'"');if(f.isError(b))return b;let _=p(f,b.primitive,'Failed to get length of "'+g+'"');if(f.isError(_))return _;if(!m&&b.tag!==g&&b.tagStr!==g&&b.tagStr+"of"!==g)return f.error('Failed to match tag: "'+g+'"');if(b.primitive||_!==null)return f.skip(_,'Failed to match body of: "'+g+'"');const w=f.save(),E=this._skipUntilEnd(f,'Failed to skip indefinite length body: "'+this.tag+'"');return f.isError(E)?E:(_=f.offset-w.offset,f.restore(w),f.skip(_,'Failed to match body of: "'+g+'"'))},h.prototype._skipUntilEnd=function(f,g){for(;;){const m=u(f,g);if(f.isError(m))return m;const b=p(f,m.primitive,g);if(f.isError(b))return b;let _;if(_=m.primitive||b!==null?f.skip(b):this._skipUntilEnd(f,g),f.isError(_))return _;if(m.tagStr==="end")break}},h.prototype._decodeList=function(f,g,m,b){const _=[];for(;!f.isEmpty();){const w=this._peekTag(f,"end");if(f.isError(w))return w;const E=m.decode(f,"der",b);if(f.isError(E)&&w)break;_.push(E)}return _},h.prototype._decodeStr=function(f,g){if(g==="bitstr"){const m=f.readUInt8();return f.isError(m)?m:{unused:m,data:f.raw()}}if(g==="bmpstr"){const m=f.raw();if(m.length%2==1)return f.error("Decoding of string type: bmpstr length mismatch");let b="";for(let _=0;_<m.length/2;_++)b+=String.fromCharCode(m.readUInt16BE(2*_));return b}if(g==="numstr"){const m=f.raw().toString("ascii");return this._isNumstr(m)?m:f.error("Decoding of string type: numstr unsupported characters")}if(g==="octstr"||g==="objDesc")return f.raw();if(g==="printstr"){const m=f.raw().toString("ascii");return this._isPrintstr(m)?m:f.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(g)?f.raw().toString():f.error("Decoding of string type: "+g+" unsupported")},h.prototype._decodeObjid=function(f,g,m){let b;const _=[];let w=0,E=0;for(;!f.isEmpty();)E=f.readUInt8(),w<<=7,w|=127&E,!(128&E)&&(_.push(w),w=0);128&E&&_.push(w);const D=_[0]/40|0,B=_[0]%40;if(b=m?_:[D,B].concat(_.slice(1)),g){let $=g[b.join(" ")];$===void 0&&($=g[b.join(".")]),$!==void 0&&(b=$)}return b},h.prototype._decodeTime=function(f,g){const m=f.raw().toString();let b,_,w,E,D,B;if(g==="gentime")b=0|m.slice(0,4),_=0|m.slice(4,6),w=0|m.slice(6,8),E=0|m.slice(8,10),D=0|m.slice(10,12),B=0|m.slice(12,14);else{if(g!=="utctime")return f.error("Decoding "+g+" time is not supported yet");b=0|m.slice(0,2),_=0|m.slice(2,4),w=0|m.slice(4,6),E=0|m.slice(6,8),D=0|m.slice(8,10),B=0|m.slice(10,12),b=b<70?2e3+b:1900+b}return Date.UTC(b,_-1,w,E,D,B,0)},h.prototype._decodeNull=function(){return null},h.prototype._decodeBool=function(f){const g=f.readUInt8();return f.isError(g)?g:g!==0},h.prototype._decodeInt=function(f,g){const m=f.raw();let b=new r(m);return g&&(b=g[b.toString(10)]||b),b},h.prototype._use=function(f,g){return typeof f=="function"&&(f=f(g)),f._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,n,s){const o=s;o.der=t("./der"),o.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,n,s){const o=t("inherits"),r=t("safer-buffer").Buffer,a=t("./der");function l(d){a.call(this,d),this.enc="pem"}o(l,a),n.exports=l,l.prototype.decode=function(d,c){const h=d.toString().split(/[\r\n]+/g),u=c.label.toUpperCase(),p=/^-----(BEGIN|END) ([^-]+)-----$/;let f=-1,g=-1;for(let _=0;_<h.length;_++){const w=h[_].match(p);if(w!==null&&w[2]===u){if(f!==-1){if(w[1]!=="END")break;g=_;break}if(w[1]!=="BEGIN")break;f=_}}if(f===-1||g===-1)throw new Error("PEM section not found for: "+u);const m=h.slice(f+1,g).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const b=r.from(m,"base64");return a.prototype.decode.call(this,b,c)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,n,s){const o=t("inherits"),r=t("safer-buffer").Buffer,a=t("../base/node"),l=t("../constants/der");function d(u){this.enc="der",this.name=u.name,this.entity=u,this.tree=new c,this.tree._init(u.body)}function c(u){a.call(this,"der",u)}function h(u){return u<10?"0"+u:u}n.exports=d,d.prototype.encode=function(u,p){return this.tree._encode(u,p).join()},o(c,a),c.prototype._encodeComposite=function(u,p,f,g){const m=function(w,E,D,B){let $;if(w==="seqof"?w="seq":w==="setof"&&(w="set"),l.tagByName.hasOwnProperty(w))$=l.tagByName[w];else{if(typeof w!="number"||(0|w)!==w)return B.error("Unknown tag: "+w);$=w}return $>=31?B.error("Multi-octet tag encoding unsupported"):(E||($|=32),$|=l.tagClassByName[D||"universal"]<<6,$)}(u,p,f,this.reporter);if(g.length<128){const w=r.alloc(2);return w[0]=m,w[1]=g.length,this._createEncoderBuffer([w,g])}let b=1;for(let w=g.length;w>=256;w>>=8)b++;const _=r.alloc(2+b);_[0]=m,_[1]=128|b;for(let w=1+b,E=g.length;E>0;w--,E>>=8)_[w]=255&E;return this._createEncoderBuffer([_,g])},c.prototype._encodeStr=function(u,p){if(p==="bitstr")return this._createEncoderBuffer([0|u.unused,u.data]);if(p==="bmpstr"){const f=r.alloc(2*u.length);for(let g=0;g<u.length;g++)f.writeUInt16BE(u.charCodeAt(g),2*g);return this._createEncoderBuffer(f)}return p==="numstr"?this._isNumstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: numstr supports only digits and space"):p==="printstr"?this._isPrintstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(p)||p==="objDesc"?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: "+p+" unsupported")},c.prototype._encodeObjid=function(u,p,f){if(typeof u=="string"){if(!p)return this.reporter.error("string objid given, but no values map found");if(!p.hasOwnProperty(u))return this.reporter.error("objid not found in values map");u=p[u].split(/[\s.]+/g);for(let _=0;_<u.length;_++)u[_]|=0}else if(Array.isArray(u)){u=u.slice();for(let _=0;_<u.length;_++)u[_]|=0}if(!Array.isArray(u))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(u));if(!f){if(u[1]>=40)return this.reporter.error("Second objid identifier OOB");u.splice(0,2,40*u[0]+u[1])}let g=0;for(let _=0;_<u.length;_++){let w=u[_];for(g++;w>=128;w>>=7)g++}const m=r.alloc(g);let b=m.length-1;for(let _=u.length-1;_>=0;_--){let w=u[_];for(m[b--]=127&w;(w>>=7)>0;)m[b--]=128|127&w}return this._createEncoderBuffer(m)},c.prototype._encodeTime=function(u,p){let f;const g=new Date(u);return p==="gentime"?f=[h(g.getUTCFullYear()),h(g.getUTCMonth()+1),h(g.getUTCDate()),h(g.getUTCHours()),h(g.getUTCMinutes()),h(g.getUTCSeconds()),"Z"].join(""):p==="utctime"?f=[h(g.getUTCFullYear()%100),h(g.getUTCMonth()+1),h(g.getUTCDate()),h(g.getUTCHours()),h(g.getUTCMinutes()),h(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+p+" time is not supported yet"),this._encodeStr(f,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(u,p){if(typeof u=="string"){if(!p)return this.reporter.error("String int or enum given, but no values map");if(!p.hasOwnProperty(u))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(u));u=p[u]}if(typeof u!="number"&&!r.isBuffer(u)){const m=u.toArray();!u.sign&&128&m[0]&&m.unshift(0),u=r.from(m)}if(r.isBuffer(u)){let m=u.length;u.length===0&&m++;const b=r.alloc(m);return u.copy(b),u.length===0&&(b[0]=0),this._createEncoderBuffer(b)}if(u<128)return this._createEncoderBuffer(u);if(u<256)return this._createEncoderBuffer([0,u]);let f=1;for(let m=u;m>=256;m>>=8)f++;const g=new Array(f);for(let m=g.length-1;m>=0;m--)g[m]=255&u,u>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(r.from(g))},c.prototype._encodeBool=function(u){return this._createEncoderBuffer(u?255:0)},c.prototype._use=function(u,p){return typeof u=="function"&&(u=u(p)),u._getEncoder("der").tree},c.prototype._skipDefault=function(u,p,f){const g=this._baseState;let m;if(g.default===null)return!1;const b=u.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,p,f).join()),b.length!==g.defaultBuffer.length)return!1;for(m=0;m<b.length;m++)if(b[m]!==g.defaultBuffer[m])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,n,s){const o=s;o.der=t("./der"),o.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,n,s){const o=t("inherits"),r=t("./der");function a(l){r.call(this,l),this.enc="pem"}o(a,r),n.exports=a,a.prototype.encode=function(l,d){const c=r.prototype.encode.call(this,l).toString("base64"),h=["-----BEGIN "+d.label+"-----"];for(let u=0;u<c.length;u+=64)h.push(c.slice(u,u+64));return h.push("-----END "+d.label+"-----"),h.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,n,s){(function(o,r){function a(I,k){if(!I)throw new Error(k||"Assertion failed")}function l(I,k){I.super_=k;var S=function(){};S.prototype=k.prototype,I.prototype=new S,I.prototype.constructor=I}function d(I,k,S){if(d.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&(k!=="le"&&k!=="be"||(S=k,k=10),this._init(I||0,k||10,S||"be"))}var c;typeof o=="object"?o.exports=d:(void 0).BN=d,d.BN=d,d.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function h(I,k){var S=I.charCodeAt(k);return S>=65&&S<=70?S-55:S>=97&&S<=102?S-87:S-48&15}function u(I,k,S){var v=h(I,S);return S-1>=k&&(v|=h(I,S-1)<<4),v}function p(I,k,S,v){for(var y=0,C=Math.min(I.length,S),x=k;x<C;x++){var T=I.charCodeAt(x)-48;y*=v,y+=T>=49?T-49+10:T>=17?T-17+10:T}return y}d.isBN=function(I){return I instanceof d||I!==null&&typeof I=="object"&&I.constructor.wordSize===d.wordSize&&Array.isArray(I.words)},d.max=function(I,k){return I.cmp(k)>0?I:k},d.min=function(I,k){return I.cmp(k)<0?I:k},d.prototype._init=function(I,k,S){if(typeof I=="number")return this._initNumber(I,k,S);if(typeof I=="object")return this._initArray(I,k,S);k==="hex"&&(k=16),a(k===(0|k)&&k>=2&&k<=36);var v=0;(I=I.toString().replace(/\s+/g,""))[0]==="-"&&(v++,this.negative=1),v<I.length&&(k===16?this._parseHex(I,v,S):(this._parseBase(I,k,v),S==="le"&&this._initArray(this.toArray(),k,S)))},d.prototype._initNumber=function(I,k,S){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(a(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),k,S)},d.prototype._initArray=function(I,k,S){if(a(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y,C,x=0;if(S==="be")for(v=I.length-1,y=0;v>=0;v-=3)C=I[v]|I[v-1]<<8|I[v-2]<<16,this.words[y]|=C<<x&67108863,this.words[y+1]=C>>>26-x&67108863,(x+=24)>=26&&(x-=26,y++);else if(S==="le")for(v=0,y=0;v<I.length;v+=3)C=I[v]|I[v+1]<<8|I[v+2]<<16,this.words[y]|=C<<x&67108863,this.words[y+1]=C>>>26-x&67108863,(x+=24)>=26&&(x-=26,y++);return this.strip()},d.prototype._parseHex=function(I,k,S){this.length=Math.ceil((I.length-k)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y,C=0,x=0;if(S==="be")for(v=I.length-1;v>=k;v-=2)y=u(I,k,v)<<C,this.words[x]|=67108863&y,C>=18?(C-=18,x+=1,this.words[x]|=y>>>26):C+=8;else for(v=(I.length-k)%2==0?k+1:k;v<I.length;v+=2)y=u(I,k,v)<<C,this.words[x]|=67108863&y,C>=18?(C-=18,x+=1,this.words[x]|=y>>>26):C+=8;this.strip()},d.prototype._parseBase=function(I,k,S){this.words=[0],this.length=1;for(var v=0,y=1;y<=67108863;y*=k)v++;v--,y=y/k|0;for(var C=I.length-S,x=C%v,T=Math.min(C,C-x)+S,M=0,V=S;V<T;V+=v)M=p(I,V,V+v,k),this.imuln(y),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(x!==0){var W=1;for(M=p(I,V,I.length,k),V=0;V<x;V++)W*=k;this.imuln(W),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this.strip()},d.prototype.copy=function(I){I.words=new Array(this.length);for(var k=0;k<this.length;k++)I.words[k]=this.words[k];I.length=this.length,I.negative=this.negative,I.red=this.red},d.prototype.clone=function(){var I=new d(null);return this.copy(I),I},d.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(I,k,S){S.negative=k.negative^I.negative;var v=I.length+k.length|0;S.length=v,v=v-1|0;var y=0|I.words[0],C=0|k.words[0],x=y*C,T=67108863&x,M=x/67108864|0;S.words[0]=T;for(var V=1;V<v;V++){for(var W=M>>>26,K=67108863&M,Z=Math.min(V,k.length-1),P=Math.max(0,V-I.length+1);P<=Z;P++){var G=V-P|0;W+=(x=(y=0|I.words[G])*(C=0|k.words[P])+K)/67108864|0,K=67108863&x}S.words[V]=0|K,M=0|W}return M!==0?S.words[V]=0|M:S.length--,S.strip()}d.prototype.toString=function(I,k){var S;if(k=0|k||1,(I=I||10)===16||I==="hex"){S="";for(var v=0,y=0,C=0;C<this.length;C++){var x=this.words[C],T=(16777215&(x<<v|y)).toString(16);S=(y=x>>>24-v&16777215)!==0||C!==this.length-1?f[6-T.length]+T+S:T+S,(v+=2)>=26&&(v-=26,C--)}for(y!==0&&(S=y.toString(16)+S);S.length%k!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(I===(0|I)&&I>=2&&I<=36){var M=g[I],V=m[I];S="";var W=this.clone();for(W.negative=0;!W.isZero();){var K=W.modn(V).toString(I);S=(W=W.idivn(V)).isZero()?K+S:f[M-K.length]+K+S}for(this.isZero()&&(S="0"+S);S.length%k!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}a(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=67108864*this.words[1]:this.length===3&&this.words[2]===1?I+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(I,k){return a(c!==void 0),this.toArrayLike(c,I,k)},d.prototype.toArray=function(I,k){return this.toArrayLike(Array,I,k)},d.prototype.toArrayLike=function(I,k,S){var v=this.byteLength(),y=S||Math.max(1,v);a(v<=y,"byte array longer than desired length"),a(y>0,"Requested array length <= 0"),this.strip();var C,x,T=k==="le",M=new I(y),V=this.clone();if(T){for(x=0;!V.isZero();x++)C=V.andln(255),V.iushrn(8),M[x]=C;for(;x<y;x++)M[x]=0}else{for(x=0;x<y-v;x++)M[x]=0;for(x=0;!V.isZero();x++)C=V.andln(255),V.iushrn(8),M[y-x-1]=C}return M},Math.clz32?d.prototype._countBits=function(I){return 32-Math.clz32(I)}:d.prototype._countBits=function(I){var k=I,S=0;return k>=4096&&(S+=13,k>>>=13),k>=64&&(S+=7,k>>>=7),k>=8&&(S+=4,k>>>=4),k>=2&&(S+=2,k>>>=2),S+k},d.prototype._zeroBits=function(I){if(I===0)return 26;var k=I,S=0;return!(8191&k)&&(S+=13,k>>>=13),!(127&k)&&(S+=7,k>>>=7),!(15&k)&&(S+=4,k>>>=4),!(3&k)&&(S+=2,k>>>=2),!(1&k)&&S++,S},d.prototype.bitLength=function(){var I=this.words[this.length-1],k=this._countBits(I);return 26*(this.length-1)+k},d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,k=0;k<this.length;k++){var S=this._zeroBits(this.words[k]);if(I+=S,S!==26)break}return I},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},d.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var k=0;k<I.length;k++)this.words[k]=this.words[k]|I.words[k];return this.strip()},d.prototype.ior=function(I){return a((this.negative|I.negative)==0),this.iuor(I)},d.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},d.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},d.prototype.iuand=function(I){var k;k=this.length>I.length?I:this;for(var S=0;S<k.length;S++)this.words[S]=this.words[S]&I.words[S];return this.length=k.length,this.strip()},d.prototype.iand=function(I){return a((this.negative|I.negative)==0),this.iuand(I)},d.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},d.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},d.prototype.iuxor=function(I){var k,S;this.length>I.length?(k=this,S=I):(k=I,S=this);for(var v=0;v<S.length;v++)this.words[v]=k.words[v]^S.words[v];if(this!==k)for(;v<k.length;v++)this.words[v]=k.words[v];return this.length=k.length,this.strip()},d.prototype.ixor=function(I){return a((this.negative|I.negative)==0),this.iuxor(I)},d.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},d.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},d.prototype.inotn=function(I){a(typeof I=="number"&&I>=0);var k=0|Math.ceil(I/26),S=I%26;this._expand(k),S>0&&k--;for(var v=0;v<k;v++)this.words[v]=67108863&~this.words[v];return S>0&&(this.words[v]=~this.words[v]&67108863>>26-S),this.strip()},d.prototype.notn=function(I){return this.clone().inotn(I)},d.prototype.setn=function(I,k){a(typeof I=="number"&&I>=0);var S=I/26|0,v=I%26;return this._expand(S+1),this.words[S]=k?this.words[S]|1<<v:this.words[S]&~(1<<v),this.strip()},d.prototype.iadd=function(I){var k,S,v;if(this.negative!==0&&I.negative===0)return this.negative=0,k=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,k=this.isub(I),I.negative=1,k._normSign();this.length>I.length?(S=this,v=I):(S=I,v=this);for(var y=0,C=0;C<v.length;C++)k=(0|S.words[C])+(0|v.words[C])+y,this.words[C]=67108863&k,y=k>>>26;for(;y!==0&&C<S.length;C++)k=(0|S.words[C])+y,this.words[C]=67108863&k,y=k>>>26;if(this.length=S.length,y!==0)this.words[this.length]=y,this.length++;else if(S!==this)for(;C<S.length;C++)this.words[C]=S.words[C];return this},d.prototype.add=function(I){var k;return I.negative!==0&&this.negative===0?(I.negative=0,k=this.sub(I),I.negative^=1,k):I.negative===0&&this.negative!==0?(this.negative=0,k=I.sub(this),this.negative=1,k):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},d.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var k=this.iadd(I);return I.negative=1,k._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var S,v,y=this.cmp(I);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;y>0?(S=this,v=I):(S=I,v=this);for(var C=0,x=0;x<v.length;x++)C=(k=(0|S.words[x])-(0|v.words[x])+C)>>26,this.words[x]=67108863&k;for(;C!==0&&x<S.length;x++)C=(k=(0|S.words[x])+C)>>26,this.words[x]=67108863&k;if(C===0&&x<S.length&&S!==this)for(;x<S.length;x++)this.words[x]=S.words[x];return this.length=Math.max(this.length,x),S!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(I){return this.clone().isub(I)};var _=function(I,k,S){var v,y,C,x=I.words,T=k.words,M=S.words,V=0,W=0|x[0],K=8191&W,Z=W>>>13,P=0|x[1],G=8191&P,O=P>>>13,A=0|x[2],z=8191&A,X=A>>>13,ee=0|x[3],J=8191&ee,te=ee>>>13,le=0|x[4],ce=8191&le,Q=le>>>13,oe=0|x[5],se=8191&oe,pe=oe>>>13,he=0|x[6],me=8191&he,ye=he>>>13,xe=0|x[7],Ie=8191&xe,Le=xe>>>13,Ne=0|x[8],Be=8191&Ne,tt=Ne>>>13,Qe=0|x[9],et=8191&Qe,nt=Qe>>>13,$e=0|T[0],ke=8191&$e,je=$e>>>13,Xe=0|T[1],Ue=8191&Xe,Bt=Xe>>>13,Qt=0|T[2],ot=8191&Qt,Ut=Qt>>>13,Ot=0|T[3],_t=8191&Ot,ri=Ot>>>13,qt=0|T[4],ut=8191&qt,Ht=qt>>>13,ni=0|T[5],pt=8191&ni,Xt=ni>>>13,si=0|T[6],yt=8191&si,de=si>>>13,fe=0|T[7],we=8191&fe,Fe=fe>>>13,at=0|T[8],Ve=8191&at,ft=at>>>13,lt=0|T[9],it=8191&lt,vt=lt>>>13;S.negative=I.negative^k.negative,S.length=19;var gt=(V+(v=Math.imul(K,ke))|0)+((8191&(y=(y=Math.imul(K,je))+Math.imul(Z,ke)|0))<<13)|0;V=((C=Math.imul(Z,je))+(y>>>13)|0)+(gt>>>26)|0,gt&=67108863,v=Math.imul(G,ke),y=(y=Math.imul(G,je))+Math.imul(O,ke)|0,C=Math.imul(O,je);var At=(V+(v=v+Math.imul(K,Ue)|0)|0)+((8191&(y=(y=y+Math.imul(K,Bt)|0)+Math.imul(Z,Ue)|0))<<13)|0;V=((C=C+Math.imul(Z,Bt)|0)+(y>>>13)|0)+(At>>>26)|0,At&=67108863,v=Math.imul(z,ke),y=(y=Math.imul(z,je))+Math.imul(X,ke)|0,C=Math.imul(X,je),v=v+Math.imul(G,Ue)|0,y=(y=y+Math.imul(G,Bt)|0)+Math.imul(O,Ue)|0,C=C+Math.imul(O,Bt)|0;var Ci=(V+(v=v+Math.imul(K,ot)|0)|0)+((8191&(y=(y=y+Math.imul(K,Ut)|0)+Math.imul(Z,ot)|0))<<13)|0;V=((C=C+Math.imul(Z,Ut)|0)+(y>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,v=Math.imul(J,ke),y=(y=Math.imul(J,je))+Math.imul(te,ke)|0,C=Math.imul(te,je),v=v+Math.imul(z,Ue)|0,y=(y=y+Math.imul(z,Bt)|0)+Math.imul(X,Ue)|0,C=C+Math.imul(X,Bt)|0,v=v+Math.imul(G,ot)|0,y=(y=y+Math.imul(G,Ut)|0)+Math.imul(O,ot)|0,C=C+Math.imul(O,Ut)|0;var ui=(V+(v=v+Math.imul(K,_t)|0)|0)+((8191&(y=(y=y+Math.imul(K,ri)|0)+Math.imul(Z,_t)|0))<<13)|0;V=((C=C+Math.imul(Z,ri)|0)+(y>>>13)|0)+(ui>>>26)|0,ui&=67108863,v=Math.imul(ce,ke),y=(y=Math.imul(ce,je))+Math.imul(Q,ke)|0,C=Math.imul(Q,je),v=v+Math.imul(J,Ue)|0,y=(y=y+Math.imul(J,Bt)|0)+Math.imul(te,Ue)|0,C=C+Math.imul(te,Bt)|0,v=v+Math.imul(z,ot)|0,y=(y=y+Math.imul(z,Ut)|0)+Math.imul(X,ot)|0,C=C+Math.imul(X,Ut)|0,v=v+Math.imul(G,_t)|0,y=(y=y+Math.imul(G,ri)|0)+Math.imul(O,_t)|0,C=C+Math.imul(O,ri)|0;var Oi=(V+(v=v+Math.imul(K,ut)|0)|0)+((8191&(y=(y=y+Math.imul(K,Ht)|0)+Math.imul(Z,ut)|0))<<13)|0;V=((C=C+Math.imul(Z,Ht)|0)+(y>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,v=Math.imul(se,ke),y=(y=Math.imul(se,je))+Math.imul(pe,ke)|0,C=Math.imul(pe,je),v=v+Math.imul(ce,Ue)|0,y=(y=y+Math.imul(ce,Bt)|0)+Math.imul(Q,Ue)|0,C=C+Math.imul(Q,Bt)|0,v=v+Math.imul(J,ot)|0,y=(y=y+Math.imul(J,Ut)|0)+Math.imul(te,ot)|0,C=C+Math.imul(te,Ut)|0,v=v+Math.imul(z,_t)|0,y=(y=y+Math.imul(z,ri)|0)+Math.imul(X,_t)|0,C=C+Math.imul(X,ri)|0,v=v+Math.imul(G,ut)|0,y=(y=y+Math.imul(G,Ht)|0)+Math.imul(O,ut)|0,C=C+Math.imul(O,Ht)|0;var Ri=(V+(v=v+Math.imul(K,pt)|0)|0)+((8191&(y=(y=y+Math.imul(K,Xt)|0)+Math.imul(Z,pt)|0))<<13)|0;V=((C=C+Math.imul(Z,Xt)|0)+(y>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,v=Math.imul(me,ke),y=(y=Math.imul(me,je))+Math.imul(ye,ke)|0,C=Math.imul(ye,je),v=v+Math.imul(se,Ue)|0,y=(y=y+Math.imul(se,Bt)|0)+Math.imul(pe,Ue)|0,C=C+Math.imul(pe,Bt)|0,v=v+Math.imul(ce,ot)|0,y=(y=y+Math.imul(ce,Ut)|0)+Math.imul(Q,ot)|0,C=C+Math.imul(Q,Ut)|0,v=v+Math.imul(J,_t)|0,y=(y=y+Math.imul(J,ri)|0)+Math.imul(te,_t)|0,C=C+Math.imul(te,ri)|0,v=v+Math.imul(z,ut)|0,y=(y=y+Math.imul(z,Ht)|0)+Math.imul(X,ut)|0,C=C+Math.imul(X,Ht)|0,v=v+Math.imul(G,pt)|0,y=(y=y+Math.imul(G,Xt)|0)+Math.imul(O,pt)|0,C=C+Math.imul(O,Xt)|0;var pn=(V+(v=v+Math.imul(K,yt)|0)|0)+((8191&(y=(y=y+Math.imul(K,de)|0)+Math.imul(Z,yt)|0))<<13)|0;V=((C=C+Math.imul(Z,de)|0)+(y>>>13)|0)+(pn>>>26)|0,pn&=67108863,v=Math.imul(Ie,ke),y=(y=Math.imul(Ie,je))+Math.imul(Le,ke)|0,C=Math.imul(Le,je),v=v+Math.imul(me,Ue)|0,y=(y=y+Math.imul(me,Bt)|0)+Math.imul(ye,Ue)|0,C=C+Math.imul(ye,Bt)|0,v=v+Math.imul(se,ot)|0,y=(y=y+Math.imul(se,Ut)|0)+Math.imul(pe,ot)|0,C=C+Math.imul(pe,Ut)|0,v=v+Math.imul(ce,_t)|0,y=(y=y+Math.imul(ce,ri)|0)+Math.imul(Q,_t)|0,C=C+Math.imul(Q,ri)|0,v=v+Math.imul(J,ut)|0,y=(y=y+Math.imul(J,Ht)|0)+Math.imul(te,ut)|0,C=C+Math.imul(te,Ht)|0,v=v+Math.imul(z,pt)|0,y=(y=y+Math.imul(z,Xt)|0)+Math.imul(X,pt)|0,C=C+Math.imul(X,Xt)|0,v=v+Math.imul(G,yt)|0,y=(y=y+Math.imul(G,de)|0)+Math.imul(O,yt)|0,C=C+Math.imul(O,de)|0;var ne=(V+(v=v+Math.imul(K,we)|0)|0)+((8191&(y=(y=y+Math.imul(K,Fe)|0)+Math.imul(Z,we)|0))<<13)|0;V=((C=C+Math.imul(Z,Fe)|0)+(y>>>13)|0)+(ne>>>26)|0,ne&=67108863,v=Math.imul(Be,ke),y=(y=Math.imul(Be,je))+Math.imul(tt,ke)|0,C=Math.imul(tt,je),v=v+Math.imul(Ie,Ue)|0,y=(y=y+Math.imul(Ie,Bt)|0)+Math.imul(Le,Ue)|0,C=C+Math.imul(Le,Bt)|0,v=v+Math.imul(me,ot)|0,y=(y=y+Math.imul(me,Ut)|0)+Math.imul(ye,ot)|0,C=C+Math.imul(ye,Ut)|0,v=v+Math.imul(se,_t)|0,y=(y=y+Math.imul(se,ri)|0)+Math.imul(pe,_t)|0,C=C+Math.imul(pe,ri)|0,v=v+Math.imul(ce,ut)|0,y=(y=y+Math.imul(ce,Ht)|0)+Math.imul(Q,ut)|0,C=C+Math.imul(Q,Ht)|0,v=v+Math.imul(J,pt)|0,y=(y=y+Math.imul(J,Xt)|0)+Math.imul(te,pt)|0,C=C+Math.imul(te,Xt)|0,v=v+Math.imul(z,yt)|0,y=(y=y+Math.imul(z,de)|0)+Math.imul(X,yt)|0,C=C+Math.imul(X,de)|0,v=v+Math.imul(G,we)|0,y=(y=y+Math.imul(G,Fe)|0)+Math.imul(O,we)|0,C=C+Math.imul(O,Fe)|0;var ge=(V+(v=v+Math.imul(K,Ve)|0)|0)+((8191&(y=(y=y+Math.imul(K,ft)|0)+Math.imul(Z,Ve)|0))<<13)|0;V=((C=C+Math.imul(Z,ft)|0)+(y>>>13)|0)+(ge>>>26)|0,ge&=67108863,v=Math.imul(et,ke),y=(y=Math.imul(et,je))+Math.imul(nt,ke)|0,C=Math.imul(nt,je),v=v+Math.imul(Be,Ue)|0,y=(y=y+Math.imul(Be,Bt)|0)+Math.imul(tt,Ue)|0,C=C+Math.imul(tt,Bt)|0,v=v+Math.imul(Ie,ot)|0,y=(y=y+Math.imul(Ie,Ut)|0)+Math.imul(Le,ot)|0,C=C+Math.imul(Le,Ut)|0,v=v+Math.imul(me,_t)|0,y=(y=y+Math.imul(me,ri)|0)+Math.imul(ye,_t)|0,C=C+Math.imul(ye,ri)|0,v=v+Math.imul(se,ut)|0,y=(y=y+Math.imul(se,Ht)|0)+Math.imul(pe,ut)|0,C=C+Math.imul(pe,Ht)|0,v=v+Math.imul(ce,pt)|0,y=(y=y+Math.imul(ce,Xt)|0)+Math.imul(Q,pt)|0,C=C+Math.imul(Q,Xt)|0,v=v+Math.imul(J,yt)|0,y=(y=y+Math.imul(J,de)|0)+Math.imul(te,yt)|0,C=C+Math.imul(te,de)|0,v=v+Math.imul(z,we)|0,y=(y=y+Math.imul(z,Fe)|0)+Math.imul(X,we)|0,C=C+Math.imul(X,Fe)|0,v=v+Math.imul(G,Ve)|0,y=(y=y+Math.imul(G,ft)|0)+Math.imul(O,Ve)|0,C=C+Math.imul(O,ft)|0;var Se=(V+(v=v+Math.imul(K,it)|0)|0)+((8191&(y=(y=y+Math.imul(K,vt)|0)+Math.imul(Z,it)|0))<<13)|0;V=((C=C+Math.imul(Z,vt)|0)+(y>>>13)|0)+(Se>>>26)|0,Se&=67108863,v=Math.imul(et,Ue),y=(y=Math.imul(et,Bt))+Math.imul(nt,Ue)|0,C=Math.imul(nt,Bt),v=v+Math.imul(Be,ot)|0,y=(y=y+Math.imul(Be,Ut)|0)+Math.imul(tt,ot)|0,C=C+Math.imul(tt,Ut)|0,v=v+Math.imul(Ie,_t)|0,y=(y=y+Math.imul(Ie,ri)|0)+Math.imul(Le,_t)|0,C=C+Math.imul(Le,ri)|0,v=v+Math.imul(me,ut)|0,y=(y=y+Math.imul(me,Ht)|0)+Math.imul(ye,ut)|0,C=C+Math.imul(ye,Ht)|0,v=v+Math.imul(se,pt)|0,y=(y=y+Math.imul(se,Xt)|0)+Math.imul(pe,pt)|0,C=C+Math.imul(pe,Xt)|0,v=v+Math.imul(ce,yt)|0,y=(y=y+Math.imul(ce,de)|0)+Math.imul(Q,yt)|0,C=C+Math.imul(Q,de)|0,v=v+Math.imul(J,we)|0,y=(y=y+Math.imul(J,Fe)|0)+Math.imul(te,we)|0,C=C+Math.imul(te,Fe)|0,v=v+Math.imul(z,Ve)|0,y=(y=y+Math.imul(z,ft)|0)+Math.imul(X,Ve)|0,C=C+Math.imul(X,ft)|0;var Te=(V+(v=v+Math.imul(G,it)|0)|0)+((8191&(y=(y=y+Math.imul(G,vt)|0)+Math.imul(O,it)|0))<<13)|0;V=((C=C+Math.imul(O,vt)|0)+(y>>>13)|0)+(Te>>>26)|0,Te&=67108863,v=Math.imul(et,ot),y=(y=Math.imul(et,Ut))+Math.imul(nt,ot)|0,C=Math.imul(nt,Ut),v=v+Math.imul(Be,_t)|0,y=(y=y+Math.imul(Be,ri)|0)+Math.imul(tt,_t)|0,C=C+Math.imul(tt,ri)|0,v=v+Math.imul(Ie,ut)|0,y=(y=y+Math.imul(Ie,Ht)|0)+Math.imul(Le,ut)|0,C=C+Math.imul(Le,Ht)|0,v=v+Math.imul(me,pt)|0,y=(y=y+Math.imul(me,Xt)|0)+Math.imul(ye,pt)|0,C=C+Math.imul(ye,Xt)|0,v=v+Math.imul(se,yt)|0,y=(y=y+Math.imul(se,de)|0)+Math.imul(pe,yt)|0,C=C+Math.imul(pe,de)|0,v=v+Math.imul(ce,we)|0,y=(y=y+Math.imul(ce,Fe)|0)+Math.imul(Q,we)|0,C=C+Math.imul(Q,Fe)|0,v=v+Math.imul(J,Ve)|0,y=(y=y+Math.imul(J,ft)|0)+Math.imul(te,Ve)|0,C=C+Math.imul(te,ft)|0;var Ye=(V+(v=v+Math.imul(z,it)|0)|0)+((8191&(y=(y=y+Math.imul(z,vt)|0)+Math.imul(X,it)|0))<<13)|0;V=((C=C+Math.imul(X,vt)|0)+(y>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,v=Math.imul(et,_t),y=(y=Math.imul(et,ri))+Math.imul(nt,_t)|0,C=Math.imul(nt,ri),v=v+Math.imul(Be,ut)|0,y=(y=y+Math.imul(Be,Ht)|0)+Math.imul(tt,ut)|0,C=C+Math.imul(tt,Ht)|0,v=v+Math.imul(Ie,pt)|0,y=(y=y+Math.imul(Ie,Xt)|0)+Math.imul(Le,pt)|0,C=C+Math.imul(Le,Xt)|0,v=v+Math.imul(me,yt)|0,y=(y=y+Math.imul(me,de)|0)+Math.imul(ye,yt)|0,C=C+Math.imul(ye,de)|0,v=v+Math.imul(se,we)|0,y=(y=y+Math.imul(se,Fe)|0)+Math.imul(pe,we)|0,C=C+Math.imul(pe,Fe)|0,v=v+Math.imul(ce,Ve)|0,y=(y=y+Math.imul(ce,ft)|0)+Math.imul(Q,Ve)|0,C=C+Math.imul(Q,ft)|0;var Oe=(V+(v=v+Math.imul(J,it)|0)|0)+((8191&(y=(y=y+Math.imul(J,vt)|0)+Math.imul(te,it)|0))<<13)|0;V=((C=C+Math.imul(te,vt)|0)+(y>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,v=Math.imul(et,ut),y=(y=Math.imul(et,Ht))+Math.imul(nt,ut)|0,C=Math.imul(nt,Ht),v=v+Math.imul(Be,pt)|0,y=(y=y+Math.imul(Be,Xt)|0)+Math.imul(tt,pt)|0,C=C+Math.imul(tt,Xt)|0,v=v+Math.imul(Ie,yt)|0,y=(y=y+Math.imul(Ie,de)|0)+Math.imul(Le,yt)|0,C=C+Math.imul(Le,de)|0,v=v+Math.imul(me,we)|0,y=(y=y+Math.imul(me,Fe)|0)+Math.imul(ye,we)|0,C=C+Math.imul(ye,Fe)|0,v=v+Math.imul(se,Ve)|0,y=(y=y+Math.imul(se,ft)|0)+Math.imul(pe,Ve)|0,C=C+Math.imul(pe,ft)|0;var Pe=(V+(v=v+Math.imul(ce,it)|0)|0)+((8191&(y=(y=y+Math.imul(ce,vt)|0)+Math.imul(Q,it)|0))<<13)|0;V=((C=C+Math.imul(Q,vt)|0)+(y>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,v=Math.imul(et,pt),y=(y=Math.imul(et,Xt))+Math.imul(nt,pt)|0,C=Math.imul(nt,Xt),v=v+Math.imul(Be,yt)|0,y=(y=y+Math.imul(Be,de)|0)+Math.imul(tt,yt)|0,C=C+Math.imul(tt,de)|0,v=v+Math.imul(Ie,we)|0,y=(y=y+Math.imul(Ie,Fe)|0)+Math.imul(Le,we)|0,C=C+Math.imul(Le,Fe)|0,v=v+Math.imul(me,Ve)|0,y=(y=y+Math.imul(me,ft)|0)+Math.imul(ye,Ve)|0,C=C+Math.imul(ye,ft)|0;var Rt=(V+(v=v+Math.imul(se,it)|0)|0)+((8191&(y=(y=y+Math.imul(se,vt)|0)+Math.imul(pe,it)|0))<<13)|0;V=((C=C+Math.imul(pe,vt)|0)+(y>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,v=Math.imul(et,yt),y=(y=Math.imul(et,de))+Math.imul(nt,yt)|0,C=Math.imul(nt,de),v=v+Math.imul(Be,we)|0,y=(y=y+Math.imul(Be,Fe)|0)+Math.imul(tt,we)|0,C=C+Math.imul(tt,Fe)|0,v=v+Math.imul(Ie,Ve)|0,y=(y=y+Math.imul(Ie,ft)|0)+Math.imul(Le,Ve)|0,C=C+Math.imul(Le,ft)|0;var It=(V+(v=v+Math.imul(me,it)|0)|0)+((8191&(y=(y=y+Math.imul(me,vt)|0)+Math.imul(ye,it)|0))<<13)|0;V=((C=C+Math.imul(ye,vt)|0)+(y>>>13)|0)+(It>>>26)|0,It&=67108863,v=Math.imul(et,we),y=(y=Math.imul(et,Fe))+Math.imul(nt,we)|0,C=Math.imul(nt,Fe),v=v+Math.imul(Be,Ve)|0,y=(y=y+Math.imul(Be,ft)|0)+Math.imul(tt,Ve)|0,C=C+Math.imul(tt,ft)|0;var Et=(V+(v=v+Math.imul(Ie,it)|0)|0)+((8191&(y=(y=y+Math.imul(Ie,vt)|0)+Math.imul(Le,it)|0))<<13)|0;V=((C=C+Math.imul(Le,vt)|0)+(y>>>13)|0)+(Et>>>26)|0,Et&=67108863,v=Math.imul(et,Ve),y=(y=Math.imul(et,ft))+Math.imul(nt,Ve)|0,C=Math.imul(nt,ft);var dt=(V+(v=v+Math.imul(Be,it)|0)|0)+((8191&(y=(y=y+Math.imul(Be,vt)|0)+Math.imul(tt,it)|0))<<13)|0;V=((C=C+Math.imul(tt,vt)|0)+(y>>>13)|0)+(dt>>>26)|0,dt&=67108863;var ti=(V+(v=Math.imul(et,it))|0)+((8191&(y=(y=Math.imul(et,vt))+Math.imul(nt,it)|0))<<13)|0;return V=((C=Math.imul(nt,vt))+(y>>>13)|0)+(ti>>>26)|0,ti&=67108863,M[0]=gt,M[1]=At,M[2]=Ci,M[3]=ui,M[4]=Oi,M[5]=Ri,M[6]=pn,M[7]=ne,M[8]=ge,M[9]=Se,M[10]=Te,M[11]=Ye,M[12]=Oe,M[13]=Pe,M[14]=Rt,M[15]=It,M[16]=Et,M[17]=dt,M[18]=ti,V!==0&&(M[19]=V,S.length++),S};function w(I,k,S){return new E().mulp(I,k,S)}function E(I,k){this.x=I,this.y=k}Math.imul||(_=b),d.prototype.mulTo=function(I,k){var S=this.length+I.length;return this.length===10&&I.length===10?_(this,I,k):S<63?b(this,I,k):S<1024?function(v,y,C){C.negative=y.negative^v.negative,C.length=v.length+y.length;for(var x=0,T=0,M=0;M<C.length-1;M++){var V=T;T=0;for(var W=67108863&x,K=Math.min(M,y.length-1),Z=Math.max(0,M-v.length+1);Z<=K;Z++){var P=M-Z,G=(0|v.words[P])*(0|y.words[Z]),O=67108863&G;W=67108863&(O=O+W|0),T+=(V=(V=V+(G/67108864|0)|0)+(O>>>26)|0)>>>26,V&=67108863}C.words[M]=W,x=V,V=T}return x!==0?C.words[M]=x:C.length--,C.strip()}(this,I,k):w(this,I,k)},E.prototype.makeRBT=function(I){for(var k=new Array(I),S=d.prototype._countBits(I)-1,v=0;v<I;v++)k[v]=this.revBin(v,S,I);return k},E.prototype.revBin=function(I,k,S){if(I===0||I===S-1)return I;for(var v=0,y=0;y<k;y++)v|=(1&I)<<k-y-1,I>>=1;return v},E.prototype.permute=function(I,k,S,v,y,C){for(var x=0;x<C;x++)v[x]=k[I[x]],y[x]=S[I[x]]},E.prototype.transform=function(I,k,S,v,y,C){this.permute(C,I,k,S,v,y);for(var x=1;x<y;x<<=1)for(var T=x<<1,M=Math.cos(2*Math.PI/T),V=Math.sin(2*Math.PI/T),W=0;W<y;W+=T)for(var K=M,Z=V,P=0;P<x;P++){var G=S[W+P],O=v[W+P],A=S[W+P+x],z=v[W+P+x],X=K*A-Z*z;z=K*z+Z*A,A=X,S[W+P]=G+A,v[W+P]=O+z,S[W+P+x]=G-A,v[W+P+x]=O-z,P!==T&&(X=M*K-V*Z,Z=M*Z+V*K,K=X)}},E.prototype.guessLen13b=function(I,k){var S=1|Math.max(k,I),v=1&S,y=0;for(S=S/2|0;S;S>>>=1)y++;return 1<<y+1+v},E.prototype.conjugate=function(I,k,S){if(!(S<=1))for(var v=0;v<S/2;v++){var y=I[v];I[v]=I[S-v-1],I[S-v-1]=y,y=k[v],k[v]=-k[S-v-1],k[S-v-1]=-y}},E.prototype.normalize13b=function(I,k){for(var S=0,v=0;v<k/2;v++){var y=8192*Math.round(I[2*v+1]/k)+Math.round(I[2*v]/k)+S;I[v]=67108863&y,S=y<67108864?0:y/67108864|0}return I},E.prototype.convert13b=function(I,k,S,v){for(var y=0,C=0;C<k;C++)y+=0|I[C],S[2*C]=8191&y,y>>>=13,S[2*C+1]=8191&y,y>>>=13;for(C=2*k;C<v;++C)S[C]=0;a(y===0),a((-8192&y)==0)},E.prototype.stub=function(I){for(var k=new Array(I),S=0;S<I;S++)k[S]=0;return k},E.prototype.mulp=function(I,k,S){var v=2*this.guessLen13b(I.length,k.length),y=this.makeRBT(v),C=this.stub(v),x=new Array(v),T=new Array(v),M=new Array(v),V=new Array(v),W=new Array(v),K=new Array(v),Z=S.words;Z.length=v,this.convert13b(I.words,I.length,x,v),this.convert13b(k.words,k.length,V,v),this.transform(x,C,T,M,v,y),this.transform(V,C,W,K,v,y);for(var P=0;P<v;P++){var G=T[P]*W[P]-M[P]*K[P];M[P]=T[P]*K[P]+M[P]*W[P],T[P]=G}return this.conjugate(T,M,v),this.transform(T,M,Z,C,v,y),this.conjugate(Z,C,v),this.normalize13b(Z,v),S.negative=I.negative^k.negative,S.length=I.length+k.length,S.strip()},d.prototype.mul=function(I){var k=new d(null);return k.words=new Array(this.length+I.length),this.mulTo(I,k)},d.prototype.mulf=function(I){var k=new d(null);return k.words=new Array(this.length+I.length),w(this,I,k)},d.prototype.imul=function(I){return this.clone().mulTo(I,this)},d.prototype.imuln=function(I){a(typeof I=="number"),a(I<67108864);for(var k=0,S=0;S<this.length;S++){var v=(0|this.words[S])*I,y=(67108863&v)+(67108863&k);k>>=26,k+=v/67108864|0,k+=y>>>26,this.words[S]=67108863&y}return k!==0&&(this.words[S]=k,this.length++),this},d.prototype.muln=function(I){return this.clone().imuln(I)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(I){var k=function(C){for(var x=new Array(C.bitLength()),T=0;T<x.length;T++){var M=T/26|0,V=T%26;x[T]=(C.words[M]&1<<V)>>>V}return x}(I);if(k.length===0)return new d(1);for(var S=this,v=0;v<k.length&&k[v]===0;v++,S=S.sqr());if(++v<k.length)for(var y=S.sqr();v<k.length;v++,y=y.sqr())k[v]!==0&&(S=S.mul(y));return S},d.prototype.iushln=function(I){a(typeof I=="number"&&I>=0);var k,S=I%26,v=(I-S)/26,y=67108863>>>26-S<<26-S;if(S!==0){var C=0;for(k=0;k<this.length;k++){var x=this.words[k]&y,T=(0|this.words[k])-x<<S;this.words[k]=T|C,C=x>>>26-S}C&&(this.words[k]=C,this.length++)}if(v!==0){for(k=this.length-1;k>=0;k--)this.words[k+v]=this.words[k];for(k=0;k<v;k++)this.words[k]=0;this.length+=v}return this.strip()},d.prototype.ishln=function(I){return a(this.negative===0),this.iushln(I)},d.prototype.iushrn=function(I,k,S){var v;a(typeof I=="number"&&I>=0),v=k?(k-k%26)/26:0;var y=I%26,C=Math.min((I-y)/26,this.length),x=67108863^67108863>>>y<<y,T=S;if(v-=C,v=Math.max(0,v),T){for(var M=0;M<C;M++)T.words[M]=this.words[M];T.length=C}if(C!==0)if(this.length>C)for(this.length-=C,M=0;M<this.length;M++)this.words[M]=this.words[M+C];else this.words[0]=0,this.length=1;var V=0;for(M=this.length-1;M>=0&&(V!==0||M>=v);M--){var W=0|this.words[M];this.words[M]=V<<26-y|W>>>y,V=W&x}return T&&V!==0&&(T.words[T.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(I,k,S){return a(this.negative===0),this.iushrn(I,k,S)},d.prototype.shln=function(I){return this.clone().ishln(I)},d.prototype.ushln=function(I){return this.clone().iushln(I)},d.prototype.shrn=function(I){return this.clone().ishrn(I)},d.prototype.ushrn=function(I){return this.clone().iushrn(I)},d.prototype.testn=function(I){a(typeof I=="number"&&I>=0);var k=I%26,S=(I-k)/26,v=1<<k;return!(this.length<=S)&&!!(this.words[S]&v)},d.prototype.imaskn=function(I){a(typeof I=="number"&&I>=0);var k=I%26,S=(I-k)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(k!==0&&S++,this.length=Math.min(S,this.length),k!==0){var v=67108863^67108863>>>k<<k;this.words[this.length-1]&=v}return this.strip()},d.prototype.maskn=function(I){return this.clone().imaskn(I)},d.prototype.iaddn=function(I){return a(typeof I=="number"),a(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},d.prototype._iaddn=function(I){this.words[0]+=I;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},d.prototype.isubn=function(I){if(a(typeof I=="number"),a(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},d.prototype.addn=function(I){return this.clone().iaddn(I)},d.prototype.subn=function(I){return this.clone().isubn(I)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(I,k,S){var v,y,C=I.length+S;this._expand(C);var x=0;for(v=0;v<I.length;v++){y=(0|this.words[v+S])+x;var T=(0|I.words[v])*k;x=((y-=67108863&T)>>26)-(T/67108864|0),this.words[v+S]=67108863&y}for(;v<this.length-S;v++)x=(y=(0|this.words[v+S])+x)>>26,this.words[v+S]=67108863&y;if(x===0)return this.strip();for(a(x===-1),x=0,v=0;v<this.length;v++)x=(y=-(0|this.words[v])+x)>>26,this.words[v]=67108863&y;return this.negative=1,this.strip()},d.prototype._wordDiv=function(I,k){var S=(this.length,I.length),v=this.clone(),y=I,C=0|y.words[y.length-1];(S=26-this._countBits(C))!==0&&(y=y.ushln(S),v.iushln(S),C=0|y.words[y.length-1]);var x,T=v.length-y.length;if(k!=="mod"){(x=new d(null)).length=T+1,x.words=new Array(x.length);for(var M=0;M<x.length;M++)x.words[M]=0}var V=v.clone()._ishlnsubmul(y,1,T);V.negative===0&&(v=V,x&&(x.words[T]=1));for(var W=T-1;W>=0;W--){var K=67108864*(0|v.words[y.length+W])+(0|v.words[y.length+W-1]);for(K=Math.min(K/C|0,67108863),v._ishlnsubmul(y,K,W);v.negative!==0;)K--,v.negative=0,v._ishlnsubmul(y,1,W),v.isZero()||(v.negative^=1);x&&(x.words[W]=K)}return x&&x.strip(),v.strip(),k!=="div"&&S!==0&&v.iushrn(S),{div:x||null,mod:v}},d.prototype.divmod=function(I,k,S){return a(!I.isZero()),this.isZero()?{div:new d(0),mod:new d(0)}:this.negative!==0&&I.negative===0?(C=this.neg().divmod(I,k),k!=="mod"&&(v=C.div.neg()),k!=="div"&&(y=C.mod.neg(),S&&y.negative!==0&&y.iadd(I)),{div:v,mod:y}):this.negative===0&&I.negative!==0?(C=this.divmod(I.neg(),k),k!=="mod"&&(v=C.div.neg()),{div:v,mod:C.mod}):this.negative&I.negative?(C=this.neg().divmod(I.neg(),k),k!=="div"&&(y=C.mod.neg(),S&&y.negative!==0&&y.isub(I)),{div:C.div,mod:y}):I.length>this.length||this.cmp(I)<0?{div:new d(0),mod:this}:I.length===1?k==="div"?{div:this.divn(I.words[0]),mod:null}:k==="mod"?{div:null,mod:new d(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new d(this.modn(I.words[0]))}:this._wordDiv(I,k);var v,y,C},d.prototype.div=function(I){return this.divmod(I,"div",!1).div},d.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},d.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},d.prototype.divRound=function(I){var k=this.divmod(I);if(k.mod.isZero())return k.div;var S=k.div.negative!==0?k.mod.isub(I):k.mod,v=I.ushrn(1),y=I.andln(1),C=S.cmp(v);return C<0||y===1&&C===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},d.prototype.modn=function(I){a(I<=67108863);for(var k=(1<<26)%I,S=0,v=this.length-1;v>=0;v--)S=(k*S+(0|this.words[v]))%I;return S},d.prototype.idivn=function(I){a(I<=67108863);for(var k=0,S=this.length-1;S>=0;S--){var v=(0|this.words[S])+67108864*k;this.words[S]=v/I|0,k=v%I}return this.strip()},d.prototype.divn=function(I){return this.clone().idivn(I)},d.prototype.egcd=function(I){a(I.negative===0),a(!I.isZero());var k=this,S=I.clone();k=k.negative!==0?k.umod(I):k.clone();for(var v=new d(1),y=new d(0),C=new d(0),x=new d(1),T=0;k.isEven()&&S.isEven();)k.iushrn(1),S.iushrn(1),++T;for(var M=S.clone(),V=k.clone();!k.isZero();){for(var W=0,K=1;!(k.words[0]&K)&&W<26;++W,K<<=1);if(W>0)for(k.iushrn(W);W-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(M),y.isub(V)),v.iushrn(1),y.iushrn(1);for(var Z=0,P=1;!(S.words[0]&P)&&Z<26;++Z,P<<=1);if(Z>0)for(S.iushrn(Z);Z-- >0;)(C.isOdd()||x.isOdd())&&(C.iadd(M),x.isub(V)),C.iushrn(1),x.iushrn(1);k.cmp(S)>=0?(k.isub(S),v.isub(C),y.isub(x)):(S.isub(k),C.isub(v),x.isub(y))}return{a:C,b:x,gcd:S.iushln(T)}},d.prototype._invmp=function(I){a(I.negative===0),a(!I.isZero());var k=this,S=I.clone();k=k.negative!==0?k.umod(I):k.clone();for(var v,y=new d(1),C=new d(0),x=S.clone();k.cmpn(1)>0&&S.cmpn(1)>0;){for(var T=0,M=1;!(k.words[0]&M)&&T<26;++T,M<<=1);if(T>0)for(k.iushrn(T);T-- >0;)y.isOdd()&&y.iadd(x),y.iushrn(1);for(var V=0,W=1;!(S.words[0]&W)&&V<26;++V,W<<=1);if(V>0)for(S.iushrn(V);V-- >0;)C.isOdd()&&C.iadd(x),C.iushrn(1);k.cmp(S)>=0?(k.isub(S),y.isub(C)):(S.isub(k),C.isub(y))}return(v=k.cmpn(1)===0?y:C).cmpn(0)<0&&v.iadd(I),v},d.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var k=this.clone(),S=I.clone();k.negative=0,S.negative=0;for(var v=0;k.isEven()&&S.isEven();v++)k.iushrn(1),S.iushrn(1);for(;;){for(;k.isEven();)k.iushrn(1);for(;S.isEven();)S.iushrn(1);var y=k.cmp(S);if(y<0){var C=k;k=S,S=C}else if(y===0||S.cmpn(1)===0)break;k.isub(S)}return S.iushln(v)},d.prototype.invm=function(I){return this.egcd(I).a.umod(I)},d.prototype.isEven=function(){return(1&this.words[0])==0},d.prototype.isOdd=function(){return(1&this.words[0])==1},d.prototype.andln=function(I){return this.words[0]&I},d.prototype.bincn=function(I){a(typeof I=="number");var k=I%26,S=(I-k)/26,v=1<<k;if(this.length<=S)return this._expand(S+1),this.words[S]|=v,this;for(var y=v,C=S;y!==0&&C<this.length;C++){var x=0|this.words[C];y=(x+=y)>>>26,x&=67108863,this.words[C]=x}return y!==0&&(this.words[C]=y,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(I){var k,S=I<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;if(this.strip(),this.length>1)k=1;else{S&&(I=-I),a(I<=67108863,"Number is too big");var v=0|this.words[0];k=v===I?0:v<I?-1:1}return this.negative!==0?0|-k:k},d.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var k=this.ucmp(I);return this.negative!==0?0|-k:k},d.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var k=0,S=this.length-1;S>=0;S--){var v=0|this.words[S],y=0|I.words[S];if(v!==y){v<y?k=-1:v>y&&(k=1);break}}return k},d.prototype.gtn=function(I){return this.cmpn(I)===1},d.prototype.gt=function(I){return this.cmp(I)===1},d.prototype.gten=function(I){return this.cmpn(I)>=0},d.prototype.gte=function(I){return this.cmp(I)>=0},d.prototype.ltn=function(I){return this.cmpn(I)===-1},d.prototype.lt=function(I){return this.cmp(I)===-1},d.prototype.lten=function(I){return this.cmpn(I)<=0},d.prototype.lte=function(I){return this.cmp(I)<=0},d.prototype.eqn=function(I){return this.cmpn(I)===0},d.prototype.eq=function(I){return this.cmp(I)===0},d.red=function(I){return new j(I)},d.prototype.toRed=function(I){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},d.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(I){return this.red=I,this},d.prototype.forceRed=function(I){return a(!this.red,"Already a number in reduction context"),this._forceRed(I)},d.prototype.redAdd=function(I){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},d.prototype.redIAdd=function(I){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},d.prototype.redSub=function(I){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},d.prototype.redISub=function(I){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},d.prototype.redShl=function(I){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},d.prototype.redMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},d.prototype.redIMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},d.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(I){return a(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var D={k256:null,p224:null,p192:null,p25519:null};function B(I,k){this.name=I,this.p=new d(k,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function $(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function F(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function N(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function L(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(I){if(typeof I=="string"){var k=d._prime(I);this.m=k.p,this.prime=k}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function H(I){j.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var I=new d(null);return I.words=new Array(Math.ceil(this.n/13)),I},B.prototype.ireduce=function(I){var k,S=I;do this.split(S,this.tmp),k=(S=(S=this.imulK(S)).iadd(this.tmp)).bitLength();while(k>this.n);var v=k<this.n?-1:S.ucmp(this.p);return v===0?(S.words[0]=0,S.length=1):v>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},B.prototype.split=function(I,k){I.iushrn(this.n,0,k)},B.prototype.imulK=function(I){return I.imul(this.k)},l($,B),$.prototype.split=function(I,k){for(var S=Math.min(I.length,9),v=0;v<S;v++)k.words[v]=I.words[v];if(k.length=S,I.length<=9)return I.words[0]=0,void(I.length=1);var y=I.words[9];for(k.words[k.length++]=4194303&y,v=10;v<I.length;v++){var C=0|I.words[v];I.words[v-10]=(4194303&C)<<4|y>>>22,y=C}y>>>=22,I.words[v-10]=y,y===0&&I.length>10?I.length-=10:I.length-=9},$.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var k=0,S=0;S<I.length;S++){var v=0|I.words[S];k+=977*v,I.words[S]=67108863&k,k=64*v+(k/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I},l(F,B),l(N,B),l(L,B),L.prototype.imulK=function(I){for(var k=0,S=0;S<I.length;S++){var v=19*(0|I.words[S])+k,y=67108863&v;v>>>=26,I.words[S]=y,k=v}return k!==0&&(I.words[I.length++]=k),I},d._prime=function(I){if(D[I])return D[I];var k;if(I==="k256")k=new $;else if(I==="p224")k=new F;else if(I==="p192")k=new N;else{if(I!=="p25519")throw new Error("Unknown prime "+I);k=new L}return D[I]=k,k},j.prototype._verify1=function(I){a(I.negative===0,"red works only with positives"),a(I.red,"red works only with red numbers")},j.prototype._verify2=function(I,k){a((I.negative|k.negative)==0,"red works only with positives"),a(I.red&&I.red===k.red,"red works only with red numbers")},j.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},j.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},j.prototype.add=function(I,k){this._verify2(I,k);var S=I.add(k);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},j.prototype.iadd=function(I,k){this._verify2(I,k);var S=I.iadd(k);return S.cmp(this.m)>=0&&S.isub(this.m),S},j.prototype.sub=function(I,k){this._verify2(I,k);var S=I.sub(k);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},j.prototype.isub=function(I,k){this._verify2(I,k);var S=I.isub(k);return S.cmpn(0)<0&&S.iadd(this.m),S},j.prototype.shl=function(I,k){return this._verify1(I),this.imod(I.ushln(k))},j.prototype.imul=function(I,k){return this._verify2(I,k),this.imod(I.imul(k))},j.prototype.mul=function(I,k){return this._verify2(I,k),this.imod(I.mul(k))},j.prototype.isqr=function(I){return this.imul(I,I.clone())},j.prototype.sqr=function(I){return this.mul(I,I)},j.prototype.sqrt=function(I){if(I.isZero())return I.clone();var k=this.m.andln(3);if(a(k%2==1),k===3){var S=this.m.add(new d(1)).iushrn(2);return this.pow(I,S)}for(var v=this.m.subn(1),y=0;!v.isZero()&&v.andln(1)===0;)y++,v.iushrn(1);a(!v.isZero());var C=new d(1).toRed(this),x=C.redNeg(),T=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new d(2*M*M).toRed(this);this.pow(M,T).cmp(x)!==0;)M.redIAdd(x);for(var V=this.pow(M,v),W=this.pow(I,v.addn(1).iushrn(1)),K=this.pow(I,v),Z=y;K.cmp(C)!==0;){for(var P=K,G=0;P.cmp(C)!==0;G++)P=P.redSqr();a(G<Z);var O=this.pow(V,new d(1).iushln(Z-G-1));W=W.redMul(O),V=O.redSqr(),K=K.redMul(V),Z=G}return W},j.prototype.invm=function(I){var k=I._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},j.prototype.pow=function(I,k){if(k.isZero())return new d(1).toRed(this);if(k.cmpn(1)===0)return I.clone();var S=new Array(16);S[0]=new d(1).toRed(this),S[1]=I;for(var v=2;v<S.length;v++)S[v]=this.mul(S[v-1],I);var y=S[0],C=0,x=0,T=k.bitLength()%26;for(T===0&&(T=26),v=k.length-1;v>=0;v--){for(var M=k.words[v],V=T-1;V>=0;V--){var W=M>>V&1;y!==S[0]&&(y=this.sqr(y)),W!==0||C!==0?(C<<=1,C|=W,(++x===4||v===0&&V===0)&&(y=this.mul(y,S[C]),x=0,C=0)):x=0}T=26}return y},j.prototype.convertTo=function(I){var k=I.umod(this.m);return k===I?k.clone():k},j.prototype.convertFrom=function(I){var k=I.clone();return k.red=null,k},d.mont=function(I){return new H(I)},l(H,j),H.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},H.prototype.convertFrom=function(I){var k=this.imod(I.mul(this.rinv));return k.red=null,k},H.prototype.imul=function(I,k){if(I.isZero()||k.isZero())return I.words[0]=0,I.length=1,I;var S=I.imul(k),v=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=S.isub(v).iushrn(this.shift),C=y;return y.cmp(this.m)>=0?C=y.isub(this.m):y.cmpn(0)<0&&(C=y.iadd(this.m)),C._forceRed(this)},H.prototype.mul=function(I,k){if(I.isZero()||k.isZero())return new d(0)._forceRed(this);var S=I.mul(k),v=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=S.isub(v).iushrn(this.shift),C=y;return y.cmp(this.m)>=0?C=y.isub(this.m):y.cmpn(0)<0&&(C=y.iadd(this.m)),C._forceRed(this)},H.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],185:[function(t,n,s){s.byteLength=function(p){var f=h(p),g=f[0],m=f[1];return 3*(g+m)/4-m},s.toByteArray=function(p){var f,g,m=h(p),b=m[0],_=m[1],w=new a(function(B,$,F){return 3*($+F)/4-F}(0,b,_)),E=0,D=_>0?b-4:b;for(g=0;g<D;g+=4)f=r[p.charCodeAt(g)]<<18|r[p.charCodeAt(g+1)]<<12|r[p.charCodeAt(g+2)]<<6|r[p.charCodeAt(g+3)],w[E++]=f>>16&255,w[E++]=f>>8&255,w[E++]=255&f;return _===2&&(f=r[p.charCodeAt(g)]<<2|r[p.charCodeAt(g+1)]>>4,w[E++]=255&f),_===1&&(f=r[p.charCodeAt(g)]<<10|r[p.charCodeAt(g+1)]<<4|r[p.charCodeAt(g+2)]>>2,w[E++]=f>>8&255,w[E++]=255&f),w},s.fromByteArray=function(p){for(var f,g=p.length,m=g%3,b=[],_=0,w=g-m;_<w;_+=16383)b.push(u(p,_,_+16383>w?w:_+16383));return m===1?(f=p[g-1],b.push(o[f>>2]+o[f<<4&63]+"==")):m===2&&(f=(p[g-2]<<8)+p[g-1],b.push(o[f>>10]+o[f>>4&63]+o[f<<2&63]+"=")),b.join("")};for(var o=[],r=[],a=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,c=l.length;d<c;++d)o[d]=l[d],r[l.charCodeAt(d)]=d;function h(p){var f=p.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");return g===-1&&(g=f),[g,g===f?0:4-g%4]}function u(p,f,g){for(var m,b,_=[],w=f;w<g;w+=3)m=(p[w]<<16&16711680)+(p[w+1]<<8&65280)+(255&p[w+2]),_.push(o[(b=m)>>18&63]+o[b>>12&63]+o[b>>6&63]+o[63&b]);return _.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],186:[function(t,n,s){(function(o,r){function a(S,v){if(!S)throw new Error(v||"Assertion failed")}function l(S,v){S.super_=v;var y=function(){};y.prototype=v.prototype,S.prototype=new y,S.prototype.constructor=S}function d(S,v,y){if(d.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&(v!=="le"&&v!=="be"||(y=v,v=10),this._init(S||0,v||10,y||"be"))}var c;typeof o=="object"?o.exports=d:(void 0).BN=d,d.BN=d,d.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function h(S,v){var y=S.charCodeAt(v);return y>=48&&y<=57?y-48:y>=65&&y<=70?y-55:y>=97&&y<=102?y-87:void a(!1,"Invalid character in "+S)}function u(S,v,y){var C=h(S,y);return y-1>=v&&(C|=h(S,y-1)<<4),C}function p(S,v,y,C){for(var x=0,T=0,M=Math.min(S.length,y),V=v;V<M;V++){var W=S.charCodeAt(V)-48;x*=C,T=W>=49?W-49+10:W>=17?W-17+10:W,a(W>=0&&T<C,"Invalid character"),x+=T}return x}function f(S,v){S.words=v.words,S.length=v.length,S.negative=v.negative,S.red=v.red}if(d.isBN=function(S){return S instanceof d||S!==null&&typeof S=="object"&&S.constructor.wordSize===d.wordSize&&Array.isArray(S.words)},d.max=function(S,v){return S.cmp(v)>0?S:v},d.min=function(S,v){return S.cmp(v)<0?S:v},d.prototype._init=function(S,v,y){if(typeof S=="number")return this._initNumber(S,v,y);if(typeof S=="object")return this._initArray(S,v,y);v==="hex"&&(v=16),a(v===(0|v)&&v>=2&&v<=36);var C=0;(S=S.toString().replace(/\s+/g,""))[0]==="-"&&(C++,this.negative=1),C<S.length&&(v===16?this._parseHex(S,C,y):(this._parseBase(S,v,C),y==="le"&&this._initArray(this.toArray(),v,y)))},d.prototype._initNumber=function(S,v,y){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(a(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),v,y)},d.prototype._initArray=function(S,v,y){if(a(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var x,T,M=0;if(y==="be")for(C=S.length-1,x=0;C>=0;C-=3)T=S[C]|S[C-1]<<8|S[C-2]<<16,this.words[x]|=T<<M&67108863,this.words[x+1]=T>>>26-M&67108863,(M+=24)>=26&&(M-=26,x++);else if(y==="le")for(C=0,x=0;C<S.length;C+=3)T=S[C]|S[C+1]<<8|S[C+2]<<16,this.words[x]|=T<<M&67108863,this.words[x+1]=T>>>26-M&67108863,(M+=24)>=26&&(M-=26,x++);return this._strip()},d.prototype._parseHex=function(S,v,y){this.length=Math.ceil((S.length-v)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var x,T=0,M=0;if(y==="be")for(C=S.length-1;C>=v;C-=2)x=u(S,v,C)<<T,this.words[M]|=67108863&x,T>=18?(T-=18,M+=1,this.words[M]|=x>>>26):T+=8;else for(C=(S.length-v)%2==0?v+1:v;C<S.length;C+=2)x=u(S,v,C)<<T,this.words[M]|=67108863&x,T>=18?(T-=18,M+=1,this.words[M]|=x>>>26):T+=8;this._strip()},d.prototype._parseBase=function(S,v,y){this.words=[0],this.length=1;for(var C=0,x=1;x<=67108863;x*=v)C++;C--,x=x/v|0;for(var T=S.length-y,M=T%C,V=Math.min(T,T-M)+y,W=0,K=y;K<V;K+=C)W=p(S,K,K+C,v),this.imuln(x),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W);if(M!==0){var Z=1;for(W=p(S,K,S.length,v),K=0;K<M;K++)Z*=v;this.imuln(Z),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W)}this._strip()},d.prototype.copy=function(S){S.words=new Array(this.length);for(var v=0;v<this.length;v++)S.words[v]=this.words[v];S.length=this.length,S.negative=this.negative,S.red=this.red},d.prototype._move=function(S){f(S,this)},d.prototype.clone=function(){var S=new d(null);return this.copy(S),S},d.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},d.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{d.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{d.prototype.inspect=g}else d.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(S,v){var y;if(v=0|v||1,(S=S||10)===16||S==="hex"){y="";for(var C=0,x=0,T=0;T<this.length;T++){var M=this.words[T],V=(16777215&(M<<C|x)).toString(16);x=M>>>24-C&16777215,(C+=2)>=26&&(C-=26,T--),y=x!==0||T!==this.length-1?m[6-V.length]+V+y:V+y}for(x!==0&&(y=x.toString(16)+y);y.length%v!=0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(S===(0|S)&&S>=2&&S<=36){var W=b[S],K=_[S];y="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var P=Z.modrn(K).toString(S);y=(Z=Z.idivn(K)).isZero()?P+y:m[W-P.length]+P+y}for(this.isZero()&&(y="0"+y);y.length%v!=0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}a(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=67108864*this.words[1]:this.length===3&&this.words[2]===1?S+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},d.prototype.toJSON=function(){return this.toString(16,2)},c&&(d.prototype.toBuffer=function(S,v){return this.toArrayLike(c,S,v)}),d.prototype.toArray=function(S,v){return this.toArrayLike(Array,S,v)};function w(S,v,y){y.negative=v.negative^S.negative;var C=S.length+v.length|0;y.length=C,C=C-1|0;var x=0|S.words[0],T=0|v.words[0],M=x*T,V=67108863&M,W=M/67108864|0;y.words[0]=V;for(var K=1;K<C;K++){for(var Z=W>>>26,P=67108863&W,G=Math.min(K,v.length-1),O=Math.max(0,K-S.length+1);O<=G;O++){var A=K-O|0;Z+=(M=(x=0|S.words[A])*(T=0|v.words[O])+P)/67108864|0,P=67108863&M}y.words[K]=0|P,W=0|Z}return W!==0?y.words[K]=0|W:y.length--,y._strip()}d.prototype.toArrayLike=function(S,v,y){this._strip();var C=this.byteLength(),x=y||Math.max(1,C);a(C<=x,"byte array longer than desired length"),a(x>0,"Requested array length <= 0");var T=function(M,V){return M.allocUnsafe?M.allocUnsafe(V):new M(V)}(S,x);return this["_toArrayLike"+(v==="le"?"LE":"BE")](T,C),T},d.prototype._toArrayLikeLE=function(S,v){for(var y=0,C=0,x=0,T=0;x<this.length;x++){var M=this.words[x]<<T|C;S[y++]=255&M,y<S.length&&(S[y++]=M>>8&255),y<S.length&&(S[y++]=M>>16&255),T===6?(y<S.length&&(S[y++]=M>>24&255),C=0,T=0):(C=M>>>24,T+=2)}if(y<S.length)for(S[y++]=C;y<S.length;)S[y++]=0},d.prototype._toArrayLikeBE=function(S,v){for(var y=S.length-1,C=0,x=0,T=0;x<this.length;x++){var M=this.words[x]<<T|C;S[y--]=255&M,y>=0&&(S[y--]=M>>8&255),y>=0&&(S[y--]=M>>16&255),T===6?(y>=0&&(S[y--]=M>>24&255),C=0,T=0):(C=M>>>24,T+=2)}if(y>=0)for(S[y--]=C;y>=0;)S[y--]=0},Math.clz32?d.prototype._countBits=function(S){return 32-Math.clz32(S)}:d.prototype._countBits=function(S){var v=S,y=0;return v>=4096&&(y+=13,v>>>=13),v>=64&&(y+=7,v>>>=7),v>=8&&(y+=4,v>>>=4),v>=2&&(y+=2,v>>>=2),y+v},d.prototype._zeroBits=function(S){if(S===0)return 26;var v=S,y=0;return!(8191&v)&&(y+=13,v>>>=13),!(127&v)&&(y+=7,v>>>=7),!(15&v)&&(y+=4,v>>>=4),!(3&v)&&(y+=2,v>>>=2),!(1&v)&&y++,y},d.prototype.bitLength=function(){var S=this.words[this.length-1],v=this._countBits(S);return 26*(this.length-1)+v},d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,v=0;v<this.length;v++){var y=this._zeroBits(this.words[v]);if(S+=y,y!==26)break}return S},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},d.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var v=0;v<S.length;v++)this.words[v]=this.words[v]|S.words[v];return this._strip()},d.prototype.ior=function(S){return a((this.negative|S.negative)==0),this.iuor(S)},d.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},d.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},d.prototype.iuand=function(S){var v;v=this.length>S.length?S:this;for(var y=0;y<v.length;y++)this.words[y]=this.words[y]&S.words[y];return this.length=v.length,this._strip()},d.prototype.iand=function(S){return a((this.negative|S.negative)==0),this.iuand(S)},d.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},d.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},d.prototype.iuxor=function(S){var v,y;this.length>S.length?(v=this,y=S):(v=S,y=this);for(var C=0;C<y.length;C++)this.words[C]=v.words[C]^y.words[C];if(this!==v)for(;C<v.length;C++)this.words[C]=v.words[C];return this.length=v.length,this._strip()},d.prototype.ixor=function(S){return a((this.negative|S.negative)==0),this.iuxor(S)},d.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},d.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},d.prototype.inotn=function(S){a(typeof S=="number"&&S>=0);var v=0|Math.ceil(S/26),y=S%26;this._expand(v),y>0&&v--;for(var C=0;C<v;C++)this.words[C]=67108863&~this.words[C];return y>0&&(this.words[C]=~this.words[C]&67108863>>26-y),this._strip()},d.prototype.notn=function(S){return this.clone().inotn(S)},d.prototype.setn=function(S,v){a(typeof S=="number"&&S>=0);var y=S/26|0,C=S%26;return this._expand(y+1),this.words[y]=v?this.words[y]|1<<C:this.words[y]&~(1<<C),this._strip()},d.prototype.iadd=function(S){var v,y,C;if(this.negative!==0&&S.negative===0)return this.negative=0,v=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,v=this.isub(S),S.negative=1,v._normSign();this.length>S.length?(y=this,C=S):(y=S,C=this);for(var x=0,T=0;T<C.length;T++)v=(0|y.words[T])+(0|C.words[T])+x,this.words[T]=67108863&v,x=v>>>26;for(;x!==0&&T<y.length;T++)v=(0|y.words[T])+x,this.words[T]=67108863&v,x=v>>>26;if(this.length=y.length,x!==0)this.words[this.length]=x,this.length++;else if(y!==this)for(;T<y.length;T++)this.words[T]=y.words[T];return this},d.prototype.add=function(S){var v;return S.negative!==0&&this.negative===0?(S.negative=0,v=this.sub(S),S.negative^=1,v):S.negative===0&&this.negative!==0?(this.negative=0,v=S.sub(this),this.negative=1,v):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},d.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var v=this.iadd(S);return S.negative=1,v._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var y,C,x=this.cmp(S);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;x>0?(y=this,C=S):(y=S,C=this);for(var T=0,M=0;M<C.length;M++)T=(v=(0|y.words[M])-(0|C.words[M])+T)>>26,this.words[M]=67108863&v;for(;T!==0&&M<y.length;M++)T=(v=(0|y.words[M])+T)>>26,this.words[M]=67108863&v;if(T===0&&M<y.length&&y!==this)for(;M<y.length;M++)this.words[M]=y.words[M];return this.length=Math.max(this.length,M),y!==this&&(this.negative=1),this._strip()},d.prototype.sub=function(S){return this.clone().isub(S)};var E=function(S,v,y){var C,x,T,M=S.words,V=v.words,W=y.words,K=0,Z=0|M[0],P=8191&Z,G=Z>>>13,O=0|M[1],A=8191&O,z=O>>>13,X=0|M[2],ee=8191&X,J=X>>>13,te=0|M[3],le=8191&te,ce=te>>>13,Q=0|M[4],oe=8191&Q,se=Q>>>13,pe=0|M[5],he=8191&pe,me=pe>>>13,ye=0|M[6],xe=8191&ye,Ie=ye>>>13,Le=0|M[7],Ne=8191&Le,Be=Le>>>13,tt=0|M[8],Qe=8191&tt,et=tt>>>13,nt=0|M[9],$e=8191&nt,ke=nt>>>13,je=0|V[0],Xe=8191&je,Ue=je>>>13,Bt=0|V[1],Qt=8191&Bt,ot=Bt>>>13,Ut=0|V[2],Ot=8191&Ut,_t=Ut>>>13,ri=0|V[3],qt=8191&ri,ut=ri>>>13,Ht=0|V[4],ni=8191&Ht,pt=Ht>>>13,Xt=0|V[5],si=8191&Xt,yt=Xt>>>13,de=0|V[6],fe=8191&de,we=de>>>13,Fe=0|V[7],at=8191&Fe,Ve=Fe>>>13,ft=0|V[8],lt=8191&ft,it=ft>>>13,vt=0|V[9],gt=8191&vt,At=vt>>>13;y.negative=S.negative^v.negative,y.length=19;var Ci=(K+(C=Math.imul(P,Xe))|0)+((8191&(x=(x=Math.imul(P,Ue))+Math.imul(G,Xe)|0))<<13)|0;K=((T=Math.imul(G,Ue))+(x>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,C=Math.imul(A,Xe),x=(x=Math.imul(A,Ue))+Math.imul(z,Xe)|0,T=Math.imul(z,Ue);var ui=(K+(C=C+Math.imul(P,Qt)|0)|0)+((8191&(x=(x=x+Math.imul(P,ot)|0)+Math.imul(G,Qt)|0))<<13)|0;K=((T=T+Math.imul(G,ot)|0)+(x>>>13)|0)+(ui>>>26)|0,ui&=67108863,C=Math.imul(ee,Xe),x=(x=Math.imul(ee,Ue))+Math.imul(J,Xe)|0,T=Math.imul(J,Ue),C=C+Math.imul(A,Qt)|0,x=(x=x+Math.imul(A,ot)|0)+Math.imul(z,Qt)|0,T=T+Math.imul(z,ot)|0;var Oi=(K+(C=C+Math.imul(P,Ot)|0)|0)+((8191&(x=(x=x+Math.imul(P,_t)|0)+Math.imul(G,Ot)|0))<<13)|0;K=((T=T+Math.imul(G,_t)|0)+(x>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,C=Math.imul(le,Xe),x=(x=Math.imul(le,Ue))+Math.imul(ce,Xe)|0,T=Math.imul(ce,Ue),C=C+Math.imul(ee,Qt)|0,x=(x=x+Math.imul(ee,ot)|0)+Math.imul(J,Qt)|0,T=T+Math.imul(J,ot)|0,C=C+Math.imul(A,Ot)|0,x=(x=x+Math.imul(A,_t)|0)+Math.imul(z,Ot)|0,T=T+Math.imul(z,_t)|0;var Ri=(K+(C=C+Math.imul(P,qt)|0)|0)+((8191&(x=(x=x+Math.imul(P,ut)|0)+Math.imul(G,qt)|0))<<13)|0;K=((T=T+Math.imul(G,ut)|0)+(x>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,C=Math.imul(oe,Xe),x=(x=Math.imul(oe,Ue))+Math.imul(se,Xe)|0,T=Math.imul(se,Ue),C=C+Math.imul(le,Qt)|0,x=(x=x+Math.imul(le,ot)|0)+Math.imul(ce,Qt)|0,T=T+Math.imul(ce,ot)|0,C=C+Math.imul(ee,Ot)|0,x=(x=x+Math.imul(ee,_t)|0)+Math.imul(J,Ot)|0,T=T+Math.imul(J,_t)|0,C=C+Math.imul(A,qt)|0,x=(x=x+Math.imul(A,ut)|0)+Math.imul(z,qt)|0,T=T+Math.imul(z,ut)|0;var pn=(K+(C=C+Math.imul(P,ni)|0)|0)+((8191&(x=(x=x+Math.imul(P,pt)|0)+Math.imul(G,ni)|0))<<13)|0;K=((T=T+Math.imul(G,pt)|0)+(x>>>13)|0)+(pn>>>26)|0,pn&=67108863,C=Math.imul(he,Xe),x=(x=Math.imul(he,Ue))+Math.imul(me,Xe)|0,T=Math.imul(me,Ue),C=C+Math.imul(oe,Qt)|0,x=(x=x+Math.imul(oe,ot)|0)+Math.imul(se,Qt)|0,T=T+Math.imul(se,ot)|0,C=C+Math.imul(le,Ot)|0,x=(x=x+Math.imul(le,_t)|0)+Math.imul(ce,Ot)|0,T=T+Math.imul(ce,_t)|0,C=C+Math.imul(ee,qt)|0,x=(x=x+Math.imul(ee,ut)|0)+Math.imul(J,qt)|0,T=T+Math.imul(J,ut)|0,C=C+Math.imul(A,ni)|0,x=(x=x+Math.imul(A,pt)|0)+Math.imul(z,ni)|0,T=T+Math.imul(z,pt)|0;var ne=(K+(C=C+Math.imul(P,si)|0)|0)+((8191&(x=(x=x+Math.imul(P,yt)|0)+Math.imul(G,si)|0))<<13)|0;K=((T=T+Math.imul(G,yt)|0)+(x>>>13)|0)+(ne>>>26)|0,ne&=67108863,C=Math.imul(xe,Xe),x=(x=Math.imul(xe,Ue))+Math.imul(Ie,Xe)|0,T=Math.imul(Ie,Ue),C=C+Math.imul(he,Qt)|0,x=(x=x+Math.imul(he,ot)|0)+Math.imul(me,Qt)|0,T=T+Math.imul(me,ot)|0,C=C+Math.imul(oe,Ot)|0,x=(x=x+Math.imul(oe,_t)|0)+Math.imul(se,Ot)|0,T=T+Math.imul(se,_t)|0,C=C+Math.imul(le,qt)|0,x=(x=x+Math.imul(le,ut)|0)+Math.imul(ce,qt)|0,T=T+Math.imul(ce,ut)|0,C=C+Math.imul(ee,ni)|0,x=(x=x+Math.imul(ee,pt)|0)+Math.imul(J,ni)|0,T=T+Math.imul(J,pt)|0,C=C+Math.imul(A,si)|0,x=(x=x+Math.imul(A,yt)|0)+Math.imul(z,si)|0,T=T+Math.imul(z,yt)|0;var ge=(K+(C=C+Math.imul(P,fe)|0)|0)+((8191&(x=(x=x+Math.imul(P,we)|0)+Math.imul(G,fe)|0))<<13)|0;K=((T=T+Math.imul(G,we)|0)+(x>>>13)|0)+(ge>>>26)|0,ge&=67108863,C=Math.imul(Ne,Xe),x=(x=Math.imul(Ne,Ue))+Math.imul(Be,Xe)|0,T=Math.imul(Be,Ue),C=C+Math.imul(xe,Qt)|0,x=(x=x+Math.imul(xe,ot)|0)+Math.imul(Ie,Qt)|0,T=T+Math.imul(Ie,ot)|0,C=C+Math.imul(he,Ot)|0,x=(x=x+Math.imul(he,_t)|0)+Math.imul(me,Ot)|0,T=T+Math.imul(me,_t)|0,C=C+Math.imul(oe,qt)|0,x=(x=x+Math.imul(oe,ut)|0)+Math.imul(se,qt)|0,T=T+Math.imul(se,ut)|0,C=C+Math.imul(le,ni)|0,x=(x=x+Math.imul(le,pt)|0)+Math.imul(ce,ni)|0,T=T+Math.imul(ce,pt)|0,C=C+Math.imul(ee,si)|0,x=(x=x+Math.imul(ee,yt)|0)+Math.imul(J,si)|0,T=T+Math.imul(J,yt)|0,C=C+Math.imul(A,fe)|0,x=(x=x+Math.imul(A,we)|0)+Math.imul(z,fe)|0,T=T+Math.imul(z,we)|0;var Se=(K+(C=C+Math.imul(P,at)|0)|0)+((8191&(x=(x=x+Math.imul(P,Ve)|0)+Math.imul(G,at)|0))<<13)|0;K=((T=T+Math.imul(G,Ve)|0)+(x>>>13)|0)+(Se>>>26)|0,Se&=67108863,C=Math.imul(Qe,Xe),x=(x=Math.imul(Qe,Ue))+Math.imul(et,Xe)|0,T=Math.imul(et,Ue),C=C+Math.imul(Ne,Qt)|0,x=(x=x+Math.imul(Ne,ot)|0)+Math.imul(Be,Qt)|0,T=T+Math.imul(Be,ot)|0,C=C+Math.imul(xe,Ot)|0,x=(x=x+Math.imul(xe,_t)|0)+Math.imul(Ie,Ot)|0,T=T+Math.imul(Ie,_t)|0,C=C+Math.imul(he,qt)|0,x=(x=x+Math.imul(he,ut)|0)+Math.imul(me,qt)|0,T=T+Math.imul(me,ut)|0,C=C+Math.imul(oe,ni)|0,x=(x=x+Math.imul(oe,pt)|0)+Math.imul(se,ni)|0,T=T+Math.imul(se,pt)|0,C=C+Math.imul(le,si)|0,x=(x=x+Math.imul(le,yt)|0)+Math.imul(ce,si)|0,T=T+Math.imul(ce,yt)|0,C=C+Math.imul(ee,fe)|0,x=(x=x+Math.imul(ee,we)|0)+Math.imul(J,fe)|0,T=T+Math.imul(J,we)|0,C=C+Math.imul(A,at)|0,x=(x=x+Math.imul(A,Ve)|0)+Math.imul(z,at)|0,T=T+Math.imul(z,Ve)|0;var Te=(K+(C=C+Math.imul(P,lt)|0)|0)+((8191&(x=(x=x+Math.imul(P,it)|0)+Math.imul(G,lt)|0))<<13)|0;K=((T=T+Math.imul(G,it)|0)+(x>>>13)|0)+(Te>>>26)|0,Te&=67108863,C=Math.imul($e,Xe),x=(x=Math.imul($e,Ue))+Math.imul(ke,Xe)|0,T=Math.imul(ke,Ue),C=C+Math.imul(Qe,Qt)|0,x=(x=x+Math.imul(Qe,ot)|0)+Math.imul(et,Qt)|0,T=T+Math.imul(et,ot)|0,C=C+Math.imul(Ne,Ot)|0,x=(x=x+Math.imul(Ne,_t)|0)+Math.imul(Be,Ot)|0,T=T+Math.imul(Be,_t)|0,C=C+Math.imul(xe,qt)|0,x=(x=x+Math.imul(xe,ut)|0)+Math.imul(Ie,qt)|0,T=T+Math.imul(Ie,ut)|0,C=C+Math.imul(he,ni)|0,x=(x=x+Math.imul(he,pt)|0)+Math.imul(me,ni)|0,T=T+Math.imul(me,pt)|0,C=C+Math.imul(oe,si)|0,x=(x=x+Math.imul(oe,yt)|0)+Math.imul(se,si)|0,T=T+Math.imul(se,yt)|0,C=C+Math.imul(le,fe)|0,x=(x=x+Math.imul(le,we)|0)+Math.imul(ce,fe)|0,T=T+Math.imul(ce,we)|0,C=C+Math.imul(ee,at)|0,x=(x=x+Math.imul(ee,Ve)|0)+Math.imul(J,at)|0,T=T+Math.imul(J,Ve)|0,C=C+Math.imul(A,lt)|0,x=(x=x+Math.imul(A,it)|0)+Math.imul(z,lt)|0,T=T+Math.imul(z,it)|0;var Ye=(K+(C=C+Math.imul(P,gt)|0)|0)+((8191&(x=(x=x+Math.imul(P,At)|0)+Math.imul(G,gt)|0))<<13)|0;K=((T=T+Math.imul(G,At)|0)+(x>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,C=Math.imul($e,Qt),x=(x=Math.imul($e,ot))+Math.imul(ke,Qt)|0,T=Math.imul(ke,ot),C=C+Math.imul(Qe,Ot)|0,x=(x=x+Math.imul(Qe,_t)|0)+Math.imul(et,Ot)|0,T=T+Math.imul(et,_t)|0,C=C+Math.imul(Ne,qt)|0,x=(x=x+Math.imul(Ne,ut)|0)+Math.imul(Be,qt)|0,T=T+Math.imul(Be,ut)|0,C=C+Math.imul(xe,ni)|0,x=(x=x+Math.imul(xe,pt)|0)+Math.imul(Ie,ni)|0,T=T+Math.imul(Ie,pt)|0,C=C+Math.imul(he,si)|0,x=(x=x+Math.imul(he,yt)|0)+Math.imul(me,si)|0,T=T+Math.imul(me,yt)|0,C=C+Math.imul(oe,fe)|0,x=(x=x+Math.imul(oe,we)|0)+Math.imul(se,fe)|0,T=T+Math.imul(se,we)|0,C=C+Math.imul(le,at)|0,x=(x=x+Math.imul(le,Ve)|0)+Math.imul(ce,at)|0,T=T+Math.imul(ce,Ve)|0,C=C+Math.imul(ee,lt)|0,x=(x=x+Math.imul(ee,it)|0)+Math.imul(J,lt)|0,T=T+Math.imul(J,it)|0;var Oe=(K+(C=C+Math.imul(A,gt)|0)|0)+((8191&(x=(x=x+Math.imul(A,At)|0)+Math.imul(z,gt)|0))<<13)|0;K=((T=T+Math.imul(z,At)|0)+(x>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,C=Math.imul($e,Ot),x=(x=Math.imul($e,_t))+Math.imul(ke,Ot)|0,T=Math.imul(ke,_t),C=C+Math.imul(Qe,qt)|0,x=(x=x+Math.imul(Qe,ut)|0)+Math.imul(et,qt)|0,T=T+Math.imul(et,ut)|0,C=C+Math.imul(Ne,ni)|0,x=(x=x+Math.imul(Ne,pt)|0)+Math.imul(Be,ni)|0,T=T+Math.imul(Be,pt)|0,C=C+Math.imul(xe,si)|0,x=(x=x+Math.imul(xe,yt)|0)+Math.imul(Ie,si)|0,T=T+Math.imul(Ie,yt)|0,C=C+Math.imul(he,fe)|0,x=(x=x+Math.imul(he,we)|0)+Math.imul(me,fe)|0,T=T+Math.imul(me,we)|0,C=C+Math.imul(oe,at)|0,x=(x=x+Math.imul(oe,Ve)|0)+Math.imul(se,at)|0,T=T+Math.imul(se,Ve)|0,C=C+Math.imul(le,lt)|0,x=(x=x+Math.imul(le,it)|0)+Math.imul(ce,lt)|0,T=T+Math.imul(ce,it)|0;var Pe=(K+(C=C+Math.imul(ee,gt)|0)|0)+((8191&(x=(x=x+Math.imul(ee,At)|0)+Math.imul(J,gt)|0))<<13)|0;K=((T=T+Math.imul(J,At)|0)+(x>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,C=Math.imul($e,qt),x=(x=Math.imul($e,ut))+Math.imul(ke,qt)|0,T=Math.imul(ke,ut),C=C+Math.imul(Qe,ni)|0,x=(x=x+Math.imul(Qe,pt)|0)+Math.imul(et,ni)|0,T=T+Math.imul(et,pt)|0,C=C+Math.imul(Ne,si)|0,x=(x=x+Math.imul(Ne,yt)|0)+Math.imul(Be,si)|0,T=T+Math.imul(Be,yt)|0,C=C+Math.imul(xe,fe)|0,x=(x=x+Math.imul(xe,we)|0)+Math.imul(Ie,fe)|0,T=T+Math.imul(Ie,we)|0,C=C+Math.imul(he,at)|0,x=(x=x+Math.imul(he,Ve)|0)+Math.imul(me,at)|0,T=T+Math.imul(me,Ve)|0,C=C+Math.imul(oe,lt)|0,x=(x=x+Math.imul(oe,it)|0)+Math.imul(se,lt)|0,T=T+Math.imul(se,it)|0;var Rt=(K+(C=C+Math.imul(le,gt)|0)|0)+((8191&(x=(x=x+Math.imul(le,At)|0)+Math.imul(ce,gt)|0))<<13)|0;K=((T=T+Math.imul(ce,At)|0)+(x>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,C=Math.imul($e,ni),x=(x=Math.imul($e,pt))+Math.imul(ke,ni)|0,T=Math.imul(ke,pt),C=C+Math.imul(Qe,si)|0,x=(x=x+Math.imul(Qe,yt)|0)+Math.imul(et,si)|0,T=T+Math.imul(et,yt)|0,C=C+Math.imul(Ne,fe)|0,x=(x=x+Math.imul(Ne,we)|0)+Math.imul(Be,fe)|0,T=T+Math.imul(Be,we)|0,C=C+Math.imul(xe,at)|0,x=(x=x+Math.imul(xe,Ve)|0)+Math.imul(Ie,at)|0,T=T+Math.imul(Ie,Ve)|0,C=C+Math.imul(he,lt)|0,x=(x=x+Math.imul(he,it)|0)+Math.imul(me,lt)|0,T=T+Math.imul(me,it)|0;var It=(K+(C=C+Math.imul(oe,gt)|0)|0)+((8191&(x=(x=x+Math.imul(oe,At)|0)+Math.imul(se,gt)|0))<<13)|0;K=((T=T+Math.imul(se,At)|0)+(x>>>13)|0)+(It>>>26)|0,It&=67108863,C=Math.imul($e,si),x=(x=Math.imul($e,yt))+Math.imul(ke,si)|0,T=Math.imul(ke,yt),C=C+Math.imul(Qe,fe)|0,x=(x=x+Math.imul(Qe,we)|0)+Math.imul(et,fe)|0,T=T+Math.imul(et,we)|0,C=C+Math.imul(Ne,at)|0,x=(x=x+Math.imul(Ne,Ve)|0)+Math.imul(Be,at)|0,T=T+Math.imul(Be,Ve)|0,C=C+Math.imul(xe,lt)|0,x=(x=x+Math.imul(xe,it)|0)+Math.imul(Ie,lt)|0,T=T+Math.imul(Ie,it)|0;var Et=(K+(C=C+Math.imul(he,gt)|0)|0)+((8191&(x=(x=x+Math.imul(he,At)|0)+Math.imul(me,gt)|0))<<13)|0;K=((T=T+Math.imul(me,At)|0)+(x>>>13)|0)+(Et>>>26)|0,Et&=67108863,C=Math.imul($e,fe),x=(x=Math.imul($e,we))+Math.imul(ke,fe)|0,T=Math.imul(ke,we),C=C+Math.imul(Qe,at)|0,x=(x=x+Math.imul(Qe,Ve)|0)+Math.imul(et,at)|0,T=T+Math.imul(et,Ve)|0,C=C+Math.imul(Ne,lt)|0,x=(x=x+Math.imul(Ne,it)|0)+Math.imul(Be,lt)|0,T=T+Math.imul(Be,it)|0;var dt=(K+(C=C+Math.imul(xe,gt)|0)|0)+((8191&(x=(x=x+Math.imul(xe,At)|0)+Math.imul(Ie,gt)|0))<<13)|0;K=((T=T+Math.imul(Ie,At)|0)+(x>>>13)|0)+(dt>>>26)|0,dt&=67108863,C=Math.imul($e,at),x=(x=Math.imul($e,Ve))+Math.imul(ke,at)|0,T=Math.imul(ke,Ve),C=C+Math.imul(Qe,lt)|0,x=(x=x+Math.imul(Qe,it)|0)+Math.imul(et,lt)|0,T=T+Math.imul(et,it)|0;var ti=(K+(C=C+Math.imul(Ne,gt)|0)|0)+((8191&(x=(x=x+Math.imul(Ne,At)|0)+Math.imul(Be,gt)|0))<<13)|0;K=((T=T+Math.imul(Be,At)|0)+(x>>>13)|0)+(ti>>>26)|0,ti&=67108863,C=Math.imul($e,lt),x=(x=Math.imul($e,it))+Math.imul(ke,lt)|0,T=Math.imul(ke,it);var mi=(K+(C=C+Math.imul(Qe,gt)|0)|0)+((8191&(x=(x=x+Math.imul(Qe,At)|0)+Math.imul(et,gt)|0))<<13)|0;K=((T=T+Math.imul(et,At)|0)+(x>>>13)|0)+(mi>>>26)|0,mi&=67108863;var jt=(K+(C=Math.imul($e,gt))|0)+((8191&(x=(x=Math.imul($e,At))+Math.imul(ke,gt)|0))<<13)|0;return K=((T=Math.imul(ke,At))+(x>>>13)|0)+(jt>>>26)|0,jt&=67108863,W[0]=Ci,W[1]=ui,W[2]=Oi,W[3]=Ri,W[4]=pn,W[5]=ne,W[6]=ge,W[7]=Se,W[8]=Te,W[9]=Ye,W[10]=Oe,W[11]=Pe,W[12]=Rt,W[13]=It,W[14]=Et,W[15]=dt,W[16]=ti,W[17]=mi,W[18]=jt,K!==0&&(W[19]=K,y.length++),y};function D(S,v,y){y.negative=v.negative^S.negative,y.length=S.length+v.length;for(var C=0,x=0,T=0;T<y.length-1;T++){var M=x;x=0;for(var V=67108863&C,W=Math.min(T,v.length-1),K=Math.max(0,T-S.length+1);K<=W;K++){var Z=T-K,P=(0|S.words[Z])*(0|v.words[K]),G=67108863&P;V=67108863&(G=G+V|0),x+=(M=(M=M+(P/67108864|0)|0)+(G>>>26)|0)>>>26,M&=67108863}y.words[T]=V,C=M,M=x}return C!==0?y.words[T]=C:y.length--,y._strip()}function B(S,v,y){return D(S,v,y)}Math.imul||(E=w),d.prototype.mulTo=function(S,v){var y=this.length+S.length;return this.length===10&&S.length===10?E(this,S,v):y<63?w(this,S,v):y<1024?D(this,S,v):B(this,S,v)},d.prototype.mul=function(S){var v=new d(null);return v.words=new Array(this.length+S.length),this.mulTo(S,v)},d.prototype.mulf=function(S){var v=new d(null);return v.words=new Array(this.length+S.length),B(this,S,v)},d.prototype.imul=function(S){return this.clone().mulTo(S,this)},d.prototype.imuln=function(S){var v=S<0;v&&(S=-S),a(typeof S=="number"),a(S<67108864);for(var y=0,C=0;C<this.length;C++){var x=(0|this.words[C])*S,T=(67108863&x)+(67108863&y);y>>=26,y+=x/67108864|0,y+=T>>>26,this.words[C]=67108863&T}return y!==0&&(this.words[C]=y,this.length++),v?this.ineg():this},d.prototype.muln=function(S){return this.clone().imuln(S)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(S){var v=function(T){for(var M=new Array(T.bitLength()),V=0;V<M.length;V++){var W=V/26|0,K=V%26;M[V]=T.words[W]>>>K&1}return M}(S);if(v.length===0)return new d(1);for(var y=this,C=0;C<v.length&&v[C]===0;C++,y=y.sqr());if(++C<v.length)for(var x=y.sqr();C<v.length;C++,x=x.sqr())v[C]!==0&&(y=y.mul(x));return y},d.prototype.iushln=function(S){a(typeof S=="number"&&S>=0);var v,y=S%26,C=(S-y)/26,x=67108863>>>26-y<<26-y;if(y!==0){var T=0;for(v=0;v<this.length;v++){var M=this.words[v]&x,V=(0|this.words[v])-M<<y;this.words[v]=V|T,T=M>>>26-y}T&&(this.words[v]=T,this.length++)}if(C!==0){for(v=this.length-1;v>=0;v--)this.words[v+C]=this.words[v];for(v=0;v<C;v++)this.words[v]=0;this.length+=C}return this._strip()},d.prototype.ishln=function(S){return a(this.negative===0),this.iushln(S)},d.prototype.iushrn=function(S,v,y){var C;a(typeof S=="number"&&S>=0),C=v?(v-v%26)/26:0;var x=S%26,T=Math.min((S-x)/26,this.length),M=67108863^67108863>>>x<<x,V=y;if(C-=T,C=Math.max(0,C),V){for(var W=0;W<T;W++)V.words[W]=this.words[W];V.length=T}if(T!==0)if(this.length>T)for(this.length-=T,W=0;W<this.length;W++)this.words[W]=this.words[W+T];else this.words[0]=0,this.length=1;var K=0;for(W=this.length-1;W>=0&&(K!==0||W>=C);W--){var Z=0|this.words[W];this.words[W]=K<<26-x|Z>>>x,K=Z&M}return V&&K!==0&&(V.words[V.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},d.prototype.ishrn=function(S,v,y){return a(this.negative===0),this.iushrn(S,v,y)},d.prototype.shln=function(S){return this.clone().ishln(S)},d.prototype.ushln=function(S){return this.clone().iushln(S)},d.prototype.shrn=function(S){return this.clone().ishrn(S)},d.prototype.ushrn=function(S){return this.clone().iushrn(S)},d.prototype.testn=function(S){a(typeof S=="number"&&S>=0);var v=S%26,y=(S-v)/26,C=1<<v;return!(this.length<=y)&&!!(this.words[y]&C)},d.prototype.imaskn=function(S){a(typeof S=="number"&&S>=0);var v=S%26,y=(S-v)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(v!==0&&y++,this.length=Math.min(y,this.length),v!==0){var C=67108863^67108863>>>v<<v;this.words[this.length-1]&=C}return this._strip()},d.prototype.maskn=function(S){return this.clone().imaskn(S)},d.prototype.iaddn=function(S){return a(typeof S=="number"),a(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(0|this.words[0])<=S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},d.prototype._iaddn=function(S){this.words[0]+=S;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},d.prototype.isubn=function(S){if(a(typeof S=="number"),a(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},d.prototype.addn=function(S){return this.clone().iaddn(S)},d.prototype.subn=function(S){return this.clone().isubn(S)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(S,v,y){var C,x,T=S.length+y;this._expand(T);var M=0;for(C=0;C<S.length;C++){x=(0|this.words[C+y])+M;var V=(0|S.words[C])*v;M=((x-=67108863&V)>>26)-(V/67108864|0),this.words[C+y]=67108863&x}for(;C<this.length-y;C++)M=(x=(0|this.words[C+y])+M)>>26,this.words[C+y]=67108863&x;if(M===0)return this._strip();for(a(M===-1),M=0,C=0;C<this.length;C++)M=(x=-(0|this.words[C])+M)>>26,this.words[C]=67108863&x;return this.negative=1,this._strip()},d.prototype._wordDiv=function(S,v){var y=(this.length,S.length),C=this.clone(),x=S,T=0|x.words[x.length-1];(y=26-this._countBits(T))!==0&&(x=x.ushln(y),C.iushln(y),T=0|x.words[x.length-1]);var M,V=C.length-x.length;if(v!=="mod"){(M=new d(null)).length=V+1,M.words=new Array(M.length);for(var W=0;W<M.length;W++)M.words[W]=0}var K=C.clone()._ishlnsubmul(x,1,V);K.negative===0&&(C=K,M&&(M.words[V]=1));for(var Z=V-1;Z>=0;Z--){var P=67108864*(0|C.words[x.length+Z])+(0|C.words[x.length+Z-1]);for(P=Math.min(P/T|0,67108863),C._ishlnsubmul(x,P,Z);C.negative!==0;)P--,C.negative=0,C._ishlnsubmul(x,1,Z),C.isZero()||(C.negative^=1);M&&(M.words[Z]=P)}return M&&M._strip(),C._strip(),v!=="div"&&y!==0&&C.iushrn(y),{div:M||null,mod:C}},d.prototype.divmod=function(S,v,y){return a(!S.isZero()),this.isZero()?{div:new d(0),mod:new d(0)}:this.negative!==0&&S.negative===0?(T=this.neg().divmod(S,v),v!=="mod"&&(C=T.div.neg()),v!=="div"&&(x=T.mod.neg(),y&&x.negative!==0&&x.iadd(S)),{div:C,mod:x}):this.negative===0&&S.negative!==0?(T=this.divmod(S.neg(),v),v!=="mod"&&(C=T.div.neg()),{div:C,mod:T.mod}):this.negative&S.negative?(T=this.neg().divmod(S.neg(),v),v!=="div"&&(x=T.mod.neg(),y&&x.negative!==0&&x.isub(S)),{div:T.div,mod:x}):S.length>this.length||this.cmp(S)<0?{div:new d(0),mod:this}:S.length===1?v==="div"?{div:this.divn(S.words[0]),mod:null}:v==="mod"?{div:null,mod:new d(this.modrn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new d(this.modrn(S.words[0]))}:this._wordDiv(S,v);var C,x,T},d.prototype.div=function(S){return this.divmod(S,"div",!1).div},d.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},d.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},d.prototype.divRound=function(S){var v=this.divmod(S);if(v.mod.isZero())return v.div;var y=v.div.negative!==0?v.mod.isub(S):v.mod,C=S.ushrn(1),x=S.andln(1),T=y.cmp(C);return T<0||x===1&&T===0?v.div:v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},d.prototype.modrn=function(S){var v=S<0;v&&(S=-S),a(S<=67108863);for(var y=(1<<26)%S,C=0,x=this.length-1;x>=0;x--)C=(y*C+(0|this.words[x]))%S;return v?-C:C},d.prototype.modn=function(S){return this.modrn(S)},d.prototype.idivn=function(S){var v=S<0;v&&(S=-S),a(S<=67108863);for(var y=0,C=this.length-1;C>=0;C--){var x=(0|this.words[C])+67108864*y;this.words[C]=x/S|0,y=x%S}return this._strip(),v?this.ineg():this},d.prototype.divn=function(S){return this.clone().idivn(S)},d.prototype.egcd=function(S){a(S.negative===0),a(!S.isZero());var v=this,y=S.clone();v=v.negative!==0?v.umod(S):v.clone();for(var C=new d(1),x=new d(0),T=new d(0),M=new d(1),V=0;v.isEven()&&y.isEven();)v.iushrn(1),y.iushrn(1),++V;for(var W=y.clone(),K=v.clone();!v.isZero();){for(var Z=0,P=1;!(v.words[0]&P)&&Z<26;++Z,P<<=1);if(Z>0)for(v.iushrn(Z);Z-- >0;)(C.isOdd()||x.isOdd())&&(C.iadd(W),x.isub(K)),C.iushrn(1),x.iushrn(1);for(var G=0,O=1;!(y.words[0]&O)&&G<26;++G,O<<=1);if(G>0)for(y.iushrn(G);G-- >0;)(T.isOdd()||M.isOdd())&&(T.iadd(W),M.isub(K)),T.iushrn(1),M.iushrn(1);v.cmp(y)>=0?(v.isub(y),C.isub(T),x.isub(M)):(y.isub(v),T.isub(C),M.isub(x))}return{a:T,b:M,gcd:y.iushln(V)}},d.prototype._invmp=function(S){a(S.negative===0),a(!S.isZero());var v=this,y=S.clone();v=v.negative!==0?v.umod(S):v.clone();for(var C,x=new d(1),T=new d(0),M=y.clone();v.cmpn(1)>0&&y.cmpn(1)>0;){for(var V=0,W=1;!(v.words[0]&W)&&V<26;++V,W<<=1);if(V>0)for(v.iushrn(V);V-- >0;)x.isOdd()&&x.iadd(M),x.iushrn(1);for(var K=0,Z=1;!(y.words[0]&Z)&&K<26;++K,Z<<=1);if(K>0)for(y.iushrn(K);K-- >0;)T.isOdd()&&T.iadd(M),T.iushrn(1);v.cmp(y)>=0?(v.isub(y),x.isub(T)):(y.isub(v),T.isub(x))}return(C=v.cmpn(1)===0?x:T).cmpn(0)<0&&C.iadd(S),C},d.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var v=this.clone(),y=S.clone();v.negative=0,y.negative=0;for(var C=0;v.isEven()&&y.isEven();C++)v.iushrn(1),y.iushrn(1);for(;;){for(;v.isEven();)v.iushrn(1);for(;y.isEven();)y.iushrn(1);var x=v.cmp(y);if(x<0){var T=v;v=y,y=T}else if(x===0||y.cmpn(1)===0)break;v.isub(y)}return y.iushln(C)},d.prototype.invm=function(S){return this.egcd(S).a.umod(S)},d.prototype.isEven=function(){return(1&this.words[0])==0},d.prototype.isOdd=function(){return(1&this.words[0])==1},d.prototype.andln=function(S){return this.words[0]&S},d.prototype.bincn=function(S){a(typeof S=="number");var v=S%26,y=(S-v)/26,C=1<<v;if(this.length<=y)return this._expand(y+1),this.words[y]|=C,this;for(var x=C,T=y;x!==0&&T<this.length;T++){var M=0|this.words[T];x=(M+=x)>>>26,M&=67108863,this.words[T]=M}return x!==0&&(this.words[T]=x,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(S){var v,y=S<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;if(this._strip(),this.length>1)v=1;else{y&&(S=-S),a(S<=67108863,"Number is too big");var C=0|this.words[0];v=C===S?0:C<S?-1:1}return this.negative!==0?0|-v:v},d.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var v=this.ucmp(S);return this.negative!==0?0|-v:v},d.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var v=0,y=this.length-1;y>=0;y--){var C=0|this.words[y],x=0|S.words[y];if(C!==x){C<x?v=-1:C>x&&(v=1);break}}return v},d.prototype.gtn=function(S){return this.cmpn(S)===1},d.prototype.gt=function(S){return this.cmp(S)===1},d.prototype.gten=function(S){return this.cmpn(S)>=0},d.prototype.gte=function(S){return this.cmp(S)>=0},d.prototype.ltn=function(S){return this.cmpn(S)===-1},d.prototype.lt=function(S){return this.cmp(S)===-1},d.prototype.lten=function(S){return this.cmpn(S)<=0},d.prototype.lte=function(S){return this.cmp(S)<=0},d.prototype.eqn=function(S){return this.cmpn(S)===0},d.prototype.eq=function(S){return this.cmp(S)===0},d.red=function(S){return new I(S)},d.prototype.toRed=function(S){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},d.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(S){return this.red=S,this},d.prototype.forceRed=function(S){return a(!this.red,"Already a number in reduction context"),this._forceRed(S)},d.prototype.redAdd=function(S){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},d.prototype.redIAdd=function(S){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},d.prototype.redSub=function(S){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},d.prototype.redISub=function(S){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},d.prototype.redShl=function(S){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},d.prototype.redMul=function(S){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},d.prototype.redIMul=function(S){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},d.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(S){return a(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var $={k256:null,p224:null,p192:null,p25519:null};function F(S,v){this.name=S,this.p=new d(v,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function N(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function j(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function H(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(S){if(typeof S=="string"){var v=d._prime(S);this.m=v.p,this.prime=v}else a(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function k(S){I.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}F.prototype._tmp=function(){var S=new d(null);return S.words=new Array(Math.ceil(this.n/13)),S},F.prototype.ireduce=function(S){var v,y=S;do this.split(y,this.tmp),v=(y=(y=this.imulK(y)).iadd(this.tmp)).bitLength();while(v>this.n);var C=v<this.n?-1:y.ucmp(this.p);return C===0?(y.words[0]=0,y.length=1):C>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},F.prototype.split=function(S,v){S.iushrn(this.n,0,v)},F.prototype.imulK=function(S){return S.imul(this.k)},l(N,F),N.prototype.split=function(S,v){for(var y=Math.min(S.length,9),C=0;C<y;C++)v.words[C]=S.words[C];if(v.length=y,S.length<=9)return S.words[0]=0,void(S.length=1);var x=S.words[9];for(v.words[v.length++]=4194303&x,C=10;C<S.length;C++){var T=0|S.words[C];S.words[C-10]=(4194303&T)<<4|x>>>22,x=T}x>>>=22,S.words[C-10]=x,x===0&&S.length>10?S.length-=10:S.length-=9},N.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var v=0,y=0;y<S.length;y++){var C=0|S.words[y];v+=977*C,S.words[y]=67108863&v,v=64*C+(v/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S},l(L,F),l(j,F),l(H,F),H.prototype.imulK=function(S){for(var v=0,y=0;y<S.length;y++){var C=19*(0|S.words[y])+v,x=67108863&C;C>>>=26,S.words[y]=x,v=C}return v!==0&&(S.words[S.length++]=v),S},d._prime=function(S){if($[S])return $[S];var v;if(S==="k256")v=new N;else if(S==="p224")v=new L;else if(S==="p192")v=new j;else{if(S!=="p25519")throw new Error("Unknown prime "+S);v=new H}return $[S]=v,v},I.prototype._verify1=function(S){a(S.negative===0,"red works only with positives"),a(S.red,"red works only with red numbers")},I.prototype._verify2=function(S,v){a((S.negative|v.negative)==0,"red works only with positives"),a(S.red&&S.red===v.red,"red works only with red numbers")},I.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):(f(S,S.umod(this.m)._forceRed(this)),S)},I.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},I.prototype.add=function(S,v){this._verify2(S,v);var y=S.add(v);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},I.prototype.iadd=function(S,v){this._verify2(S,v);var y=S.iadd(v);return y.cmp(this.m)>=0&&y.isub(this.m),y},I.prototype.sub=function(S,v){this._verify2(S,v);var y=S.sub(v);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},I.prototype.isub=function(S,v){this._verify2(S,v);var y=S.isub(v);return y.cmpn(0)<0&&y.iadd(this.m),y},I.prototype.shl=function(S,v){return this._verify1(S),this.imod(S.ushln(v))},I.prototype.imul=function(S,v){return this._verify2(S,v),this.imod(S.imul(v))},I.prototype.mul=function(S,v){return this._verify2(S,v),this.imod(S.mul(v))},I.prototype.isqr=function(S){return this.imul(S,S.clone())},I.prototype.sqr=function(S){return this.mul(S,S)},I.prototype.sqrt=function(S){if(S.isZero())return S.clone();var v=this.m.andln(3);if(a(v%2==1),v===3){var y=this.m.add(new d(1)).iushrn(2);return this.pow(S,y)}for(var C=this.m.subn(1),x=0;!C.isZero()&&C.andln(1)===0;)x++,C.iushrn(1);a(!C.isZero());var T=new d(1).toRed(this),M=T.redNeg(),V=this.m.subn(1).iushrn(1),W=this.m.bitLength();for(W=new d(2*W*W).toRed(this);this.pow(W,V).cmp(M)!==0;)W.redIAdd(M);for(var K=this.pow(W,C),Z=this.pow(S,C.addn(1).iushrn(1)),P=this.pow(S,C),G=x;P.cmp(T)!==0;){for(var O=P,A=0;O.cmp(T)!==0;A++)O=O.redSqr();a(A<G);var z=this.pow(K,new d(1).iushln(G-A-1));Z=Z.redMul(z),K=z.redSqr(),P=P.redMul(K),G=A}return Z},I.prototype.invm=function(S){var v=S._invmp(this.m);return v.negative!==0?(v.negative=0,this.imod(v).redNeg()):this.imod(v)},I.prototype.pow=function(S,v){if(v.isZero())return new d(1).toRed(this);if(v.cmpn(1)===0)return S.clone();var y=new Array(16);y[0]=new d(1).toRed(this),y[1]=S;for(var C=2;C<y.length;C++)y[C]=this.mul(y[C-1],S);var x=y[0],T=0,M=0,V=v.bitLength()%26;for(V===0&&(V=26),C=v.length-1;C>=0;C--){for(var W=v.words[C],K=V-1;K>=0;K--){var Z=W>>K&1;x!==y[0]&&(x=this.sqr(x)),Z!==0||T!==0?(T<<=1,T|=Z,(++M===4||C===0&&K===0)&&(x=this.mul(x,y[T]),M=0,T=0)):M=0}V=26}return x},I.prototype.convertTo=function(S){var v=S.umod(this.m);return v===S?v.clone():v},I.prototype.convertFrom=function(S){var v=S.clone();return v.red=null,v},d.mont=function(S){return new k(S)},l(k,I),k.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},k.prototype.convertFrom=function(S){var v=this.imod(S.mul(this.rinv));return v.red=null,v},k.prototype.imul=function(S,v){if(S.isZero()||v.isZero())return S.words[0]=0,S.length=1,S;var y=S.imul(v),C=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=y.isub(C).iushrn(this.shift),T=x;return x.cmp(this.m)>=0?T=x.isub(this.m):x.cmpn(0)<0&&(T=x.iadd(this.m)),T._forceRed(this)},k.prototype.mul=function(S,v){if(S.isZero()||v.isZero())return new d(0)._forceRed(this);var y=S.mul(v),C=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=y.isub(C).iushrn(this.shift),T=x;return x.cmp(this.m)>=0?T=x.isub(this.m):x.cmpn(0)<0&&(T=x.iadd(this.m)),T._forceRed(this)},k.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],187:[function(t,n,s){var o;function r(l){this.rand=l}if(n.exports=function(l){return o||(o=new r(null)),o.generate(l)},n.exports.Rand=r,r.prototype.generate=function(l){return this._rand(l)},r.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var d=new Uint8Array(l),c=0;c<d.length;c++)d[c]=this.rand.getByte();return d},typeof self=="object")self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(l){var d=new Uint8Array(l);return self.crypto.getRandomValues(d),d}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(l){var d=new Uint8Array(l);return self.msCrypto.getRandomValues(d),d}:typeof window=="object"&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=t("crypto");if(typeof a.randomBytes!="function")throw new Error("Not supported");r.prototype._rand=function(l){return a.randomBytes(l)}}catch{}},{crypto:188}],188:[function(t,n,s){},{}],189:[function(t,n,s){var o=t("safe-buffer").Buffer;function r(u){o.isBuffer(u)||(u=o.from(u));for(var p=u.length/4|0,f=new Array(p),g=0;g<p;g++)f[g]=u.readUInt32BE(4*g);return f}function a(u){for(;0<u.length;u++)u[0]=0}function l(u,p,f,g,m){for(var b,_,w,E,D=f[0],B=f[1],$=f[2],F=f[3],N=u[0]^p[0],L=u[1]^p[1],j=u[2]^p[2],H=u[3]^p[3],I=4,k=1;k<m;k++)b=D[N>>>24]^B[L>>>16&255]^$[j>>>8&255]^F[255&H]^p[I++],_=D[L>>>24]^B[j>>>16&255]^$[H>>>8&255]^F[255&N]^p[I++],w=D[j>>>24]^B[H>>>16&255]^$[N>>>8&255]^F[255&L]^p[I++],E=D[H>>>24]^B[N>>>16&255]^$[L>>>8&255]^F[255&j]^p[I++],N=b,L=_,j=w,H=E;return b=(g[N>>>24]<<24|g[L>>>16&255]<<16|g[j>>>8&255]<<8|g[255&H])^p[I++],_=(g[L>>>24]<<24|g[j>>>16&255]<<16|g[H>>>8&255]<<8|g[255&N])^p[I++],w=(g[j>>>24]<<24|g[H>>>16&255]<<16|g[N>>>8&255]<<8|g[255&L])^p[I++],E=(g[H>>>24]<<24|g[N>>>16&255]<<16|g[L>>>8&255]<<8|g[255&j])^p[I++],[b>>>=0,_>>>=0,w>>>=0,E>>>=0]}var d=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var u=new Array(256),p=0;p<256;p++)u[p]=p<128?p<<1:p<<1^283;for(var f=[],g=[],m=[[],[],[],[]],b=[[],[],[],[]],_=0,w=0,E=0;E<256;++E){var D=w^w<<1^w<<2^w<<3^w<<4;D=D>>>8^255&D^99,f[_]=D,g[D]=_;var B=u[_],$=u[B],F=u[$],N=257*u[D]^16843008*D;m[0][_]=N<<24|N>>>8,m[1][_]=N<<16|N>>>16,m[2][_]=N<<8|N>>>24,m[3][_]=N,N=16843009*F^65537*$^257*B^16843008*_,b[0][D]=N<<24|N>>>8,b[1][D]=N<<16|N>>>16,b[2][D]=N<<8|N>>>24,b[3][D]=N,_===0?_=w=1:(_=B^u[u[u[F^B]]],w^=u[u[w]])}return{SBOX:f,INV_SBOX:g,SUB_MIX:m,INV_SUB_MIX:b}}();function h(u){this._key=r(u),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var u=this._key,p=u.length,f=p+6,g=4*(f+1),m=[],b=0;b<p;b++)m[b]=u[b];for(b=p;b<g;b++){var _=m[b-1];b%p==0?(_=_<<8|_>>>24,_=c.SBOX[_>>>24]<<24|c.SBOX[_>>>16&255]<<16|c.SBOX[_>>>8&255]<<8|c.SBOX[255&_],_^=d[b/p|0]<<24):p>6&&b%p==4&&(_=c.SBOX[_>>>24]<<24|c.SBOX[_>>>16&255]<<16|c.SBOX[_>>>8&255]<<8|c.SBOX[255&_]),m[b]=m[b-p]^_}for(var w=[],E=0;E<g;E++){var D=g-E,B=m[D-(E%4?0:4)];w[E]=E<4||D<=4?B:c.INV_SUB_MIX[0][c.SBOX[B>>>24]]^c.INV_SUB_MIX[1][c.SBOX[B>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[B>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&B]]}this._nRounds=f,this._keySchedule=m,this._invKeySchedule=w},h.prototype.encryptBlockRaw=function(u){return l(u=r(u),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},h.prototype.encryptBlock=function(u){var p=this.encryptBlockRaw(u),f=o.allocUnsafe(16);return f.writeUInt32BE(p[0],0),f.writeUInt32BE(p[1],4),f.writeUInt32BE(p[2],8),f.writeUInt32BE(p[3],12),f},h.prototype.decryptBlock=function(u){var p=(u=r(u))[1];u[1]=u[3],u[3]=p;var f=l(u,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),g=o.allocUnsafe(16);return g.writeUInt32BE(f[0],0),g.writeUInt32BE(f[3],4),g.writeUInt32BE(f[2],8),g.writeUInt32BE(f[1],12),g},h.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},n.exports.AES=h},{"safe-buffer":494}],190:[function(t,n,s){var o=t("./aes"),r=t("safe-buffer").Buffer,a=t("cipher-base"),l=t("inherits"),d=t("./ghash"),c=t("buffer-xor"),h=t("./incr32");function u(p,f,g,m){a.call(this);var b=r.alloc(4,0);this._cipher=new o.AES(f);var _=this._cipher.encryptBlock(b);this._ghash=new d(_),g=function(w,E,D){if(E.length===12)return w._finID=r.concat([E,r.from([0,0,0,1])]),r.concat([E,r.from([0,0,0,2])]);var B=new d(D),$=E.length,F=$%16;B.update(E),F&&(F=16-F,B.update(r.alloc(F,0))),B.update(r.alloc(8,0));var N=8*$,L=r.alloc(8);L.writeUIntBE(N,0,8),B.update(L),w._finID=B.state;var j=r.from(w._finID);return h(j),j}(this,g,_),this._prev=r.from(g),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=m,this._alen=0,this._len=0,this._mode=p,this._authTag=null,this._called=!1}l(u,a),u.prototype._update=function(p){if(!this._called&&this._alen){var f=16-this._alen%16;f<16&&(f=r.alloc(f,0),this._ghash.update(f))}this._called=!0;var g=this._mode.encrypt(this,p);return this._decrypt?this._ghash.update(p):this._ghash.update(g),this._len+=p.length,g},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var p=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(f,g){var m=0;f.length!==g.length&&m++;for(var b=Math.min(f.length,g.length),_=0;_<b;++_)m+=f[_]^g[_];return m}(p,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=p,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(p){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=p},u.prototype.setAAD=function(p){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(p),this._alen+=p.length},n.exports=u},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,n,s){var o=t("./encrypter"),r=t("./decrypter"),a=t("./modes/list.json");s.createCipher=s.Cipher=o.createCipher,s.createCipheriv=s.Cipheriv=o.createCipheriv,s.createDecipher=s.Decipher=r.createDecipher,s.createDecipheriv=s.Decipheriv=r.createDecipheriv,s.listCiphers=s.getCiphers=function(){return Object.keys(a)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,n,s){var o=t("./authCipher"),r=t("safe-buffer").Buffer,a=t("./modes"),l=t("./streamCipher"),d=t("cipher-base"),c=t("./aes"),h=t("evp_bytestokey");function u(g,m,b){d.call(this),this._cache=new p,this._last=void 0,this._cipher=new c.AES(m),this._prev=r.from(b),this._mode=g,this._autopadding=!0}function p(){this.cache=r.allocUnsafe(0)}function f(g,m,b){var _=a[g.toLowerCase()];if(!_)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=r.from(b)),_.mode!=="GCM"&&b.length!==_.iv)throw new TypeError("invalid iv length "+b.length);if(typeof m=="string"&&(m=r.from(m)),m.length!==_.key/8)throw new TypeError("invalid key length "+m.length);return _.type==="stream"?new l(_.module,m,b,!0):_.type==="auth"?new o(_.module,m,b,!0):new u(_.module,m,b)}t("inherits")(u,d),u.prototype._update=function(g){var m,b;this._cache.add(g);for(var _=[];m=this._cache.get(this._autopadding);)b=this._mode.decrypt(this,m),_.push(b);return r.concat(_)},u.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return function(m){var b=m[15];if(b<1||b>16)throw new Error("unable to decrypt data");for(var _=-1;++_<b;)if(m[_+(16-b)]!==b)throw new Error("unable to decrypt data");if(b!==16)return m.slice(0,16-b)}(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},p.prototype.add=function(g){this.cache=r.concat([this.cache,g])},p.prototype.get=function(g){var m;if(g){if(this.cache.length>16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m}else if(this.cache.length>=16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m;return null},p.prototype.flush=function(){if(this.cache.length)return this.cache},s.createDecipher=function(g,m){var b=a[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var _=h(m,!1,b.key,b.iv);return f(g,_.key,_.iv)},s.createDecipheriv=f},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,n,s){var o=t("./modes"),r=t("./authCipher"),a=t("safe-buffer").Buffer,l=t("./streamCipher"),d=t("cipher-base"),c=t("./aes"),h=t("evp_bytestokey");function u(m,b,_){d.call(this),this._cache=new f,this._cipher=new c.AES(b),this._prev=a.from(_),this._mode=m,this._autopadding=!0}t("inherits")(u,d),u.prototype._update=function(m){var b,_;this._cache.add(m);for(var w=[];b=this._cache.get();)_=this._mode.encrypt(this,b),w.push(_);return a.concat(w)};var p=a.alloc(16,16);function f(){this.cache=a.allocUnsafe(0)}function g(m,b,_){var w=o[m.toLowerCase()];if(!w)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=a.from(b)),b.length!==w.key/8)throw new TypeError("invalid key length "+b.length);if(typeof _=="string"&&(_=a.from(_)),w.mode!=="GCM"&&_.length!==w.iv)throw new TypeError("invalid iv length "+_.length);return w.type==="stream"?new l(w.module,b,_):w.type==="auth"?new r(w.module,b,_):new u(w.module,b,_)}u.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return m=this._mode.encrypt(this,m),this._cipher.scrub(),m;if(!m.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},f.prototype.add=function(m){this.cache=a.concat([this.cache,m])},f.prototype.get=function(){if(this.cache.length>15){var m=this.cache.slice(0,16);return this.cache=this.cache.slice(16),m}return null},f.prototype.flush=function(){for(var m=16-this.cache.length,b=a.allocUnsafe(m),_=-1;++_<m;)b.writeUInt8(m,_);return a.concat([this.cache,b])},s.createCipheriv=g,s.createCipher=function(m,b){var _=o[m.toLowerCase()];if(!_)throw new TypeError("invalid suite type");var w=h(b,!1,_.key,_.iv);return g(m,w.key,w.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,n,s){var o=t("safe-buffer").Buffer,r=o.alloc(16,0);function a(d){var c=o.allocUnsafe(16);return c.writeUInt32BE(d[0]>>>0,0),c.writeUInt32BE(d[1]>>>0,4),c.writeUInt32BE(d[2]>>>0,8),c.writeUInt32BE(d[3]>>>0,12),c}function l(d){this.h=d,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}l.prototype.ghash=function(d){for(var c=-1;++c<d.length;)this.state[c]^=d[c];this._multiply()},l.prototype._multiply=function(){for(var d,c,h,u=[(d=this.h).readUInt32BE(0),d.readUInt32BE(4),d.readUInt32BE(8),d.readUInt32BE(12)],p=[0,0,0,0],f=-1;++f<128;){for(this.state[~~(f/8)]&1<<7-f%8&&(p[0]^=u[0],p[1]^=u[1],p[2]^=u[2],p[3]^=u[3]),h=(1&u[3])!=0,c=3;c>0;c--)u[c]=u[c]>>>1|(1&u[c-1])<<31;u[0]=u[0]>>>1,h&&(u[0]=u[0]^225<<24)}this.state=a(p)},l.prototype.update=function(d){var c;for(this.cache=o.concat([this.cache,d]);this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},l.prototype.final=function(d,c){return this.cache.length&&this.ghash(o.concat([this.cache,r],16)),this.ghash(a([0,d,0,c])),this.state},n.exports=l},{"safe-buffer":494}],195:[function(t,n,s){n.exports=function(o){for(var r,a=o.length;a--;){if((r=o.readUInt8(a))!==255){r++,o.writeUInt8(r,a);break}o.writeUInt8(0,a)}}},{}],196:[function(t,n,s){var o=t("buffer-xor");s.encrypt=function(r,a){var l=o(a,r._prev);return r._prev=r._cipher.encryptBlock(l),r._prev},s.decrypt=function(r,a){var l=r._prev;r._prev=a;var d=r._cipher.decryptBlock(a);return o(d,l)}},{"buffer-xor":219}],197:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("buffer-xor");function a(l,d,c){var h=d.length,u=r(d,l._cache);return l._cache=l._cache.slice(h),l._prev=o.concat([l._prev,c?d:u]),u}s.encrypt=function(l,d,c){for(var h,u=o.allocUnsafe(0);d.length;){if(l._cache.length===0&&(l._cache=l._cipher.encryptBlock(l._prev),l._prev=o.allocUnsafe(0)),!(l._cache.length<=d.length)){u=o.concat([u,a(l,d,c)]);break}h=l._cache.length,u=o.concat([u,a(l,d.slice(0,h),c)]),d=d.slice(h)}return u}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,n,s){var o=t("safe-buffer").Buffer;function r(l,d,c){for(var h,u,p=-1,f=0;++p<8;)h=d&1<<7-p?128:0,f+=(128&(u=l._cipher.encryptBlock(l._prev)[0]^h))>>p%8,l._prev=a(l._prev,c?h:u);return f}function a(l,d){var c=l.length,h=-1,u=o.allocUnsafe(l.length);for(l=o.concat([l,o.from([d])]);++h<c;)u[h]=l[h]<<1|l[h+1]>>7;return u}s.encrypt=function(l,d,c){for(var h=d.length,u=o.allocUnsafe(h),p=-1;++p<h;)u[p]=r(l,d[p],c);return u}},{"safe-buffer":494}],199:[function(t,n,s){var o=t("safe-buffer").Buffer;function r(a,l,d){var c=a._cipher.encryptBlock(a._prev)[0]^l;return a._prev=o.concat([a._prev.slice(1),o.from([d?l:c])]),c}s.encrypt=function(a,l,d){for(var c=l.length,h=o.allocUnsafe(c),u=-1;++u<c;)h[u]=r(a,l[u],d);return h}},{"safe-buffer":494}],200:[function(t,n,s){var o=t("buffer-xor"),r=t("safe-buffer").Buffer,a=t("../incr32");function l(d){var c=d._cipher.encryptBlockRaw(d._prev);return a(d._prev),c}s.encrypt=function(d,c){var h=Math.ceil(c.length/16),u=d._cache.length;d._cache=r.concat([d._cache,r.allocUnsafe(16*h)]);for(var p=0;p<h;p++){var f=l(d),g=u+16*p;d._cache.writeUInt32BE(f[0],g+0),d._cache.writeUInt32BE(f[1],g+4),d._cache.writeUInt32BE(f[2],g+8),d._cache.writeUInt32BE(f[3],g+12)}var m=d._cache.slice(0,c.length);return d._cache=d._cache.slice(c.length),o(c,m)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,n,s){s.encrypt=function(o,r){return o._cipher.encryptBlock(r)},s.decrypt=function(o,r){return o._cipher.decryptBlock(r)}},{}],202:[function(t,n,s){var o={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},r=t("./list.json");for(var a in r)r[a].module=o[r[a].mode];n.exports=r},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,n,s){n.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,n,s){(function(o){(function(){var r=t("buffer-xor");function a(l){return l._prev=l._cipher.encryptBlock(l._prev),l._prev}s.encrypt=function(l,d){for(;l._cache.length<d.length;)l._cache=o.concat([l._cache,a(l)]);var c=l._cache.slice(0,d.length);return l._cache=l._cache.slice(d.length),r(d,c)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,n,s){var o=t("./aes"),r=t("safe-buffer").Buffer,a=t("cipher-base");function l(d,c,h,u){a.call(this),this._cipher=new o.AES(c),this._prev=r.from(h),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=u,this._mode=d}t("inherits")(l,a),l.prototype._update=function(d){return this._mode.encrypt(this,d,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},n.exports=l},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,n,s){var o=t("browserify-des"),r=t("browserify-aes/browser"),a=t("browserify-aes/modes"),l=t("browserify-des/modes"),d=t("evp_bytestokey");function c(u,p,f){if(u=u.toLowerCase(),a[u])return r.createCipheriv(u,p,f);if(l[u])return new o({key:p,iv:f,mode:u});throw new TypeError("invalid suite type")}function h(u,p,f){if(u=u.toLowerCase(),a[u])return r.createDecipheriv(u,p,f);if(l[u])return new o({key:p,iv:f,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}s.createCipher=s.Cipher=function(u,p){var f,g;if(u=u.toLowerCase(),a[u])f=a[u].key,g=a[u].iv;else{if(!l[u])throw new TypeError("invalid suite type");f=8*l[u].key,g=l[u].iv}var m=d(p,!1,f,g);return c(u,m.key,m.iv)},s.createCipheriv=s.Cipheriv=c,s.createDecipher=s.Decipher=function(u,p){var f,g;if(u=u.toLowerCase(),a[u])f=a[u].key,g=a[u].iv;else{if(!l[u])throw new TypeError("invalid suite type");f=8*l[u].key,g=l[u].iv}var m=d(p,!1,f,g);return h(u,m.key,m.iv)},s.createDecipheriv=s.Decipheriv=h,s.listCiphers=s.getCiphers=function(){return Object.keys(l).concat(r.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,n,s){var o=t("cipher-base"),r=t("des.js"),a=t("inherits"),l=t("safe-buffer").Buffer,d={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function c(h){o.call(this);var u,p=h.mode.toLowerCase(),f=d[p];u=h.decrypt?"decrypt":"encrypt";var g=h.key;l.isBuffer(g)||(g=l.from(g)),p!=="des-ede"&&p!=="des-ede-cbc"||(g=l.concat([g,g.slice(0,8)]));var m=h.iv;l.isBuffer(m)||(m=l.from(m)),this._des=f.create({key:g,iv:m,type:u})}d.des=d["des-cbc"],d.des3=d["des-ede3-cbc"],n.exports=c,a(c,o),c.prototype._update=function(h){return l.from(this._des.update(h))},c.prototype._final=function(){return l.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,n,s){s["des-ecb"]={key:8,iv:0},s["des-cbc"]=s.des={key:8,iv:8},s["des-ede3-cbc"]=s.des3={key:24,iv:8},s["des-ede3"]={key:24,iv:0},s["des-ede-cbc"]={key:16,iv:8},s["des-ede"]={key:16,iv:0}},{}],209:[function(t,n,s){(function(o){(function(){var r=t("bn.js"),a=t("randombytes");function l(c){var h,u=c.modulus.byteLength();do h=new r(a(u));while(h.cmp(c.modulus)>=0||!h.umod(c.prime1)||!h.umod(c.prime2));return h}function d(c,h){var u=function($){var F=l($);return{blinder:F.toRed(r.mont($.modulus)).redPow(new r($.publicExponent)).fromRed(),unblinder:F.invm($.modulus)}}(h),p=h.modulus.byteLength(),f=new r(c).mul(u.blinder).umod(h.modulus),g=f.toRed(r.mont(h.prime1)),m=f.toRed(r.mont(h.prime2)),b=h.coefficient,_=h.prime1,w=h.prime2,E=g.redPow(h.exponent1).fromRed(),D=m.redPow(h.exponent2).fromRed(),B=E.isub(D).imul(b).umod(_).imul(w);return D.iadd(B).imul(u.unblinder).umod(h.modulus).toArrayLike(o,"be",p)}d.getr=l,n.exports=d}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,n,s){n.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,n,s){n.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,n,s){n.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("create-hash"),a=t("readable-stream"),l=t("inherits"),d=t("./sign"),c=t("./verify"),h=t("./algorithms.json");function u(m){a.Writable.call(this);var b=h[m];if(!b)throw new Error("Unknown message digest");this._hashType=b.hash,this._hash=r(b.hash),this._tag=b.id,this._signType=b.sign}function p(m){a.Writable.call(this);var b=h[m];if(!b)throw new Error("Unknown message digest");this._hash=r(b.hash),this._tag=b.id,this._signType=b.sign}function f(m){return new u(m)}function g(m){return new p(m)}Object.keys(h).forEach(function(m){h[m].id=o.from(h[m].id,"hex"),h[m.toLowerCase()]=h[m]}),l(u,a.Writable),u.prototype._write=function(m,b,_){this._hash.update(m),_()},u.prototype.update=function(m,b){return typeof m=="string"&&(m=o.from(m,b)),this._hash.update(m),this},u.prototype.sign=function(m,b){this.end();var _=this._hash.digest(),w=d(_,m,this._hashType,this._signType,this._tag);return b?w.toString(b):w},l(p,a.Writable),p.prototype._write=function(m,b,_){this._hash.update(m),_()},p.prototype.update=function(m,b){return typeof m=="string"&&(m=o.from(m,b)),this._hash.update(m),this},p.prototype.verify=function(m,b,_){typeof b=="string"&&(b=o.from(b,_)),this.end();var w=this._hash.digest();return c(b,w,m,this._signType,this._tag)},n.exports={Sign:f,Verify:g,createSign:f,createVerify:g}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("create-hmac"),a=t("browserify-rsa"),l=t("elliptic").ec,d=t("bn.js"),c=t("parse-asn1"),h=t("./curves.json");function u(m,b,_,w){if((m=o.from(m.toArray())).length<b.byteLength()){var E=o.alloc(b.byteLength()-m.length);m=o.concat([E,m])}var D=_.length,B=function(N,L){N=(N=p(N,L)).mod(L);var j=o.from(N.toArray());if(j.length<L.byteLength()){var H=o.alloc(L.byteLength()-j.length);j=o.concat([H,j])}return j}(_,b),$=o.alloc(D);$.fill(1);var F=o.alloc(D);return F=r(w,F).update($).update(o.from([0])).update(m).update(B).digest(),$=r(w,F).update($).digest(),{k:F=r(w,F).update($).update(o.from([1])).update(m).update(B).digest(),v:$=r(w,F).update($).digest()}}function p(m,b){var _=new d(m),w=(m.length<<3)-b.bitLength();return w>0&&_.ishrn(w),_}function f(m,b,_){var w,E;do{for(w=o.alloc(0);8*w.length<m.bitLength();)b.v=r(_,b.k).update(b.v).digest(),w=o.concat([w,b.v]);E=p(w,m),b.k=r(_,b.k).update(b.v).update(o.from([0])).digest(),b.v=r(_,b.k).update(b.v).digest()}while(E.cmp(m)!==-1);return E}function g(m,b,_,w){return m.toRed(d.mont(_)).redPow(b).fromRed().mod(w)}n.exports=function(m,b,_,w,E){var D=c(b);if(D.curve){if(w!=="ecdsa"&&w!=="ecdsa/rsa")throw new Error("wrong private key type");return function(N,L){var j=h[L.curve.join(".")];if(!j)throw new Error("unknown curve "+L.curve.join("."));var H=new l(j).keyFromPrivate(L.privateKey).sign(N);return o.from(H.toDER())}(m,D)}if(D.type==="dsa"){if(w!=="dsa")throw new Error("wrong private key type");return function(N,L,j){for(var H,I=L.params.priv_key,k=L.params.p,S=L.params.q,v=L.params.g,y=new d(0),C=p(N,S).mod(S),x=!1,T=u(I,S,N,j);x===!1;)H=f(S,T,j),y=g(v,H,k,S),(x=H.invm(S).imul(C.add(I.mul(y))).mod(S)).cmpn(0)===0&&(x=!1,y=new d(0));return function(M,V){M=M.toArray(),V=V.toArray(),128&M[0]&&(M=[0].concat(M)),128&V[0]&&(V=[0].concat(V));var W=[48,M.length+V.length+4,2,M.length];return W=W.concat(M,[2,V.length],V),o.from(W)}(y,x)}(m,D,_)}if(w!=="rsa"&&w!=="ecdsa/rsa")throw new Error("wrong private key type");m=o.concat([E,m]);for(var B=D.modulus.byteLength(),$=[0,1];m.length+$.length+1<B;)$.push(255);$.push(0);for(var F=-1;++F<m.length;)$.push(m[F]);return a($,D)},n.exports.getKey=u,n.exports.makeKey=f},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("bn.js"),a=t("elliptic").ec,l=t("parse-asn1"),d=t("./curves.json");function c(h,u){if(h.cmpn(0)<=0)throw new Error("invalid sig");if(h.cmp(u)>=u)throw new Error("invalid sig")}n.exports=function(h,u,p,f,g){var m=l(p);if(m.type==="ec"){if(f!=="ecdsa"&&f!=="ecdsa/rsa")throw new Error("wrong public key type");return function($,F,N){var L=d[N.data.algorithm.curve.join(".")];if(!L)throw new Error("unknown curve "+N.data.algorithm.curve.join("."));var j=new a(L),H=N.data.subjectPrivateKey.data;return j.verify(F,$,H)}(h,u,m)}if(m.type==="dsa"){if(f!=="dsa")throw new Error("wrong public key type");return function($,F,N){var L=N.data.p,j=N.data.q,H=N.data.g,I=N.data.pub_key,k=l.signature.decode($,"der"),S=k.s,v=k.r;c(S,j),c(v,j);var y=r.mont(L),C=S.invm(j);return H.toRed(y).redPow(new r(F).mul(C).mod(j)).fromRed().mul(I.toRed(y).redPow(v.mul(C).mod(j)).fromRed()).mod(L).mod(j).cmp(v)===0}(h,u,m)}if(f!=="rsa"&&f!=="ecdsa/rsa")throw new Error("wrong public key type");u=o.concat([g,u]);for(var b=m.modulus.byteLength(),_=[1],w=0;u.length+_.length+2<b;)_.push(255),w++;_.push(0);for(var E=-1;++E<u.length;)_.push(u[E]);_=o.from(_);var D=r.mont(m.modulus);h=(h=new r(h).toRed(D)).redPow(new r(m.publicExponent)),h=o.from(h.fromRed().toArray());var B=w<8?1:0;for(b=Math.min(h.length,_.length),h.length!==_.length&&(B=1),E=-1;++E<b;)B|=h[E]^_[E];return B===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,n,s){},{}],217:[function(t,n,s){var o=t("buffer"),r=o.Buffer;function a(d,c){for(var h in d)c[h]=d[h]}function l(d,c,h){return r(d,c,h)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=o:(a(o,s),s.Buffer=l),a(r,l),l.from=function(d,c,h){if(typeof d=="number")throw new TypeError("Argument must not be a number");return r(d,c,h)},l.alloc=function(d,c,h){if(typeof d!="number")throw new TypeError("Argument must be a number");var u=r(d);return c!==void 0?typeof h=="string"?u.fill(c,h):u.fill(c):u.fill(0),u},l.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r(d)},l.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(d)}},{buffer:220}],218:[function(t,n,s){var o=t("safe-buffer").Buffer,r=o.isEncoding||function(m){switch((m=""+m)&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(m){var b;switch(this.encoding=function(_){var w=function(E){if(!E)return"utf8";for(var D;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(D)return;E=(""+E).toLowerCase(),D=!0}}(_);if(typeof w!="string"&&(o.isEncoding===r||!r(_)))throw new Error("Unknown encoding: "+_);return w||_}(m),this.encoding){case"utf16le":this.text=c,this.end=h,b=4;break;case"utf8":this.fillLast=d,b=4;break;case"base64":this.text=u,this.end=p,b=3;break;default:return this.write=f,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(b)}function l(m){return m<=127?0:m>>5==6?2:m>>4==14?3:m>>3==30?4:m>>6==2?-1:-2}function d(m){var b=this.lastTotal-this.lastNeed,_=function(w,E,D){if((192&E[0])!=128)return w.lastNeed=0,"�";if(w.lastNeed>1&&E.length>1){if((192&E[1])!=128)return w.lastNeed=1,"�";if(w.lastNeed>2&&E.length>2&&(192&E[2])!=128)return w.lastNeed=2,"�"}}(this,m);return _!==void 0?_:this.lastNeed<=m.length?(m.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(m.copy(this.lastChar,b,0,m.length),void(this.lastNeed-=m.length))}function c(m,b){if((m.length-b)%2==0){var _=m.toString("utf16le",b);if(_){var w=_.charCodeAt(_.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",b,m.length-1)}function h(m){var b=m&&m.length?this.write(m):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,_)}return b}function u(m,b){var _=(m.length-b)%3;return _===0?m.toString("base64",b):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",b,m.length-_))}function p(m){var b=m&&m.length?this.write(m):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function f(m){return m.toString(this.encoding)}function g(m){return m&&m.length?this.write(m):""}s.StringDecoder=a,a.prototype.write=function(m){if(m.length===0)return"";var b,_;if(this.lastNeed){if((b=this.fillLast(m))===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<m.length?b?b+this.text(m,_):this.text(m,_):b||""},a.prototype.end=function(m){var b=m&&m.length?this.write(m):"";return this.lastNeed?b+"�":b},a.prototype.text=function(m,b){var _=function(E,D,B){var $=D.length-1;if($<B)return 0;var F=l(D[$]);return F>=0?(F>0&&(E.lastNeed=F-1),F):--$<B||F===-2?0:(F=l(D[$]))>=0?(F>0&&(E.lastNeed=F-2),F):--$<B||F===-2?0:(F=l(D[$]))>=0?(F>0&&(F===2?F=0:E.lastNeed=F-3),F):0}(this,m,b);if(!this.lastNeed)return m.toString("utf8",b);this.lastTotal=_;var w=m.length-(_-this.lastNeed);return m.copy(this.lastChar,0,w),m.toString("utf8",b,w)},a.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length}},{"safe-buffer":217}],219:[function(t,n,s){(function(o){(function(){n.exports=function(r,a){for(var l=Math.min(r.length,a.length),d=new o(l),c=0;c<l;++c)d[c]=r[c]^a[c];return d}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,n,s){(function(o){(function(){var r=t("base64-js"),a=t("ieee754");s.Buffer=d,s.SlowBuffer=function(O){return+O!=O&&(O=0),d.alloc(+O)},s.INSPECT_MAX_BYTES=50;function l(O){if(O>2147483647)throw new RangeError('The value "'+O+'" is invalid for option "size"');var A=new Uint8Array(O);return A.__proto__=d.prototype,A}function d(O,A,z){if(typeof O=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(O)}return c(O,A,z)}function c(O,A,z){if(typeof O=="string")return function(J,te){if(typeof te=="string"&&te!==""||(te="utf8"),!d.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var le=0|g(J,te),ce=l(le),Q=ce.write(J,te);return Q!==le&&(ce=ce.slice(0,Q)),ce}(O,A);if(ArrayBuffer.isView(O))return p(O);if(O==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(P(O,ArrayBuffer)||O&&P(O.buffer,ArrayBuffer))return function(J,te,le){if(te<0||J.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<te+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ce;return ce=te===void 0&&le===void 0?new Uint8Array(J):le===void 0?new Uint8Array(J,te):new Uint8Array(J,te,le),ce.__proto__=d.prototype,ce}(O,A,z);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=O.valueOf&&O.valueOf();if(X!=null&&X!==O)return d.from(X,A,z);var ee=function(J){if(d.isBuffer(J)){var te=0|f(J.length),le=l(te);return le.length===0||J.copy(le,0,0,te),le}if(J.length!==void 0)return typeof J.length!="number"||G(J.length)?l(0):p(J);if(J.type==="Buffer"&&Array.isArray(J.data))return p(J.data)}(O);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return d.from(O[Symbol.toPrimitive]("string"),A,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function h(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function u(O){return h(O),l(O<0?0:0|f(O))}function p(O){for(var A=O.length<0?0:0|f(O.length),z=l(A),X=0;X<A;X+=1)z[X]=255&O[X];return z}function f(O){if(O>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|O}function g(O,A){if(d.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||P(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var z=O.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&z===0)return 0;for(var ee=!1;;)switch(A){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return W(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return K(O).length;default:if(ee)return X?-1:W(O).length;A=(""+A).toLowerCase(),ee=!0}}function m(O,A,z){var X=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(A>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return k(this,A,z);case"utf8":case"utf-8":return j(this,A,z);case"ascii":return H(this,A,z);case"latin1":case"binary":return I(this,A,z);case"base64":return L(this,A,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,A,z);default:if(X)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),X=!0}}function b(O,A,z){var X=O[A];O[A]=O[z],O[z]=X}function _(O,A,z,X,ee){if(O.length===0)return-1;if(typeof z=="string"?(X=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),G(z=+z)&&(z=ee?0:O.length-1),z<0&&(z=O.length+z),z>=O.length){if(ee)return-1;z=O.length-1}else if(z<0){if(!ee)return-1;z=0}if(typeof A=="string"&&(A=d.from(A,X)),d.isBuffer(A))return A.length===0?-1:w(O,A,z,X,ee);if(typeof A=="number")return A&=255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(O,A,z):Uint8Array.prototype.lastIndexOf.call(O,A,z):w(O,[A],z,X,ee);throw new TypeError("val must be string, number or Buffer")}function w(O,A,z,X,ee){var J,te=1,le=O.length,ce=A.length;if(X!==void 0&&((X=String(X).toLowerCase())==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(O.length<2||A.length<2)return-1;te=2,le/=2,ce/=2,z/=2}function Q(he,me){return te===1?he[me]:he.readUInt16BE(me*te)}if(ee){var oe=-1;for(J=z;J<le;J++)if(Q(O,J)===Q(A,oe===-1?0:J-oe)){if(oe===-1&&(oe=J),J-oe+1===ce)return oe*te}else oe!==-1&&(J-=J-oe),oe=-1}else for(z+ce>le&&(z=le-ce),J=z;J>=0;J--){for(var se=!0,pe=0;pe<ce;pe++)if(Q(O,J+pe)!==Q(A,pe)){se=!1;break}if(se)return J}return-1}function E(O,A,z,X){z=Number(z)||0;var ee=O.length-z;X?(X=Number(X))>ee&&(X=ee):X=ee;var J=A.length;X>J/2&&(X=J/2);for(var te=0;te<X;++te){var le=parseInt(A.substr(2*te,2),16);if(G(le))return te;O[z+te]=le}return te}function D(O,A,z,X){return Z(W(A,O.length-z),O,z,X)}function B(O,A,z,X){return Z(function(ee){for(var J=[],te=0;te<ee.length;++te)J.push(255&ee.charCodeAt(te));return J}(A),O,z,X)}function $(O,A,z,X){return B(O,A,z,X)}function F(O,A,z,X){return Z(K(A),O,z,X)}function N(O,A,z,X){return Z(function(ee,J){for(var te,le,ce,Q=[],oe=0;oe<ee.length&&!((J-=2)<0);++oe)te=ee.charCodeAt(oe),le=te>>8,ce=te%256,Q.push(ce),Q.push(le);return Q}(A,O.length-z),O,z,X)}function L(O,A,z){return A===0&&z===O.length?r.fromByteArray(O):r.fromByteArray(O.slice(A,z))}function j(O,A,z){z=Math.min(O.length,z);for(var X=[],ee=A;ee<z;){var J,te,le,ce,Q=O[ee],oe=null,se=Q>239?4:Q>223?3:Q>191?2:1;if(ee+se<=z)switch(se){case 1:Q<128&&(oe=Q);break;case 2:(192&(J=O[ee+1]))==128&&(ce=(31&Q)<<6|63&J)>127&&(oe=ce);break;case 3:J=O[ee+1],te=O[ee+2],(192&J)==128&&(192&te)==128&&(ce=(15&Q)<<12|(63&J)<<6|63&te)>2047&&(ce<55296||ce>57343)&&(oe=ce);break;case 4:J=O[ee+1],te=O[ee+2],le=O[ee+3],(192&J)==128&&(192&te)==128&&(192&le)==128&&(ce=(15&Q)<<18|(63&J)<<12|(63&te)<<6|63&le)>65535&&ce<1114112&&(oe=ce)}oe===null?(oe=65533,se=1):oe>65535&&(oe-=65536,X.push(oe>>>10&1023|55296),oe=56320|1023&oe),X.push(oe),ee+=se}return function(pe){var he=pe.length;if(he<=4096)return String.fromCharCode.apply(String,pe);for(var me="",ye=0;ye<he;)me+=String.fromCharCode.apply(String,pe.slice(ye,ye+=4096));return me}(X)}s.kMaxLength=2147483647,d.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1);return O.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},O.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(O,A,z){return c(O,A,z)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(O,A,z){return function(X,ee,J){return h(X),X<=0?l(X):ee!==void 0?typeof J=="string"?l(X).fill(ee,J):l(X).fill(ee):l(X)}(O,A,z)},d.allocUnsafe=function(O){return u(O)},d.allocUnsafeSlow=function(O){return u(O)},d.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==d.prototype},d.compare=function(O,A){if(P(O,Uint8Array)&&(O=d.from(O,O.offset,O.byteLength)),P(A,Uint8Array)&&(A=d.from(A,A.offset,A.byteLength)),!d.isBuffer(O)||!d.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===A)return 0;for(var z=O.length,X=A.length,ee=0,J=Math.min(z,X);ee<J;++ee)if(O[ee]!==A[ee]){z=O[ee],X=A[ee];break}return z<X?-1:X<z?1:0},d.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(O,A){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return d.alloc(0);var z;if(A===void 0)for(A=0,z=0;z<O.length;++z)A+=O[z].length;var X=d.allocUnsafe(A),ee=0;for(z=0;z<O.length;++z){var J=O[z];if(P(J,Uint8Array)&&(J=d.from(J)),!d.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(X,ee),ee+=J.length}return X},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<O;A+=2)b(this,A,A+1);return this},d.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<O;A+=4)b(this,A,A+3),b(this,A+1,A+2);return this},d.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<O;A+=8)b(this,A,A+7),b(this,A+1,A+6),b(this,A+2,A+5),b(this,A+3,A+4);return this},d.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?j(this,0,O):m.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(O){if(!d.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||d.compare(this,O)===0},d.prototype.inspect=function(){var O="",A=s.INSPECT_MAX_BYTES;return O=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(O+=" ... "),"<Buffer "+O+">"},d.prototype.compare=function(O,A,z,X,ee){if(P(O,Uint8Array)&&(O=d.from(O,O.offset,O.byteLength)),!d.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(A===void 0&&(A=0),z===void 0&&(z=O?O.length:0),X===void 0&&(X=0),ee===void 0&&(ee=this.length),A<0||z>O.length||X<0||ee>this.length)throw new RangeError("out of range index");if(X>=ee&&A>=z)return 0;if(X>=ee)return-1;if(A>=z)return 1;if(this===O)return 0;for(var J=(ee>>>=0)-(X>>>=0),te=(z>>>=0)-(A>>>=0),le=Math.min(J,te),ce=this.slice(X,ee),Q=O.slice(A,z),oe=0;oe<le;++oe)if(ce[oe]!==Q[oe]){J=ce[oe],te=Q[oe];break}return J<te?-1:te<J?1:0},d.prototype.includes=function(O,A,z){return this.indexOf(O,A,z)!==-1},d.prototype.indexOf=function(O,A,z){return _(this,O,A,z,!0)},d.prototype.lastIndexOf=function(O,A,z){return _(this,O,A,z,!1)},d.prototype.write=function(O,A,z,X){if(A===void 0)X="utf8",z=this.length,A=0;else if(z===void 0&&typeof A=="string")X=A,z=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A>>>=0,isFinite(z)?(z>>>=0,X===void 0&&(X="utf8")):(X=z,z=void 0)}var ee=this.length-A;if((z===void 0||z>ee)&&(z=ee),O.length>0&&(z<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var J=!1;;)switch(X){case"hex":return E(this,O,A,z);case"utf8":case"utf-8":return D(this,O,A,z);case"ascii":return B(this,O,A,z);case"latin1":case"binary":return $(this,O,A,z);case"base64":return F(this,O,A,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,O,A,z);default:if(J)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),J=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(O,A,z){var X="";z=Math.min(O.length,z);for(var ee=A;ee<z;++ee)X+=String.fromCharCode(127&O[ee]);return X}function I(O,A,z){var X="";z=Math.min(O.length,z);for(var ee=A;ee<z;++ee)X+=String.fromCharCode(O[ee]);return X}function k(O,A,z){var X=O.length;(!A||A<0)&&(A=0),(!z||z<0||z>X)&&(z=X);for(var ee="",J=A;J<z;++J)ee+=V(O[J]);return ee}function S(O,A,z){for(var X=O.slice(A,z),ee="",J=0;J<X.length;J+=2)ee+=String.fromCharCode(X[J]+256*X[J+1]);return ee}function v(O,A,z){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+A>z)throw new RangeError("Trying to access beyond buffer length")}function y(O,A,z,X,ee,J){if(!d.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>ee||A<J)throw new RangeError('"value" argument is out of bounds');if(z+X>O.length)throw new RangeError("Index out of range")}function C(O,A,z,X,ee,J){if(z+X>O.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function x(O,A,z,X,ee){return A=+A,z>>>=0,ee||C(O,0,z,4),a.write(O,A,z,X,23,4),z+4}function T(O,A,z,X,ee){return A=+A,z>>>=0,ee||C(O,0,z,8),a.write(O,A,z,X,52,8),z+8}d.prototype.slice=function(O,A){var z=this.length;(O=~~O)<0?(O+=z)<0&&(O=0):O>z&&(O=z),(A=A===void 0?z:~~A)<0?(A+=z)<0&&(A=0):A>z&&(A=z),A<O&&(A=O);var X=this.subarray(O,A);return X.__proto__=d.prototype,X},d.prototype.readUIntLE=function(O,A,z){O>>>=0,A>>>=0,z||v(O,A,this.length);for(var X=this[O],ee=1,J=0;++J<A&&(ee*=256);)X+=this[O+J]*ee;return X},d.prototype.readUIntBE=function(O,A,z){O>>>=0,A>>>=0,z||v(O,A,this.length);for(var X=this[O+--A],ee=1;A>0&&(ee*=256);)X+=this[O+--A]*ee;return X},d.prototype.readUInt8=function(O,A){return O>>>=0,A||v(O,1,this.length),this[O]},d.prototype.readUInt16LE=function(O,A){return O>>>=0,A||v(O,2,this.length),this[O]|this[O+1]<<8},d.prototype.readUInt16BE=function(O,A){return O>>>=0,A||v(O,2,this.length),this[O]<<8|this[O+1]},d.prototype.readUInt32LE=function(O,A){return O>>>=0,A||v(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},d.prototype.readUInt32BE=function(O,A){return O>>>=0,A||v(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},d.prototype.readIntLE=function(O,A,z){O>>>=0,A>>>=0,z||v(O,A,this.length);for(var X=this[O],ee=1,J=0;++J<A&&(ee*=256);)X+=this[O+J]*ee;return X>=(ee*=128)&&(X-=Math.pow(2,8*A)),X},d.prototype.readIntBE=function(O,A,z){O>>>=0,A>>>=0,z||v(O,A,this.length);for(var X=A,ee=1,J=this[O+--X];X>0&&(ee*=256);)J+=this[O+--X]*ee;return J>=(ee*=128)&&(J-=Math.pow(2,8*A)),J},d.prototype.readInt8=function(O,A){return O>>>=0,A||v(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},d.prototype.readInt16LE=function(O,A){O>>>=0,A||v(O,2,this.length);var z=this[O]|this[O+1]<<8;return 32768&z?4294901760|z:z},d.prototype.readInt16BE=function(O,A){O>>>=0,A||v(O,2,this.length);var z=this[O+1]|this[O]<<8;return 32768&z?4294901760|z:z},d.prototype.readInt32LE=function(O,A){return O>>>=0,A||v(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},d.prototype.readInt32BE=function(O,A){return O>>>=0,A||v(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},d.prototype.readFloatLE=function(O,A){return O>>>=0,A||v(O,4,this.length),a.read(this,O,!0,23,4)},d.prototype.readFloatBE=function(O,A){return O>>>=0,A||v(O,4,this.length),a.read(this,O,!1,23,4)},d.prototype.readDoubleLE=function(O,A){return O>>>=0,A||v(O,8,this.length),a.read(this,O,!0,52,8)},d.prototype.readDoubleBE=function(O,A){return O>>>=0,A||v(O,8,this.length),a.read(this,O,!1,52,8)},d.prototype.writeUIntLE=function(O,A,z,X){O=+O,A>>>=0,z>>>=0,X||y(this,O,A,z,Math.pow(2,8*z)-1,0);var ee=1,J=0;for(this[A]=255&O;++J<z&&(ee*=256);)this[A+J]=O/ee&255;return A+z},d.prototype.writeUIntBE=function(O,A,z,X){O=+O,A>>>=0,z>>>=0,X||y(this,O,A,z,Math.pow(2,8*z)-1,0);var ee=z-1,J=1;for(this[A+ee]=255&O;--ee>=0&&(J*=256);)this[A+ee]=O/J&255;return A+z},d.prototype.writeUInt8=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,1,255,0),this[A]=255&O,A+1},d.prototype.writeUInt16LE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,2,65535,0),this[A]=255&O,this[A+1]=O>>>8,A+2},d.prototype.writeUInt16BE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,2,65535,0),this[A]=O>>>8,this[A+1]=255&O,A+2},d.prototype.writeUInt32LE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,4,4294967295,0),this[A+3]=O>>>24,this[A+2]=O>>>16,this[A+1]=O>>>8,this[A]=255&O,A+4},d.prototype.writeUInt32BE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,4,4294967295,0),this[A]=O>>>24,this[A+1]=O>>>16,this[A+2]=O>>>8,this[A+3]=255&O,A+4},d.prototype.writeIntLE=function(O,A,z,X){if(O=+O,A>>>=0,!X){var ee=Math.pow(2,8*z-1);y(this,O,A,z,ee-1,-ee)}var J=0,te=1,le=0;for(this[A]=255&O;++J<z&&(te*=256);)O<0&&le===0&&this[A+J-1]!==0&&(le=1),this[A+J]=(O/te>>0)-le&255;return A+z},d.prototype.writeIntBE=function(O,A,z,X){if(O=+O,A>>>=0,!X){var ee=Math.pow(2,8*z-1);y(this,O,A,z,ee-1,-ee)}var J=z-1,te=1,le=0;for(this[A+J]=255&O;--J>=0&&(te*=256);)O<0&&le===0&&this[A+J+1]!==0&&(le=1),this[A+J]=(O/te>>0)-le&255;return A+z},d.prototype.writeInt8=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,1,127,-128),O<0&&(O=255+O+1),this[A]=255&O,A+1},d.prototype.writeInt16LE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,2,32767,-32768),this[A]=255&O,this[A+1]=O>>>8,A+2},d.prototype.writeInt16BE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,2,32767,-32768),this[A]=O>>>8,this[A+1]=255&O,A+2},d.prototype.writeInt32LE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,4,2147483647,-2147483648),this[A]=255&O,this[A+1]=O>>>8,this[A+2]=O>>>16,this[A+3]=O>>>24,A+4},d.prototype.writeInt32BE=function(O,A,z){return O=+O,A>>>=0,z||y(this,O,A,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[A]=O>>>24,this[A+1]=O>>>16,this[A+2]=O>>>8,this[A+3]=255&O,A+4},d.prototype.writeFloatLE=function(O,A,z){return x(this,O,A,!0,z)},d.prototype.writeFloatBE=function(O,A,z){return x(this,O,A,!1,z)},d.prototype.writeDoubleLE=function(O,A,z){return T(this,O,A,!0,z)},d.prototype.writeDoubleBE=function(O,A,z){return T(this,O,A,!1,z)},d.prototype.copy=function(O,A,z,X){if(!d.isBuffer(O))throw new TypeError("argument should be a Buffer");if(z||(z=0),X||X===0||(X=this.length),A>=O.length&&(A=O.length),A||(A=0),X>0&&X<z&&(X=z),X===z||O.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),O.length-A<X-z&&(X=O.length-A+z);var ee=X-z;if(this===O&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(A,z,X);else if(this===O&&z<A&&A<X)for(var J=ee-1;J>=0;--J)O[J+A]=this[J+z];else Uint8Array.prototype.set.call(O,this.subarray(z,X),A);return ee},d.prototype.fill=function(O,A,z,X){if(typeof O=="string"){if(typeof A=="string"?(X=A,A=0,z=this.length):typeof z=="string"&&(X=z,z=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!d.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(O.length===1){var ee=O.charCodeAt(0);(X==="utf8"&&ee<128||X==="latin1")&&(O=ee)}}else typeof O=="number"&&(O&=255);if(A<0||this.length<A||this.length<z)throw new RangeError("Out of range index");if(z<=A)return this;var J;if(A>>>=0,z=z===void 0?this.length:z>>>0,O||(O=0),typeof O=="number")for(J=A;J<z;++J)this[J]=O;else{var te=d.isBuffer(O)?O:d.from(O,X),le=te.length;if(le===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(J=0;J<z-A;++J)this[J+A]=te[J%le]}return this};var M=/[^+/0-9A-Za-z-_]/g;function V(O){return O<16?"0"+O.toString(16):O.toString(16)}function W(O,A){var z;A=A||1/0;for(var X=O.length,ee=null,J=[],te=0;te<X;++te){if((z=O.charCodeAt(te))>55295&&z<57344){if(!ee){if(z>56319){(A-=3)>-1&&J.push(239,191,189);continue}if(te+1===X){(A-=3)>-1&&J.push(239,191,189);continue}ee=z;continue}if(z<56320){(A-=3)>-1&&J.push(239,191,189),ee=z;continue}z=65536+(ee-55296<<10|z-56320)}else ee&&(A-=3)>-1&&J.push(239,191,189);if(ee=null,z<128){if((A-=1)<0)break;J.push(z)}else if(z<2048){if((A-=2)<0)break;J.push(z>>6|192,63&z|128)}else if(z<65536){if((A-=3)<0)break;J.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;J.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return J}function K(O){return r.toByteArray(function(A){if((A=(A=A.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;A.length%4!=0;)A+="=";return A}(O))}function Z(O,A,z,X){for(var ee=0;ee<X&&!(ee+z>=A.length||ee>=O.length);++ee)A[ee+z]=O[ee];return ee}function P(O,A){return O instanceof A||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===A.name}function G(O){return O!=O}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("stream").Transform,a=t("string_decoder").StringDecoder;function l(d){r.call(this),this.hashMode=typeof d=="string",this.hashMode?this[d]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(l,r),l.prototype.update=function(d,c,h){typeof d=="string"&&(d=o.from(d,c));var u=this._update(d);return this.hashMode?this:(h&&(u=this._toString(u,h)),u)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(d,c,h){var u;try{this.hashMode?this._update(d):this.push(this._update(d))}catch(p){u=p}finally{h(u)}},l.prototype._flush=function(d){var c;try{this.push(this.__final())}catch(h){c=h}d(c)},l.prototype._finalOrDigest=function(d){var c=this.__final()||o.alloc(0);return d&&(c=this._toString(c,d,!0)),c},l.prototype._toString=function(d,c,h){if(this._decoder||(this._decoder=new a(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var u=this._decoder.write(d);return h&&(u+=this._decoder.end()),u},n.exports=l},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,n,s){var o=t("../internals/is-callable"),r=t("../internals/try-to-string"),a=TypeError;n.exports=function(l){if(o(l))return l;throw new a(r(l)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,n,s){var o=t("../internals/is-constructor"),r=t("../internals/try-to-string"),a=TypeError;n.exports=function(l){if(o(l))return l;throw new a(r(l)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,n,s){var o=t("../internals/is-callable"),r=String,a=TypeError;n.exports=function(l){if(typeof l=="object"||o(l))return l;throw new a("Can't set "+r(l)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,n,s){var o=t("../internals/well-known-symbol"),r=t("../internals/object-create"),a=t("../internals/object-define-property").f,l=o("unscopables"),d=Array.prototype;d[l]===void 0&&a(d,l,{configurable:!0,value:r(null)}),n.exports=function(c){d[l][c]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,n,s){var o=t("../internals/object-is-prototype-of"),r=TypeError;n.exports=function(a,l){if(o(l,a))return a;throw new r("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,n,s){var o=t("../internals/is-object"),r=String,a=TypeError;n.exports=function(l){if(o(l))return l;throw new a(r(l)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,n,s){var o=t("../internals/to-indexed-object"),r=t("../internals/to-absolute-index"),a=t("../internals/length-of-array-like"),l=function(d){return function(c,h,u){var p,f=o(c),g=a(f),m=r(u,g);if(d&&h!=h){for(;g>m;)if((p=f[m++])!=p)return!0}else for(;g>m;m++)if((d||m in f)&&f[m]===h)return d||m||0;return!d&&-1}};n.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,n,s){var o=t("../internals/function-bind-context"),r=t("../internals/function-uncurry-this"),a=t("../internals/indexed-object"),l=t("../internals/to-object"),d=t("../internals/length-of-array-like"),c=t("../internals/array-species-create"),h=r([].push),u=function(p){var f=p===1,g=p===2,m=p===3,b=p===4,_=p===6,w=p===7,E=p===5||_;return function(D,B,$,F){for(var N,L,j=l(D),H=a(j),I=o(B,$),k=d(H),S=0,v=F||c,y=f?v(D,k):g||w?v(D,0):void 0;k>S;S++)if((E||S in H)&&(L=I(N=H[S],S,j),p))if(f)y[S]=L;else if(L)switch(p){case 3:return!0;case 5:return N;case 6:return S;case 2:h(y,N)}else switch(p){case 4:return!1;case 7:h(y,N)}return _?-1:m||b?b:y}};n.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,n,s){var o=t("../internals/to-absolute-index"),r=t("../internals/length-of-array-like"),a=t("../internals/create-property"),l=Array,d=Math.max;n.exports=function(c,h,u){for(var p=r(c),f=o(h,p),g=o(u===void 0?p:u,p),m=l(d(g-f,0)),b=0;f<g;f++,b++)a(m,b,c[f]);return m.length=b,m}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,n,s){var o=t("../internals/function-uncurry-this");n.exports=o([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,n,s){var o=t("../internals/is-array"),r=t("../internals/is-constructor"),a=t("../internals/is-object"),l=t("../internals/well-known-symbol")("species"),d=Array;n.exports=function(c){var h;return o(c)&&(h=c.constructor,(r(h)&&(h===d||o(h.prototype))||a(h)&&(h=h[l])===null)&&(h=void 0)),h===void 0?d:h}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,n,s){var o=t("../internals/array-species-constructor");n.exports=function(r,a){return new(o(r))(a===0?0:a)}},{"../internals/array-species-constructor":232}],234:[function(t,n,s){var o=t("../internals/well-known-symbol")("iterator"),r=!1;try{var a=0,l={next:function(){return{done:!!a++}},return:function(){r=!0}};l[o]=function(){return this},Array.from(l,function(){throw 2})}catch{}n.exports=function(d,c){try{if(!c&&!r)return!1}catch{return!1}var h=!1;try{var u={};u[o]=function(){return{next:function(){return{done:h=!0}}}},d(u)}catch{}return h}},{"../internals/well-known-symbol":357}],235:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=o({}.toString),a=o("".slice);n.exports=function(l){return a(r(l),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,n,s){var o=t("../internals/to-string-tag-support"),r=t("../internals/is-callable"),a=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("toStringTag"),d=Object,c=a(function(){return arguments}())==="Arguments";n.exports=o?a:function(h){var u,p,f;return h===void 0?"Undefined":h===null?"Null":typeof(p=function(g,m){try{return g[m]}catch{}}(u=d(h),l))=="string"?p:c?a(u):(f=a(u))==="Object"&&r(u.callee)?"Arguments":f}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,n,s){var o=t("../internals/has-own-property"),r=t("../internals/own-keys"),a=t("../internals/object-get-own-property-descriptor"),l=t("../internals/object-define-property");n.exports=function(d,c,h){for(var u=r(c),p=l.f,f=a.f,g=0;g<u.length;g++){var m=u[g];o(d,m)||h&&o(h,m)||p(d,m,f(c,m))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,n,s){var o=t("../internals/well-known-symbol")("match");n.exports=function(r){var a=/./;try{"/./"[r](a)}catch{try{return a[o]=!1,"/./"[r](a)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,n,s){var o=t("../internals/fails");n.exports=!o(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},{"../internals/fails":260}],240:[function(t,n,s){n.exports=function(o,r){return{value:o,done:r}}},{}],241:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");n.exports=o?function(l,d,c){return r.f(l,d,a(1,c))}:function(l,d,c){return l[d]=c,l}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,n,s){n.exports=function(o,r){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:r}}},{}],243:[function(t,n,s){var o=t("../internals/to-property-key"),r=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");n.exports=function(l,d,c){var h=o(d);h in l?r.f(l,h,a(0,c)):l[h]=c}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,n,s){var o=t("../internals/make-built-in"),r=t("../internals/object-define-property");n.exports=function(a,l,d){return d.get&&o(d.get,l,{getter:!0}),d.set&&o(d.set,l,{setter:!0}),r.f(a,l,d)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,n,s){var o=t("../internals/is-callable"),r=t("../internals/object-define-property"),a=t("../internals/make-built-in"),l=t("../internals/define-global-property");n.exports=function(d,c,h,u){u||(u={});var p=u.enumerable,f=u.name!==void 0?u.name:c;if(o(h)&&a(h,f,u),u.global)p?d[c]=h:l(c,h);else{try{u.unsafe?d[c]&&(p=!0):delete d[c]}catch{}p?d[c]=h:r.f(d,c,{value:h,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return d}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,n,s){var o=t("../internals/global"),r=Object.defineProperty;n.exports=function(a,l){try{r(o,a,{value:l,configurable:!0,writable:!0})}catch{o[a]=l}return l}},{"../internals/global":274}],247:[function(t,n,s){var o=t("../internals/fails");n.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(t,n,s){var o=typeof document=="object"&&document.all,r=o===void 0&&o!==void 0;n.exports={all:o,IS_HTMLDDA:r}},{}],249:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/is-object"),a=o.document,l=r(a)&&r(a.createElement);n.exports=function(d){return l?a.createElement(d):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,n,s){var o=t("../internals/engine-is-deno"),r=t("../internals/engine-is-node");n.exports=!o&&!r&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,n,s){n.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,n,s){var o=t("../internals/engine-user-agent");n.exports=/ipad|iphone|ipod/i.test(o)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,n,s){var o=t("../internals/engine-user-agent");n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},{"../internals/engine-user-agent":256}],254:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/classof-raw");n.exports=r(o.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,n,s){var o=t("../internals/engine-user-agent");n.exports=/web0s(?!.*chrome)/i.test(o)},{"../internals/engine-user-agent":256}],256:[function(t,n,s){n.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,n,s){var o,r,a=t("../internals/global"),l=t("../internals/engine-user-agent"),d=a.process,c=a.Deno,h=d&&d.versions||c&&c.version,u=h&&h.v8;u&&(r=(o=u.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&l&&(!(o=l.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=l.match(/Chrome\/(\d+)/))&&(r=+o[1]),n.exports=r},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,n,s){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/create-non-enumerable-property"),l=t("../internals/define-built-in"),d=t("../internals/define-global-property"),c=t("../internals/copy-constructor-properties"),h=t("../internals/is-forced");n.exports=function(u,p){var f,g,m,b,_,w=u.target,E=u.global,D=u.stat;if(f=E?o:D?o[w]||d(w,{}):(o[w]||{}).prototype)for(g in p){if(b=p[g],m=u.dontCallGetSet?(_=r(f,g))&&_.value:f[g],!h(E?g:w+(D?".":"#")+g,u.forced)&&m!==void 0){if(typeof b==typeof m)continue;c(b,m)}(u.sham||m&&m.sham)&&a(b,"sham",!0),l(f,g,b,u)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,n,s){n.exports=function(o){try{return!!o()}catch{return!0}}},{}],261:[function(t,n,s){var o=t("../internals/function-bind-native"),r=Function.prototype,a=r.apply,l=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(o?l.bind(a):function(){return l.apply(a,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,n,s){var o=t("../internals/function-uncurry-this-clause"),r=t("../internals/a-callable"),a=t("../internals/function-bind-native"),l=o(o.bind);n.exports=function(d,c){return r(d),c===void 0?d:a?l(d,c):function(){return d.apply(c,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,n,s){var o=t("../internals/fails");n.exports=!o(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(t,n,s){var o=t("../internals/function-bind-native"),r=Function.prototype.call;n.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/has-own-property"),a=Function.prototype,l=o&&Object.getOwnPropertyDescriptor,d=r(a,"name"),c=d&&(function(){}).name==="something",h=d&&(!o||o&&l(a,"name").configurable);n.exports={EXISTS:d,PROPER:c,CONFIGURABLE:h}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/a-callable");n.exports=function(a,l,d){try{return o(r(Object.getOwnPropertyDescriptor(a,l)[d]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,n,s){var o=t("../internals/classof-raw"),r=t("../internals/function-uncurry-this");n.exports=function(a){if(o(a)==="Function")return r(a)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,n,s){var o=t("../internals/function-bind-native"),r=Function.prototype,a=r.call,l=o&&r.bind.bind(a,a);n.exports=o?l:function(d){return function(){return a.apply(d,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/is-callable"),a=function(l){return r(l)?l:void 0};n.exports=function(l,d){return arguments.length<2?a(o[l]):o[l]&&o[l][d]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,n,s){var o=t("../internals/classof"),r=t("../internals/get-method"),a=t("../internals/is-null-or-undefined"),l=t("../internals/iterators"),d=t("../internals/well-known-symbol")("iterator");n.exports=function(c){if(!a(c))return r(c,d)||r(c,"@@iterator")||l[o(c)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,n,s){var o=t("../internals/function-call"),r=t("../internals/a-callable"),a=t("../internals/an-object"),l=t("../internals/try-to-string"),d=t("../internals/get-iterator-method"),c=TypeError;n.exports=function(h,u){var p=arguments.length<2?d(h):u;if(r(p))return a(o(p,h));throw new c(l(h)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/is-array"),a=t("../internals/is-callable"),l=t("../internals/classof-raw"),d=t("../internals/to-string"),c=o([].push);n.exports=function(h){if(a(h))return h;if(r(h)){for(var u=h.length,p=[],f=0;f<u;f++){var g=h[f];typeof g=="string"?c(p,g):typeof g!="number"&&l(g)!=="Number"&&l(g)!=="String"||c(p,d(g))}var m=p.length,b=!0;return function(_,w){if(b)return b=!1,w;if(r(this))return w;for(var E=0;E<m;E++)if(p[E]===_)return w}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,n,s){var o=t("../internals/a-callable"),r=t("../internals/is-null-or-undefined");n.exports=function(a,l){var d=a[l];return r(d)?void 0:o(d)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,n,s){(function(o){(function(){var r=function(a){return a&&a.Math===Math&&a};n.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof o=="object"&&o)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/to-object"),a=o({}.hasOwnProperty);n.exports=Object.hasOwn||function(l,d){return a(r(l),d)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,n,s){n.exports={}},{}],277:[function(t,n,s){n.exports=function(o,r){try{arguments.length===1?console.error(o):console.error(o,r)}catch{}}},{}],278:[function(t,n,s){var o=t("../internals/get-built-in");n.exports=o("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/fails"),a=t("../internals/document-create-element");n.exports=!o&&!r(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/fails"),a=t("../internals/classof-raw"),l=Object,d=o("".split);n.exports=r(function(){return!l("z").propertyIsEnumerable(0)})?function(c){return a(c)==="String"?d(c,""):l(c)}:l},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/is-callable"),a=t("../internals/shared-store"),l=o(Function.toString);r(a.inspectSource)||(a.inspectSource=function(d){return l(d)}),n.exports=a.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,n,s){var o,r,a,l=t("../internals/weak-map-basic-detection"),d=t("../internals/global"),c=t("../internals/is-object"),h=t("../internals/create-non-enumerable-property"),u=t("../internals/has-own-property"),p=t("../internals/shared-store"),f=t("../internals/shared-key"),g=t("../internals/hidden-keys"),m=d.TypeError,b=d.WeakMap;if(l||p.state){var _=p.state||(p.state=new b);_.get=_.get,_.has=_.has,_.set=_.set,o=function(E,D){if(_.has(E))throw new m("Object already initialized");return D.facade=E,_.set(E,D),D},r=function(E){return _.get(E)||{}},a=function(E){return _.has(E)}}else{var w=f("state");g[w]=!0,o=function(E,D){if(u(E,w))throw new m("Object already initialized");return D.facade=E,h(E,w,D),D},r=function(E){return u(E,w)?E[w]:{}},a=function(E){return u(E,w)}}n.exports={set:o,get:r,has:a,enforce:function(E){return a(E)?r(E):o(E,{})},getterFor:function(E){return function(D){var B;if(!c(D)||(B=r(D)).type!==E)throw new m("Incompatible receiver, "+E+" required");return B}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,n,s){var o=t("../internals/well-known-symbol"),r=t("../internals/iterators"),a=o("iterator"),l=Array.prototype;n.exports=function(d){return d!==void 0&&(r.Array===d||l[a]===d)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,n,s){var o=t("../internals/classof-raw");n.exports=Array.isArray||function(r){return o(r)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,n,s){var o=t("../internals/document-all"),r=o.all;n.exports=o.IS_HTMLDDA?function(a){return typeof a=="function"||a===r}:function(a){return typeof a=="function"}},{"../internals/document-all":248}],286:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/fails"),a=t("../internals/is-callable"),l=t("../internals/classof"),d=t("../internals/get-built-in"),c=t("../internals/inspect-source"),h=function(){},u=[],p=d("Reflect","construct"),f=/^\s*(?:class|function)\b/,g=o(f.exec),m=!f.test(h),b=function(w){if(!a(w))return!1;try{return p(h,u,w),!0}catch{return!1}},_=function(w){if(!a(w))return!1;switch(l(w)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!g(f,c(w))}catch{return!0}};_.sham=!0,n.exports=!p||r(function(){var w;return b(b.call)||!b(Object)||!b(function(){w=!0})||w})?_:b},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,n,s){var o=t("../internals/fails"),r=t("../internals/is-callable"),a=/#|\.prototype\./,l=function(p,f){var g=c[d(p)];return g===u||g!==h&&(r(f)?o(f):!!f)},d=l.normalize=function(p){return String(p).replace(a,".").toLowerCase()},c=l.data={},h=l.NATIVE="N",u=l.POLYFILL="P";n.exports=l},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,n,s){n.exports=function(o){return o==null}},{}],289:[function(t,n,s){var o=t("../internals/is-callable"),r=t("../internals/document-all"),a=r.all;n.exports=r.IS_HTMLDDA?function(l){return typeof l=="object"?l!==null:o(l)||l===a}:function(l){return typeof l=="object"?l!==null:o(l)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,n,s){n.exports=!1},{}],291:[function(t,n,s){var o=t("../internals/is-object"),r=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("match");n.exports=function(l){var d;return o(l)&&((d=l[a])!==void 0?!!d:r(l)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,n,s){var o=t("../internals/get-built-in"),r=t("../internals/is-callable"),a=t("../internals/object-is-prototype-of"),l=t("../internals/use-symbol-as-uid"),d=Object;n.exports=l?function(c){return typeof c=="symbol"}:function(c){var h=o("Symbol");return r(h)&&a(h.prototype,d(c))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,n,s){var o=t("../internals/function-bind-context"),r=t("../internals/function-call"),a=t("../internals/an-object"),l=t("../internals/try-to-string"),d=t("../internals/is-array-iterator-method"),c=t("../internals/length-of-array-like"),h=t("../internals/object-is-prototype-of"),u=t("../internals/get-iterator"),p=t("../internals/get-iterator-method"),f=t("../internals/iterator-close"),g=TypeError,m=function(_,w){this.stopped=_,this.result=w},b=m.prototype;n.exports=function(_,w,E){var D,B,$,F,N,L,j,H=E&&E.that,I=!(!E||!E.AS_ENTRIES),k=!(!E||!E.IS_RECORD),S=!(!E||!E.IS_ITERATOR),v=!(!E||!E.INTERRUPTED),y=o(w,H),C=function(T){return D&&f(D,"normal",T),new m(!0,T)},x=function(T){return I?(a(T),v?y(T[0],T[1],C):y(T[0],T[1])):v?y(T,C):y(T)};if(k)D=_.iterator;else if(S)D=_;else{if(!(B=p(_)))throw new g(l(_)+" is not iterable");if(d(B)){for($=0,F=c(_);F>$;$++)if((N=x(_[$]))&&h(b,N))return N;return new m(!1)}D=u(_,B)}for(L=k?_.next:D.next;!(j=r(L,D)).done;){try{N=x(j.value)}catch(T){f(D,"throw",T)}if(typeof N=="object"&&N&&h(b,N))return N}return new m(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,n,s){var o=t("../internals/function-call"),r=t("../internals/an-object"),a=t("../internals/get-method");n.exports=function(l,d,c){var h,u;r(l);try{if(!(h=a(l,"return"))){if(d==="throw")throw c;return c}h=o(h,l)}catch(p){u=!0,h=p}if(d==="throw")throw c;if(u)throw h;return r(h),c}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,n,s){var o=t("../internals/iterators-core").IteratorPrototype,r=t("../internals/object-create"),a=t("../internals/create-property-descriptor"),l=t("../internals/set-to-string-tag"),d=t("../internals/iterators"),c=function(){return this};n.exports=function(h,u,p,f){var g=u+" Iterator";return h.prototype=r(o,{next:a(+!f,p)}),l(h,g,!1,!0),d[g]=c,h}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/function-call"),a=t("../internals/is-pure"),l=t("../internals/function-name"),d=t("../internals/is-callable"),c=t("../internals/iterator-create-constructor"),h=t("../internals/object-get-prototype-of"),u=t("../internals/object-set-prototype-of"),p=t("../internals/set-to-string-tag"),f=t("../internals/create-non-enumerable-property"),g=t("../internals/define-built-in"),m=t("../internals/well-known-symbol"),b=t("../internals/iterators"),_=t("../internals/iterators-core"),w=l.PROPER,E=l.CONFIGURABLE,D=_.IteratorPrototype,B=_.BUGGY_SAFARI_ITERATORS,$=m("iterator"),F=function(){return this};n.exports=function(N,L,j,H,I,k,S){c(j,L,H);var v,y,C,x=function(P){if(P===I&&K)return K;if(!B&&P&&P in V)return V[P];switch(P){case"keys":case"values":case"entries":return function(){return new j(this,P)}}return function(){return new j(this)}},T=L+" Iterator",M=!1,V=N.prototype,W=V[$]||V["@@iterator"]||I&&V[I],K=!B&&W||x(I),Z=L==="Array"&&V.entries||W;if(Z&&(v=h(Z.call(new N)))!==Object.prototype&&v.next&&(a||h(v)===D||(u?u(v,D):d(v[$])||g(v,$,F)),p(v,T,!0,!0),a&&(b[T]=F)),w&&I==="values"&&W&&W.name!=="values"&&(!a&&E?f(V,"name","values"):(M=!0,K=function(){return r(W,this)})),I)if(y={values:x("values"),keys:k?K:x("keys"),entries:x("entries")},S)for(C in y)(B||M||!(C in V))&&g(V,C,y[C]);else o({target:L,proto:!0,forced:B||M},y);return a&&!S||V[$]===K||g(V,$,K,{name:I}),b[L]=K,y}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,n,s){var o,r,a,l=t("../internals/fails"),d=t("../internals/is-callable"),c=t("../internals/is-object"),h=t("../internals/object-create"),u=t("../internals/object-get-prototype-of"),p=t("../internals/define-built-in"),f=t("../internals/well-known-symbol"),g=t("../internals/is-pure"),m=f("iterator"),b=!1;[].keys&&("next"in(a=[].keys())?(r=u(u(a)))!==Object.prototype&&(o=r):b=!0),!c(o)||l(function(){var _={};return o[m].call(_)!==_})?o={}:g&&(o=h(o)),d(o[m])||p(o,m,function(){return this}),n.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:b}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,n,s){arguments[4][276][0].apply(s,arguments)},{dup:276}],299:[function(t,n,s){var o=t("../internals/to-length");n.exports=function(r){return o(r.length)}},{"../internals/to-length":343}],300:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/fails"),a=t("../internals/is-callable"),l=t("../internals/has-own-property"),d=t("../internals/descriptors"),c=t("../internals/function-name").CONFIGURABLE,h=t("../internals/inspect-source"),u=t("../internals/internal-state"),p=u.enforce,f=u.get,g=String,m=Object.defineProperty,b=o("".slice),_=o("".replace),w=o([].join),E=d&&!r(function(){return m(function(){},"length",{value:8}).length!==8}),D=String(String).split("String"),B=n.exports=function($,F,N){b(g(F),0,7)==="Symbol("&&(F="["+_(g(F),/^Symbol\(([^)]*)\)/,"$1")+"]"),N&&N.getter&&(F="get "+F),N&&N.setter&&(F="set "+F),(!l($,"name")||c&&$.name!==F)&&(d?m($,"name",{value:F,configurable:!0}):$.name=F),E&&N&&l(N,"arity")&&$.length!==N.arity&&m($,"length",{value:N.arity});try{N&&l(N,"constructor")&&N.constructor?d&&m($,"prototype",{writable:!1}):$.prototype&&($.prototype=void 0)}catch{}var L=p($);return l(L,"source")||(L.source=w(D,typeof F=="string"?F:"")),$};Function.prototype.toString=B(function(){return a(this)&&f(this).source||h(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,n,s){var o=Math.ceil,r=Math.floor;n.exports=Math.trunc||function(a){var l=+a;return(l>0?r:o)(l)}},{}],302:[function(t,n,s){var o,r,a,l,d,c=t("../internals/global"),h=t("../internals/function-bind-context"),u=t("../internals/object-get-own-property-descriptor").f,p=t("../internals/task").set,f=t("../internals/queue"),g=t("../internals/engine-is-ios"),m=t("../internals/engine-is-ios-pebble"),b=t("../internals/engine-is-webos-webkit"),_=t("../internals/engine-is-node"),w=c.MutationObserver||c.WebKitMutationObserver,E=c.document,D=c.process,B=c.Promise,$=u(c,"queueMicrotask"),F=$&&$.value;if(!F){var N=new f,L=function(){var j,H;for(_&&(j=D.domain)&&j.exit();H=N.get();)try{H()}catch(I){throw N.head&&o(),I}j&&j.enter()};g||_||b||!w||!E?!m&&B&&B.resolve?((l=B.resolve(void 0)).constructor=B,d=h(l.then,l),o=function(){d(L)}):_?o=function(){D.nextTick(L)}:(p=h(p,c),o=function(){p(L)}):(r=!0,a=E.createTextNode(""),new w(L).observe(a,{characterData:!0}),o=function(){a.data=r=!r}),F=function(j){N.head||o(),N.add(j)}}n.exports=F},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,n,s){var o=t("../internals/a-callable"),r=TypeError,a=function(l){var d,c;this.promise=new l(function(h,u){if(d!==void 0||c!==void 0)throw new r("Bad Promise constructor");d=h,c=u}),this.resolve=o(d),this.reject=o(c)};n.exports.f=function(l){return new a(l)}},{"../internals/a-callable":222}],304:[function(t,n,s){var o=t("../internals/is-regexp"),r=TypeError;n.exports=function(a){if(o(a))throw new r("The method doesn't accept regular expressions");return a}},{"../internals/is-regexp":291}],305:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/function-uncurry-this"),a=t("../internals/function-call"),l=t("../internals/fails"),d=t("../internals/object-keys"),c=t("../internals/object-get-own-property-symbols"),h=t("../internals/object-property-is-enumerable"),u=t("../internals/to-object"),p=t("../internals/indexed-object"),f=Object.assign,g=Object.defineProperty,m=r([].concat);n.exports=!f||l(function(){if(o&&f({b:1},f(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var b={},_={},w=Symbol("assign detection");return b[w]=7,"abcdefghijklmnopqrst".split("").forEach(function(E){_[E]=E}),f({},b)[w]!==7||d(f({},_)).join("")!=="abcdefghijklmnopqrst"})?function(b,_){for(var w=u(b),E=arguments.length,D=1,B=c.f,$=h.f;E>D;)for(var F,N=p(arguments[D++]),L=B?m(d(N),B(N)):d(N),j=L.length,H=0;j>H;)F=L[H++],o&&!a($,N,F)||(w[F]=N[F]);return w}:f},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,n,s){var o,r=t("../internals/an-object"),a=t("../internals/object-define-properties"),l=t("../internals/enum-bug-keys"),d=t("../internals/hidden-keys"),c=t("../internals/html"),h=t("../internals/document-create-element"),u=t("../internals/shared-key"),p=u("IE_PROTO"),f=function(){},g=function(_){return"<script>"+_+"<\/script>"},m=function(_){_.write(g("")),_.close();var w=_.parentWindow.Object;return _=null,w},b=function(){try{o=new ActiveXObject("htmlfile")}catch{}var _,w;b=typeof document<"u"?document.domain&&o?m(o):((w=h("iframe")).style.display="none",c.appendChild(w),w.src="javascript:",(_=w.contentWindow.document).open(),_.write(g("document.F=Object")),_.close(),_.F):m(o);for(var E=l.length;E--;)delete b.prototype[l[E]];return b()};d[p]=!0,n.exports=Object.create||function(_,w){var E;return _!==null?(f.prototype=r(_),E=new f,f.prototype=null,E[p]=_):E=b(),w===void 0?E:a.f(E,w)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/v8-prototype-define-bug"),a=t("../internals/object-define-property"),l=t("../internals/an-object"),d=t("../internals/to-indexed-object"),c=t("../internals/object-keys");s.f=o&&!r?Object.defineProperties:function(h,u){l(h);for(var p,f=d(u),g=c(u),m=g.length,b=0;m>b;)a.f(h,p=g[b++],f[p]);return h}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/ie8-dom-define"),a=t("../internals/v8-prototype-define-bug"),l=t("../internals/an-object"),d=t("../internals/to-property-key"),c=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor;s.f=o?a?function(p,f,g){if(l(p),f=d(f),l(g),typeof p=="function"&&f==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var m=u(p,f);m&&m.writable&&(p[f]=g.value,g={configurable:"configurable"in g?g.configurable:m.configurable,enumerable:"enumerable"in g?g.enumerable:m.enumerable,writable:!1})}return h(p,f,g)}:h:function(p,f,g){if(l(p),f=d(f),l(g),r)try{return h(p,f,g)}catch{}if("get"in g||"set"in g)throw new c("Accessors not supported");return"value"in g&&(p[f]=g.value),p}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/function-call"),a=t("../internals/object-property-is-enumerable"),l=t("../internals/create-property-descriptor"),d=t("../internals/to-indexed-object"),c=t("../internals/to-property-key"),h=t("../internals/has-own-property"),u=t("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;s.f=o?p:function(f,g){if(f=d(f),g=c(g),u)try{return p(f,g)}catch{}if(h(f,g))return l(!r(a.f,f,g),f[g])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,n,s){var o=t("../internals/classof-raw"),r=t("../internals/to-indexed-object"),a=t("../internals/object-get-own-property-names").f,l=t("../internals/array-slice-simple"),d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(c){return d&&o(c)==="Window"?function(h){try{return a(h)}catch{return l(d)}}(c):a(r(c))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,n,s){var o=t("../internals/object-keys-internal"),r=t("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(a){return o(a,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,n,s){s.f=Object.getOwnPropertySymbols},{}],313:[function(t,n,s){var o=t("../internals/has-own-property"),r=t("../internals/is-callable"),a=t("../internals/to-object"),l=t("../internals/shared-key"),d=t("../internals/correct-prototype-getter"),c=l("IE_PROTO"),h=Object,u=h.prototype;n.exports=d?h.getPrototypeOf:function(p){var f=a(p);if(o(f,c))return f[c];var g=f.constructor;return r(g)&&f instanceof g?g.prototype:f instanceof h?u:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,n,s){var o=t("../internals/function-uncurry-this");n.exports=o({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=t("../internals/has-own-property"),a=t("../internals/to-indexed-object"),l=t("../internals/array-includes").indexOf,d=t("../internals/hidden-keys"),c=o([].push);n.exports=function(h,u){var p,f=a(h),g=0,m=[];for(p in f)!r(d,p)&&r(f,p)&&c(m,p);for(;u.length>g;)r(f,p=u[g++])&&(~l(m,p)||c(m,p));return m}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,n,s){var o=t("../internals/object-keys-internal"),r=t("../internals/enum-bug-keys");n.exports=Object.keys||function(a){return o(a,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,n,s){var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!o.call({1:2},1);s.f=a?function(l){var d=r(this,l);return!!d&&d.enumerable}:o},{}],318:[function(t,n,s){var o=t("../internals/function-uncurry-this-accessor"),r=t("../internals/an-object"),a=t("../internals/a-possible-prototype");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,d=!1,c={};try{(l=o(Object.prototype,"__proto__","set"))(c,[]),d=c instanceof Array}catch{}return function(h,u){return r(h),a(u),d?l(h,u):h.__proto__=u,h}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/fails"),a=t("../internals/function-uncurry-this"),l=t("../internals/object-get-prototype-of"),d=t("../internals/object-keys"),c=t("../internals/to-indexed-object"),h=a(t("../internals/object-property-is-enumerable").f),u=a([].push),p=o&&r(function(){var g=Object.create(null);return g[2]=2,!h(g,2)}),f=function(g){return function(m){for(var b,_=c(m),w=d(_),E=p&&l(_)===null,D=w.length,B=0,$=[];D>B;)b=w[B++],o&&!(E?b in _:h(_,b))||u($,g?[b,_[b]]:_[b]);return $}};n.exports={entries:f(!0),values:f(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,n,s){var o=t("../internals/function-call"),r=t("../internals/is-callable"),a=t("../internals/is-object"),l=TypeError;n.exports=function(d,c){var h,u;if(c==="string"&&r(h=d.toString)&&!a(u=o(h,d))||r(h=d.valueOf)&&!a(u=o(h,d))||c!=="string"&&r(h=d.toString)&&!a(u=o(h,d)))return u;throw new l("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,n,s){var o=t("../internals/get-built-in"),r=t("../internals/function-uncurry-this"),a=t("../internals/object-get-own-property-names"),l=t("../internals/object-get-own-property-symbols"),d=t("../internals/an-object"),c=r([].concat);n.exports=o("Reflect","ownKeys")||function(h){var u=a.f(d(h)),p=l.f;return p?c(u,p(h)):u}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,n,s){var o=t("../internals/global");n.exports=o},{"../internals/global":274}],323:[function(t,n,s){n.exports=function(o){try{return{error:!1,value:o()}}catch(r){return{error:!0,value:r}}}},{}],324:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/promise-native-constructor"),a=t("../internals/is-callable"),l=t("../internals/is-forced"),d=t("../internals/inspect-source"),c=t("../internals/well-known-symbol"),h=t("../internals/engine-is-browser"),u=t("../internals/engine-is-deno"),p=t("../internals/is-pure"),f=t("../internals/engine-v8-version"),g=r&&r.prototype,m=c("species"),b=!1,_=a(o.PromiseRejectionEvent),w=l("Promise",function(){var E=d(r),D=E!==String(r);if(!D&&f===66||p&&(!g.catch||!g.finally))return!0;if(!f||f<51||!/native code/.test(E)){var B=new r(function(F){F(1)}),$=function(F){F(function(){},function(){})};if((B.constructor={})[m]=$,!(b=B.then(function(){})instanceof $))return!0}return!D&&(h||u)&&!_});n.exports={CONSTRUCTOR:w,REJECTION_EVENT:_,SUBCLASSING:b}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,n,s){var o=t("../internals/global");n.exports=o.Promise},{"../internals/global":274}],326:[function(t,n,s){var o=t("../internals/an-object"),r=t("../internals/is-object"),a=t("../internals/new-promise-capability");n.exports=function(l,d){if(o(l),r(d)&&d.constructor===l)return d;var c=a.f(l);return(0,c.resolve)(d),c.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,n,s){var o=t("../internals/promise-native-constructor"),r=t("../internals/check-correctness-of-iteration"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR;n.exports=a||!r(function(l){o.all(l).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,n,s){var o=function(){this.head=null,this.tail=null};o.prototype={add:function(r){var a={item:r,next:null},l=this.tail;l?l.next=a:this.head=a,this.tail=a},get:function(){var r=this.head;if(r)return(this.head=r.next)===null&&(this.tail=null),r.item}},n.exports=o},{}],329:[function(t,n,s){var o=t("../internals/is-null-or-undefined"),r=TypeError;n.exports=function(a){if(o(a))throw new r("Can't call method on "+a);return a}},{"../internals/is-null-or-undefined":288}],330:[function(t,n,s){var o=t("../internals/get-built-in"),r=t("../internals/define-built-in-accessor"),a=t("../internals/well-known-symbol"),l=t("../internals/descriptors"),d=a("species");n.exports=function(c){var h=o(c);l&&h&&!h[d]&&r(h,d,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,n,s){var o=t("../internals/object-define-property").f,r=t("../internals/has-own-property"),a=t("../internals/well-known-symbol")("toStringTag");n.exports=function(l,d,c){l&&!c&&(l=l.prototype),l&&!r(l,a)&&o(l,a,{configurable:!0,value:d})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,n,s){var o=t("../internals/shared"),r=t("../internals/uid"),a=o("keys");n.exports=function(l){return a[l]||(a[l]=r(l))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/define-global-property"),a=o["__core-js_shared__"]||r("__core-js_shared__",{});n.exports=a},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,n,s){var o=t("../internals/is-pure"),r=t("../internals/shared-store");(n.exports=function(a,l){return r[a]||(r[a]=l!==void 0?l:{})})("versions",[]).push({version:"3.33.0",mode:o?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,n,s){var o=t("../internals/an-object"),r=t("../internals/a-constructor"),a=t("../internals/is-null-or-undefined"),l=t("../internals/well-known-symbol")("species");n.exports=function(d,c){var h,u=o(d).constructor;return u===void 0||a(h=o(u)[l])?c:r(h)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,n,s){var o=t("../internals/engine-v8-version"),r=t("../internals/fails"),a=t("../internals/global").String;n.exports=!!Object.getOwnPropertySymbols&&!r(function(){var l=Symbol("symbol detection");return!a(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&o&&o<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,n,s){var o=t("../internals/function-call"),r=t("../internals/get-built-in"),a=t("../internals/well-known-symbol"),l=t("../internals/define-built-in");n.exports=function(){var d=r("Symbol"),c=d&&d.prototype,h=c&&c.valueOf,u=a("toPrimitive");c&&!c[u]&&l(c,u,function(p){return o(h,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,n,s){var o=t("../internals/symbol-constructor-detection");n.exports=o&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,n,s){var o,r,a,l,d=t("../internals/global"),c=t("../internals/function-apply"),h=t("../internals/function-bind-context"),u=t("../internals/is-callable"),p=t("../internals/has-own-property"),f=t("../internals/fails"),g=t("../internals/html"),m=t("../internals/array-slice"),b=t("../internals/document-create-element"),_=t("../internals/validate-arguments-length"),w=t("../internals/engine-is-ios"),E=t("../internals/engine-is-node"),D=d.setImmediate,B=d.clearImmediate,$=d.process,F=d.Dispatch,N=d.Function,L=d.MessageChannel,j=d.String,H=0,I={};f(function(){o=d.location});var k=function(C){if(p(I,C)){var x=I[C];delete I[C],x()}},S=function(C){return function(){k(C)}},v=function(C){k(C.data)},y=function(C){d.postMessage(j(C),o.protocol+"//"+o.host)};D&&B||(D=function(C){_(arguments.length,1);var x=u(C)?C:N(C),T=m(arguments,1);return I[++H]=function(){c(x,void 0,T)},r(H),H},B=function(C){delete I[C]},E?r=function(C){$.nextTick(S(C))}:F&&F.now?r=function(C){F.now(S(C))}:L&&!w?(l=(a=new L).port2,a.port1.onmessage=v,r=h(l.postMessage,l)):d.addEventListener&&u(d.postMessage)&&!d.importScripts&&o&&o.protocol!=="file:"&&!f(y)?(r=y,d.addEventListener("message",v,!1)):r="onreadystatechange"in b("script")?function(C){g.appendChild(b("script")).onreadystatechange=function(){g.removeChild(this),k(C)}}:function(C){setTimeout(S(C),0)}),n.exports={set:D,clear:B}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,n,s){var o=t("../internals/to-integer-or-infinity"),r=Math.max,a=Math.min;n.exports=function(l,d){var c=o(l);return c<0?r(c+d,0):a(c,d)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,n,s){var o=t("../internals/indexed-object"),r=t("../internals/require-object-coercible");n.exports=function(a){return o(r(a))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,n,s){var o=t("../internals/math-trunc");n.exports=function(r){var a=+r;return a!=a||a===0?0:o(a)}},{"../internals/math-trunc":301}],343:[function(t,n,s){var o=t("../internals/to-integer-or-infinity"),r=Math.min;n.exports=function(a){return a>0?r(o(a),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,n,s){var o=t("../internals/require-object-coercible"),r=Object;n.exports=function(a){return r(o(a))}},{"../internals/require-object-coercible":329}],345:[function(t,n,s){var o=t("../internals/function-call"),r=t("../internals/is-object"),a=t("../internals/is-symbol"),l=t("../internals/get-method"),d=t("../internals/ordinary-to-primitive"),c=t("../internals/well-known-symbol"),h=TypeError,u=c("toPrimitive");n.exports=function(p,f){if(!r(p)||a(p))return p;var g,m=l(p,u);if(m){if(f===void 0&&(f="default"),g=o(m,p,f),!r(g)||a(g))return g;throw new h("Can't convert object to primitive value")}return f===void 0&&(f="number"),d(p,f)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,n,s){var o=t("../internals/to-primitive"),r=t("../internals/is-symbol");n.exports=function(a){var l=o(a,"string");return r(l)?l:l+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,n,s){var o={};o[t("../internals/well-known-symbol")("toStringTag")]="z",n.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,n,s){var o=t("../internals/classof"),r=String;n.exports=function(a){if(o(a)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return r(a)}},{"../internals/classof":236}],349:[function(t,n,s){var o=String;n.exports=function(r){try{return o(r)}catch{return"Object"}}},{}],350:[function(t,n,s){var o=t("../internals/function-uncurry-this"),r=0,a=Math.random(),l=o(1 .toString);n.exports=function(d){return"Symbol("+(d===void 0?"":d)+")_"+l(++r+a,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,n,s){var o=t("../internals/symbol-constructor-detection");n.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,n,s){var o=t("../internals/descriptors"),r=t("../internals/fails");n.exports=o&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,n,s){var o=TypeError;n.exports=function(r,a){if(r<a)throw new o("Not enough arguments");return r}},{}],354:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/is-callable"),a=o.WeakMap;n.exports=r(a)&&/native code/.test(String(a))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,n,s){var o=t("../internals/path"),r=t("../internals/has-own-property"),a=t("../internals/well-known-symbol-wrapped"),l=t("../internals/object-define-property").f;n.exports=function(d){var c=o.Symbol||(o.Symbol={});r(c,d)||l(c,d,{value:a.f(d)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,n,s){var o=t("../internals/well-known-symbol");s.f=o},{"../internals/well-known-symbol":357}],357:[function(t,n,s){var o=t("../internals/global"),r=t("../internals/shared"),a=t("../internals/has-own-property"),l=t("../internals/uid"),d=t("../internals/symbol-constructor-detection"),c=t("../internals/use-symbol-as-uid"),h=o.Symbol,u=r("wks"),p=c?h.for||h:h&&h.withoutSetter||l;n.exports=function(f){return a(u,f)||(u[f]=d&&a(h,f)?h[f]:p("Symbol."+f)),u[f]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/array-iteration").findIndex,a=t("../internals/add-to-unscopables"),l=!0;"findIndex"in[]&&Array(1).findIndex(function(){l=!1}),o({target:"Array",proto:!0,forced:l},{findIndex:function(d){return r(this,d,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/array-iteration").find,a=t("../internals/add-to-unscopables"),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),o({target:"Array",proto:!0,forced:l},{find:function(d){return r(this,d,arguments.length>1?arguments[1]:void 0)}}),a("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/array-includes").includes,a=t("../internals/fails"),l=t("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:a(function(){return!Array(1).includes()})},{includes:function(d){return r(this,d,arguments.length>1?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,n,s){var o=t("../internals/to-indexed-object"),r=t("../internals/add-to-unscopables"),a=t("../internals/iterators"),l=t("../internals/internal-state"),d=t("../internals/object-define-property").f,c=t("../internals/iterator-define"),h=t("../internals/create-iter-result-object"),u=t("../internals/is-pure"),p=t("../internals/descriptors"),f=l.set,g=l.getterFor("Array Iterator");n.exports=c(Array,"Array",function(b,_){f(this,{type:"Array Iterator",target:o(b),index:0,kind:_})},function(){var b=g(this),_=b.target,w=b.kind,E=b.index++;if(!_||E>=_.length)return b.target=void 0,h(void 0,!0);switch(w){case"keys":return h(E,!1);case"values":return h(_[E],!1)}return h([E,_[E]],!1)},"values");var m=a.Arguments=a.Array;if(r("keys"),r("values"),r("entries"),!u&&p&&m.name!=="values")try{d(m,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/get-built-in"),a=t("../internals/function-apply"),l=t("../internals/function-call"),d=t("../internals/function-uncurry-this"),c=t("../internals/fails"),h=t("../internals/is-callable"),u=t("../internals/is-symbol"),p=t("../internals/array-slice"),f=t("../internals/get-json-replacer-function"),g=t("../internals/symbol-constructor-detection"),m=String,b=r("JSON","stringify"),_=d(/./.exec),w=d("".charAt),E=d("".charCodeAt),D=d("".replace),B=d(1 .toString),$=/[\uD800-\uDFFF]/g,F=/^[\uD800-\uDBFF]$/,N=/^[\uDC00-\uDFFF]$/,L=!g||c(function(){var k=r("Symbol")("stringify detection");return b([k])!=="[null]"||b({a:k})!=="{}"||b(Object(k))!=="{}"}),j=c(function(){return b("\uDF06\uD834")!=='"\\udf06\\ud834"'||b("\uDEAD")!=='"\\udead"'}),H=function(k,S){var v=p(arguments),y=f(S);if(h(y)||k!==void 0&&!u(k))return v[1]=function(C,x){if(h(y)&&(x=l(y,this,m(C),x)),!u(x))return x},a(b,null,v)},I=function(k,S,v){var y=w(v,S-1),C=w(v,S+1);return _(F,k)&&!_(N,C)||_(N,k)&&!_(F,y)?"\\u"+B(E(k,0),16):k};b&&o({target:"JSON",stat:!0,arity:3,forced:L||j},{stringify:function(k,S,v){var y=p(arguments),C=a(L?H:b,null,y);return j&&typeof C=="string"?D(C,$,I):C}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,n,s){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(o){return o!=o}})},{"../internals/export":259}],364:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/object-assign");o({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/symbol-constructor-detection"),a=t("../internals/fails"),l=t("../internals/object-get-own-property-symbols"),d=t("../internals/to-object");o({target:"Object",stat:!0,forced:!r||a(function(){l.f(1)})},{getOwnPropertySymbols:function(c){var h=l.f;return h?h(d(c)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/to-object"),a=t("../internals/object-keys");o({target:"Object",stat:!0,forced:t("../internals/fails")(function(){a(1)})},{keys:function(l){return a(r(l))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/object-to-array").values;o({target:"Object",stat:!0},{values:function(a){return r(a)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/function-call"),a=t("../internals/a-callable"),l=t("../internals/new-promise-capability"),d=t("../internals/perform"),c=t("../internals/iterate");o({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(h){var u=this,p=l.f(u),f=p.resolve,g=p.reject,m=d(function(){var b=a(u.resolve),_=[],w=0,E=1;c(h,function(D){var B=w++,$=!1;E++,r(b,u,D).then(function(F){$||($=!0,_[B]=F,--E||f(_))},g)}),--E||f(_)});return m.error&&g(m.value),p.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/is-pure"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR,l=t("../internals/promise-native-constructor"),d=t("../internals/get-built-in"),c=t("../internals/is-callable"),h=t("../internals/define-built-in"),u=l&&l.prototype;if(o({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(f){return this.then(void 0,f)}}),!r&&c(l)){var p=d("Promise").prototype.catch;u.catch!==p&&h(u,"catch",p,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,n,s){var o,r,a,l=t("../internals/export"),d=t("../internals/is-pure"),c=t("../internals/engine-is-node"),h=t("../internals/global"),u=t("../internals/function-call"),p=t("../internals/define-built-in"),f=t("../internals/object-set-prototype-of"),g=t("../internals/set-to-string-tag"),m=t("../internals/set-species"),b=t("../internals/a-callable"),_=t("../internals/is-callable"),w=t("../internals/is-object"),E=t("../internals/an-instance"),D=t("../internals/species-constructor"),B=t("../internals/task").set,$=t("../internals/microtask"),F=t("../internals/host-report-errors"),N=t("../internals/perform"),L=t("../internals/queue"),j=t("../internals/internal-state"),H=t("../internals/promise-native-constructor"),I=t("../internals/promise-constructor-detection"),k=t("../internals/new-promise-capability"),S=I.CONSTRUCTOR,v=I.REJECTION_EVENT,y=I.SUBCLASSING,C=j.getterFor("Promise"),x=j.set,T=H&&H.prototype,M=H,V=T,W=h.TypeError,K=h.document,Z=h.process,P=k.f,G=P,O=!!(K&&K.createEvent&&h.dispatchEvent),A=function(se){var pe;return!(!w(se)||!_(pe=se.then))&&pe},z=function(se,pe){var he,me,ye,xe=pe.value,Ie=pe.state===1,Le=Ie?se.ok:se.fail,Ne=se.resolve,Be=se.reject,tt=se.domain;try{Le?(Ie||(pe.rejection===2&&le(pe),pe.rejection=1),Le===!0?he=xe:(tt&&tt.enter(),he=Le(xe),tt&&(tt.exit(),ye=!0)),he===se.promise?Be(new W("Promise-chain cycle")):(me=A(he))?u(me,he,Ne,Be):Ne(he)):Be(xe)}catch(Qe){tt&&!ye&&tt.exit(),Be(Qe)}},X=function(se,pe){se.notified||(se.notified=!0,$(function(){for(var he,me=se.reactions;he=me.get();)z(he,se);se.notified=!1,pe&&!se.rejection&&J(se)}))},ee=function(se,pe,he){var me,ye;O?((me=K.createEvent("Event")).promise=pe,me.reason=he,me.initEvent(se,!1,!0),h.dispatchEvent(me)):me={promise:pe,reason:he},!v&&(ye=h["on"+se])?ye(me):se==="unhandledrejection"&&F("Unhandled promise rejection",he)},J=function(se){u(B,h,function(){var pe,he=se.facade,me=se.value;if(te(se)&&(pe=N(function(){c?Z.emit("unhandledRejection",me,he):ee("unhandledrejection",he,me)}),se.rejection=c||te(se)?2:1,pe.error))throw pe.value})},te=function(se){return se.rejection!==1&&!se.parent},le=function(se){u(B,h,function(){var pe=se.facade;c?Z.emit("rejectionHandled",pe):ee("rejectionhandled",pe,se.value)})},ce=function(se,pe,he){return function(me){se(pe,me,he)}},Q=function(se,pe,he){se.done||(se.done=!0,he&&(se=he),se.value=pe,se.state=2,X(se,!0))},oe=function(se,pe,he){if(!se.done){se.done=!0,he&&(se=he);try{if(se.facade===pe)throw new W("Promise can't be resolved itself");var me=A(pe);me?$(function(){var ye={done:!1};try{u(me,pe,ce(oe,ye,se),ce(Q,ye,se))}catch(xe){Q(ye,xe,se)}}):(se.value=pe,se.state=1,X(se,!1))}catch(ye){Q({done:!1},ye,se)}}};if(S&&(V=(M=function(se){E(this,V),b(se),u(o,this);var pe=C(this);try{se(ce(oe,pe),ce(Q,pe))}catch(he){Q(pe,he)}}).prototype,(o=function(se){x(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new L,rejection:!1,state:0,value:void 0})}).prototype=p(V,"then",function(se,pe){var he=C(this),me=P(D(this,M));return he.parent=!0,me.ok=!_(se)||se,me.fail=_(pe)&&pe,me.domain=c?Z.domain:void 0,he.state===0?he.reactions.add(me):$(function(){z(me,he)}),me.promise}),r=function(){var se=new o,pe=C(se);this.promise=se,this.resolve=ce(oe,pe),this.reject=ce(Q,pe)},k.f=P=function(se){return se===M||se===void 0?new r(se):G(se)},!d&&_(H)&&T!==Object.prototype)){a=T.then,y||p(T,"then",function(se,pe){var he=this;return new M(function(me,ye){u(a,he,me,ye)}).then(se,pe)},{unsafe:!0});try{delete T.constructor}catch{}f&&f(T,V)}l({global:!0,constructor:!0,wrap:!0,forced:S},{Promise:M}),g(M,"Promise",!1,!0),m("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/is-pure"),a=t("../internals/promise-native-constructor"),l=t("../internals/fails"),d=t("../internals/get-built-in"),c=t("../internals/is-callable"),h=t("../internals/species-constructor"),u=t("../internals/promise-resolve"),p=t("../internals/define-built-in"),f=a&&a.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!a&&l(function(){f.finally.call({then:function(){}},function(){})})},{finally:function(m){var b=h(this,d("Promise")),_=c(m);return this.then(_?function(w){return u(b,m()).then(function(){return w})}:m,_?function(w){return u(b,m()).then(function(){throw w})}:m)}}),!r&&c(a)){var g=d("Promise").prototype.finally;f.finally!==g&&p(f,"finally",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,n,s){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/function-call"),a=t("../internals/a-callable"),l=t("../internals/new-promise-capability"),d=t("../internals/perform"),c=t("../internals/iterate");o({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(h){var u=this,p=l.f(u),f=p.reject,g=d(function(){var m=a(u.resolve);c(h,function(b){r(m,u,b).then(p.resolve,f)})});return g.error&&f(g.value),p.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/function-call"),a=t("../internals/new-promise-capability");o({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(l){var d=a.f(this);return r(d.reject,void 0,l),d.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/get-built-in"),a=t("../internals/is-pure"),l=t("../internals/promise-native-constructor"),d=t("../internals/promise-constructor-detection").CONSTRUCTOR,c=t("../internals/promise-resolve"),h=r("Promise"),u=a&&!d;o({target:"Promise",stat:!0,forced:a||d},{resolve:function(p){return c(u&&this===h?l:this,p)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/function-uncurry-this"),a=t("../internals/to-absolute-index"),l=RangeError,d=String.fromCharCode,c=String.fromCodePoint,h=r([].join);o({target:"String",stat:!0,arity:1,forced:!!c&&c.length!==1},{fromCodePoint:function(u){for(var p,f=[],g=arguments.length,m=0;g>m;){if(p=+arguments[m++],a(p,1114111)!==p)throw new l(p+" is not a valid code point");f[m]=p<65536?d(p):d(55296+((p-=65536)>>10),p%1024+56320)}return h(f,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/function-uncurry-this"),a=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible"),d=t("../internals/to-string"),c=t("../internals/correct-is-regexp-logic"),h=r("".indexOf);o({target:"String",proto:!0,forced:!c("includes")},{includes:function(u){return!!~h(d(l(this)),d(a(u)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,n,s){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/global"),a=t("../internals/function-call"),l=t("../internals/function-uncurry-this"),d=t("../internals/is-pure"),c=t("../internals/descriptors"),h=t("../internals/symbol-constructor-detection"),u=t("../internals/fails"),p=t("../internals/has-own-property"),f=t("../internals/object-is-prototype-of"),g=t("../internals/an-object"),m=t("../internals/to-indexed-object"),b=t("../internals/to-property-key"),_=t("../internals/to-string"),w=t("../internals/create-property-descriptor"),E=t("../internals/object-create"),D=t("../internals/object-keys"),B=t("../internals/object-get-own-property-names"),$=t("../internals/object-get-own-property-names-external"),F=t("../internals/object-get-own-property-symbols"),N=t("../internals/object-get-own-property-descriptor"),L=t("../internals/object-define-property"),j=t("../internals/object-define-properties"),H=t("../internals/object-property-is-enumerable"),I=t("../internals/define-built-in"),k=t("../internals/define-built-in-accessor"),S=t("../internals/shared"),v=t("../internals/shared-key"),y=t("../internals/hidden-keys"),C=t("../internals/uid"),x=t("../internals/well-known-symbol"),T=t("../internals/well-known-symbol-wrapped"),M=t("../internals/well-known-symbol-define"),V=t("../internals/symbol-define-to-primitive"),W=t("../internals/set-to-string-tag"),K=t("../internals/internal-state"),Z=t("../internals/array-iteration").forEach,P=v("hidden"),G=K.set,O=K.getterFor("Symbol"),A=Object.prototype,z=r.Symbol,X=z&&z.prototype,ee=r.RangeError,J=r.TypeError,te=r.QObject,le=N.f,ce=L.f,Q=$.f,oe=H.f,se=l([].push),pe=S("symbols"),he=S("op-symbols"),me=S("wks"),ye=!te||!te.prototype||!te.prototype.findChild,xe=function($e,ke,je){var Xe=le(A,ke);Xe&&delete A[ke],ce($e,ke,je),Xe&&$e!==A&&ce(A,ke,Xe)},Ie=c&&u(function(){return E(ce({},"a",{get:function(){return ce(this,"a",{value:7}).a}})).a!==7})?xe:ce,Le=function($e,ke){var je=pe[$e]=E(X);return G(je,{type:"Symbol",tag:$e,description:ke}),c||(je.description=ke),je},Ne=function($e,ke,je){$e===A&&Ne(he,ke,je),g($e);var Xe=b(ke);return g(je),p(pe,Xe)?(je.enumerable?(p($e,P)&&$e[P][Xe]&&($e[P][Xe]=!1),je=E(je,{enumerable:w(0,!1)})):(p($e,P)||ce($e,P,w(1,{})),$e[P][Xe]=!0),Ie($e,Xe,je)):ce($e,Xe,je)},Be=function($e,ke){g($e);var je=m(ke),Xe=D(je).concat(nt(je));return Z(Xe,function(Ue){c&&!a(tt,je,Ue)||Ne($e,Ue,je[Ue])}),$e},tt=function($e){var ke=b($e),je=a(oe,this,ke);return!(this===A&&p(pe,ke)&&!p(he,ke))&&(!(je||!p(this,ke)||!p(pe,ke)||p(this,P)&&this[P][ke])||je)},Qe=function($e,ke){var je=m($e),Xe=b(ke);if(je!==A||!p(pe,Xe)||p(he,Xe)){var Ue=le(je,Xe);return!Ue||!p(pe,Xe)||p(je,P)&&je[P][Xe]||(Ue.enumerable=!0),Ue}},et=function($e){var ke=Q(m($e)),je=[];return Z(ke,function(Xe){p(pe,Xe)||p(y,Xe)||se(je,Xe)}),je},nt=function($e){var ke=$e===A,je=Q(ke?he:m($e)),Xe=[];return Z(je,function(Ue){!p(pe,Ue)||ke&&!p(A,Ue)||se(Xe,pe[Ue])}),Xe};h||(I(X=(z=function(){if(f(X,this))throw new J("Symbol is not a constructor");var $e=arguments.length&&arguments[0]!==void 0?_(arguments[0]):void 0,ke=C($e),je=function(Xe){this===A&&a(je,he,Xe),p(this,P)&&p(this[P],ke)&&(this[P][ke]=!1);var Ue=w(1,Xe);try{Ie(this,ke,Ue)}catch(Bt){if(!(Bt instanceof ee))throw Bt;xe(this,ke,Ue)}};return c&&ye&&Ie(A,ke,{configurable:!0,set:je}),Le(ke,$e)}).prototype,"toString",function(){return O(this).tag}),I(z,"withoutSetter",function($e){return Le(C($e),$e)}),H.f=tt,L.f=Ne,j.f=Be,N.f=Qe,B.f=$.f=et,F.f=nt,T.f=function($e){return Le(x($e),$e)},c&&(k(X,"description",{configurable:!0,get:function(){return O(this).description}}),d||I(A,"propertyIsEnumerable",tt,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:z}),Z(D(me),function($e){M($e)}),o({target:"Symbol",stat:!0,forced:!h},{useSetter:function(){ye=!0},useSimple:function(){ye=!1}}),o({target:"Object",stat:!0,forced:!h,sham:!c},{create:function($e,ke){return ke===void 0?E($e):Be(E($e),ke)},defineProperty:Ne,defineProperties:Be,getOwnPropertyDescriptor:Qe}),o({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:et}),V(),W(z,"Symbol"),y[P]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/get-built-in"),a=t("../internals/has-own-property"),l=t("../internals/to-string"),d=t("../internals/shared"),c=t("../internals/symbol-registry-detection"),h=d("string-to-symbol-registry"),u=d("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!c},{for:function(p){var f=l(p);if(a(h,f))return h[f];var g=r("Symbol")(f);return h[f]=g,u[g]=f,g}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,n,s){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,n,s){var o=t("../internals/export"),r=t("../internals/has-own-property"),a=t("../internals/is-symbol"),l=t("../internals/try-to-string"),d=t("../internals/shared"),c=t("../internals/symbol-registry-detection"),h=d("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!c},{keyFor:function(u){if(!a(u))throw new TypeError(l(u)+" is not a symbol");if(r(h,u))return h[u]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,n,s){function o(r){return Object.prototype.toString.call(r)}s.isArray=function(r){return Array.isArray?Array.isArray(r):o(r)==="[object Array]"},s.isBoolean=function(r){return typeof r=="boolean"},s.isNull=function(r){return r===null},s.isNullOrUndefined=function(r){return r==null},s.isNumber=function(r){return typeof r=="number"},s.isString=function(r){return typeof r=="string"},s.isSymbol=function(r){return typeof r=="symbol"},s.isUndefined=function(r){return r===void 0},s.isRegExp=function(r){return o(r)==="[object RegExp]"},s.isObject=function(r){return typeof r=="object"&&r!==null},s.isDate=function(r){return o(r)==="[object Date]"},s.isError=function(r){return o(r)==="[object Error]"||r instanceof Error},s.isFunction=function(r){return typeof r=="function"},s.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},s.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,n,s){(function(o){(function(){var r=t("elliptic"),a=t("bn.js");n.exports=function(h){return new d(h)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function d(h){this.curveType=l[h],this.curveType||(this.curveType={name:h}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function c(h,u,p){Array.isArray(h)||(h=h.toArray());var f=new o(h);if(p&&f.length<p){var g=new o(p-f.length);g.fill(0),f=o.concat([g,f])}return u?f.toString(u):f}l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,d.prototype.generateKeys=function(h,u){return this.keys=this.curve.genKeyPair(),this.getPublicKey(h,u)},d.prototype.computeSecret=function(h,u,p){return u=u||"utf8",o.isBuffer(h)||(h=new o(h,u)),c(this.curve.keyFromPublic(h).getPublic().mul(this.keys.getPrivate()).getX(),p,this.curveType.byteLength)},d.prototype.getPublicKey=function(h,u){var p=this.keys.getPublic(u==="compressed",!0);return u==="hybrid"&&(p[p.length-1]%2?p[0]=7:p[0]=6),c(p,h)},d.prototype.getPrivateKey=function(h){return c(this.keys.getPrivate(),h)},d.prototype.setPublicKey=function(h,u){return u=u||"utf8",o.isBuffer(h)||(h=new o(h,u)),this.keys._importPublic(h),this},d.prototype.setPrivateKey=function(h,u){u=u||"utf8",o.isBuffer(h)||(h=new o(h,u));var p=new a(h);return p=p.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(p),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,n,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],386:[function(t,n,s){var o=t("inherits"),r=t("md5.js"),a=t("ripemd160"),l=t("sha.js"),d=t("cipher-base");function c(h){d.call(this,"digest"),this._hash=h}o(c,d),c.prototype._update=function(h){this._hash.update(h)},c.prototype._final=function(){return this._hash.digest()},n.exports=function(h){return(h=h.toLowerCase())==="md5"?new r:h==="rmd160"||h==="ripemd160"?new a:new c(l(h))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,n,s){var o=t("md5.js");n.exports=function(r){return new o().update(r).digest()}},{"md5.js":450}],388:[function(t,n,s){var o=t("inherits"),r=t("./legacy"),a=t("cipher-base"),l=t("safe-buffer").Buffer,d=t("create-hash/md5"),c=t("ripemd160"),h=t("sha.js"),u=l.alloc(128);function p(f,g){a.call(this,"digest"),typeof g=="string"&&(g=l.from(g));var m=f==="sha512"||f==="sha384"?128:64;this._alg=f,this._key=g,g.length>m?g=(f==="rmd160"?new c:h(f)).update(g).digest():g.length<m&&(g=l.concat([g,u],m));for(var b=this._ipad=l.allocUnsafe(m),_=this._opad=l.allocUnsafe(m),w=0;w<m;w++)b[w]=54^g[w],_[w]=92^g[w];this._hash=f==="rmd160"?new c:h(f),this._hash.update(b)}o(p,a),p.prototype._update=function(f){this._hash.update(f)},p.prototype._final=function(){var f=this._hash.digest();return(this._alg==="rmd160"?new c:h(this._alg)).update(this._opad).update(f).digest()},n.exports=function(f,g){return(f=f.toLowerCase())==="rmd160"||f==="ripemd160"?new p("rmd160",g):f==="md5"?new r(d,g):new p(f,g)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,n,s){var o=t("inherits"),r=t("safe-buffer").Buffer,a=t("cipher-base"),l=r.alloc(128);function d(c,h){a.call(this,"digest"),typeof h=="string"&&(h=r.from(h)),this._alg=c,this._key=h,h.length>64?h=c(h):h.length<64&&(h=r.concat([h,l],64));for(var u=this._ipad=r.allocUnsafe(64),p=this._opad=r.allocUnsafe(64),f=0;f<64;f++)u[f]=54^h[f],p[f]=92^h[f];this._hash=[u]}o(d,a),d.prototype._update=function(c){this._hash.push(c)},d.prototype._final=function(){var c=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,c]))},n.exports=d},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,n,s){s.randomBytes=s.rng=s.pseudoRandomBytes=s.prng=t("randombytes"),s.createHash=s.Hash=t("create-hash"),s.createHmac=s.Hmac=t("create-hmac");var o=t("browserify-sign/algos"),r=Object.keys(o),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);s.getHashes=function(){return a};var l=t("pbkdf2");s.pbkdf2=l.pbkdf2,s.pbkdf2Sync=l.pbkdf2Sync;var d=t("browserify-cipher");s.Cipher=d.Cipher,s.createCipher=d.createCipher,s.Cipheriv=d.Cipheriv,s.createCipheriv=d.createCipheriv,s.Decipher=d.Decipher,s.createDecipher=d.createDecipher,s.Decipheriv=d.Decipheriv,s.createDecipheriv=d.createDecipheriv,s.getCiphers=d.getCiphers,s.listCiphers=d.listCiphers;var c=t("diffie-hellman");s.DiffieHellmanGroup=c.DiffieHellmanGroup,s.createDiffieHellmanGroup=c.createDiffieHellmanGroup,s.getDiffieHellman=c.getDiffieHellman,s.createDiffieHellman=c.createDiffieHellman,s.DiffieHellman=c.DiffieHellman;var h=t("browserify-sign");s.createSign=h.createSign,s.Sign=h.Sign,s.createVerify=h.createVerify,s.Verify=h.Verify,s.createECDH=t("create-ecdh");var u=t("public-encrypt");s.publicEncrypt=u.publicEncrypt,s.privateEncrypt=u.privateEncrypt,s.publicDecrypt=u.publicDecrypt,s.privateDecrypt=u.privateDecrypt;var p=t("randomfill");s.randomFill=p.randomFill,s.randomFillSync=p.randomFillSync,s.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},s.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,n,s){(function(o,r){typeof s=="object"&&n!==void 0?n.exports=r():(o=typeof globalThis<"u"?globalThis:o||self).dayjs=r()})(void 0,function(){var o=6e4,r=36e5,a="millisecond",l="second",d="minute",c="hour",h="day",u="week",p="month",f="quarter",g="year",m="date",b="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(v){var y=["th","st","nd","rd"],C=v%100;return"["+v+(y[(C-20)%10]||y[C]||y[0])+"]"}},D=function(v,y,C){var x=String(v);return!x||x.length>=y?v:""+Array(y+1-x.length).join(C)+v},B={s:D,z:function(v){var y=-v.utcOffset(),C=Math.abs(y),x=Math.floor(C/60),T=C%60;return(y<=0?"+":"-")+D(x,2,"0")+":"+D(T,2,"0")},m:function v(y,C){if(y.date()<C.date())return-v(C,y);var x=12*(C.year()-y.year())+(C.month()-y.month()),T=y.clone().add(x,p),M=C-T<0,V=y.clone().add(x+(M?-1:1),p);return+(-(x+(C-T)/(M?T-V:V-T))||0)},a:function(v){return v<0?Math.ceil(v)||0:Math.floor(v)},p:function(v){return{M:p,y:g,w:u,d:h,D:m,h:c,m:d,s:l,ms:a,Q:f}[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(v){return v===void 0}},$="en",F={};F[$]=E;var N="$isDayjsObject",L=function(v){return v instanceof k||!(!v||!v[N])},j=function v(y,C,x){var T;if(!y)return $;if(typeof y=="string"){var M=y.toLowerCase();F[M]&&(T=M),C&&(F[M]=C,T=M);var V=y.split("-");if(!T&&V.length>1)return v(V[0])}else{var W=y.name;F[W]=y,T=W}return!x&&T&&($=T),T||!x&&$},H=function(v,y){if(L(v))return v.clone();var C=typeof y=="object"?y:{};return C.date=v,C.args=arguments,new k(C)},I=B;I.l=j,I.i=L,I.w=function(v,y){return H(v,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var k=function(){function v(C){this.$L=j(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[N]=!0}var y=v.prototype;return y.parse=function(C){this.$d=function(x){var T=x.date,M=x.utc;if(T===null)return new Date(NaN);if(I.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var V=T.match(_);if(V){var W=V[2]-1||0,K=(V[7]||"0").substring(0,3);return M?new Date(Date.UTC(V[1],W,V[3]||1,V[4]||0,V[5]||0,V[6]||0,K)):new Date(V[1],W,V[3]||1,V[4]||0,V[5]||0,V[6]||0,K)}}return new Date(T)}(C),this.init()},y.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},y.$utils=function(){return I},y.isValid=function(){return this.$d.toString()!==b},y.isSame=function(C,x){var T=H(C);return this.startOf(x)<=T&&T<=this.endOf(x)},y.isAfter=function(C,x){return H(C)<this.startOf(x)},y.isBefore=function(C,x){return this.endOf(x)<H(C)},y.$g=function(C,x,T){return I.u(C)?this[x]:this.set(T,C)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(C,x){var T=this,M=!!I.u(x)||x,V=I.p(C),W=function(X,ee){var J=I.w(T.$u?Date.UTC(T.$y,ee,X):new Date(T.$y,ee,X),T);return M?J:J.endOf(h)},K=function(X,ee){return I.w(T.toDate()[X].apply(T.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(ee)),T)},Z=this.$W,P=this.$M,G=this.$D,O="set"+(this.$u?"UTC":"");switch(V){case g:return M?W(1,0):W(31,11);case p:return M?W(1,P):W(0,P+1);case u:var A=this.$locale().weekStart||0,z=(Z<A?Z+7:Z)-A;return W(M?G-z:G+(6-z),P);case h:case m:return K(O+"Hours",0);case c:return K(O+"Minutes",1);case d:return K(O+"Seconds",2);case l:return K(O+"Milliseconds",3);default:return this.clone()}},y.endOf=function(C){return this.startOf(C,!1)},y.$set=function(C,x){var T,M=I.p(C),V="set"+(this.$u?"UTC":""),W=(T={},T[h]=V+"Date",T[m]=V+"Date",T[p]=V+"Month",T[g]=V+"FullYear",T[c]=V+"Hours",T[d]=V+"Minutes",T[l]=V+"Seconds",T[a]=V+"Milliseconds",T)[M],K=M===h?this.$D+(x-this.$W):x;if(M===p||M===g){var Z=this.clone().set(m,1);Z.$d[W](K),Z.init(),this.$d=Z.set(m,Math.min(this.$D,Z.daysInMonth())).$d}else W&&this.$d[W](K);return this.init(),this},y.set=function(C,x){return this.clone().$set(C,x)},y.get=function(C){return this[I.p(C)]()},y.add=function(C,x){var T,M=this;C=Number(C);var V=I.p(x),W=function(P){var G=H(M);return I.w(G.date(G.date()+Math.round(P*C)),M)};if(V===p)return this.set(p,this.$M+C);if(V===g)return this.set(g,this.$y+C);if(V===h)return W(1);if(V===u)return W(7);var K=(T={},T[d]=o,T[c]=r,T[l]=1e3,T)[V]||1,Z=this.$d.getTime()+C*K;return I.w(Z,this)},y.subtract=function(C,x){return this.add(-1*C,x)},y.format=function(C){var x=this,T=this.$locale();if(!this.isValid())return T.invalidDate||b;var M=C||"YYYY-MM-DDTHH:mm:ssZ",V=I.z(this),W=this.$H,K=this.$m,Z=this.$M,P=T.weekdays,G=T.months,O=T.meridiem,A=function(ee,J,te,le){return ee&&(ee[J]||ee(x,M))||te[J].slice(0,le)},z=function(ee){return I.s(W%12||12,ee,"0")},X=O||function(ee,J,te){var le=ee<12?"AM":"PM";return te?le.toLowerCase():le};return M.replace(w,function(ee,J){return J||function(te){switch(te){case"YY":return String(x.$y).slice(-2);case"YYYY":return I.s(x.$y,4,"0");case"M":return Z+1;case"MM":return I.s(Z+1,2,"0");case"MMM":return A(T.monthsShort,Z,G,3);case"MMMM":return A(G,Z);case"D":return x.$D;case"DD":return I.s(x.$D,2,"0");case"d":return String(x.$W);case"dd":return A(T.weekdaysMin,x.$W,P,2);case"ddd":return A(T.weekdaysShort,x.$W,P,3);case"dddd":return P[x.$W];case"H":return String(W);case"HH":return I.s(W,2,"0");case"h":return z(1);case"hh":return z(2);case"a":return X(W,K,!0);case"A":return X(W,K,!1);case"m":return String(K);case"mm":return I.s(K,2,"0");case"s":return String(x.$s);case"ss":return I.s(x.$s,2,"0");case"SSS":return I.s(x.$ms,3,"0");case"Z":return V}return null}(ee)||V.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(C,x,T){var M,V=this,W=I.p(x),K=H(C),Z=(K.utcOffset()-this.utcOffset())*o,P=this-K,G=function(){return I.m(V,K)};switch(W){case g:M=G()/12;break;case p:M=G();break;case f:M=G()/3;break;case u:M=(P-Z)/6048e5;break;case h:M=(P-Z)/864e5;break;case c:M=P/r;break;case d:M=P/o;break;case l:M=P/1e3;break;default:M=P}return T?M:I.a(M)},y.daysInMonth=function(){return this.endOf(p).$D},y.$locale=function(){return F[this.$L]},y.locale=function(C,x){if(!C)return this.$L;var T=this.clone(),M=j(C,x,!0);return M&&(T.$L=M),T},y.clone=function(){return I.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),S=k.prototype;return H.prototype=S,[["$ms",a],["$s",l],["$m",d],["$H",c],["$W",h],["$M",p],["$y",g],["$D",m]].forEach(function(v){S[v[1]]=function(y){return this.$g(y,v[0],v[1])}}),H.extend=function(v,y){return v.$i||(v(y,k,H),v.$i=!0),H},H.locale=j,H.isDayjs=L,H.unix=function(v){return H(1e3*v)},H.en=F[$],H.Ls=F,H.p={},H})},{}],392:[function(t,n,s){(function(o,r){typeof s=="object"&&n!==void 0?n.exports=r():(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_customParseFormat=r()})(void 0,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,l=/\d\d?/,d=/\d*[^-_:/,()\s\d]+/,c={},h=function(_){return(_=+_)+(_>68?1900:2e3)},u=function(_){return function(w){this[_]=+w}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(_){(this.zone||(this.zone={})).offset=function(w){if(!w||w==="Z")return 0;var E=w.match(/([+-]|\d\d)/g),D=60*E[1]+(+E[2]||0);return D===0?0:E[0]==="+"?-D:D}(_)}],f=function(_){var w=c[_];return w&&(w.indexOf?w:w.s.concat(w.f))},g=function(_,w){var E,D=c.meridiem;if(D){for(var B=1;B<=24;B+=1)if(_.indexOf(D(B,0,w))>-1){E=B>12;break}}else E=_===(w?"pm":"PM");return E},m={A:[d,function(_){this.afternoon=g(_,!1)}],a:[d,function(_){this.afternoon=g(_,!0)}],S:[/\d/,function(_){this.milliseconds=100*+_}],SS:[a,function(_){this.milliseconds=10*+_}],SSS:[/\d{3}/,function(_){this.milliseconds=+_}],s:[l,u("seconds")],ss:[l,u("seconds")],m:[l,u("minutes")],mm:[l,u("minutes")],H:[l,u("hours")],h:[l,u("hours")],HH:[l,u("hours")],hh:[l,u("hours")],D:[l,u("day")],DD:[a,u("day")],Do:[d,function(_){var w=c.ordinal,E=_.match(/\d+/);if(this.day=E[0],w)for(var D=1;D<=31;D+=1)w(D).replace(/\[|\]/g,"")===_&&(this.day=D)}],M:[l,u("month")],MM:[a,u("month")],MMM:[d,function(_){var w=f("months"),E=(f("monthsShort")||w.map(function(D){return D.slice(0,3)})).indexOf(_)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[d,function(_){var w=f("months").indexOf(_)+1;if(w<1)throw new Error;this.month=w%12||w}],Y:[/[+-]?\d+/,u("year")],YY:[a,function(_){this.year=h(_)}],YYYY:[/\d{4}/,u("year")],Z:p,ZZ:p};function b(_){var w,E;w=_,E=c&&c.formats;for(var D=(_=w.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(H,I,k){var S=k&&k.toUpperCase();return I||E[k]||o[k]||E[S].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,y,C){return y||C.slice(1)})})).match(r),B=D.length,$=0;$<B;$+=1){var F=D[$],N=m[F],L=N&&N[0],j=N&&N[1];D[$]=j?{regex:L,parser:j}:F.replace(/^\[|\]$/g,"")}return function(H){for(var I={},k=0,S=0;k<B;k+=1){var v=D[k];if(typeof v=="string")S+=v.length;else{var y=v.regex,C=v.parser,x=H.slice(S),T=y.exec(x)[0];C.call(I,T),H=H.replace(T,"")}}return function(M){var V=M.afternoon;if(V!==void 0){var W=M.hours;V?W<12&&(M.hours+=12):W===12&&(M.hours=0),delete M.afternoon}}(I),I}}return function(_,w,E){E.p.customParseFormat=!0,_&&_.parseTwoDigitYear&&(h=_.parseTwoDigitYear);var D=w.prototype,B=D.parse;D.parse=function($){var F=$.date,N=$.utc,L=$.args;this.$u=N;var j=L[1];if(typeof j=="string"){var H=L[2]===!0,I=L[3]===!0,k=H||I,S=L[2];I&&(S=L[2]),c=this.$locale(),!H&&S&&(c=E.Ls[S]),this.$d=function(x,T,M){try{if(["x","X"].indexOf(T)>-1)return new Date((T==="X"?1e3:1)*x);var V=b(T)(x),W=V.year,K=V.month,Z=V.day,P=V.hours,G=V.minutes,O=V.seconds,A=V.milliseconds,z=V.zone,X=new Date,ee=Z||(W||K?1:X.getDate()),J=W||X.getFullYear(),te=0;W&&!K||(te=K>0?K-1:X.getMonth());var le=P||0,ce=G||0,Q=O||0,oe=A||0;return z?new Date(Date.UTC(J,te,ee,le,ce,Q,oe+60*z.offset*1e3)):M?new Date(Date.UTC(J,te,ee,le,ce,Q,oe)):new Date(J,te,ee,le,ce,Q,oe)}catch{return new Date("")}}(F,j,N),this.init(),S&&S!==!0&&(this.$L=this.locale(S).$L),k&&F!=this.format(j)&&(this.$d=new Date("")),c={}}else if(j instanceof Array)for(var v=j.length,y=1;y<=v;y+=1){L[1]=j[y-1];var C=E.apply(this,L);if(C.isValid()){this.$d=C.$d,this.$L=C.$L,this.init();break}y===v&&(this.$d=new Date(""))}else B.call(this,$)}}})},{}],393:[function(t,n,s){(function(o,r){typeof s=="object"&&n!==void 0?n.exports=r():(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_utc=r()})(void 0,function(){var o="minute",r=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(l,d,c){var h=d.prototype;c.utc=function(_){var w={date:_,utc:!0,args:arguments};return new d(w)},h.utc=function(_){var w=c(this.toDate(),{locale:this.$L,utc:!0});return _?w.add(this.utcOffset(),o):w},h.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var u=h.parse;h.parse=function(_){_.utc&&(this.$u=!0),this.$utils().u(_.$offset)||(this.$offset=_.$offset),u.call(this,_)};var p=h.init;h.init=function(){if(this.$u){var _=this.$d;this.$y=_.getUTCFullYear(),this.$M=_.getUTCMonth(),this.$D=_.getUTCDate(),this.$W=_.getUTCDay(),this.$H=_.getUTCHours(),this.$m=_.getUTCMinutes(),this.$s=_.getUTCSeconds(),this.$ms=_.getUTCMilliseconds()}else p.call(this)};var f=h.utcOffset;h.utcOffset=function(_,w){var E=this.$utils().u;if(E(_))return this.$u?0:E(this.$offset)?f.call(this):this.$offset;if(typeof _=="string"&&(_=function(F){F===void 0&&(F="");var N=F.match(r);if(!N)return null;var L=(""+N[0]).match(a)||["-",0,0],j=L[0],H=60*+L[1]+ +L[2];return H===0?0:j==="+"?H:-H}(_))===null)return this;var D=Math.abs(_)<=16?60*_:_,B=this;if(w)return B.$offset=D,B.$u=_===0,B;if(_!==0){var $=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(B=this.local().add(D+$,o)).$offset=D,B.$x.$localOffset=$}else B=this.utc();return B};var g=h.format;h.format=function(_){var w=_||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,w)},h.valueOf=function(){var _=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*_},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var m=h.toDate;h.toDate=function(_){return _==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var b=h.diff;h.diff=function(_,w,E){if(_&&this.$u===_.$u)return b.call(this,_,w,E);var D=this.local(),B=c(_).local();return b.call(D,B,w,E)}}})},{}],394:[function(t,n,s){s.utils=t("./des/utils"),s.Cipher=t("./des/cipher"),s.DES=t("./des/des"),s.CBC=t("./des/cbc"),s.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,n,s){var o=t("minimalistic-assert"),r=t("inherits"),a={};function l(d){o.equal(d.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=d[c]}s.instantiate=function(d){function c(f){d.call(this,f),this._cbcInit()}r(c,d);for(var h=Object.keys(a),u=0;u<h.length;u++){var p=h[u];c.prototype[p]=a[p]}return c.create=function(f){return new c(f)},c},a._cbcInit=function(){var d=new l(this.options.iv);this._cbcState=d},a._update=function(d,c,h,u){var p=this._cbcState,f=this.constructor.super_.prototype,g=p.iv;if(this.type==="encrypt"){for(var m=0;m<this.blockSize;m++)g[m]^=d[c+m];for(f._update.call(this,g,0,h,u),m=0;m<this.blockSize;m++)g[m]=h[u+m]}else{for(f._update.call(this,d,c,h,u),m=0;m<this.blockSize;m++)h[u+m]^=g[m];for(m=0;m<this.blockSize;m++)g[m]=d[c+m]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,n,s){var o=t("minimalistic-assert");function r(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}n.exports=r,r.prototype._init=function(){},r.prototype.update=function(a){return a.length===0?[]:this.type==="decrypt"?this._updateDecrypt(a):this._updateEncrypt(a)},r.prototype._buffer=function(a,l){for(var d=Math.min(this.buffer.length-this.bufferOff,a.length-l),c=0;c<d;c++)this.buffer[this.bufferOff+c]=a[l+c];return this.bufferOff+=d,d},r.prototype._flushBuffer=function(a,l){return this._update(this.buffer,0,a,l),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(a){var l=0,d=0,c=(this.bufferOff+a.length)/this.blockSize|0,h=new Array(c*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(a,l),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(h,d)));for(var u=a.length-(a.length-l)%this.blockSize;l<u;l+=this.blockSize)this._update(a,l,h,d),d+=this.blockSize;for(;l<a.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=a[l];return h},r.prototype._updateDecrypt=function(a){for(var l=0,d=0,c=Math.ceil((this.bufferOff+a.length)/this.blockSize)-1,h=new Array(c*this.blockSize);c>0;c--)l+=this._buffer(a,l),d+=this._flushBuffer(h,d);return l+=this._buffer(a,l),h},r.prototype.final=function(a){var l,d;return a&&(l=this.update(a)),d=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),l?l.concat(d):d},r.prototype._pad=function(a,l){if(l===0)return!1;for(;l<a.length;)a[l++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var a=new Array(this.blockSize);return this._update(this.buffer,0,a,0),a},r.prototype._unpad=function(a){return a},r.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var a=new Array(this.blockSize);return this._flushBuffer(a,0),this._unpad(a)}},{"minimalistic-assert":453}],397:[function(t,n,s){var o=t("minimalistic-assert"),r=t("inherits"),a=t("./utils"),l=t("./cipher");function d(){this.tmp=new Array(2),this.keys=null}function c(u){l.call(this,u);var p=new d;this._desState=p,this.deriveKeys(p,u.key)}r(c,l),n.exports=c,c.create=function(u){return new c(u)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(u,p){u.keys=new Array(32),o.equal(p.length,this.blockSize,"Invalid key length");var f=a.readUInt32BE(p,0),g=a.readUInt32BE(p,4);a.pc1(f,g,u.tmp,0),f=u.tmp[0],g=u.tmp[1];for(var m=0;m<u.keys.length;m+=2){var b=h[m>>>1];f=a.r28shl(f,b),g=a.r28shl(g,b),a.pc2(f,g,u.keys,m)}},c.prototype._update=function(u,p,f,g){var m=this._desState,b=a.readUInt32BE(u,p),_=a.readUInt32BE(u,p+4);a.ip(b,_,m.tmp,0),b=m.tmp[0],_=m.tmp[1],this.type==="encrypt"?this._encrypt(m,b,_,m.tmp,0):this._decrypt(m,b,_,m.tmp,0),b=m.tmp[0],_=m.tmp[1],a.writeUInt32BE(f,b,g),a.writeUInt32BE(f,_,g+4)},c.prototype._pad=function(u,p){if(this.padding===!1)return!1;for(var f=u.length-p,g=p;g<u.length;g++)u[g]=f;return!0},c.prototype._unpad=function(u){if(this.padding===!1)return u;for(var p=u[u.length-1],f=u.length-p;f<u.length;f++)o.equal(u[f],p);return u.slice(0,u.length-p)},c.prototype._encrypt=function(u,p,f,g,m){for(var b=p,_=f,w=0;w<u.keys.length;w+=2){var E=u.keys[w],D=u.keys[w+1];a.expand(_,u.tmp,0),E^=u.tmp[0],D^=u.tmp[1];var B=a.substitute(E,D),$=_;_=(b^a.permute(B))>>>0,b=$}a.rip(_,b,g,m)},c.prototype._decrypt=function(u,p,f,g,m){for(var b=f,_=p,w=u.keys.length-2;w>=0;w-=2){var E=u.keys[w],D=u.keys[w+1];a.expand(b,u.tmp,0),E^=u.tmp[0],D^=u.tmp[1];var B=a.substitute(E,D),$=b;b=(_^a.permute(B))>>>0,_=$}a.rip(b,_,g,m)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,n,s){var o=t("minimalistic-assert"),r=t("inherits"),a=t("./cipher"),l=t("./des");function d(h,u){o.equal(u.length,24,"Invalid key length");var p=u.slice(0,8),f=u.slice(8,16),g=u.slice(16,24);this.ciphers=h==="encrypt"?[l.create({type:"encrypt",key:p}),l.create({type:"decrypt",key:f}),l.create({type:"encrypt",key:g})]:[l.create({type:"decrypt",key:g}),l.create({type:"encrypt",key:f}),l.create({type:"decrypt",key:p})]}function c(h){a.call(this,h);var u=new d(this.type,this.options.key);this._edeState=u}r(c,a),n.exports=c,c.create=function(h){return new c(h)},c.prototype._update=function(h,u,p,f){var g=this._edeState;g.ciphers[0]._update(h,u,p,f),g.ciphers[1]._update(p,f,p,f),g.ciphers[2]._update(p,f,p,f)},c.prototype._pad=l.prototype._pad,c.prototype._unpad=l.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,n,s){s.readUInt32BE=function(l,d){return(l[0+d]<<24|l[1+d]<<16|l[2+d]<<8|l[3+d])>>>0},s.writeUInt32BE=function(l,d,c){l[0+c]=d>>>24,l[1+c]=d>>>16&255,l[2+c]=d>>>8&255,l[3+c]=255&d},s.ip=function(l,d,c,h){for(var u=0,p=0,f=6;f>=0;f-=2){for(var g=0;g<=24;g+=8)u<<=1,u|=d>>>g+f&1;for(g=0;g<=24;g+=8)u<<=1,u|=l>>>g+f&1}for(f=6;f>=0;f-=2){for(g=1;g<=25;g+=8)p<<=1,p|=d>>>g+f&1;for(g=1;g<=25;g+=8)p<<=1,p|=l>>>g+f&1}c[h+0]=u>>>0,c[h+1]=p>>>0},s.rip=function(l,d,c,h){for(var u=0,p=0,f=0;f<4;f++)for(var g=24;g>=0;g-=8)u<<=1,u|=d>>>g+f&1,u<<=1,u|=l>>>g+f&1;for(f=4;f<8;f++)for(g=24;g>=0;g-=8)p<<=1,p|=d>>>g+f&1,p<<=1,p|=l>>>g+f&1;c[h+0]=u>>>0,c[h+1]=p>>>0},s.pc1=function(l,d,c,h){for(var u=0,p=0,f=7;f>=5;f--){for(var g=0;g<=24;g+=8)u<<=1,u|=d>>g+f&1;for(g=0;g<=24;g+=8)u<<=1,u|=l>>g+f&1}for(g=0;g<=24;g+=8)u<<=1,u|=d>>g+f&1;for(f=1;f<=3;f++){for(g=0;g<=24;g+=8)p<<=1,p|=d>>g+f&1;for(g=0;g<=24;g+=8)p<<=1,p|=l>>g+f&1}for(g=0;g<=24;g+=8)p<<=1,p|=l>>g+f&1;c[h+0]=u>>>0,c[h+1]=p>>>0},s.r28shl=function(l,d){return l<<d&268435455|l>>>28-d};var o=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];s.pc2=function(l,d,c,h){for(var u=0,p=0,f=o.length>>>1,g=0;g<f;g++)u<<=1,u|=l>>>o[g]&1;for(g=f;g<o.length;g++)p<<=1,p|=d>>>o[g]&1;c[h+0]=u>>>0,c[h+1]=p>>>0},s.expand=function(l,d,c){var h=0,u=0;h=(1&l)<<5|l>>>27;for(var p=23;p>=15;p-=4)h<<=6,h|=l>>>p&63;for(p=11;p>=3;p-=4)u|=l>>>p&63,u<<=6;u|=(31&l)<<1|l>>>31,d[c+0]=h>>>0,d[c+1]=u>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];s.substitute=function(l,d){for(var c=0,h=0;h<4;h++)c<<=4,c|=r[64*h+(l>>>18-6*h&63)];for(h=0;h<4;h++)c<<=4,c|=r[256+64*h+(d>>>18-6*h&63)];return c>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];s.permute=function(l){for(var d=0,c=0;c<a.length;c++)d<<=1,d|=l>>>a[c]&1;return d>>>0},s.padSplit=function(l,d,c){for(var h=l.toString(2);h.length<d;)h="0"+h;for(var u=[],p=0;p<d;p+=c)u.push(h.slice(p,p+c));return u.join(" ")}},{}],400:[function(t,n,s){(function(o){(function(){var r=t("./lib/generatePrime"),a=t("./lib/primes.json"),l=t("./lib/dh"),d={binary:!0,hex:!0,base64:!0};s.DiffieHellmanGroup=s.createDiffieHellmanGroup=s.getDiffieHellman=function(c){var h=new o(a[c].prime,"hex"),u=new o(a[c].gen,"hex");return new l(h,u)},s.createDiffieHellman=s.DiffieHellman=function c(h,u,p,f){return o.isBuffer(u)||d[u]===void 0?c(h,"binary",u,p):(u=u||"binary",f=f||"binary",p=p||new o([2]),o.isBuffer(p)||(p=new o(p,f)),typeof h=="number"?new l(r(h,p),p,!0):(o.isBuffer(h)||(h=new o(h,u)),new l(h,p,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,n,s){(function(o){(function(){var r=t("bn.js"),a=new(t("miller-rabin")),l=new r(24),d=new r(11),c=new r(10),h=new r(3),u=new r(7),p=t("./generatePrime"),f=t("randombytes");function g(E,D){return D=D||"utf8",o.isBuffer(E)||(E=new o(E,D)),this._pub=new r(E),this}function m(E,D){return D=D||"utf8",o.isBuffer(E)||(E=new o(E,D)),this._priv=new r(E),this}n.exports=_;var b={};function _(E,D,B){this.setGenerator(D),this.__prime=new r(E),this._prime=r.mont(this.__prime),this._primeLen=E.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,B?(this.setPublicKey=g,this.setPrivateKey=m):this._primeCode=8}function w(E,D){var B=new o(E.toArray());return D?B.toString(D):B}Object.defineProperty(_.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(E,D){var B=D.toString("hex"),$=[B,E.toString(16)].join("_");if($ in b)return b[$];var F,N=0;if(E.isEven()||!p.simpleSieve||!p.fermatTest(E)||!a.test(E))return N+=1,N+=B==="02"||B==="05"?8:4,b[$]=N,N;switch(a.test(E.shrn(1))||(N+=2),B){case"02":E.mod(l).cmp(d)&&(N+=8);break;case"05":(F=E.mod(c)).cmp(h)&&F.cmp(u)&&(N+=8);break;default:N+=4}return b[$]=N,N}(this.__prime,this.__gen)),this._primeCode}}),_.prototype.generateKeys=function(){return this._priv||(this._priv=new r(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},_.prototype.computeSecret=function(E){var D=(E=(E=new r(E)).toRed(this._prime)).redPow(this._priv).fromRed(),B=new o(D.toArray()),$=this.getPrime();if(B.length<$.length){var F=new o($.length-B.length);F.fill(0),B=o.concat([F,B])}return B},_.prototype.getPublicKey=function(E){return w(this._pub,E)},_.prototype.getPrivateKey=function(E){return w(this._priv,E)},_.prototype.getPrime=function(E){return w(this.__prime,E)},_.prototype.getGenerator=function(E){return w(this._gen,E)},_.prototype.setGenerator=function(E,D){return D=D||"utf8",o.isBuffer(E)||(E=new o(E,D)),this.__gen=E,this._gen=new r(E),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,n,s){var o=t("randombytes");n.exports=E,E.simpleSieve=_,E.fermatTest=w;var r=t("bn.js"),a=new r(24),l=new(t("miller-rabin")),d=new r(1),c=new r(2),h=new r(5),u=(new r(16),new r(8),new r(10)),p=new r(3),f=(new r(7),new r(11)),g=new r(4),m=(new r(12),null);function b(){if(m!==null)return m;var D=[];D[0]=2;for(var B=1,$=3;$<1048576;$+=2){for(var F=Math.ceil(Math.sqrt($)),N=0;N<B&&D[N]<=F&&$%D[N]!=0;N++);B!==N&&D[N]<=F||(D[B++]=$)}return m=D,D}function _(D){for(var B=b(),$=0;$<B.length;$++)if(D.modn(B[$])===0)return D.cmpn(B[$])===0;return!0}function w(D){var B=r.mont(D);return c.toRed(B).redPow(D.subn(1)).fromRed().cmpn(1)===0}function E(D,B){if(D<16)return new r(B===2||B===5?[140,123]:[140,39]);var $,F;for(B=new r(B);;){for($=new r(o(Math.ceil(D/8)));$.bitLength()>D;)$.ishrn(1);if($.isEven()&&$.iadd(d),$.testn(1)||$.iadd(c),B.cmp(c)){if(!B.cmp(h))for(;$.mod(u).cmp(p);)$.iadd(g)}else for(;$.mod(a).cmp(f);)$.iadd(g);if(_(F=$.shrn(1))&&_($)&&w(F)&&w($)&&l.test(F)&&l.test($))return $}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,n,s){n.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,n,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],405:[function(t,n,s){var o=s;o.version=t("../package.json").version,o.utils=t("./elliptic/utils"),o.rand=t("brorand"),o.curve=t("./elliptic/curve"),o.curves=t("./elliptic/curves"),o.ec=t("./elliptic/ec"),o.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,n,s){var o=t("bn.js"),r=t("../utils"),a=r.getNAF,l=r.getJSF,d=r.assert;function c(u,p){this.type=u,this.p=new o(p.p,16),this.red=p.prime?o.red(p.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=p.n&&new o(p.n,16),this.g=p.g&&this.pointFromJSON(p.g,p.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var f=this.n&&this.p.div(this.n);!f||f.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(u,p){this.curve=u,this.type=p,this.precomputed=null}n.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(u,p){d(u.precomputed);var f=u._getDoubles(),g=a(p,1,this._bitLength),m=(1<<f.step+1)-(f.step%2==0?2:1);m/=3;var b,_,w=[];for(b=0;b<g.length;b+=f.step){_=0;for(var E=b+f.step-1;E>=b;E--)_=(_<<1)+g[E];w.push(_)}for(var D=this.jpoint(null,null,null),B=this.jpoint(null,null,null),$=m;$>0;$--){for(b=0;b<w.length;b++)(_=w[b])===$?B=B.mixedAdd(f.points[b]):_===-$&&(B=B.mixedAdd(f.points[b].neg()));D=D.add(B)}return D.toP()},c.prototype._wnafMul=function(u,p){var f=4,g=u._getNAFPoints(f);f=g.wnd;for(var m=g.points,b=a(p,f,this._bitLength),_=this.jpoint(null,null,null),w=b.length-1;w>=0;w--){for(var E=0;w>=0&&b[w]===0;w--)E++;if(w>=0&&E++,_=_.dblp(E),w<0)break;var D=b[w];d(D!==0),_=u.type==="affine"?D>0?_.mixedAdd(m[D-1>>1]):_.mixedAdd(m[-D-1>>1].neg()):D>0?_.add(m[D-1>>1]):_.add(m[-D-1>>1].neg())}return u.type==="affine"?_.toP():_},c.prototype._wnafMulAdd=function(u,p,f,g,m){var b,_,w,E=this._wnafT1,D=this._wnafT2,B=this._wnafT3,$=0;for(b=0;b<g;b++){var F=(w=p[b])._getNAFPoints(u);E[b]=F.wnd,D[b]=F.points}for(b=g-1;b>=1;b-=2){var N=b-1,L=b;if(E[N]===1&&E[L]===1){var j=[p[N],null,null,p[L]];p[N].y.cmp(p[L].y)===0?(j[1]=p[N].add(p[L]),j[2]=p[N].toJ().mixedAdd(p[L].neg())):p[N].y.cmp(p[L].y.redNeg())===0?(j[1]=p[N].toJ().mixedAdd(p[L]),j[2]=p[N].add(p[L].neg())):(j[1]=p[N].toJ().mixedAdd(p[L]),j[2]=p[N].toJ().mixedAdd(p[L].neg()));var H=[-3,-1,-5,-7,0,7,5,1,3],I=l(f[N],f[L]);for($=Math.max(I[0].length,$),B[N]=new Array($),B[L]=new Array($),_=0;_<$;_++){var k=0|I[0][_],S=0|I[1][_];B[N][_]=H[3*(k+1)+(S+1)],B[L][_]=0,D[N]=j}}else B[N]=a(f[N],E[N],this._bitLength),B[L]=a(f[L],E[L],this._bitLength),$=Math.max(B[N].length,$),$=Math.max(B[L].length,$)}var v=this.jpoint(null,null,null),y=this._wnafT4;for(b=$;b>=0;b--){for(var C=0;b>=0;){var x=!0;for(_=0;_<g;_++)y[_]=0|B[_][b],y[_]!==0&&(x=!1);if(!x)break;C++,b--}if(b>=0&&C++,v=v.dblp(C),b<0)break;for(_=0;_<g;_++){var T=y[_];T!==0&&(T>0?w=D[_][T-1>>1]:T<0&&(w=D[_][-T-1>>1].neg()),v=w.type==="affine"?v.mixedAdd(w):v.add(w))}}for(b=0;b<g;b++)D[b]=null;return m?v:v.toP()},c.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(u,p){u=r.toArray(u,p);var f=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1==2*f)return u[0]===6?d(u[u.length-1]%2==0):u[0]===7&&d(u[u.length-1]%2==1),this.point(u.slice(1,1+f),u.slice(1+f,1+2*f));if((u[0]===2||u[0]===3)&&u.length-1===f)return this.pointFromX(u.slice(1,1+f),u[0]===3);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(u){return this.encode(u,!0)},h.prototype._encode=function(u){var p=this.curve.p.byteLength(),f=this.getX().toArray("be",p);return u?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",p))},h.prototype.encode=function(u,p){return r.encode(this._encode(p),u)},h.prototype.precompute=function(u){if(this.precomputed)return this;var p={doubles:null,naf:null,beta:null};return p.naf=this._getNAFPoints(8),p.doubles=this._getDoubles(4,u),p.beta=this._getBeta(),this.precomputed=p,this},h.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var p=this.precomputed.doubles;return!!p&&p.points.length>=Math.ceil((u.bitLength()+1)/p.step)},h.prototype._getDoubles=function(u,p){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],g=this,m=0;m<p;m+=u){for(var b=0;b<u;b++)g=g.dbl();f.push(g)}return{step:u,points:f}},h.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var p=[this],f=(1<<u)-1,g=f===1?null:this.dbl(),m=1;m<f;m++)p[m]=p[m-1].add(g);return{wnd:u,points:p}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(u){for(var p=this,f=0;f<u;f++)p=p.dbl();return p}},{"../utils":419,"bn.js":420}],407:[function(t,n,s){var o=t("../utils"),r=t("bn.js"),a=t("inherits"),l=t("./base"),d=o.assert;function c(u){this.twisted=(0|u.a)!=1,this.mOneA=this.twisted&&(0|u.a)==-1,this.extended=this.mOneA,l.call(this,"edwards",u),this.a=new r(u.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(u.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(u.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|u.c)==1}function h(u,p,f,g,m){l.BasePoint.call(this,u,"projective"),p===null&&f===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(p,16),this.y=new r(f,16),this.z=g?new r(g,16):this.curve.one,this.t=m&&new r(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(c,l),n.exports=c,c.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},c.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},c.prototype.jpoint=function(u,p,f,g){return this.point(u,p,f,g)},c.prototype.pointFromX=function(u,p){(u=new r(u,16)).red||(u=u.toRed(this.red));var f=u.redSqr(),g=this.c2.redSub(this.a.redMul(f)),m=this.one.redSub(this.c2.redMul(this.d).redMul(f)),b=g.redMul(m.redInvm()),_=b.redSqrt();if(_.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");var w=_.fromRed().isOdd();return(p&&!w||!p&&w)&&(_=_.redNeg()),this.point(u,_)},c.prototype.pointFromY=function(u,p){(u=new r(u,16)).red||(u=u.toRed(this.red));var f=u.redSqr(),g=f.redSub(this.c2),m=f.redMul(this.d).redMul(this.c2).redSub(this.a),b=g.redMul(m.redInvm());if(b.cmp(this.zero)===0){if(p)throw new Error("invalid point");return this.point(this.zero,u)}var _=b.redSqrt();if(_.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");return _.fromRed().isOdd()!==p&&(_=_.redNeg()),this.point(_,u)},c.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var p=u.x.redSqr(),f=u.y.redSqr(),g=p.redMul(this.a).redAdd(f),m=this.c2.redMul(this.one.redAdd(this.d.redMul(p).redMul(f)));return g.cmp(m)===0},a(h,l.BasePoint),c.prototype.pointFromJSON=function(u){return h.fromJSON(this,u)},c.prototype.point=function(u,p,f,g){return new h(this,u,p,f,g)},h.fromJSON=function(u,p){return new h(u,p[0],p[1],p[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},h.prototype._extDbl=function(){var u=this.x.redSqr(),p=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var g=this.curve._mulA(u),m=this.x.redAdd(this.y).redSqr().redISub(u).redISub(p),b=g.redAdd(p),_=b.redSub(f),w=g.redSub(p),E=m.redMul(_),D=b.redMul(w),B=m.redMul(w),$=_.redMul(b);return this.curve.point(E,D,$,B)},h.prototype._projDbl=function(){var u,p,f,g,m,b,_=this.x.redAdd(this.y).redSqr(),w=this.x.redSqr(),E=this.y.redSqr();if(this.curve.twisted){var D=(g=this.curve._mulA(w)).redAdd(E);this.zOne?(u=_.redSub(w).redSub(E).redMul(D.redSub(this.curve.two)),p=D.redMul(g.redSub(E)),f=D.redSqr().redSub(D).redSub(D)):(m=this.z.redSqr(),b=D.redSub(m).redISub(m),u=_.redSub(w).redISub(E).redMul(b),p=D.redMul(g.redSub(E)),f=D.redMul(b))}else g=w.redAdd(E),m=this.curve._mulC(this.z).redSqr(),b=g.redSub(m).redSub(m),u=this.curve._mulC(_.redISub(g)).redMul(b),p=this.curve._mulC(g).redMul(w.redISub(E)),f=g.redMul(b);return this.curve.point(u,p,f)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(u){var p=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),f=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),g=this.t.redMul(this.curve.dd).redMul(u.t),m=this.z.redMul(u.z.redAdd(u.z)),b=f.redSub(p),_=m.redSub(g),w=m.redAdd(g),E=f.redAdd(p),D=b.redMul(_),B=w.redMul(E),$=b.redMul(E),F=_.redMul(w);return this.curve.point(D,B,F,$)},h.prototype._projAdd=function(u){var p,f,g=this.z.redMul(u.z),m=g.redSqr(),b=this.x.redMul(u.x),_=this.y.redMul(u.y),w=this.curve.d.redMul(b).redMul(_),E=m.redSub(w),D=m.redAdd(w),B=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(b).redISub(_),$=g.redMul(E).redMul(B);return this.curve.twisted?(p=g.redMul(D).redMul(_.redSub(this.curve._mulA(b))),f=E.redMul(D)):(p=g.redMul(D).redMul(_.redSub(b)),f=this.curve._mulC(E).redMul(D)),this.curve.point($,p,f)},h.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},h.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},h.prototype.mulAdd=function(u,p,f){return this.curve._wnafMulAdd(1,[this,p],[u,f],2,!1)},h.prototype.jmulAdd=function(u,p,f){return this.curve._wnafMulAdd(1,[this,p],[u,f],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},h.prototype.eqXToP=function(u){var p=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(p)===0)return!0;for(var f=u.clone(),g=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(g),this.x.cmp(p)===0)return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,n,s){var o=s;o.base=t("./base"),o.short=t("./short"),o.mont=t("./mont"),o.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,n,s){var o=t("bn.js"),r=t("inherits"),a=t("./base"),l=t("../utils");function d(h){a.call(this,"mont",h),this.a=new o(h.a,16).toRed(this.red),this.b=new o(h.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(h,u,p){a.BasePoint.call(this,h,"projective"),u===null&&p===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(u,16),this.z=new o(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(d,a),n.exports=d,d.prototype.validate=function(h){var u=h.normalize().x,p=u.redSqr(),f=p.redMul(u).redAdd(p.redMul(this.a)).redAdd(u);return f.redSqrt().redSqr().cmp(f)===0},r(c,a.BasePoint),d.prototype.decodePoint=function(h,u){return this.point(l.toArray(h,u),1)},d.prototype.point=function(h,u){return new c(this,h,u)},d.prototype.pointFromJSON=function(h){return c.fromJSON(this,h)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(h,u){return new c(h,u[0],u[1]||h.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0},c.prototype.dbl=function(){var h=this.x.redAdd(this.z).redSqr(),u=this.x.redSub(this.z).redSqr(),p=h.redSub(u),f=h.redMul(u),g=p.redMul(u.redAdd(this.curve.a24.redMul(p)));return this.curve.point(f,g)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(h,u){var p=this.x.redAdd(this.z),f=this.x.redSub(this.z),g=h.x.redAdd(h.z),m=h.x.redSub(h.z).redMul(p),b=g.redMul(f),_=u.z.redMul(m.redAdd(b).redSqr()),w=u.x.redMul(m.redISub(b).redSqr());return this.curve.point(_,w)},c.prototype.mul=function(h){for(var u=h.clone(),p=this,f=this.curve.point(null,null),g=[];u.cmpn(0)!==0;u.iushrn(1))g.push(u.andln(1));for(var m=g.length-1;m>=0;m--)g[m]===0?(p=p.diffAdd(f,this),f=f.dbl()):(f=p.diffAdd(f,this),p=p.dbl());return f},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(h){return this.getX().cmp(h.getX())===0},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,n,s){var o=t("../utils"),r=t("bn.js"),a=t("inherits"),l=t("./base"),d=o.assert;function c(p){l.call(this,"short",p),this.a=new r(p.a,16).toRed(this.red),this.b=new r(p.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(p),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(p,f,g,m){l.BasePoint.call(this,p,"affine"),f===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(f,16),this.y=new r(g,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(p,f,g,m){l.BasePoint.call(this,p,"jacobian"),f===null&&g===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(f,16),this.y=new r(g,16),this.z=new r(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(c,l),n.exports=c,c.prototype._getEndomorphism=function(p){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var f,g;if(p.beta)f=new r(p.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);f=(f=m[0].cmp(m[1])<0?m[0]:m[1]).toRed(this.red)}if(p.lambda)g=new r(p.lambda,16);else{var b=this._getEndoRoots(this.n);this.g.mul(b[0]).x.cmp(this.g.x.redMul(f))===0?g=b[0]:(g=b[1],d(this.g.mul(g).x.cmp(this.g.x.redMul(f))===0))}return{beta:f,lambda:g,basis:p.basis?p.basis.map(function(_){return{a:new r(_.a,16),b:new r(_.b,16)}}):this._getEndoBasis(g)}}},c.prototype._getEndoRoots=function(p){var f=p===this.p?this.red:r.mont(p),g=new r(2).toRed(f).redInvm(),m=g.redNeg(),b=new r(3).toRed(f).redNeg().redSqrt().redMul(g);return[m.redAdd(b).fromRed(),m.redSub(b).fromRed()]},c.prototype._getEndoBasis=function(p){for(var f,g,m,b,_,w,E,D,B,$=this.n.ushrn(Math.floor(this.n.bitLength()/2)),F=p,N=this.n.clone(),L=new r(1),j=new r(0),H=new r(0),I=new r(1),k=0;F.cmpn(0)!==0;){var S=N.div(F);D=N.sub(S.mul(F)),B=H.sub(S.mul(L));var v=I.sub(S.mul(j));if(!m&&D.cmp($)<0)f=E.neg(),g=L,m=D.neg(),b=B;else if(m&&++k==2)break;E=D,N=F,F=D,H=L,L=B,I=j,j=v}_=D.neg(),w=B;var y=m.sqr().add(b.sqr());return _.sqr().add(w.sqr()).cmp(y)>=0&&(_=f,w=g),m.negative&&(m=m.neg(),b=b.neg()),_.negative&&(_=_.neg(),w=w.neg()),[{a:m,b},{a:_,b:w}]},c.prototype._endoSplit=function(p){var f=this.endo.basis,g=f[0],m=f[1],b=m.b.mul(p).divRound(this.n),_=g.b.neg().mul(p).divRound(this.n),w=b.mul(g.a),E=_.mul(m.a),D=b.mul(g.b),B=_.mul(m.b);return{k1:p.sub(w).sub(E),k2:D.add(B).neg()}},c.prototype.pointFromX=function(p,f){(p=new r(p,16)).red||(p=p.toRed(this.red));var g=p.redSqr().redMul(p).redIAdd(p.redMul(this.a)).redIAdd(this.b),m=g.redSqrt();if(m.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var b=m.fromRed().isOdd();return(f&&!b||!f&&b)&&(m=m.redNeg()),this.point(p,m)},c.prototype.validate=function(p){if(p.inf)return!0;var f=p.x,g=p.y,m=this.a.redMul(f),b=f.redSqr().redMul(f).redIAdd(m).redIAdd(this.b);return g.redSqr().redISub(b).cmpn(0)===0},c.prototype._endoWnafMulAdd=function(p,f,g){for(var m=this._endoWnafT1,b=this._endoWnafT2,_=0;_<p.length;_++){var w=this._endoSplit(f[_]),E=p[_],D=E._getBeta();w.k1.negative&&(w.k1.ineg(),E=E.neg(!0)),w.k2.negative&&(w.k2.ineg(),D=D.neg(!0)),m[2*_]=E,m[2*_+1]=D,b[2*_]=w.k1,b[2*_+1]=w.k2}for(var B=this._wnafMulAdd(1,m,b,2*_,g),$=0;$<2*_;$++)m[$]=null,b[$]=null;return B},a(h,l.BasePoint),c.prototype.point=function(p,f,g){return new h(this,p,f,g)},c.prototype.pointFromJSON=function(p,f){return h.fromJSON(this,p,f)},h.prototype._getBeta=function(){if(this.curve.endo){var p=this.precomputed;if(p&&p.beta)return p.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(p){var g=this.curve,m=function(b){return g.point(b.x.redMul(g.endo.beta),b.y)};p.beta=f,f.precomputed={beta:null,naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(m)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(m)}}}return f}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(p,f,g){typeof f=="string"&&(f=JSON.parse(f));var m=p.point(f[0],f[1],g);if(!f[2])return m;function b(w){return p.point(w[0],w[1],g)}var _=f[2];return m.precomputed={beta:null,doubles:_.doubles&&{step:_.doubles.step,points:[m].concat(_.doubles.points.map(b))},naf:_.naf&&{wnd:_.naf.wnd,points:[m].concat(_.naf.points.map(b))}},m},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var f=this.y.redSub(p.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(p.x).redInvm()));var g=f.redSqr().redISub(this.x).redISub(p.x),m=f.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,m)},h.prototype.dbl=function(){if(this.inf)return this;var p=this.y.redAdd(this.y);if(p.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,g=this.x.redSqr(),m=p.redInvm(),b=g.redAdd(g).redIAdd(g).redIAdd(f).redMul(m),_=b.redSqr().redISub(this.x.redAdd(this.x)),w=b.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,w)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(p){return p=new r(p,16),this.isInfinity()?this:this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve.endo?this.curve._endoWnafMulAdd([this],[p]):this.curve._wnafMul(this,p)},h.prototype.mulAdd=function(p,f,g){var m=[this,f],b=[p,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,b):this.curve._wnafMulAdd(1,m,b,2)},h.prototype.jmulAdd=function(p,f,g){var m=[this,f],b=[p,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,b,!0):this.curve._wnafMulAdd(1,m,b,2,!0)},h.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)},h.prototype.neg=function(p){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(p&&this.precomputed){var g=this.precomputed,m=function(b){return b.neg()};f.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(m)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(m)}}}return f},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(u,l.BasePoint),c.prototype.jpoint=function(p,f,g){return new u(this,p,f,g)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var p=this.z.redInvm(),f=p.redSqr(),g=this.x.redMul(f),m=this.y.redMul(f).redMul(p);return this.curve.point(g,m)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var f=p.z.redSqr(),g=this.z.redSqr(),m=this.x.redMul(f),b=p.x.redMul(g),_=this.y.redMul(f.redMul(p.z)),w=p.y.redMul(g.redMul(this.z)),E=m.redSub(b),D=_.redSub(w);if(E.cmpn(0)===0)return D.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var B=E.redSqr(),$=B.redMul(E),F=m.redMul(B),N=D.redSqr().redIAdd($).redISub(F).redISub(F),L=D.redMul(F.redISub(N)).redISub(_.redMul($)),j=this.z.redMul(p.z).redMul(E);return this.curve.jpoint(N,L,j)},u.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var f=this.z.redSqr(),g=this.x,m=p.x.redMul(f),b=this.y,_=p.y.redMul(f).redMul(this.z),w=g.redSub(m),E=b.redSub(_);if(w.cmpn(0)===0)return E.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=w.redSqr(),B=D.redMul(w),$=g.redMul(D),F=E.redSqr().redIAdd(B).redISub($).redISub($),N=E.redMul($.redISub(F)).redISub(b.redMul(B)),L=this.z.redMul(w);return this.curve.jpoint(F,N,L)},u.prototype.dblp=function(p){if(p===0)return this;if(this.isInfinity())return this;if(!p)return this.dbl();var f;if(this.curve.zeroA||this.curve.threeA){var g=this;for(f=0;f<p;f++)g=g.dbl();return g}var m=this.curve.a,b=this.curve.tinv,_=this.x,w=this.y,E=this.z,D=E.redSqr().redSqr(),B=w.redAdd(w);for(f=0;f<p;f++){var $=_.redSqr(),F=B.redSqr(),N=F.redSqr(),L=$.redAdd($).redIAdd($).redIAdd(m.redMul(D)),j=_.redMul(F),H=L.redSqr().redISub(j.redAdd(j)),I=j.redISub(H),k=L.redMul(I);k=k.redIAdd(k).redISub(N);var S=B.redMul(E);f+1<p&&(D=D.redMul(N)),_=H,E=S,B=k}return this.curve.jpoint(_,B.redMul(b),E)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var p,f,g;if(this.zOne){var m=this.x.redSqr(),b=this.y.redSqr(),_=b.redSqr(),w=this.x.redAdd(b).redSqr().redISub(m).redISub(_);w=w.redIAdd(w);var E=m.redAdd(m).redIAdd(m),D=E.redSqr().redISub(w).redISub(w),B=_.redIAdd(_);B=(B=B.redIAdd(B)).redIAdd(B),p=D,f=E.redMul(w.redISub(D)).redISub(B),g=this.y.redAdd(this.y)}else{var $=this.x.redSqr(),F=this.y.redSqr(),N=F.redSqr(),L=this.x.redAdd(F).redSqr().redISub($).redISub(N);L=L.redIAdd(L);var j=$.redAdd($).redIAdd($),H=j.redSqr(),I=N.redIAdd(N);I=(I=I.redIAdd(I)).redIAdd(I),p=H.redISub(L).redISub(L),f=j.redMul(L.redISub(p)).redISub(I),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(p,f,g)},u.prototype._threeDbl=function(){var p,f,g;if(this.zOne){var m=this.x.redSqr(),b=this.y.redSqr(),_=b.redSqr(),w=this.x.redAdd(b).redSqr().redISub(m).redISub(_);w=w.redIAdd(w);var E=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),D=E.redSqr().redISub(w).redISub(w);p=D;var B=_.redIAdd(_);B=(B=B.redIAdd(B)).redIAdd(B),f=E.redMul(w.redISub(D)).redISub(B),g=this.y.redAdd(this.y)}else{var $=this.z.redSqr(),F=this.y.redSqr(),N=this.x.redMul(F),L=this.x.redSub($).redMul(this.x.redAdd($));L=L.redAdd(L).redIAdd(L);var j=N.redIAdd(N),H=(j=j.redIAdd(j)).redAdd(j);p=L.redSqr().redISub(H),g=this.y.redAdd(this.z).redSqr().redISub(F).redISub($);var I=F.redSqr();I=(I=(I=I.redIAdd(I)).redIAdd(I)).redIAdd(I),f=L.redMul(j.redISub(p)).redISub(I)}return this.curve.jpoint(p,f,g)},u.prototype._dbl=function(){var p=this.curve.a,f=this.x,g=this.y,m=this.z,b=m.redSqr().redSqr(),_=f.redSqr(),w=g.redSqr(),E=_.redAdd(_).redIAdd(_).redIAdd(p.redMul(b)),D=f.redAdd(f),B=(D=D.redIAdd(D)).redMul(w),$=E.redSqr().redISub(B.redAdd(B)),F=B.redISub($),N=w.redSqr();N=(N=(N=N.redIAdd(N)).redIAdd(N)).redIAdd(N);var L=E.redMul(F).redISub(N),j=g.redAdd(g).redMul(m);return this.curve.jpoint($,L,j)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var p=this.x.redSqr(),f=this.y.redSqr(),g=this.z.redSqr(),m=f.redSqr(),b=p.redAdd(p).redIAdd(p),_=b.redSqr(),w=this.x.redAdd(f).redSqr().redISub(p).redISub(m),E=(w=(w=(w=w.redIAdd(w)).redAdd(w).redIAdd(w)).redISub(_)).redSqr(),D=m.redIAdd(m);D=(D=(D=D.redIAdd(D)).redIAdd(D)).redIAdd(D);var B=b.redIAdd(w).redSqr().redISub(_).redISub(E).redISub(D),$=f.redMul(B);$=($=$.redIAdd($)).redIAdd($);var F=this.x.redMul(E).redISub($);F=(F=F.redIAdd(F)).redIAdd(F);var N=this.y.redMul(B.redMul(D.redISub(B)).redISub(w.redMul(E)));N=(N=(N=N.redIAdd(N)).redIAdd(N)).redIAdd(N);var L=this.z.redAdd(w).redSqr().redISub(g).redISub(E);return this.curve.jpoint(F,N,L)},u.prototype.mul=function(p,f){return p=new r(p,f),this.curve._wnafMul(this,p)},u.prototype.eq=function(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return!0;var f=this.z.redSqr(),g=p.z.redSqr();if(this.x.redMul(g).redISub(p.x.redMul(f)).cmpn(0)!==0)return!1;var m=f.redMul(this.z),b=g.redMul(p.z);return this.y.redMul(b).redISub(p.y.redMul(m)).cmpn(0)===0},u.prototype.eqXToP=function(p){var f=this.z.redSqr(),g=p.toRed(this.curve.red).redMul(f);if(this.x.cmp(g)===0)return!0;for(var m=p.clone(),b=this.curve.redN.redMul(f);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(b),this.x.cmp(g)===0)return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,n,s){var o,r=s,a=t("hash.js"),l=t("./curve"),d=t("./utils").assert;function c(u){u.type==="short"?this.curve=new l.short(u):u.type==="edwards"?this.curve=new l.edwards(u):this.curve=new l.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,d(this.g.validate(),"Invalid curve"),d(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(u,p){Object.defineProperty(r,u,{configurable:!0,enumerable:!0,get:function(){var f=new c(p);return Object.defineProperty(r,u,{configurable:!0,enumerable:!0,value:f}),f}})}r.PresetCurve=c,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{o=t("./precomputed/secp256k1")}catch{o=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,n,s){var o=t("bn.js"),r=t("hmac-drbg"),a=t("../utils"),l=t("../curves"),d=t("brorand"),c=a.assert,h=t("./key"),u=t("./signature");function p(f){if(!(this instanceof p))return new p(f);typeof f=="string"&&(c(Object.prototype.hasOwnProperty.call(l,f),"Unknown curve "+f),f=l[f]),f instanceof l.PresetCurve&&(f={curve:f}),this.curve=f.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=f.curve.g,this.g.precompute(f.curve.n.bitLength()+1),this.hash=f.hash||f.curve.hash}n.exports=p,p.prototype.keyPair=function(f){return new h(this,f)},p.prototype.keyFromPrivate=function(f,g){return h.fromPrivate(this,f,g)},p.prototype.keyFromPublic=function(f,g){return h.fromPublic(this,f,g)},p.prototype.genKeyPair=function(f){f||(f={});for(var g=new r({hash:this.hash,pers:f.pers,persEnc:f.persEnc||"utf8",entropy:f.entropy||d(this.hash.hmacStrength),entropyEnc:f.entropy&&f.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),b=this.n.sub(new o(2));;){var _=new o(g.generate(m));if(!(_.cmp(b)>0))return _.iaddn(1),this.keyFromPrivate(_)}},p.prototype._truncateToN=function(f,g){var m=8*f.byteLength()-this.n.bitLength();return m>0&&(f=f.ushrn(m)),!g&&f.cmp(this.n)>=0?f.sub(this.n):f},p.prototype.sign=function(f,g,m,b){typeof m=="object"&&(b=m,m=null),b||(b={}),g=this.keyFromPrivate(g,m),f=this._truncateToN(new o(f,16));for(var _=this.n.byteLength(),w=g.getPrivate().toArray("be",_),E=f.toArray("be",_),D=new r({hash:this.hash,entropy:w,nonce:E,pers:b.pers,persEnc:b.persEnc||"utf8"}),B=this.n.sub(new o(1)),$=0;;$++){var F=b.k?b.k($):new o(D.generate(this.n.byteLength()));if(!((F=this._truncateToN(F,!0)).cmpn(1)<=0||F.cmp(B)>=0)){var N=this.g.mul(F);if(!N.isInfinity()){var L=N.getX(),j=L.umod(this.n);if(j.cmpn(0)!==0){var H=F.invm(this.n).mul(j.mul(g.getPrivate()).iadd(f));if((H=H.umod(this.n)).cmpn(0)!==0){var I=(N.getY().isOdd()?1:0)|(L.cmp(j)!==0?2:0);return b.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),I^=1),new u({r:j,s:H,recoveryParam:I})}}}}}},p.prototype.verify=function(f,g,m,b){f=this._truncateToN(new o(f,16)),m=this.keyFromPublic(m,b);var _=(g=new u(g,"hex")).r,w=g.s;if(_.cmpn(1)<0||_.cmp(this.n)>=0||w.cmpn(1)<0||w.cmp(this.n)>=0)return!1;var E,D=w.invm(this.n),B=D.mul(f).umod(this.n),$=D.mul(_).umod(this.n);return this.curve._maxwellTrick?!(E=this.g.jmulAdd(B,m.getPublic(),$)).isInfinity()&&E.eqXToP(_):!(E=this.g.mulAdd(B,m.getPublic(),$)).isInfinity()&&E.getX().umod(this.n).cmp(_)===0},p.prototype.recoverPubKey=function(f,g,m,b){c((3&m)===m,"The recovery param is more than two bits"),g=new u(g,b);var _=this.n,w=new o(f),E=g.r,D=g.s,B=1&m,$=m>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&$)throw new Error("Unable to find sencond key candinate");E=$?this.curve.pointFromX(E.add(this.curve.n),B):this.curve.pointFromX(E,B);var F=g.r.invm(_),N=_.sub(w).mul(F).umod(_),L=D.mul(F).umod(_);return this.g.mulAdd(N,E,L)},p.prototype.getKeyRecoveryParam=function(f,g,m,b){if((g=new u(g,b)).recoveryParam!==null)return g.recoveryParam;for(var _=0;_<4;_++){var w;try{w=this.recoverPubKey(f,g,_)}catch{continue}if(w.eq(m))return _}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,n,s){var o=t("bn.js"),r=t("../utils").assert;function a(l,d){this.ec=l,this.priv=null,this.pub=null,d.priv&&this._importPrivate(d.priv,d.privEnc),d.pub&&this._importPublic(d.pub,d.pubEnc)}n.exports=a,a.fromPublic=function(l,d,c){return d instanceof a?d:new a(l,{pub:d,pubEnc:c})},a.fromPrivate=function(l,d,c){return d instanceof a?d:new a(l,{priv:d,privEnc:c})},a.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(l,d){return typeof l=="string"&&(d=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,l):this.pub},a.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(l,d){this.priv=new o(l,d||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(l,d){if(l.x||l.y)return this.ec.curve.type==="mont"?r(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||r(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y));this.pub=this.ec.curve.decodePoint(l,d)},a.prototype.derive=function(l){return l.validate()||r(l.validate(),"public point not validated"),l.mul(this.priv).getX()},a.prototype.sign=function(l,d,c){return this.ec.sign(l,this,d,c)},a.prototype.verify=function(l,d){return this.ec.verify(l,d,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,n,s){var o=t("bn.js"),r=t("../utils"),a=r.assert;function l(p,f){if(p instanceof l)return p;this._importDER(p,f)||(a(p.r&&p.s,"Signature without r or s"),this.r=new o(p.r,16),this.s=new o(p.s,16),p.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=p.recoveryParam)}function d(){this.place=0}function c(p,f){var g=p[f.place++];if(!(128&g))return g;var m=15&g;if(m===0||m>4)return!1;for(var b=0,_=0,w=f.place;_<m;_++,w++)b<<=8,b|=p[w],b>>>=0;return!(b<=127)&&(f.place=w,b)}function h(p){for(var f=0,g=p.length-1;!p[f]&&!(128&p[f+1])&&f<g;)f++;return f===0?p:p.slice(f)}function u(p,f){if(f<128)p.push(f);else{var g=1+(Math.log(f)/Math.LN2>>>3);for(p.push(128|g);--g;)p.push(f>>>(g<<3)&255);p.push(f)}}n.exports=l,l.prototype._importDER=function(p,f){p=r.toArray(p,f);var g=new d;if(p[g.place++]!==48)return!1;var m=c(p,g);if(m===!1||m+g.place!==p.length||p[g.place++]!==2)return!1;var b=c(p,g);if(b===!1)return!1;var _=p.slice(g.place,b+g.place);if(g.place+=b,p[g.place++]!==2)return!1;var w=c(p,g);if(w===!1||p.length!==w+g.place)return!1;var E=p.slice(g.place,w+g.place);if(_[0]===0){if(!(128&_[1]))return!1;_=_.slice(1)}if(E[0]===0){if(!(128&E[1]))return!1;E=E.slice(1)}return this.r=new o(_),this.s=new o(E),this.recoveryParam=null,!0},l.prototype.toDER=function(p){var f=this.r.toArray(),g=this.s.toArray();for(128&f[0]&&(f=[0].concat(f)),128&g[0]&&(g=[0].concat(g)),f=h(f),g=h(g);!(g[0]||128&g[1]);)g=g.slice(1);var m=[2];u(m,f.length),(m=m.concat(f)).push(2),u(m,g.length);var b=m.concat(g),_=[48];return u(_,b.length),_=_.concat(b),r.encode(_,p)}},{"../utils":419,"bn.js":420}],415:[function(t,n,s){var o=t("hash.js"),r=t("../curves"),a=t("../utils"),l=a.assert,d=a.parseBytes,c=t("./key"),h=t("./signature");function u(p){if(l(p==="ed25519","only tested with ed25519 so far"),!(this instanceof u))return new u(p);p=r[p].curve,this.curve=p,this.g=p.g,this.g.precompute(p.n.bitLength()+1),this.pointClass=p.point().constructor,this.encodingLength=Math.ceil(p.n.bitLength()/8),this.hash=o.sha512}n.exports=u,u.prototype.sign=function(p,f){p=d(p);var g=this.keyFromSecret(f),m=this.hashInt(g.messagePrefix(),p),b=this.g.mul(m),_=this.encodePoint(b),w=this.hashInt(_,g.pubBytes(),p).mul(g.priv()),E=m.add(w).umod(this.curve.n);return this.makeSignature({R:b,S:E,Rencoded:_})},u.prototype.verify=function(p,f,g){p=d(p),f=this.makeSignature(f);var m=this.keyFromPublic(g),b=this.hashInt(f.Rencoded(),m.pubBytes(),p),_=this.g.mul(f.S());return f.R().add(m.pub().mul(b)).eq(_)},u.prototype.hashInt=function(){for(var p=this.hash(),f=0;f<arguments.length;f++)p.update(arguments[f]);return a.intFromLE(p.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(p){return c.fromPublic(this,p)},u.prototype.keyFromSecret=function(p){return c.fromSecret(this,p)},u.prototype.makeSignature=function(p){return p instanceof h?p:new h(this,p)},u.prototype.encodePoint=function(p){var f=p.getY().toArray("le",this.encodingLength);return f[this.encodingLength-1]|=p.getX().isOdd()?128:0,f},u.prototype.decodePoint=function(p){var f=(p=a.parseBytes(p)).length-1,g=p.slice(0,f).concat(-129&p[f]),m=(128&p[f])!=0,b=a.intFromLE(g);return this.curve.pointFromY(b,m)},u.prototype.encodeInt=function(p){return p.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(p){return a.intFromLE(p)},u.prototype.isPoint=function(p){return p instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,n,s){var o=t("../utils"),r=o.assert,a=o.parseBytes,l=o.cachedProperty;function d(c,h){this.eddsa=c,this._secret=a(h.secret),c.isPoint(h.pub)?this._pub=h.pub:this._pubBytes=a(h.pub)}d.fromPublic=function(c,h){return h instanceof d?h:new d(c,{pub:h})},d.fromSecret=function(c,h){return h instanceof d?h:new d(c,{secret:h})},d.prototype.secret=function(){return this._secret},l(d,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),l(d,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),l(d,"privBytes",function(){var c=this.eddsa,h=this.hash(),u=c.encodingLength-1,p=h.slice(0,c.encodingLength);return p[0]&=248,p[u]&=127,p[u]|=64,p}),l(d,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),l(d,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),l(d,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),d.prototype.sign=function(c){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},d.prototype.verify=function(c,h){return this.eddsa.verify(c,h,this)},d.prototype.getSecret=function(c){return r(this._secret,"KeyPair is public only"),o.encode(this.secret(),c)},d.prototype.getPublic=function(c){return o.encode(this.pubBytes(),c)},n.exports=d},{"../utils":419}],417:[function(t,n,s){var o=t("bn.js"),r=t("../utils"),a=r.assert,l=r.cachedProperty,d=r.parseBytes;function c(h,u){this.eddsa=h,typeof u!="object"&&(u=d(u)),Array.isArray(u)&&(u={R:u.slice(0,h.encodingLength),S:u.slice(h.encodingLength)}),a(u.R&&u.S,"Signature without R or S"),h.isPoint(u.R)&&(this._R=u.R),u.S instanceof o&&(this._S=u.S),this._Rencoded=Array.isArray(u.R)?u.R:u.Rencoded,this._Sencoded=Array.isArray(u.S)?u.S:u.Sencoded}l(c,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),l(c,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),l(c,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),l(c,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},n.exports=c},{"../utils":419,"bn.js":420}],418:[function(t,n,s){n.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,n,s){var o=s,r=t("bn.js"),a=t("minimalistic-assert"),l=t("minimalistic-crypto-utils");o.assert=a,o.toArray=l.toArray,o.zero2=l.zero2,o.toHex=l.toHex,o.encode=l.encode,o.getNAF=function(d,c,h){var u=new Array(Math.max(d.bitLength(),h)+1);u.fill(0);for(var p=1<<c+1,f=d.clone(),g=0;g<u.length;g++){var m,b=f.andln(p-1);f.isOdd()?(m=b>(p>>1)-1?(p>>1)-b:b,f.isubn(m)):m=0,u[g]=m,f.iushrn(1)}return u},o.getJSF=function(d,c){var h=[[],[]];d=d.clone(),c=c.clone();for(var u,p=0,f=0;d.cmpn(-p)>0||c.cmpn(-f)>0;){var g,m,b=d.andln(3)+p&3,_=c.andln(3)+f&3;b===3&&(b=-1),_===3&&(_=-1),g=1&b?(u=d.andln(7)+p&7)!==3&&u!==5||_!==2?b:-b:0,h[0].push(g),m=1&_?(u=c.andln(7)+f&7)!==3&&u!==5||b!==2?_:-_:0,h[1].push(m),2*p===g+1&&(p=1-p),2*f===m+1&&(f=1-f),d.iushrn(1),c.iushrn(1)}return h},o.cachedProperty=function(d,c,h){var u="_"+c;d.prototype[c]=function(){return this[u]!==void 0?this[u]:this[u]=h.call(this)}},o.parseBytes=function(d){return typeof d=="string"?o.toArray(d,"hex"):d},o.intFromLE=function(d){return new r(d,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,n,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],421:[function(t,n,s){n.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,n,s){var o=Object.create||function(F){var N=function(){};return N.prototype=F,new N},r=Object.keys||function(F){var N=[];for(var L in F)Object.prototype.hasOwnProperty.call(F,L)&&N.push(L);return L},a=Function.prototype.bind||function(F){var N=this;return function(){return N.apply(F,arguments)}};function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=o(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}n.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var d,c=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),d=h.x===0}catch{d=!1}function u(F){return F._maxListeners===void 0?l.defaultMaxListeners:F._maxListeners}function p(F,N,L){if(N)F.call(L);else for(var j=F.length,H=$(F,j),I=0;I<j;++I)H[I].call(L)}function f(F,N,L,j){if(N)F.call(L,j);else for(var H=F.length,I=$(F,H),k=0;k<H;++k)I[k].call(L,j)}function g(F,N,L,j,H){if(N)F.call(L,j,H);else for(var I=F.length,k=$(F,I),S=0;S<I;++S)k[S].call(L,j,H)}function m(F,N,L,j,H,I){if(N)F.call(L,j,H,I);else for(var k=F.length,S=$(F,k),v=0;v<k;++v)S[v].call(L,j,H,I)}function b(F,N,L,j){if(N)F.apply(L,j);else for(var H=F.length,I=$(F,H),k=0;k<H;++k)I[k].apply(L,j)}function _(F,N,L,j){var H,I,k;if(typeof L!="function")throw new TypeError('"listener" argument must be a function');if((I=F._events)?(I.newListener&&(F.emit("newListener",N,L.listener?L.listener:L),I=F._events),k=I[N]):(I=F._events=o(null),F._eventsCount=0),k){if(typeof k=="function"?k=I[N]=j?[L,k]:[k,L]:j?k.unshift(L):k.push(L),!k.warned&&(H=u(F))&&H>0&&k.length>H){k.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+k.length+' "'+String(N)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');S.name="MaxListenersExceededWarning",S.emitter=F,S.type=N,S.count=k.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",S.name,S.message)}}else k=I[N]=L,++F._eventsCount;return F}function w(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var F=new Array(arguments.length),N=0;N<F.length;++N)F[N]=arguments[N];this.listener.apply(this.target,F)}}function E(F,N,L){var j={fired:!1,wrapFn:void 0,target:F,type:N,listener:L},H=a.call(w,j);return H.listener=L,j.wrapFn=H,H}function D(F,N,L){var j=F._events;if(!j)return[];var H=j[N];return H?typeof H=="function"?L?[H.listener||H]:[H]:L?function(I){for(var k=new Array(I.length),S=0;S<k.length;++S)k[S]=I[S].listener||I[S];return k}(H):$(H,H.length):[]}function B(F){var N=this._events;if(N){var L=N[F];if(typeof L=="function")return 1;if(L)return L.length}return 0}function $(F,N){for(var L=new Array(N),j=0;j<N;++j)L[j]=F[j];return L}d?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(F){if(typeof F!="number"||F<0||F!=F)throw new TypeError('"defaultMaxListeners" must be a positive number');c=F}}):l.defaultMaxListeners=c,l.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||isNaN(F))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=F,this},l.prototype.getMaxListeners=function(){return u(this)},l.prototype.emit=function(F){var N,L,j,H,I,k,S=F==="error";if(k=this._events)S=S&&k.error==null;else if(!S)return!1;if(S){if(arguments.length>1&&(N=arguments[1]),N instanceof Error)throw N;var v=new Error('Unhandled "error" event. ('+N+")");throw v.context=N,v}if(!(L=k[F]))return!1;var y=typeof L=="function";switch(j=arguments.length){case 1:p(L,y,this);break;case 2:f(L,y,this,arguments[1]);break;case 3:g(L,y,this,arguments[1],arguments[2]);break;case 4:m(L,y,this,arguments[1],arguments[2],arguments[3]);break;default:for(H=new Array(j-1),I=1;I<j;I++)H[I-1]=arguments[I];b(L,y,this,H)}return!0},l.prototype.addListener=function(F,N){return _(this,F,N,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(F,N){return _(this,F,N,!0)},l.prototype.once=function(F,N){if(typeof N!="function")throw new TypeError('"listener" argument must be a function');return this.on(F,E(this,F,N)),this},l.prototype.prependOnceListener=function(F,N){if(typeof N!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(F,E(this,F,N)),this},l.prototype.removeListener=function(F,N){var L,j,H,I,k;if(typeof N!="function")throw new TypeError('"listener" argument must be a function');if(!(j=this._events))return this;if(!(L=j[F]))return this;if(L===N||L.listener===N)--this._eventsCount==0?this._events=o(null):(delete j[F],j.removeListener&&this.emit("removeListener",F,L.listener||N));else if(typeof L!="function"){for(H=-1,I=L.length-1;I>=0;I--)if(L[I]===N||L[I].listener===N){k=L[I].listener,H=I;break}if(H<0)return this;H===0?L.shift():function(S,v){for(var y=v,C=y+1,x=S.length;C<x;y+=1,C+=1)S[y]=S[C];S.pop()}(L,H),L.length===1&&(j[F]=L[0]),j.removeListener&&this.emit("removeListener",F,k||N)}return this},l.prototype.removeAllListeners=function(F){var N,L,j;if(!(L=this._events))return this;if(!L.removeListener)return arguments.length===0?(this._events=o(null),this._eventsCount=0):L[F]&&(--this._eventsCount==0?this._events=o(null):delete L[F]),this;if(arguments.length===0){var H,I=r(L);for(j=0;j<I.length;++j)(H=I[j])!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=o(null),this._eventsCount=0,this}if(typeof(N=L[F])=="function")this.removeListener(F,N);else if(N)for(j=N.length-1;j>=0;j--)this.removeListener(F,N[j]);return this},l.prototype.listeners=function(F){return D(this,F,!0)},l.prototype.rawListeners=function(F){return D(this,F,!1)},l.listenerCount=function(F,N){return typeof F.listenerCount=="function"?F.listenerCount(N):B.call(F,N)},l.prototype.listenerCount=B,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("md5.js");n.exports=function(a,l,d,c){if(o.isBuffer(a)||(a=o.from(a,"binary")),l&&(o.isBuffer(l)||(l=o.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var h=d/8,u=o.alloc(h),p=o.alloc(c||0),f=o.alloc(0);h>0||c>0;){var g=new r;g.update(f),g.update(a),l&&g.update(l),f=g.digest();var m=0;if(h>0){var b=u.length-h;m=Math.min(h,f.length),f.copy(u,b,0,m),h-=m}if(m<f.length&&c>0){var _=p.length-c,w=Math.min(c,f.length-m);f.copy(p,_,m,m+w),c-=w}}return f.fill(0),{key:u,iv:p}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.CsvParserStream=s.ParserOptions=s.parseFile=s.parseStream=s.parseString=s.parse=s.FormatterOptions=s.CsvFormatterStream=s.writeToPath=s.writeToString=s.writeToBuffer=s.writeToStream=s.write=s.format=void 0;var o=t("@fast-csv/format");Object.defineProperty(s,"format",{enumerable:!0,get:function(){return o.format}}),Object.defineProperty(s,"write",{enumerable:!0,get:function(){return o.write}}),Object.defineProperty(s,"writeToStream",{enumerable:!0,get:function(){return o.writeToStream}}),Object.defineProperty(s,"writeToBuffer",{enumerable:!0,get:function(){return o.writeToBuffer}}),Object.defineProperty(s,"writeToString",{enumerable:!0,get:function(){return o.writeToString}}),Object.defineProperty(s,"writeToPath",{enumerable:!0,get:function(){return o.writeToPath}}),Object.defineProperty(s,"CsvFormatterStream",{enumerable:!0,get:function(){return o.CsvFormatterStream}}),Object.defineProperty(s,"FormatterOptions",{enumerable:!0,get:function(){return o.FormatterOptions}});var r=t("@fast-csv/parse");Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return r.parse}}),Object.defineProperty(s,"parseString",{enumerable:!0,get:function(){return r.parseString}}),Object.defineProperty(s,"parseStream",{enumerable:!0,get:function(){return r.parseStream}}),Object.defineProperty(s,"parseFile",{enumerable:!0,get:function(){return r.parseFile}}),Object.defineProperty(s,"ParserOptions",{enumerable:!0,get:function(){return r.ParserOptions}}),Object.defineProperty(s,"CsvParserStream",{enumerable:!0,get:function(){return r.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("readable-stream").Transform;function a(l){r.call(this),this._block=o.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(a,r),a.prototype._transform=function(l,d,c){var h=null;try{this.update(l,d)}catch(u){h=u}c(h)},a.prototype._flush=function(l){var d=null;try{this.push(this.digest())}catch(c){d=c}l(d)},a.prototype.update=function(l,d){if(function(g,m){if(!o.isBuffer(g)&&typeof g!="string")throw new TypeError(m+" must be a string or a buffer")}(l,"Data"),this._finalized)throw new Error("Digest already called");o.isBuffer(l)||(l=o.from(l,d));for(var c=this._block,h=0;this._blockOffset+l.length-h>=this._blockSize;){for(var u=this._blockOffset;u<this._blockSize;)c[u++]=l[h++];this._update(),this._blockOffset=0}for(;h<l.length;)c[this._blockOffset++]=l[h++];for(var p=0,f=8*l.length;f>0;++p)this._length[p]+=f,(f=this._length[p]/4294967296|0)>0&&(this._length[p]-=4294967296*f);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var d=this._digest();l!==void 0&&(d=d.toString(l)),this._block.fill(0),this._blockOffset=0;for(var c=0;c<4;++c)this._length[c]=0;return d},a.prototype._digest=function(){throw new Error("_digest is not implemented")},n.exports=a},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,n,s){var o=s;o.utils=t("./hash/utils"),o.common=t("./hash/common"),o.sha=t("./hash/sha"),o.ripemd=t("./hash/ripemd"),o.hmac=t("./hash/hmac"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,n,s){var o=t("./utils"),r=t("minimalistic-assert");function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}s.BlockHash=a,a.prototype.update=function(l,d){if(l=o.toArray(l,d),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){var c=(l=this.pending).length%this._delta8;this.pending=l.slice(l.length-c,l.length),this.pending.length===0&&(this.pending=null),l=o.join32(l,0,l.length-c,this.endian);for(var h=0;h<l.length;h+=this._delta32)this._update(l,h,h+this._delta32)}return this},a.prototype.digest=function(l){return this.update(this._pad()),r(this.pending===null),this._digest(l)},a.prototype._pad=function(){var l=this.pendingTotal,d=this._delta8,c=d-(l+this.padLength)%d,h=new Array(c+this.padLength);h[0]=128;for(var u=1;u<c;u++)h[u]=0;if(l<<=3,this.endian==="big"){for(var p=8;p<this.padLength;p++)h[u++]=0;h[u++]=0,h[u++]=0,h[u++]=0,h[u++]=0,h[u++]=l>>>24&255,h[u++]=l>>>16&255,h[u++]=l>>>8&255,h[u++]=255&l}else for(h[u++]=255&l,h[u++]=l>>>8&255,h[u++]=l>>>16&255,h[u++]=l>>>24&255,h[u++]=0,h[u++]=0,h[u++]=0,h[u++]=0,p=8;p<this.padLength;p++)h[u++]=0;return h}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,n,s){var o=t("./utils"),r=t("minimalistic-assert");function a(l,d,c){if(!(this instanceof a))return new a(l,d,c);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(d,c))}n.exports=a,a.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),r(l.length<=this.blockSize);for(var d=l.length;d<this.blockSize;d++)l.push(0);for(d=0;d<l.length;d++)l[d]^=54;for(this.inner=new this.Hash().update(l),d=0;d<l.length;d++)l[d]^=106;this.outer=new this.Hash().update(l)},a.prototype.update=function(l,d){return this.inner.update(l,d),this},a.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,n,s){var o=t("./utils"),r=t("./common"),a=o.rotl32,l=o.sum32,d=o.sum32_3,c=o.sum32_4,h=r.BlockHash;function u(){if(!(this instanceof u))return new u;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function p(E,D,B,$){return E<=15?D^B^$:E<=31?D&B|~D&$:E<=47?(D|~B)^$:E<=63?D&$|B&~$:D^(B|~$)}function f(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function g(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}o.inherits(u,h),s.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(E,D){for(var B=this.h[0],$=this.h[1],F=this.h[2],N=this.h[3],L=this.h[4],j=B,H=$,I=F,k=N,S=L,v=0;v<80;v++){var y=l(a(c(B,p(v,$,F,N),E[m[v]+D],f(v)),_[v]),L);B=L,L=N,N=a(F,10),F=$,$=y,y=l(a(c(j,p(79-v,H,I,k),E[b[v]+D],g(v)),w[v]),S),j=S,S=k,k=a(I,10),I=H,H=y}y=d(this.h[1],F,k),this.h[1]=d(this.h[2],N,S),this.h[2]=d(this.h[3],L,j),this.h[3]=d(this.h[4],B,H),this.h[4]=d(this.h[0],$,I),this.h[0]=y},u.prototype._digest=function(E){return E==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,n,s){s.sha1=t("./sha/1"),s.sha224=t("./sha/224"),s.sha256=t("./sha/256"),s.sha384=t("./sha/384"),s.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,n,s){var o=t("../utils"),r=t("../common"),a=t("./common"),l=o.rotl32,d=o.sum32,c=o.sum32_5,h=a.ft_1,u=r.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(f,u),n.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(g,m){for(var b=this.W,_=0;_<16;_++)b[_]=g[m+_];for(;_<b.length;_++)b[_]=l(b[_-3]^b[_-8]^b[_-14]^b[_-16],1);var w=this.h[0],E=this.h[1],D=this.h[2],B=this.h[3],$=this.h[4];for(_=0;_<b.length;_++){var F=~~(_/20),N=c(l(w,5),h(F,E,D,B),$,b[_],p[F]);$=B,B=D,D=l(E,30),E=w,w=N}this.h[0]=d(this.h[0],w),this.h[1]=d(this.h[1],E),this.h[2]=d(this.h[2],D),this.h[3]=d(this.h[3],B),this.h[4]=d(this.h[4],$)},f.prototype._digest=function(g){return g==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,n,s){var o=t("../utils"),r=t("./256");function a(){if(!(this instanceof a))return new a;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(a,r),n.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(l){return l==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,n,s){var o=t("../utils"),r=t("../common"),a=t("./common"),l=t("minimalistic-assert"),d=o.sum32,c=o.sum32_4,h=o.sum32_5,u=a.ch32,p=a.maj32,f=a.s0_256,g=a.s1_256,m=a.g0_256,b=a.g1_256,_=r.BlockHash,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;_.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=w,this.W=new Array(64)}o.inherits(E,_),n.exports=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(D,B){for(var $=this.W,F=0;F<16;F++)$[F]=D[B+F];for(;F<$.length;F++)$[F]=c(b($[F-2]),$[F-7],m($[F-15]),$[F-16]);var N=this.h[0],L=this.h[1],j=this.h[2],H=this.h[3],I=this.h[4],k=this.h[5],S=this.h[6],v=this.h[7];for(l(this.k.length===$.length),F=0;F<$.length;F++){var y=h(v,g(I),u(I,k,S),this.k[F],$[F]),C=d(f(N),p(N,L,j));v=S,S=k,k=I,I=d(H,y),H=j,j=L,L=N,N=d(y,C)}this.h[0]=d(this.h[0],N),this.h[1]=d(this.h[1],L),this.h[2]=d(this.h[2],j),this.h[3]=d(this.h[3],H),this.h[4]=d(this.h[4],I),this.h[5]=d(this.h[5],k),this.h[6]=d(this.h[6],S),this.h[7]=d(this.h[7],v)},E.prototype._digest=function(D){return D==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,n,s){var o=t("../utils"),r=t("./512");function a(){if(!(this instanceof a))return new a;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(a,r),n.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(l){return l==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,n,s){var o=t("../utils"),r=t("../common"),a=t("minimalistic-assert"),l=o.rotr64_hi,d=o.rotr64_lo,c=o.shr64_hi,h=o.shr64_lo,u=o.sum64,p=o.sum64_hi,f=o.sum64_lo,g=o.sum64_4_hi,m=o.sum64_4_lo,b=o.sum64_5_hi,_=o.sum64_5_lo,w=r.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function D(){if(!(this instanceof D))return new D;w.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}function B(C,x,T,M,V){var W=C&T^~C&V;return W<0&&(W+=4294967296),W}function $(C,x,T,M,V,W){var K=x&M^~x&W;return K<0&&(K+=4294967296),K}function F(C,x,T,M,V){var W=C&T^C&V^T&V;return W<0&&(W+=4294967296),W}function N(C,x,T,M,V,W){var K=x&M^x&W^M&W;return K<0&&(K+=4294967296),K}function L(C,x){var T=l(C,x,28)^l(x,C,2)^l(x,C,7);return T<0&&(T+=4294967296),T}function j(C,x){var T=d(C,x,28)^d(x,C,2)^d(x,C,7);return T<0&&(T+=4294967296),T}function H(C,x){var T=l(C,x,14)^l(C,x,18)^l(x,C,9);return T<0&&(T+=4294967296),T}function I(C,x){var T=d(C,x,14)^d(C,x,18)^d(x,C,9);return T<0&&(T+=4294967296),T}function k(C,x){var T=l(C,x,1)^l(C,x,8)^c(C,x,7);return T<0&&(T+=4294967296),T}function S(C,x){var T=d(C,x,1)^d(C,x,8)^h(C,x,7);return T<0&&(T+=4294967296),T}function v(C,x){var T=l(C,x,19)^l(x,C,29)^c(C,x,6);return T<0&&(T+=4294967296),T}function y(C,x){var T=d(C,x,19)^d(x,C,29)^h(C,x,6);return T<0&&(T+=4294967296),T}o.inherits(D,w),n.exports=D,D.blockSize=1024,D.outSize=512,D.hmacStrength=192,D.padLength=128,D.prototype._prepareBlock=function(C,x){for(var T=this.W,M=0;M<32;M++)T[M]=C[x+M];for(;M<T.length;M+=2){var V=v(T[M-4],T[M-3]),W=y(T[M-4],T[M-3]),K=T[M-14],Z=T[M-13],P=k(T[M-30],T[M-29]),G=S(T[M-30],T[M-29]),O=T[M-32],A=T[M-31];T[M]=g(V,W,K,Z,P,G,O,A),T[M+1]=m(V,W,K,Z,P,G,O,A)}},D.prototype._update=function(C,x){this._prepareBlock(C,x);var T=this.W,M=this.h[0],V=this.h[1],W=this.h[2],K=this.h[3],Z=this.h[4],P=this.h[5],G=this.h[6],O=this.h[7],A=this.h[8],z=this.h[9],X=this.h[10],ee=this.h[11],J=this.h[12],te=this.h[13],le=this.h[14],ce=this.h[15];a(this.k.length===T.length);for(var Q=0;Q<T.length;Q+=2){var oe=le,se=ce,pe=H(A,z),he=I(A,z),me=B(A,z,X,ee,J),ye=$(A,z,X,ee,J,te),xe=this.k[Q],Ie=this.k[Q+1],Le=T[Q],Ne=T[Q+1],Be=b(oe,se,pe,he,me,ye,xe,Ie,Le,Ne),tt=_(oe,se,pe,he,me,ye,xe,Ie,Le,Ne);oe=L(M,V),se=j(M,V),pe=F(M,V,W,K,Z),he=N(M,V,W,K,Z,P);var Qe=p(oe,se,pe,he),et=f(oe,se,pe,he);le=J,ce=te,J=X,te=ee,X=A,ee=z,A=p(G,O,Be,tt),z=f(O,O,Be,tt),G=Z,O=P,Z=W,P=K,W=M,K=V,M=p(Be,tt,Qe,et),V=f(Be,tt,Qe,et)}u(this.h,0,M,V),u(this.h,2,W,K),u(this.h,4,Z,P),u(this.h,6,G,O),u(this.h,8,A,z),u(this.h,10,X,ee),u(this.h,12,J,te),u(this.h,14,le,ce)},D.prototype._digest=function(C){return C==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,n,s){var o=t("../utils").rotr32;function r(d,c,h){return d&c^~d&h}function a(d,c,h){return d&c^d&h^c&h}function l(d,c,h){return d^c^h}s.ft_1=function(d,c,h,u){return d===0?r(c,h,u):d===1||d===3?l(c,h,u):d===2?a(c,h,u):void 0},s.ch32=r,s.maj32=a,s.p32=l,s.s0_256=function(d){return o(d,2)^o(d,13)^o(d,22)},s.s1_256=function(d){return o(d,6)^o(d,11)^o(d,25)},s.g0_256=function(d){return o(d,7)^o(d,18)^d>>>3},s.g1_256=function(d){return o(d,17)^o(d,19)^d>>>10}},{"../utils":437}],437:[function(t,n,s){var o=t("minimalistic-assert"),r=t("inherits");function a(h,u){return(64512&h.charCodeAt(u))==55296&&!(u<0||u+1>=h.length)&&(64512&h.charCodeAt(u+1))==56320}function l(h){return(h>>>24|h>>>8&65280|h<<8&16711680|(255&h)<<24)>>>0}function d(h){return h.length===1?"0"+h:h}function c(h){return h.length===7?"0"+h:h.length===6?"00"+h:h.length===5?"000"+h:h.length===4?"0000"+h:h.length===3?"00000"+h:h.length===2?"000000"+h:h.length===1?"0000000"+h:h}s.inherits=r,s.toArray=function(h,u){if(Array.isArray(h))return h.slice();if(!h)return[];var p=[];if(typeof h=="string")if(u){if(u==="hex")for((h=h.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(h="0"+h),g=0;g<h.length;g+=2)p.push(parseInt(h[g]+h[g+1],16))}else for(var f=0,g=0;g<h.length;g++){var m=h.charCodeAt(g);m<128?p[f++]=m:m<2048?(p[f++]=m>>6|192,p[f++]=63&m|128):a(h,g)?(m=65536+((1023&m)<<10)+(1023&h.charCodeAt(++g)),p[f++]=m>>18|240,p[f++]=m>>12&63|128,p[f++]=m>>6&63|128,p[f++]=63&m|128):(p[f++]=m>>12|224,p[f++]=m>>6&63|128,p[f++]=63&m|128)}else for(g=0;g<h.length;g++)p[g]=0|h[g];return p},s.toHex=function(h){for(var u="",p=0;p<h.length;p++)u+=d(h[p].toString(16));return u},s.htonl=l,s.toHex32=function(h,u){for(var p="",f=0;f<h.length;f++){var g=h[f];u==="little"&&(g=l(g)),p+=c(g.toString(16))}return p},s.zero2=d,s.zero8=c,s.join32=function(h,u,p,f){var g=p-u;o(g%4==0);for(var m=new Array(g/4),b=0,_=u;b<m.length;b++,_+=4){var w;w=f==="big"?h[_]<<24|h[_+1]<<16|h[_+2]<<8|h[_+3]:h[_+3]<<24|h[_+2]<<16|h[_+1]<<8|h[_],m[b]=w>>>0}return m},s.split32=function(h,u){for(var p=new Array(4*h.length),f=0,g=0;f<h.length;f++,g+=4){var m=h[f];u==="big"?(p[g]=m>>>24,p[g+1]=m>>>16&255,p[g+2]=m>>>8&255,p[g+3]=255&m):(p[g+3]=m>>>24,p[g+2]=m>>>16&255,p[g+1]=m>>>8&255,p[g]=255&m)}return p},s.rotr32=function(h,u){return h>>>u|h<<32-u},s.rotl32=function(h,u){return h<<u|h>>>32-u},s.sum32=function(h,u){return h+u>>>0},s.sum32_3=function(h,u,p){return h+u+p>>>0},s.sum32_4=function(h,u,p,f){return h+u+p+f>>>0},s.sum32_5=function(h,u,p,f,g){return h+u+p+f+g>>>0},s.sum64=function(h,u,p,f){var g=h[u],m=f+h[u+1]>>>0,b=(m<f?1:0)+p+g;h[u]=b>>>0,h[u+1]=m},s.sum64_hi=function(h,u,p,f){return(u+f>>>0<u?1:0)+h+p>>>0},s.sum64_lo=function(h,u,p,f){return u+f>>>0},s.sum64_4_hi=function(h,u,p,f,g,m,b,_){var w=0,E=u;return w+=(E=E+f>>>0)<u?1:0,w+=(E=E+m>>>0)<m?1:0,h+p+g+b+(w+=(E=E+_>>>0)<_?1:0)>>>0},s.sum64_4_lo=function(h,u,p,f,g,m,b,_){return u+f+m+_>>>0},s.sum64_5_hi=function(h,u,p,f,g,m,b,_,w,E){var D=0,B=u;return D+=(B=B+f>>>0)<u?1:0,D+=(B=B+m>>>0)<m?1:0,D+=(B=B+_>>>0)<_?1:0,h+p+g+b+w+(D+=(B=B+E>>>0)<E?1:0)>>>0},s.sum64_5_lo=function(h,u,p,f,g,m,b,_,w,E){return u+f+m+_+E>>>0},s.rotr64_hi=function(h,u,p){return(u<<32-p|h>>>p)>>>0},s.rotr64_lo=function(h,u,p){return(h<<32-p|u>>>p)>>>0},s.shr64_hi=function(h,u,p){return h>>>p},s.shr64_lo=function(h,u,p){return(h<<32-p|u>>>p)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,n,s){var o=t("hash.js"),r=t("minimalistic-crypto-utils"),a=t("minimalistic-assert");function l(d){if(!(this instanceof l))return new l(d);this.hash=d.hash,this.predResist=!!d.predResist,this.outLen=this.hash.outSize,this.minEntropy=d.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var c=r.toArray(d.entropy,d.entropyEnc||"hex"),h=r.toArray(d.nonce,d.nonceEnc||"hex"),u=r.toArray(d.pers,d.persEnc||"hex");a(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(c,h,u)}n.exports=l,l.prototype._init=function(d,c,h){var u=d.concat(c).concat(h);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var p=0;p<this.V.length;p++)this.K[p]=0,this.V[p]=1;this._update(u),this._reseed=1,this.reseedInterval=281474976710656},l.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},l.prototype._update=function(d){var c=this._hmac().update(this.V).update([0]);d&&(c=c.update(d)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),d&&(this.K=this._hmac().update(this.V).update([1]).update(d).digest(),this.V=this._hmac().update(this.V).digest())},l.prototype.reseed=function(d,c,h,u){typeof c!="string"&&(u=h,h=c,c=null),d=r.toArray(d,c),h=r.toArray(h,u),a(d.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(d.concat(h||[])),this._reseed=1},l.prototype.generate=function(d,c,h,u){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(u=h,h=c,c=null),h&&(h=r.toArray(h,u||"hex"),this._update(h));for(var p=[];p.length<d;)this.V=this._hmac().update(this.V).digest(),p=p.concat(this.V);var f=p.slice(0,d);return this._update(h),this._reseed++,r.encode(f,c)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,n,s){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */s.read=function(o,r,a,l,d){var c,h,u=8*d-l-1,p=(1<<u)-1,f=p>>1,g=-7,m=a?d-1:0,b=a?-1:1,_=o[r+m];for(m+=b,c=_&(1<<-g)-1,_>>=-g,g+=u;g>0;c=256*c+o[r+m],m+=b,g-=8);for(h=c&(1<<-g)-1,c>>=-g,g+=l;g>0;h=256*h+o[r+m],m+=b,g-=8);if(c===0)c=1-f;else{if(c===p)return h?NaN:1/0*(_?-1:1);h+=Math.pow(2,l),c-=f}return(_?-1:1)*h*Math.pow(2,c-l)},s.write=function(o,r,a,l,d,c){var h,u,p,f=8*c-d-1,g=(1<<f)-1,m=g>>1,b=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=l?0:c-1,w=l?1:-1,E=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,h=g):(h=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-h))<1&&(h--,p*=2),(r+=h+m>=1?b/p:b*Math.pow(2,1-m))*p>=2&&(h++,p/=2),h+m>=g?(u=0,h=g):h+m>=1?(u=(r*p-1)*Math.pow(2,d),h+=m):(u=r*Math.pow(2,m-1)*Math.pow(2,d),h=0));d>=8;o[a+_]=255&u,_+=w,u/=256,d-=8);for(h=h<<d|u,f+=d;f>0;o[a+_]=255&h,_+=w,h/=256,f-=8);o[a+_-w]|=128*E}},{}],440:[function(t,n,s){typeof Object.create=="function"?n.exports=function(o,r){r&&(o.super_=r,o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(o,r){if(r){o.super_=r;var a=function(){};a.prototype=r.prototype,o.prototype=new a,o.prototype.constructor=o}}},{}],441:[function(t,n,s){(function(o,r,a,l,d,c,h,u){(function(){/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(p){typeof s=="object"&&n!==void 0?n.exports=p():(typeof window<"u"?window:r!==void 0?r:typeof self<"u"?self:this).JSZip=p()})(function(){return function p(f,g,m){function b(E,D){if(!g[E]){if(!f[E]){var B=typeof t=="function"&&t;if(!D&&B)return B(E,!0);if(_)return _(E,!0);var $=new Error("Cannot find module '"+E+"'");throw $.code="MODULE_NOT_FOUND",$}var F=g[E]={exports:{}};f[E][0].call(F.exports,function(N){return b(f[E][1][N]||N)},F,F.exports,p,f,g,m)}return g[E].exports}for(var _=typeof t=="function"&&t,w=0;w<m.length;w++)b(m[w]);return b}({1:[function(p,f,g){var m=p("./utils"),b=p("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(w){for(var E,D,B,$,F,N,L,j=[],H=0,I=w.length,k=I,S=m.getTypeOf(w)!=="string";H<w.length;)k=I-H,B=S?(E=w[H++],D=H<I?w[H++]:0,H<I?w[H++]:0):(E=w.charCodeAt(H++),D=H<I?w.charCodeAt(H++):0,H<I?w.charCodeAt(H++):0),$=E>>2,F=(3&E)<<4|D>>4,N=1<k?(15&D)<<2|B>>6:64,L=2<k?63&B:64,j.push(_.charAt($)+_.charAt(F)+_.charAt(N)+_.charAt(L));return j.join("")},g.decode=function(w){var E,D,B,$,F,N,L=0,j=0,H="data:";if(w.substr(0,H.length)===H)throw new Error("Invalid base64 input, it looks like a data url.");var I,k=3*(w=w.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(w.charAt(w.length-1)===_.charAt(64)&&k--,w.charAt(w.length-2)===_.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(I=b.uint8array?new Uint8Array(0|k):new Array(0|k);L<w.length;)E=_.indexOf(w.charAt(L++))<<2|($=_.indexOf(w.charAt(L++)))>>4,D=(15&$)<<4|(F=_.indexOf(w.charAt(L++)))>>2,B=(3&F)<<6|(N=_.indexOf(w.charAt(L++))),I[j++]=E,F!==64&&(I[j++]=D),N!==64&&(I[j++]=B);return I}},{"./support":30,"./utils":32}],2:[function(p,f,g){var m=p("./external"),b=p("./stream/DataWorker"),_=p("./stream/Crc32Probe"),w=p("./stream/DataLengthProbe");function E(D,B,$,F,N){this.compressedSize=D,this.uncompressedSize=B,this.crc32=$,this.compression=F,this.compressedContent=N}E.prototype={getContentWorker:function(){var D=new b(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new w("data_length")),B=this;return D.on("end",function(){if(this.streamInfo.data_length!==B.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),D},getCompressedWorker:function(){return new b(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},E.createWorkerFrom=function(D,B,$){return D.pipe(new _).pipe(new w("uncompressedSize")).pipe(B.compressWorker($)).pipe(new w("compressedSize")).withStreamInfo("compression",B)},f.exports=E},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(p,f,g){var m=p("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},g.DEFLATE=p("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(p,f,g){var m=p("./utils"),b=function(){for(var _,w=[],E=0;E<256;E++){_=E;for(var D=0;D<8;D++)_=1&_?3988292384^_>>>1:_>>>1;w[E]=_}return w}();f.exports=function(_,w){return _!==void 0&&_.length?m.getTypeOf(_)!=="string"?function(E,D,B,$){var F=b,N=0+B;E^=-1;for(var L=0;L<N;L++)E=E>>>8^F[255&(E^D[L])];return-1^E}(0|w,_,_.length):function(E,D,B,$){var F=b,N=0+B;E^=-1;for(var L=0;L<N;L++)E=E>>>8^F[255&(E^D.charCodeAt(L))];return-1^E}(0|w,_,_.length):0}},{"./utils":32}],5:[function(p,f,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(p,f,g){var m;m=typeof Promise<"u"?Promise:p("lie"),f.exports={Promise:m}},{lie:37}],7:[function(p,f,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=p("pako"),_=p("./utils"),w=p("./stream/GenericWorker"),E=m?"uint8array":"array";function D(B,$){w.call(this,"FlateWorker/"+B),this._pako=null,this._pakoAction=B,this._pakoOptions=$,this.meta={}}g.magic="\b\0",_.inherits(D,w),D.prototype.processChunk=function(B){this.meta=B.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(E,B.data),!1)},D.prototype.flush=function(){w.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},D.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this._pako=null},D.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var B=this;this._pako.onData=function($){B.push({data:$,meta:B.meta})}},g.compressWorker=function(B){return new D("Deflate",B)},g.uncompressWorker=function(){return new D("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(p,f,g){function m(F,N){var L,j="";for(L=0;L<N;L++)j+=String.fromCharCode(255&F),F>>>=8;return j}function b(F,N,L,j,H,I){var k,S,v=F.file,y=F.compression,C=I!==E.utf8encode,x=_.transformTo("string",I(v.name)),T=_.transformTo("string",E.utf8encode(v.name)),M=v.comment,V=_.transformTo("string",I(M)),W=_.transformTo("string",E.utf8encode(M)),K=T.length!==v.name.length,Z=W.length!==M.length,P="",G="",O="",A=v.dir,z=v.date,X={crc32:0,compressedSize:0,uncompressedSize:0};N&&!L||(X.crc32=F.crc32,X.compressedSize=F.compressedSize,X.uncompressedSize=F.uncompressedSize);var ee=0;N&&(ee|=8),C||!K&&!Z||(ee|=2048);var J=0,te=0;A&&(J|=16),H==="UNIX"?(te=798,J|=function(ce,Q){var oe=ce;return ce||(oe=Q?16893:33204),(65535&oe)<<16}(v.unixPermissions,A)):(te=20,J|=function(ce){return 63&(ce||0)}(v.dosPermissions)),k=z.getUTCHours(),k<<=6,k|=z.getUTCMinutes(),k<<=5,k|=z.getUTCSeconds()/2,S=z.getUTCFullYear()-1980,S<<=4,S|=z.getUTCMonth()+1,S<<=5,S|=z.getUTCDate(),K&&(G=m(1,1)+m(D(x),4)+T,P+="up"+m(G.length,2)+G),Z&&(O=m(1,1)+m(D(V),4)+W,P+="uc"+m(O.length,2)+O);var le="";return le+=`
\0`,le+=m(ee,2),le+=y.magic,le+=m(k,2),le+=m(S,2),le+=m(X.crc32,4),le+=m(X.compressedSize,4),le+=m(X.uncompressedSize,4),le+=m(x.length,2),le+=m(P.length,2),{fileRecord:B.LOCAL_FILE_HEADER+le+x+P,dirRecord:B.CENTRAL_FILE_HEADER+m(te,2)+le+m(V.length,2)+"\0\0\0\0"+m(J,4)+m(j,4)+x+P+V}}var _=p("../utils"),w=p("../stream/GenericWorker"),E=p("../utf8"),D=p("../crc32"),B=p("../signature");function $(F,N,L,j){w.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=L,this.encodeFileName=j,this.streamFiles=F,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits($,w),$.prototype.push=function(F){var N=F.meta.percent||0,L=this.entriesCount,j=this._sources.length;this.accumulate?this.contentBuffer.push(F):(this.bytesWritten+=F.data.length,w.prototype.push.call(this,{data:F.data,meta:{currentFile:this.currentFile,percent:L?(N+100*(L-j-1))/L:100}}))},$.prototype.openedSource=function(F){this.currentSourceOffset=this.bytesWritten,this.currentFile=F.file.name;var N=this.streamFiles&&!F.file.dir;if(N){var L=b(F,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:L.fileRecord,meta:{percent:0}})}else this.accumulate=!0},$.prototype.closedSource=function(F){this.accumulate=!1;var N=this.streamFiles&&!F.file.dir,L=b(F,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(L.dirRecord),N)this.push({data:function(j){return B.DATA_DESCRIPTOR+m(j.crc32,4)+m(j.compressedSize,4)+m(j.uncompressedSize,4)}(F),meta:{percent:100}});else for(this.push({data:L.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},$.prototype.flush=function(){for(var F=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var L=this.bytesWritten-F,j=function(H,I,k,S,v){var y=_.transformTo("string",v(S));return B.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(H,2)+m(H,2)+m(I,4)+m(k,4)+m(y.length,2)+y}(this.dirRecords.length,L,F,this.zipComment,this.encodeFileName);this.push({data:j,meta:{percent:100}})},$.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},$.prototype.registerPrevious=function(F){this._sources.push(F);var N=this;return F.on("data",function(L){N.processChunk(L)}),F.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),F.on("error",function(L){N.error(L)}),this},$.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},$.prototype.error=function(F){var N=this._sources;if(!w.prototype.error.call(this,F))return!1;for(var L=0;L<N.length;L++)try{N[L].error(F)}catch{}return!0},$.prototype.lock=function(){w.prototype.lock.call(this);for(var F=this._sources,N=0;N<F.length;N++)F[N].lock()},f.exports=$},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(p,f,g){var m=p("../compressions"),b=p("./ZipFileWorker");g.generateWorker=function(_,w,E){var D=new b(w.streamFiles,E,w.platform,w.encodeFileName),B=0;try{_.forEach(function($,F){B++;var N=function(I,k){var S=I||k,v=m[S];if(!v)throw new Error(S+" is not a valid compression method !");return v}(F.options.compression,w.compression),L=F.options.compressionOptions||w.compressionOptions||{},j=F.dir,H=F.date;F._compressWorker(N,L).withStreamInfo("file",{name:$,dir:j,date:H,comment:F.comment||"",unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions}).pipe(D)}),D.entriesCount=B}catch($){D.error($)}return D}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(p,f,g){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new m;for(var _ in this)typeof this[_]!="function"&&(b[_]=this[_]);return b}}(m.prototype=p("./object")).loadAsync=p("./load"),m.support=p("./support"),m.defaults=p("./defaults"),m.version="3.10.1",m.loadAsync=function(b,_){return new m().loadAsync(b,_)},m.external=p("./external"),f.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(p,f,g){var m=p("./utils"),b=p("./external"),_=p("./utf8"),w=p("./zipEntries"),E=p("./stream/Crc32Probe"),D=p("./nodejsUtils");function B($){return new b.Promise(function(F,N){var L=$.decompressed.getContentWorker().pipe(new E);L.on("error",function(j){N(j)}).on("end",function(){L.streamInfo.crc32!==$.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):F()}).resume()})}f.exports=function($,F){var N=this;return F=m.extend(F||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),D.isNode&&D.isStream($)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",$,!0,F.optimizedBinaryString,F.base64).then(function(L){var j=new w(F);return j.load(L),j}).then(function(L){var j=[b.Promise.resolve(L)],H=L.files;if(F.checkCRC32)for(var I=0;I<H.length;I++)j.push(B(H[I]));return b.Promise.all(j)}).then(function(L){for(var j=L.shift(),H=j.files,I=0;I<H.length;I++){var k=H[I],S=k.fileNameStr,v=m.resolve(k.fileNameStr);N.file(v,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:F.createFolders}),k.dir||(N.file(v).unsafeOriginalName=S)}return j.zipComment.length&&(N.comment=j.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(p,f,g){var m=p("../utils"),b=p("../stream/GenericWorker");function _(w,E){b.call(this,"Nodejs stream input adapter for "+w),this._upstreamEnded=!1,this._bindStream(E)}m.inherits(_,b),_.prototype._bindStream=function(w){var E=this;(this._stream=w).pause(),w.on("data",function(D){E.push({data:D,meta:{percent:0}})}).on("error",function(D){E.isPaused?this.generatedError=D:E.error(D)}).on("end",function(){E.isPaused?E._upstreamEnded=!0:E.end()})},_.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},f.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(p,f,g){var m=p("readable-stream").Readable;function b(_,w,E){m.call(this,w),this._helper=_;var D=this;_.on("data",function(B,$){D.push(B)||D._helper.pause(),E&&E($)}).on("error",function(B){D.emit("error",B)}).on("end",function(){D.push(null)})}p("../utils").inherits(b,m),b.prototype._read=function(){this._helper.resume()},f.exports=b},{"../utils":32,"readable-stream":16}],14:[function(p,f,g){f.exports={isNode:a!==void 0,newBufferFrom:function(m,b){if(a.from&&a.from!==Uint8Array.from)return a.from(m,b);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new a(m,b)},allocBuffer:function(m){if(a.alloc)return a.alloc(m);var b=new a(m);return b.fill(0),b},isBuffer:function(m){return a.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(p,f,g){function m(v,y,C){var x,T=_.getTypeOf(y),M=_.extend(C||{},D);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(v=H(v)),M.createFolders&&(x=j(v))&&I.call(this,x,!0);var V=T==="string"&&M.binary===!1&&M.base64===!1;C&&C.binary!==void 0||(M.binary=!V),(y instanceof B&&y.uncompressedSize===0||M.dir||!y||y.length===0)&&(M.base64=!1,M.binary=!0,y="",M.compression="STORE",T="string");var W;W=y instanceof B||y instanceof w?y:N.isNode&&N.isStream(y)?new L(v,y):_.prepareContent(v,y,M.binary,M.optimizedBinaryString,M.base64);var K=new $(v,W,M);this.files[v]=K}var b=p("./utf8"),_=p("./utils"),w=p("./stream/GenericWorker"),E=p("./stream/StreamHelper"),D=p("./defaults"),B=p("./compressedObject"),$=p("./zipObject"),F=p("./generate"),N=p("./nodejsUtils"),L=p("./nodejs/NodejsStreamInputAdapter"),j=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var y=v.lastIndexOf("/");return 0<y?v.substring(0,y):""},H=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},I=function(v,y){return y=y!==void 0?y:D.createFolders,v=H(v),this.files[v]||m.call(this,v,null,{dir:!0,createFolders:y}),this.files[v]};function k(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var y,C,x;for(y in this.files)x=this.files[y],(C=y.slice(this.root.length,y.length))&&y.slice(0,this.root.length)===this.root&&v(C,x)},filter:function(v){var y=[];return this.forEach(function(C,x){v(C,x)&&y.push(x)}),y},file:function(v,y,C){if(arguments.length!==1)return v=this.root+v,m.call(this,v,y,C),this;if(k(v)){var x=v;return this.filter(function(M,V){return!V.dir&&x.test(M)})}var T=this.files[this.root+v];return T&&!T.dir?T:null},folder:function(v){if(!v)return this;if(k(v))return this.filter(function(T,M){return M.dir&&v.test(T)});var y=this.root+v,C=I.call(this,y),x=this.clone();return x.root=C.name,x},remove:function(v){v=this.root+v;var y=this.files[v];if(y||(v.slice(-1)!=="/"&&(v+="/"),y=this.files[v]),y&&!y.dir)delete this.files[v];else for(var C=this.filter(function(T,M){return M.name.slice(0,v.length)===v}),x=0;x<C.length;x++)delete this.files[C[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var y,C={};try{if((C=_.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");_.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var x=C.comment||this.comment||"";y=F.generateWorker(this,C,x)}catch(T){(y=new w("error")).error(T)}return new E(y,C.type||"string",C.mimeType)},generateAsync:function(v,y){return this.generateInternalStream(v).accumulate(y)},generateNodeStream:function(v,y){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(y)}};f.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(p,f,g){f.exports=p("stream")},{stream:void 0}],17:[function(p,f,g){var m=p("./DataReader");function b(_){m.call(this,_);for(var w=0;w<this.data.length;w++)_[w]=255&_[w]}p("../utils").inherits(b,m),b.prototype.byteAt=function(_){return this.data[this.zero+_]},b.prototype.lastIndexOfSignature=function(_){for(var w=_.charCodeAt(0),E=_.charCodeAt(1),D=_.charCodeAt(2),B=_.charCodeAt(3),$=this.length-4;0<=$;--$)if(this.data[$]===w&&this.data[$+1]===E&&this.data[$+2]===D&&this.data[$+3]===B)return $-this.zero;return-1},b.prototype.readAndCheckSignature=function(_){var w=_.charCodeAt(0),E=_.charCodeAt(1),D=_.charCodeAt(2),B=_.charCodeAt(3),$=this.readData(4);return w===$[0]&&E===$[1]&&D===$[2]&&B===$[3]},b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var w=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,w},f.exports=b},{"../utils":32,"./DataReader":18}],18:[function(p,f,g){var m=p("../utils");function b(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var w,E=0;for(this.checkOffset(_),w=this.index+_-1;w>=this.index;w--)E=(E<<8)+this.byteAt(w);return this.index+=_,E},readString:function(_){return m.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},f.exports=b},{"../utils":32}],19:[function(p,f,g){var m=p("./Uint8ArrayReader");function b(_){m.call(this,_)}p("../utils").inherits(b,m),b.prototype.readData=function(_){this.checkOffset(_);var w=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,w},f.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(p,f,g){var m=p("./DataReader");function b(_){m.call(this,_)}p("../utils").inherits(b,m),b.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},b.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},b.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},b.prototype.readData=function(_){this.checkOffset(_);var w=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,w},f.exports=b},{"../utils":32,"./DataReader":18}],21:[function(p,f,g){var m=p("./ArrayReader");function b(_){m.call(this,_)}p("../utils").inherits(b,m),b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var w=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,w},f.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(p,f,g){var m=p("../utils"),b=p("../support"),_=p("./ArrayReader"),w=p("./StringReader"),E=p("./NodeBufferReader"),D=p("./Uint8ArrayReader");f.exports=function(B){var $=m.getTypeOf(B);return m.checkSupport($),$!=="string"||b.uint8array?$==="nodebuffer"?new E(B):b.uint8array?new D(m.transformTo("uint8array",B)):new _(m.transformTo("array",B)):new w(B)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(p,f,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(p,f,g){var m=p("./GenericWorker"),b=p("../utils");function _(w){m.call(this,"ConvertWorker to "+w),this.destType=w}b.inherits(_,m),_.prototype.processChunk=function(w){this.push({data:b.transformTo(this.destType,w.data),meta:w.meta})},f.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(p,f,g){var m=p("./GenericWorker"),b=p("../crc32");function _(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p("../utils").inherits(_,m),_.prototype.processChunk=function(w){this.streamInfo.crc32=b(w.data,this.streamInfo.crc32||0),this.push(w)},f.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(p,f,g){var m=p("../utils"),b=p("./GenericWorker");function _(w){b.call(this,"DataLengthProbe for "+w),this.propName=w,this.withStreamInfo(w,0)}m.inherits(_,b),_.prototype.processChunk=function(w){if(w){var E=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=E+w.data.length}b.prototype.processChunk.call(this,w)},f.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(p,f,g){var m=p("../utils"),b=p("./GenericWorker");function _(w){b.call(this,"DataWorker");var E=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,w.then(function(D){E.dataIsReady=!0,E.data=D,E.max=D&&D.length||0,E.type=m.getTypeOf(D),E.isPaused||E._tickAndRepeat()},function(D){E.error(D)})}m.inherits(_,b),_.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var w=null,E=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":w=this.data.substring(this.index,E);break;case"uint8array":w=this.data.subarray(this.index,E);break;case"array":case"nodebuffer":w=this.data.slice(this.index,E)}return this.index=E,this.push({data:w,meta:{percent:this.max?this.index/this.max*100:0}})},f.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(p,f,g){function m(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,_){return this._listeners[b].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,_){if(this._listeners[b])for(var w=0;w<this._listeners[b].length;w++)this._listeners[b][w].call(this,_)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var _=this;return b.on("data",function(w){_.processChunk(w)}),b.on("end",function(){_.end()}),b.on("error",function(w){_.error(w)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,_){return this.extraStreamInfo[b]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},f.exports=m},{}],29:[function(p,f,g){var m=p("../utils"),b=p("./ConvertWorker"),_=p("./GenericWorker"),w=p("../base64"),E=p("../support"),D=p("../external"),B=null;if(E.nodestream)try{B=p("../nodejs/NodejsStreamOutputAdapter")}catch{}function $(F,N,L){var j=N;switch(N){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=N,this._mimeType=L,m.checkSupport(j),this._worker=F.pipe(new b(j)),F.lock()}catch(H){this._worker=new _("error"),this._worker.error(H)}}$.prototype={accumulate:function(F){return function(N,L){return new D.Promise(function(j,H){var I=[],k=N._internalType,S=N._outputType,v=N._mimeType;N.on("data",function(y,C){I.push(y),L&&L(C)}).on("error",function(y){I=[],H(y)}).on("end",function(){try{var y=function(C,x,T){switch(C){case"blob":return m.newBlob(m.transformTo("arraybuffer",x),T);case"base64":return w.encode(x);default:return m.transformTo(C,x)}}(S,function(C,x){var T,M=0,V=null,W=0;for(T=0;T<x.length;T++)W+=x[T].length;switch(C){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(V=new Uint8Array(W),T=0;T<x.length;T++)V.set(x[T],M),M+=x[T].length;return V;case"nodebuffer":return a.concat(x);default:throw new Error("concat : unsupported type '"+C+"'")}}(k,I),v);j(y)}catch(C){H(C)}I=[]}).resume()})}(this,F)},on:function(F,N){var L=this;return F==="data"?this._worker.on(F,function(j){N.call(L,j.data,j.meta)}):this._worker.on(F,function(){m.delay(N,arguments,L)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(F){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new B(this,{objectMode:this._outputType!=="nodebuffer"},F)}},f.exports=$},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(p,f,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=a!==void 0,g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var m=new ArrayBuffer(0);try{g.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(m),g.blob=b.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!p("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(p,f,g){for(var m=p("./utils"),b=p("./support"),_=p("./nodejsUtils"),w=p("./stream/GenericWorker"),E=new Array(256),D=0;D<256;D++)E[D]=252<=D?6:248<=D?5:240<=D?4:224<=D?3:192<=D?2:1;function B(){w.call(this,"utf-8 decode"),this.leftOver=null}function $(){w.call(this,"utf-8 encode")}E[254]=E[254]=1,g.utf8encode=function(F){return b.nodebuffer?_.newBufferFrom(F,"utf-8"):function(N){var L,j,H,I,k,S=N.length,v=0;for(I=0;I<S;I++)(64512&(j=N.charCodeAt(I)))==55296&&I+1<S&&(64512&(H=N.charCodeAt(I+1)))==56320&&(j=65536+(j-55296<<10)+(H-56320),I++),v+=j<128?1:j<2048?2:j<65536?3:4;for(L=b.uint8array?new Uint8Array(v):new Array(v),I=k=0;k<v;I++)(64512&(j=N.charCodeAt(I)))==55296&&I+1<S&&(64512&(H=N.charCodeAt(I+1)))==56320&&(j=65536+(j-55296<<10)+(H-56320),I++),j<128?L[k++]=j:(j<2048?L[k++]=192|j>>>6:(j<65536?L[k++]=224|j>>>12:(L[k++]=240|j>>>18,L[k++]=128|j>>>12&63),L[k++]=128|j>>>6&63),L[k++]=128|63&j);return L}(F)},g.utf8decode=function(F){return b.nodebuffer?m.transformTo("nodebuffer",F).toString("utf-8"):function(N){var L,j,H,I,k=N.length,S=new Array(2*k);for(L=j=0;L<k;)if((H=N[L++])<128)S[j++]=H;else if(4<(I=E[H]))S[j++]=65533,L+=I-1;else{for(H&=I===2?31:I===3?15:7;1<I&&L<k;)H=H<<6|63&N[L++],I--;1<I?S[j++]=65533:H<65536?S[j++]=H:(H-=65536,S[j++]=55296|H>>10&1023,S[j++]=56320|1023&H)}return S.length!==j&&(S.subarray?S=S.subarray(0,j):S.length=j),m.applyFromCharCode(S)}(F=m.transformTo(b.uint8array?"uint8array":"array",F))},m.inherits(B,w),B.prototype.processChunk=function(F){var N=m.transformTo(b.uint8array?"uint8array":"array",F.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var L=N;(N=new Uint8Array(L.length+this.leftOver.length)).set(this.leftOver,0),N.set(L,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var j=function(I,k){var S;for((k=k||I.length)>I.length&&(k=I.length),S=k-1;0<=S&&(192&I[S])==128;)S--;return S<0||S===0?k:S+E[I[S]]>k?S:k}(N),H=N;j!==N.length&&(b.uint8array?(H=N.subarray(0,j),this.leftOver=N.subarray(j,N.length)):(H=N.slice(0,j),this.leftOver=N.slice(j,N.length))),this.push({data:g.utf8decode(H),meta:F.meta})},B.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=B,m.inherits($,w),$.prototype.processChunk=function(F){this.push({data:g.utf8encode(F.data),meta:F.meta})},g.Utf8EncodeWorker=$},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(p,f,g){var m=p("./support"),b=p("./base64"),_=p("./nodejsUtils"),w=p("./external");function E(L){return L}function D(L,j){for(var H=0;H<L.length;++H)j[H]=255&L.charCodeAt(H);return j}p("setimmediate"),g.newBlob=function(L,j){g.checkSupport("blob");try{return new Blob([L],{type:j})}catch{try{var H=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return H.append(L),H.getBlob(j)}catch{throw new Error("Bug : can't construct the Blob.")}}};var B={stringifyByChunk:function(L,j,H){var I=[],k=0,S=L.length;if(S<=H)return String.fromCharCode.apply(null,L);for(;k<S;)j==="array"||j==="nodebuffer"?I.push(String.fromCharCode.apply(null,L.slice(k,Math.min(k+H,S)))):I.push(String.fromCharCode.apply(null,L.subarray(k,Math.min(k+H,S)))),k+=H;return I.join("")},stringifyByChar:function(L){for(var j="",H=0;H<L.length;H++)j+=String.fromCharCode(L[H]);return j},applyCanBeUsed:{uint8array:function(){try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return m.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}}()}};function $(L){var j=65536,H=g.getTypeOf(L),I=!0;if(H==="uint8array"?I=B.applyCanBeUsed.uint8array:H==="nodebuffer"&&(I=B.applyCanBeUsed.nodebuffer),I)for(;1<j;)try{return B.stringifyByChunk(L,H,j)}catch{j=Math.floor(j/2)}return B.stringifyByChar(L)}function F(L,j){for(var H=0;H<L.length;H++)j[H]=L[H];return j}g.applyFromCharCode=$;var N={};N.string={string:E,array:function(L){return D(L,new Array(L.length))},arraybuffer:function(L){return N.string.uint8array(L).buffer},uint8array:function(L){return D(L,new Uint8Array(L.length))},nodebuffer:function(L){return D(L,_.allocBuffer(L.length))}},N.array={string:$,array:E,arraybuffer:function(L){return new Uint8Array(L).buffer},uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(L)}},N.arraybuffer={string:function(L){return $(new Uint8Array(L))},array:function(L){return F(new Uint8Array(L),new Array(L.byteLength))},arraybuffer:E,uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(new Uint8Array(L))}},N.uint8array={string:$,array:function(L){return F(L,new Array(L.length))},arraybuffer:function(L){return L.buffer},uint8array:E,nodebuffer:function(L){return _.newBufferFrom(L)}},N.nodebuffer={string:$,array:function(L){return F(L,new Array(L.length))},arraybuffer:function(L){return N.nodebuffer.uint8array(L).buffer},uint8array:function(L){return F(L,new Uint8Array(L.length))},nodebuffer:E},g.transformTo=function(L,j){if(j=j||"",!L)return j;g.checkSupport(L);var H=g.getTypeOf(j);return N[H][L](j)},g.resolve=function(L){for(var j=L.split("/"),H=[],I=0;I<j.length;I++){var k=j[I];k==="."||k===""&&I!==0&&I!==j.length-1||(k===".."?H.pop():H.push(k))}return H.join("/")},g.getTypeOf=function(L){return typeof L=="string"?"string":Object.prototype.toString.call(L)==="[object Array]"?"array":m.nodebuffer&&_.isBuffer(L)?"nodebuffer":m.uint8array&&L instanceof Uint8Array?"uint8array":m.arraybuffer&&L instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(L){if(!m[L.toLowerCase()])throw new Error(L+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(L){var j,H,I="";for(H=0;H<(L||"").length;H++)I+="\\x"+((j=L.charCodeAt(H))<16?"0":"")+j.toString(16).toUpperCase();return I},g.delay=function(L,j,H){u(function(){L.apply(H||null,j||[])})},g.inherits=function(L,j){function H(){}H.prototype=j.prototype,L.prototype=new H},g.extend=function(){var L,j,H={};for(L=0;L<arguments.length;L++)for(j in arguments[L])Object.prototype.hasOwnProperty.call(arguments[L],j)&&H[j]===void 0&&(H[j]=arguments[L][j]);return H},g.prepareContent=function(L,j,H,I,k){return w.Promise.resolve(j).then(function(S){return m.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new w.Promise(function(v,y){var C=new FileReader;C.onload=function(x){v(x.target.result)},C.onerror=function(x){y(x.target.error)},C.readAsArrayBuffer(S)}):S}).then(function(S){var v=g.getTypeOf(S);return v?(v==="arraybuffer"?S=g.transformTo("uint8array",S):v==="string"&&(k?S=b.decode(S):H&&I!==!0&&(S=function(y){return D(y,m.uint8array?new Uint8Array(y.length):new Array(y.length))}(S))),S):w.Promise.reject(new Error("Can't read the data of '"+L+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(p,f,g){var m=p("./reader/readerFor"),b=p("./utils"),_=p("./signature"),w=p("./zipEntry"),E=p("./support");function D(B){this.files=[],this.loadOptions=B}D.prototype={checkSignature:function(B){if(!this.reader.readAndCheckSignature(B)){this.reader.index-=4;var $=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty($)+", expected "+b.pretty(B)+")")}},isSignature:function(B,$){var F=this.reader.index;this.reader.setIndex(B);var N=this.reader.readString(4)===$;return this.reader.setIndex(F),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var B=this.reader.readData(this.zipCommentLength),$=E.uint8array?"uint8array":"array",F=b.transformTo($,B);this.zipComment=this.loadOptions.decodeFileName(F)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var B,$,F,N=this.zip64EndOfCentralSize-44;0<N;)B=this.reader.readInt(2),$=this.reader.readInt(4),F=this.reader.readData($),this.zip64ExtensibleData[B]={id:B,length:$,value:F}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var B,$;for(B=0;B<this.files.length;B++)$=this.files[B],this.reader.setIndex($.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),$.readLocalPart(this.reader),$.handleUTF8(),$.processAttributes()},readCentralDir:function(){var B;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(B=new w({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(B);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var B=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(B<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(B);var $=B;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(B=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(B),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var F=this.centralDirOffset+this.centralDirSize;this.zip64&&(F+=20,F+=12+this.zip64EndOfCentralSize);var N=$-F;if(0<N)this.isSignature($,_.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(B){this.reader=m(B)},load:function(B){this.prepareReader(B),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},f.exports=D},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(p,f,g){var m=p("./reader/readerFor"),b=p("./utils"),_=p("./compressedObject"),w=p("./crc32"),E=p("./utf8"),D=p("./compressions"),B=p("./support");function $(F,N){this.options=F,this.loadOptions=N}$.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(F){var N,L;if(F.skip(22),this.fileNameLength=F.readInt(2),L=F.readInt(2),this.fileName=F.readData(this.fileNameLength),F.skip(L),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=function(j){for(var H in D)if(Object.prototype.hasOwnProperty.call(D,H)&&D[H].magic===j)return D[H];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,N,F.readData(this.compressedSize))},readCentralPart:function(F){this.versionMadeBy=F.readInt(2),F.skip(2),this.bitFlag=F.readInt(2),this.compressionMethod=F.readString(2),this.date=F.readDate(),this.crc32=F.readInt(4),this.compressedSize=F.readInt(4),this.uncompressedSize=F.readInt(4);var N=F.readInt(2);if(this.extraFieldsLength=F.readInt(2),this.fileCommentLength=F.readInt(2),this.diskNumberStart=F.readInt(2),this.internalFileAttributes=F.readInt(2),this.externalFileAttributes=F.readInt(4),this.localHeaderOffset=F.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");F.skip(N),this.readExtraFields(F),this.parseZIP64ExtraField(F),this.fileComment=F.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var F=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),F==0&&(this.dosPermissions=63&this.externalFileAttributes),F==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var F=m(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=F.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=F.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=F.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=F.readInt(4))}},readExtraFields:function(F){var N,L,j,H=F.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});F.index+4<H;)N=F.readInt(2),L=F.readInt(2),j=F.readData(L),this.extraFields[N]={id:N,length:L,value:j};F.setIndex(H)},handleUTF8:function(){var F=B.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=E.utf8decode(this.fileName),this.fileCommentStr=E.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var L=b.transformTo(F,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(L)}var j=this.findExtraFieldUnicodeComment();if(j!==null)this.fileCommentStr=j;else{var H=b.transformTo(F,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(H)}}},findExtraFieldUnicodePath:function(){var F=this.extraFields[28789];if(F){var N=m(F.value);return N.readInt(1)!==1||w(this.fileName)!==N.readInt(4)?null:E.utf8decode(N.readData(F.length-5))}return null},findExtraFieldUnicodeComment:function(){var F=this.extraFields[25461];if(F){var N=m(F.value);return N.readInt(1)!==1||w(this.fileComment)!==N.readInt(4)?null:E.utf8decode(N.readData(F.length-5))}return null}},f.exports=$},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(p,f,g){function m(N,L,j){this.name=N,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=L,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}}var b=p("./stream/StreamHelper"),_=p("./stream/DataWorker"),w=p("./utf8"),E=p("./compressedObject"),D=p("./stream/GenericWorker");m.prototype={internalStream:function(N){var L=null,j="string";try{if(!N)throw new Error("No output type specified.");var H=(j=N.toLowerCase())==="string"||j==="text";j!=="binarystring"&&j!=="text"||(j="string"),L=this._decompressWorker();var I=!this._dataBinary;I&&!H&&(L=L.pipe(new w.Utf8EncodeWorker)),!I&&H&&(L=L.pipe(new w.Utf8DecodeWorker))}catch(k){(L=new D("error")).error(k)}return new b(L,j,"")},async:function(N,L){return this.internalStream(N).accumulate(L)},nodeStream:function(N,L){return this.internalStream(N||"nodebuffer").toNodejsStream(L)},_compressWorker:function(N,L){if(this._data instanceof E&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var j=this._decompressWorker();return this._dataBinary||(j=j.pipe(new w.Utf8EncodeWorker)),E.createWorkerFrom(j,N,L)},_decompressWorker:function(){return this._data instanceof E?this._data.getContentWorker():this._data instanceof D?this._data:new _(this._data)}};for(var B=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],$=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},F=0;F<B.length;F++)m.prototype[B[F]]=$;f.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(p,f,g){(function(m){var b,_,w=m.MutationObserver||m.WebKitMutationObserver;if(w){var E=0,D=new w(N),B=m.document.createTextNode("");D.observe(B,{characterData:!0}),b=function(){B.data=E=++E%2}}else if(m.setImmediate||m.MessageChannel===void 0)b="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var L=m.document.createElement("script");L.onreadystatechange=function(){N(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},m.document.documentElement.appendChild(L)}:function(){setTimeout(N,0)};else{var $=new m.MessageChannel;$.port1.onmessage=N,b=function(){$.port2.postMessage(0)}}var F=[];function N(){var L,j;_=!0;for(var H=F.length;H;){for(j=F,F=[],L=-1;++L<H;)j[L]();H=F.length}_=!1}f.exports=function(L){F.push(L)!==1||_||b()}}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(p,f,g){var m=p("immediate");function b(){}var _={},w=["REJECTED"],E=["FULFILLED"],D=["PENDING"];function B(H){if(typeof H!="function")throw new TypeError("resolver must be a function");this.state=D,this.queue=[],this.outcome=void 0,H!==b&&L(this,H)}function $(H,I,k){this.promise=H,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function F(H,I,k){m(function(){var S;try{S=I(k)}catch(v){return _.reject(H,v)}S===H?_.reject(H,new TypeError("Cannot resolve promise with itself")):_.resolve(H,S)})}function N(H){var I=H&&H.then;if(H&&(typeof H=="object"||typeof H=="function")&&typeof I=="function")return function(){I.apply(H,arguments)}}function L(H,I){var k=!1;function S(C){k||(k=!0,_.reject(H,C))}function v(C){k||(k=!0,_.resolve(H,C))}var y=j(function(){I(v,S)});y.status==="error"&&S(y.value)}function j(H,I){var k={};try{k.value=H(I),k.status="success"}catch(S){k.status="error",k.value=S}return k}(f.exports=B).prototype.finally=function(H){if(typeof H!="function")return this;var I=this.constructor;return this.then(function(k){return I.resolve(H()).then(function(){return k})},function(k){return I.resolve(H()).then(function(){throw k})})},B.prototype.catch=function(H){return this.then(null,H)},B.prototype.then=function(H,I){if(typeof H!="function"&&this.state===E||typeof I!="function"&&this.state===w)return this;var k=new this.constructor(b);return this.state!==D?F(k,this.state===E?H:I,this.outcome):this.queue.push(new $(k,H,I)),k},$.prototype.callFulfilled=function(H){_.resolve(this.promise,H)},$.prototype.otherCallFulfilled=function(H){F(this.promise,this.onFulfilled,H)},$.prototype.callRejected=function(H){_.reject(this.promise,H)},$.prototype.otherCallRejected=function(H){F(this.promise,this.onRejected,H)},_.resolve=function(H,I){var k=j(N,I);if(k.status==="error")return _.reject(H,k.value);var S=k.value;if(S)L(H,S);else{H.state=E,H.outcome=I;for(var v=-1,y=H.queue.length;++v<y;)H.queue[v].callFulfilled(I)}return H},_.reject=function(H,I){H.state=w,H.outcome=I;for(var k=-1,S=H.queue.length;++k<S;)H.queue[k].callRejected(I);return H},B.resolve=function(H){return H instanceof this?H:_.resolve(new this(b),H)},B.reject=function(H){var I=new this(b);return _.reject(I,H)},B.all=function(H){var I=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=H.length,S=!1;if(!k)return this.resolve([]);for(var v=new Array(k),y=0,C=-1,x=new this(b);++C<k;)T(H[C],C);return x;function T(M,V){I.resolve(M).then(function(W){v[V]=W,++y!==k||S||(S=!0,_.resolve(x,v))},function(W){S||(S=!0,_.reject(x,W))})}},B.race=function(H){if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=H.length,k=!1;if(!I)return this.resolve([]);for(var S,v=-1,y=new this(b);++v<I;)S=H[v],this.resolve(S).then(function(C){k||(k=!0,_.resolve(y,C))},function(C){k||(k=!0,_.reject(y,C))});return y}},{immediate:36}],38:[function(p,f,g){var m={};(0,p("./lib/utils/common").assign)(m,p("./lib/deflate"),p("./lib/inflate"),p("./lib/zlib/constants")),f.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(p,f,g){var m=p("./zlib/deflate"),b=p("./utils/common"),_=p("./utils/strings"),w=p("./zlib/messages"),E=p("./zlib/zstream"),D=Object.prototype.toString;function B(F){if(!(this instanceof B))return new B(F);this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},F||{});var N=this.options;N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var L=m.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(L!==0)throw new Error(w[L]);if(N.header&&m.deflateSetHeader(this.strm,N.header),N.dictionary){var j;if(j=typeof N.dictionary=="string"?_.string2buf(N.dictionary):D.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(L=m.deflateSetDictionary(this.strm,j))!==0)throw new Error(w[L]);this._dict_set=!0}}function $(F,N){var L=new B(N);if(L.push(F,!0),L.err)throw L.msg||w[L.err];return L.result}B.prototype.push=function(F,N){var L,j,H=this.strm,I=this.options.chunkSize;if(this.ended)return!1;j=N===~~N?N:N===!0?4:0,typeof F=="string"?H.input=_.string2buf(F):D.call(F)==="[object ArrayBuffer]"?H.input=new Uint8Array(F):H.input=F,H.next_in=0,H.avail_in=H.input.length;do{if(H.avail_out===0&&(H.output=new b.Buf8(I),H.next_out=0,H.avail_out=I),(L=m.deflate(H,j))!==1&&L!==0)return this.onEnd(L),!(this.ended=!0);H.avail_out!==0&&(H.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(b.shrinkBuf(H.output,H.next_out))):this.onData(b.shrinkBuf(H.output,H.next_out)))}while((0<H.avail_in||H.avail_out===0)&&L!==1);return j===4?(L=m.deflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===0):j!==2||(this.onEnd(0),!(H.avail_out=0))},B.prototype.onData=function(F){this.chunks.push(F)},B.prototype.onEnd=function(F){F===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},g.Deflate=B,g.deflate=$,g.deflateRaw=function(F,N){return(N=N||{}).raw=!0,$(F,N)},g.gzip=function(F,N){return(N=N||{}).gzip=!0,$(F,N)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(p,f,g){var m=p("./zlib/inflate"),b=p("./utils/common"),_=p("./utils/strings"),w=p("./zlib/constants"),E=p("./zlib/messages"),D=p("./zlib/zstream"),B=p("./zlib/gzheader"),$=Object.prototype.toString;function F(L){if(!(this instanceof F))return new F(L);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},L||{});var j=this.options;j.raw&&0<=j.windowBits&&j.windowBits<16&&(j.windowBits=-j.windowBits,j.windowBits===0&&(j.windowBits=-15)),!(0<=j.windowBits&&j.windowBits<16)||L&&L.windowBits||(j.windowBits+=32),15<j.windowBits&&j.windowBits<48&&!(15&j.windowBits)&&(j.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D,this.strm.avail_out=0;var H=m.inflateInit2(this.strm,j.windowBits);if(H!==w.Z_OK)throw new Error(E[H]);this.header=new B,m.inflateGetHeader(this.strm,this.header)}function N(L,j){var H=new F(j);if(H.push(L,!0),H.err)throw H.msg||E[H.err];return H.result}F.prototype.push=function(L,j){var H,I,k,S,v,y,C=this.strm,x=this.options.chunkSize,T=this.options.dictionary,M=!1;if(this.ended)return!1;I=j===~~j?j:j===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof L=="string"?C.input=_.binstring2buf(L):$.call(L)==="[object ArrayBuffer]"?C.input=new Uint8Array(L):C.input=L,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new b.Buf8(x),C.next_out=0,C.avail_out=x),(H=m.inflate(C,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&T&&(y=typeof T=="string"?_.string2buf(T):$.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,H=m.inflateSetDictionary(this.strm,y)),H===w.Z_BUF_ERROR&&M===!0&&(H=w.Z_OK,M=!1),H!==w.Z_STREAM_END&&H!==w.Z_OK)return this.onEnd(H),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&H!==w.Z_STREAM_END&&(C.avail_in!==0||I!==w.Z_FINISH&&I!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=_.utf8border(C.output,C.next_out),S=C.next_out-k,v=_.buf2string(C.output,k),C.next_out=S,C.avail_out=x-S,S&&b.arraySet(C.output,C.output,k,S,0),this.onData(v)):this.onData(b.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(M=!0)}while((0<C.avail_in||C.avail_out===0)&&H!==w.Z_STREAM_END);return H===w.Z_STREAM_END&&(I=w.Z_FINISH),I===w.Z_FINISH?(H=m.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===w.Z_OK):I!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),!(C.avail_out=0))},F.prototype.onData=function(L){this.chunks.push(L)},F.prototype.onEnd=function(L){L===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},g.Inflate=F,g.inflate=N,g.inflateRaw=function(L,j){return(j=j||{}).raw=!0,N(L,j)},g.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(p,f,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(w){for(var E=Array.prototype.slice.call(arguments,1);E.length;){var D=E.shift();if(D){if(typeof D!="object")throw new TypeError(D+"must be non-object");for(var B in D)D.hasOwnProperty(B)&&(w[B]=D[B])}}return w},g.shrinkBuf=function(w,E){return w.length===E?w:w.subarray?w.subarray(0,E):(w.length=E,w)};var b={arraySet:function(w,E,D,B,$){if(E.subarray&&w.subarray)w.set(E.subarray(D,D+B),$);else for(var F=0;F<B;F++)w[$+F]=E[D+F]},flattenChunks:function(w){var E,D,B,$,F,N;for(E=B=0,D=w.length;E<D;E++)B+=w[E].length;for(N=new Uint8Array(B),E=$=0,D=w.length;E<D;E++)F=w[E],N.set(F,$),$+=F.length;return N}},_={arraySet:function(w,E,D,B,$){for(var F=0;F<B;F++)w[$+F]=E[D+F]},flattenChunks:function(w){return[].concat.apply([],w)}};g.setTyped=function(w){w?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,b)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,_))},g.setTyped(m)},{}],42:[function(p,f,g){var m=p("./common"),b=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var w=new m.Buf8(256),E=0;E<256;E++)w[E]=252<=E?6:248<=E?5:240<=E?4:224<=E?3:192<=E?2:1;function D(B,$){if($<65537&&(B.subarray&&_||!B.subarray&&b))return String.fromCharCode.apply(null,m.shrinkBuf(B,$));for(var F="",N=0;N<$;N++)F+=String.fromCharCode(B[N]);return F}w[254]=w[254]=1,g.string2buf=function(B){var $,F,N,L,j,H=B.length,I=0;for(L=0;L<H;L++)(64512&(F=B.charCodeAt(L)))==55296&&L+1<H&&(64512&(N=B.charCodeAt(L+1)))==56320&&(F=65536+(F-55296<<10)+(N-56320),L++),I+=F<128?1:F<2048?2:F<65536?3:4;for($=new m.Buf8(I),L=j=0;j<I;L++)(64512&(F=B.charCodeAt(L)))==55296&&L+1<H&&(64512&(N=B.charCodeAt(L+1)))==56320&&(F=65536+(F-55296<<10)+(N-56320),L++),F<128?$[j++]=F:(F<2048?$[j++]=192|F>>>6:(F<65536?$[j++]=224|F>>>12:($[j++]=240|F>>>18,$[j++]=128|F>>>12&63),$[j++]=128|F>>>6&63),$[j++]=128|63&F);return $},g.buf2binstring=function(B){return D(B,B.length)},g.binstring2buf=function(B){for(var $=new m.Buf8(B.length),F=0,N=$.length;F<N;F++)$[F]=B.charCodeAt(F);return $},g.buf2string=function(B,$){var F,N,L,j,H=$||B.length,I=new Array(2*H);for(F=N=0;F<H;)if((L=B[F++])<128)I[N++]=L;else if(4<(j=w[L]))I[N++]=65533,F+=j-1;else{for(L&=j===2?31:j===3?15:7;1<j&&F<H;)L=L<<6|63&B[F++],j--;1<j?I[N++]=65533:L<65536?I[N++]=L:(L-=65536,I[N++]=55296|L>>10&1023,I[N++]=56320|1023&L)}return D(I,N)},g.utf8border=function(B,$){var F;for(($=$||B.length)>B.length&&($=B.length),F=$-1;0<=F&&(192&B[F])==128;)F--;return F<0||F===0?$:F+w[B[F]]>$?F:$}},{"./common":41}],43:[function(p,f,g){f.exports=function(m,b,_,w){for(var E=65535&m|0,D=m>>>16&65535|0,B=0;_!==0;){for(_-=B=2e3<_?2e3:_;D=D+(E=E+b[w++]|0)|0,--B;);E%=65521,D%=65521}return E|D<<16|0}},{}],44:[function(p,f,g){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(p,f,g){var m=function(){for(var b,_=[],w=0;w<256;w++){b=w;for(var E=0;E<8;E++)b=1&b?3988292384^b>>>1:b>>>1;_[w]=b}return _}();f.exports=function(b,_,w,E){var D=m,B=E+w;b^=-1;for(var $=E;$<B;$++)b=b>>>8^D[255&(b^_[$])];return-1^b}},{}],46:[function(p,f,g){var m,b=p("../utils/common"),_=p("./trees"),w=p("./adler32"),E=p("./crc32"),D=p("./messages"),B=-2,$=258,F=262,N=113;function L(P,G){return P.msg=D[G],G}function j(P){return(P<<1)-(4<P?9:0)}function H(P){for(var G=P.length;0<=--G;)P[G]=0}function I(P){var G=P.state,O=G.pending;O>P.avail_out&&(O=P.avail_out),O!==0&&(b.arraySet(P.output,G.pending_buf,G.pending_out,O,P.next_out),P.next_out+=O,G.pending_out+=O,P.total_out+=O,P.avail_out-=O,G.pending-=O,G.pending===0&&(G.pending_out=0))}function k(P,G){_._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,G),P.block_start=P.strstart,I(P.strm)}function S(P,G){P.pending_buf[P.pending++]=G}function v(P,G){P.pending_buf[P.pending++]=G>>>8&255,P.pending_buf[P.pending++]=255&G}function y(P,G){var O,A,z=P.max_chain_length,X=P.strstart,ee=P.prev_length,J=P.nice_match,te=P.strstart>P.w_size-F?P.strstart-(P.w_size-F):0,le=P.window,ce=P.w_mask,Q=P.prev,oe=P.strstart+$,se=le[X+ee-1],pe=le[X+ee];P.prev_length>=P.good_match&&(z>>=2),J>P.lookahead&&(J=P.lookahead);do if(le[(O=G)+ee]===pe&&le[O+ee-1]===se&&le[O]===le[X]&&le[++O]===le[X+1]){X+=2,O++;do;while(le[++X]===le[++O]&&le[++X]===le[++O]&&le[++X]===le[++O]&&le[++X]===le[++O]&&le[++X]===le[++O]&&le[++X]===le[++O]&&le[++X]===le[++O]&&le[++X]===le[++O]&&X<oe);if(A=$-(oe-X),X=oe-$,ee<A){if(P.match_start=G,J<=(ee=A))break;se=le[X+ee-1],pe=le[X+ee]}}while((G=Q[G&ce])>te&&--z!=0);return ee<=P.lookahead?ee:P.lookahead}function C(P){var G,O,A,z,X,ee,J,te,le,ce,Q=P.w_size;do{if(z=P.window_size-P.lookahead-P.strstart,P.strstart>=Q+(Q-F)){for(b.arraySet(P.window,P.window,Q,Q,0),P.match_start-=Q,P.strstart-=Q,P.block_start-=Q,G=O=P.hash_size;A=P.head[--G],P.head[G]=Q<=A?A-Q:0,--O;);for(G=O=Q;A=P.prev[--G],P.prev[G]=Q<=A?A-Q:0,--O;);z+=Q}if(P.strm.avail_in===0)break;if(ee=P.strm,J=P.window,te=P.strstart+P.lookahead,ce=void 0,(le=z)<(ce=ee.avail_in)&&(ce=le),O=ce===0?0:(ee.avail_in-=ce,b.arraySet(J,ee.input,ee.next_in,ce,te),ee.state.wrap===1?ee.adler=w(ee.adler,J,ce,te):ee.state.wrap===2&&(ee.adler=E(ee.adler,J,ce,te)),ee.next_in+=ce,ee.total_in+=ce,ce),P.lookahead+=O,P.lookahead+P.insert>=3)for(X=P.strstart-P.insert,P.ins_h=P.window[X],P.ins_h=(P.ins_h<<P.hash_shift^P.window[X+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[X+3-1])&P.hash_mask,P.prev[X&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=X,X++,P.insert--,!(P.lookahead+P.insert<3)););}while(P.lookahead<F&&P.strm.avail_in!==0)}function x(P,G){for(var O,A;;){if(P.lookahead<F){if(C(P),P.lookahead<F&&G===0)return 1;if(P.lookahead===0)break}if(O=0,P.lookahead>=3&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,O=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),O!==0&&P.strstart-O<=P.w_size-F&&(P.match_length=y(P,O)),P.match_length>=3)if(A=_._tr_tally(P,P.strstart-P.match_start,P.match_length-3),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=3){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,O=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else A=_._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(A&&(k(P,!1),P.strm.avail_out===0))return 1}return P.insert=P.strstart<2?P.strstart:2,G===4?(k(P,!0),P.strm.avail_out===0?3:4):P.last_lit&&(k(P,!1),P.strm.avail_out===0)?1:2}function T(P,G){for(var O,A,z;;){if(P.lookahead<F){if(C(P),P.lookahead<F&&G===0)return 1;if(P.lookahead===0)break}if(O=0,P.lookahead>=3&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,O=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=2,O!==0&&P.prev_length<P.max_lazy_match&&P.strstart-O<=P.w_size-F&&(P.match_length=y(P,O),P.match_length<=5&&(P.strategy===1||P.match_length===3&&4096<P.strstart-P.match_start)&&(P.match_length=2)),P.prev_length>=3&&P.match_length<=P.prev_length){for(z=P.strstart+P.lookahead-3,A=_._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-3),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=z&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,O=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=2,P.strstart++,A&&(k(P,!1),P.strm.avail_out===0))return 1}else if(P.match_available){if((A=_._tr_tally(P,0,P.window[P.strstart-1]))&&k(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return 1}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(A=_._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<2?P.strstart:2,G===4?(k(P,!0),P.strm.avail_out===0?3:4):P.last_lit&&(k(P,!1),P.strm.avail_out===0)?1:2}function M(P,G,O,A,z){this.good_length=P,this.max_lazy=G,this.nice_length=O,this.max_chain=A,this.func=z}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(1146),this.dyn_dtree=new b.Buf16(122),this.bl_tree=new b.Buf16(78),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(16),this.heap=new b.Buf16(573),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(573),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(P){var G;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=2,(G=P.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?42:N,P.adler=G.wrap===2?0:1,G.last_flush=0,_._tr_init(G),0):L(P,B)}function K(P){var G=W(P);return G===0&&function(O){O.window_size=2*O.w_size,H(O.head),O.max_lazy_match=m[O.level].max_lazy,O.good_match=m[O.level].good_length,O.nice_match=m[O.level].nice_length,O.max_chain_length=m[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=2,O.match_available=0,O.ins_h=0}(P.state),G}function Z(P,G,O,A,z,X){if(!P)return B;var ee=1;if(G===-1&&(G=6),A<0?(ee=0,A=-A):15<A&&(ee=2,A-=16),z<1||9<z||O!==8||A<8||15<A||G<0||9<G||X<0||4<X)return L(P,B);A===8&&(A=9);var J=new V;return(P.state=J).strm=P,J.wrap=ee,J.gzhead=null,J.w_bits=A,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=z+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+3-1)/3),J.window=new b.Buf8(2*J.w_size),J.head=new b.Buf16(J.hash_size),J.prev=new b.Buf16(J.w_size),J.lit_bufsize=1<<z+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new b.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=G,J.strategy=X,J.method=O,K(P)}m=[new M(0,0,0,0,function(P,G){var O=65535;for(O>P.pending_buf_size-5&&(O=P.pending_buf_size-5);;){if(P.lookahead<=1){if(C(P),P.lookahead===0&&G===0)return 1;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var A=P.block_start+O;if((P.strstart===0||P.strstart>=A)&&(P.lookahead=P.strstart-A,P.strstart=A,k(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-F&&(k(P,!1),P.strm.avail_out===0))return 1}return P.insert=0,G===4?(k(P,!0),P.strm.avail_out===0?3:4):(P.strstart>P.block_start&&(k(P,!1),P.strm.avail_out),1)}),new M(4,4,8,4,x),new M(4,5,16,8,x),new M(4,6,32,32,x),new M(4,4,16,16,T),new M(8,16,32,32,T),new M(8,16,128,128,T),new M(8,32,128,256,T),new M(32,128,258,1024,T),new M(32,258,258,4096,T)],g.deflateInit=function(P,G){return Z(P,G,8,15,8,0)},g.deflateInit2=Z,g.deflateReset=K,g.deflateResetKeep=W,g.deflateSetHeader=function(P,G){return P&&P.state?P.state.wrap!==2?B:(P.state.gzhead=G,0):B},g.deflate=function(P,G){var O,A,z,X;if(!P||!P.state||5<G||G<0)return P?L(P,B):B;if(A=P.state,!P.output||!P.input&&P.avail_in!==0||A.status===666&&G!==4)return L(P,P.avail_out===0?-5:B);if(A.strm=P,O=A.last_flush,A.last_flush=G,A.status===42)if(A.wrap===2)P.adler=0,S(A,31),S(A,139),S(A,8),A.gzhead?(S(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),S(A,255&A.gzhead.time),S(A,A.gzhead.time>>8&255),S(A,A.gzhead.time>>16&255),S(A,A.gzhead.time>>24&255),S(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),S(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(S(A,255&A.gzhead.extra.length),S(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(P.adler=E(P.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(S(A,0),S(A,0),S(A,0),S(A,0),S(A,0),S(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),S(A,3),A.status=N);else{var ee=8+(A.w_bits-8<<4)<<8;ee|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(ee|=32),ee+=31-ee%31,A.status=N,v(A,ee),A.strstart!==0&&(v(A,P.adler>>>16),v(A,65535&P.adler)),P.adler=1}if(A.status===69)if(A.gzhead.extra){for(z=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>z&&(P.adler=E(P.adler,A.pending_buf,A.pending-z,z)),I(P),z=A.pending,A.pending!==A.pending_buf_size));)S(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>z&&(P.adler=E(P.adler,A.pending_buf,A.pending-z,z)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){z=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>z&&(P.adler=E(P.adler,A.pending_buf,A.pending-z,z)),I(P),z=A.pending,A.pending===A.pending_buf_size)){X=1;break}X=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,S(A,X)}while(X!==0);A.gzhead.hcrc&&A.pending>z&&(P.adler=E(P.adler,A.pending_buf,A.pending-z,z)),X===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){z=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>z&&(P.adler=E(P.adler,A.pending_buf,A.pending-z,z)),I(P),z=A.pending,A.pending===A.pending_buf_size)){X=1;break}X=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,S(A,X)}while(X!==0);A.gzhead.hcrc&&A.pending>z&&(P.adler=E(P.adler,A.pending_buf,A.pending-z,z)),X===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&I(P),A.pending+2<=A.pending_buf_size&&(S(A,255&P.adler),S(A,P.adler>>8&255),P.adler=0,A.status=N)):A.status=N),A.pending!==0){if(I(P),P.avail_out===0)return A.last_flush=-1,0}else if(P.avail_in===0&&j(G)<=j(O)&&G!==4)return L(P,-5);if(A.status===666&&P.avail_in!==0)return L(P,-5);if(P.avail_in!==0||A.lookahead!==0||G!==0&&A.status!==666){var J=A.strategy===2?function(te,le){for(var ce;;){if(te.lookahead===0&&(C(te),te.lookahead===0)){if(le===0)return 1;break}if(te.match_length=0,ce=_._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++,ce&&(k(te,!1),te.strm.avail_out===0))return 1}return te.insert=0,le===4?(k(te,!0),te.strm.avail_out===0?3:4):te.last_lit&&(k(te,!1),te.strm.avail_out===0)?1:2}(A,G):A.strategy===3?function(te,le){for(var ce,Q,oe,se,pe=te.window;;){if(te.lookahead<=$){if(C(te),te.lookahead<=$&&le===0)return 1;if(te.lookahead===0)break}if(te.match_length=0,te.lookahead>=3&&0<te.strstart&&(Q=pe[oe=te.strstart-1])===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]){se=te.strstart+$;do;while(Q===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]&&Q===pe[++oe]&&oe<se);te.match_length=$-(se-oe),te.match_length>te.lookahead&&(te.match_length=te.lookahead)}if(te.match_length>=3?(ce=_._tr_tally(te,1,te.match_length-3),te.lookahead-=te.match_length,te.strstart+=te.match_length,te.match_length=0):(ce=_._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++),ce&&(k(te,!1),te.strm.avail_out===0))return 1}return te.insert=0,le===4?(k(te,!0),te.strm.avail_out===0?3:4):te.last_lit&&(k(te,!1),te.strm.avail_out===0)?1:2}(A,G):m[A.level].func(A,G);if(J!==3&&J!==4||(A.status=666),J===1||J===3)return P.avail_out===0&&(A.last_flush=-1),0;if(J===2&&(G===1?_._tr_align(A):G!==5&&(_._tr_stored_block(A,0,0,!1),G===3&&(H(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),I(P),P.avail_out===0))return A.last_flush=-1,0}return G!==4?0:A.wrap<=0?1:(A.wrap===2?(S(A,255&P.adler),S(A,P.adler>>8&255),S(A,P.adler>>16&255),S(A,P.adler>>24&255),S(A,255&P.total_in),S(A,P.total_in>>8&255),S(A,P.total_in>>16&255),S(A,P.total_in>>24&255)):(v(A,P.adler>>>16),v(A,65535&P.adler)),I(P),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?0:1)},g.deflateEnd=function(P){var G;return P&&P.state?(G=P.state.status)!==42&&G!==69&&G!==73&&G!==91&&G!==103&&G!==N&&G!==666?L(P,B):(P.state=null,G===N?L(P,-3):0):B},g.deflateSetDictionary=function(P,G){var O,A,z,X,ee,J,te,le,ce=G.length;if(!P||!P.state||(X=(O=P.state).wrap)===2||X===1&&O.status!==42||O.lookahead)return B;for(X===1&&(P.adler=w(P.adler,G,ce,0)),O.wrap=0,ce>=O.w_size&&(X===0&&(H(O.head),O.strstart=0,O.block_start=0,O.insert=0),le=new b.Buf8(O.w_size),b.arraySet(le,G,ce-O.w_size,O.w_size,0),G=le,ce=O.w_size),ee=P.avail_in,J=P.next_in,te=P.input,P.avail_in=ce,P.next_in=0,P.input=G,C(O);O.lookahead>=3;){for(A=O.strstart,z=O.lookahead-2;O.ins_h=(O.ins_h<<O.hash_shift^O.window[A+3-1])&O.hash_mask,O.prev[A&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=A,A++,--z;);O.strstart=A,O.lookahead=2,C(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=2,O.match_available=0,P.next_in=J,P.input=te,P.avail_in=ee,O.wrap=X,0},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(p,f,g){f.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(p,f,g){f.exports=function(m,b){var _,w,E,D,B,$,F,N,L,j,H,I,k,S,v,y,C,x,T,M,V,W,K,Z,P;_=m.state,w=m.next_in,Z=m.input,E=w+(m.avail_in-5),D=m.next_out,P=m.output,B=D-(b-m.avail_out),$=D+(m.avail_out-257),F=_.dmax,N=_.wsize,L=_.whave,j=_.wnext,H=_.window,I=_.hold,k=_.bits,S=_.lencode,v=_.distcode,y=(1<<_.lenbits)-1,C=(1<<_.distbits)-1;e:do{k<15&&(I+=Z[w++]<<k,k+=8,I+=Z[w++]<<k,k+=8),x=S[I&y];t:for(;;){if(I>>>=T=x>>>24,k-=T,(T=x>>>16&255)==0)P[D++]=65535&x;else{if(!(16&T)){if(!(64&T)){x=S[(65535&x)+(I&(1<<T)-1)];continue t}if(32&T){_.mode=12;break e}m.msg="invalid literal/length code",_.mode=30;break e}M=65535&x,(T&=15)&&(k<T&&(I+=Z[w++]<<k,k+=8),M+=I&(1<<T)-1,I>>>=T,k-=T),k<15&&(I+=Z[w++]<<k,k+=8,I+=Z[w++]<<k,k+=8),x=v[I&C];i:for(;;){if(I>>>=T=x>>>24,k-=T,!(16&(T=x>>>16&255))){if(!(64&T)){x=v[(65535&x)+(I&(1<<T)-1)];continue i}m.msg="invalid distance code",_.mode=30;break e}if(V=65535&x,k<(T&=15)&&(I+=Z[w++]<<k,(k+=8)<T&&(I+=Z[w++]<<k,k+=8)),F<(V+=I&(1<<T)-1)){m.msg="invalid distance too far back",_.mode=30;break e}if(I>>>=T,k-=T,(T=D-B)<V){if(L<(T=V-T)&&_.sane){m.msg="invalid distance too far back",_.mode=30;break e}if(K=H,(W=0)===j){if(W+=N-T,T<M){for(M-=T;P[D++]=H[W++],--T;);W=D-V,K=P}}else if(j<T){if(W+=N+j-T,(T-=j)<M){for(M-=T;P[D++]=H[W++],--T;);if(W=0,j<M){for(M-=T=j;P[D++]=H[W++],--T;);W=D-V,K=P}}}else if(W+=j-T,T<M){for(M-=T;P[D++]=H[W++],--T;);W=D-V,K=P}for(;2<M;)P[D++]=K[W++],P[D++]=K[W++],P[D++]=K[W++],M-=3;M&&(P[D++]=K[W++],1<M&&(P[D++]=K[W++]))}else{for(W=D-V;P[D++]=P[W++],P[D++]=P[W++],P[D++]=P[W++],2<(M-=3););M&&(P[D++]=P[W++],1<M&&(P[D++]=P[W++]))}break}}break}}while(w<E&&D<$);w-=M=k>>3,I&=(1<<(k-=M<<3))-1,m.next_in=w,m.next_out=D,m.avail_in=w<E?E-w+5:5-(w-E),m.avail_out=D<$?$-D+257:257-(D-$),_.hold=I,_.bits=k}},{}],49:[function(p,f,g){var m=p("../utils/common"),b=p("./adler32"),_=p("./crc32"),w=p("./inffast"),E=p("./inftrees"),D=-2;function B(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function F(y){var C;return y&&y.state?(C=y.state,y.total_in=y.total_out=C.total=0,y.msg="",C.wrap&&(y.adler=1&C.wrap),C.mode=1,C.last=0,C.havedict=0,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new m.Buf32(852),C.distcode=C.distdyn=new m.Buf32(592),C.sane=1,C.back=-1,0):D}function N(y){var C;return y&&y.state?((C=y.state).wsize=0,C.whave=0,C.wnext=0,F(y)):D}function L(y,C){var x,T;return y&&y.state?(T=y.state,C<0?(x=0,C=-C):(x=1+(C>>4),C<48&&(C&=15)),C&&(C<8||15<C)?D:(T.window!==null&&T.wbits!==C&&(T.window=null),T.wrap=x,T.wbits=C,N(y))):D}function j(y,C){var x,T;return y?(T=new $,(y.state=T).window=null,(x=L(y,C))!==0&&(y.state=null),x):D}var H,I,k=!0;function S(y){if(k){var C;for(H=new m.Buf32(512),I=new m.Buf32(32),C=0;C<144;)y.lens[C++]=8;for(;C<256;)y.lens[C++]=9;for(;C<280;)y.lens[C++]=7;for(;C<288;)y.lens[C++]=8;for(E(1,y.lens,0,288,H,0,y.work,{bits:9}),C=0;C<32;)y.lens[C++]=5;E(2,y.lens,0,32,I,0,y.work,{bits:5}),k=!1}y.lencode=H,y.lenbits=9,y.distcode=I,y.distbits=5}function v(y,C,x,T){var M,V=y.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new m.Buf8(V.wsize)),T>=V.wsize?(m.arraySet(V.window,C,x-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(T<(M=V.wsize-V.wnext)&&(M=T),m.arraySet(V.window,C,x-T,M,V.wnext),(T-=M)?(m.arraySet(V.window,C,x-T,T,0),V.wnext=T,V.whave=V.wsize):(V.wnext+=M,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=M))),0}g.inflateReset=N,g.inflateReset2=L,g.inflateResetKeep=F,g.inflateInit=function(y){return j(y,15)},g.inflateInit2=j,g.inflate=function(y,C){var x,T,M,V,W,K,Z,P,G,O,A,z,X,ee,J,te,le,ce,Q,oe,se,pe,he,me,ye=0,xe=new m.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return D;(x=y.state).mode===12&&(x.mode=13),W=y.next_out,M=y.output,Z=y.avail_out,V=y.next_in,T=y.input,K=y.avail_in,P=x.hold,G=x.bits,O=K,A=Z,pe=0;e:for(;;)switch(x.mode){case 1:if(x.wrap===0){x.mode=13;break}for(;G<16;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(2&x.wrap&&P===35615){xe[x.check=0]=255&P,xe[1]=P>>>8&255,x.check=_(x.check,xe,2,0),G=P=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&P)<<8)+(P>>8))%31){y.msg="incorrect header check",x.mode=30;break}if((15&P)!=8){y.msg="unknown compression method",x.mode=30;break}if(G-=4,se=8+(15&(P>>>=4)),x.wbits===0)x.wbits=se;else if(se>x.wbits){y.msg="invalid window size",x.mode=30;break}x.dmax=1<<se,y.adler=x.check=1,x.mode=512&P?10:12,G=P=0;break;case 2:for(;G<16;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(x.flags=P,(255&x.flags)!=8){y.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){y.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=P>>8&1),512&x.flags&&(xe[0]=255&P,xe[1]=P>>>8&255,x.check=_(x.check,xe,2,0)),G=P=0,x.mode=3;case 3:for(;G<32;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}x.head&&(x.head.time=P),512&x.flags&&(xe[0]=255&P,xe[1]=P>>>8&255,xe[2]=P>>>16&255,xe[3]=P>>>24&255,x.check=_(x.check,xe,4,0)),G=P=0,x.mode=4;case 4:for(;G<16;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}x.head&&(x.head.xflags=255&P,x.head.os=P>>8),512&x.flags&&(xe[0]=255&P,xe[1]=P>>>8&255,x.check=_(x.check,xe,2,0)),G=P=0,x.mode=5;case 5:if(1024&x.flags){for(;G<16;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}x.length=P,x.head&&(x.head.extra_len=P),512&x.flags&&(xe[0]=255&P,xe[1]=P>>>8&255,x.check=_(x.check,xe,2,0)),G=P=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(K<(z=x.length)&&(z=K),z&&(x.head&&(se=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),m.arraySet(x.head.extra,T,V,z,se)),512&x.flags&&(x.check=_(x.check,T,z,V)),K-=z,V+=z,x.length-=z),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(K===0)break e;for(z=0;se=T[V+z++],x.head&&se&&x.length<65536&&(x.head.name+=String.fromCharCode(se)),se&&z<K;);if(512&x.flags&&(x.check=_(x.check,T,z,V)),K-=z,V+=z,se)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(K===0)break e;for(z=0;se=T[V+z++],x.head&&se&&x.length<65536&&(x.head.comment+=String.fromCharCode(se)),se&&z<K;);if(512&x.flags&&(x.check=_(x.check,T,z,V)),K-=z,V+=z,se)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;G<16;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(P!==(65535&x.check)){y.msg="header crc mismatch",x.mode=30;break}G=P=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),y.adler=x.check=0,x.mode=12;break;case 10:for(;G<32;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}y.adler=x.check=B(P),G=P=0,x.mode=11;case 11:if(x.havedict===0)return y.next_out=W,y.avail_out=Z,y.next_in=V,y.avail_in=K,x.hold=P,x.bits=G,2;y.adler=x.check=1,x.mode=12;case 12:if(C===5||C===6)break e;case 13:if(x.last){P>>>=7&G,G-=7&G,x.mode=27;break}for(;G<3;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}switch(x.last=1&P,G-=1,3&(P>>>=1)){case 0:x.mode=14;break;case 1:if(S(x),x.mode=20,C!==6)break;P>>>=2,G-=2;break e;case 2:x.mode=17;break;case 3:y.msg="invalid block type",x.mode=30}P>>>=2,G-=2;break;case 14:for(P>>>=7&G,G-=7&G;G<32;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if((65535&P)!=(P>>>16^65535)){y.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&P,G=P=0,x.mode=15,C===6)break e;case 15:x.mode=16;case 16:if(z=x.length){if(K<z&&(z=K),Z<z&&(z=Z),z===0)break e;m.arraySet(M,T,V,z,W),K-=z,V+=z,Z-=z,W+=z,x.length-=z;break}x.mode=12;break;case 17:for(;G<14;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(x.nlen=257+(31&P),P>>>=5,G-=5,x.ndist=1+(31&P),P>>>=5,G-=5,x.ncode=4+(15&P),P>>>=4,G-=4,286<x.nlen||30<x.ndist){y.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;G<3;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}x.lens[Ie[x.have++]]=7&P,P>>>=3,G-=3}for(;x.have<19;)x.lens[Ie[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,he={bits:x.lenbits},pe=E(0,x.lens,0,19,x.lencode,0,x.work,he),x.lenbits=he.bits,pe){y.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;te=(ye=x.lencode[P&(1<<x.lenbits)-1])>>>16&255,le=65535&ye,!((J=ye>>>24)<=G);){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(le<16)P>>>=J,G-=J,x.lens[x.have++]=le;else{if(le===16){for(me=J+2;G<me;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(P>>>=J,G-=J,x.have===0){y.msg="invalid bit length repeat",x.mode=30;break}se=x.lens[x.have-1],z=3+(3&P),P>>>=2,G-=2}else if(le===17){for(me=J+3;G<me;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}G-=J,se=0,z=3+(7&(P>>>=J)),P>>>=3,G-=3}else{for(me=J+7;G<me;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}G-=J,se=0,z=11+(127&(P>>>=J)),P>>>=7,G-=7}if(x.have+z>x.nlen+x.ndist){y.msg="invalid bit length repeat",x.mode=30;break}for(;z--;)x.lens[x.have++]=se}}if(x.mode===30)break;if(x.lens[256]===0){y.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,he={bits:x.lenbits},pe=E(1,x.lens,0,x.nlen,x.lencode,0,x.work,he),x.lenbits=he.bits,pe){y.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,he={bits:x.distbits},pe=E(2,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,he),x.distbits=he.bits,pe){y.msg="invalid distances set",x.mode=30;break}if(x.mode=20,C===6)break e;case 20:x.mode=21;case 21:if(6<=K&&258<=Z){y.next_out=W,y.avail_out=Z,y.next_in=V,y.avail_in=K,x.hold=P,x.bits=G,w(y,A),W=y.next_out,M=y.output,Z=y.avail_out,V=y.next_in,T=y.input,K=y.avail_in,P=x.hold,G=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;te=(ye=x.lencode[P&(1<<x.lenbits)-1])>>>16&255,le=65535&ye,!((J=ye>>>24)<=G);){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(te&&!(240&te)){for(ce=J,Q=te,oe=le;te=(ye=x.lencode[oe+((P&(1<<ce+Q)-1)>>ce)])>>>16&255,le=65535&ye,!(ce+(J=ye>>>24)<=G);){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}P>>>=ce,G-=ce,x.back+=ce}if(P>>>=J,G-=J,x.back+=J,x.length=le,te===0){x.mode=26;break}if(32&te){x.back=-1,x.mode=12;break}if(64&te){y.msg="invalid literal/length code",x.mode=30;break}x.extra=15&te,x.mode=22;case 22:if(x.extra){for(me=x.extra;G<me;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}x.length+=P&(1<<x.extra)-1,P>>>=x.extra,G-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;te=(ye=x.distcode[P&(1<<x.distbits)-1])>>>16&255,le=65535&ye,!((J=ye>>>24)<=G);){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(!(240&te)){for(ce=J,Q=te,oe=le;te=(ye=x.distcode[oe+((P&(1<<ce+Q)-1)>>ce)])>>>16&255,le=65535&ye,!(ce+(J=ye>>>24)<=G);){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}P>>>=ce,G-=ce,x.back+=ce}if(P>>>=J,G-=J,x.back+=J,64&te){y.msg="invalid distance code",x.mode=30;break}x.offset=le,x.extra=15&te,x.mode=24;case 24:if(x.extra){for(me=x.extra;G<me;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}x.offset+=P&(1<<x.extra)-1,P>>>=x.extra,G-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){y.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(Z===0)break e;if(z=A-Z,x.offset>z){if((z=x.offset-z)>x.whave&&x.sane){y.msg="invalid distance too far back",x.mode=30;break}X=z>x.wnext?(z-=x.wnext,x.wsize-z):x.wnext-z,z>x.length&&(z=x.length),ee=x.window}else ee=M,X=W-x.offset,z=x.length;for(Z<z&&(z=Z),Z-=z,x.length-=z;M[W++]=ee[X++],--z;);x.length===0&&(x.mode=21);break;case 26:if(Z===0)break e;M[W++]=x.length,Z--,x.mode=21;break;case 27:if(x.wrap){for(;G<32;){if(K===0)break e;K--,P|=T[V++]<<G,G+=8}if(A-=Z,y.total_out+=A,x.total+=A,A&&(y.adler=x.check=x.flags?_(x.check,M,A,W-A):b(x.check,M,A,W-A)),A=Z,(x.flags?P:B(P))!==x.check){y.msg="incorrect data check",x.mode=30;break}G=P=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;G<32;){if(K===0)break e;K--,P+=T[V++]<<G,G+=8}if(P!==(4294967295&x.total)){y.msg="incorrect length check",x.mode=30;break}G=P=0}x.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return D}return y.next_out=W,y.avail_out=Z,y.next_in=V,y.avail_in=K,x.hold=P,x.bits=G,(x.wsize||A!==y.avail_out&&x.mode<30&&(x.mode<27||C!==4))&&v(y,y.output,y.next_out,A-y.avail_out)?(x.mode=31,-4):(O-=y.avail_in,A-=y.avail_out,y.total_in+=O,y.total_out+=A,x.total+=A,x.wrap&&A&&(y.adler=x.check=x.flags?_(x.check,M,A,y.next_out-A):b(x.check,M,A,y.next_out-A)),y.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(O==0&&A===0||C===4)&&pe===0&&(pe=-5),pe)},g.inflateEnd=function(y){if(!y||!y.state)return D;var C=y.state;return C.window&&(C.window=null),y.state=null,0},g.inflateGetHeader=function(y,C){var x;return y&&y.state&&2&(x=y.state).wrap?((x.head=C).done=!1,0):D},g.inflateSetDictionary=function(y,C){var x,T=C.length;return y&&y.state?(x=y.state).wrap!==0&&x.mode!==11?D:x.mode===11&&b(1,C,T,0)!==x.check?-3:v(y,C,T,T)?(x.mode=31,-4):(x.havedict=1,0):D},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(p,f,g){var m=p("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(D,B,$,F,N,L,j,H){var I,k,S,v,y,C,x,T,M,V=H.bits,W=0,K=0,Z=0,P=0,G=0,O=0,A=0,z=0,X=0,ee=0,J=null,te=0,le=new m.Buf16(16),ce=new m.Buf16(16),Q=null,oe=0;for(W=0;W<=15;W++)le[W]=0;for(K=0;K<F;K++)le[B[$+K]]++;for(G=V,P=15;1<=P&&le[P]===0;P--);if(P<G&&(G=P),P===0)return N[L++]=20971520,N[L++]=20971520,H.bits=1,0;for(Z=1;Z<P&&le[Z]===0;Z++);for(G<Z&&(G=Z),W=z=1;W<=15;W++)if(z<<=1,(z-=le[W])<0)return-1;if(0<z&&(D===0||P!==1))return-1;for(ce[1]=0,W=1;W<15;W++)ce[W+1]=ce[W]+le[W];for(K=0;K<F;K++)B[$+K]!==0&&(j[ce[B[$+K]]++]=K);if(C=D===0?(J=Q=j,19):D===1?(J=b,te-=257,Q=_,oe-=257,256):(J=w,Q=E,-1),W=Z,y=L,A=K=ee=0,S=-1,v=(X=1<<(O=G))-1,D===1&&852<X||D===2&&592<X)return 1;for(;;){for(x=W-A,M=j[K]<C?(T=0,j[K]):j[K]>C?(T=Q[oe+j[K]],J[te+j[K]]):(T=96,0),I=1<<W-A,Z=k=1<<O;N[y+(ee>>A)+(k-=I)]=x<<24|T<<16|M|0,k!==0;);for(I=1<<W-1;ee&I;)I>>=1;if(I!==0?(ee&=I-1,ee+=I):ee=0,K++,--le[W]==0){if(W===P)break;W=B[$+j[K]]}if(G<W&&(ee&v)!==S){for(A===0&&(A=G),y+=Z,z=1<<(O=W-A);O+A<P&&!((z-=le[O+A])<=0);)O++,z<<=1;if(X+=1<<O,D===1&&852<X||D===2&&592<X)return 1;N[S=ee&v]=G<<24|O<<16|y-L|0}}return ee!==0&&(N[y+ee]=W-A<<24|64<<16|0),H.bits=G,0}},{"../utils/common":41}],51:[function(p,f,g){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(p,f,g){var m=p("../utils/common");function b(Q){for(var oe=Q.length;0<=--oe;)Q[oe]=0}var _=256,w=286,E=30,D=15,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(576);b(L);var j=new Array(60);b(j);var H=new Array(512);b(H);var I=new Array(256);b(I);var k=new Array(29);b(k);var S,v,y,C=new Array(E);function x(Q,oe,se,pe,he){this.static_tree=Q,this.extra_bits=oe,this.extra_base=se,this.elems=pe,this.max_length=he,this.has_stree=Q&&Q.length}function T(Q,oe){this.dyn_tree=Q,this.max_code=0,this.stat_desc=oe}function M(Q){return Q<256?H[Q]:H[256+(Q>>>7)]}function V(Q,oe){Q.pending_buf[Q.pending++]=255&oe,Q.pending_buf[Q.pending++]=oe>>>8&255}function W(Q,oe,se){Q.bi_valid>16-se?(Q.bi_buf|=oe<<Q.bi_valid&65535,V(Q,Q.bi_buf),Q.bi_buf=oe>>16-Q.bi_valid,Q.bi_valid+=se-16):(Q.bi_buf|=oe<<Q.bi_valid&65535,Q.bi_valid+=se)}function K(Q,oe,se){W(Q,se[2*oe],se[2*oe+1])}function Z(Q,oe){for(var se=0;se|=1&Q,Q>>>=1,se<<=1,0<--oe;);return se>>>1}function P(Q,oe,se){var pe,he,me=new Array(16),ye=0;for(pe=1;pe<=D;pe++)me[pe]=ye=ye+se[pe-1]<<1;for(he=0;he<=oe;he++){var xe=Q[2*he+1];xe!==0&&(Q[2*he]=Z(me[xe]++,xe))}}function G(Q){var oe;for(oe=0;oe<w;oe++)Q.dyn_ltree[2*oe]=0;for(oe=0;oe<E;oe++)Q.dyn_dtree[2*oe]=0;for(oe=0;oe<19;oe++)Q.bl_tree[2*oe]=0;Q.dyn_ltree[512]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function O(Q){8<Q.bi_valid?V(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function A(Q,oe,se,pe){var he=2*oe,me=2*se;return Q[he]<Q[me]||Q[he]===Q[me]&&pe[oe]<=pe[se]}function z(Q,oe,se){for(var pe=Q.heap[se],he=se<<1;he<=Q.heap_len&&(he<Q.heap_len&&A(oe,Q.heap[he+1],Q.heap[he],Q.depth)&&he++,!A(oe,pe,Q.heap[he],Q.depth));)Q.heap[se]=Q.heap[he],se=he,he<<=1;Q.heap[se]=pe}function X(Q,oe,se){var pe,he,me,ye,xe=0;if(Q.last_lit!==0)for(;pe=Q.pending_buf[Q.d_buf+2*xe]<<8|Q.pending_buf[Q.d_buf+2*xe+1],he=Q.pending_buf[Q.l_buf+xe],xe++,pe===0?K(Q,he,oe):(K(Q,(me=I[he])+_+1,oe),(ye=B[me])!==0&&W(Q,he-=k[me],ye),K(Q,me=M(--pe),se),(ye=$[me])!==0&&W(Q,pe-=C[me],ye)),xe<Q.last_lit;);K(Q,256,oe)}function ee(Q,oe){var se,pe,he,me=oe.dyn_tree,ye=oe.stat_desc.static_tree,xe=oe.stat_desc.has_stree,Ie=oe.stat_desc.elems,Le=-1;for(Q.heap_len=0,Q.heap_max=573,se=0;se<Ie;se++)me[2*se]!==0?(Q.heap[++Q.heap_len]=Le=se,Q.depth[se]=0):me[2*se+1]=0;for(;Q.heap_len<2;)me[2*(he=Q.heap[++Q.heap_len]=Le<2?++Le:0)]=1,Q.depth[he]=0,Q.opt_len--,xe&&(Q.static_len-=ye[2*he+1]);for(oe.max_code=Le,se=Q.heap_len>>1;1<=se;se--)z(Q,me,se);for(he=Ie;se=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],z(Q,me,1),pe=Q.heap[1],Q.heap[--Q.heap_max]=se,Q.heap[--Q.heap_max]=pe,me[2*he]=me[2*se]+me[2*pe],Q.depth[he]=(Q.depth[se]>=Q.depth[pe]?Q.depth[se]:Q.depth[pe])+1,me[2*se+1]=me[2*pe+1]=he,Q.heap[1]=he++,z(Q,me,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],function(Ne,Be){var tt,Qe,et,nt,$e,ke,je=Be.dyn_tree,Xe=Be.max_code,Ue=Be.stat_desc.static_tree,Bt=Be.stat_desc.has_stree,Qt=Be.stat_desc.extra_bits,ot=Be.stat_desc.extra_base,Ut=Be.stat_desc.max_length,Ot=0;for(nt=0;nt<=D;nt++)Ne.bl_count[nt]=0;for(je[2*Ne.heap[Ne.heap_max]+1]=0,tt=Ne.heap_max+1;tt<573;tt++)Ut<(nt=je[2*je[2*(Qe=Ne.heap[tt])+1]+1]+1)&&(nt=Ut,Ot++),je[2*Qe+1]=nt,Xe<Qe||(Ne.bl_count[nt]++,$e=0,ot<=Qe&&($e=Qt[Qe-ot]),ke=je[2*Qe],Ne.opt_len+=ke*(nt+$e),Bt&&(Ne.static_len+=ke*(Ue[2*Qe+1]+$e)));if(Ot!==0){do{for(nt=Ut-1;Ne.bl_count[nt]===0;)nt--;Ne.bl_count[nt]--,Ne.bl_count[nt+1]+=2,Ne.bl_count[Ut]--,Ot-=2}while(0<Ot);for(nt=Ut;nt!==0;nt--)for(Qe=Ne.bl_count[nt];Qe!==0;)Xe<(et=Ne.heap[--tt])||(je[2*et+1]!==nt&&(Ne.opt_len+=(nt-je[2*et+1])*je[2*et],je[2*et+1]=nt),Qe--)}}(Q,oe),P(me,Le,Q.bl_count)}function J(Q,oe,se){var pe,he,me=-1,ye=oe[1],xe=0,Ie=7,Le=4;for(ye===0&&(Ie=138,Le=3),oe[2*(se+1)+1]=65535,pe=0;pe<=se;pe++)he=ye,ye=oe[2*(pe+1)+1],++xe<Ie&&he===ye||(xe<Le?Q.bl_tree[2*he]+=xe:he!==0?(he!==me&&Q.bl_tree[2*he]++,Q.bl_tree[32]++):xe<=10?Q.bl_tree[34]++:Q.bl_tree[36]++,me=he,Le=(xe=0)===ye?(Ie=138,3):he===ye?(Ie=6,3):(Ie=7,4))}function te(Q,oe,se){var pe,he,me=-1,ye=oe[1],xe=0,Ie=7,Le=4;for(ye===0&&(Ie=138,Le=3),pe=0;pe<=se;pe++)if(he=ye,ye=oe[2*(pe+1)+1],!(++xe<Ie&&he===ye)){if(xe<Le)for(;K(Q,he,Q.bl_tree),--xe!=0;);else he!==0?(he!==me&&(K(Q,he,Q.bl_tree),xe--),K(Q,16,Q.bl_tree),W(Q,xe-3,2)):xe<=10?(K(Q,17,Q.bl_tree),W(Q,xe-3,3)):(K(Q,18,Q.bl_tree),W(Q,xe-11,7));me=he,Le=(xe=0)===ye?(Ie=138,3):he===ye?(Ie=6,3):(Ie=7,4)}}b(C);var le=!1;function ce(Q,oe,se,pe){W(Q,0+(pe?1:0),3),function(he,me,ye,xe){O(he),V(he,ye),V(he,~ye),m.arraySet(he.pending_buf,he.window,me,ye,he.pending),he.pending+=ye}(Q,oe,se)}g._tr_init=function(Q){le||(function(){var oe,se,pe,he,me,ye=new Array(16);for(he=pe=0;he<28;he++)for(k[he]=pe,oe=0;oe<1<<B[he];oe++)I[pe++]=he;for(I[pe-1]=he,he=me=0;he<16;he++)for(C[he]=me,oe=0;oe<1<<$[he];oe++)H[me++]=he;for(me>>=7;he<E;he++)for(C[he]=me<<7,oe=0;oe<1<<$[he]-7;oe++)H[256+me++]=he;for(se=0;se<=D;se++)ye[se]=0;for(oe=0;oe<=143;)L[2*oe+1]=8,oe++,ye[8]++;for(;oe<=255;)L[2*oe+1]=9,oe++,ye[9]++;for(;oe<=279;)L[2*oe+1]=7,oe++,ye[7]++;for(;oe<=287;)L[2*oe+1]=8,oe++,ye[8]++;for(P(L,287,ye),oe=0;oe<E;oe++)j[2*oe+1]=5,j[2*oe]=Z(oe,5);S=new x(L,B,257,w,D),v=new x(j,$,0,E,D),y=new x(new Array(0),F,0,19,7)}(),le=!0),Q.l_desc=new T(Q.dyn_ltree,S),Q.d_desc=new T(Q.dyn_dtree,v),Q.bl_desc=new T(Q.bl_tree,y),Q.bi_buf=0,Q.bi_valid=0,G(Q)},g._tr_stored_block=ce,g._tr_flush_block=function(Q,oe,se,pe){var he,me,ye=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=function(xe){var Ie,Le=4093624447;for(Ie=0;Ie<=31;Ie++,Le>>>=1)if(1&Le&&xe.dyn_ltree[2*Ie]!==0)return 0;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return 1;for(Ie=32;Ie<_;Ie++)if(xe.dyn_ltree[2*Ie]!==0)return 1;return 0}(Q)),ee(Q,Q.l_desc),ee(Q,Q.d_desc),ye=function(xe){var Ie;for(J(xe,xe.dyn_ltree,xe.l_desc.max_code),J(xe,xe.dyn_dtree,xe.d_desc.max_code),ee(xe,xe.bl_desc),Ie=18;3<=Ie&&xe.bl_tree[2*N[Ie]+1]===0;Ie--);return xe.opt_len+=3*(Ie+1)+5+5+4,Ie}(Q),he=Q.opt_len+3+7>>>3,(me=Q.static_len+3+7>>>3)<=he&&(he=me)):he=me=se+5,se+4<=he&&oe!==-1?ce(Q,oe,se,pe):Q.strategy===4||me===he?(W(Q,2+(pe?1:0),3),X(Q,L,j)):(W(Q,4+(pe?1:0),3),function(xe,Ie,Le,Ne){var Be;for(W(xe,Ie-257,5),W(xe,Le-1,5),W(xe,Ne-4,4),Be=0;Be<Ne;Be++)W(xe,xe.bl_tree[2*N[Be]+1],3);te(xe,xe.dyn_ltree,Ie-1),te(xe,xe.dyn_dtree,Le-1)}(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,ye+1),X(Q,Q.dyn_ltree,Q.dyn_dtree)),G(Q),pe&&O(Q)},g._tr_tally=function(Q,oe,se){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=oe>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&oe,Q.pending_buf[Q.l_buf+Q.last_lit]=255&se,Q.last_lit++,oe===0?Q.dyn_ltree[2*se]++:(Q.matches++,oe--,Q.dyn_ltree[2*(I[se]+_+1)]++,Q.dyn_dtree[2*M(oe)]++),Q.last_lit===Q.lit_bufsize-1},g._tr_align=function(Q){W(Q,2,3),K(Q,256,L),function(oe){oe.bi_valid===16?(V(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}(Q)}},{"../utils/common":41}],53:[function(p,f,g){f.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(p,f,g){(function(m){(function(b,_){if(!b.setImmediate){var w,E,D,B,$=1,F={},N=!1,L=b.document,j=Object.getPrototypeOf&&Object.getPrototypeOf(b);j=j&&j.setTimeout?j:b,w={}.toString.call(b.process)==="[object process]"?function(S){o.nextTick(function(){I(S)})}:function(){if(b.postMessage&&!b.importScripts){var S=!0,v=b.onmessage;return b.onmessage=function(){S=!1},b.postMessage("","*"),b.onmessage=v,S}}()?(B="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",k,!1):b.attachEvent("onmessage",k),function(S){b.postMessage(B+S,"*")}):b.MessageChannel?((D=new MessageChannel).port1.onmessage=function(S){I(S.data)},function(S){D.port2.postMessage(S)}):L&&"onreadystatechange"in L.createElement("script")?(E=L.documentElement,function(S){var v=L.createElement("script");v.onreadystatechange=function(){I(S),v.onreadystatechange=null,E.removeChild(v),v=null},E.appendChild(v)}):function(S){setTimeout(I,0,S)},j.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var v=new Array(arguments.length-1),y=0;y<v.length;y++)v[y]=arguments[y+1];var C={callback:S,args:v};return F[$]=C,w($),$++},j.clearImmediate=H}function H(S){delete F[S]}function I(S){if(N)setTimeout(I,0,S);else{var v=F[S];if(v){N=!0;try{(function(y){var C=y.callback,x=y.args;switch(x.length){case 0:C();break;case 1:C(x[0]);break;case 2:C(x[0],x[1]);break;case 3:C(x[0],x[1],x[2]);break;default:C.apply(void 0,x)}})(v)}finally{H(S),N=!1}}}}function k(S){S.source===b&&typeof S.data=="string"&&S.data.indexOf(B)===0&&I(+S.data.slice(B.length))}})(typeof self>"u"?m===void 0?this:m:self)}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,n,s){(function(o){(function(){var r=/[\\^$.*+?()[\]{}|]/g,a=RegExp(r.source),l=typeof o=="object"&&o&&o.Object===Object&&o,d=typeof self=="object"&&self&&self.Object===Object&&self,c=l||d||Function("return this")(),h=Object.prototype.toString,u=c.Symbol,p=u?u.prototype:void 0,f=p?p.toString:void 0;function g(m){if(typeof m=="string")return m;if(function(_){return typeof _=="symbol"||function(w){return!!w&&typeof w=="object"}(_)&&h.call(_)=="[object Symbol]"}(m))return f?f.call(m):"";var b=m+"";return b=="0"&&1/m==-1/0?"-0":b}n.exports=function(m){var b;return(m=(b=m)==null?"":g(b))&&a.test(m)?m.replace(r,"\\$&"):m}}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,n,s){(function(o){(function(){var r="[object Arguments]",a="[object Map]",l="[object Object]",d="[object Set]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,u=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b[r]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b[a]=b["[object Number]"]=b[l]=b["[object RegExp]"]=b[d]=b["[object String]"]=b["[object WeakMap]"]=!1;var _=typeof o=="object"&&o&&o.Object===Object&&o,w=typeof self=="object"&&self&&self.Object===Object&&self,E=_||w||Function("return this")(),D=typeof s=="object"&&s&&!s.nodeType&&s,B=D&&typeof n=="object"&&n&&!n.nodeType&&n,$=B&&B.exports===D&&_.process,F=function(){try{return $&&$.binding("util")}catch{}}(),N=F&&F.isTypedArray;function L(ne,ge,Se,Te){for(var Ye=-1,Oe=ne?ne.length:0;++Ye<Oe;){var Pe=ne[Ye];ge(Te,Pe,Se(Pe),ne)}return Te}function j(ne,ge){for(var Se=-1,Te=ne?ne.length:0;++Se<Te;)if(ge(ne[Se],Se,ne))return!0;return!1}function H(ne){var ge=!1;if(ne!=null&&typeof ne.toString!="function")try{ge=!!(ne+"")}catch{}return ge}function I(ne){var ge=-1,Se=Array(ne.size);return ne.forEach(function(Te,Ye){Se[++ge]=[Ye,Te]}),Se}function k(ne){var ge=-1,Se=Array(ne.size);return ne.forEach(function(Te){Se[++ge]=Te}),Se}var S,v,y,C=Array.prototype,x=Function.prototype,T=Object.prototype,M=E["__core-js_shared__"],V=(S=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",W=x.toString,K=T.hasOwnProperty,Z=T.toString,P=RegExp("^"+W.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=E.Symbol,O=E.Uint8Array,A=T.propertyIsEnumerable,z=C.splice,X=(v=Object.keys,y=Object,function(ne){return v(y(ne))}),ee=ut(E,"DataView"),J=ut(E,"Map"),te=ut(E,"Promise"),le=ut(E,"Set"),ce=ut(E,"WeakMap"),Q=ut(Object,"create"),oe=fe(ee),se=fe(J),pe=fe(te),he=fe(le),me=fe(ce),ye=G?G.prototype:void 0,xe=ye?ye.valueOf:void 0,Ie=ye?ye.toString:void 0;function Le(ne){var ge=-1,Se=ne?ne.length:0;for(this.clear();++ge<Se;){var Te=ne[ge];this.set(Te[0],Te[1])}}function Ne(ne){var ge=-1,Se=ne?ne.length:0;for(this.clear();++ge<Se;){var Te=ne[ge];this.set(Te[0],Te[1])}}function Be(ne){var ge=-1,Se=ne?ne.length:0;for(this.clear();++ge<Se;){var Te=ne[ge];this.set(Te[0],Te[1])}}function tt(ne){var ge=-1,Se=ne?ne.length:0;for(this.__data__=new Be;++ge<Se;)this.add(ne[ge])}function Qe(ne){this.__data__=new Ne(ne)}function et(ne,ge){var Se=lt(ne)||ft(ne)?function(Pe,Rt){for(var It=-1,Et=Array(Pe);++It<Pe;)Et[It]=Rt(It);return Et}(ne.length,String):[],Te=Se.length,Ye=!!Te;for(var Oe in ne)!ge&&!K.call(ne,Oe)||Ye&&(Oe=="length"||ni(Oe,Te))||Se.push(Oe);return Se}function nt(ne,ge){for(var Se=ne.length;Se--;)if(Ve(ne[Se][0],ge))return Se;return-1}function $e(ne,ge,Se,Te){return je(ne,function(Ye,Oe,Pe){ge(Te,Ye,Se(Ye),Pe)}),Te}Le.prototype.clear=function(){this.__data__=Q?Q(null):{}},Le.prototype.delete=function(ne){return this.has(ne)&&delete this.__data__[ne]},Le.prototype.get=function(ne){var ge=this.__data__;if(Q){var Se=ge[ne];return Se==="__lodash_hash_undefined__"?void 0:Se}return K.call(ge,ne)?ge[ne]:void 0},Le.prototype.has=function(ne){var ge=this.__data__;return Q?ge[ne]!==void 0:K.call(ge,ne)},Le.prototype.set=function(ne,ge){return this.__data__[ne]=Q&&ge===void 0?"__lodash_hash_undefined__":ge,this},Ne.prototype.clear=function(){this.__data__=[]},Ne.prototype.delete=function(ne){var ge=this.__data__,Se=nt(ge,ne);return!(Se<0)&&(Se==ge.length-1?ge.pop():z.call(ge,Se,1),!0)},Ne.prototype.get=function(ne){var ge=this.__data__,Se=nt(ge,ne);return Se<0?void 0:ge[Se][1]},Ne.prototype.has=function(ne){return nt(this.__data__,ne)>-1},Ne.prototype.set=function(ne,ge){var Se=this.__data__,Te=nt(Se,ne);return Te<0?Se.push([ne,ge]):Se[Te][1]=ge,this},Be.prototype.clear=function(){this.__data__={hash:new Le,map:new(J||Ne),string:new Le}},Be.prototype.delete=function(ne){return qt(this,ne).delete(ne)},Be.prototype.get=function(ne){return qt(this,ne).get(ne)},Be.prototype.has=function(ne){return qt(this,ne).has(ne)},Be.prototype.set=function(ne,ge){return qt(this,ne).set(ne,ge),this},tt.prototype.add=tt.prototype.push=function(ne){return this.__data__.set(ne,"__lodash_hash_undefined__"),this},tt.prototype.has=function(ne){return this.__data__.has(ne)},Qe.prototype.clear=function(){this.__data__=new Ne},Qe.prototype.delete=function(ne){return this.__data__.delete(ne)},Qe.prototype.get=function(ne){return this.__data__.get(ne)},Qe.prototype.has=function(ne){return this.__data__.has(ne)},Qe.prototype.set=function(ne,ge){var Se=this.__data__;if(Se instanceof Ne){var Te=Se.__data__;if(!J||Te.length<199)return Te.push([ne,ge]),this;Se=this.__data__=new Be(Te)}return Se.set(ne,ge),this};var ke,je=(ke=function(ne,ge){return ne&&Xe(ne,ge,Ri)},function(ne,ge){if(ne==null)return ne;if(!it(ne))return ke(ne,ge);for(var Se=ne.length,Te=-1,Ye=Object(ne);++Te<Se&&ge(Ye[Te],Te,Ye)!==!1;);return ne}),Xe=function(ne){return function(ge,Se,Te){for(var Ye=-1,Oe=Object(ge),Pe=Te(ge),Rt=Pe.length;Rt--;){var It=Pe[ne?Rt:++Ye];if(Se(Oe[It],It,Oe)===!1)break}return ge}}();function Ue(ne,ge){for(var Se=0,Te=(ge=pt(ge,ne)?[ge]:_t(ge)).length;ne!=null&&Se<Te;)ne=ne[de(ge[Se++])];return Se&&Se==Te?ne:void 0}function Bt(ne,ge){return ne!=null&&ge in Object(ne)}function Qt(ne,ge,Se,Te,Ye){return ne===ge||(ne==null||ge==null||!At(ne)&&!Ci(ge)?ne!=ne&&ge!=ge:function(Oe,Pe,Rt,It,Et,dt){var ti=lt(Oe),mi=lt(Pe),jt="[object Array]",_i="[object Array]";ti||(jt=(jt=Ht(Oe))==r?l:jt),mi||(_i=(_i=Ht(Pe))==r?l:_i);var Ai=jt==l&&!H(Oe),Xi=_i==l&&!H(Pe),Xn=jt==_i;if(Xn&&!Ai)return dt||(dt=new Qe),ti||Oi(Oe)?ri(Oe,Pe,Rt,It,Et,dt):function(ii,Kt,no,$o,pd,wn,Es){switch(no){case"[object DataView]":if(ii.byteLength!=Kt.byteLength||ii.byteOffset!=Kt.byteOffset)return!1;ii=ii.buffer,Kt=Kt.buffer;case"[object ArrayBuffer]":return!(ii.byteLength!=Kt.byteLength||!$o(new O(ii),new O(Kt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ve(+ii,+Kt);case"[object Error]":return ii.name==Kt.name&&ii.message==Kt.message;case"[object RegExp]":case"[object String]":return ii==Kt+"";case a:var so=I;case d:var Sa=2&wn;if(so||(so=k),ii.size!=Kt.size&&!Sa)return!1;var fd=Es.get(ii);if(fd)return fd==Kt;wn|=1,Es.set(ii,Kt);var Fr=ri(so(ii),so(Kt),$o,pd,wn,Es);return Es.delete(ii),Fr;case"[object Symbol]":if(xe)return xe.call(ii)==xe.call(Kt)}return!1}(Oe,Pe,jt,Rt,It,Et,dt);if(!(2&Et)){var ss=Ai&&K.call(Oe,"__wrapped__"),Mr=Xi&&K.call(Pe,"__wrapped__");if(ss||Mr){var Pr=ss?Oe.value():Oe,Br=Mr?Pe.value():Pe;return dt||(dt=new Qe),Rt(Pr,Br,It,Et,dt)}}return Xn?(dt||(dt=new Qe),function(ii,Kt,no,$o,pd,wn){var Es=2&pd,so=Ri(ii),Sa=so.length,fd=Ri(Kt).length;if(Sa!=fd&&!Es)return!1;for(var Fr=Sa;Fr--;){var oo=so[Fr];if(!(Es?oo in Kt:K.call(Kt,oo)))return!1}var Qg=wn.get(ii);if(Qg&&wn.get(Kt))return Qg==Kt;var md=!0;wn.set(ii,Kt),wn.set(Kt,ii);for(var Gu=Es;++Fr<Sa;){oo=so[Fr];var gd=ii[oo],_d=Kt[oo];if($o)var e_=Es?$o(_d,gd,oo,Kt,ii,wn):$o(gd,_d,oo,ii,Kt,wn);if(!(e_===void 0?gd===_d||no(gd,_d,$o,pd,wn):e_)){md=!1;break}Gu||(Gu=oo=="constructor")}if(md&&!Gu){var bd=ii.constructor,vd=Kt.constructor;bd==vd||!("constructor"in ii)||!("constructor"in Kt)||typeof bd=="function"&&bd instanceof bd&&typeof vd=="function"&&vd instanceof vd||(md=!1)}return wn.delete(ii),wn.delete(Kt),md}(Oe,Pe,Rt,It,Et,dt)):!1}(ne,ge,Qt,Se,Te,Ye))}function ot(ne){return!(!At(ne)||function(ge){return!!V&&V in ge}(ne))&&(vt(ne)||H(ne)?P:g).test(fe(ne))}function Ut(ne){return typeof ne=="function"?ne:ne==null?pn:typeof ne=="object"?lt(ne)?function(Te,Ye){return pt(Te)&&Xt(Ye)?si(de(Te),Ye):function(Oe){var Pe=function(Rt,It,Et){var dt=Rt==null?void 0:Ue(Rt,It);return dt===void 0?Et:dt}(Oe,Te);return Pe===void 0&&Pe===Ye?function(Rt,It){return Rt!=null&&function(Et,dt,ti){dt=pt(dt,Et)?[dt]:_t(dt);for(var mi,jt=-1,_i=dt.length;++jt<_i;){var Ai=de(dt[jt]);if(!(mi=Et!=null&&ti(Et,Ai)))break;Et=Et[Ai]}return mi||!!(_i=Et?Et.length:0)&&gt(_i)&&ni(Ai,_i)&&(lt(Et)||ft(Et))}(Rt,It,Bt)}(Oe,Te):Qt(Ye,Pe,void 0,3)}}(ne[0],ne[1]):function(Te){var Ye=function(Oe){for(var Pe=Ri(Oe),Rt=Pe.length;Rt--;){var It=Pe[Rt],Et=Oe[It];Pe[Rt]=[It,Et,Xt(Et)]}return Pe}(Te);return Ye.length==1&&Ye[0][2]?si(Ye[0][0],Ye[0][1]):function(Oe){return Oe===Te||function(Pe,Rt,It,Et){var dt=It.length,ti=dt,mi=!Et;if(Pe==null)return!ti;for(Pe=Object(Pe);dt--;){var jt=It[dt];if(mi&&jt[2]?jt[1]!==Pe[jt[0]]:!(jt[0]in Pe))return!1}for(;++dt<ti;){var _i=(jt=It[dt])[0],Ai=Pe[_i],Xi=jt[1];if(mi&&jt[2]){if(Ai===void 0&&!(_i in Pe))return!1}else{var Xn=new Qe;if(Et)var ss=Et(Ai,Xi,_i,Pe,Rt,Xn);if(!(ss===void 0?Qt(Xi,Ai,Et,3,Xn):ss))return!1}}return!0}(Oe,Te,Ye)}}(ne):pt(ge=ne)?(Se=de(ge),function(Te){return Te==null?void 0:Te[Se]}):function(Te){return function(Ye){return Ue(Ye,Te)}}(ge);var ge,Se}function Ot(ne){if(Se=(ge=ne)&&ge.constructor,Te=typeof Se=="function"&&Se.prototype||T,ge!==Te)return X(ne);var ge,Se,Te,Ye=[];for(var Oe in Object(ne))K.call(ne,Oe)&&Oe!="constructor"&&Ye.push(Oe);return Ye}function _t(ne){return lt(ne)?ne:yt(ne)}function ri(ne,ge,Se,Te,Ye,Oe){var Pe=2&Ye,Rt=ne.length,It=ge.length;if(Rt!=It&&!(Pe&&It>Rt))return!1;var Et=Oe.get(ne);if(Et&&Oe.get(ge))return Et==ge;var dt=-1,ti=!0,mi=1&Ye?new tt:void 0;for(Oe.set(ne,ge),Oe.set(ge,ne);++dt<Rt;){var jt=ne[dt],_i=ge[dt];if(Te)var Ai=Pe?Te(_i,jt,dt,ge,ne,Oe):Te(jt,_i,dt,ne,ge,Oe);if(Ai!==void 0){if(Ai)continue;ti=!1;break}if(mi){if(!j(ge,function(Xi,Xn){if(!mi.has(Xn)&&(jt===Xi||Se(jt,Xi,Te,Ye,Oe)))return mi.add(Xn)})){ti=!1;break}}else if(jt!==_i&&!Se(jt,_i,Te,Ye,Oe)){ti=!1;break}}return Oe.delete(ne),Oe.delete(ge),ti}function qt(ne,ge){var Se,Te,Ye=ne.__data__;return((Te=typeof(Se=ge))=="string"||Te=="number"||Te=="symbol"||Te=="boolean"?Se!=="__proto__":Se===null)?Ye[typeof ge=="string"?"string":"hash"]:Ye.map}function ut(ne,ge){var Se=function(Te,Ye){return Te==null?void 0:Te[Ye]}(ne,ge);return ot(Se)?Se:void 0}var Ht=function(ne){return Z.call(ne)};function ni(ne,ge){return!!(ge=ge??9007199254740991)&&(typeof ne=="number"||m.test(ne))&&ne>-1&&ne%1==0&&ne<ge}function pt(ne,ge){if(lt(ne))return!1;var Se=typeof ne;return!(Se!="number"&&Se!="symbol"&&Se!="boolean"&&ne!=null&&!ui(ne))||h.test(ne)||!c.test(ne)||ge!=null&&ne in Object(ge)}function Xt(ne){return ne==ne&&!At(ne)}function si(ne,ge){return function(Se){return Se!=null&&Se[ne]===ge&&(ge!==void 0||ne in Object(Se))}}(ee&&Ht(new ee(new ArrayBuffer(1)))!="[object DataView]"||J&&Ht(new J)!=a||te&&Ht(te.resolve())!="[object Promise]"||le&&Ht(new le)!=d||ce&&Ht(new ce)!="[object WeakMap]")&&(Ht=function(ne){var ge=Z.call(ne),Se=ge==l?ne.constructor:void 0,Te=Se?fe(Se):void 0;if(Te)switch(Te){case oe:return"[object DataView]";case se:return a;case pe:return"[object Promise]";case he:return d;case me:return"[object WeakMap]"}return ge});var yt=at(function(ne){var ge;ne=(ge=ne)==null?"":function(Te){if(typeof Te=="string")return Te;if(ui(Te))return Ie?Ie.call(Te):"";var Ye=Te+"";return Ye=="0"&&1/Te==-1/0?"-0":Ye}(ge);var Se=[];return u.test(ne)&&Se.push(""),ne.replace(p,function(Te,Ye,Oe,Pe){Se.push(Oe?Pe.replace(f,"$1"):Ye||Te)}),Se});function de(ne){if(typeof ne=="string"||ui(ne))return ne;var ge=ne+"";return ge=="0"&&1/ne==-1/0?"-0":ge}function fe(ne){if(ne!=null){try{return W.call(ne)}catch{}try{return ne+""}catch{}}return""}var we,Fe=(we=function(ne,ge,Se){K.call(ne,Se)?ne[Se].push(ge):ne[Se]=[ge]},function(ne,ge){var Se=lt(ne)?L:$e,Te={};return Se(ne,we,Ut(ge),Te)});function at(ne,ge){if(typeof ne!="function"||ge&&typeof ge!="function")throw new TypeError("Expected a function");var Se=function(){var Te=arguments,Ye=ge?ge.apply(this,Te):Te[0],Oe=Se.cache;if(Oe.has(Ye))return Oe.get(Ye);var Pe=ne.apply(this,Te);return Se.cache=Oe.set(Ye,Pe),Pe};return Se.cache=new(at.Cache||Be),Se}function Ve(ne,ge){return ne===ge||ne!=ne&&ge!=ge}function ft(ne){return function(ge){return Ci(ge)&&it(ge)}(ne)&&K.call(ne,"callee")&&(!A.call(ne,"callee")||Z.call(ne)==r)}at.Cache=Be;var lt=Array.isArray;function it(ne){return ne!=null&&gt(ne.length)&&!vt(ne)}function vt(ne){var ge=At(ne)?Z.call(ne):"";return ge=="[object Function]"||ge=="[object GeneratorFunction]"}function gt(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=9007199254740991}function At(ne){var ge=typeof ne;return!!ne&&(ge=="object"||ge=="function")}function Ci(ne){return!!ne&&typeof ne=="object"}function ui(ne){return typeof ne=="symbol"||Ci(ne)&&Z.call(ne)=="[object Symbol]"}var Oi=N?function(ne){return function(ge){return ne(ge)}}(N):function(ne){return Ci(ne)&&gt(ne.length)&&!!b[Z.call(ne)]};function Ri(ne){return it(ne)?et(ne):Ot(ne)}function pn(ne){return ne}n.exports=Fe}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,n,s){var o=Object.prototype.toString;n.exports=function(r){return r===!0||r===!1||function(a){return!!a&&typeof a=="object"}(r)&&o.call(r)=="[object Boolean]"}},{}],445:[function(t,n,s){(function(o){(function(){var r="[object Arguments]",a="[object Map]",l="[object Object]",d="[object Set]",c=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[a]=u["[object Number]"]=u[l]=u["[object RegExp]"]=u[d]=u["[object String]"]=u["[object WeakMap]"]=!1;var p=typeof o=="object"&&o&&o.Object===Object&&o,f=typeof self=="object"&&self&&self.Object===Object&&self,g=p||f||Function("return this")(),m=typeof s=="object"&&s&&!s.nodeType&&s,b=m&&typeof n=="object"&&n&&!n.nodeType&&n,_=b&&b.exports===m,w=_&&p.process,E=function(){try{return w&&w.binding&&w.binding("util")}catch{}}(),D=E&&E.isTypedArray;function B(de,fe){for(var we=-1,Fe=de==null?0:de.length;++we<Fe;)if(fe(de[we],we,de))return!0;return!1}function $(de){var fe=-1,we=Array(de.size);return de.forEach(function(Fe,at){we[++fe]=[at,Fe]}),we}function F(de){var fe=-1,we=Array(de.size);return de.forEach(function(Fe){we[++fe]=Fe}),we}var N,L,j,H=Array.prototype,I=Function.prototype,k=Object.prototype,S=g["__core-js_shared__"],v=I.toString,y=k.hasOwnProperty,C=(N=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",x=k.toString,T=RegExp("^"+v.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=_?g.Buffer:void 0,V=g.Symbol,W=g.Uint8Array,K=k.propertyIsEnumerable,Z=H.splice,P=V?V.toStringTag:void 0,G=Object.getOwnPropertySymbols,O=M?M.isBuffer:void 0,A=(L=Object.keys,j=Object,function(de){return L(j(de))}),z=Bt(g,"DataView"),X=Bt(g,"Map"),ee=Bt(g,"Promise"),J=Bt(g,"Set"),te=Bt(g,"WeakMap"),le=Bt(Object,"create"),ce=Ot(z),Q=Ot(X),oe=Ot(ee),se=Ot(J),pe=Ot(te),he=V?V.prototype:void 0,me=he?he.valueOf:void 0;function ye(de){var fe=-1,we=de==null?0:de.length;for(this.clear();++fe<we;){var Fe=de[fe];this.set(Fe[0],Fe[1])}}function xe(de){var fe=-1,we=de==null?0:de.length;for(this.clear();++fe<we;){var Fe=de[fe];this.set(Fe[0],Fe[1])}}function Ie(de){var fe=-1,we=de==null?0:de.length;for(this.clear();++fe<we;){var Fe=de[fe];this.set(Fe[0],Fe[1])}}function Le(de){var fe=-1,we=de==null?0:de.length;for(this.__data__=new Ie;++fe<we;)this.add(de[fe])}function Ne(de){var fe=this.__data__=new xe(de);this.size=fe.size}function Be(de,fe){var we=qt(de),Fe=!we&&ri(de),at=!we&&!Fe&&ut(de),Ve=!we&&!Fe&&!at&&si(de),ft=we||Fe||at||Ve,lt=ft?function(gt,At){for(var Ci=-1,ui=Array(gt);++Ci<gt;)ui[Ci]=At(Ci);return ui}(de.length,String):[],it=lt.length;for(var vt in de)!fe&&!y.call(de,vt)||ft&&(vt=="length"||at&&(vt=="offset"||vt=="parent")||Ve&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Ut(vt,it))||lt.push(vt);return lt}function tt(de,fe){for(var we=de.length;we--;)if(_t(de[we][0],fe))return we;return-1}function Qe(de){return de==null?de===void 0?"[object Undefined]":"[object Null]":P&&P in Object(de)?function(fe){var we=y.call(fe,P),Fe=fe[P];try{fe[P]=void 0;var at=!0}catch{}var Ve=x.call(fe);return at&&(we?fe[P]=Fe:delete fe[P]),Ve}(de):function(fe){return x.call(fe)}(de)}function et(de){return Xt(de)&&Qe(de)==r}function nt(de,fe,we,Fe,at){return de===fe||(de==null||fe==null||!Xt(de)&&!Xt(fe)?de!=de&&fe!=fe:function(Ve,ft,lt,it,vt,gt){var At=qt(Ve),Ci=qt(ft),ui=At?"[object Array]":ot(Ve),Oi=Ci?"[object Array]":ot(ft),Ri=(ui=ui==r?l:ui)==l,pn=(Oi=Oi==r?l:Oi)==l,ne=ui==Oi;if(ne&&ut(Ve)){if(!ut(ft))return!1;At=!0,Ri=!1}if(ne&&!Ri)return gt||(gt=new Ne),At||si(Ve)?je(Ve,ft,lt,it,vt,gt):function(Oe,Pe,Rt,It,Et,dt,ti){switch(Rt){case"[object DataView]":if(Oe.byteLength!=Pe.byteLength||Oe.byteOffset!=Pe.byteOffset)return!1;Oe=Oe.buffer,Pe=Pe.buffer;case"[object ArrayBuffer]":return!(Oe.byteLength!=Pe.byteLength||!dt(new W(Oe),new W(Pe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _t(+Oe,+Pe);case"[object Error]":return Oe.name==Pe.name&&Oe.message==Pe.message;case"[object RegExp]":case"[object String]":return Oe==Pe+"";case a:var mi=$;case d:var jt=1&It;if(mi||(mi=F),Oe.size!=Pe.size&&!jt)return!1;var _i=ti.get(Oe);if(_i)return _i==Pe;It|=2,ti.set(Oe,Pe);var Ai=je(mi(Oe),mi(Pe),It,Et,dt,ti);return ti.delete(Oe),Ai;case"[object Symbol]":if(me)return me.call(Oe)==me.call(Pe)}return!1}(Ve,ft,ui,lt,it,vt,gt);if(!(1&lt)){var ge=Ri&&y.call(Ve,"__wrapped__"),Se=pn&&y.call(ft,"__wrapped__");if(ge||Se){var Te=ge?Ve.value():Ve,Ye=Se?ft.value():ft;return gt||(gt=new Ne),vt(Te,Ye,lt,it,gt)}}return ne?(gt||(gt=new Ne),function(Oe,Pe,Rt,It,Et,dt){var ti=1&Rt,mi=Xe(Oe),jt=mi.length,_i=Xe(Pe).length;if(jt!=_i&&!ti)return!1;for(var Ai=jt;Ai--;){var Xi=mi[Ai];if(!(ti?Xi in Pe:y.call(Pe,Xi)))return!1}var Xn=dt.get(Oe);if(Xn&&dt.get(Pe))return Xn==Pe;var ss=!0;dt.set(Oe,Pe),dt.set(Pe,Oe);for(var Mr=ti;++Ai<jt;){Xi=mi[Ai];var Pr=Oe[Xi],Br=Pe[Xi];if(It)var ii=ti?It(Br,Pr,Xi,Pe,Oe,dt):It(Pr,Br,Xi,Oe,Pe,dt);if(!(ii===void 0?Pr===Br||Et(Pr,Br,Rt,It,dt):ii)){ss=!1;break}Mr||(Mr=Xi=="constructor")}if(ss&&!Mr){var Kt=Oe.constructor,no=Pe.constructor;Kt==no||!("constructor"in Oe)||!("constructor"in Pe)||typeof Kt=="function"&&Kt instanceof Kt&&typeof no=="function"&&no instanceof no||(ss=!1)}return dt.delete(Oe),dt.delete(Pe),ss}(Ve,ft,lt,it,vt,gt)):!1}(de,fe,we,Fe,nt,at))}function $e(de){return!(!pt(de)||function(fe){return!!C&&C in fe}(de))&&(Ht(de)?T:c).test(Ot(de))}function ke(de){if(we=(fe=de)&&fe.constructor,Fe=typeof we=="function"&&we.prototype||k,fe!==Fe)return A(de);var fe,we,Fe,at=[];for(var Ve in Object(de))y.call(de,Ve)&&Ve!="constructor"&&at.push(Ve);return at}function je(de,fe,we,Fe,at,Ve){var ft=1&we,lt=de.length,it=fe.length;if(lt!=it&&!(ft&&it>lt))return!1;var vt=Ve.get(de);if(vt&&Ve.get(fe))return vt==fe;var gt=-1,At=!0,Ci=2&we?new Le:void 0;for(Ve.set(de,fe),Ve.set(fe,de);++gt<lt;){var ui=de[gt],Oi=fe[gt];if(Fe)var Ri=ft?Fe(Oi,ui,gt,fe,de,Ve):Fe(ui,Oi,gt,de,fe,Ve);if(Ri!==void 0){if(Ri)continue;At=!1;break}if(Ci){if(!B(fe,function(pn,ne){if(ge=ne,!Ci.has(ge)&&(ui===pn||at(ui,pn,we,Fe,Ve)))return Ci.push(ne);var ge})){At=!1;break}}else if(ui!==Oi&&!at(ui,Oi,we,Fe,Ve)){At=!1;break}}return Ve.delete(de),Ve.delete(fe),At}function Xe(de){return function(fe,we,Fe){var at=we(fe);return qt(fe)?at:function(Ve,ft){for(var lt=-1,it=ft.length,vt=Ve.length;++lt<it;)Ve[vt+lt]=ft[lt];return Ve}(at,Fe(fe))}(de,yt,Qt)}function Ue(de,fe){var we,Fe,at=de.__data__;return((Fe=typeof(we=fe))=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?we!=="__proto__":we===null)?at[typeof fe=="string"?"string":"hash"]:at.map}function Bt(de,fe){var we=function(Fe,at){return Fe==null?void 0:Fe[at]}(de,fe);return $e(we)?we:void 0}ye.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},ye.prototype.delete=function(de){var fe=this.has(de)&&delete this.__data__[de];return this.size-=fe?1:0,fe},ye.prototype.get=function(de){var fe=this.__data__;if(le){var we=fe[de];return we==="__lodash_hash_undefined__"?void 0:we}return y.call(fe,de)?fe[de]:void 0},ye.prototype.has=function(de){var fe=this.__data__;return le?fe[de]!==void 0:y.call(fe,de)},ye.prototype.set=function(de,fe){var we=this.__data__;return this.size+=this.has(de)?0:1,we[de]=le&&fe===void 0?"__lodash_hash_undefined__":fe,this},xe.prototype.clear=function(){this.__data__=[],this.size=0},xe.prototype.delete=function(de){var fe=this.__data__,we=tt(fe,de);return!(we<0)&&(we==fe.length-1?fe.pop():Z.call(fe,we,1),--this.size,!0)},xe.prototype.get=function(de){var fe=this.__data__,we=tt(fe,de);return we<0?void 0:fe[we][1]},xe.prototype.has=function(de){return tt(this.__data__,de)>-1},xe.prototype.set=function(de,fe){var we=this.__data__,Fe=tt(we,de);return Fe<0?(++this.size,we.push([de,fe])):we[Fe][1]=fe,this},Ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ye,map:new(X||xe),string:new ye}},Ie.prototype.delete=function(de){var fe=Ue(this,de).delete(de);return this.size-=fe?1:0,fe},Ie.prototype.get=function(de){return Ue(this,de).get(de)},Ie.prototype.has=function(de){return Ue(this,de).has(de)},Ie.prototype.set=function(de,fe){var we=Ue(this,de),Fe=we.size;return we.set(de,fe),this.size+=we.size==Fe?0:1,this},Le.prototype.add=Le.prototype.push=function(de){return this.__data__.set(de,"__lodash_hash_undefined__"),this},Le.prototype.has=function(de){return this.__data__.has(de)},Ne.prototype.clear=function(){this.__data__=new xe,this.size=0},Ne.prototype.delete=function(de){var fe=this.__data__,we=fe.delete(de);return this.size=fe.size,we},Ne.prototype.get=function(de){return this.__data__.get(de)},Ne.prototype.has=function(de){return this.__data__.has(de)},Ne.prototype.set=function(de,fe){var we=this.__data__;if(we instanceof xe){var Fe=we.__data__;if(!X||Fe.length<199)return Fe.push([de,fe]),this.size=++we.size,this;we=this.__data__=new Ie(Fe)}return we.set(de,fe),this.size=we.size,this};var Qt=G?function(de){return de==null?[]:(de=Object(de),function(fe,we){for(var Fe=-1,at=fe==null?0:fe.length,Ve=0,ft=[];++Fe<at;){var lt=fe[Fe];we(lt,Fe,fe)&&(ft[Ve++]=lt)}return ft}(G(de),function(fe){return K.call(de,fe)}))}:function(){return[]},ot=Qe;function Ut(de,fe){return!!(fe=fe??9007199254740991)&&(typeof de=="number"||h.test(de))&&de>-1&&de%1==0&&de<fe}function Ot(de){if(de!=null){try{return v.call(de)}catch{}try{return de+""}catch{}}return""}function _t(de,fe){return de===fe||de!=de&&fe!=fe}(z&&ot(new z(new ArrayBuffer(1)))!="[object DataView]"||X&&ot(new X)!=a||ee&&ot(ee.resolve())!="[object Promise]"||J&&ot(new J)!=d||te&&ot(new te)!="[object WeakMap]")&&(ot=function(de){var fe=Qe(de),we=fe==l?de.constructor:void 0,Fe=we?Ot(we):"";if(Fe)switch(Fe){case ce:return"[object DataView]";case Q:return a;case oe:return"[object Promise]";case se:return d;case pe:return"[object WeakMap]"}return fe});var ri=et(function(){return arguments}())?et:function(de){return Xt(de)&&y.call(de,"callee")&&!K.call(de,"callee")},qt=Array.isArray,ut=O||function(){return!1};function Ht(de){if(!pt(de))return!1;var fe=Qe(de);return fe=="[object Function]"||fe=="[object GeneratorFunction]"||fe=="[object AsyncFunction]"||fe=="[object Proxy]"}function ni(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=9007199254740991}function pt(de){var fe=typeof de;return de!=null&&(fe=="object"||fe=="function")}function Xt(de){return de!=null&&typeof de=="object"}var si=D?function(de){return function(fe){return de(fe)}}(D):function(de){return Xt(de)&&ni(de.length)&&!!u[Qe(de)]};function yt(de){return(fe=de)!=null&&ni(fe.length)&&!Ht(fe)?Be(de):ke(de);var fe}n.exports=function(de,fe){return nt(de,fe)}}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,n,s){(function(o){(function(){var r=typeof o=="object"&&o&&o.Object===Object&&o,a=typeof self=="object"&&self&&self.Object===Object&&self,l=r||a||Function("return this")(),d=Object.prototype,c=d.hasOwnProperty,h=d.toString,u=l.Symbol,p=u?u.toStringTag:void 0;function f(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":p&&p in Object(g)?function(m){var b=c.call(m,p),_=m[p];try{m[p]=void 0;var w=!0}catch{}var E=h.call(m);return w&&(b?m[p]=_:delete m[p]),E}(g):function(m){return h.call(m)}(g)}n.exports=function(g){if(!function(b){var _=typeof b;return b!=null&&(_=="object"||_=="function")}(g))return!1;var m=f(g);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,n,s){n.exports=function(o){return o==null}},{}],448:[function(t,n,s){n.exports=function(o){return o===void 0}},{}],449:[function(t,n,s){(function(o){(function(){var r=/^\[object .+?Constructor\]$/,a=typeof o=="object"&&o&&o.Object===Object&&o,l=typeof self=="object"&&self&&self.Object===Object&&self,d=a||l||Function("return this")();function c(W,K){return!!(W&&W.length)&&function(Z,P,G){if(P!=P)return function(z,X,ee,J){for(var te=z.length,le=ee+(J?1:-1);J?le--:++le<te;)if(X(z[le],le,z))return le;return-1}(Z,u,G);for(var O=G-1,A=Z.length;++O<A;)if(Z[O]===P)return O;return-1}(W,K,0)>-1}function h(W,K,Z){for(var P=-1,G=W?W.length:0;++P<G;)if(Z(K,W[P]))return!0;return!1}function u(W){return W!=W}function p(W,K){return W.has(K)}function f(W){var K=-1,Z=Array(W.size);return W.forEach(function(P){Z[++K]=P}),Z}var g,m=Array.prototype,b=Function.prototype,_=Object.prototype,w=d["__core-js_shared__"],E=(g=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",D=b.toString,B=_.hasOwnProperty,$=_.toString,F=RegExp("^"+D.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=m.splice,L=M(d,"Map"),j=M(d,"Set"),H=M(Object,"create");function I(W){var K=-1,Z=W?W.length:0;for(this.clear();++K<Z;){var P=W[K];this.set(P[0],P[1])}}function k(W){var K=-1,Z=W?W.length:0;for(this.clear();++K<Z;){var P=W[K];this.set(P[0],P[1])}}function S(W){var K=-1,Z=W?W.length:0;for(this.clear();++K<Z;){var P=W[K];this.set(P[0],P[1])}}function v(W){var K=-1,Z=W?W.length:0;for(this.__data__=new S;++K<Z;)this.add(W[K])}function y(W,K){for(var Z,P,G=W.length;G--;)if((Z=W[G][0])===(P=K)||Z!=Z&&P!=P)return G;return-1}function C(W){return!(!V(W)||(K=W,E&&E in K))&&(function(Z){var P=V(Z)?$.call(Z):"";return P=="[object Function]"||P=="[object GeneratorFunction]"}(W)||function(Z){var P=!1;if(Z!=null&&typeof Z.toString!="function")try{P=!!(Z+"")}catch{}return P}(W)?F:r).test(function(Z){if(Z!=null){try{return D.call(Z)}catch{}try{return Z+""}catch{}}return""}(W));var K}I.prototype.clear=function(){this.__data__=H?H(null):{}},I.prototype.delete=function(W){return this.has(W)&&delete this.__data__[W]},I.prototype.get=function(W){var K=this.__data__;if(H){var Z=K[W];return Z==="__lodash_hash_undefined__"?void 0:Z}return B.call(K,W)?K[W]:void 0},I.prototype.has=function(W){var K=this.__data__;return H?K[W]!==void 0:B.call(K,W)},I.prototype.set=function(W,K){return this.__data__[W]=H&&K===void 0?"__lodash_hash_undefined__":K,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(W){var K=this.__data__,Z=y(K,W);return!(Z<0)&&(Z==K.length-1?K.pop():N.call(K,Z,1),!0)},k.prototype.get=function(W){var K=this.__data__,Z=y(K,W);return Z<0?void 0:K[Z][1]},k.prototype.has=function(W){return y(this.__data__,W)>-1},k.prototype.set=function(W,K){var Z=this.__data__,P=y(Z,W);return P<0?Z.push([W,K]):Z[P][1]=K,this},S.prototype.clear=function(){this.__data__={hash:new I,map:new(L||k),string:new I}},S.prototype.delete=function(W){return T(this,W).delete(W)},S.prototype.get=function(W){return T(this,W).get(W)},S.prototype.has=function(W){return T(this,W).has(W)},S.prototype.set=function(W,K){return T(this,W).set(W,K),this},v.prototype.add=v.prototype.push=function(W){return this.__data__.set(W,"__lodash_hash_undefined__"),this},v.prototype.has=function(W){return this.__data__.has(W)};var x=j&&1/f(new j([,-0]))[1]==1/0?function(W){return new j(W)}:function(){};function T(W,K){var Z,P,G=W.__data__;return((P=typeof(Z=K))=="string"||P=="number"||P=="symbol"||P=="boolean"?Z!=="__proto__":Z===null)?G[typeof K=="string"?"string":"hash"]:G.map}function M(W,K){var Z=function(P,G){return P==null?void 0:P[G]}(W,K);return C(Z)?Z:void 0}function V(W){var K=typeof W;return!!W&&(K=="object"||K=="function")}n.exports=function(W){return W&&W.length?function(K,Z,P){var G=-1,O=c,A=K.length,z=!0,X=[],ee=X;if(P)z=!1,O=h;else if(A>=200){var J=Z?null:x(K);if(J)return f(J);z=!1,O=p,ee=new v}else ee=Z?[]:X;e:for(;++G<A;){var te=K[G],le=Z?Z(te):te;if(te=P||te!==0?te:0,z&&le==le){for(var ce=ee.length;ce--;)if(ee[ce]===le)continue e;Z&&ee.push(le),X.push(te)}else O(ee,le,P)||(ee!==X&&ee.push(le),X.push(te))}return X}(W):[]}}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,n,s){var o=t("inherits"),r=t("hash-base"),a=t("safe-buffer").Buffer,l=new Array(16);function d(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(g,m){return g<<m|g>>>32-m}function h(g,m,b,_,w,E,D){return c(g+(m&b|~m&_)+w+E|0,D)+m|0}function u(g,m,b,_,w,E,D){return c(g+(m&_|b&~_)+w+E|0,D)+m|0}function p(g,m,b,_,w,E,D){return c(g+(m^b^_)+w+E|0,D)+m|0}function f(g,m,b,_,w,E,D){return c(g+(b^(m|~_))+w+E|0,D)+m|0}o(d,r),d.prototype._update=function(){for(var g=l,m=0;m<16;++m)g[m]=this._block.readInt32LE(4*m);var b=this._a,_=this._b,w=this._c,E=this._d;b=h(b,_,w,E,g[0],3614090360,7),E=h(E,b,_,w,g[1],3905402710,12),w=h(w,E,b,_,g[2],606105819,17),_=h(_,w,E,b,g[3],3250441966,22),b=h(b,_,w,E,g[4],4118548399,7),E=h(E,b,_,w,g[5],1200080426,12),w=h(w,E,b,_,g[6],2821735955,17),_=h(_,w,E,b,g[7],4249261313,22),b=h(b,_,w,E,g[8],1770035416,7),E=h(E,b,_,w,g[9],2336552879,12),w=h(w,E,b,_,g[10],4294925233,17),_=h(_,w,E,b,g[11],2304563134,22),b=h(b,_,w,E,g[12],1804603682,7),E=h(E,b,_,w,g[13],4254626195,12),w=h(w,E,b,_,g[14],2792965006,17),b=u(b,_=h(_,w,E,b,g[15],1236535329,22),w,E,g[1],4129170786,5),E=u(E,b,_,w,g[6],3225465664,9),w=u(w,E,b,_,g[11],643717713,14),_=u(_,w,E,b,g[0],3921069994,20),b=u(b,_,w,E,g[5],3593408605,5),E=u(E,b,_,w,g[10],38016083,9),w=u(w,E,b,_,g[15],3634488961,14),_=u(_,w,E,b,g[4],3889429448,20),b=u(b,_,w,E,g[9],568446438,5),E=u(E,b,_,w,g[14],3275163606,9),w=u(w,E,b,_,g[3],4107603335,14),_=u(_,w,E,b,g[8],1163531501,20),b=u(b,_,w,E,g[13],2850285829,5),E=u(E,b,_,w,g[2],4243563512,9),w=u(w,E,b,_,g[7],1735328473,14),b=p(b,_=u(_,w,E,b,g[12],2368359562,20),w,E,g[5],4294588738,4),E=p(E,b,_,w,g[8],2272392833,11),w=p(w,E,b,_,g[11],1839030562,16),_=p(_,w,E,b,g[14],4259657740,23),b=p(b,_,w,E,g[1],2763975236,4),E=p(E,b,_,w,g[4],1272893353,11),w=p(w,E,b,_,g[7],4139469664,16),_=p(_,w,E,b,g[10],3200236656,23),b=p(b,_,w,E,g[13],681279174,4),E=p(E,b,_,w,g[0],3936430074,11),w=p(w,E,b,_,g[3],3572445317,16),_=p(_,w,E,b,g[6],76029189,23),b=p(b,_,w,E,g[9],3654602809,4),E=p(E,b,_,w,g[12],3873151461,11),w=p(w,E,b,_,g[15],530742520,16),b=f(b,_=p(_,w,E,b,g[2],3299628645,23),w,E,g[0],4096336452,6),E=f(E,b,_,w,g[7],1126891415,10),w=f(w,E,b,_,g[14],2878612391,15),_=f(_,w,E,b,g[5],4237533241,21),b=f(b,_,w,E,g[12],1700485571,6),E=f(E,b,_,w,g[3],2399980690,10),w=f(w,E,b,_,g[10],4293915773,15),_=f(_,w,E,b,g[1],2240044497,21),b=f(b,_,w,E,g[8],1873313359,6),E=f(E,b,_,w,g[15],4264355552,10),w=f(w,E,b,_,g[6],2734768916,15),_=f(_,w,E,b,g[13],1309151649,21),b=f(b,_,w,E,g[4],4149444226,6),E=f(E,b,_,w,g[11],3174756917,10),w=f(w,E,b,_,g[2],718787259,15),_=f(_,w,E,b,g[9],3951481745,21),this._a=this._a+b|0,this._b=this._b+_|0,this._c=this._c+w|0,this._d=this._d+E|0},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=a.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g},n.exports=d},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,n,s){var o=t("bn.js"),r=t("brorand");function a(l){this.rand=l||new r.Rand}n.exports=a,a.create=function(l){return new a(l)},a.prototype._randbelow=function(l){var d=l.bitLength(),c=Math.ceil(d/8);do var h=new o(this.rand.generate(c));while(h.cmp(l)>=0);return h},a.prototype._randrange=function(l,d){var c=d.sub(l);return l.add(this._randbelow(c))},a.prototype.test=function(l,d,c){var h=l.bitLength(),u=o.mont(l),p=new o(1).toRed(u);d||(d=Math.max(1,h/48|0));for(var f=l.subn(1),g=0;!f.testn(g);g++);for(var m=l.shrn(g),b=f.toRed(u);d>0;d--){var _=this._randrange(new o(2),f);c&&c(_);var w=_.toRed(u).redPow(m);if(w.cmp(p)!==0&&w.cmp(b)!==0){for(var E=1;E<g;E++){if((w=w.redSqr()).cmp(p)===0)return!1;if(w.cmp(b)===0)break}if(E===g)return!1}}return!0},a.prototype.getDivisor=function(l,d){var c=l.bitLength(),h=o.mont(l),u=new o(1).toRed(h);d||(d=Math.max(1,c/48|0));for(var p=l.subn(1),f=0;!p.testn(f);f++);for(var g=l.shrn(f),m=p.toRed(h);d>0;d--){var b=this._randrange(new o(2),p),_=l.gcd(b);if(_.cmpn(1)!==0)return _;var w=b.toRed(h).redPow(g);if(w.cmp(u)!==0&&w.cmp(m)!==0){for(var E=1;E<f;E++){if((w=w.redSqr()).cmp(u)===0)return w.fromRed().subn(1).gcd(l);if(w.cmp(m)===0)break}if(E===f)return(w=w.redSqr()).fromRed().subn(1).gcd(l)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,n,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],453:[function(t,n,s){function o(r,a){if(!r)throw new Error(a||"Assertion failed")}n.exports=o,o.equal=function(r,a,l){if(r!=a)throw new Error(l||"Assertion failed: "+r+" != "+a)}},{}],454:[function(t,n,s){var o=s;function r(l){return l.length===1?"0"+l:l}function a(l){for(var d="",c=0;c<l.length;c++)d+=r(l[c].toString(16));return d}o.toArray=function(l,d){if(Array.isArray(l))return l.slice();if(!l)return[];var c=[];if(typeof l!="string"){for(var h=0;h<l.length;h++)c[h]=0|l[h];return c}if(d==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),h=0;h<l.length;h+=2)c.push(parseInt(l[h]+l[h+1],16));else for(h=0;h<l.length;h++){var u=l.charCodeAt(h),p=u>>8,f=255&u;p?c.push(p,f):c.push(f)}return c},o.zero2=r,o.toHex=a,o.encode=function(l,d){return d==="hex"?a(l):l}},{}],455:[function(t,n,s){n.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,n,s){var o=t("asn1.js");s.certificate=t("./certificate");var r=o.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});s.RSAPrivateKey=r;var a=o.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});s.RSAPublicKey=a;var l=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())});s.PublicKey=l;var d=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),c=o.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(d),this.key("subjectPrivateKey").octstr())});s.PrivateKey=c;var h=o.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});s.EncryptedPrivateKey=h;var u=o.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});s.DSAPrivateKey=u,s.DSAparam=o.define("DSAparam",function(){this.int()});var p=o.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});s.ECPrivateKey=p;var f=o.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});s.signature=o.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(t,n,s){var o=t("asn1.js"),r=o.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=o.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),l=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),d=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())}),c=o.define("RelativeDistinguishedName",function(){this.setof(a)}),h=o.define("RDNSequence",function(){this.seqof(c)}),u=o.define("Name",function(){this.choice({rdnSequence:this.use(h)})}),p=o.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),f=o.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=o.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(l),this.key("issuer").use(u),this.key("validity").use(p),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(d),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),m=o.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(l),this.key("signatureValue").bitstr())});n.exports=m},{"asn1.js":170}],458:[function(t,n,s){var o=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,l=t("evp_bytestokey"),d=t("browserify-aes"),c=t("safe-buffer").Buffer;n.exports=function(h,u){var p,f=h.toString(),g=f.match(o);if(g){var m="aes"+g[1],b=c.from(g[2],"hex"),_=c.from(g[3].replace(/[\r\n]/g,""),"base64"),w=l(u,b.slice(0,8),parseInt(g[1],10)).key,E=[],D=d.createDecipheriv(m,w,b);E.push(D.update(_)),E.push(D.final()),p=c.concat(E)}else{var B=f.match(a);p=c.from(B[2].replace(/[\r\n]/g,""),"base64")}return{tag:f.match(r)[1],data:p}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,n,s){var o=t("./asn1"),r=t("./aesid.json"),a=t("./fixProc"),l=t("browserify-aes"),d=t("pbkdf2"),c=t("safe-buffer").Buffer;function h(u){var p;typeof u!="object"||c.isBuffer(u)||(p=u.passphrase,u=u.key),typeof u=="string"&&(u=c.from(u));var f,g,m=a(u,p),b=m.tag,_=m.data;switch(b){case"CERTIFICATE":g=o.certificate.decode(_,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=o.PublicKey.decode(_,"der")),f=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=o.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+f)}case"ENCRYPTED PRIVATE KEY":_=function(w,E){var D=w.algorithm.decrypt.kde.kdeparams.salt,B=parseInt(w.algorithm.decrypt.kde.kdeparams.iters.toString(),10),$=r[w.algorithm.decrypt.cipher.algo.join(".")],F=w.algorithm.decrypt.cipher.iv,N=w.subjectPrivateKey,L=parseInt($.split("-")[1],10)/8,j=d.pbkdf2Sync(E,D,B,L,"sha1"),H=l.createDecipheriv($,j,F),I=[];return I.push(H.update(N)),I.push(H.final()),c.concat(I)}(_=o.EncryptedPrivateKey.decode(_,"der"),p);case"PRIVATE KEY":switch(f=(g=o.PrivateKey.decode(_,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:o.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=o.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+f)}case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(_,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(_,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(_,"der")};case"EC PRIVATE KEY":return{curve:(_=o.ECPrivateKey.decode(_,"der")).parameters.value,privateKey:_.privateKey};default:throw new Error("unknown key type "+b)}}n.exports=h,h.signature=o.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,n,s){s.pbkdf2=t("./lib/async"),s.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,n,s){(function(o){(function(){var r,a,l=t("safe-buffer").Buffer,d=t("./precondition"),c=t("./default-encoding"),h=t("./sync"),u=t("./to-buffer"),p=o.crypto&&o.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[];function m(){return a||(a=o.process&&o.process.nextTick?o.process.nextTick:o.queueMicrotask?o.queueMicrotask:o.setImmediate?o.setImmediate:o.setTimeout)}function b(_,w,E,D,B){return p.importKey("raw",_,{name:"PBKDF2"},!1,["deriveBits"]).then(function($){return p.deriveBits({name:"PBKDF2",salt:w,iterations:E,hash:{name:B}},$,D<<3)}).then(function($){return l.from($)})}n.exports=function(_,w,E,D,B,$){typeof B=="function"&&($=B,B=void 0);var F=f[(B=B||"sha1").toLowerCase()];if(F&&typeof o.Promise=="function"){if(d(E,D),_=u(_,c,"Password"),w=u(w,c,"Salt"),typeof $!="function")throw new Error("No callback provided to pbkdf2");(function(N,L){N.then(function(j){m()(function(){L(null,j)})},function(j){m()(function(){L(j)})})})(function(N){if(o.process&&!o.process.browser||!p||!p.importKey||!p.deriveBits)return Promise.resolve(!1);if(g[N]!==void 0)return g[N];var L=b(r=r||l.alloc(8),r,10,128,N).then(function(){return!0}).catch(function(){return!1});return g[N]=L,L}(F).then(function(N){return N?b(_,w,E,D,F):h(_,w,E,D,B)}),$)}else m()(function(){var N;try{N=h(_,w,E,D,B)}catch(L){return $(L)}$(null,N)})}}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,n,s){(function(o,r){(function(){var a;r.process&&r.process.browser?a="utf-8":r.process&&r.process.version?a=parseInt(o.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":a="utf-8",n.exports=a}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,n,s){var o=Math.pow(2,30)-1;n.exports=function(r,a){if(typeof r!="number")throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>o||a!=a)throw new TypeError("Bad key length")}},{}],464:[function(t,n,s){var o=t("create-hash/md5"),r=t("ripemd160"),a=t("sha.js"),l=t("safe-buffer").Buffer,d=t("./precondition"),c=t("./default-encoding"),h=t("./to-buffer"),u=l.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(g,m,b){var _=function(F){function N(L){return a(F).update(L).digest()}return F==="rmd160"||F==="ripemd160"?function(L){return new r().update(L).digest()}:F==="md5"?o:N}(g),w=g==="sha512"||g==="sha384"?128:64;m.length>w?m=_(m):m.length<w&&(m=l.concat([m,u],w));for(var E=l.allocUnsafe(w+p[g]),D=l.allocUnsafe(w+p[g]),B=0;B<w;B++)E[B]=54^m[B],D[B]=92^m[B];var $=l.allocUnsafe(w+b+4);E.copy($,0,0,w),this.ipad1=$,this.ipad2=E,this.opad=D,this.alg=g,this.blocksize=w,this.hash=_,this.size=p[g]}f.prototype.run=function(g,m){return g.copy(m,this.blocksize),this.hash(m).copy(this.opad,this.blocksize),this.hash(this.opad)},n.exports=function(g,m,b,_,w){d(b,_);var E=new f(w=w||"sha1",g=h(g,c,"Password"),(m=h(m,c,"Salt")).length),D=l.allocUnsafe(_),B=l.allocUnsafe(m.length+4);m.copy(B,0,0,m.length);for(var $=0,F=p[w],N=Math.ceil(_/F),L=1;L<=N;L++){B.writeUInt32BE(L,m.length);for(var j=E.run(B,E.ipad1),H=j,I=1;I<b;I++){H=E.run(H,E.ipad2);for(var k=0;k<F;k++)j[k]^=H[k]}j.copy(D,$),$+=F}return D}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,n,s){var o=t("safe-buffer").Buffer;n.exports=function(r,a,l){if(o.isBuffer(r))return r;if(typeof r=="string")return o.from(r,a);if(ArrayBuffer.isView(r))return o.from(r.buffer);throw new TypeError(l+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,n,s){(function(o){(function(){o===void 0||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?n.exports={nextTick:function(r,a,l,d){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var c,h,u=arguments.length;switch(u){case 0:case 1:return o.nextTick(r);case 2:return o.nextTick(function(){r.call(null,a)});case 3:return o.nextTick(function(){r.call(null,a,l)});case 4:return o.nextTick(function(){r.call(null,a,l,d)});default:for(c=new Array(u-1),h=0;h<c.length;)c[h++]=arguments[h];return o.nextTick(function(){r.apply(null,c)})}}}:n.exports=o}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,n,s){var o,r,a=n.exports={};function l(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function c(w){if(o===setTimeout)return setTimeout(w,0);if((o===l||!o)&&setTimeout)return o=setTimeout,setTimeout(w,0);try{return o(w,0)}catch{try{return o.call(null,w,0)}catch{return o.call(this,w,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:l}catch{o=l}try{r=typeof clearTimeout=="function"?clearTimeout:d}catch{r=d}})();var h,u=[],p=!1,f=-1;function g(){p&&h&&(p=!1,h.length?u=h.concat(u):f=-1,u.length&&m())}function m(){if(!p){var w=c(g);p=!0;for(var E=u.length;E;){for(h=u,u=[];++f<E;)h&&h[f].run();f=-1,E=u.length}h=null,p=!1,function(D){if(r===clearTimeout)return clearTimeout(D);if((r===d||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(D);try{r(D)}catch{try{return r.call(null,D)}catch{return r.call(this,D)}}}(w)}}function b(w,E){this.fun=w,this.array=E}function _(){}a.nextTick=function(w){var E=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)E[D-1]=arguments[D];u.push(new b(w,E)),u.length!==1||p||c(m)},b.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(w){return[]},a.binding=function(w){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(w){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],468:[function(t,n,s){s.publicEncrypt=t("./publicEncrypt"),s.privateDecrypt=t("./privateDecrypt"),s.privateEncrypt=function(o,r){return s.publicEncrypt(o,r,!0)},s.publicDecrypt=function(o,r){return s.privateDecrypt(o,r,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,n,s){var o=t("create-hash"),r=t("safe-buffer").Buffer;function a(l){var d=r.allocUnsafe(4);return d.writeUInt32BE(l,0),d}n.exports=function(l,d){for(var c,h=r.alloc(0),u=0;h.length<d;)c=a(u++),h=r.concat([h,o("sha1").update(l).update(c).digest()]);return h.slice(0,d)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,n,s){arguments[4][184][0].apply(s,arguments)},{buffer:188,dup:184}],471:[function(t,n,s){var o=t("parse-asn1"),r=t("./mgf"),a=t("./xor"),l=t("bn.js"),d=t("browserify-rsa"),c=t("create-hash"),h=t("./withPublic"),u=t("safe-buffer").Buffer;n.exports=function(p,f,g){var m;m=p.padding?p.padding:g?1:4;var b,_=o(p),w=_.modulus.byteLength();if(f.length>w||new l(f).cmp(_.modulus)>=0)throw new Error("decryption error");b=g?h(new l(f),_):d(f,_);var E=u.alloc(w-b.length);if(b=u.concat([E,b],w),m===4)return function(D,B){var $=D.modulus.byteLength(),F=c("sha1").update(u.alloc(0)).digest(),N=F.length;if(B[0]!==0)throw new Error("decryption error");var L=B.slice(1,N+1),j=B.slice(N+1),H=a(L,r(j,N)),I=a(j,r(H,$-N-1));if(function(S,v){S=u.from(S),v=u.from(v);var y=0,C=S.length;S.length!==v.length&&(y++,C=Math.min(S.length,v.length));for(var x=-1;++x<C;)y+=S[x]^v[x];return y}(F,I.slice(0,N)))throw new Error("decryption error");for(var k=N;I[k]===0;)k++;if(I[k++]!==1)throw new Error("decryption error");return I.slice(k)}(_,b);if(m===1)return function(D,B,$){for(var F=B.slice(0,2),N=2,L=0;B[N++]!==0;)if(N>=B.length){L++;break}var j=B.slice(2,N-1);if((F.toString("hex")!=="0002"&&!$||F.toString("hex")!=="0001"&&$)&&L++,j.length<8&&L++,L)throw new Error("decryption error");return B.slice(N)}(0,b,g);if(m===3)return b;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,n,s){var o=t("parse-asn1"),r=t("randombytes"),a=t("create-hash"),l=t("./mgf"),d=t("./xor"),c=t("bn.js"),h=t("./withPublic"),u=t("browserify-rsa"),p=t("safe-buffer").Buffer;n.exports=function(f,g,m){var b;b=f.padding?f.padding:m?1:4;var _,w=o(f);if(b===4)_=function(E,D){var B=E.modulus.byteLength(),$=D.length,F=a("sha1").update(p.alloc(0)).digest(),N=F.length,L=2*N;if($>B-L-2)throw new Error("message too long");var j=p.alloc(B-$-L-2),H=B-N-1,I=r(N),k=d(p.concat([F,j,p.alloc(1,1),D],H),l(I,H)),S=d(I,l(k,N));return new c(p.concat([p.alloc(1),S,k],B))}(w,g);else if(b===1)_=function(E,D,B){var $,F=D.length,N=E.modulus.byteLength();if(F>N-11)throw new Error("message too long");return $=B?p.alloc(N-F-3,255):function(L){for(var j,H=p.allocUnsafe(L),I=0,k=r(2*L),S=0;I<L;)S===k.length&&(k=r(2*L),S=0),(j=k[S++])&&(H[I++]=j);return H}(N-F-3),new c(p.concat([p.from([0,B?1:2]),$,p.alloc(1),D],N))}(w,g,m);else{if(b!==3)throw new Error("unknown padding");if((_=new c(g)).cmp(w.modulus)>=0)throw new Error("data too long for modulus")}return m?u(_,w):h(_,w)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,n,s){var o=t("bn.js"),r=t("safe-buffer").Buffer;n.exports=function(a,l){return r.from(a.toRed(o.mont(l.modulus)).redPow(new o(l.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,n,s){n.exports=function(o,r){for(var a=o.length,l=-1;++l<a;)o[l]^=r[l];return o}},{}],475:[function(t,n,s){(function(o,r){(function(){var a=t("safe-buffer").Buffer,l=r.crypto||r.msCrypto;l&&l.getRandomValues?n.exports=function(d,c){if(d>4294967295)throw new RangeError("requested too many random bytes");var h=a.allocUnsafe(d);if(d>0)if(d>65536)for(var u=0;u<d;u+=65536)l.getRandomValues(h.slice(u,u+65536));else l.getRandomValues(h);return typeof c=="function"?o.nextTick(function(){c(null,h)}):h}:n.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,n,s){(function(o,r){(function(){function a(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var l=t("safe-buffer"),d=t("randombytes"),c=l.Buffer,h=l.kMaxLength,u=r.crypto||r.msCrypto,p=Math.pow(2,32)-1;function f(b,_){if(typeof b!="number"||b!=b)throw new TypeError("offset must be a number");if(b>p||b<0)throw new TypeError("offset must be a uint32");if(b>h||b>_)throw new RangeError("offset out of range")}function g(b,_,w){if(typeof b!="number"||b!=b)throw new TypeError("size must be a number");if(b>p||b<0)throw new TypeError("size must be a uint32");if(b+_>w||b>h)throw new RangeError("buffer too small")}function m(b,_,w,E){if(o.browser){var D=b.buffer,B=new Uint8Array(D,_,w);return u.getRandomValues(B),E?void o.nextTick(function(){E(null,b)}):b}if(!E)return d(w).copy(b,_),b;d(w,function($,F){if($)return E($);F.copy(b,_),E(null,b)})}u&&u.getRandomValues||!o.browser?(s.randomFill=function(b,_,w,E){if(!(c.isBuffer(b)||b instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof _=="function")E=_,_=0,w=b.length;else if(typeof w=="function")E=w,w=b.length-_;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return f(_,b.length),g(w,_,b.length),m(b,_,w,E)},s.randomFillSync=function(b,_,w){if(_===void 0&&(_=0),!(c.isBuffer(b)||b instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return f(_,b.length),w===void 0&&(w=b.length-_),g(w,_,b.length),m(b,_,w)}):(s.randomFill=a,s.randomFillSync=a)}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,n,s){var o={};function r(l,d,c){c||(c=Error);var h=function(u){var p,f;function g(m,b,_){return u.call(this,function(w,E,D){return typeof d=="string"?d:d(w,E,D)}(m,b,_))||this}return f=u,(p=g).prototype=Object.create(f.prototype),p.prototype.constructor=p,p.__proto__=f,g}(c);h.prototype.name=c.name,h.prototype.code=l,o[l]=h}function a(l,d){if(Array.isArray(l)){var c=l.length;return l=l.map(function(h){return String(h)}),c>2?"one of ".concat(d," ").concat(l.slice(0,c-1).join(", "),", or ")+l[c-1]:c===2?"one of ".concat(d," ").concat(l[0]," or ").concat(l[1]):"of ".concat(d," ").concat(l[0])}return"of ".concat(d," ").concat(String(l))}r("ERR_INVALID_OPT_VALUE",function(l,d){return'The value "'+d+'" is invalid for option "'+l+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(l,d,c){var h,u,p;if(typeof d=="string"&&(u="not ",d.substr(0,u.length)===u)?(h="must not be",d=d.replace(/^not /,"")):h="must be",function(g,m,b){return(b===void 0||b>g.length)&&(b=g.length),g.substring(b-m.length,b)===m}(l," argument"))p="The ".concat(l," ").concat(h," ").concat(a(d,"type"));else{var f=function(g,m,b){return typeof b!="number"&&(b=0),!(b+m.length>g.length)&&g.indexOf(m,b)!==-1}(l,".")?"property":"argument";p='The "'.concat(l,'" ').concat(f," ").concat(h," ").concat(a(d,"type"))}return p+=". Received type ".concat(typeof c)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=o},{}],478:[function(t,n,s){(function(o){(function(){var r=Object.keys||function(g){var m=[];for(var b in g)m.push(b);return m};n.exports=u;var a=t("./_stream_readable"),l=t("./_stream_writable");t("inherits")(u,a);for(var d=r(l.prototype),c=0;c<d.length;c++){var h=d[c];u.prototype[h]||(u.prototype[h]=l.prototype[h])}function u(g){if(!(this instanceof u))return new u(g);a.call(this,g),l.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||o.nextTick(f,this)}function f(g){g.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,n,s){n.exports=r;var o=t("./_stream_transform");function r(a){if(!(this instanceof r))return new r(a);o.call(this,a)}t("inherits")(r,o),r.prototype._transform=function(a,l,d){d(null,a)}},{"./_stream_transform":481,inherits:440}],480:[function(t,n,s){(function(o,r){(function(){var a;n.exports=H,H.ReadableState=j,t("events").EventEmitter;var l=function(O,A){return O.listeners(A).length},d=t("./internal/streams/stream"),c=t("buffer").Buffer,h=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},u,p=t("util");u=p&&p.debuglog?p.debuglog("stream"):function(){};var f,g,m,b=t("./internal/streams/buffer_list"),_=t("./internal/streams/destroy"),w=t("./internal/streams/state").getHighWaterMark,E=t("../errors").codes,D=E.ERR_INVALID_ARG_TYPE,B=E.ERR_STREAM_PUSH_AFTER_EOF,$=E.ERR_METHOD_NOT_IMPLEMENTED,F=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(H,d);var N=_.errorOrDestroy,L=["error","close","destroy","pause","resume"];function j(O,A,z){a=a||t("./_stream_duplex"),O=O||{},typeof z!="boolean"&&(z=A instanceof a),this.objectMode=!!O.objectMode,z&&(this.objectMode=this.objectMode||!!O.readableObjectMode),this.highWaterMark=w(this,O,"readableHighWaterMark",z),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(f||(f=t("string_decoder/").StringDecoder),this.decoder=new f(O.encoding),this.encoding=O.encoding)}function H(O){if(a=a||t("./_stream_duplex"),!(this instanceof H))return new H(O);var A=this instanceof a;this._readableState=new j(O,this,A),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),d.call(this)}function I(O,A,z,X,ee){u("readableAddChunk",A);var J,te=O._readableState;if(A===null)te.reading=!1,function(le,ce){if(u("onEofChunk"),!ce.ended){if(ce.decoder){var Q=ce.decoder.end();Q&&Q.length&&(ce.buffer.push(Q),ce.length+=ce.objectMode?1:Q.length)}ce.ended=!0,ce.sync?v(le):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,y(le)))}}(O,te);else if(ee||(J=function(le,ce){var Q;oe=ce,c.isBuffer(oe)||oe instanceof h||typeof ce=="string"||ce===void 0||le.objectMode||(Q=new D("chunk",["string","Buffer","Uint8Array"],ce));var oe;return Q}(te,A)),J)N(O,J);else if(te.objectMode||A&&A.length>0)if(typeof A=="string"||te.objectMode||Object.getPrototypeOf(A)===c.prototype||(A=function(le){return c.from(le)}(A)),X)te.endEmitted?N(O,new F):k(O,te,A,!0);else if(te.ended)N(O,new B);else{if(te.destroyed)return!1;te.reading=!1,te.decoder&&!z?(A=te.decoder.write(A),te.objectMode||A.length!==0?k(O,te,A,!1):C(O,te)):k(O,te,A,!1)}else X||(te.reading=!1,C(O,te));return!te.ended&&(te.length<te.highWaterMark||te.length===0)}function k(O,A,z,X){A.flowing&&A.length===0&&!A.sync?(A.awaitDrain=0,O.emit("data",z)):(A.length+=A.objectMode?1:z.length,X?A.buffer.unshift(z):A.buffer.push(z),A.needReadable&&v(O)),C(O,A)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),H.prototype.destroy=_.destroy,H.prototype._undestroy=_.undestroy,H.prototype._destroy=function(O,A){A(O)},H.prototype.push=function(O,A){var z,X=this._readableState;return X.objectMode?z=!0:typeof O=="string"&&((A=A||X.defaultEncoding)!==X.encoding&&(O=c.from(O,A),A=""),z=!0),I(this,O,A,!1,z)},H.prototype.unshift=function(O){return I(this,O,null,!0,!1)},H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(O){f||(f=t("string_decoder/").StringDecoder);var A=new f(O);this._readableState.decoder=A,this._readableState.encoding=this._readableState.decoder.encoding;for(var z=this._readableState.buffer.head,X="";z!==null;)X+=A.write(z.data),z=z.next;return this._readableState.buffer.clear(),X!==""&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};function S(O,A){return O<=0||A.length===0&&A.ended?0:A.objectMode?1:O!=O?A.flowing&&A.length?A.buffer.head.data.length:A.length:(O>A.highWaterMark&&(A.highWaterMark=function(z){return z>=1073741824?z=1073741824:(z--,z|=z>>>1,z|=z>>>2,z|=z>>>4,z|=z>>>8,z|=z>>>16,z++),z}(O)),O<=A.length?O:A.ended?A.length:(A.needReadable=!0,0))}function v(O){var A=O._readableState;u("emitReadable",A.needReadable,A.emittedReadable),A.needReadable=!1,A.emittedReadable||(u("emitReadable",A.flowing),A.emittedReadable=!0,o.nextTick(y,O))}function y(O){var A=O._readableState;u("emitReadable_",A.destroyed,A.length,A.ended),A.destroyed||!A.length&&!A.ended||(O.emit("readable"),A.emittedReadable=!1),A.needReadable=!A.flowing&&!A.ended&&A.length<=A.highWaterMark,W(O)}function C(O,A){A.readingMore||(A.readingMore=!0,o.nextTick(x,O,A))}function x(O,A){for(;!A.reading&&!A.ended&&(A.length<A.highWaterMark||A.flowing&&A.length===0);){var z=A.length;if(u("maybeReadMore read 0"),O.read(0),z===A.length)break}A.readingMore=!1}function T(O){var A=O._readableState;A.readableListening=O.listenerCount("readable")>0,A.resumeScheduled&&!A.paused?A.flowing=!0:O.listenerCount("data")>0&&O.resume()}function M(O){u("readable nexttick read 0"),O.read(0)}function V(O,A){u("resume",A.reading),A.reading||O.read(0),A.resumeScheduled=!1,O.emit("resume"),W(O),A.flowing&&!A.reading&&O.read(0)}function W(O){var A=O._readableState;for(u("flow",A.flowing);A.flowing&&O.read()!==null;);}function K(O,A){return A.length===0?null:(A.objectMode?z=A.buffer.shift():!O||O>=A.length?(z=A.decoder?A.buffer.join(""):A.buffer.length===1?A.buffer.first():A.buffer.concat(A.length),A.buffer.clear()):z=A.buffer.consume(O,A.decoder),z);var z}function Z(O){var A=O._readableState;u("endReadable",A.endEmitted),A.endEmitted||(A.ended=!0,o.nextTick(P,A,O))}function P(O,A){if(u("endReadableNT",O.endEmitted,O.length),!O.endEmitted&&O.length===0&&(O.endEmitted=!0,A.readable=!1,A.emit("end"),O.autoDestroy)){var z=A._writableState;(!z||z.autoDestroy&&z.finished)&&A.destroy()}}function G(O,A){for(var z=0,X=O.length;z<X;z++)if(O[z]===A)return z;return-1}H.prototype.read=function(O){u("read",O),O=parseInt(O,10);var A=this._readableState,z=O;if(O!==0&&(A.emittedReadable=!1),O===0&&A.needReadable&&((A.highWaterMark!==0?A.length>=A.highWaterMark:A.length>0)||A.ended))return u("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?Z(this):v(this),null;if((O=S(O,A))===0&&A.ended)return A.length===0&&Z(this),null;var X,ee=A.needReadable;return u("need readable",ee),(A.length===0||A.length-O<A.highWaterMark)&&u("length less than watermark",ee=!0),A.ended||A.reading?u("reading or ended",ee=!1):ee&&(u("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(O=S(z,A))),(X=O>0?K(O,A):null)===null?(A.needReadable=A.length<=A.highWaterMark,O=0):(A.length-=O,A.awaitDrain=0),A.length===0&&(A.ended||(A.needReadable=!0),z!==O&&A.ended&&Z(this)),X!==null&&this.emit("data",X),X},H.prototype._read=function(O){N(this,new $("_read()"))},H.prototype.pipe=function(O,A){var z=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=O;break;case 1:X.pipes=[X.pipes,O];break;default:X.pipes.push(O)}X.pipesCount+=1,u("pipe count=%d opts=%j",X.pipesCount,A);var ee=(!A||A.end!==!1)&&O!==o.stdout&&O!==o.stderr?te:he;function J(me,ye){u("onunpipe"),me===z&&ye&&ye.hasUnpiped===!1&&(ye.hasUnpiped=!0,u("cleanup"),O.removeListener("close",se),O.removeListener("finish",pe),O.removeListener("drain",le),O.removeListener("error",oe),O.removeListener("unpipe",J),z.removeListener("end",te),z.removeListener("end",he),z.removeListener("data",Q),ce=!0,!X.awaitDrain||O._writableState&&!O._writableState.needDrain||le())}function te(){u("onend"),O.end()}X.endEmitted?o.nextTick(ee):z.once("end",ee),O.on("unpipe",J);var le=function(me){return function(){var ye=me._readableState;u("pipeOnDrain",ye.awaitDrain),ye.awaitDrain&&ye.awaitDrain--,ye.awaitDrain===0&&l(me,"data")&&(ye.flowing=!0,W(me))}}(z);O.on("drain",le);var ce=!1;function Q(me){u("ondata");var ye=O.write(me);u("dest.write",ye),ye===!1&&((X.pipesCount===1&&X.pipes===O||X.pipesCount>1&&G(X.pipes,O)!==-1)&&!ce&&(u("false write response, pause",X.awaitDrain),X.awaitDrain++),z.pause())}function oe(me){u("onerror",me),he(),O.removeListener("error",oe),l(O,"error")===0&&N(O,me)}function se(){O.removeListener("finish",pe),he()}function pe(){u("onfinish"),O.removeListener("close",se),he()}function he(){u("unpipe"),z.unpipe(O)}return z.on("data",Q),function(me,ye,xe){if(typeof me.prependListener=="function")return me.prependListener(ye,xe);me._events&&me._events[ye]?Array.isArray(me._events[ye])?me._events[ye].unshift(xe):me._events[ye]=[xe,me._events[ye]]:me.on(ye,xe)}(O,"error",oe),O.once("close",se),O.once("finish",pe),O.emit("pipe",z),X.flowing||(u("pipe resume"),z.resume()),O},H.prototype.unpipe=function(O){var A=this._readableState,z={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return O&&O!==A.pipes||(O||(O=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,O&&O.emit("unpipe",this,z)),this;if(!O){var X=A.pipes,ee=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var J=0;J<ee;J++)X[J].emit("unpipe",this,{hasUnpiped:!1});return this}var te=G(A.pipes,O);return te===-1||(A.pipes.splice(te,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),O.emit("unpipe",this,z)),this},H.prototype.on=function(O,A){var z=d.prototype.on.call(this,O,A),X=this._readableState;return O==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):O==="readable"&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,u("on readable",X.length,X.reading),X.length?v(this):X.reading||o.nextTick(M,this))),z},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(O,A){var z=d.prototype.removeListener.call(this,O,A);return O==="readable"&&o.nextTick(T,this),z},H.prototype.removeAllListeners=function(O){var A=d.prototype.removeAllListeners.apply(this,arguments);return O!=="readable"&&O!==void 0||o.nextTick(T,this),A},H.prototype.resume=function(){var O=this._readableState;return O.flowing||(u("resume"),O.flowing=!O.readableListening,function(A,z){z.resumeScheduled||(z.resumeScheduled=!0,o.nextTick(V,A,z))}(this,O)),O.paused=!1,this},H.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},H.prototype.wrap=function(O){var A=this,z=this._readableState,X=!1;for(var ee in O.on("end",function(){if(u("wrapped end"),z.decoder&&!z.ended){var te=z.decoder.end();te&&te.length&&A.push(te)}A.push(null)}),O.on("data",function(te){u("wrapped data"),z.decoder&&(te=z.decoder.write(te)),z.objectMode&&te==null||(z.objectMode||te&&te.length)&&(A.push(te)||(X=!0,O.pause()))}),O)this[ee]===void 0&&typeof O[ee]=="function"&&(this[ee]=function(te){return function(){return O[te].apply(O,arguments)}}(ee));for(var J=0;J<L.length;J++)O.on(L[J],this.emit.bind(this,L[J]));return this._read=function(te){u("wrapped _read",te),X&&(X=!1,O.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=t("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(O){this._readableState&&(this._readableState.flowing=O)}}),H._fromList=K,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(H.from=function(O,A){return m===void 0&&(m=t("./internal/streams/from")),m(H,O,A)})}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,n,s){n.exports=u;var o=t("../errors").codes,r=o.ERR_METHOD_NOT_IMPLEMENTED,a=o.ERR_MULTIPLE_CALLBACK,l=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=o.ERR_TRANSFORM_WITH_LENGTH_0,c=t("./_stream_duplex");function h(g,m){var b=this._transformState;b.transforming=!1;var _=b.writecb;if(_===null)return this.emit("error",new a);b.writechunk=null,b.writecb=null,m!=null&&this.push(m),_(g);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function u(g){if(!(this instanceof u))return new u(g);c.call(this,g),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",p)}function p(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?f(this,null,null):this._flush(function(m,b){f(g,m,b)})}function f(g,m,b){if(m)return g.emit("error",m);if(b!=null&&g.push(b),g._writableState.length)throw new d;if(g._transformState.transforming)throw new l;return g.push(null)}t("inherits")(u,c),u.prototype.push=function(g,m){return this._transformState.needTransform=!1,c.prototype.push.call(this,g,m)},u.prototype._transform=function(g,m,b){b(new r("_transform()"))},u.prototype._write=function(g,m,b){var _=this._transformState;if(_.writecb=b,_.writechunk=g,_.writeencoding=m,!_.transforming){var w=this._readableState;(_.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},u.prototype._read=function(g){var m=this._transformState;m.writechunk===null||m.transforming?m.needTransform=!0:(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform))},u.prototype._destroy=function(g,m){c.prototype._destroy.call(this,g,function(b){m(b)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,n,s){(function(o,r){(function(){function a(x){var T=this;this.next=null,this.entry=null,this.finish=function(){(function(M,V,W){var K=M.entry;for(M.entry=null;K;){var Z=K.callback;V.pendingcb--,Z(W),K=K.next}V.corkedRequestsFree.next=M})(T,x)}}var l;n.exports=H,H.WritableState=j;var d={deprecate:t("util-deprecate")},c=t("./internal/streams/stream"),h=t("buffer").Buffer,u=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p,f=t("./internal/streams/destroy"),g=t("./internal/streams/state").getHighWaterMark,m=t("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,_=m.ERR_METHOD_NOT_IMPLEMENTED,w=m.ERR_MULTIPLE_CALLBACK,E=m.ERR_STREAM_CANNOT_PIPE,D=m.ERR_STREAM_DESTROYED,B=m.ERR_STREAM_NULL_VALUES,$=m.ERR_STREAM_WRITE_AFTER_END,F=m.ERR_UNKNOWN_ENCODING,N=f.errorOrDestroy;function L(){}function j(x,T,M){l=l||t("./_stream_duplex"),x=x||{},typeof M!="boolean"&&(M=T instanceof l),this.objectMode=!!x.objectMode,M&&(this.objectMode=this.objectMode||!!x.writableObjectMode),this.highWaterMark=g(this,x,"writableHighWaterMark",M),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var V=x.decodeStrings===!1;this.decodeStrings=!V,this.defaultEncoding=x.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){(function(K,Z){var P=K._writableState,G=P.sync,O=P.writecb;if(typeof O!="function")throw new w;if(function(z){z.writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0}(P),Z)(function(z,X,ee,J,te){--X.pendingcb,ee?(o.nextTick(te,J),o.nextTick(C,z,X),z._writableState.errorEmitted=!0,N(z,J)):(te(J),z._writableState.errorEmitted=!0,N(z,J),C(z,X))})(K,P,G,Z,O);else{var A=v(P)||K.destroyed;A||P.corked||P.bufferProcessing||!P.bufferedRequest||S(K,P),G?o.nextTick(k,K,P,A,O):k(K,P,A,O)}})(T,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=x.emitClose!==!1,this.autoDestroy=!!x.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function H(x){var T=this instanceof(l=l||t("./_stream_duplex"));if(!T&&!p.call(H,this))return new H(x);this._writableState=new j(x,this,T),this.writable=!0,x&&(typeof x.write=="function"&&(this._write=x.write),typeof x.writev=="function"&&(this._writev=x.writev),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.final=="function"&&(this._final=x.final)),c.call(this)}function I(x,T,M,V,W,K,Z){T.writelen=V,T.writecb=Z,T.writing=!0,T.sync=!0,T.destroyed?T.onwrite(new D("write")):M?x._writev(W,T.onwrite):x._write(W,K,T.onwrite),T.sync=!1}function k(x,T,M,V){M||function(W,K){K.length===0&&K.needDrain&&(K.needDrain=!1,W.emit("drain"))}(x,T),T.pendingcb--,V(),C(x,T)}function S(x,T){T.bufferProcessing=!0;var M=T.bufferedRequest;if(x._writev&&M&&M.next){var V=T.bufferedRequestCount,W=new Array(V),K=T.corkedRequestsFree;K.entry=M;for(var Z=0,P=!0;M;)W[Z]=M,M.isBuf||(P=!1),M=M.next,Z+=1;W.allBuffers=P,I(x,T,!0,T.length,W,"",K.finish),T.pendingcb++,T.lastBufferedRequest=null,K.next?(T.corkedRequestsFree=K.next,K.next=null):T.corkedRequestsFree=new a(T),T.bufferedRequestCount=0}else{for(;M;){var G=M.chunk,O=M.encoding,A=M.callback;if(I(x,T,!1,T.objectMode?1:G.length,G,O,A),M=M.next,T.bufferedRequestCount--,T.writing)break}M===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=M,T.bufferProcessing=!1}function v(x){return x.ending&&x.length===0&&x.bufferedRequest===null&&!x.finished&&!x.writing}function y(x,T){x._final(function(M){T.pendingcb--,M&&N(x,M),T.prefinished=!0,x.emit("prefinish"),C(x,T)})}function C(x,T){var M=v(T);if(M&&(function(W,K){K.prefinished||K.finalCalled||(typeof W._final!="function"||K.destroyed?(K.prefinished=!0,W.emit("prefinish")):(K.pendingcb++,K.finalCalled=!0,o.nextTick(y,W,K)))}(x,T),T.pendingcb===0&&(T.finished=!0,x.emit("finish"),T.autoDestroy))){var V=x._readableState;(!V||V.autoDestroy&&V.endEmitted)&&x.destroy()}return M}t("inherits")(H,c),j.prototype.getBuffer=function(){for(var x=this.bufferedRequest,T=[];x;)T.push(x),x=x.next;return T},function(){try{Object.defineProperty(j.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(H,Symbol.hasInstance,{value:function(x){return!!p.call(this,x)||this===H&&x&&x._writableState instanceof j}})):p=function(x){return x instanceof this},H.prototype.pipe=function(){N(this,new E)},H.prototype.write=function(x,T,M){var V,W=this._writableState,K=!1,Z=!W.objectMode&&(V=x,h.isBuffer(V)||V instanceof u);return Z&&!h.isBuffer(x)&&(x=function(P){return h.from(P)}(x)),typeof T=="function"&&(M=T,T=null),Z?T="buffer":T||(T=W.defaultEncoding),typeof M!="function"&&(M=L),W.ending?function(P,G){var O=new $;N(P,O),o.nextTick(G,O)}(this,M):(Z||function(P,G,O,A){var z;return O===null?z=new B:typeof O=="string"||G.objectMode||(z=new b("chunk",["string","Buffer"],O)),!z||(N(P,z),o.nextTick(A,z),!1)}(this,W,x,M))&&(W.pendingcb++,K=function(P,G,O,A,z,X){if(!O){var ee=function(ce,Q,oe){return ce.objectMode||ce.decodeStrings===!1||typeof Q!="string"||(Q=h.from(Q,oe)),Q}(G,A,z);A!==ee&&(O=!0,z="buffer",A=ee)}var J=G.objectMode?1:A.length;G.length+=J;var te=G.length<G.highWaterMark;if(te||(G.needDrain=!0),G.writing||G.corked){var le=G.lastBufferedRequest;G.lastBufferedRequest={chunk:A,encoding:z,isBuf:O,callback:X,next:null},le?le.next=G.lastBufferedRequest:G.bufferedRequest=G.lastBufferedRequest,G.bufferedRequestCount+=1}else I(P,G,!1,J,A,z,X);return te}(this,W,Z,x,T,M)),K},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){var x=this._writableState;x.corked&&(x.corked--,x.writing||x.corked||x.bufferProcessing||!x.bufferedRequest||S(this,x))},H.prototype.setDefaultEncoding=function(x){if(typeof x=="string"&&(x=x.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((x+"").toLowerCase())>-1))throw new F(x);return this._writableState.defaultEncoding=x,this},Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),H.prototype._write=function(x,T,M){M(new _("_write()"))},H.prototype._writev=null,H.prototype.end=function(x,T,M){var V=this._writableState;return typeof x=="function"?(M=x,x=null,T=null):typeof T=="function"&&(M=T,T=null),x!=null&&this.write(x,T),V.corked&&(V.corked=1,this.uncork()),V.ending||function(W,K,Z){K.ending=!0,C(W,K),Z&&(K.finished?o.nextTick(Z):W.once("finish",Z)),K.ended=!0,W.writable=!1}(this,V,M),this},Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(x){this._writableState&&(this._writableState.destroyed=x)}}),H.prototype.destroy=f.destroy,H.prototype._undestroy=f.undestroy,H.prototype._destroy=function(x,T){T(x)}}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,n,s){(function(o){(function(){var r;function a(D,B,$){return(B=function(F){var N=function(L,j){if(typeof L!="object"||L===null)return L;var H=L[Symbol.toPrimitive];if(H!==void 0){var I=H.call(L,j||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(L)}(F,"string");return typeof N=="symbol"?N:String(N)}(B))in D?Object.defineProperty(D,B,{value:$,enumerable:!0,configurable:!0,writable:!0}):D[B]=$,D}var l=t("./end-of-stream"),d=Symbol("lastResolve"),c=Symbol("lastReject"),h=Symbol("error"),u=Symbol("ended"),p=Symbol("lastPromise"),f=Symbol("handlePromise"),g=Symbol("stream");function m(D,B){return{value:D,done:B}}function b(D){var B=D[d];if(B!==null){var $=D[g].read();$!==null&&(D[p]=null,D[d]=null,D[c]=null,B(m($,!1)))}}function _(D){o.nextTick(b,D)}var w=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((a(r={get stream(){return this[g]},next:function(){var D=this,B=this[h];if(B!==null)return Promise.reject(B);if(this[u])return Promise.resolve(m(void 0,!0));if(this[g].destroyed)return new Promise(function(L,j){o.nextTick(function(){D[h]?j(D[h]):L(m(void 0,!0))})});var $,F=this[p];if(F)$=new Promise(function(L,j){return function(H,I){L.then(function(){j[u]?H(m(void 0,!0)):j[f](H,I)},I)}}(F,this));else{var N=this[g].read();if(N!==null)return Promise.resolve(m(N,!1));$=new Promise(this[f])}return this[p]=$,$}},Symbol.asyncIterator,function(){return this}),a(r,"return",function(){var D=this;return new Promise(function(B,$){D[g].destroy(null,function(F){F?$(F):B(m(void 0,!0))})})}),r),w);n.exports=function(D){var B,$=Object.create(E,(a(B={},g,{value:D,writable:!0}),a(B,d,{value:null,writable:!0}),a(B,c,{value:null,writable:!0}),a(B,h,{value:null,writable:!0}),a(B,u,{value:D._readableState.endEmitted,writable:!0}),a(B,f,{value:function(F,N){var L=$[g].read();L?($[p]=null,$[d]=null,$[c]=null,F(m(L,!1))):($[d]=F,$[c]=N)},writable:!0}),B));return $[p]=null,l(D,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var N=$[c];return N!==null&&($[p]=null,$[d]=null,$[c]=null,N(F)),void($[h]=F)}var L=$[d];L!==null&&($[p]=null,$[d]=null,$[c]=null,L(m(void 0,!0))),$[u]=!0}),D.on("readable",_.bind(null,$)),$}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,n,s){function o(p,f){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);f&&(m=m.filter(function(b){return Object.getOwnPropertyDescriptor(p,b).enumerable})),g.push.apply(g,m)}return g}function r(p){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?o(Object(g),!0).forEach(function(m){a(p,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):o(Object(g)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(g,m))})}return p}function a(p,f,g){return(f=d(f))in p?Object.defineProperty(p,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):p[f]=g,p}function l(p,f){for(var g=0;g<f.length;g++){var m=f[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,d(m.key),m)}}function d(p){var f=function(g,m){if(typeof g!="object"||g===null)return g;var b=g[Symbol.toPrimitive];if(b!==void 0){var _=b.call(g,m||"default");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(g)}(p,"string");return typeof f=="symbol"?f:String(f)}var c=t("buffer").Buffer,h=t("util").inspect,u=h&&h.custom||"inspect";n.exports=function(){function p(){(function(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")})(this,p),this.head=null,this.tail=null,this.length=0}var f,g;return f=p,(g=[{key:"push",value:function(m){var b={data:m,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(m){var b={data:m,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var b=this.head,_=""+b.data;b=b.next;)_+=m+b.data;return _}},{key:"concat",value:function(m){if(this.length===0)return c.alloc(0);for(var b,_,w,E=c.allocUnsafe(m>>>0),D=this.head,B=0;D;)b=D.data,_=E,w=B,c.prototype.copy.call(b,_,w),B+=D.data.length,D=D.next;return E}},{key:"consume",value:function(m,b){var _;return m<this.head.data.length?(_=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):_=m===this.head.data.length?this.shift():b?this._getString(m):this._getBuffer(m),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var b=this.head,_=1,w=b.data;for(m-=w.length;b=b.next;){var E=b.data,D=m>E.length?E.length:m;if(D===E.length?w+=E:w+=E.slice(0,m),(m-=D)==0){D===E.length?(++_,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=E.slice(D));break}++_}return this.length-=_,w}},{key:"_getBuffer",value:function(m){var b=c.allocUnsafe(m),_=this.head,w=1;for(_.data.copy(b),m-=_.data.length;_=_.next;){var E=_.data,D=m>E.length?E.length:m;if(E.copy(b,b.length-m,0,D),(m-=D)==0){D===E.length?(++w,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=E.slice(D));break}++w}return this.length-=w,b}},{key:u,value:function(m,b){return h(this,r(r({},b),{},{depth:0,customInspect:!1}))}}])&&l(f.prototype,g),Object.defineProperty(f,"prototype",{writable:!1}),p}()},{buffer:220,util:188}],485:[function(t,n,s){(function(o){(function(){function r(d,c){l(d,c),a(d)}function a(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function l(d,c){d.emit("error",c)}n.exports={destroy:function(d,c){var h=this,u=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return u||p?(c?c(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(l,this,d)):o.nextTick(l,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(f){!c&&f?h._writableState?h._writableState.errorEmitted?o.nextTick(a,h):(h._writableState.errorEmitted=!0,o.nextTick(r,h,f)):o.nextTick(r,h,f):c?(o.nextTick(a,h),c(f)):o.nextTick(a,h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(d,c){var h=d._readableState,u=d._writableState;h&&h.autoDestroy||u&&u.autoDestroy?d.destroy(c):d.emit("error",c)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,n,s){var o=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}n.exports=function a(l,d,c){if(typeof d=="function")return a(l,null,d);d||(d={}),c=function(D){var B=!1;return function(){if(!B){B=!0;for(var $=arguments.length,F=new Array($),N=0;N<$;N++)F[N]=arguments[N];D.apply(this,F)}}}(c||r);var h=d.readable||d.readable!==!1&&l.readable,u=d.writable||d.writable!==!1&&l.writable,p=function(){l.writable||g()},f=l._writableState&&l._writableState.finished,g=function(){u=!1,f=!0,h||c.call(l)},m=l._readableState&&l._readableState.endEmitted,b=function(){h=!1,m=!0,u||c.call(l)},_=function(D){c.call(l,D)},w=function(){var D;return h&&!m?(l._readableState&&l._readableState.ended||(D=new o),c.call(l,D)):u&&!f?(l._writableState&&l._writableState.ended||(D=new o),c.call(l,D)):void 0},E=function(){l.req.on("finish",g)};return function(D){return D.setHeader&&typeof D.abort=="function"}(l)?(l.on("complete",g),l.on("abort",w),l.req?E():l.on("request",E)):u&&!l._writableState&&(l.on("end",p),l.on("close",p)),l.on("end",b),l.on("finish",g),d.error!==!1&&l.on("error",_),l.on("close",w),function(){l.removeListener("complete",g),l.removeListener("abort",w),l.removeListener("request",E),l.req&&l.req.removeListener("finish",g),l.removeListener("end",p),l.removeListener("close",p),l.removeListener("finish",g),l.removeListener("end",b),l.removeListener("error",_),l.removeListener("close",w)}}},{"../../../errors":477}],487:[function(t,n,s){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,n,s){var o,r=t("../../../errors").codes,a=r.ERR_MISSING_ARGS,l=r.ERR_STREAM_DESTROYED;function d(f){if(f)throw f}function c(f,g,m,b){b=function(E){var D=!1;return function(){D||(D=!0,E.apply(void 0,arguments))}}(b);var _=!1;f.on("close",function(){_=!0}),o===void 0&&(o=t("./end-of-stream")),o(f,{readable:g,writable:m},function(E){if(E)return b(E);_=!0,b()});var w=!1;return function(E){if(!_&&!w)return w=!0,function(D){return D.setHeader&&typeof D.abort=="function"}(f)?f.abort():typeof f.destroy=="function"?f.destroy():void b(E||new l("pipe"))}}function h(f){f()}function u(f,g){return f.pipe(g)}function p(f){return f.length?typeof f[f.length-1]!="function"?d:f.pop():d}n.exports=function(){for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];var b,_=p(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new a("streams");var w=g.map(function(E,D){var B=D<g.length-1;return c(E,B,D>0,function($){b||(b=$),$&&w.forEach(h),B||(w.forEach(h),_(b))})});return g.reduce(u)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,n,s){var o=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(r,a,l,d){var c=function(h,u,p){return h.highWaterMark!=null?h.highWaterMark:u?h[p]:null}(a,d,l);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new o(d?l:"highWaterMark",c);return Math.floor(c)}return r.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,n,s){n.exports=t("events").EventEmitter},{events:422}],491:[function(t,n,s){(s=n.exports=t("./lib/_stream_readable.js")).Stream=s,s.Readable=s,s.Writable=t("./lib/_stream_writable.js"),s.Duplex=t("./lib/_stream_duplex.js"),s.Transform=t("./lib/_stream_transform.js"),s.PassThrough=t("./lib/_stream_passthrough.js"),s.finished=t("./lib/internal/streams/end-of-stream.js"),s.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,n,s){var o=function(r){var a=Object.prototype,l=a.hasOwnProperty,d=Object.defineProperty||function(C,x,T){C[x]=T.value},c=typeof Symbol=="function"?Symbol:{},h=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",p=c.toStringTag||"@@toStringTag";function f(C,x,T){return Object.defineProperty(C,x,{value:T,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{f({},"")}catch{f=function(x,T,M){return x[T]=M}}function g(C,x,T,M){var V=x&&x.prototype instanceof _?x:_,W=Object.create(V.prototype),K=new S(M||[]);return d(W,"_invoke",{value:j(C,T,K)}),W}function m(C,x,T){try{return{type:"normal",arg:C.call(x,T)}}catch(M){return{type:"throw",arg:M}}}r.wrap=g;var b={};function _(){}function w(){}function E(){}var D={};f(D,h,function(){return this});var B=Object.getPrototypeOf,$=B&&B(B(v([])));$&&$!==a&&l.call($,h)&&(D=$);var F=E.prototype=_.prototype=Object.create(D);function N(C){["next","throw","return"].forEach(function(x){f(C,x,function(T){return this._invoke(x,T)})})}function L(C,x){var T;d(this,"_invoke",{value:function(M,V){function W(){return new x(function(K,Z){(function P(G,O,A,z){var X=m(C[G],C,O);if(X.type!=="throw"){var ee=X.arg,J=ee.value;return J&&typeof J=="object"&&l.call(J,"__await")?x.resolve(J.__await).then(function(te){P("next",te,A,z)},function(te){P("throw",te,A,z)}):x.resolve(J).then(function(te){ee.value=te,A(ee)},function(te){return P("throw",te,A,z)})}z(X.arg)})(M,V,K,Z)})}return T=T?T.then(W,W):W()}})}function j(C,x,T){var M="suspendedStart";return function(V,W){if(M==="executing")throw new Error("Generator is already running");if(M==="completed"){if(V==="throw")throw W;return y()}for(T.method=V,T.arg=W;;){var K=T.delegate;if(K){var Z=H(K,T);if(Z){if(Z===b)continue;return Z}}if(T.method==="next")T.sent=T._sent=T.arg;else if(T.method==="throw"){if(M==="suspendedStart")throw M="completed",T.arg;T.dispatchException(T.arg)}else T.method==="return"&&T.abrupt("return",T.arg);M="executing";var P=m(C,x,T);if(P.type==="normal"){if(M=T.done?"completed":"suspendedYield",P.arg===b)continue;return{value:P.arg,done:T.done}}P.type==="throw"&&(M="completed",T.method="throw",T.arg=P.arg)}}}function H(C,x){var T=x.method,M=C.iterator[T];if(M===void 0)return x.delegate=null,T==="throw"&&C.iterator.return&&(x.method="return",x.arg=void 0,H(C,x),x.method==="throw")||T!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+T+"' method")),b;var V=m(M,C.iterator,x.arg);if(V.type==="throw")return x.method="throw",x.arg=V.arg,x.delegate=null,b;var W=V.arg;return W?W.done?(x[C.resultName]=W.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,b):W:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,b)}function I(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function k(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function S(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(I,this),this.reset(!0)}function v(C){if(C){var x=C[h];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var T=-1,M=function V(){for(;++T<C.length;)if(l.call(C,T))return V.value=C[T],V.done=!1,V;return V.value=void 0,V.done=!0,V};return M.next=M}}return{next:y}}function y(){return{value:void 0,done:!0}}return w.prototype=E,d(F,"constructor",{value:E,configurable:!0}),d(E,"constructor",{value:w,configurable:!0}),w.displayName=f(E,p,"GeneratorFunction"),r.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===w||(x.displayName||x.name)==="GeneratorFunction")},r.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,E):(C.__proto__=E,f(C,p,"GeneratorFunction")),C.prototype=Object.create(F),C},r.awrap=function(C){return{__await:C}},N(L.prototype),f(L.prototype,u,function(){return this}),r.AsyncIterator=L,r.async=function(C,x,T,M,V){V===void 0&&(V=Promise);var W=new L(g(C,x,T,M),V);return r.isGeneratorFunction(x)?W:W.next().then(function(K){return K.done?K.value:W.next()})},N(F),f(F,p,"Generator"),f(F,h,function(){return this}),f(F,"toString",function(){return"[object Generator]"}),r.keys=function(C){var x=Object(C),T=[];for(var M in x)T.push(M);return T.reverse(),function V(){for(;T.length;){var W=T.pop();if(W in x)return V.value=W,V.done=!1,V}return V.done=!0,V}},r.values=v,S.prototype={constructor:S,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!C)for(var x in this)x.charAt(0)==="t"&&l.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function T(P,G){return W.type="throw",W.arg=C,x.next=P,G&&(x.method="next",x.arg=void 0),!!G}for(var M=this.tryEntries.length-1;M>=0;--M){var V=this.tryEntries[M],W=V.completion;if(V.tryLoc==="root")return T("end");if(V.tryLoc<=this.prev){var K=l.call(V,"catchLoc"),Z=l.call(V,"finallyLoc");if(K&&Z){if(this.prev<V.catchLoc)return T(V.catchLoc,!0);if(this.prev<V.finallyLoc)return T(V.finallyLoc)}else if(K){if(this.prev<V.catchLoc)return T(V.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return T(V.finallyLoc)}}}},abrupt:function(C,x){for(var T=this.tryEntries.length-1;T>=0;--T){var M=this.tryEntries[T];if(M.tryLoc<=this.prev&&l.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var V=M;break}}V&&(C==="break"||C==="continue")&&V.tryLoc<=x&&x<=V.finallyLoc&&(V=null);var W=V?V.completion:{};return W.type=C,W.arg=x,V?(this.method="next",this.next=V.finallyLoc,b):this.complete(W)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),b},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var T=this.tryEntries[x];if(T.finallyLoc===C)return this.complete(T.completion,T.afterLoc),k(T),b}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var T=this.tryEntries[x];if(T.tryLoc===C){var M=T.completion;if(M.type==="throw"){var V=M.arg;k(T)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,T){return this.delegate={iterator:v(C),resultName:x,nextLoc:T},this.method==="next"&&(this.arg=void 0),b}},r}(typeof n=="object"?n.exports:{});try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},{}],493:[function(t,n,s){var o=t("buffer").Buffer,r=t("inherits"),a=t("hash-base"),l=new Array(16),d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function g(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(B,$){return B<<$|B>>>32-$}function b(B,$,F,N,L,j,H,I){return m(B+($^F^N)+j+H|0,I)+L|0}function _(B,$,F,N,L,j,H,I){return m(B+($&F|~$&N)+j+H|0,I)+L|0}function w(B,$,F,N,L,j,H,I){return m(B+(($|~F)^N)+j+H|0,I)+L|0}function E(B,$,F,N,L,j,H,I){return m(B+($&N|F&~N)+j+H|0,I)+L|0}function D(B,$,F,N,L,j,H,I){return m(B+($^(F|~N))+j+H|0,I)+L|0}r(g,a),g.prototype._update=function(){for(var B=l,$=0;$<16;++$)B[$]=this._block.readInt32LE(4*$);for(var F=0|this._a,N=0|this._b,L=0|this._c,j=0|this._d,H=0|this._e,I=0|this._a,k=0|this._b,S=0|this._c,v=0|this._d,y=0|this._e,C=0;C<80;C+=1){var x,T;C<16?(x=b(F,N,L,j,H,B[d[C]],p[0],h[C]),T=D(I,k,S,v,y,B[c[C]],f[0],u[C])):C<32?(x=_(F,N,L,j,H,B[d[C]],p[1],h[C]),T=E(I,k,S,v,y,B[c[C]],f[1],u[C])):C<48?(x=w(F,N,L,j,H,B[d[C]],p[2],h[C]),T=w(I,k,S,v,y,B[c[C]],f[2],u[C])):C<64?(x=E(F,N,L,j,H,B[d[C]],p[3],h[C]),T=_(I,k,S,v,y,B[c[C]],f[3],u[C])):(x=D(F,N,L,j,H,B[d[C]],p[4],h[C]),T=b(I,k,S,v,y,B[c[C]],f[4],u[C])),F=H,H=j,j=m(L,10),L=N,N=x,I=y,y=v,v=m(S,10),S=k,k=T}var M=this._b+L+v|0;this._b=this._c+j+y|0,this._c=this._d+H+I|0,this._d=this._e+F+k|0,this._e=this._a+N+S|0,this._a=M},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var B=o.alloc?o.alloc(20):new o(20);return B.writeInt32LE(this._a,0),B.writeInt32LE(this._b,4),B.writeInt32LE(this._c,8),B.writeInt32LE(this._d,12),B.writeInt32LE(this._e,16),B},n.exports=g},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,n,s){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=t("buffer"),r=o.Buffer;function a(d,c){for(var h in d)c[h]=d[h]}function l(d,c,h){return r(d,c,h)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=o:(a(o,s),s.Buffer=l),l.prototype=Object.create(r.prototype),a(r,l),l.from=function(d,c,h){if(typeof d=="number")throw new TypeError("Argument must not be a number");return r(d,c,h)},l.alloc=function(d,c,h){if(typeof d!="number")throw new TypeError("Argument must be a number");var u=r(d);return c!==void 0?typeof h=="string"?u.fill(c,h):u.fill(c):u.fill(0),u},l.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r(d)},l.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(d)}},{buffer:220}],495:[function(t,n,s){(function(o){(function(){var r,a=t("buffer"),l=a.Buffer,d={};for(r in a)a.hasOwnProperty(r)&&r!=="SlowBuffer"&&r!=="Buffer"&&(d[r]=a[r]);var c=d.Buffer={};for(r in l)l.hasOwnProperty(r)&&r!=="allocUnsafe"&&r!=="allocUnsafeSlow"&&(c[r]=l[r]);if(d.Buffer.prototype=l.prototype,c.from&&c.from!==Uint8Array.from||(c.from=function(h,u,p){if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof h);if(h&&h.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);return l(h,u,p)}),c.alloc||(c.alloc=function(h,u,p){if(typeof h!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof h);if(h<0||h>=2*(1<<30))throw new RangeError('The value "'+h+'" is invalid for option "size"');var f=l(h);return u&&u.length!==0?typeof p=="string"?f.fill(u,p):f.fill(u):f.fill(0),f}),!d.kStringMaxLength)try{d.kStringMaxLength=o.binding("buffer").kStringMaxLength}catch{}d.constants||(d.constants={MAX_LENGTH:d.kMaxLength},d.kStringMaxLength&&(d.constants.MAX_STRING_LENGTH=d.kStringMaxLength)),n.exports=d}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0});const o=t("xmlchars/xml/1.0/ed5"),r=t("xmlchars/xml/1.1/ed2"),a=t("xmlchars/xmlns/1.0/ed3");var l=o.isS,d=o.isChar,c=o.isNameStartChar,h=o.isNameChar,u=o.S_LIST,p=o.NAME_RE,f=r.isChar,g=a.isNCNameStartChar,m=a.isNCNameChar,b=a.NC_NAME_RE;const _="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",E={__proto__:null,xml:_,xmlns:w},D={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},B=v=>v===34||v===39,$=[34,39],F=[...$,91,62],N=[...$,60,93],L=[61,63,...u],j=[...u,62,38,60];function H(v,y,C){switch(y){case"xml":C!==_&&v.fail(`xml prefix must be bound to ${_}.`);break;case"xmlns":C!==w&&v.fail(`xmlns prefix must be bound to ${w}.`)}switch(C){case w:v.fail(y===""?`the default namespace may not be set to ${C}.`:`may not assign a prefix (even "xmlns") to the URI ${w}.`);break;case _:switch(y){case"xml":break;case"":v.fail(`the default namespace may not be set to ${C}.`);break;default:v.fail("may not assign the xml namespace to another prefix.")}}}const I=v=>b.test(v),k=v=>p.test(v);s.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const S={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};s.SaxesParser=class{constructor(v){this.opt=v??{},this.fragmentOpt=!!this.opt.fragment;const y=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,y){this.nameStartCheck=g,this.nameCheck=m,this.isName=I,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},E);const C=this.opt.additionalNamespaces;C!=null&&(function(x,T){for(const M of Object.keys(T))H(x,M,T[M])}(this,C),Object.assign(this.ns,C))}else this.nameStartCheck=c,this.nameCheck=h,this.isName=k,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var v;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:y}=this;this.state=y?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=y,this.xmlDeclPossible=!y,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:C}=this.opt;if(C===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");C="1.0"}this.setXMLVersion(C),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(D),(v=this.readyHandler)===null||v===void 0||v.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(v,y){this[S[v]]=y}off(v){this[S[v]]=void 0}makeError(v){var y;let C=(y=this.fileName)!==null&&y!==void 0?y:"";return this.trackPosition&&(C.length>0&&(C+=":"),C+=`${this.line}:${this.column}`),C.length>0&&(C+=": "),new Error(C+v)}fail(v){const y=this.makeError(v),C=this.errorHandler;if(C===void 0)throw y;return C(y),this}write(v){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let y=!1;v===null?(y=!0,v=""):typeof v=="object"&&(v=v.toString()),this.carriedFromPrevious!==void 0&&(v=`${this.carriedFromPrevious}${v}`,this.carriedFromPrevious=void 0);let C=v.length;const x=v.charCodeAt(C-1);!y&&(x===13||x>=55296&&x<=56319)&&(this.carriedFromPrevious=v[C-1],C--,v=v.slice(0,C));const{stateTable:T}=this;for(this.chunk=v,this.i=0;this.i<C;)T[this.state].call(this);return this.chunkPosition+=C,y?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:v,i:y}=this;if(this.prevI=y,this.i=y+1,y>=v.length)return-1;const C=v.charCodeAt(y);if(this.column++,C<55296){if(C>=32||C===9)return C;switch(C){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return v.charCodeAt(y+1)===10&&(this.i=y+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),C}}if(C>56319)return C>=57344&&C<=65533||this.fail("disallowed character."),C;const x=65536+1024*(C-55296)+(v.charCodeAt(y+1)-56320);return this.i=y+2,x>1114111&&this.fail("disallowed character."),x}getCode11(){const{chunk:v,i:y}=this;if(this.prevI=y,this.i=y+1,y>=v.length)return-1;const C=v.charCodeAt(y);if(this.column++,C<55296){if(C>31&&C<127||C>159&&C!==8232||C===9)return C;switch(C){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const T=v.charCodeAt(y+1);T!==10&&T!==133||(this.i=y+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),C}}if(C>56319)return C>=57344&&C<=65533||this.fail("disallowed character."),C;const x=65536+1024*(C-55296)+(v.charCodeAt(y+1)-56320);return this.i=y+2,x>1114111&&this.fail("disallowed character."),x}getCodeNorm(){const v=this.getCode();return v===-2?10:v}unget(){this.i=this.prevI,this.column--}captureTo(v){let{i:y}=this;const{chunk:C}=this;for(;;){const x=this.getCode(),T=x===-2,M=T?10:x;if(M===-1||v.includes(M))return this.text+=C.slice(y,this.prevI),M;T&&(this.text+=C.slice(y,this.prevI)+`
`,y=this.i)}}captureToChar(v){let{i:y}=this;const{chunk:C}=this;for(;;){let x=this.getCode();switch(x){case-2:this.text+=C.slice(y,this.prevI)+`
`,y=this.i,x=10;break;case-1:return this.text+=C.slice(y),!1}if(x===v)return this.text+=C.slice(y,this.prevI),!0}}captureNameChars(){const{chunk:v,i:y}=this;for(;;){const C=this.getCode();if(C===-1)return this.name+=v.slice(y),-1;if(!h(C))return this.name+=v.slice(y,this.prevI),C===-2?10:C}}skipSpaces(){for(;;){const v=this.getCodeNorm();if(v===-1||!l(v))return v}}setXMLVersion(v){this.currentXMLVersion=v,v==="1.0"?(this.isChar=d,this.getCode=this.getCode10):(this.isChar=f,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const v=this.i,y=this.skipSpaces();switch(this.prevI!==v&&(this.xmlDeclPossible=!1),y){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var v;const y=this.captureTo(F);switch(y){case 62:(v=this.doctypeHandler)===null||v===void 0||v.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(y),y===91?this.state=4:B(y)&&(this.state=3,this.q=y)}}sDoctypeQuote(){const v=this.q;this.captureToChar(v)&&(this.text+=String.fromCodePoint(v),this.q=null,this.state=2)}sDTD(){const v=this.captureTo(N);v!==-1&&(this.text+=String.fromCodePoint(v),v===93?this.state=2:v===60?this.state=6:B(v)&&(this.state=5,this.q=v))}sDTDQuoted(){const v=this.q;this.captureToChar(v)&&(this.text+=String.fromCodePoint(v),this.state=4,this.q=null)}sDTDOpenWaka(){const v=this.getCodeNorm();switch(this.text+=String.fromCodePoint(v),v){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const v=String.fromCodePoint(this.getCodeNorm()),y=this.openWakaBang+=v;this.text+=v,y!=="-"&&(this.state=y==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),this.state=v===45?10:8}sDTDCommentEnded(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),v===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),v===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:v}=this;const{chunk:y}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=y.slice(v,this.prevI)+`
`,v=this.i;break;case 59:{const{entityReturnState:C}=this,x=this.entity+y.slice(v,this.prevI);let T;this.state=C,x===""?(this.fail("empty entity name."),T="&;"):(T=this.parseEntity(x),this.entity=""),C===13&&this.textHandler===void 0||(this.text+=T);break e}case-1:this.entity+=y.slice(v);break e}}sOpenWaka(){const v=this.getCode();if(c(v))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(v){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var v;const y=this.getCodeNorm();y===45?(this.state=19,(v=this.commentHandler)===null||v===void 0||v.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(y),this.state=17)}sCommentEnded(){const v=this.getCodeNorm();v!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(v),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const v=this.getCodeNorm();v===93?this.state=22:(this.text+="]"+String.fromCodePoint(v),this.state=20)}sCDataEnding2(){var v;const y=this.getCodeNorm();switch(y){case 62:(v=this.cdataHandler)===null||v===void 0||v.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(y),this.state=20}}sPIFirstChar(){const v=this.getCodeNorm();this.nameStartCheck(v)?(this.piTarget+=String.fromCodePoint(v),this.state=24):v===63||l(v)?(this.fail("processing instruction without a target."),this.state=v===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(v),this.state=24)}sPIRest(){const{chunk:v,i:y}=this;for(;;){const C=this.getCodeNorm();if(C===-1)return void(this.piTarget+=v.slice(y));if(!this.nameCheck(C)){this.piTarget+=v.slice(y,this.prevI);const x=C===63;x||l(C)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=x?33:27):this.state=x?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(C));break}}}sPIBody(){if(this.text.length===0){const v=this.getCodeNorm();v===63?this.state=26:l(v)||(this.text=String.fromCodePoint(v))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var v;const y=this.getCodeNorm();if(y===62){const{piTarget:C}=this;C.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(v=this.piHandler)===null||v===void 0||v.call(this,{target:C,body:this.text}),this.piTarget=this.text="",this.state=13}else y===63?this.text+="?":(this.text+="?"+String.fromCodePoint(y),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const v=this.skipSpaces();v!==63?v!==-1&&(this.state=28,this.name=String.fromCodePoint(v)):this.state=33}sXMLDeclName(){const v=this.captureTo(L);if(v===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(l(v)||v===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=v===61?30:29}}sXMLDeclEq(){const v=this.getCodeNorm();if(v===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(v)||(v!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const v=this.getCodeNorm();if(v===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(v)||(B(v)?this.q=v:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const v=this.captureTo([this.q,63]);if(v===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(v===-1)return;const y=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const C=y;this.xmlDecl.version=C,/^1\.[0-9]+$/.test(C)?this.opt.forceXMLVersion||this.setXMLVersion(C):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(y)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=y;break;case"standalone":y!=="yes"&&y!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=y}this.name="",this.state=32}sXMLDeclSeparator(){const v=this.getCodeNorm();v!==63?(l(v)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var v;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(v=this.xmldeclHandler)===null||v===void 0||v.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var v;const y=this.captureNameChars();if(y===-1)return;const C=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=C.ns=Object.create(null)),(v=this.openTagStartHandler)===null||v===void 0||v.call(this,C),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),y){case 62:this.openTag();break;case 47:this.state=35;break;default:l(y)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const v=this.skipSpaces();v!==-1&&(c(v)?(this.unget(),this.state=37):v===62?this.openTag():v===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const v=this.captureNameChars();v===61?this.state=39:l(v)?this.state=38:v===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):v!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const v=this.skipSpaces();switch(v){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",v===62?this.openTag():c(v)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const v=this.getCodeNorm();B(v)?(this.q=v,this.state=40):l(v)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:v,chunk:y}=this;let{i:C}=this;for(;;)switch(this.getCode()){case v:return this.pushAttrib(this.name,this.text+y.slice(C,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=y.slice(C,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=y.slice(C,this.prevI)+" ",C=this.i;break;case 60:return this.text+=y.slice(C,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=y.slice(C))}}sAttribValueClosed(){const v=this.getCodeNorm();l(v)?this.state=36:v===62?this.openTag():v===47?this.state=35:c(v)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const v=this.captureTo(j);switch(v){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",v===62?this.openTag():this.state=36}}sCloseTag(){const v=this.captureNameChars();v===62?this.closeTag():l(v)?this.state=44:v!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:v,forbiddenState:y}=this;const{chunk:C,textHandler:x}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,x!==void 0){const{text:T}=this,M=C.slice(v,this.prevI);T.length!==0?(x(T+M),this.text=""):M.length!==0&&x(M)}y=0;break e;case 38:this.state=14,this.entityReturnState=13,x!==void 0&&(this.text+=C.slice(v,this.prevI)),y=0;break e;case 93:switch(y){case 0:y=1;break;case 1:y=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:y===2&&this.fail('the string "]]>" is disallowed in char data.'),y=0;break;case-2:x!==void 0&&(this.text+=C.slice(v,this.prevI)+`
`),v=this.i,y=0;break;case-1:x!==void 0&&(this.text+=C.slice(v));break e;default:y=0}this.forbiddenState=y}handleTextOutsideRoot(){let{i:v}=this;const{chunk:y,textHandler:C}=this;let x=!1;e:for(;;){const T=this.getCode();switch(T){case 60:if(this.state=15,C!==void 0){const{text:M}=this,V=y.slice(v,this.prevI);M.length!==0?(C(M+V),this.text=""):V.length!==0&&C(V)}break e;case 38:this.state=14,this.entityReturnState=13,C!==void 0&&(this.text+=y.slice(v,this.prevI)),x=!0;break e;case-2:C!==void 0&&(this.text+=y.slice(v,this.prevI)+`
`),v=this.i;break;case-1:C!==void 0&&(this.text+=y.slice(v));break e;default:l(T)||(x=!0)}}x&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(v,y){var C;const{prefix:x,local:T}=this.qname(v),M={name:v,prefix:x,local:T,value:y};if(this.attribList.push(M),(C=this.attributeHandler)===null||C===void 0||C.call(this,M),x==="xmlns"){const V=y.trim();this.currentXMLVersion==="1.0"&&V===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[T]=V,H(this,T,V)}else if(v==="xmlns"){const V=y.trim();this.topNS[""]=V,H(this,"",V)}}pushAttribPlain(v,y){var C;const x={name:v,value:y};this.attribList.push(x),(C=this.attributeHandler)===null||C===void 0||C.call(this,x)}end(){var v,y;this.sawRoot||this.fail("document must contain a root element.");const{tags:C}=this;for(;C.length>0;){const T=C.pop();this.fail("unclosed tag: "+T.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:x}=this;return x.length!==0&&((v=this.textHandler)===null||v===void 0||v.call(this,x),this.text=""),this._closed=!0,(y=this.endHandler)===null||y===void 0||y.call(this),this._init(),this}resolve(v){var y,C;let x=this.topNS[v];if(x!==void 0)return x;const{tags:T}=this;for(let M=T.length-1;M>=0;M--)if(x=T[M].ns[v],x!==void 0)return x;return x=this.ns[v],x!==void 0?x:(C=(y=this.opt).resolvePrefix)===null||C===void 0?void 0:C.call(y,v)}qname(v){const y=v.indexOf(":");if(y===-1)return{prefix:"",local:v};const C=v.slice(y+1),x=v.slice(0,y);return(x===""||C===""||C.includes(":"))&&this.fail(`malformed name: ${v}.`),{prefix:x,local:C}}processAttribsNS(){var v;const{attribList:y}=this,C=this.tag;{const{prefix:M,local:V}=this.qname(C.name);C.prefix=M,C.local=V;const W=C.uri=(v=this.resolve(M))!==null&&v!==void 0?v:"";M!==""&&(M==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),W===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(M)}.`),C.uri=M))}if(y.length===0)return;const{attributes:x}=C,T=new Set;for(const M of y){const{name:V,prefix:W,local:K}=M;let Z,P;W===""?(Z=V==="xmlns"?w:"",P=V):(Z=this.resolve(W),Z===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(W)}.`),Z=W),P=`{${Z}}${K}`),T.has(P)&&this.fail(`duplicate attribute: ${P}.`),T.add(P),M.uri=Z,x[V]=M}this.attribList=[]}processAttribsPlain(){const{attribList:v}=this,y=this.tag.attributes;for(const{name:C,value:x}of v)y[C]!==void 0&&this.fail(`duplicate attribute: ${C}.`),y[C]=x;this.attribList=[]}openTag(){var v;this.processAttribs();const{tags:y}=this,C=this.tag;C.isSelfClosing=!1,(v=this.openTagHandler)===null||v===void 0||v.call(this,C),y.push(C),this.state=13,this.name=""}openSelfClosingTag(){var v,y,C;this.processAttribs();const{tags:x}=this,T=this.tag;T.isSelfClosing=!0,(v=this.openTagHandler)===null||v===void 0||v.call(this,T),(y=this.closeTagHandler)===null||y===void 0||y.call(this,T),(this.tag=(C=x[x.length-1])!==null&&C!==void 0?C:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:v,name:y}=this;if(this.state=13,this.name="",y==="")return this.fail("weird empty close tag."),void(this.text+="</>");const C=this.closeTagHandler;let x=v.length;for(;x-- >0;){const T=this.tag=v.pop();if(this.topNS=T.ns,C==null||C(T),T.name===y)break;this.fail("unexpected close tag.")}x===0?this.closedRoot=!0:x<0&&(this.fail(`unmatched closing tag: ${y}.`),this.text+=`</${y}>`)}parseEntity(v){if(v[0]!=="#"){const C=this.ENTITIES[v];return C!==void 0?C:(this.fail(this.isName(v)?"undefined entity.":"disallowed character in entity name."),`&${v};`)}let y=NaN;return v[1]==="x"&&/^#x[0-9a-f]+$/i.test(v)?y=parseInt(v.slice(2),16):/^#[0-9]+$/.test(v)&&(y=parseInt(v.slice(1),10)),this.isChar(y)?String.fromCodePoint(y):(this.fail("malformed character entity."),`&${v};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,n,s){var o=t("safe-buffer").Buffer;function r(a,l){this._block=o.alloc(a),this._finalSize=l,this._blockSize=a,this._len=0}r.prototype.update=function(a,l){typeof a=="string"&&(l=l||"utf8",a=o.from(a,l));for(var d=this._block,c=this._blockSize,h=a.length,u=this._len,p=0;p<h;){for(var f=u%c,g=Math.min(h-p,c-f),m=0;m<g;m++)d[f+m]=a[p+m];p+=g,(u+=g)%c==0&&this._update(d)}return this._len+=h,this},r.prototype.digest=function(a){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var d=8*this._len;if(d<=4294967295)this._block.writeUInt32BE(d,this._blockSize-4);else{var c=(4294967295&d)>>>0,h=(d-c)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(c,this._blockSize-4)}this._update(this._block);var u=this._hash();return a?u.toString(a):u},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},n.exports=r},{"safe-buffer":494}],498:[function(t,n,s){var o=n.exports=function(r){r=r.toLowerCase();var a=o[r];if(!a)throw new Error(r+" is not supported (we accept pull requests)");return new a};o.sha=t("./sha"),o.sha1=t("./sha1"),o.sha224=t("./sha224"),o.sha256=t("./sha256"),o.sha384=t("./sha384"),o.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,n,s){var o=t("inherits"),r=t("./hash"),a=t("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);function c(){this.init(),this._w=d,r.call(this,64,56)}function h(p){return p<<30|p>>>2}function u(p,f,g,m){return p===0?f&g|~f&m:p===2?f&g|f&m|g&m:f^g^m}o(c,r),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(p){for(var f,g=this._w,m=0|this._a,b=0|this._b,_=0|this._c,w=0|this._d,E=0|this._e,D=0;D<16;++D)g[D]=p.readInt32BE(4*D);for(;D<80;++D)g[D]=g[D-3]^g[D-8]^g[D-14]^g[D-16];for(var B=0;B<80;++B){var $=~~(B/20),F=0|((f=m)<<5|f>>>27)+u($,b,_,w)+E+g[B]+l[$];E=w,w=_,_=h(b),b=m,m=F}this._a=m+this._a|0,this._b=b+this._b|0,this._c=_+this._c|0,this._d=w+this._d|0,this._e=E+this._e|0},c.prototype._hash=function(){var p=a.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},n.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,n,s){var o=t("inherits"),r=t("./hash"),a=t("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);function c(){this.init(),this._w=d,r.call(this,64,56)}function h(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function p(f,g,m,b){return f===0?g&m|~g&b:f===2?g&m|g&b|m&b:g^m^b}o(c,r),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(f){for(var g,m=this._w,b=0|this._a,_=0|this._b,w=0|this._c,E=0|this._d,D=0|this._e,B=0;B<16;++B)m[B]=f.readInt32BE(4*B);for(;B<80;++B)m[B]=(g=m[B-3]^m[B-8]^m[B-14]^m[B-16])<<1|g>>>31;for(var $=0;$<80;++$){var F=~~($/20),N=h(b)+p(F,_,w,E)+D+m[$]+l[F]|0;D=E,E=w,w=u(_),_=b,b=N}this._a=b+this._a|0,this._b=_+this._b|0,this._c=w+this._c|0,this._d=E+this._d|0,this._e=D+this._e|0},c.prototype._hash=function(){var f=a.allocUnsafe(20);return f.writeInt32BE(0|this._a,0),f.writeInt32BE(0|this._b,4),f.writeInt32BE(0|this._c,8),f.writeInt32BE(0|this._d,12),f.writeInt32BE(0|this._e,16),f},n.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,n,s){var o=t("inherits"),r=t("./sha256"),a=t("./hash"),l=t("safe-buffer").Buffer,d=new Array(64);function c(){this.init(),this._w=d,a.call(this,64,56)}o(c,r),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var h=l.allocUnsafe(28);return h.writeInt32BE(this._a,0),h.writeInt32BE(this._b,4),h.writeInt32BE(this._c,8),h.writeInt32BE(this._d,12),h.writeInt32BE(this._e,16),h.writeInt32BE(this._f,20),h.writeInt32BE(this._g,24),h},n.exports=c},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,n,s){var o=t("inherits"),r=t("./hash"),a=t("safe-buffer").Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);function c(){this.init(),this._w=d,r.call(this,64,56)}function h(m,b,_){return _^m&(b^_)}function u(m,b,_){return m&b|_&(m|b)}function p(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function f(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function g(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}o(c,r),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(m){for(var b,_=this._w,w=0|this._a,E=0|this._b,D=0|this._c,B=0|this._d,$=0|this._e,F=0|this._f,N=0|this._g,L=0|this._h,j=0;j<16;++j)_[j]=m.readInt32BE(4*j);for(;j<64;++j)_[j]=0|(((b=_[j-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+_[j-7]+g(_[j-15])+_[j-16];for(var H=0;H<64;++H){var I=L+f($)+h($,F,N)+l[H]+_[H]|0,k=p(w)+u(w,E,D)|0;L=N,N=F,F=$,$=B+I|0,B=D,D=E,E=w,w=I+k|0}this._a=w+this._a|0,this._b=E+this._b|0,this._c=D+this._c|0,this._d=B+this._d|0,this._e=$+this._e|0,this._f=F+this._f|0,this._g=N+this._g|0,this._h=L+this._h|0},c.prototype._hash=function(){var m=a.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},n.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,n,s){var o=t("inherits"),r=t("./sha512"),a=t("./hash"),l=t("safe-buffer").Buffer,d=new Array(160);function c(){this.init(),this._w=d,a.call(this,128,112)}o(c,r),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var h=l.allocUnsafe(48);function u(p,f,g){h.writeInt32BE(p,g),h.writeInt32BE(f,g+4)}return u(this._ah,this._al,0),u(this._bh,this._bl,8),u(this._ch,this._cl,16),u(this._dh,this._dl,24),u(this._eh,this._el,32),u(this._fh,this._fl,40),h},n.exports=c},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,n,s){var o=t("inherits"),r=t("./hash"),a=t("safe-buffer").Buffer,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],d=new Array(160);function c(){this.init(),this._w=d,r.call(this,128,112)}function h(E,D,B){return B^E&(D^B)}function u(E,D,B){return E&D|B&(E|D)}function p(E,D){return(E>>>28|D<<4)^(D>>>2|E<<30)^(D>>>7|E<<25)}function f(E,D){return(E>>>14|D<<18)^(E>>>18|D<<14)^(D>>>9|E<<23)}function g(E,D){return(E>>>1|D<<31)^(E>>>8|D<<24)^E>>>7}function m(E,D){return(E>>>1|D<<31)^(E>>>8|D<<24)^(E>>>7|D<<25)}function b(E,D){return(E>>>19|D<<13)^(D>>>29|E<<3)^E>>>6}function _(E,D){return(E>>>19|D<<13)^(D>>>29|E<<3)^(E>>>6|D<<26)}function w(E,D){return E>>>0<D>>>0?1:0}o(c,r),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(E){for(var D=this._w,B=0|this._ah,$=0|this._bh,F=0|this._ch,N=0|this._dh,L=0|this._eh,j=0|this._fh,H=0|this._gh,I=0|this._hh,k=0|this._al,S=0|this._bl,v=0|this._cl,y=0|this._dl,C=0|this._el,x=0|this._fl,T=0|this._gl,M=0|this._hl,V=0;V<32;V+=2)D[V]=E.readInt32BE(4*V),D[V+1]=E.readInt32BE(4*V+4);for(;V<160;V+=2){var W=D[V-30],K=D[V-30+1],Z=g(W,K),P=m(K,W),G=b(W=D[V-4],K=D[V-4+1]),O=_(K,W),A=D[V-14],z=D[V-14+1],X=D[V-32],ee=D[V-32+1],J=P+z|0,te=Z+A+w(J,P)|0;te=(te=te+G+w(J=J+O|0,O)|0)+X+w(J=J+ee|0,ee)|0,D[V]=te,D[V+1]=J}for(var le=0;le<160;le+=2){te=D[le],J=D[le+1];var ce=u(B,$,F),Q=u(k,S,v),oe=p(B,k),se=p(k,B),pe=f(L,C),he=f(C,L),me=l[le],ye=l[le+1],xe=h(L,j,H),Ie=h(C,x,T),Le=M+he|0,Ne=I+pe+w(Le,M)|0;Ne=(Ne=(Ne=Ne+xe+w(Le=Le+Ie|0,Ie)|0)+me+w(Le=Le+ye|0,ye)|0)+te+w(Le=Le+J|0,J)|0;var Be=se+Q|0,tt=oe+ce+w(Be,se)|0;I=H,M=T,H=j,T=x,j=L,x=C,L=N+Ne+w(C=y+Le|0,y)|0,N=F,y=v,F=$,v=S,$=B,S=k,B=Ne+tt+w(k=Le+Be|0,Le)|0}this._al=this._al+k|0,this._bl=this._bl+S|0,this._cl=this._cl+v|0,this._dl=this._dl+y|0,this._el=this._el+C|0,this._fl=this._fl+x|0,this._gl=this._gl+T|0,this._hl=this._hl+M|0,this._ah=this._ah+B+w(this._al,k)|0,this._bh=this._bh+$+w(this._bl,S)|0,this._ch=this._ch+F+w(this._cl,v)|0,this._dh=this._dh+N+w(this._dl,y)|0,this._eh=this._eh+L+w(this._el,C)|0,this._fh=this._fh+j+w(this._fl,x)|0,this._gh=this._gh+H+w(this._gl,T)|0,this._hh=this._hh+I+w(this._hl,M)|0},c.prototype._hash=function(){var E=a.allocUnsafe(64);function D(B,$,F){E.writeInt32BE(B,F),E.writeInt32BE($,F+4)}return D(this._ah,this._al,0),D(this._bh,this._bl,8),D(this._ch,this._cl,16),D(this._dh,this._dl,24),D(this._eh,this._el,32),D(this._fh,this._fl,40),D(this._gh,this._gl,48),D(this._hh,this._hl,56),E},n.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,n,s){n.exports=r;var o=t("events").EventEmitter;function r(){o.call(this)}t("inherits")(r,o),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(a,l){var d=this;function c(b){a.writable&&a.write(b)===!1&&d.pause&&d.pause()}function h(){d.readable&&d.resume&&d.resume()}d.on("data",c),a.on("drain",h),a._isStdio||l&&l.end===!1||(d.on("end",p),d.on("close",f));var u=!1;function p(){u||(u=!0,a.end())}function f(){u||(u=!0,typeof a.destroy=="function"&&a.destroy())}function g(b){if(m(),o.listenerCount(this,"error")===0)throw b}function m(){d.removeListener("data",c),a.removeListener("drain",h),d.removeListener("end",p),d.removeListener("close",f),d.removeListener("error",g),a.removeListener("error",g),d.removeListener("end",m),d.removeListener("close",m),a.removeListener("close",m)}return d.on("error",g),a.on("error",g),d.on("end",m),d.on("close",m),a.on("close",m),a.emit("pipe",d),a}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,n,s){var o={}.toString;n.exports=Array.isArray||function(r){return o.call(r)=="[object Array]"}},{}],507:[function(t,n,s){n.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,n,s){var o=t("process-nextick-args"),r=Object.keys||function(m){var b=[];for(var _ in m)b.push(_);return b};n.exports=p;var a=Object.create(t("core-util-is"));a.inherits=t("inherits");var l=t("./_stream_readable"),d=t("./_stream_writable");a.inherits(p,l);for(var c=r(d.prototype),h=0;h<c.length;h++){var u=c[h];p.prototype[u]||(p.prototype[u]=d.prototype[u])}function p(m){if(!(this instanceof p))return new p(m);l.call(this,m),d.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||o.nextTick(g,this)}function g(m){m.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),p.prototype._destroy=function(m,b){this.push(null),this.end(),o.nextTick(b,m)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,n,s){n.exports=a;var o=t("./_stream_transform"),r=Object.create(t("core-util-is"));function a(l){if(!(this instanceof a))return new a(l);o.call(this,l)}r.inherits=t("inherits"),r.inherits(a,o),a.prototype._transform=function(l,d,c){c(null,l)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,n,s){(function(o,r){(function(){var a=t("process-nextick-args");n.exports=B;var l,d=t("isarray");B.ReadableState=D,t("events").EventEmitter;var c=function(M,V){return M.listeners(V).length},h=t("./internal/streams/stream"),u=t("safe-buffer").Buffer,p=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},f=Object.create(t("core-util-is"));f.inherits=t("inherits");var g=t("util"),m=void 0;m=g&&g.debuglog?g.debuglog("stream"):function(){};var b,_=t("./internal/streams/BufferList"),w=t("./internal/streams/destroy");f.inherits(B,h);var E=["error","close","destroy","pause","resume"];function D(M,V){M=M||{};var W=V instanceof(l=l||t("./_stream_duplex"));this.objectMode=!!M.objectMode,W&&(this.objectMode=this.objectMode||!!M.readableObjectMode);var K=M.highWaterMark,Z=M.readableHighWaterMark,P=this.objectMode?16:16384;this.highWaterMark=K||K===0?K:W&&(Z||Z===0)?Z:P,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=M.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,M.encoding&&(b||(b=t("string_decoder/").StringDecoder),this.decoder=new b(M.encoding),this.encoding=M.encoding)}function B(M){if(l=l||t("./_stream_duplex"),!(this instanceof B))return new B(M);this._readableState=new D(M,this),this.readable=!0,M&&(typeof M.read=="function"&&(this._read=M.read),typeof M.destroy=="function"&&(this._destroy=M.destroy)),h.call(this)}function $(M,V,W,K,Z){var P,G=M._readableState;return V===null?(G.reading=!1,function(O,A){if(!A.ended){if(A.decoder){var z=A.decoder.end();z&&z.length&&(A.buffer.push(z),A.length+=A.objectMode?1:z.length)}A.ended=!0,L(O)}}(M,G)):(Z||(P=function(O,A){var z;X=A,u.isBuffer(X)||X instanceof p||typeof A=="string"||A===void 0||O.objectMode||(z=new TypeError("Invalid non-string/buffer chunk"));var X;return z}(G,V)),P?M.emit("error",P):G.objectMode||V&&V.length>0?(typeof V=="string"||G.objectMode||Object.getPrototypeOf(V)===u.prototype||(V=function(O){return u.from(O)}(V)),K?G.endEmitted?M.emit("error",new Error("stream.unshift() after end event")):F(M,G,V,!0):G.ended?M.emit("error",new Error("stream.push() after EOF")):(G.reading=!1,G.decoder&&!W?(V=G.decoder.write(V),G.objectMode||V.length!==0?F(M,G,V,!1):H(M,G)):F(M,G,V,!1))):K||(G.reading=!1)),function(O){return!O.ended&&(O.needReadable||O.length<O.highWaterMark||O.length===0)}(G)}function F(M,V,W,K){V.flowing&&V.length===0&&!V.sync?(M.emit("data",W),M.read(0)):(V.length+=V.objectMode?1:W.length,K?V.buffer.unshift(W):V.buffer.push(W),V.needReadable&&L(M)),H(M,V)}Object.defineProperty(B.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(M){this._readableState&&(this._readableState.destroyed=M)}}),B.prototype.destroy=w.destroy,B.prototype._undestroy=w.undestroy,B.prototype._destroy=function(M,V){this.push(null),V(M)},B.prototype.push=function(M,V){var W,K=this._readableState;return K.objectMode?W=!0:typeof M=="string"&&((V=V||K.defaultEncoding)!==K.encoding&&(M=u.from(M,V),V=""),W=!0),$(this,M,V,!1,W)},B.prototype.unshift=function(M){return $(this,M,null,!0,!1)},B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function(M){return b||(b=t("string_decoder/").StringDecoder),this._readableState.decoder=new b(M),this._readableState.encoding=M,this};function N(M,V){return M<=0||V.length===0&&V.ended?0:V.objectMode?1:M!=M?V.flowing&&V.length?V.buffer.head.data.length:V.length:(M>V.highWaterMark&&(V.highWaterMark=function(W){return W>=8388608?W=8388608:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W}(M)),M<=V.length?M:V.ended?V.length:(V.needReadable=!0,0))}function L(M){var V=M._readableState;V.needReadable=!1,V.emittedReadable||(m("emitReadable",V.flowing),V.emittedReadable=!0,V.sync?a.nextTick(j,M):j(M))}function j(M){m("emit readable"),M.emit("readable"),v(M)}function H(M,V){V.readingMore||(V.readingMore=!0,a.nextTick(I,M,V))}function I(M,V){for(var W=V.length;!V.reading&&!V.flowing&&!V.ended&&V.length<V.highWaterMark&&(m("maybeReadMore read 0"),M.read(0),W!==V.length);)W=V.length;V.readingMore=!1}function k(M){m("readable nexttick read 0"),M.read(0)}function S(M,V){V.reading||(m("resume read 0"),M.read(0)),V.resumeScheduled=!1,V.awaitDrain=0,M.emit("resume"),v(M),V.flowing&&!V.reading&&M.read(0)}function v(M){var V=M._readableState;for(m("flow",V.flowing);V.flowing&&M.read()!==null;);}function y(M,V){return V.length===0?null:(V.objectMode?W=V.buffer.shift():!M||M>=V.length?(W=V.decoder?V.buffer.join(""):V.buffer.length===1?V.buffer.head.data:V.buffer.concat(V.length),V.buffer.clear()):W=function(K,Z,P){var G;return K<Z.head.data.length?(G=Z.head.data.slice(0,K),Z.head.data=Z.head.data.slice(K)):G=K===Z.head.data.length?Z.shift():P?function(O,A){var z=A.head,X=1,ee=z.data;for(O-=ee.length;z=z.next;){var J=z.data,te=O>J.length?J.length:O;if(te===J.length?ee+=J:ee+=J.slice(0,O),(O-=te)===0){te===J.length?(++X,z.next?A.head=z.next:A.head=A.tail=null):(A.head=z,z.data=J.slice(te));break}++X}return A.length-=X,ee}(K,Z):function(O,A){var z=u.allocUnsafe(O),X=A.head,ee=1;for(X.data.copy(z),O-=X.data.length;X=X.next;){var J=X.data,te=O>J.length?J.length:O;if(J.copy(z,z.length-O,0,te),(O-=te)===0){te===J.length?(++ee,X.next?A.head=X.next:A.head=A.tail=null):(A.head=X,X.data=J.slice(te));break}++ee}return A.length-=ee,z}(K,Z),G}(M,V.buffer,V.decoder),W);var W}function C(M){var V=M._readableState;if(V.length>0)throw new Error('"endReadable()" called on non-empty stream');V.endEmitted||(V.ended=!0,a.nextTick(x,V,M))}function x(M,V){M.endEmitted||M.length!==0||(M.endEmitted=!0,V.readable=!1,V.emit("end"))}function T(M,V){for(var W=0,K=M.length;W<K;W++)if(M[W]===V)return W;return-1}B.prototype.read=function(M){m("read",M),M=parseInt(M,10);var V=this._readableState,W=M;if(M!==0&&(V.emittedReadable=!1),M===0&&V.needReadable&&(V.length>=V.highWaterMark||V.ended))return m("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?C(this):L(this),null;if((M=N(M,V))===0&&V.ended)return V.length===0&&C(this),null;var K,Z=V.needReadable;return m("need readable",Z),(V.length===0||V.length-M<V.highWaterMark)&&m("length less than watermark",Z=!0),V.ended||V.reading?m("reading or ended",Z=!1):Z&&(m("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(M=N(W,V))),(K=M>0?y(M,V):null)===null?(V.needReadable=!0,M=0):V.length-=M,V.length===0&&(V.ended||(V.needReadable=!0),W!==M&&V.ended&&C(this)),K!==null&&this.emit("data",K),K},B.prototype._read=function(M){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(M,V){var W=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=M;break;case 1:K.pipes=[K.pipes,M];break;default:K.pipes.push(M)}K.pipesCount+=1,m("pipe count=%d opts=%j",K.pipesCount,V);var Z=(!V||V.end!==!1)&&M!==o.stdout&&M!==o.stderr?G:le;function P(ce,Q){m("onunpipe"),ce===W&&Q&&Q.hasUnpiped===!1&&(Q.hasUnpiped=!0,m("cleanup"),M.removeListener("close",J),M.removeListener("finish",te),M.removeListener("drain",O),M.removeListener("error",ee),M.removeListener("unpipe",P),W.removeListener("end",G),W.removeListener("end",le),W.removeListener("data",X),A=!0,!K.awaitDrain||M._writableState&&!M._writableState.needDrain||O())}function G(){m("onend"),M.end()}K.endEmitted?a.nextTick(Z):W.once("end",Z),M.on("unpipe",P);var O=function(ce){return function(){var Q=ce._readableState;m("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&c(ce,"data")&&(Q.flowing=!0,v(ce))}}(W);M.on("drain",O);var A=!1,z=!1;function X(ce){m("ondata"),z=!1,M.write(ce)!==!1||z||((K.pipesCount===1&&K.pipes===M||K.pipesCount>1&&T(K.pipes,M)!==-1)&&!A&&(m("false write response, pause",K.awaitDrain),K.awaitDrain++,z=!0),W.pause())}function ee(ce){m("onerror",ce),le(),M.removeListener("error",ee),c(M,"error")===0&&M.emit("error",ce)}function J(){M.removeListener("finish",te),le()}function te(){m("onfinish"),M.removeListener("close",J),le()}function le(){m("unpipe"),W.unpipe(M)}return W.on("data",X),function(ce,Q,oe){if(typeof ce.prependListener=="function")return ce.prependListener(Q,oe);ce._events&&ce._events[Q]?d(ce._events[Q])?ce._events[Q].unshift(oe):ce._events[Q]=[oe,ce._events[Q]]:ce.on(Q,oe)}(M,"error",ee),M.once("close",J),M.once("finish",te),M.emit("pipe",W),K.flowing||(m("pipe resume"),W.resume()),M},B.prototype.unpipe=function(M){var V=this._readableState,W={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return M&&M!==V.pipes||(M||(M=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,M&&M.emit("unpipe",this,W)),this;if(!M){var K=V.pipes,Z=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var P=0;P<Z;P++)K[P].emit("unpipe",this,{hasUnpiped:!1});return this}var G=T(V.pipes,M);return G===-1||(V.pipes.splice(G,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),M.emit("unpipe",this,W)),this},B.prototype.on=function(M,V){var W=h.prototype.on.call(this,M,V);if(M==="data")this._readableState.flowing!==!1&&this.resume();else if(M==="readable"){var K=this._readableState;K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.emittedReadable=!1,K.reading?K.length&&L(this):a.nextTick(k,this))}return W},B.prototype.addListener=B.prototype.on,B.prototype.resume=function(){var M=this._readableState;return M.flowing||(m("resume"),M.flowing=!0,function(V,W){W.resumeScheduled||(W.resumeScheduled=!0,a.nextTick(S,V,W))}(this,M)),this},B.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},B.prototype.wrap=function(M){var V=this,W=this._readableState,K=!1;for(var Z in M.on("end",function(){if(m("wrapped end"),W.decoder&&!W.ended){var G=W.decoder.end();G&&G.length&&V.push(G)}V.push(null)}),M.on("data",function(G){m("wrapped data"),W.decoder&&(G=W.decoder.write(G)),W.objectMode&&G==null||(W.objectMode||G&&G.length)&&(V.push(G)||(K=!0,M.pause()))}),M)this[Z]===void 0&&typeof M[Z]=="function"&&(this[Z]=function(G){return function(){return M[G].apply(M,arguments)}}(Z));for(var P=0;P<E.length;P++)M.on(E[P],this.emit.bind(this,E[P]));return this._read=function(G){m("wrapped _read",G),K&&(K=!1,M.resume())},this},Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),B._fromList=y}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,n,s){n.exports=l;var o=t("./_stream_duplex"),r=Object.create(t("core-util-is"));function a(h,u){var p=this._transformState;p.transforming=!1;var f=p.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));p.writechunk=null,p.writecb=null,u!=null&&this.push(u),f(h);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);o.call(this,h),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",d)}function d(){var h=this;typeof this._flush=="function"?this._flush(function(u,p){c(h,u,p)}):c(this,null,null)}function c(h,u,p){if(u)return h.emit("error",u);if(p!=null&&h.push(p),h._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(h._transformState.transforming)throw new Error("Calling transform done when still transforming");return h.push(null)}r.inherits=t("inherits"),r.inherits(l,o),l.prototype.push=function(h,u){return this._transformState.needTransform=!1,o.prototype.push.call(this,h,u)},l.prototype._transform=function(h,u,p){throw new Error("_transform() is not implemented")},l.prototype._write=function(h,u,p){var f=this._transformState;if(f.writecb=p,f.writechunk=h,f.writeencoding=u,!f.transforming){var g=this._readableState;(f.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},l.prototype._read=function(h){var u=this._transformState;u.writechunk!==null&&u.writecb&&!u.transforming?(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform)):u.needTransform=!0},l.prototype._destroy=function(h,u){var p=this;o.prototype._destroy.call(this,h,function(f){u(f),p.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,n,s){(function(o,r,a){(function(){var l=t("process-nextick-args");function d(H){var I=this;this.next=null,this.entry=null,this.finish=function(){(function(k,S,v){var y=k.entry;for(k.entry=null;y;){var C=y.callback;S.pendingcb--,C(v),y=y.next}S.corkedRequestsFree.next=k})(I,H)}}n.exports=D;var c,h=!o.browser&&["v0.10","v0.9."].indexOf(o.version.slice(0,5))>-1?a:l.nextTick;D.WritableState=E;var u=Object.create(t("core-util-is"));u.inherits=t("inherits");var p={deprecate:t("util-deprecate")},f=t("./internal/streams/stream"),g=t("safe-buffer").Buffer,m=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b,_=t("./internal/streams/destroy");function w(){}function E(H,I){c=c||t("./_stream_duplex"),H=H||{};var k=I instanceof c;this.objectMode=!!H.objectMode,k&&(this.objectMode=this.objectMode||!!H.writableObjectMode);var S=H.highWaterMark,v=H.writableHighWaterMark,y=this.objectMode?16:16384;this.highWaterMark=S||S===0?S:k&&(v||v===0)?v:y,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var C=H.decodeStrings===!1;this.decodeStrings=!C,this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(x){(function(T,M){var V=T._writableState,W=V.sync,K=V.writecb;if(function(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}(V),M)(function(P,G,O,A,z){--G.pendingcb,O?(l.nextTick(z,A),l.nextTick(j,P,G),P._writableState.errorEmitted=!0,P.emit("error",A)):(z(A),P._writableState.errorEmitted=!0,P.emit("error",A),j(P,G))})(T,V,W,M,K);else{var Z=N(V);Z||V.corked||V.bufferProcessing||!V.bufferedRequest||F(T,V),W?h($,T,V,Z,K):$(T,V,Z,K)}})(I,x)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function D(H){if(c=c||t("./_stream_duplex"),!(b.call(D,this)||this instanceof c))return new D(H);this._writableState=new E(H,this),this.writable=!0,H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev),typeof H.destroy=="function"&&(this._destroy=H.destroy),typeof H.final=="function"&&(this._final=H.final)),f.call(this)}function B(H,I,k,S,v,y,C){I.writelen=S,I.writecb=C,I.writing=!0,I.sync=!0,k?H._writev(v,I.onwrite):H._write(v,y,I.onwrite),I.sync=!1}function $(H,I,k,S){k||function(v,y){y.length===0&&y.needDrain&&(y.needDrain=!1,v.emit("drain"))}(H,I),I.pendingcb--,S(),j(H,I)}function F(H,I){I.bufferProcessing=!0;var k=I.bufferedRequest;if(H._writev&&k&&k.next){var S=I.bufferedRequestCount,v=new Array(S),y=I.corkedRequestsFree;y.entry=k;for(var C=0,x=!0;k;)v[C]=k,k.isBuf||(x=!1),k=k.next,C+=1;v.allBuffers=x,B(H,I,!0,I.length,v,"",y.finish),I.pendingcb++,I.lastBufferedRequest=null,y.next?(I.corkedRequestsFree=y.next,y.next=null):I.corkedRequestsFree=new d(I),I.bufferedRequestCount=0}else{for(;k;){var T=k.chunk,M=k.encoding,V=k.callback;if(B(H,I,!1,I.objectMode?1:T.length,T,M,V),k=k.next,I.bufferedRequestCount--,I.writing)break}k===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=k,I.bufferProcessing=!1}function N(H){return H.ending&&H.length===0&&H.bufferedRequest===null&&!H.finished&&!H.writing}function L(H,I){H._final(function(k){I.pendingcb--,k&&H.emit("error",k),I.prefinished=!0,H.emit("prefinish"),j(H,I)})}function j(H,I){var k=N(I);return k&&(function(S,v){v.prefinished||v.finalCalled||(typeof S._final=="function"?(v.pendingcb++,v.finalCalled=!0,l.nextTick(L,S,v)):(v.prefinished=!0,S.emit("prefinish")))}(H,I),I.pendingcb===0&&(I.finished=!0,H.emit("finish"))),k}u.inherits(D,f),E.prototype.getBuffer=function(){for(var H=this.bufferedRequest,I=[];H;)I.push(H),H=H.next;return I},function(){try{Object.defineProperty(E.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(H){return!!b.call(this,H)||this===D&&H&&H._writableState instanceof E}})):b=function(H){return H instanceof this},D.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},D.prototype.write=function(H,I,k){var S,v=this._writableState,y=!1,C=!v.objectMode&&(S=H,g.isBuffer(S)||S instanceof m);return C&&!g.isBuffer(H)&&(H=function(x){return g.from(x)}(H)),typeof I=="function"&&(k=I,I=null),C?I="buffer":I||(I=v.defaultEncoding),typeof k!="function"&&(k=w),v.ended?function(x,T){var M=new Error("write after end");x.emit("error",M),l.nextTick(T,M)}(this,k):(C||function(x,T,M,V){var W=!0,K=!1;return M===null?K=new TypeError("May not write null values to stream"):typeof M=="string"||M===void 0||T.objectMode||(K=new TypeError("Invalid non-string/buffer chunk")),K&&(x.emit("error",K),l.nextTick(V,K),W=!1),W}(this,v,H,k))&&(v.pendingcb++,y=function(x,T,M,V,W,K){if(!M){var Z=function(A,z,X){return A.objectMode||A.decodeStrings===!1||typeof z!="string"||(z=g.from(z,X)),z}(T,V,W);V!==Z&&(M=!0,W="buffer",V=Z)}var P=T.objectMode?1:V.length;T.length+=P;var G=T.length<T.highWaterMark;if(G||(T.needDrain=!0),T.writing||T.corked){var O=T.lastBufferedRequest;T.lastBufferedRequest={chunk:V,encoding:W,isBuf:M,callback:K,next:null},O?O.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else B(x,T,!1,P,V,W,K);return G}(this,v,C,H,I,k)),y},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,H.writing||H.corked||H.bufferProcessing||!H.bufferedRequest||F(this,H))},D.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),D.prototype._write=function(H,I,k){k(new Error("_write() is not implemented"))},D.prototype._writev=null,D.prototype.end=function(H,I,k){var S=this._writableState;typeof H=="function"?(k=H,H=null,I=null):typeof I=="function"&&(k=I,I=null),H!=null&&this.write(H,I),S.corked&&(S.corked=1,this.uncork()),S.ending||function(v,y,C){y.ending=!0,j(v,y),C&&(y.finished?l.nextTick(C):v.once("finish",C)),y.ended=!0,v.writable=!1}(this,S,k)},Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(H){this._writableState&&(this._writableState.destroyed=H)}}),D.prototype.destroy=_.destroy,D.prototype._undestroy=_.undestroy,D.prototype._destroy=function(H,I){this.end(),I(H)}}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,n,s){var o=t("safe-buffer").Buffer,r=t("util");n.exports=function(){function a(){(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(l){var d={data:l,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length},a.prototype.unshift=function(l){var d={data:l,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length},a.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(l){if(this.length===0)return"";for(var d=this.head,c=""+d.data;d=d.next;)c+=l+d.data;return c},a.prototype.concat=function(l){if(this.length===0)return o.alloc(0);for(var d,c,h,u=o.allocUnsafe(l>>>0),p=this.head,f=0;p;)d=p.data,c=u,h=f,d.copy(c,h),f+=p.data.length,p=p.next;return u},a}(),r&&r.inspect&&r.inspect.custom&&(n.exports.prototype[r.inspect.custom]=function(){var a=r.inspect({length:this.length});return this.constructor.name+" "+a})},{"safe-buffer":520,util:188}],514:[function(t,n,s){var o=t("process-nextick-args");function r(a,l){a.emit("error",l)}n.exports={destroy:function(a,l){var d=this,c=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return c||h?(l?l(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(r,this,a)):o.nextTick(r,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(u){!l&&u?d._writableState?d._writableState.errorEmitted||(d._writableState.errorEmitted=!0,o.nextTick(r,d,u)):o.nextTick(r,d,u):l&&l(u)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,n,s){arguments[4][490][0].apply(s,arguments)},{dup:490,events:422}],516:[function(t,n,s){n.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,n,s){(s=n.exports=t("./lib/_stream_readable.js")).Stream=s,s.Readable=s,s.Writable=t("./lib/_stream_writable.js"),s.Duplex=t("./lib/_stream_duplex.js"),s.Transform=t("./lib/_stream_transform.js"),s.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,n,s){n.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,n,s){n.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,n,s){arguments[4][217][0].apply(s,arguments)},{buffer:220,dup:217}],521:[function(t,n,s){arguments[4][218][0].apply(s,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,n,s){arguments[4][218][0].apply(s,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,n,s){(function(o,r){(function(){var a=t("process/browser.js").nextTick,l=Function.prototype.apply,d=Array.prototype.slice,c={},h=0;function u(p,f){this._id=p,this._clearFn=f}s.setTimeout=function(){return new u(l.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new u(l.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(p){p.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(p,f){clearTimeout(p._idleTimeoutId),p._idleTimeout=f},s.unenroll=function(p){clearTimeout(p._idleTimeoutId),p._idleTimeout=-1},s._unrefActive=s.active=function(p){clearTimeout(p._idleTimeoutId);var f=p._idleTimeout;f>=0&&(p._idleTimeoutId=setTimeout(function(){p._onTimeout&&p._onTimeout()},f))},s.setImmediate=typeof o=="function"?o:function(p){var f=h++,g=!(arguments.length<2)&&d.call(arguments,1);return c[f]=!0,a(function(){c[f]&&(g?p.apply(null,g):p.call(null),s.clearImmediate(f))}),f},s.clearImmediate=typeof r=="function"?r:function(p){delete c[p]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,n,s){(function(o){(function(){function r(a){try{if(!o.localStorage)return!1}catch{return!1}var l=o.localStorage[a];return l!=null&&String(l).toLowerCase()==="true"}n.exports=function(a,l){if(r("noDeprecation"))return a;var d=!1;return function(){if(!d){if(r("throwDeprecation"))throw new Error(l);r("traceDeprecation")?console.trace(l):console.warn(l),d=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,n,s){typeof Object.create=="function"?n.exports=function(o,r){o.super_=r,o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(o,r){o.super_=r;var a=function(){};a.prototype=r.prototype,o.prototype=new a,o.prototype.constructor=o}},{}],526:[function(t,n,s){n.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],527:[function(t,n,s){(function(o,r){(function(){var a=/%[sdj%]/g;s.format=function(v){if(!E(v)){for(var y=[],C=0;C<arguments.length;C++)y.push(c(arguments[C]));return y.join(" ")}C=1;for(var x=arguments,T=x.length,M=String(v).replace(a,function(W){if(W==="%%")return"%";if(C>=T)return W;switch(W){case"%s":return String(x[C++]);case"%d":return Number(x[C++]);case"%j":try{return JSON.stringify(x[C++])}catch{return"[Circular]"}default:return W}}),V=x[C];C<T;V=x[++C])_(V)||!$(V)?M+=" "+V:M+=" "+c(V);return M},s.deprecate=function(v,y){if(D(r.process))return function(){return s.deprecate(v,y).apply(this,arguments)};if(o.noDeprecation===!0)return v;var C=!1;return function(){if(!C){if(o.throwDeprecation)throw new Error(y);o.traceDeprecation?console.trace(y):console.error(y),C=!0}return v.apply(this,arguments)}};var l,d={};function c(v,y){var C={seen:[],stylize:u};return arguments.length>=3&&(C.depth=arguments[2]),arguments.length>=4&&(C.colors=arguments[3]),b(y)?C.showHidden=y:y&&s._extend(C,y),D(C.showHidden)&&(C.showHidden=!1),D(C.depth)&&(C.depth=2),D(C.colors)&&(C.colors=!1),D(C.customInspect)&&(C.customInspect=!0),C.colors&&(C.stylize=h),p(C,v,C.depth)}function h(v,y){var C=c.styles[y];return C?"\x1B["+c.colors[C][0]+"m"+v+"\x1B["+c.colors[C][1]+"m":v}function u(v,y){return v}function p(v,y,C){if(v.customInspect&&y&&L(y.inspect)&&y.inspect!==s.inspect&&(!y.constructor||y.constructor.prototype!==y)){var x=y.inspect(C,v);return E(x)||(x=p(v,x,C)),x}var T=function(O,A){if(D(A))return O.stylize("undefined","undefined");if(E(A)){var z="'"+JSON.stringify(A).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize(z,"string")}if(w(A))return O.stylize(""+A,"number");if(b(A))return O.stylize(""+A,"boolean");if(_(A))return O.stylize("null","null")}(v,y);if(T)return T;var M=Object.keys(y),V=function(O){var A={};return O.forEach(function(z,X){A[z]=!0}),A}(M);if(v.showHidden&&(M=Object.getOwnPropertyNames(y)),N(y)&&(M.indexOf("message")>=0||M.indexOf("description")>=0))return f(y);if(M.length===0){if(L(y)){var W=y.name?": "+y.name:"";return v.stylize("[Function"+W+"]","special")}if(B(y))return v.stylize(RegExp.prototype.toString.call(y),"regexp");if(F(y))return v.stylize(Date.prototype.toString.call(y),"date");if(N(y))return f(y)}var K,Z="",P=!1,G=["{","}"];return m(y)&&(P=!0,G=["[","]"]),L(y)&&(Z=" [Function"+(y.name?": "+y.name:"")+"]"),B(y)&&(Z=" "+RegExp.prototype.toString.call(y)),F(y)&&(Z=" "+Date.prototype.toUTCString.call(y)),N(y)&&(Z=" "+f(y)),M.length!==0||P&&y.length!=0?C<0?B(y)?v.stylize(RegExp.prototype.toString.call(y),"regexp"):v.stylize("[Object]","special"):(v.seen.push(y),K=P?function(O,A,z,X,ee){for(var J=[],te=0,le=A.length;te<le;++te)S(A,String(te))?J.push(g(O,A,z,X,String(te),!0)):J.push("");return ee.forEach(function(ce){ce.match(/^\d+$/)||J.push(g(O,A,z,X,ce,!0))}),J}(v,y,C,V,M):M.map(function(O){return g(v,y,C,V,O,P)}),v.seen.pop(),function(O,A,z){return O.reduce(function(X,ee){return ee.indexOf(`
`)>=0,X+ee.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?z[0]+(A===""?"":A+`
 `)+" "+O.join(`,
  `)+" "+z[1]:z[0]+A+" "+O.join(", ")+" "+z[1]}(K,Z,G)):G[0]+Z+G[1]}function f(v){return"["+Error.prototype.toString.call(v)+"]"}function g(v,y,C,x,T,M){var V,W,K;if((K=Object.getOwnPropertyDescriptor(y,T)||{value:y[T]}).get?W=K.set?v.stylize("[Getter/Setter]","special"):v.stylize("[Getter]","special"):K.set&&(W=v.stylize("[Setter]","special")),S(x,T)||(V="["+T+"]"),W||(v.seen.indexOf(K.value)<0?(W=_(C)?p(v,K.value,null):p(v,K.value,C-1)).indexOf(`
`)>-1&&(W=M?W.split(`
`).map(function(Z){return"  "+Z}).join(`
`).substr(2):`
`+W.split(`
`).map(function(Z){return"   "+Z}).join(`
`)):W=v.stylize("[Circular]","special")),D(V)){if(M&&T.match(/^\d+$/))return W;(V=JSON.stringify(""+T)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(V=V.substr(1,V.length-2),V=v.stylize(V,"name")):(V=V.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),V=v.stylize(V,"string"))}return V+": "+W}function m(v){return Array.isArray(v)}function b(v){return typeof v=="boolean"}function _(v){return v===null}function w(v){return typeof v=="number"}function E(v){return typeof v=="string"}function D(v){return v===void 0}function B(v){return $(v)&&j(v)==="[object RegExp]"}function $(v){return typeof v=="object"&&v!==null}function F(v){return $(v)&&j(v)==="[object Date]"}function N(v){return $(v)&&(j(v)==="[object Error]"||v instanceof Error)}function L(v){return typeof v=="function"}function j(v){return Object.prototype.toString.call(v)}function H(v){return v<10?"0"+v.toString(10):v.toString(10)}s.debuglog=function(v){if(D(l)&&(l=o.env.NODE_DEBUG||""),v=v.toUpperCase(),!d[v])if(new RegExp("\\b"+v+"\\b","i").test(l)){var y=o.pid;d[v]=function(){var C=s.format.apply(s,arguments);console.error("%s %d: %s",v,y,C)}}else d[v]=function(){};return d[v]},s.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=m,s.isBoolean=b,s.isNull=_,s.isNullOrUndefined=function(v){return v==null},s.isNumber=w,s.isString=E,s.isSymbol=function(v){return typeof v=="symbol"},s.isUndefined=D,s.isRegExp=B,s.isObject=$,s.isDate=F,s.isError=N,s.isFunction=L,s.isPrimitive=function(v){return v===null||typeof v=="boolean"||typeof v=="number"||typeof v=="string"||typeof v=="symbol"||v===void 0},s.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var v=new Date,y=[H(v.getHours()),H(v.getMinutes()),H(v.getSeconds())].join(":");return[v.getDate(),I[v.getMonth()],y].join(" ")}function S(v,y){return Object.prototype.hasOwnProperty.call(v,y)}s.log=function(){console.log("%s - %s",k(),s.format.apply(s,arguments))},s.inherits=t("inherits"),s._extend=function(v,y){if(!y||!$(y))return v;for(var C=Object.keys(y),x=C.length;x--;)v[C[x]]=y[C[x]];return v}}).call(this)}).call(this,t("_process"),typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"NIL",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"validate",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return p.default}});var o=f(t("./v1.js")),r=f(t("./v3.js")),a=f(t("./v4.js")),l=f(t("./v5.js")),d=f(t("./nil.js")),c=f(t("./version.js")),h=f(t("./validate.js")),u=f(t("./stringify.js")),p=f(t("./parse.js"));function f(g){return g&&g.__esModule?g:{default:g}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,n,s){function o(p){return 14+(p+64>>>9<<4)+1}function r(p,f){const g=(65535&p)+(65535&f);return(p>>16)+(f>>16)+(g>>16)<<16|65535&g}function a(p,f,g,m,b,_){return r((w=r(r(f,p),r(m,_)))<<(E=b)|w>>>32-E,g);var w,E}function l(p,f,g,m,b,_,w){return a(f&g|~f&m,p,f,b,_,w)}function d(p,f,g,m,b,_,w){return a(f&m|g&~m,p,f,b,_,w)}function c(p,f,g,m,b,_,w){return a(f^g^m,p,f,b,_,w)}function h(p,f,g,m,b,_,w){return a(g^(f|~m),p,f,b,_,w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=function(p){if(typeof p=="string"){const f=unescape(encodeURIComponent(p));p=new Uint8Array(f.length);for(let g=0;g<f.length;++g)p[g]=f.charCodeAt(g)}return function(f){const g=[],m=32*f.length;for(let b=0;b<m;b+=8){const _=f[b>>5]>>>b%32&255,w=parseInt("0123456789abcdef".charAt(_>>>4&15)+"0123456789abcdef".charAt(15&_),16);g.push(w)}return g}(function(f,g){f[g>>5]|=128<<g%32,f[o(g)-1]=g;let m=1732584193,b=-271733879,_=-1732584194,w=271733878;for(let E=0;E<f.length;E+=16){const D=m,B=b,$=_,F=w;m=l(m,b,_,w,f[E],7,-680876936),w=l(w,m,b,_,f[E+1],12,-389564586),_=l(_,w,m,b,f[E+2],17,606105819),b=l(b,_,w,m,f[E+3],22,-1044525330),m=l(m,b,_,w,f[E+4],7,-176418897),w=l(w,m,b,_,f[E+5],12,1200080426),_=l(_,w,m,b,f[E+6],17,-1473231341),b=l(b,_,w,m,f[E+7],22,-45705983),m=l(m,b,_,w,f[E+8],7,1770035416),w=l(w,m,b,_,f[E+9],12,-1958414417),_=l(_,w,m,b,f[E+10],17,-42063),b=l(b,_,w,m,f[E+11],22,-1990404162),m=l(m,b,_,w,f[E+12],7,1804603682),w=l(w,m,b,_,f[E+13],12,-40341101),_=l(_,w,m,b,f[E+14],17,-1502002290),b=l(b,_,w,m,f[E+15],22,1236535329),m=d(m,b,_,w,f[E+1],5,-165796510),w=d(w,m,b,_,f[E+6],9,-1069501632),_=d(_,w,m,b,f[E+11],14,643717713),b=d(b,_,w,m,f[E],20,-373897302),m=d(m,b,_,w,f[E+5],5,-701558691),w=d(w,m,b,_,f[E+10],9,38016083),_=d(_,w,m,b,f[E+15],14,-660478335),b=d(b,_,w,m,f[E+4],20,-405537848),m=d(m,b,_,w,f[E+9],5,568446438),w=d(w,m,b,_,f[E+14],9,-1019803690),_=d(_,w,m,b,f[E+3],14,-187363961),b=d(b,_,w,m,f[E+8],20,1163531501),m=d(m,b,_,w,f[E+13],5,-1444681467),w=d(w,m,b,_,f[E+2],9,-51403784),_=d(_,w,m,b,f[E+7],14,1735328473),b=d(b,_,w,m,f[E+12],20,-1926607734),m=c(m,b,_,w,f[E+5],4,-378558),w=c(w,m,b,_,f[E+8],11,-2022574463),_=c(_,w,m,b,f[E+11],16,1839030562),b=c(b,_,w,m,f[E+14],23,-35309556),m=c(m,b,_,w,f[E+1],4,-1530992060),w=c(w,m,b,_,f[E+4],11,1272893353),_=c(_,w,m,b,f[E+7],16,-155497632),b=c(b,_,w,m,f[E+10],23,-1094730640),m=c(m,b,_,w,f[E+13],4,681279174),w=c(w,m,b,_,f[E],11,-358537222),_=c(_,w,m,b,f[E+3],16,-722521979),b=c(b,_,w,m,f[E+6],23,76029189),m=c(m,b,_,w,f[E+9],4,-640364487),w=c(w,m,b,_,f[E+12],11,-421815835),_=c(_,w,m,b,f[E+15],16,530742520),b=c(b,_,w,m,f[E+2],23,-995338651),m=h(m,b,_,w,f[E],6,-198630844),w=h(w,m,b,_,f[E+7],10,1126891415),_=h(_,w,m,b,f[E+14],15,-1416354905),b=h(b,_,w,m,f[E+5],21,-57434055),m=h(m,b,_,w,f[E+12],6,1700485571),w=h(w,m,b,_,f[E+3],10,-1894986606),_=h(_,w,m,b,f[E+10],15,-1051523),b=h(b,_,w,m,f[E+1],21,-2054922799),m=h(m,b,_,w,f[E+8],6,1873313359),w=h(w,m,b,_,f[E+15],10,-30611744),_=h(_,w,m,b,f[E+6],15,-1560198380),b=h(b,_,w,m,f[E+13],21,1309151649),m=h(m,b,_,w,f[E+4],6,-145523070),w=h(w,m,b,_,f[E+11],10,-1120210379),_=h(_,w,m,b,f[E+2],15,718787259),b=h(b,_,w,m,f[E+9],21,-343485551),m=r(m,D),b=r(b,B),_=r(_,$),w=r(w,F)}return[m,b,_,w]}(function(f){if(f.length===0)return[];const g=8*f.length,m=new Uint32Array(o(g));for(let b=0;b<g;b+=8)m[b>>5]|=(255&f[b/8])<<b%32;return m}(p),8*p.length))};s.default=u},{}],530:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,s.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,r=(o=t("./validate.js"))&&o.__esModule?o:{default:o},a=function(l){if(!(0,r.default)(l))throw TypeError("Invalid UUID");let d;const c=new Uint8Array(16);return c[0]=(d=parseInt(l.slice(0,8),16))>>>24,c[1]=d>>>16&255,c[2]=d>>>8&255,c[3]=255&d,c[4]=(d=parseInt(l.slice(9,13),16))>>>8,c[5]=255&d,c[6]=(d=parseInt(l.slice(14,18),16))>>>8,c[7]=255&d,c[8]=(d=parseInt(l.slice(19,23),16))>>>8,c[9]=255&d,c[10]=(d=parseInt(l.slice(24,36),16))/1099511627776&255,c[11]=d/4294967296&255,c[12]=d>>>24&255,c[13]=d>>>16&255,c[14]=d>>>8&255,c[15]=255&d,c};s.default=a},{"./validate.js":541}],532:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,s.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,n,s){let o;Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){if(!o&&(o=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)};const r=new Uint8Array(16)},{}],534:[function(t,n,s){function o(l,d,c,h){switch(l){case 0:return d&c^~d&h;case 1:return d^c^h;case 2:return d&c^d&h^c&h;case 3:return d^c^h}}function r(l,d){return l<<d|l>>>32-d}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=function(l){const d=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof l=="string"){const f=unescape(encodeURIComponent(l));l=[];for(let g=0;g<f.length;++g)l.push(f.charCodeAt(g))}else Array.isArray(l)||(l=Array.prototype.slice.call(l));l.push(128);const h=l.length/4+2,u=Math.ceil(h/16),p=new Array(u);for(let f=0;f<u;++f){const g=new Uint32Array(16);for(let m=0;m<16;++m)g[m]=l[64*f+4*m]<<24|l[64*f+4*m+1]<<16|l[64*f+4*m+2]<<8|l[64*f+4*m+3];p[f]=g}p[u-1][14]=8*(l.length-1)/Math.pow(2,32),p[u-1][14]=Math.floor(p[u-1][14]),p[u-1][15]=8*(l.length-1)&4294967295;for(let f=0;f<u;++f){const g=new Uint32Array(80);for(let D=0;D<16;++D)g[D]=p[f][D];for(let D=16;D<80;++D)g[D]=r(g[D-3]^g[D-8]^g[D-14]^g[D-16],1);let m=c[0],b=c[1],_=c[2],w=c[3],E=c[4];for(let D=0;D<80;++D){const B=Math.floor(D/20),$=r(m,5)+o(B,b,_,w)+E+d[B]+g[D]>>>0;E=w,w=_,_=r(b,30)>>>0,b=m,m=$}c[0]=c[0]+m>>>0,c[1]=c[1]+b>>>0,c[2]=c[2]+_>>>0,c[3]=c[3]+w>>>0,c[4]=c[4]+E>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,255&c[0],c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,255&c[1],c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,255&c[2],c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,255&c[3],c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,255&c[4]]};s.default=a},{}],535:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,r=(o=t("./validate.js"))&&o.__esModule?o:{default:o};const a=[];for(let d=0;d<256;++d)a.push((d+256).toString(16).substr(1));var l=function(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const h=(a[d[c+0]]+a[d[c+1]]+a[d[c+2]]+a[d[c+3]]+"-"+a[d[c+4]]+a[d[c+5]]+"-"+a[d[c+6]]+a[d[c+7]]+"-"+a[d[c+8]]+a[d[c+9]]+"-"+a[d[c+10]]+a[d[c+11]]+a[d[c+12]]+a[d[c+13]]+a[d[c+14]]+a[d[c+15]]).toLowerCase();if(!(0,r.default)(h))throw TypeError("Stringified UUID is invalid");return h};s.default=l},{"./validate.js":541}],536:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=a(t("./rng.js")),r=a(t("./stringify.js"));function a(p){return p&&p.__esModule?p:{default:p}}let l,d,c=0,h=0;var u=function(p,f,g){let m=f&&g||0;const b=f||new Array(16);let _=(p=p||{}).node||l,w=p.clockseq!==void 0?p.clockseq:d;if(_==null||w==null){const N=p.random||(p.rng||o.default)();_==null&&(_=l=[1|N[0],N[1],N[2],N[3],N[4],N[5]]),w==null&&(w=d=16383&(N[6]<<8|N[7]))}let E=p.msecs!==void 0?p.msecs:Date.now(),D=p.nsecs!==void 0?p.nsecs:h+1;const B=E-c+(D-h)/1e4;if(B<0&&p.clockseq===void 0&&(w=w+1&16383),(B<0||E>c)&&p.nsecs===void 0&&(D=0),D>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=E,h=D,d=w,E+=122192928e5;const $=(1e4*(268435455&E)+D)%4294967296;b[m++]=$>>>24&255,b[m++]=$>>>16&255,b[m++]=$>>>8&255,b[m++]=255&$;const F=E/4294967296*1e4&268435455;b[m++]=F>>>8&255,b[m++]=255&F,b[m++]=F>>>24&15|16,b[m++]=F>>>16&255,b[m++]=w>>>8|128,b[m++]=255&w;for(let N=0;N<6;++N)b[m+N]=_[N];return f||(0,r.default)(b)};s.default=u},{"./rng.js":533,"./stringify.js":535}],537:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=a(t("./v35.js")),r=a(t("./md5.js"));function a(d){return d&&d.__esModule?d:{default:d}}var l=(0,o.default)("v3",48,r.default);s.default=l},{"./md5.js":529,"./v35.js":538}],538:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(c,h,u){function p(f,g,m,b){if(typeof f=="string"&&(f=function(w){w=unescape(encodeURIComponent(w));const E=[];for(let D=0;D<w.length;++D)E.push(w.charCodeAt(D));return E}(f)),typeof g=="string"&&(g=(0,r.default)(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let _=new Uint8Array(16+f.length);if(_.set(g),_.set(f,g.length),_=u(_),_[6]=15&_[6]|h,_[8]=63&_[8]|128,m){b=b||0;for(let w=0;w<16;++w)m[b+w]=_[w];return m}return(0,o.default)(_)}try{p.name=c}catch{}return p.DNS=l,p.URL=d,p},s.URL=s.DNS=void 0;var o=a(t("./stringify.js")),r=a(t("./parse.js"));function a(c){return c&&c.__esModule?c:{default:c}}const l="6ba7b810-9dad-11d1-80b4-00c04fd430c8";s.DNS=l;const d="6ba7b811-9dad-11d1-80b4-00c04fd430c8";s.URL=d},{"./parse.js":531,"./stringify.js":535}],539:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=a(t("./rng.js")),r=a(t("./stringify.js"));function a(d){return d&&d.__esModule?d:{default:d}}var l=function(d,c,h){const u=(d=d||{}).random||(d.rng||o.default)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,c){h=h||0;for(let p=0;p<16;++p)c[h+p]=u[p];return c}return(0,r.default)(u)};s.default=l},{"./rng.js":533,"./stringify.js":535}],540:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=a(t("./v35.js")),r=a(t("./sha1.js"));function a(d){return d&&d.__esModule?d:{default:d}}var l=(0,o.default)("v5",80,r.default);s.default=l},{"./sha1.js":534,"./v35.js":538}],541:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,r=(o=t("./regex.js"))&&o.__esModule?o:{default:o},a=function(l){return typeof l=="string"&&r.default.test(l)};s.default=a},{"./regex.js":532}],542:[function(t,n,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,r=(o=t("./validate.js"))&&o.__esModule?o:{default:o},a=function(l){if(!(0,r.default)(l))throw TypeError("Invalid UUID");return parseInt(l.substr(14,1),16)};s.default=a},{"./validate.js":541}],543:[function(t,n,s){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR=`	
\r -퟿-�𐀀-􏿿`,s.S=` 	\r
`,s.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",s.NAME_CHAR="-"+s.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",s.CHAR_RE=new RegExp("^["+s.CHAR+"]$","u"),s.S_RE=new RegExp("^["+s.S+"]+$","u"),s.NAME_START_CHAR_RE=new RegExp("^["+s.NAME_START_CHAR+"]$","u"),s.NAME_CHAR_RE=new RegExp("^["+s.NAME_CHAR+"]$","u"),s.NAME_RE=new RegExp("^["+s.NAME_START_CHAR+"]["+s.NAME_CHAR+"]*$","u"),s.NMTOKEN_RE=new RegExp("^["+s.NAME_CHAR+"]+$","u");function o(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}s.S_LIST=[32,10,13,9],s.isChar=function(r){return r>=32&&r<=55295||r===10||r===13||r===9||r>=57344&&r<=65533||r>=65536&&r<=1114111},s.isS=function(r){return r===32||r===10||r===13||r===9},s.isNameStartChar=o,s.isNameChar=function(r){return o(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],544:[function(t,n,s){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR="-퟿-�𐀀-􏿿",s.RESTRICTED_CHAR="-\b\v\f---",s.S=` 	\r
`,s.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",s.NAME_CHAR="-"+s.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",s.CHAR_RE=new RegExp("^["+s.CHAR+"]$","u"),s.RESTRICTED_CHAR_RE=new RegExp("^["+s.RESTRICTED_CHAR+"]$","u"),s.S_RE=new RegExp("^["+s.S+"]+$","u"),s.NAME_START_CHAR_RE=new RegExp("^["+s.NAME_START_CHAR+"]$","u"),s.NAME_CHAR_RE=new RegExp("^["+s.NAME_CHAR+"]$","u"),s.NAME_RE=new RegExp("^["+s.NAME_START_CHAR+"]["+s.NAME_CHAR+"]*$","u"),s.NMTOKEN_RE=new RegExp("^["+s.NAME_CHAR+"]+$","u");function o(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}s.S_LIST=[32,10,13,9],s.isChar=function(r){return r>=1&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},s.isRestrictedChar=function(r){return r>=1&&r<=8||r===11||r===12||r>=14&&r<=31||r>=127&&r<=132||r>=134&&r<=159},s.isCharAndNotRestricted=function(r){return r===9||r===10||r===13||r>31&&r<127||r===133||r>159&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},s.isS=function(r){return r===32||r===10||r===13||r===9},s.isNameStartChar=o,s.isNameChar=function(r){return o(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],545:[function(t,n,s){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function o(r){return r>=65&&r<=90||r===95||r>=97&&r<=122||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8204&&r<=8205||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}Object.defineProperty(s,"__esModule",{value:!0}),s.NC_NAME_START_CHAR="A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",s.NC_NAME_CHAR="-"+s.NC_NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",s.NC_NAME_START_CHAR_RE=new RegExp("^["+s.NC_NAME_START_CHAR+"]$","u"),s.NC_NAME_CHAR_RE=new RegExp("^["+s.NC_NAME_CHAR+"]$","u"),s.NC_NAME_RE=new RegExp("^["+s.NC_NAME_START_CHAR+"]["+s.NC_NAME_CHAR+"]*$","u"),s.isNCNameStartChar=o,s.isNCNameChar=function(r){return o(r)||r===45||r===46||r>=48&&r<=57||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}]},{},[15])(15)})})(QT);var FG=QT.exports;const VG=n2(FG);const NG=i=>(c2("data-v-19d7a7b3"),i=i(),u2(),i),LG={class:"grid grid-rows-[55px,1fr]"},$G=NG(()=>wp("main",null,null,-1)),HG={class:"flex-grow"},zG={class:"flex justify-between items-center mt-4"},WG={__name:"Documents",setup(i){const e=yd([]),t=yd([]),n=yd(null),s=yd(new Date().toISOString().split("T")[0]),o=async()=>{try{const l=await d2.get(`/document/${store.state.user.id}/${s.value}`);e.value=l.data.data}catch(l){console.error("Error fetching data:",l)}},r=({selectedRowKeys:l})=>{t.value=l,console.log("Selected row keys:",t.value)},a=()=>{const l=new VG.Workbook,d=l.addWorksheet("Exported Data");d.columns=[{header:"SOAT",key:"hour",width:10},{header:"ZICHLIK",key:"density",width:15},{header:"+0,15",key:"plus_015",width:10},{header:"+0,074",key:"plus_0074",width:10},{header:"Tayyor sinf",key:"ready_class",width:15}],e.value.forEach((c,h)=>{d.addRow({hour:h+1,density:c.Value,plus_015:Math.floor(Math.random()*50+250),plus_0074:Math.floor(Math.random()*50+80),ready_class:(Math.random()*40+30).toFixed(2)})}),d.eachRow((c,h)=>{c.eachCell((u,p)=>{u.alignment={vertical:"middle",horizontal:"center"},h===1?(u.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},u.font={bold:!0}):h===d.rowCount&&(u.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0000"}},u.font={bold:!0,color:{argb:"FFFFFF"}})})}),d.addRow({hour:"O‘rta",density:(e.value.reduce((c,h)=>c+h.Value,0)/e.value.length).toFixed(2),plus_015:"---",plus_0074:"---",ready_class:"---"}),l.xlsx.writeBuffer().then(c=>{BG.saveAs(new Blob([c],{type:"application/octet-stream"}),"ExportedData.xlsx")})};return o2(()=>{o()}),(l,d)=>{const c=r2("VaDateInput");return a2(),l2("div",LG,[$G,wp("main",HG,[wp("div",zG,[Is(c,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=h=>s.value=h),class:"mr-4"},null,8,["modelValue"]),Is(ro(i_),{onClick:o,class:"w-14 h-8 mt-1 mr-1",icon:"search"},{default:Uu(()=>[t_(" Qidiruv ")]),_:1}),Is(ro(i_),{onClick:a,class:"w-14 h-8 mt-1 mr-1",icon:"document_scanner"},{default:Uu(()=>[t_(" Excel ")]),_:1})]),Is(ro(HK),{ref_key:"dataGridRef",ref:n,"data-source":e.value,showBorders:"true",rowAlternationEnabled:"true",selectedRowKeys:t.value,onSelectionChanged:r,columnAutoWidth:"true",showColumnLines:"true",showRowLines:"true",wordWrapEnabled:"true",pager:{visible:!0,showPageSizeSelector:!0,allowedPageSizes:[5,10,20],showInfo:!0},keyExpr:"id"},{default:Uu(()=>[Is(ro(_o),{dataField:"FactoryStructureID",caption:"Sex nomi",groupIndex:"0"}),Is(ro(_o),{dataField:"StartTime",caption:"Vaqti",width:"100"}),Is(ro(_o),{dataField:"PName",caption:"Nomlanishi"}),Is(ro(_o),{dataField:"PName",caption:"Nomlanishi"}),Is(ro(_o),{dataField:"Value",caption:"Qiymati"})]),_:1},8,["data-source","selectedRowKeys"])])])}}},nU=s2(WG,[["__scopeId","data-v-19d7a7b3"]]);export{nU as default};
