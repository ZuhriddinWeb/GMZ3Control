import{u as _,r as N,c as y,G as E,f as x,g as C,h as D,k as u,j as e,D as k,l as b,i as p,t as R,m as h,d as M,o as F,V as q,n as V,H as $,x as A}from"./app-106974a9.js";/* empty css                   */const G={class:"h-full w-full text-center content-center"},z={class:"va-h3"},P={__name:"DeleteStructure",props:["params"],setup(w){const{init:v}=_(),c=N(!1),o=w,{t:f}=y(),d=E("ondeleted"),r=async()=>{try{const{data:l}=await h.delete(`/structure/${o.params.data.id}`);l.status===200?(d(o.params.data),c.value=!1,v({message:f("login.successMessage"),color:"success"})):console.error("Error deleting data:",l.message)}catch(l){console.error("Error deleting data:",l)}};return(l,n)=>{const s=x("VaModal");return C(),D("main",G,[u(e(k),{round:"",icon:"delete",color:"red",preset:"primary",class:"mt-1",onClick:n[0]||(n[0]=g=>c.value=!0)}),u(s,{modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=g=>c.value=g),"ok-text":e(f)("modals.apply"),"cancel-text":e(f)("modals.cancel"),onClose:n[2]||(n[2]=g=>c.value=!1),onOk:r,"close-button":""},{default:b(()=>[p("h3",z,R(e(f)("modals.title")),1),p("p",null,R(e(f)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},H={class:"h-full w-full text-center content-center"},L={class:"va-h3"},J={__name:"EditStructure",props:["params"],setup(w){const v=w,c=N(!1),o=E("onupdated"),{init:f}=_(),{t:d}=y(),r=M({Name:"",NameRus:"",ShortNameRus:"",ShortName:"",Comment:"",id:v.params.data.id});F(()=>{h.get(`structure/${v.params.data.id}`).then(n=>{Object.assign(r,n.data)}).catch(n=>{console.error("Error fetching data:",n)})});const l=async()=>{try{const{data:n}=await h.put("/structure",r);n.status===200?(o(v.params.node,n.unit),c.value=!1,f({message:d("login.successMessage"),color:"success"})):console.error("Error saving data:",n.message)}catch(n){console.error("Error saving data:",n)}};return(n,s)=>{const g=x("VaTextarea"),S=x("VaModal");return C(),D("main",H,[u(e(k),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:s[0]||(s[0]=t=>c.value=!0)}),u(S,{modelValue:c.value,"onUpdate:modelValue":s[6]||(s[6]=t=>c.value=t),"ok-text":e(d)("modals.apply"),"cancel-text":e(d)("modals.cancel"),onOk:l,onClose:s[7]||(s[7]=t=>c.value=!1),"close-button":""},{default:b(()=>[p("h3",L,R(e(d)("modals.editFactory")),1),p("div",null,[u(e(q),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[u(e(V),{class:"w-full",modelValue:r.Name,"onUpdate:modelValue":s[1]||(s[1]=t=>r.Name=t),rules:[t=>!!t||e(d)("validation.required")],label:e(d)("form.name")},null,8,["modelValue","rules","label"]),u(e(V),{class:"w-full",modelValue:r.NameRus,"onUpdate:modelValue":s[2]||(s[2]=t=>r.NameRus=t),rules:[t=>!!t||e(d)("validation.required")],label:e(d)("form.nameRus")},null,8,["modelValue","rules","label"]),u(e(V),{class:"w-full",modelValue:r.ShortName,"onUpdate:modelValue":s[3]||(s[3]=t=>r.ShortName=t),rules:[t=>!!t||e(d)("validation.required")],label:e(d)("form.shortName")},null,8,["modelValue","rules","label"]),u(e(V),{class:"w-full",modelValue:r.ShortNameRus,"onUpdate:modelValue":s[4]||(s[4]=t=>r.ShortNameRus=t),rules:[t=>!!t||e(d)("validation.required")],label:e(d)("form.shortNameRus")},null,8,["modelValue","rules","label"]),u(g,{class:"w-full",modelValue:r.Comment,"onUpdate:modelValue":s[5]||(s[5]=t=>r.Comment=t),"max-length":125,label:e(d)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const K={class:"grid grid-rows-[55px,1fr]"},Q={class:"flex justify-between"},W=p("span",{class:"flex w-full"},null,-1),X={class:"va-h3"},Y={class:"flex-grow"},ae={__name:"FactoriesStructurePage",setup(w){const{init:v}=_(),{locale:c,t:o}=y(),f=N([]),d=N(null),r=N(!1);N([]);const l=M({Name:"",NameRus:"",ShortNameRus:"",ShortName:"",Comment:""});function n(m){d.value.applyTransaction({remove:[m]})}function s(m,i){m.setData(i)}$("ondeleted",n),$("onupdated",s);const g=A(()=>[{headerName:o("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:o("table.name"),field:t(),flex:1},{headerName:o("table.shortName"),field:T()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:J},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:P}]),S={sortable:!0,filter:!0},t=()=>c.value==="uz"?"Name":"NameRus",T=()=>c.value==="uz"?"ShortName":"ShortNameRus",U=async()=>{try{const m=await h.get("/structure");f.value=Array.isArray(m.data)?m.data:m.data.items}catch(m){console.error("Error fetching data:",m)}},j=async()=>{try{const{data:m}=await h.post("/structure",l);m.status===200?(r.value=!1,l.Name="",l.NameRus="",l.ShortName="",l.ShortNameRus="",l.Comment="",await U(),v({message:o("login.successMessage"),color:"success"})):console.error("Error saving data:",m.message)}catch(m){console.error("Error saving data:",m)}};return F(()=>{const m=localStorage.getItem("locale");m&&(c.value=m),U()}),(m,i)=>{const B=x("VaTextarea"),I=x("VaModal"),O=x("ag-grid-vue");return C(),D("div",K,[p("main",null,[p("div",Q,[W,u(e(k),{onClick:i[0]||(i[0]=a=>r.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),u(I,{modelValue:r.value,"onUpdate:modelValue":i[6]||(i[6]=a=>r.value=a),"ok-text":e(o)("buttons.save"),"cancel-text":e(o)("buttons.cancel"),onOk:j,"close-button":""},{default:b(()=>[p("h3",X,R(e(o)("modals.addStructureTitle")),1),p("div",null,[u(e(q),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:b(()=>[u(e(V),{class:"w-full",modelValue:l.Name,"onUpdate:modelValue":i[1]||(i[1]=a=>l.Name=a),rules:[a=>a&&a.length>0||e(o)("validation.requiredField")],label:e(o)("form.name")},null,8,["modelValue","rules","label"]),u(e(V),{class:"w-full",modelValue:l.NameRus,"onUpdate:modelValue":i[2]||(i[2]=a=>l.NameRus=a),rules:[a=>a&&a.length>0||e(o)("validation.requiredField")],label:e(o)("form.nameRus")},null,8,["modelValue","rules","label"]),u(e(V),{class:"w-full",modelValue:l.ShortName,"onUpdate:modelValue":i[3]||(i[3]=a=>l.ShortName=a),rules:[a=>a&&a.length>0||e(o)("validation.requiredField")],label:e(o)("form.shortName")},null,8,["modelValue","rules","label"]),u(e(V),{class:"w-full",modelValue:l.ShortNameRus,"onUpdate:modelValue":i[4]||(i[4]=a=>l.ShortNameRus=a),rules:[a=>a&&a.length>0||e(o)("validation.requiredField")],label:e(o)("form.shortNameRus")},null,8,["modelValue","rules","label"]),u(B,{class:"w-full",modelValue:l.Comment,"onUpdate:modelValue":i[5]||(i[5]=a=>l.Comment=a),"max-length":"125",label:e(o)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),p("main",Y,[u(O,{rowData:f.value,columnDefs:g.value,defaultColDef:S,animateRows:"true",class:"ag-theme-material h-full",onGridReady:i[7]||(i[7]=a=>d.value=a.api)},null,8,["rowData","columnDefs"])])])}}};export{ae as default};
