import{u as k,c as I,r as N,G as z,f,g as P,h as U,k as d,j as a,D as $,l as y,i,t as S,m as x,d as B,I as H,V as G,n as _,H as M,x as F,o as L}from"./app-1a49a4d8.js";/* empty css                   */const J={class:"h-full w-full text-center content-center"},K={class:"va-h3"},Q={__name:"DeleteBlog",props:["params"],setup(D){const{init:h}=k(),{t:m}=I(),l=N(!1),g=D,v=z("ondeleted"),u=async()=>{try{const{data:p}=await x.delete(`/pages/${g.params.data.id}`);p.status===200?(v(g.params.data),l.value=!1,h({message:m("login.successMessage"),color:"success"})):console.error("Error deleting data:",p.message)}catch(p){console.error("Error deleting data:",p)}};return(p,e)=>{const w=f("VaModal");return P(),U("main",J,[d(a($),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:e[0]||(e[0]=b=>l.value=!0)}),d(w,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=b=>l.value=b),"ok-text":a(m)("modals.apply"),"cancel-text":a(m)("modals.cancel"),onClose:e[2]||(e[2]=b=>l.value=!1),onOk:u,"close-button":""},{default:y(()=>[i("h3",K,S(a(m)("modals.title")),1),i("p",null,S(a(m)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},W={class:"h-full w-full text-center content-center"},X={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},Y={__name:"EditBlog",props:["params"],setup(D){const{init:h}=k(),m=D,l=N(!1),g=z("onupdated"),v=N([]),{t:u,locale:p}=I(),e=B({StructureID:"",Name:"",NameRus:"",NumberPage:"",Comment:"",id:m.params.data.id}),w=async()=>{try{const c=await x.get("/structure");v.value=c.data.map(V=>({value:V.id,text:p.value==="uz"?V.Name:V.NameRus}));const o=await x.get(`pages/${m.params.data.id}`);e.StructureID=+o.data.StructureID,e.Name=o.data.Name,e.ShortName=o.data.ShortName,e.NumberPage=o.data.NumberPage,e.Comment=o.data.Comment}catch(c){console.error("Error fetching graphics data:",c)}},b=async()=>{try{const{data:c}=await x.put("/pages",e);c.status===200?(g(m.params.node,c.unit),l.value=!1,h({message:u("login.successMessage"),color:"success"})):console.error("Error saving data:",c.message)}catch(c){console.error("Error saving data:",c)}};return H(()=>e.StructureID,c=>{}),(c,o)=>{const V=f("VaSelect"),R=f("VaTextarea"),C=f("VaModal");return P(),U("main",W,[d(a($),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:o[0]||(o[0]=t=>(l.value=!0,w))}),d(C,{modelValue:l.value,"onUpdate:modelValue":o[6]||(o[6]=t=>l.value=t),"ok-text":a(u)("modals.apply"),"cancel-text":a(u)("modals.cancel"),onOk:b,onClose:o[7]||(o[7]=t=>l.value=!1),"close-button":""},{default:y(()=>[i("h3",{class:"va-h3",onVnodeMounted:w},S(a(u)("modals.editFactory")),513),i("div",null,[d(a(G),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:y(()=>[i("div",X,[d(V,{modelValue:e.StructureID,"onUpdate:modelValue":o[1]||(o[1]=t=>e.StructureID=t),"value-by":"value",class:"mb-1",label:a(u)("form.structureName"),options:v.value,clearable:""},null,8,["modelValue","label","options"])]),d(a(_),{class:"w-full",modelValue:e.NumberPage,"onUpdate:modelValue":o[2]||(o[2]=t=>e.NumberPage=t),type:"number",rules:[t=>t&&t.length>0||a(u)("validation.requiredField")],label:a(u)("form.numberpage")},null,8,["modelValue","rules","label"]),d(a(_),{class:"w-full",modelValue:e.Name,"onUpdate:modelValue":o[3]||(o[3]=t=>e.Name=t),rules:[t=>t&&t.length>0||a(u)("validation.requiredField")],label:a(u)("form.name")},null,8,["modelValue","rules","label"]),d(a(_),{class:"w-full",modelValue:e.NameRus,"onUpdate:modelValue":o[4]||(o[4]=t=>e.NameRus=t),rules:[t=>t&&t.length>0||a(u)("validation.requiredField")],label:a(u)("form.nameRus")},null,8,["modelValue","rules","label"]),d(R,{class:"w-full",modelValue:e.Comment,"onUpdate:modelValue":o[5]||(o[5]=t=>e.Comment=t),"max-length":"125",label:a(u)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const Z={class:"grid grid-rows-[55px,1fr]"},ee={class:"flex justify-between"},ae=i("span",{class:"flex w-full"},null,-1),le={class:"va-h3"},te={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},oe={class:"flex-grow"},ne={__name:"NumberPage",setup(D){const{init:h}=k(),{locale:m,t:l}=I(),g=N([]),v=N(null),u=N(!1),p=N([]),e=B({StructureID:"",Name:"",NameRus:"",NumberPage:"",Comment:""});function w(r){v.value.applyTransaction({remove:[r]})}function b(r,n){r.setData(n)}M("ondeleted",w),M("onupdated",b);const c=F(()=>[{headerName:l("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:l("table.structure"),field:C(),flex:1},{headerName:l("table.name"),field:V(),flex:1},{headerName:l("table.numberpage"),field:"NumberPage"},{headerName:l("table.comment"),field:R()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Y},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Q}]),o={sortable:!0,filter:!0},V=()=>m.value==="uz"?"Name":"NameRus",R=()=>m.value==="uz"?"ShortName":"ShortNameRus",C=()=>m.value==="uz"?"SName":"NameRus",t=async()=>{try{const r=await x.get("/pages");g.value=Array.isArray(r.data)?r.data:r.data.items}catch(r){console.error("Error fetching data:",r)}},E=async()=>{try{const r=await x.get("/structure");p.value=r.data.map(n=>({value:n.id,text:m.value==="uz"?n.Name:n.NameRus}))}catch(r){console.error("Error fetching graphics data:",r)}},T=async()=>{try{const{data:r}=await x.post("/pages",e);r.status===200?(u.value=!1,e.StructureID="",e.Name="",e.NameRus="",e.NumberPage="",e.Comment="",await t(),h({message:l("login.successMessage"),color:"success"})):console.error("Error saving data:",r.message)}catch(r){console.error("Error saving data:",r)}};return L(()=>{const r=localStorage.getItem("locale");r&&(m.value=r),t(),E()}),F(()=>m.value==="uz"?"Русский":"O‘zbek"),(r,n)=>{const q=f("VaSelect"),O=f("VaTextarea"),j=f("VaModal"),A=f("ag-grid-vue");return P(),U("div",Z,[i("main",null,[i("div",ee,[ae,d(a($),{onClick:n[0]||(n[0]=s=>(u.value=!0,E)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),d(j,{modelValue:u.value,"onUpdate:modelValue":n[6]||(n[6]=s=>u.value=s),"ok-text":a(l)("buttons.save"),"cancel-text":a(l)("buttons.cancel"),onOk:T,"close-button":""},{default:y(()=>[i("h3",le,S(a(l)("modals.addPageTitle")),1),i("div",null,[d(a(G),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:y(()=>[i("div",te,[d(q,{modelValue:e.StructureID,"onUpdate:modelValue":n[1]||(n[1]=s=>e.StructureID=s),"value-by":"value",class:"mb-1",label:a(l)("form.structureName"),options:p.value,clearable:""},null,8,["modelValue","label","options"])]),d(a(_),{class:"w-full",modelValue:e.NumberPage,"onUpdate:modelValue":n[2]||(n[2]=s=>e.NumberPage=s),type:"number",rules:[s=>s&&s.length>0||a(l)("validation.requiredField")],label:a(l)("form.numberpage")},null,8,["modelValue","rules","label"]),d(a(_),{class:"w-full",modelValue:e.Name,"onUpdate:modelValue":n[3]||(n[3]=s=>e.Name=s),rules:[s=>s&&s.length>0||a(l)("validation.requiredField")],label:a(l)("form.name")},null,8,["modelValue","rules","label"]),d(a(_),{class:"w-full",modelValue:e.NameRus,"onUpdate:modelValue":n[4]||(n[4]=s=>e.NameRus=s),rules:[s=>s&&s.length>0||a(l)("validation.requiredField")],label:a(l)("form.nameRus")},null,8,["modelValue","rules","label"]),d(O,{class:"w-full",modelValue:e.Comment,"onUpdate:modelValue":n[5]||(n[5]=s=>e.Comment=s),"max-length":"125",label:a(l)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),i("main",oe,[d(A,{rowData:g.value,columnDefs:c.value,defaultColDef:o,animateRows:"true",class:"ag-theme-material h-full",onGridReady:n[7]||(n[7]=s=>v.value=s.api)},null,8,["rowData","columnDefs"])])])}}};export{ne as default};
