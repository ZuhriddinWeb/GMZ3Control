import{c as E,r as i,d as I,H as _,x as h,o as R,f as r,g as B,h as F,i as d,k as s,l as v,j as n,m as V,t as M}from"./app-db6918d0.js";/* empty css                   */import{_ as U,a as A}from"./EditUnitsModal-a6556252.js";const $={class:"grid grid-rows-[55px,1fr]"},j={class:"flex justify-between"},q=d("span",{class:"flex w-full"},null,-1),z={class:"va-h3"},G={class:"flex-grow"},J={__name:"ChangesPage",setup(O){const{locale:u,t:a}=E(),c=i([]),f=i(null),m=i(!1),o=I({Name:"",ShortName:"",Comment:""});function x(e){f.value.applyTransaction({remove:[e]})}function b(e,l){e.setData(l)}_("ondeleted",x),_("onupdated",b);const w=h(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.name"),field:"FactoryID",flex:1},{headerName:a("table.change"),field:"Change"},{headerName:a("table.startingDay"),field:"StartingDay"},{headerName:a("table.startingTime"),field:"StartingTime"},{headerName:a("table.endingDay"),field:"EndingDay"},{headerName:a("table.endingTime"),field:"EndingTime"},{headerName:a("table.comment"),field:"Comment"},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:U},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:A}]),N={sortable:!0,filter:!0},g=async()=>{try{const e=await V.get("/changes");c.value=Array.isArray(e.data)?e.data:e.data.items}catch(e){console.error("Error fetching data:",e)}},y=async()=>{try{const{data:e}=await V.post("/units",o);e.status===200?(m.value=!1,o.Name="",o.ShortName="",o.Comment="",await g()):console.error("Error saving data:",e.message)}catch(e){console.error("Error saving data:",e)}};return R(()=>{const e=localStorage.getItem("locale");e&&(u.value=e),g()}),h(()=>u.value==="uz"?"Русский":"O‘zbek"),(e,l)=>{const C=r("VaButton"),p=r("VaInput"),D=r("VaTextarea"),S=r("VaForm"),k=r("VaModal"),T=r("ag-grid-vue");return B(),F("div",$,[d("main",null,[d("div",j,[q,s(C,{onClick:l[0]||(l[0]=t=>m.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),s(k,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=t=>m.value=t),"ok-text":n(a)("buttons.save"),"cancel-text":n(a)("buttons.cancel"),onOk:y,"close-button":""},{default:v(()=>[d("h3",z,M(n(a)("modals.addChangeTitle")),1),d("div",null,[s(S,{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:v(()=>[s(p,{class:"w-full",modelValue:o.Name,"onUpdate:modelValue":l[1]||(l[1]=t=>o.Name=t),rules:[t=>t&&t.length>0||n(a)("form.requiredField")],label:n(a)("form.name")},null,8,["modelValue","rules","label"]),s(p,{class:"w-full",modelValue:o.ShortName,"onUpdate:modelValue":l[2]||(l[2]=t=>o.ShortName=t),rules:[t=>t&&t.length>0||n(a)("form.requiredField")],label:n(a)("form.shortName")},null,8,["modelValue","rules","label"]),s(D,{class:"w-full",modelValue:o.Comment,"onUpdate:modelValue":l[3]||(l[3]=t=>o.Comment=t),"max-length":"125",label:n(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),d("main",G,[s(T,{rowData:c.value,columnDefs:w.value,defaultColDef:N,animateRows:"true",class:"ag-theme-material h-full",onGridReady:l[5]||(l[5]=t=>f.value=t.api)},null,8,["rowData","columnDefs"])])])}}};export{J as default};
