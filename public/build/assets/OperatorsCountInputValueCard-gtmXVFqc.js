import{u as N,c as R,b as z,r as p,o as O,D as V,n as u,s as $,g as _,h as f,i as o,I as A,J as B,j as P,t as x,k as h,l as T,x as j,z as F}from"./app-JH6q8Ism.js";/* empty css                   */const E={class:"grid grid-rows-[55px,1fr]"},L={class:"flex justify-between"},H={class:"w-4/6"},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 my-6 shadow-sm border border-slate-200 mt-24 p-4"},M=["onClick"],q={class:"mb-2 text-slate-800 text-xl font-semibold flex items-start"},G={class:"flex-grow leading-none w-5/6"},X={__name:"OperatorsCountInputValueCard",setup(K){const{init:Q}=N(),{locale:i,t:b}=R(),w=z(),y=p([]);p(null);const d=p(null);function k(s){w.push({name:"OperatorDetail",params:{id:s}})}function C(s){d.value=s,I()}async function I(){const s=new Date,t=s.toISOString().split("T")[0],e=s.getHours(),c=e>=8&&e<20?1:2;if(d.value){const{data:r}=await u.get(`/getRowPageResult/${d.value}`,{params:{day:t,smena:c}}),n=r.reduce((a,l)=>(a.total+=l.multiplied_parameter_count,a.filled+=l.kiritilgan,a),{total:0,filled:0});n.total>0&&n.filled/n.total*100}else{const{data:r}=await u.get("/structure"),n=[];for(const a of r){const l=await u.get(`/getRowPageResult/${a.id}`,{params:{day:t,smena:c}}),v=l.data.reduce((g,m)=>g+m.multiplied_parameter_count,0),S=l.data.reduce((g,m)=>g+m.kiritilgan,0),D=v>0?S/v*100:0;n.push({name:i.value==="uz"?a.Name:a.NameRus,y:parseFloat(D.toFixed(2))})}}}return O(async()=>{const s=localStorage.getItem("locale");s&&(i.value=s);try{const t=V.state.user.structure_id;if(Array.isArray(t)&&t.length===1){const e=t[0];w.push({name:"OperatorDetail",params:{id:e}})}else if(Array.isArray(t)&&t.length>1){const e=await u.get(`/structures/${t.join(",")}`);y.value=e.data}else console.warn("structure_id bo'sh yoki noto'g'ri formatda")}catch(t){console.error("Error fetching data:",t)}}),$(()=>i.value==="uz"?"Русский":"O‘zbek"),(s,t)=>(f(),_("div",E,[o("div",L,[o("div",H,[o("div",J,[(f(!0),_(A,null,B(y.value,(e,c)=>(f(),_("div",{onClick:r=>C(e.id),key:c,class:"p-4 border-2 bg-white shadow-lg border-slate-400 cursor-pointer",style:{backgroundImage:"url('/log.png')",backgroundSize:"cover",backgroundPosition:"center"}},[o("h5",q,[t[0]||(t[0]=o("span",{class:"material-symbols-outlined w-1"},"circles_ext",-1)),o("span",G,x(h(i)==="ru"?e.NameRus:e.Name),1)]),P(h(F),{onClick:r=>k(e.id),preset:"primary",class:"mr-6 mt-8",round:"","border-color":"primary"},{default:T(()=>[j(x(h(b)("modals.viewPage")),1)]),_:2},1032,["onClick"])],8,M))),128))])])])]))}};export{X as default};
