import{u as $,c as j,b as O,r as f,o as V,D as z,n as u,s as A,g as h,h as v,i as a,I as B,J as T,t as b,k as i,j as w,l as F,x as P,z as y}from"./app-DUooqZB6.js";/* empty css                   */const E={class:"grid grid-rows-[55px,1fr]"},L={class:"flex justify-between"},H={class:"w-4/6"},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 my-6 shadow-sm border border-slate-200 mt-24 p-4"},M=["onClick"],q={class:"mb-2 text-slate-800 text-xl font-semibold flex items-start"},G={class:"flex-grow leading-none w-5/6"},K={class:"flex justify-between"},Q={class:"flex justify-end"},Z={__name:"OperatorsCountInputValueCard",setup(U){const{init:W}=$(),{locale:c,t:I}=j(),x=O(),k=f([]);f(null);const m=f(null);function p(s){x.push({name:"OperatorDetail",params:{id:s}})}function D(s){m.value=s,N()}async function N(){const s=new Date,t=s.toISOString().split("T")[0],e=s.getHours(),d=e>=8&&e<20?1:2;if(m.value){const{data:o}=await u.get(`/getRowPageResult/${m.value}`,{params:{day:t,smena:d}}),n=o.reduce((r,l)=>(r.total+=l.multiplied_parameter_count,r.filled+=l.kiritilgan,r),{total:0,filled:0});n.total>0&&n.filled/n.total*100}else{const{data:o}=await u.get("/structure"),n=[];for(const r of o){const l=await u.get(`/getRowPageResult/${r.id}`,{params:{day:t,smena:d}}),C=l.data.reduce((g,_)=>g+_.multiplied_parameter_count,0),R=l.data.reduce((g,_)=>g+_.kiritilgan,0),S=C>0?R/C*100:0;n.push({name:c.value==="uz"?r.Name:r.NameRus,y:parseFloat(S.toFixed(2))})}}}return V(async()=>{const s=localStorage.getItem("locale");s&&(c.value=s);try{const t=z.state.user.structure_id;if(Array.isArray(t)&&t.length===1){const e=t[0];x.push({name:"OperatorDetail",params:{id:e}})}else if(Array.isArray(t)&&t.length>1){const e=await u.get(`/structures/${t.join(",")}`);k.value=e.data}else console.warn("structure_id bo'sh yoki noto'g'ri formatda")}catch(t){console.error("Error fetching data:",t)}}),A(()=>c.value==="uz"?"Русский":"O‘zbek"),(s,t)=>(v(),h("div",E,[a("div",L,[a("div",H,[a("div",J,[(v(!0),h(B,null,T(k.value,(e,d)=>(v(),h("div",{onClick:o=>D(e.id),key:d,class:"p-4 border-2 bg-white shadow-xl border-slate-400 cursor-pointer"},[a("h5",q,[t[0]||(t[0]=a("span",{class:"material-symbols-outlined w-1"},"circles_ext",-1)),a("span",G,b(i(c)==="ru"?e.NameRus:e.Name),1)]),a("div",K,[a("div",null,[w(i(y),{onClick:o=>p(e.id),preset:"primary",class:"mr-6 mt-8",round:"","border-color":"primary"},{default:F(()=>[P(b(i(I)("modals.viewPage")),1)]),_:2},1032,["onClick"])]),a("div",Q,[w(i(y),{onClick:o=>p(e.id),round:"",icon:"va-check",class:"mr-6 mt-8",color:"success"},null,8,["onClick"]),w(i(y),{onClick:o=>p(e.id),round:"",icon:"clear",class:"mr-6 mt-8",color:"danger"},null,8,["onClick"])])])],8,M))),128))])])])]))}};export{Z as default};
