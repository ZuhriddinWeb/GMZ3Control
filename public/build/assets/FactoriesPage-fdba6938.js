import{u as _,r as x,c as S,G as M,f as g,g as C,h as k,k as u,j as e,D,l as b,i as f,t as y,m as w,d as q,o as T,V as j,n as p,H as U,x as z}from"./app-d6fd952f.js";/* empty css                   */const P={class:"h-full w-full text-center content-center"},H={class:"va-h3"},$={__name:"DeleteFactory",props:["params"],setup(h){const{init:N}=_(),c=x(!1),{t:a}=S(),V=h,d=M("ondeleted"),n=async()=>{try{const{data:t}=await w.delete(`/factory/${V.params.data.id}`);t.status===200?(d(V.params.data),c.value=!1,N({message:a("login.successMessage"),color:"success"})):console.error("Error deleting data:",t.message)}catch(t){console.error("Error deleting data:",t)}};return(t,r)=>{const s=g("VaModal");return C(),k("main",P,[u(e(D),{round:"",icon:"delete",color:"red",preset:"primary",class:"mt-1",onClick:r[0]||(r[0]=v=>c.value=!0)}),u(s,{modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=v=>c.value=v),"ok-text":e(a)("modals.apply"),"cancel-text":e(a)("modals.cancel"),onClose:r[2]||(r[2]=v=>c.value=!1),onOk:n,"close-button":""},{default:b(()=>[f("h3",H,y(e(a)("modals.title")),1),f("p",null,y(e(a)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},J={class:"h-full w-full text-center content-center"},K={class:"va-h3"},E={__name:"EditFactory",props:["params"],setup(h){const{init:N}=_(),c=h,a=x(!1),V=M("onupdated"),{t:d}=S(),n=q({Name:"",NameRus:"",ShortName:"",ShortNameRus:"",Comment:"",id:c.params.data.id});T(()=>{w.get(`factory/${c.params.data.id}`).then(r=>{Object.assign(n,r.data)}).catch(r=>{console.error("Error fetching data:",r)})});const t=async()=>{try{const{data:r}=await w.put("/factory",n);r.status===200?(V(c.params.node,r.unit),a.value=!1,N({message:d("login.successMessage"),color:"success"})):console.error("Error saving data:",r.message)}catch(r){console.error("Error saving data:",r)}};return(r,s)=>{const v=g("VaTextarea"),R=g("VaModal");return C(),k("main",J,[u(e(D),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:s[0]||(s[0]=o=>a.value=!0)}),u(R,{modelValue:a.value,"onUpdate:modelValue":s[6]||(s[6]=o=>a.value=o),"ok-text":e(d)("modals.apply"),"cancel-text":e(d)("modals.cancel"),onOk:t,onClose:s[7]||(s[7]=o=>a.value=!1),"close-button":""},{default:b(()=>[f("h3",K,y(e(d)("modals.editFactory")),1),f("div",null,[u(e(j),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[u(e(p),{class:"w-full",modelValue:n.Name,"onUpdate:modelValue":s[1]||(s[1]=o=>n.Name=o),rules:[o=>!!o||e(d)("validation.required")],label:e(d)("form.name")},null,8,["modelValue","rules","label"]),u(e(p),{class:"w-full",modelValue:n.NameRus,"onUpdate:modelValue":s[2]||(s[2]=o=>n.NameRus=o),rules:[o=>!!o||e(d)("validation.required")],label:e(d)("form.nameRus")},null,8,["modelValue","rules","label"]),u(e(p),{class:"w-full",modelValue:n.ShortName,"onUpdate:modelValue":s[3]||(s[3]=o=>n.ShortName=o),rules:[o=>!!o||e(d)("validation.required")],label:e(d)("form.shortName")},null,8,["modelValue","rules","label"]),u(e(p),{class:"w-full",modelValue:n.ShortNameRus,"onUpdate:modelValue":s[4]||(s[4]=o=>n.ShortNameRus=o),rules:[o=>!!o||e(d)("validation.required")],label:e(d)("form.shortNameRus")},null,8,["modelValue","rules","label"]),u(v,{class:"w-full",modelValue:n.Comment,"onUpdate:modelValue":s[5]||(s[5]=o=>n.Comment=o),"max-length":125,label:e(d)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const L={class:"grid grid-rows-[55px,1fr]"},Q={class:"flex justify-between"},W=f("span",{class:"flex w-full"},null,-1),X={class:"va-h3"},Y={class:"flex-grow"},ae={__name:"FactoriesPage",setup(h){const{init:N}=_(),{locale:c,t:a}=S(),V=x([]),d=x(null),n=x(!1),t=q({Name:"",NameRus:"",ShortName:"",ShortNameRus:"",Comment:""});function r(i){d.value.applyTransaction({remove:[i]})}function s(i,m){i.setData(m)}U("ondeleted",r),U("onupdated",s);const v=z(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.name"),field:o(),flex:1},{headerName:a("table.shortName"),field:B()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:E},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:$}]),R={sortable:!0,filter:!0},o=()=>c.value==="uz"?"Name":"NameRus",B=()=>c.value==="uz"?"ShortName":"ShortNameRus",F=async()=>{try{const i=await w.get("/factory");V.value=Array.isArray(i.data)?i.data:i.data.items}catch(i){console.error("Error fetching data:",i)}},O=async()=>{try{const{data:i}=await w.post("/factory",t);i.status===200?(n.value=!1,t.Name="",t.NameRus="",t.ShortName="",t.ShortNameRus="",t.Comment="",await F(),N({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return T(()=>{F()}),(i,m)=>{const A=g("VaTextarea"),G=g("VaModal"),I=g("ag-grid-vue");return C(),k("div",L,[f("main",null,[f("div",Q,[W,u(e(D),{onClick:m[0]||(m[0]=l=>n.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),u(G,{modelValue:n.value,"onUpdate:modelValue":m[6]||(m[6]=l=>n.value=l),"ok-text":e(a)("buttons.save"),"cancel-text":e(a)("buttons.cancel"),onOk:O,"close-button":""},{default:b(()=>[f("h3",X,y(e(a)("modals.addUnitTitle")),1),f("div",null,[u(e(j),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:b(()=>[u(e(p),{class:"w-full",modelValue:t.Name,"onUpdate:modelValue":m[1]||(m[1]=l=>t.Name=l),rules:[l=>l&&l.length>0||e(a)("validation.requiredField")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),u(e(p),{class:"w-full",modelValue:t.NameRus,"onUpdate:modelValue":m[2]||(m[2]=l=>t.NameRus=l),rules:[l=>l&&l.length>0||e(a)("validation.requiredField")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),u(e(p),{class:"w-full",modelValue:t.ShortName,"onUpdate:modelValue":m[3]||(m[3]=l=>t.ShortName=l),rules:[l=>l&&l.length>0||e(a)("validation.requiredField")],label:e(a)("form.shortName")},null,8,["modelValue","rules","label"]),u(e(p),{class:"w-full",modelValue:t.ShortNameRus,"onUpdate:modelValue":m[4]||(m[4]=l=>t.ShortNameRus=l),rules:[l=>l&&l.length>0||e(a)("validation.requiredField")],label:e(a)("form.shortNameRus")},null,8,["modelValue","rules","label"]),u(A,{class:"w-full",modelValue:t.Comment,"onUpdate:modelValue":m[5]||(m[5]=l=>t.Comment=l),"max-length":"125",label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),f("main",Y,[u(I,{rowData:V.value,columnDefs:v.value,defaultColDef:R,animateRows:"true",class:"ag-theme-material h-full",onGridReady:m[7]||(m[7]=l=>d.value=l.api),frameworkComponents:{EditFactory:E,DeleteFactory:$}},null,8,["rowData","columnDefs","frameworkComponents"])])])}}};export{ae as default};
