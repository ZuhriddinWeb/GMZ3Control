import{u as k,c as $,r as N,E as B,f as x,g as E,h as P,j as d,k as e,z as I,l as R,i as f,t as S,n as w,d as T,K as H,V as q,m as h,s as F,o as K,H as z}from"./app-BnZHz_BC.js";/* empty css                   */const L={class:"h-full w-full text-center content-center"},J={class:"va-h3"},Q={__name:"DeleteBlog",props:["params"],setup(y){const{init:D}=k(),{t:c}=$(),a=N(!1),g=y,v=B("ondeleted"),m=async()=>{try{const{data:p}=await w.delete(`/pages/${g.params.data.id}`);p.status===200?(v(g.params.data),a.value=!1,D({message:c("login.successMessage"),color:"success"})):console.error("Error deleting data:",p.message)}catch(p){console.error("Error deleting data:",p)}};return(p,l)=>{const u=x("VaModal");return P(),E("main",L,[d(e(I),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:l[0]||(l[0]=b=>a.value=!0)}),d(u,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=b=>a.value=b),"ok-text":e(c)("modals.apply"),"cancel-text":e(c)("modals.cancel"),onClose:l[2]||(l[2]=b=>a.value=!1),onOk:m,"close-button":""},{default:R(()=>[f("h3",J,S(e(c)("modals.title")),1),f("p",null,S(e(c)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},W={class:"h-full w-full text-center content-center"},X={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},Y={__name:"EditBlog",props:["params"],setup(y){const{init:D}=k(),c=y,a=N(!1),g=B("onupdated"),v=N([]),{t:m,locale:p}=$(),l=T({StructureID:"",Name:"",NameRus:"",NumberPage:"",Comment:"",id:c.params.data.id}),u=async()=>{try{const i=await w.get("/structure");v.value=i.data.map(V=>({value:V.id,text:p.value==="uz"?V.Name:V.NameRus}));const t=await w.get(`pages/${c.params.data.id}`);l.StructureID=+t.data.StructureID,l.Name=t.data.Name,l.ShortName=t.data.ShortName,l.NumberPage=t.data.NumberPage,l.Comment=t.data.Comment}catch(i){console.error("Error fetching graphics data:",i)}},b=async()=>{try{const{data:i}=await w.put("/pages",l);i.status===200?(g(c.params.node,i.unit),a.value=!1,D({message:m("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return H(()=>l.StructureID,i=>{}),(i,t)=>{const V=x("VaSelect"),C=x("VaTextarea"),_=x("VaModal");return P(),E("main",W,[d(e(I),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:t[0]||(t[0]=o=>(a.value=!0,u))}),d(_,{modelValue:a.value,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value=o),"ok-text":e(m)("modals.apply"),"cancel-text":e(m)("modals.cancel"),onOk:b,onClose:t[7]||(t[7]=o=>a.value=!1),"close-button":""},{default:R(()=>[f("h3",{class:"va-h3",onVnodeMounted:u},S(e(m)("modals.editFactory")),513),f("div",null,[d(e(q),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:R(()=>[f("div",X,[d(V,{modelValue:l.StructureID,"onUpdate:modelValue":t[1]||(t[1]=o=>l.StructureID=o),"value-by":"value",class:"mb-1",label:e(m)("form.structureName"),options:v.value,clearable:""},null,8,["modelValue","label","options"])]),d(e(h),{class:"w-full",modelValue:l.NumberPage,"onUpdate:modelValue":t[2]||(t[2]=o=>l.NumberPage=o),type:"number",rules:[o=>o&&o.length>0||e(m)("validation.requiredField")],label:e(m)("form.numberpage")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:l.Name,"onUpdate:modelValue":t[3]||(t[3]=o=>l.Name=o),rules:[o=>o&&o.length>0||e(m)("validation.requiredField")],label:e(m)("form.name")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:l.NameRus,"onUpdate:modelValue":t[4]||(t[4]=o=>l.NameRus=o),rules:[o=>o&&o.length>0||e(m)("validation.requiredField")],label:e(m)("form.nameRus")},null,8,["modelValue","rules","label"]),d(C,{class:"w-full",modelValue:l.Comment,"onUpdate:modelValue":t[5]||(t[5]=o=>l.Comment=o),"max-length":"125",label:e(m)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},Z={class:"grid grid-rows-[55px,1fr]"},ee={class:"flex justify-between"},ae={class:"va-h3"},le={class:"flex-grow"},se={__name:"NumberPage",props:{id:Number},setup(y){const{init:D}=k(),{locale:c,t:a}=$(),g=y,v=N([]),m=N(null),p=N(!1),l=N([]),u=T({StructureID:g.id,Name:"",NameRus:"",NumberPage:"",Comment:""});function b(s){m.value.applyTransaction({remove:[s]})}function i(s,r){s.setData(r)}z("ondeleted",b),z("onupdated",i);const t=F(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.structure"),field:o(),flex:1},{headerName:a("table.name"),field:C(),flex:1},{headerName:a("table.numberpage"),field:"NumberPage"},{headerName:a("table.comment"),field:_()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Y},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:Q}]),V={sortable:!0,filter:!0},C=()=>c.value==="uz"?"Name":"NameRus",_=()=>c.value==="uz"?"ShortName":"ShortNameRus",o=()=>c.value==="uz"?"SName":"NameRus",M=async()=>{try{const s=await w.get(`/getRowPage/${g.id}`);v.value=Array.isArray(s.data)?s.data:s.data.items}catch(s){console.error("Error fetching data:",s)}},U=async()=>{try{const s=await w.get("/structure");l.value=s.data.map(r=>({value:r.id,text:c.value==="uz"?r.Name:r.NameRus}))}catch(s){console.error("Error fetching graphics data:",s)}},G=async()=>{try{const{data:s}=await w.post("/pages",u);s.status===200?(p.value=!1,u.StructureID="",u.Name="",u.NameRus="",u.NumberPage="",u.Comment="",await M(),D({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",s.message)}catch(s){console.error("Error saving data:",s)}};return K(()=>{const s=localStorage.getItem("locale");s&&(c.value=s),M(),U()}),F(()=>c.value==="uz"?"Русский":"O‘zbek"),(s,r)=>{const O=x("VaTextarea"),j=x("VaModal"),A=x("ag-grid-vue");return P(),E("div",Z,[f("main",null,[f("div",ee,[r[7]||(r[7]=f("span",{class:"flex w-full"},null,-1)),d(e(I),{onClick:r[0]||(r[0]=n=>(p.value=!0,U)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),d(j,{modelValue:p.value,"onUpdate:modelValue":r[5]||(r[5]=n=>p.value=n),"ok-text":e(a)("buttons.save"),"cancel-text":e(a)("buttons.cancel"),onOk:G,"close-button":""},{default:R(()=>[f("h3",ae,S(e(a)("modals.addPageTitle")),1),f("div",null,[d(e(q),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:R(()=>[d(e(h),{class:"w-full",modelValue:u.NumberPage,"onUpdate:modelValue":r[1]||(r[1]=n=>u.NumberPage=n),type:"number",rules:[n=>n&&n.length>0||e(a)("validation.requiredField")],label:e(a)("form.numberpage")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:u.Name,"onUpdate:modelValue":r[2]||(r[2]=n=>u.Name=n),rules:[n=>n&&n.length>0||e(a)("validation.requiredField")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),d(e(h),{class:"w-full",modelValue:u.NameRus,"onUpdate:modelValue":r[3]||(r[3]=n=>u.NameRus=n),rules:[n=>n&&n.length>0||e(a)("validation.requiredField")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),d(O,{class:"w-full",modelValue:u.Comment,"onUpdate:modelValue":r[4]||(r[4]=n=>u.Comment=n),"max-length":"125",label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),f("main",le,[d(A,{rowData:v.value,columnDefs:t.value,defaultColDef:V,animateRows:"true",class:"ag-theme-material h-full",onGridReady:r[6]||(r[6]=n=>m.value=n.api)},null,8,["rowData","columnDefs"])])])}}};export{se as default};
