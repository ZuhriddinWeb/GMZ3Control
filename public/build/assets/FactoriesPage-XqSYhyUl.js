import{u as C,r as x,c as k,E as T,f as g,g as U,h as w,j as m,k as e,z as D,l as y,i as f,t as R,n as h,d as _,o as B,F as E,G as $,V as j,m as p,s as P,H as M}from"./app-Cp5kX0cG.js";/* empty css                   */const J={class:"h-full w-full text-center content-center"},K={class:"va-h3"},q={__name:"DeleteFactory",props:["params"],setup(V){const{init:b}=C(),c=x(!1),{t:a}=k(),N=V,n=T("ondeleted"),r=async()=>{try{const{data:o}=await h.delete(`/factory/${N.params.data.id}`);o.status===200?(n(N.params.data),c.value=!1,b({message:a("login.successMessage"),color:"success"})):console.error("Error deleting data:",o.message)}catch(o){console.error("Error deleting data:",o)}};return(o,d)=>{const s=g("VaModal");return w(),U("main",J,[m(e(D),{round:"",icon:"delete",color:"red",preset:"primary",class:"mt-1",onClick:d[0]||(d[0]=v=>c.value=!0)}),m(s,{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=v=>c.value=v),"ok-text":e(a)("modals.apply"),"cancel-text":e(a)("modals.cancel"),onClose:d[2]||(d[2]=v=>c.value=!1),onOk:r,"close-button":""},{default:y(()=>[f("h3",K,R(e(a)("modals.title")),1),f("p",null,R(e(a)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},L={class:"h-full w-full text-center content-center"},Q={class:"va-h3"},O={__name:"EditFactory",props:{params:Object,canUpdate:Boolean},setup(V){const{init:b}=C(),c=V,a=x(!1),N=T("onupdated"),{t:n}=k(),r=_({Name:"",NameRus:"",ShortName:"",ShortNameRus:"",OrderNumberSex:"",Comment:"",id:c.params.data.id});B(()=>{h.get(`factory/${c.params.data.id}`).then(d=>{Object.assign(r,d.data)}).catch(d=>{console.error("Error fetching data:",d)})});const o=async()=>{try{const{data:d}=await h.put("/factory",r);d.status===200?(N(c.params.node,d.unit),a.value=!1,b({message:n("login.successMessage"),color:"success"})):console.error("Error saving data:",d.message)}catch(d){console.error("Error saving data:",d)}};return(d,s)=>{const v=g("VaTextarea"),S=g("VaModal");return w(),U("main",L,[V.canUpdate?(w(),E(e(D),{key:0,round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:s[0]||(s[0]=l=>V.canUpdate?a.value=!0:null)})):$("",!0),V.canUpdate?(w(),E(S,{key:1,modelValue:a.value,"onUpdate:modelValue":s[7]||(s[7]=l=>a.value=l),"ok-text":e(n)("modals.apply"),"cancel-text":e(n)("modals.cancel"),onOk:o,onClose:s[8]||(s[8]=l=>a.value=!1),"close-button":""},{default:y(()=>[f("h3",Q,R(e(n)("modals.editFactory")),1),f("div",null,[m(e(j),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:y(()=>[m(e(p),{class:"w-full",modelValue:r.Name,"onUpdate:modelValue":s[1]||(s[1]=l=>r.Name=l),rules:[l=>!!l||e(n)("validation.required")],label:e(n)("form.name")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:r.NameRus,"onUpdate:modelValue":s[2]||(s[2]=l=>r.NameRus=l),rules:[l=>!!l||e(n)("validation.required")],label:e(n)("form.nameRus")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:r.ShortName,"onUpdate:modelValue":s[3]||(s[3]=l=>r.ShortName=l),rules:[l=>!!l||e(n)("validation.required")],label:e(n)("form.shortName")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:r.OrderNumberSex,"onUpdate:modelValue":s[4]||(s[4]=l=>r.OrderNumberSex=l),rules:[l=>!!l||e(n)("validation.required")],label:e(n)("table.OrderNumber")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:r.ShortNameRus,"onUpdate:modelValue":s[5]||(s[5]=l=>r.ShortNameRus=l),rules:[l=>!!l||e(n)("validation.required")],label:e(n)("form.shortNameRus")},null,8,["modelValue","rules","label"]),m(v,{class:"w-full",modelValue:r.Comment,"onUpdate:modelValue":s[6]||(s[6]=l=>r.Comment=l),"max-length":125,label:e(n)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])):$("",!0)])}}},W={class:"grid grid-rows-[55px,1fr]"},X={class:"flex justify-between"},Y={class:"va-h3"},Z={class:"flex-grow"},le={__name:"FactoriesPage",setup(V){const{init:b}=C(),{locale:c,t:a}=k(),N=x([]),n=x(null),r=x(!1),o=_({Name:"",NameRus:"",ShortName:"",ShortNameRus:"",Comment:""});function d(i){n.value.applyTransaction({remove:[i]})}function s(i,u){i.setData(u)}M("ondeleted",d),M("onupdated",s);const v=P(()=>[{headerName:a("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:a("table.name"),field:l(),flex:1},{headerName:a("table.shortName"),field:z()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:O},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:q}]),S={sortable:!0,filter:!0},l=()=>c.value==="uz"?"Name":"NameRus",z=()=>c.value==="uz"?"ShortName":"ShortNameRus",F=async()=>{try{const i=await h.get("/factory");N.value=Array.isArray(i.data)?i.data:i.data.items}catch(i){console.error("Error fetching data:",i)}},A=async()=>{try{const{data:i}=await h.post("/factory",o);i.status===200?(r.value=!1,o.Name="",o.NameRus="",o.ShortName="",o.ShortNameRus="",o.Comment="",await F(),b({message:a("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return B(()=>{F()}),(i,u)=>{const G=g("VaTextarea"),I=g("VaModal"),H=g("ag-grid-vue");return w(),U("div",W,[f("main",null,[f("div",X,[u[8]||(u[8]=f("span",{class:"flex w-full"},null,-1)),m(e(D),{onClick:u[0]||(u[0]=t=>r.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),m(I,{modelValue:r.value,"onUpdate:modelValue":u[6]||(u[6]=t=>r.value=t),"ok-text":e(a)("buttons.save"),"cancel-text":e(a)("buttons.cancel"),onOk:A,"close-button":""},{default:y(()=>[f("h3",Y,R(e(a)("modals.addUnitTitle")),1),f("div",null,[m(e(j),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:y(()=>[m(e(p),{class:"w-full",modelValue:o.Name,"onUpdate:modelValue":u[1]||(u[1]=t=>o.Name=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.name")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:o.NameRus,"onUpdate:modelValue":u[2]||(u[2]=t=>o.NameRus=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.nameRus")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:o.ShortName,"onUpdate:modelValue":u[3]||(u[3]=t=>o.ShortName=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.shortName")},null,8,["modelValue","rules","label"]),m(e(p),{class:"w-full",modelValue:o.ShortNameRus,"onUpdate:modelValue":u[4]||(u[4]=t=>o.ShortNameRus=t),rules:[t=>t&&t.length>0||e(a)("validation.requiredField")],label:e(a)("form.shortNameRus")},null,8,["modelValue","rules","label"]),m(G,{class:"w-full",modelValue:o.Comment,"onUpdate:modelValue":u[5]||(u[5]=t=>o.Comment=t),"max-length":"125",label:e(a)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),f("main",Z,[m(H,{rowData:N.value,columnDefs:v.value,defaultColDef:S,animateRows:"true",class:"ag-theme-material h-full",onGridReady:u[7]||(u[7]=t=>n.value=t.api),frameworkComponents:{EditFactory:O,DeleteFactory:q}},null,8,["rowData","columnDefs","frameworkComponents"])])])}}};export{le as default};
