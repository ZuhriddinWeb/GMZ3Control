import{u as F,c as M,r as i,d as T,H as g,x as v,o as q,f as c,g as z,h as B,i as r,k as n,j as t,l as h,m as V,D as E,t as I,V as A,n as d}from"./app-49dadfab.js";/* empty css                   */import{_ as $,a as j}from"./EditUnitsModal-8108dd36.js";const G={class:"grid grid-rows-[55px,1fr]"},O={class:"flex justify-between"},P=r("span",{class:"flex w-full"},null,-1),H={class:"va-h3"},L={class:"flex-grow"},X={__name:"UnitsPage",setup(J){const{init:x}=F(),{locale:u,t:o}=M(),f=i([]),p=i(null),m=i(!1),s=T({Name:"",ShortName:"",NameRus:"",ShortNameRus:"",Comment:""});function _(a){p.value.applyTransaction({remove:[a]})}function w(a,l){a.setData(l)}g("ondeleted",_),g("onupdated",w);const b=v(()=>[{headerName:o("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:o("table.name"),field:S(),flex:1},{headerName:o("table.shortName"),field:y()},{headerName:o("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:$},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:j}]),R={sortable:!0,filter:!0},S=()=>u.value==="uz"?"Name":"NameRus",y=()=>u.value==="uz"?"ShortName":"ShortNameRus",N=async()=>{try{const a=await V.get("/units");f.value=Array.isArray(a.data)?a.data:a.data.items}catch(a){console.error("Error fetching data:",a)}},C=async()=>{try{const{data:a}=await V.post("/units",s);a.status===200?(m.value=!1,s.Name="",s.ShortName="",s.NameRus="",s.ShortNameRus="",s.Comment="",await N(),x({message:o("login.successMessage"),color:"success"})):console.error("Error saving data:",a.message)}catch(a){console.error("Error saving data:",a)}};return q(()=>{const a=localStorage.getItem("locale");a&&(u.value=a),N()}),v(()=>u.value==="uz"?"Русский":"O‘zbek"),(a,l)=>{const D=c("VaTextarea"),U=c("VaModal"),k=c("ag-grid-vue");return z(),B("div",G,[r("main",null,[r("div",O,[P,n(t(E),{onClick:l[0]||(l[0]=e=>m.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),n(U,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=e=>m.value=e),"ok-text":t(o)("buttons.save"),"cancel-text":t(o)("buttons.cancel"),onOk:C,"close-button":""},{default:h(()=>[r("h3",H,I(t(o)("modals.addUnitTitle")),1),r("div",null,[n(t(A),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:h(()=>[n(t(d),{class:"w-full",modelValue:s.Name,"onUpdate:modelValue":l[1]||(l[1]=e=>s.Name=e),rules:[e=>e&&e.length>0||t(o)("validation.requiredField")],label:t(o)("form.name")},null,8,["modelValue","rules","label"]),n(t(d),{class:"w-full",modelValue:s.NameRus,"onUpdate:modelValue":l[2]||(l[2]=e=>s.NameRus=e),rules:[e=>e&&e.length>0||t(o)("validation.requiredField")],label:t(o)("form.nameRus")},null,8,["modelValue","rules","label"]),n(t(d),{class:"w-full",modelValue:s.ShortName,"onUpdate:modelValue":l[3]||(l[3]=e=>s.ShortName=e),rules:[e=>e&&e.length>0||t(o)("validation.requiredField")],label:t(o)("form.shortName")},null,8,["modelValue","rules","label"]),n(t(d),{class:"w-full",modelValue:s.ShortNameRus,"onUpdate:modelValue":l[4]||(l[4]=e=>s.ShortNameRus=e),rules:[e=>e&&e.length>0||t(o)("validation.requiredField")],label:t(o)("form.shortNameRus")},null,8,["modelValue","rules","label"]),n(D,{class:"w-full",modelValue:s.Comment,"onUpdate:modelValue":l[5]||(l[5]=e=>s.Comment=e),"max-length":"125",label:t(o)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),r("main",L,[n(k,{rowData:f.value,columnDefs:b.value,defaultColDef:R,animateRows:"true",class:"ag-theme-material h-full",onGridReady:l[7]||(l[7]=e=>p.value=e.api)},null,8,["rowData","columnDefs"])])])}}};export{X as default};
