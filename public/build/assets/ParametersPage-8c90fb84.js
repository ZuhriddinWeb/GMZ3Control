import{u as P,c as I,r as g,E,f as x,g as k,h as T,k as r,j as a,z as q,l as U,i as m,t as D,m as b,d as S,o as _,V as F,n as u,H as $}from"./app-23ff0182.js";/* empty css                   */const G={class:"h-full w-full text-center content-center"},j={class:"va-h3"},A={__name:"DeleteParam",props:["params"],setup(M){const{init:C}=P(),{t}=I(),i=g(!1),c=M,N=E("ondeleted"),w=async()=>{try{const{data:f}=await b.delete(`/param/${c.params.data.Uuid}`);f.status===200?(N(c.params.data),i.value=!1,C({message:t("login.successMessage"),color:"success"})):console.error("Error deleting data:",f.message)}catch(f){console.error("Error deleting data:",f)}};return(f,e)=>{const h=x("VaModal");return k(),T("main",G,[r(a(q),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:e[0]||(e[0]=y=>i.value=!0)}),r(h,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=y=>i.value=y),"ok-text":a(t)("modals.apply"),"cancel-text":a(t)("modals.cancel"),onClose:e[2]||(e[2]=y=>i.value=!1),onOk:w,"close-button":""},{default:U(()=>[m("h3",j,D(a(t)("modals.title")),1),m("p",null,D(a(t)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},z={class:"h-full w-full text-center content-center"},H={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},J={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},K={__name:"EditParam",props:["params"],setup(M){const{init:C}=P(),{t}=I(),i=M,c=g(!1),N=E("onupdated"),w=g([]),f=g([]),e=S({Name:"",NameRus:"",ShortNameRus:"",ShortName:"",WinCC:"",ParamsTypeID:"",UnitsID:"",Min:"",Max:"",Comment:"",id:i.params.data.Uuid}),h=async()=>{try{const[p,n,d]=await Promise.all([b.get("/paramtypes"),b.get("/units"),b.get(`param/${i.params.data.Uuid}`)]);console.log(d),w.value=p.data.map(V=>({value:V.id,text:V.Name})),f.value=n.data.map(V=>({value:V.id,text:V.Name})),e.Name=d.data.Name,e.NameRus=d.data.NameRus,e.ShortNameRus=d.data.ShortNameRus,e.ShortName=d.data.ShortName,e.WinCC=d.data.WinCC,e.ParamsTypeID=+d.data.Pid,e.UnitsID=+d.data.Uid,e.Min=+d.data.Min,e.Max=+d.data.Max,e.Comment=d.data.Comment}catch(p){console.error("Error fetching data:",p)}},y=async()=>{try{const{data:p}=await b.put("/param",e);p.status===200?(N(i.params.node,p.unit),c.value=!1,C({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",p.message)}catch(p){console.error("Error saving data:",p)}};return _(()=>{}),(p,n)=>{const d=x("VaSelect"),V=x("VaTextarea"),R=x("VaModal");return k(),T("main",z,[r(a(q),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:n[0]||(n[0]=l=>c.value=!0)}),r(R,{modelValue:c.value,"onUpdate:modelValue":n[11]||(n[11]=l=>c.value=l),"ok-text":a(t)("modals.apply"),"cancel-text":a(t)("modals.cancel"),onOk:y,onClose:n[12]||(n[12]=l=>c.value=!1),"close-button":""},{default:U(()=>[m("h3",{class:"va-h3",onVnodeMounted:h},D(a(t)("modals.editFactory")),513),m("div",null,[r(a(F),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:U(()=>[r(a(u),{class:"w-full",modelValue:e.Name,"onUpdate:modelValue":n[1]||(n[1]=l=>e.Name=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("form.name")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.NameRus,"onUpdate:modelValue":n[2]||(n[2]=l=>e.NameRus=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("form.nameRus")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.ShortName,"onUpdate:modelValue":n[3]||(n[3]=l=>e.ShortName=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("form.shortName")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.ShortNameRus,"onUpdate:modelValue":n[4]||(n[4]=l=>e.ShortNameRus=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("form.shortNameRus")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.WinCC,"onUpdate:modelValue":n[5]||(n[5]=l=>e.WinCC=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("form.wincc")},null,8,["modelValue","rules","label"]),m("div",H,[r(a(u),{class:"w-full",modelValue:e.Min,"onUpdate:modelValue":n[6]||(n[6]=l=>e.Min=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("table.min")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.Max,"onUpdate:modelValue":n[7]||(n[7]=l=>e.Max=l),rules:[l=>l&&l.length>0||a(t)("form.requiredField")],label:a(t)("table.max")},null,8,["modelValue","rules","label"])]),m("div",J,[r(d,{modelValue:e.ParamsTypeID,"onUpdate:modelValue":n[8]||(n[8]=l=>e.ParamsTypeID=l),"value-by":"value",class:"mb-6",label:a(t)("menu.paramtypes"),options:w.value,clearable:""},null,8,["modelValue","label","options"]),r(d,{modelValue:e.UnitsID,"onUpdate:modelValue":n[9]||(n[9]=l=>e.UnitsID=l),"value-by":"value",class:"mb-6",label:a(t)("menu.units"),options:f.value,clearable:""},null,8,["modelValue","label","options"])]),r(V,{class:"w-full",modelValue:e.Comment,"onUpdate:modelValue":n[10]||(n[10]=l=>e.Comment=l),"max-length":"125",label:a(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const L={class:"grid grid-rows-[55px,1fr]"},Q={class:"flex justify-between"},X={class:"va-h3"},Y={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},Z={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},ee={class:"flex-grow"},te={__name:"ParametersPage",setup(M){const{init:C}=P(),{t}=I(),i=g([]),c=g(null),N=g(!1),w=g([]),f=g([]),e=S({Name:"",NameRus:"",ShortNameRus:"",ShortName:"",WinCC:"",ParamsTypeID:"",UnitsID:"",Min:"",Max:"",Comment:""});function h(l){c.value.applyTransaction({remove:[l]})}function y(l,s){l.setData(s)}$("ondeleted",h),$("onupdated",y);const p=S([{headerName:t("table.headerRow"),valueGetter:"node.rowIndex + 1",width:80},{headerName:t("table.id"),field:"Uuid",hide:!0,flex:1},{headerName:t("table.name"),field:"Name",flex:1},{headerName:t("table.shortName"),field:"ShortName"},{headerName:t("menu.paramtypes"),hide:!0,field:"PName"},{headerName:t("menu.units"),field:"UName"},{headerName:t("table.min"),field:"Min"},{headerName:t("table.max"),field:"Max"},{headerName:t("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:K},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:A}]),n={sortable:!0,filter:!0},d=async()=>{try{const l=await b.get("/param");i.value=Array.isArray(l.data)?l.data:l.data.items}catch(l){console.error("Error fetching data:",l)}},V=async()=>{try{const l=await b.get("/paramtypes"),s=await b.get("/units");w.value=l.data.map(v=>({value:v.id,text:v.Name})),f.value=s.data.map(v=>({value:v.id,text:v.Name}))}catch(l){console.error("Error fetching graphics data:",l)}},R=async()=>{try{const{data:l}=await b.post("/param",e);l.status===200?(N.value=!1,e.Name="",e.NameRus="",e.ShortNameRus="",e.ShortName="",e.ParamsTypeID="",e.UnitsID="",e.Min="",e.Max="",e.Comment="",await d(),C({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",l.message)}catch(l){console.error("Error saving data:",l)}};return _(()=>{d(),V()}),(l,s)=>{const v=x("VaSelect"),W=x("VaTextarea"),O=x("VaModal"),B=x("ag-grid-vue");return k(),T("div",L,[m("main",null,[m("div",Q,[s[13]||(s[13]=m("span",{class:"flex w-full"},null,-1)),r(a(q),{onClick:s[0]||(s[0]=o=>N.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),r(O,{modelValue:N.value,"onUpdate:modelValue":s[11]||(s[11]=o=>N.value=o),"ok-text":a(t)("modals.apply"),"cancel-text":a(t)("modals.cancel"),onOk:R,"close-button":""},{default:U(()=>[m("h3",X,D(a(t)("modals.addParamsTitle")),1),m("div",null,[r(a(F),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:U(()=>[r(a(u),{class:"w-full",modelValue:e.Name,"onUpdate:modelValue":s[1]||(s[1]=o=>e.Name=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("form.name")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.NameRus,"onUpdate:modelValue":s[2]||(s[2]=o=>e.NameRus=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("form.nameRus")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.ShortName,"onUpdate:modelValue":s[3]||(s[3]=o=>e.ShortName=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("form.shortName")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.ShortNameRus,"onUpdate:modelValue":s[4]||(s[4]=o=>e.ShortNameRus=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("form.shortNameRus")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.WinCC,"onUpdate:modelValue":s[5]||(s[5]=o=>e.WinCC=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("form.wincc")},null,8,["modelValue","rules","label"]),m("div",Y,[r(a(u),{class:"w-full",modelValue:e.Min,"onUpdate:modelValue":s[6]||(s[6]=o=>e.Min=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("table.min")},null,8,["modelValue","rules","label"]),r(a(u),{class:"w-full",modelValue:e.Max,"onUpdate:modelValue":s[7]||(s[7]=o=>e.Max=o),rules:[o=>o&&o.length>0||a(t)("validation.required")],label:a(t)("table.max")},null,8,["modelValue","rules","label"])]),m("div",Z,[r(v,{modelValue:e.ParamsTypeID,"onUpdate:modelValue":s[8]||(s[8]=o=>e.ParamsTypeID=o),"value-by":"value",class:"mb-6",label:a(t)("menu.paramtypes"),options:w.value,clearable:""},null,8,["modelValue","label","options"]),r(v,{modelValue:e.UnitsID,"onUpdate:modelValue":s[9]||(s[9]=o=>e.UnitsID=o),"value-by":"value",class:"mb-6",label:a(t)("menu.units"),options:f.value,clearable:""},null,8,["modelValue","label","options"])]),r(W,{class:"w-full",modelValue:e.Comment,"onUpdate:modelValue":s[10]||(s[10]=o=>e.Comment=o),"max-length":"125",label:a(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),m("main",ee,[r(B,{rowData:i.value,columnDefs:p,defaultColDef:n,animateRows:"true",class:"ag-theme-material h-full",onGridReady:s[12]||(s[12]=o=>c.value=o.api)},null,8,["rowData","columnDefs"])])])}}};export{te as default};
