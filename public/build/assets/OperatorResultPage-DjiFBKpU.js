import{u as x,c as N,r as d,s as i,K as V,o as I,R as S,f as R,g as k,h as z,i as s,j as m,l as C,k as p,m as O,n as B}from"./app-JH6q8Ism.js";/* empty css                   */import{V as T}from"./VueShiftCalendar-DDvPnu5l.js";const $={class:"grid grid-rows-[55px,1fr]"},A={class:"flex-grow"},F={class:"m-2"},P={__name:"OperatorResultPage",props:{id:Number},setup(g){const{init:U}=x(),{locale:n,t:r}=N(),w=g,c=d([]),y=d(null),a=d({smena:null,day:null}),_=i(()=>[{headerName:r("table.headerRow"),valueGetter:"node.rowIndex + 1",width:80},{headerName:r("table.structure"),field:b(),flex:1},{headerName:r("table.name"),field:D(),flex:1},{headerName:r("table.want"),field:"multiplied_parameter_count"},{headerName:r("table.be"),field:"kiritilgan"},{headerName:"%",field:"foiz",valueFormatter:t=>`${t.value}%`},{headerName:r("table.operator"),field:"kiritgan_operator"}]),f=i(()=>a.value.day?`${a.value.day} - ${a.value.smena}`:""),h={sortable:!0,filter:!0},D=()=>(n.value==="uz","page_name"),b=()=>(n.value==="uz","factory_structure_name"),v=async()=>{try{const t={day:a.value.day,smena:a.value.smena},e=await B.get(`/getRowPageResult/${w.id}`,{params:t});c.value=Array.isArray(e.data)?e.data:e.data.items}catch(t){console.error("Error fetching data:",t)}};V(()=>a.value,()=>{v()},{deep:!0});let u=null;return I(()=>{const t=localStorage.getItem("locale");t&&(n.value=t);const e=new Date,o=e.getHours();if(o>=8&&o<20)a.value.smena=1,a.value.day=e.toISOString().split("T")[0];else if(a.value.smena=2,o<8){const l=new Date(e);l.setDate(e.getDate()-1),a.value.day=l.toISOString().split("T")[0]}else a.value.day=e.toISOString().split("T")[0];u=setInterval(()=>{v()},3e5)}),S(()=>{u&&clearInterval(u)}),i(()=>n.value==="uz"?"Русский":"O‘zbek"),(t,e)=>{const o=R("ag-grid-vue");return z(),k("div",$,[e[3]||(e[3]=s("main",null,[s("div",{class:"flex justify-between"},[s("span",{class:"flex w-full"})])],-1)),s("main",A,[s("div",F,[m(p(T),{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),"with-slot":!0},{default:C(()=>[m(p(O),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),label:"Smena",readonly:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),m(o,{rowData:c.value,columnDefs:_.value,defaultColDef:h,animateRows:"true",class:"ag-theme-material h-full",onGridReady:e[2]||(e[2]=l=>y.value=l.api)},null,8,["rowData","columnDefs"])])])}}};export{P as default};
