import{u as P,c as _,r as g,G as q,f as x,g as I,h as k,k as r,j as l,D as T,l as D,i as d,t as R,m as b,d as C,o as E,V as F,n as p,H as $}from"./app-c3a1ac49.js";/* empty css                   */const j={class:"h-full w-full text-center content-center"},A={class:"va-h3"},H={__name:"DeleteParam",props:["params"],setup(M){const{init:y}=P(),{t}=_(),u=g(!1),c=M,N=q("ondeleted"),w=async()=>{try{const{data:f}=await b.delete(`/param/${c.params.data.Uuid}`);f.status===200?(N(c.params.data),u.value=!1,y({message:t("login.successMessage"),color:"success"})):console.error("Error deleting data:",f.message)}catch(f){console.error("Error deleting data:",f)}};return(f,e)=>{const U=x("VaModal");return I(),k("main",j,[r(l(T),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:e[0]||(e[0]=h=>u.value=!0)}),r(U,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=h=>u.value=h),"ok-text":l(t)("modals.apply"),"cancel-text":l(t)("modals.cancel"),onClose:e[2]||(e[2]=h=>u.value=!1),onOk:w,"close-button":""},{default:D(()=>[d("h3",A,R(l(t)("modals.title")),1),d("p",null,R(l(t)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},z={class:"h-full w-full text-center content-center"},J={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},K={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},L={__name:"EditParam",props:["params"],setup(M){const{init:y}=P(),{t}=_(),u=M,c=g(!1),N=q("onupdated"),w=g([]),f=g([]),e=C({Name:"",NameRus:"",ShortNameRus:"",ShortName:"",ParamsTypeID:"",UnitsID:"",Min:"",Max:"",Comment:"",id:u.params.data.Uuid}),U=async()=>{try{const[i,o,m]=await Promise.all([b.get("/paramtypes"),b.get("/units"),b.get(`param/${u.params.data.Uuid}`)]);w.value=i.data.map(V=>({value:V.id,text:V.Name})),f.value=o.data.map(V=>({value:V.id,text:V.Name})),e.Name=m.data.Name,e.NameRus=m.data.NameRus,e.ShortNameRus=m.data.ShortNameRus,e.ShortName=m.data.ShortName,e.ParamsTypeID=+m.data.Pid,e.UnitsID=+m.data.Uid,e.Min=+m.data.Min,e.Max=+m.data.Max,e.Comment=m.data.Comment}catch(i){console.error("Error fetching data:",i)}},h=async()=>{try{const{data:i}=await b.put("/param",e);i.status===200?(N(u.params.node,i.unit),c.value=!1,y({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",i.message)}catch(i){console.error("Error saving data:",i)}};return E(()=>{}),(i,o)=>{const m=x("VaSelect"),V=x("VaTextarea"),S=x("VaModal");return I(),k("main",z,[r(l(T),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:o[0]||(o[0]=a=>c.value=!0)}),r(S,{modelValue:c.value,"onUpdate:modelValue":o[10]||(o[10]=a=>c.value=a),"ok-text":l(t)("modals.apply"),"cancel-text":l(t)("modals.cancel"),onOk:h,onClose:o[11]||(o[11]=a=>c.value=!1),"close-button":""},{default:D(()=>[d("h3",{class:"va-h3",onVnodeMounted:U},R(l(t)("modals.editFactory")),513),d("div",null,[r(l(F),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:D(()=>[r(l(p),{class:"w-full",modelValue:e.Name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.Name=a),rules:[a=>a&&a.length>0||l(t)("form.requiredField")],label:l(t)("form.name")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.NameRus,"onUpdate:modelValue":o[2]||(o[2]=a=>e.NameRus=a),rules:[a=>a&&a.length>0||l(t)("form.requiredField")],label:l(t)("form.nameRus")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.ShortName,"onUpdate:modelValue":o[3]||(o[3]=a=>e.ShortName=a),rules:[a=>a&&a.length>0||l(t)("form.requiredField")],label:l(t)("form.shortName")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.ShortNameRus,"onUpdate:modelValue":o[4]||(o[4]=a=>e.ShortNameRus=a),rules:[a=>a&&a.length>0||l(t)("form.requiredField")],label:l(t)("form.shortNameRus")},null,8,["modelValue","rules","label"]),d("div",J,[r(l(p),{class:"w-full",modelValue:e.Min,"onUpdate:modelValue":o[5]||(o[5]=a=>e.Min=a),rules:[a=>a&&a.length>0||l(t)("form.requiredField")],label:l(t)("table.min")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.Max,"onUpdate:modelValue":o[6]||(o[6]=a=>e.Max=a),rules:[a=>a&&a.length>0||l(t)("form.requiredField")],label:l(t)("table.max")},null,8,["modelValue","rules","label"])]),d("div",K,[r(m,{modelValue:e.ParamsTypeID,"onUpdate:modelValue":o[7]||(o[7]=a=>e.ParamsTypeID=a),"value-by":"value",class:"mb-6",label:l(t)("menu.paramtypes"),options:w.value,clearable:""},null,8,["modelValue","label","options"]),r(m,{modelValue:e.UnitsID,"onUpdate:modelValue":o[8]||(o[8]=a=>e.UnitsID=a),"value-by":"value",class:"mb-6",label:l(t)("menu.units"),options:f.value,clearable:""},null,8,["modelValue","label","options"])]),r(V,{class:"w-full",modelValue:e.Comment,"onUpdate:modelValue":o[9]||(o[9]=a=>e.Comment=a),"max-length":"125",label:l(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};const Q={class:"grid grid-rows-[55px,1fr]"},W={class:"flex justify-between"},X=d("span",{class:"flex w-full"},null,-1),Y={class:"va-h3"},Z={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},ee={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},ae={class:"flex-grow"},se={__name:"ParametersPage",setup(M){const{init:y}=P(),{t}=_(),u=g([]),c=g(null),N=g(!1),w=g([]),f=g([]),e=C({Name:"",NameRus:"",ShortNameRus:"",ShortName:"",ParamsTypeID:"",UnitsID:"",Min:"",Max:"",Comment:""});function U(a){c.value.applyTransaction({remove:[a]})}function h(a,n){a.setData(n)}$("ondeleted",U),$("onupdated",h);const i=C([{headerName:t("table.headerRow"),valueGetter:"node.rowIndex + 1",width:80},{headerName:t("table.id"),field:"Uuid",hide:!0,flex:1},{headerName:t("table.name"),field:"Name",flex:1},{headerName:t("table.shortName"),field:"ShortName"},{headerName:t("menu.paramtypes"),hide:!0,field:"PName"},{headerName:t("menu.units"),field:"UName"},{headerName:t("table.min"),field:"Min"},{headerName:t("table.max"),field:"Max"},{headerName:t("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:L},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:H}]),o={sortable:!0,filter:!0},m=async()=>{try{const a=await b.get("/param");u.value=Array.isArray(a.data)?a.data:a.data.items}catch(a){console.error("Error fetching data:",a)}},V=async()=>{try{const a=await b.get("/paramtypes"),n=await b.get("/units");w.value=a.data.map(v=>({value:v.id,text:v.Name})),f.value=n.data.map(v=>({value:v.id,text:v.Name}))}catch(a){console.error("Error fetching graphics data:",a)}},S=async()=>{try{const{data:a}=await b.post("/param",e);a.status===200?(N.value=!1,e.Name="",e.NameRus="",e.ShortNameRus="",e.ShortName="",e.ParamsTypeID="",e.UnitsID="",e.Min="",e.Max="",e.Comment="",await m(),y({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",a.message)}catch(a){console.error("Error saving data:",a)}};return E(()=>{m(),V()}),(a,n)=>{const v=x("VaSelect"),O=x("VaTextarea"),G=x("VaModal"),B=x("ag-grid-vue");return I(),k("div",Q,[d("main",null,[d("div",W,[X,r(l(T),{onClick:n[0]||(n[0]=s=>N.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),r(G,{modelValue:N.value,"onUpdate:modelValue":n[10]||(n[10]=s=>N.value=s),"ok-text":l(t)("modals.apply"),"cancel-text":l(t)("modals.cancel"),onOk:S,"close-button":""},{default:D(()=>[d("h3",Y,R(l(t)("modals.addParamsTitle")),1),d("div",null,[r(l(F),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:D(()=>[r(l(p),{class:"w-full",modelValue:e.Name,"onUpdate:modelValue":n[1]||(n[1]=s=>e.Name=s),rules:[s=>s&&s.length>0||l(t)("validation.required")],label:l(t)("form.name")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.NameRus,"onUpdate:modelValue":n[2]||(n[2]=s=>e.NameRus=s),rules:[s=>s&&s.length>0||l(t)("validation.required")],label:l(t)("form.nameRus")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.ShortName,"onUpdate:modelValue":n[3]||(n[3]=s=>e.ShortName=s),rules:[s=>s&&s.length>0||l(t)("validation.required")],label:l(t)("form.shortName")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.ShortNameRus,"onUpdate:modelValue":n[4]||(n[4]=s=>e.ShortNameRus=s),rules:[s=>s&&s.length>0||l(t)("validation.required")],label:l(t)("form.shortNameRus")},null,8,["modelValue","rules","label"]),d("div",Z,[r(l(p),{class:"w-full",modelValue:e.Min,"onUpdate:modelValue":n[5]||(n[5]=s=>e.Min=s),rules:[s=>s&&s.length>0||l(t)("validation.required")],label:l(t)("table.min")},null,8,["modelValue","rules","label"]),r(l(p),{class:"w-full",modelValue:e.Max,"onUpdate:modelValue":n[6]||(n[6]=s=>e.Max=s),rules:[s=>s&&s.length>0||l(t)("validation.required")],label:l(t)("table.max")},null,8,["modelValue","rules","label"])]),d("div",ee,[r(v,{modelValue:e.ParamsTypeID,"onUpdate:modelValue":n[7]||(n[7]=s=>e.ParamsTypeID=s),"value-by":"value",class:"mb-6",label:l(t)("menu.paramtypes"),options:w.value,clearable:""},null,8,["modelValue","label","options"]),r(v,{modelValue:e.UnitsID,"onUpdate:modelValue":n[8]||(n[8]=s=>e.UnitsID=s),"value-by":"value",class:"mb-6",label:l(t)("menu.units"),options:f.value,clearable:""},null,8,["modelValue","label","options"])]),r(O,{class:"w-full",modelValue:e.Comment,"onUpdate:modelValue":n[9]||(n[9]=s=>e.Comment=s),"max-length":"125",label:l(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),d("main",ae,[r(B,{rowData:u.value,columnDefs:i,defaultColDef:o,animateRows:"true",class:"ag-theme-material h-full",onGridReady:n[11]||(n[11]=s=>c.value=s.api)},null,8,["rowData","columnDefs"])])])}}};export{se as default};
