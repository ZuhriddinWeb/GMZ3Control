import{u as O,r as N,E as M,c as _,f as V,g as E,h as y,j as c,k as e,z as $,l as R,i as g,t as G,n as b,d as U,V as F,m as x,a as Y,s as v,o as Z,F as ee,G as ae,H as S}from"./app-B5o22c3C.js";/* empty css                   */const te={class:"h-full w-full text-center content-center"},le={class:"va-h3"},oe={__name:"DeleteGroup",props:["params"],setup(w){const{init:h}=O(),p=N(!1),m=w,r=M("ondeleted"),{t:o}=_(),u=async()=>{try{const{data:f}=await b.delete(`/groups/${m.params.data.id}`);f.status===200?(r(m.params.data),p.value=!1,h({message:o("login.successMessage"),color:"success"})):console.error("Error deleting data:",f.message)}catch(f){console.error("Error deleting data:",f)}};return(f,i)=>{const d=V("VaModal");return y(),E("main",te,[c(e($),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:i[0]||(i[0]=a=>p.value=!0)}),c(d,{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=a=>p.value=a),"ok-text":e(o)("modals.apply"),"cancel-text":e(o)("modals.cancel"),onClose:i[2]||(i[2]=a=>p.value=!1),onOk:u,"close-button":""},{default:R(()=>[g("h3",le,G(e(o)("modals.title")),1),g("p",null,G(e(o)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},se={class:"h-full w-full text-center content-center"},re={__name:"EditGroup",props:["params"],setup(w){const{init:h}=O(),p=w,m=N(!1),r=M("onupdated"),{t:o}=_(),u=U({Name:"",NameRus:"",Comment:"",StructureID:"",PageID:"",OrderNumberGroup:"",id:p.params.data.id}),f=async()=>{b.get(`/getRowGroupEdits/${p.params.data.id}`).then(d=>{u.Name=d.data[0].Name,u.NameRus=d.data[0].NameRus,u.Comment=d.data[0].Comment,u.StructureID=d.data[0].StructureID,u.PageID=d.data[0].PageID,u.OrderNumberGroup=d.data[0].OrderNumberGroup}).catch(d=>{console.error("Error fetching data:",d)})},i=async()=>{try{const{data:d}=await b.put("/groups",u);d.status===200?(r(p.params.node,d.unit),m.value=!1,h({message:o("login.successMessage"),color:"success"})):console.error("Error saving data:",d.message)}catch(d){console.error("Error saving data:",d)}};return(d,a)=>{const k=V("VaTextarea"),D=V("VaModal");return y(),E("main",se,[c(e($),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:a[0]||(a[0]=s=>m.value=!0)}),c(D,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=s=>m.value=s),"ok-text":e(o)("modals.apply"),"cancel-text":e(o)("modals.cancel"),onOk:i,onClose:a[6]||(a[6]=s=>m.value=!1),"close-button":""},{default:R(()=>[g("h3",{class:"va-h3",onVnodeMounted:f},G(e(o)("modals.editFactory")),513),g("div",null,[c(e(F),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:R(()=>[c(e(x),{class:"w-full",modelValue:u.Name,"onUpdate:modelValue":a[1]||(a[1]=s=>u.Name=s),rules:[s=>s&&s.length>0||e(o)("validation.requiredField")],label:e(o)("form.name")},null,8,["modelValue","rules","label"]),c(e(x),{class:"w-full",modelValue:u.NameRus,"onUpdate:modelValue":a[2]||(a[2]=s=>u.NameRus=s),rules:[s=>s&&s.length>0||e(o)("validation.requiredField")],label:e(o)("form.nameRus")},null,8,["modelValue","rules","label"]),c(e(x),{class:"w-full",modelValue:u.OrderNumberGroup,"onUpdate:modelValue":a[3]||(a[3]=s=>u.OrderNumberGroup=s),rules:[s=>s&&s.length>0||e(o)("validation.required")],label:e(o)("table.OrderNumber")},null,8,["modelValue","rules","label"]),c(k,{class:"w-full",modelValue:u.Comment,"onUpdate:modelValue":a[4]||(a[4]=s=>u.Comment=s),"max-length":"125",label:e(o)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},ne={class:"grid grid-rows-[55px,1fr]"},ue={class:"flex justify-between"},de={class:"va-h3"},me={class:"flex-grow"},pe={__name:"GroupsPage",props:["id","page"],setup(w){const{init:h}=O(),p=Y(),{locale:m,t:r}=_(),o=w,u=N([]),f=N(null),i=N(!1),d=N([]),a=U({StructureID:o.id,PageID:o.page,Name:"",NameRus:"",OrderNumberGroup:"",Comment:""}),k=v(()=>p.state.user.roles[22]),D=t=>{var l,C;return((C=(l=k.value)==null?void 0:l.pivot)==null?void 0:C[t])==="1"},s=v(()=>D("create")),P=v(()=>D("update")),z=v(()=>D("delete"));function q(t){f.value.applyTransaction({remove:[t]})}function B(t,l){t.setData(l)}S("ondeleted",q),S("onupdated",B);const T=v(()=>{const t=[{headerName:r("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:r("table.structure"),field:L(),flex:1},{headerName:r("table.page"),field:J(),flex:1},{headerName:r("table.name"),field:A(),flex:1},{headerName:r("table.comment"),field:H()},{headerName:r("table.OrderNumber"),field:"OrderNumberGroup"}];return P.value&&t.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:re}),z.value&&t.push({cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:oe}),t}),j={sortable:!0,filter:!0},A=()=>m.value==="uz"?"Name":"NameRus",H=()=>(m.value==="uz","Comment"),L=()=>m.value==="uz"?"SName":"NameRus",J=()=>(m.value==="uz","NName"),I=async()=>{try{const t=await b.get(`/getRowGroup/${o.id}/${o.page}`);u.value=Array.isArray(t.data)?t.data:t.data.items}catch(t){console.error("Error fetching data:",t)}},K=async()=>{try{const t=await b.get("/structure");d.value=t.data.map(l=>({value:l.id,text:m.value==="uz"?l.Name:l.NameRus}))}catch(t){console.error("Error fetching graphics data:",t)}},Q=async()=>{try{const{data:t}=await b.post("/groups",a);t.status===200?(i.value=!1,a.StructureID="",a.Name="",a.NameRus="",a.NumberPage="",a.NameRus="",a.Comment="",await I(),h({message:r("login.successMessage"),color:"success"})):console.error("Error saving data:",t.message)}catch(t){console.error("Error saving data:",t)}};return Z(()=>{const t=localStorage.getItem("locale");t&&(m.value=t),I()}),v(()=>m.value==="uz"?"Русский":"O‘zbek"),(t,l)=>{const C=V("VaTextarea"),W=V("VaModal"),X=V("ag-grid-vue");return y(),E("div",ne,[g("main",null,[g("div",ue,[l[7]||(l[7]=g("span",{class:"flex w-full"},null,-1)),s.value?(y(),ee(e($),{key:0,onClick:l[0]||(l[0]=n=>(i.value=!0,K)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})):ae("",!0)]),c(W,{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=n=>i.value=n),"ok-text":e(r)("buttons.save"),"cancel-text":e(r)("buttons.cancel"),onOk:Q,"close-button":""},{default:R(()=>[g("h3",de,G(e(r)("modals.addPageGroup")),1),g("div",null,[c(e(F),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:R(()=>[c(e(x),{class:"w-full",modelValue:a.Name,"onUpdate:modelValue":l[1]||(l[1]=n=>a.Name=n),rules:[n=>n&&n.length>0||e(r)("validation.requiredField")],label:e(r)("form.name")},null,8,["modelValue","rules","label"]),c(e(x),{class:"w-full",modelValue:a.NameRus,"onUpdate:modelValue":l[2]||(l[2]=n=>a.NameRus=n),rules:[n=>n&&n.length>0||e(r)("validation.requiredField")],label:e(r)("form.nameRus")},null,8,["modelValue","rules","label"]),c(e(x),{class:"w-full",modelValue:a.OrderNumberGroup,"onUpdate:modelValue":l[3]||(l[3]=n=>a.OrderNumberGroup=n),rules:[n=>n&&n.length>0||e(r)("validation.required")],label:e(r)("table.OrderNumber")},null,8,["modelValue","rules","label"]),c(C,{class:"w-full",modelValue:a.Comment,"onUpdate:modelValue":l[4]||(l[4]=n=>a.Comment=n),"max-length":"125",label:e(r)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),g("main",me,[c(X,{rowData:u.value,columnDefs:T.value,defaultColDef:j,animateRows:"true",class:"ag-theme-material h-full",onGridReady:l[6]||(l[6]=n=>f.value=n.api)},null,8,["rowData","columnDefs"])])])}}};export{pe as default};
