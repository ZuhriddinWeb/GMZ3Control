import{u as F,c as z,r as c,d as E,s as N,o as M,n as f,f as p,g as T,h as q,i as n,j as r,k as l,z as B,l as v,t as I,V as $,m as d,H as h}from"./app-BnZHz_BC.js";/* empty css                   */import{_ as j,a as G}from"./EditUnitsModal-DkappaoM.js";const O={class:"grid grid-rows-[55px,1fr]"},A={class:"flex justify-between"},H={class:"va-h3"},L={class:"flex-grow"},W={__name:"UnitsPage",setup(P){const{init:V}=F(),{locale:u,t}=z(),i=c([]),g=c(null),m=c(!1),s=E({Name:"",ShortName:"",NameRus:"",ShortNameRus:"",Comment:""});function w(o){g.value.applyTransaction({remove:[o]})}function b(o,a){o.setData(a)}h("ondeleted",w),h("onupdated",b);const x=N(()=>[{headerName:t("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:t("table.name"),field:S(),flex:1},{headerName:t("table.shortName"),field:_()},{headerName:t("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:j},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:G}]),R={sortable:!0,filter:!0},S=()=>u.value==="uz"?"Name":"NameRus",_=()=>u.value==="uz"?"ShortName":"ShortNameRus",C=async()=>{try{const o=await f.get("/units");console.log(o.data),i.value=o.data}catch(o){console.error("Error fetching data:",o)}},D=async()=>{try{const{data:o}=await f.post("/units",s);o.status===200?(m.value=!1,s.Name="",s.ShortName="",s.NameRus="",s.ShortNameRus="",s.Comment="",await C(),V({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",o.message)}catch(o){console.error("Error saving data:",o)}};return M(()=>{const o=localStorage.getItem("locale");o&&(u.value=o),(async()=>{try{const a=await f.get("/units");i.value=a.data}catch(a){console.error("Error fetching data:",a)}})()}),N(()=>u.value==="uz"?"Русский":"O‘zbek"),(o,a)=>{const y=p("VaTextarea"),k=p("VaModal"),U=p("ag-grid-vue");return q(),T("div",O,[n("main",null,[n("div",A,[a[8]||(a[8]=n("span",{class:"flex w-full"},null,-1)),r(l(B),{onClick:a[0]||(a[0]=e=>m.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),r(k,{modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=e=>m.value=e),"ok-text":l(t)("buttons.save"),"cancel-text":l(t)("buttons.cancel"),onOk:D,"close-button":""},{default:v(()=>[n("h3",H,I(l(t)("modals.addUnitTitle")),1),n("div",null,[r(l($),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:v(()=>[r(l(d),{class:"w-full",modelValue:s.Name,"onUpdate:modelValue":a[1]||(a[1]=e=>s.Name=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.name")},null,8,["modelValue","rules","label"]),r(l(d),{class:"w-full",modelValue:s.NameRus,"onUpdate:modelValue":a[2]||(a[2]=e=>s.NameRus=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.nameRus")},null,8,["modelValue","rules","label"]),r(l(d),{class:"w-full",modelValue:s.ShortName,"onUpdate:modelValue":a[3]||(a[3]=e=>s.ShortName=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.shortName")},null,8,["modelValue","rules","label"]),r(l(d),{class:"w-full",modelValue:s.ShortNameRus,"onUpdate:modelValue":a[4]||(a[4]=e=>s.ShortNameRus=e),rules:[e=>e&&e.length>0||l(t)("validation.requiredField")],label:l(t)("form.shortNameRus")},null,8,["modelValue","rules","label"]),r(y,{class:"w-full",modelValue:s.Comment,"onUpdate:modelValue":a[5]||(a[5]=e=>s.Comment=e),"max-length":"125",label:l(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),n("main",L,[r(U,{rowData:i.value,columnDefs:x.value,defaultColDef:R,animateRows:"true",class:"ag-theme-material h-full",onGridReady:a[7]||(a[7]=e=>g.value=e.api)},null,8,["rowData","columnDefs"])])])}}};export{W as default};
