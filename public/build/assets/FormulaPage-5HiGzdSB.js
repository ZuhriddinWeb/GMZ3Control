import{c as B,r as u,d as F,s as V,o as I,f as r,g as E,h as M,i as m,j as n,l as g,t as T,k as s,n as _,H as h}from"./app-BikTMOPd.js";/* empty css                   */import{_ as U,a as A}from"./EditSource-DpQpQlAC.js";const $={class:"grid grid-rows-[55px,1fr]"},j={class:"flex justify-between"},q={class:"va-h3"},z={class:"flex-grow"},P={__name:"FormulaPage",setup(G){const{locale:c,t:o}=B(),i=u([]),f=u(null),d=u(!1),t=F({Name:"",ShortName:"",Comment:""});function x(e){f.value.applyTransaction({remove:[e]})}function w(e,a){e.setData(a)}h("ondeleted",x),h("onupdated",w);const N=V(()=>[{headerName:o("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:o("table.name"),field:"Name",flex:1},{headerName:o("table.shortName"),field:"ShortName"},{headerName:o("table.comment"),field:"Comment",flex:1},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:U},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:A}]),b={sortable:!0,filter:!0},p=async()=>{try{const e=await _.get("/formula");i.value=Array.isArray(e.data)?e.data:e.data.items}catch(e){console.error("Error fetching data:",e)}},C=async()=>{try{const{data:e}=await _.post("/formula",t);e.status===200?(d.value=!1,t.Name="",t.ShortName="",t.Comment="",await p()):console.error("Error saving data:",e.message)}catch(e){console.error("Error saving data:",e)}};return I(()=>{const e=localStorage.getItem("locale");e&&(c.value=e),p()}),V(()=>c.value==="uz"?"Русский":"O‘zbek"),(e,a)=>{const D=r("VaButton"),v=r("VaInput"),y=r("VaTextarea"),S=r("VaForm"),k=r("VaModal"),R=r("ag-grid-vue");return M(),E("div",$,[m("main",null,[m("div",j,[a[6]||(a[6]=m("span",{class:"flex w-full"},null,-1)),n(D,{onClick:a[0]||(a[0]=l=>d.value=!0),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),n(k,{modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=l=>d.value=l),"ok-text":s(o)("buttons.save"),"cancel-text":s(o)("buttons.cancel"),onOk:C,"close-button":""},{default:g(()=>[m("h3",q,T(s(o)("modals.addSourceTitle")),1),m("div",null,[n(S,{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:g(()=>[n(v,{class:"w-full",modelValue:t.Name,"onUpdate:modelValue":a[1]||(a[1]=l=>t.Name=l),rules:[l=>l&&l.length>0||s(o)("form.requiredField")],label:s(o)("form.name")},null,8,["modelValue","rules","label"]),n(v,{class:"w-full",modelValue:t.ShortName,"onUpdate:modelValue":a[2]||(a[2]=l=>t.ShortName=l),rules:[l=>l&&l.length>0||s(o)("form.requiredField")],label:s(o)("form.shortName")},null,8,["modelValue","rules","label"]),n(y,{class:"w-full",modelValue:t.Comment,"onUpdate:modelValue":a[3]||(a[3]=l=>t.Comment=l),"max-length":"125",label:s(o)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),m("main",z,[n(R,{rowData:i.value,columnDefs:N.value,defaultColDef:b,animateRows:"true",class:"ag-theme-material h-full",onGridReady:a[5]||(a[5]=l=>f.value=l.api)},null,8,["rowData","columnDefs"])])])}}};export{P as default};
