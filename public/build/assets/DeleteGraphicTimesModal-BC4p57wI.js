import{u as _,r as b,E as k,d as B,c as w,f as h,g as G,h as M,j as d,k as s,z as S,l as C,i as p,t as E,V as O,n as f}from"./app-auAGtMLF.js";const P={class:"h-full w-full text-center content-center"},j={class:"grid grid-cols-2 md:grid-cols-2 gap-2 items-end w-full"},F={class:"grid grid-cols-2 md:grid-cols-3 gap-3 items-end"},R={__name:"EditGraphicTimesModal",props:["params"],setup(x){const{init:T}=_(),i=x,n=b(!1),g=b([]),V=b([]),y=k("onupdated"),a=B({GraphicId:"",ChangeId:"",Name:"",StartTime:"",EndTime:null,id:i.params.data.id}),{t}=w();function v(l){const[e,c,r]=l.split(":"),u=new Date;return u.setHours(parseInt(e,10)),u.setMinutes(parseInt(c,10)),u.setSeconds(parseInt(r,10)),u}function m(l){return l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}const I={StartTime:"08:00:00.0000000",EndTime:"08:05:00.0000000"},$=v(I.StartTime),D=v(I.EndTime);m($),m(D);const N=async()=>{try{const l=await f.get("/graphics"),e=await f.get("/changes");g.value=l.data.map(r=>({value:r.id,text:r.Name})),V.value=e.data.map(r=>({value:r.Change,text:r.Change}));const c=await f.get(`graphictimes/${i.params.data.id}`);a.GraphicId=+c.data.Gid,a.ChangeId=+c.data.Chid}catch(l){console.error("Error fetching data:",l)}},U=async()=>{try{const{data:l}=await f.put("/graphictimes",a);l.status===200?(n.value=!1,y(i.params.node,l.unit),T({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",l.message)}catch(l){console.error("Error saving data:",l)}};return(l,e)=>{const c=h("VaSelect"),r=h("VaTimeInput"),u=h("VaModal");return M(),G("main",P,[d(s(S),{round:"",icon:"edit",preset:"primary",class:"mt-1",onClick:e[0]||(e[0]=o=>n.value=!0)}),d(u,{modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=o=>n.value=o),"ok-text":s(t)("modals.apply"),"cancel-text":s(t)("modals.cancel"),onOk:U,onClose:e[7]||(e[7]=o=>n.value=!1),"close-button":""},{default:C(()=>[p("h3",{class:"va-h3",onVnodeMounted:N},E(s(t)("modals.editFactory")),513),p("div",null,[d(s(O),{ref:"formRef",class:"flex flex-col items-baseline gap-2"},{default:C(()=>[p("div",j,[d(c,{modelValue:a.GraphicId,"onUpdate:modelValue":e[1]||(e[1]=o=>a.GraphicId=o),"value-by":"value",class:"mb-6",label:s(t)("form.selectGraphic"),options:g.value,clearable:""},null,8,["modelValue","label","options"]),d(c,{modelValue:a.ChangeId,"onUpdate:modelValue":e[2]||(e[2]=o=>a.ChangeId=o),"value-by":"value",class:"mb-6",label:s(t)("form.selectChange"),options:V.value,clearable:""},null,8,["modelValue","label","options"])]),p("div",F,[d(r,{clearable:"","clearable-icon":"cancel",color:"textPrimary",label:s(t)("form.name"),modelValue:a.Name,"onUpdate:modelValue":e[3]||(e[3]=o=>a.Name=o)},null,8,["label","modelValue"]),d(r,{clearable:"","clearable-icon":"cancel",color:"textPrimary",label:s(t)("form.startTime"),modelValue:a.Name,"onUpdate:modelValue":e[4]||(e[4]=o=>a.Name=o)},null,8,["label","modelValue"]),d(r,{modelValue:a.EndTime,"onUpdate:modelValue":e[5]||(e[5]=o=>a.EndTime=o),clearable:"","clearable-icon":"cancel",color:"textPrimary",label:s(t)("form.endTime")},null,8,["modelValue","label"])])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])])}}},z={class:"h-full w-full text-center content-center"},H={class:"va-h3"},q={__name:"DeleteGraphicTimesModal",props:["params"],setup(x){const{init:T}=_(),{t:i}=w(),n=b(!1),g=x,V=k("ondeleted"),y=async()=>{try{const{data:a}=await f.delete(`/graphictimes/${g.params.data.id}`);a.status===200?(V(g.params.data),T({message:i("login.successMessage"),color:"success"}),n.value=!1):console.error("Error deleting data:",a.message)}catch(a){console.error("Error deleting data:",a)}};return(a,t)=>{const v=h("VaModal");return M(),G("main",z,[d(s(S),{round:"",icon:"delete",preset:"primary",class:"mt-1",onClick:t[0]||(t[0]=m=>n.value=!0)}),d(v,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=m=>n.value=m),"ok-text":s(i)("modals.apply"),"cancel-text":s(i)("modals.cancel"),onClose:t[2]||(t[2]=m=>n.value=!1),onOk:y,"close-button":""},{default:C(()=>[p("h3",H,E(s(i)("modals.title")),1),p("p",null,E(s(i)("modals.message")),1)]),_:1},8,["modelValue","ok-text","cancel-text"])])}}};export{R as _,q as a};
