import{u as B,c as E,r as m,d as M,H as V,x as _,o as T,f as i,g as G,h as q,i as n,k as r,j as s,l as h,m as c,D as A,t as O,V as $,n as f}from"./app-b6c98efa.js";/* empty css                   */import{_ as j,a as H}from"./EditBlog-3825a9f6.js";const L={class:"grid grid-rows-[55px,1fr]"},J={class:"flex justify-between"},K=n("span",{class:"flex w-full"},null,-1),Q={class:"va-h3"},W={class:"grid grid-cols-1 md:grid-cols-1 gap-2 items-end w-full"},X={class:"flex-grow"},le={__name:"NumberPage",setup(Y){const{init:x}=B(),{locale:u,t}=E(),p=m([]),g=m(null),d=m(!1),v=m([]),o=M({StructureID:"",Name:"",NameRus:"",NumberPage:"",Comment:""});function w(a){g.value.applyTransaction({remove:[a]})}function D(a,l){a.setData(l)}V("ondeleted",w),V("onupdated",D);const y=_(()=>[{headerName:t("table.headerRow"),valueGetter:"node.rowIndex + 1"},{headerName:t("table.structure"),field:k(),flex:1},{headerName:t("table.name"),field:S(),flex:1},{headerName:t("table.numberpage"),field:"NumberPage"},{headerName:t("table.comment"),field:C()},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:j},{cellClass:["px-0"],headerName:"",field:"",width:70,cellRenderer:H}]),R={sortable:!0,filter:!0},S=()=>u.value==="uz"?"Name":"NameRus",C=()=>u.value==="uz"?"ShortName":"ShortNameRus",k=()=>u.value==="uz"?"SName":"NameRus",b=async()=>{try{const a=await c.get("/pages");p.value=Array.isArray(a.data)?a.data:a.data.items}catch(a){console.error("Error fetching data:",a)}},N=async()=>{try{const a=await c.get("/structure");v.value=a.data.map(l=>({value:l.id,text:u.value==="uz"?l.Name:l.NameRus}))}catch(a){console.error("Error fetching graphics data:",a)}},I=async()=>{try{const{data:a}=await c.post("/pages",o);a.status===200?(d.value=!1,o.StructureID="",o.Name="",o.NameRus="",o.NumberPage="",o.Comment="",await b(),x({message:t("login.successMessage"),color:"success"})):console.error("Error saving data:",a.message)}catch(a){console.error("Error saving data:",a)}};return T(()=>{const a=localStorage.getItem("locale");a&&(u.value=a),b(),N()}),_(()=>u.value==="uz"?"Русский":"O‘zbek"),(a,l)=>{const P=i("VaSelect"),F=i("VaTextarea"),z=i("VaModal"),U=i("ag-grid-vue");return G(),q("div",L,[n("main",null,[n("div",J,[K,r(s(A),{onClick:l[0]||(l[0]=e=>(d.value=!0,N)),class:"w-14 h-12 mt-1 mr-1",icon:"add"})]),r(z,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),"ok-text":s(t)("buttons.save"),"cancel-text":s(t)("buttons.cancel"),onOk:I,"close-button":""},{default:h(()=>[n("h3",Q,O(s(t)("modals.addPageTitle")),1),n("div",null,[r(s($),{ref:"formRef",class:"flex flex-col items-baseline gap-1"},{default:h(()=>[n("div",W,[r(P,{modelValue:o.StructureID,"onUpdate:modelValue":l[1]||(l[1]=e=>o.StructureID=e),"value-by":"value",class:"mb-1",label:s(t)("form.structureName"),options:v.value,clearable:""},null,8,["modelValue","label","options"])]),r(s(f),{class:"w-full",modelValue:o.NumberPage,"onUpdate:modelValue":l[2]||(l[2]=e=>o.NumberPage=e),type:"number",rules:[e=>e&&e.length>0||s(t)("validation.requiredField")],label:s(t)("form.numberpage")},null,8,["modelValue","rules","label"]),r(s(f),{class:"w-full",modelValue:o.Name,"onUpdate:modelValue":l[3]||(l[3]=e=>o.Name=e),rules:[e=>e&&e.length>0||s(t)("validation.requiredField")],label:s(t)("form.name")},null,8,["modelValue","rules","label"]),r(s(f),{class:"w-full",modelValue:o.NameRus,"onUpdate:modelValue":l[4]||(l[4]=e=>o.NameRus=e),rules:[e=>e&&e.length>0||s(t)("validation.requiredField")],label:s(t)("form.nameRus")},null,8,["modelValue","rules","label"]),r(F,{class:"w-full",modelValue:o.Comment,"onUpdate:modelValue":l[5]||(l[5]=e=>o.Comment=e),"max-length":"125",label:s(t)("form.comment")},null,8,["modelValue","label"])]),_:1},512)])]),_:1},8,["modelValue","ok-text","cancel-text"])]),n("main",X,[r(U,{rowData:p.value,columnDefs:y.value,defaultColDef:R,animateRows:"true",class:"ag-theme-material h-full",onGridReady:l[7]||(l[7]=e=>g.value=e.api)},null,8,["rowData","columnDefs"])])])}}};export{le as default};
